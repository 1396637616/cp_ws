"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/graphql";
exports.ids = ["pages/api/graphql"];
exports.modules = {

/***/ "apollo-server-micro":
/*!**************************************!*\
  !*** external "apollo-server-micro" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("apollo-server-micro");

/***/ }),

/***/ "graphql":
/*!**************************!*\
  !*** external "graphql" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("graphql");

/***/ }),

/***/ "graphql-type-json":
/*!************************************!*\
  !*** external "graphql-type-json" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("graphql-type-json");

/***/ }),

/***/ "knex":
/*!***********************!*\
  !*** external "knex" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("knex");

/***/ }),

/***/ "lodash/camelCase":
/*!***********************************!*\
  !*** external "lodash/camelCase" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("lodash/camelCase");

/***/ }),

/***/ "lodash/capitalize":
/*!************************************!*\
  !*** external "lodash/capitalize" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("lodash/capitalize");

/***/ }),

/***/ "lodash/differenceWith":
/*!****************************************!*\
  !*** external "lodash/differenceWith" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("lodash/differenceWith");

/***/ }),

/***/ "lodash/isEmpty":
/*!*********************************!*\
  !*** external "lodash/isEmpty" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("lodash/isEmpty");

/***/ }),

/***/ "lodash/isEqual":
/*!*********************************!*\
  !*** external "lodash/isEqual" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("lodash/isEqual");

/***/ }),

/***/ "lodash/isNil":
/*!*******************************!*\
  !*** external "lodash/isNil" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("lodash/isNil");

/***/ }),

/***/ "lodash/isPlainObject":
/*!***************************************!*\
  !*** external "lodash/isPlainObject" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("lodash/isPlainObject");

/***/ }),

/***/ "lodash/mapKeys":
/*!*********************************!*\
  !*** external "lodash/mapKeys" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("lodash/mapKeys");

/***/ }),

/***/ "lodash/mapValues":
/*!***********************************!*\
  !*** external "lodash/mapValues" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("lodash/mapValues");

/***/ }),

/***/ "lodash/pickBy":
/*!********************************!*\
  !*** external "lodash/pickBy" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("lodash/pickBy");

/***/ }),

/***/ "lodash/reduce":
/*!********************************!*\
  !*** external "lodash/reduce" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("lodash/reduce");

/***/ }),

/***/ "lodash/snakeCase":
/*!***********************************!*\
  !*** external "lodash/snakeCase" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("lodash/snakeCase");

/***/ }),

/***/ "lodash/uniq":
/*!******************************!*\
  !*** external "lodash/uniq" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("lodash/uniq");

/***/ }),

/***/ "lodash/uniqBy":
/*!********************************!*\
  !*** external "lodash/uniqBy" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("lodash/uniqBy");

/***/ }),

/***/ "log4js":
/*!*************************!*\
  !*** external "log4js" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("log4js");

/***/ }),

/***/ "micro-cors":
/*!*****************************!*\
  !*** external "micro-cors" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("micro-cors");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "posthog-node":
/*!*******************************!*\
  !*** external "posthog-node" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("posthog-node");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "sql-formatter":
/*!********************************!*\
  !*** external "sql-formatter" ***!
  \********************************/
/***/ ((module) => {

module.exports = import("sql-formatter");;

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("uuid");;

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgraphql&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cgraphql.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgraphql&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cgraphql.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_graphql_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\graphql.ts */ \"(api)/./src/pages/api/graphql.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_graphql_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_graphql_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_graphql_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_graphql_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/graphql\",\n        pathname: \"/api/graphql\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_graphql_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdyYXBocWwmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2dyYXBocWwudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLz9kNTVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXGdyYXBocWwudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ncmFwaHFsXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ3JhcGhxbFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgraphql&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cgraphql.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/apollo/server/adaptors/ibisAdaptor.ts":
/*!***************************************************!*\
  !*** ./src/apollo/server/adaptors/ibisAdaptor.ts ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IbisAdaptor: () => (/* binding */ IbisAdaptor),\n/* harmony export */   SupportedDataSource: () => (/* binding */ SupportedDataSource),\n/* harmony export */   ValidationRules: () => (/* binding */ ValidationRules)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _server_utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/utils/logger */ \"(api)/./src/apollo/server/utils/logger.ts\");\n/* harmony import */ var _server_utils_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/utils/error */ \"(api)/./src/apollo/server/utils/error.ts\");\n/* harmony import */ var _server_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @server/config */ \"(api)/./src/apollo/server/config.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _server_services__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @server/services */ \"(api)/./src/apollo/server/services/index.ts\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _dataSource__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dataSource */ \"(api)/./src/apollo/server/dataSource.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__, _server_services__WEBPACK_IMPORTED_MODULE_5__]);\n([axios__WEBPACK_IMPORTED_MODULE_0__, _server_services__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst logger = (0,_server_utils_logger__WEBPACK_IMPORTED_MODULE_1__.getLogger)(\"IbisAdaptor\");\nlogger.level = \"debug\";\nconst config = (0,_server_config__WEBPACK_IMPORTED_MODULE_3__.getConfig)();\nvar SupportedDataSource;\n(function(SupportedDataSource) {\n    SupportedDataSource[\"POSTGRES\"] = \"POSTGRES\";\n    SupportedDataSource[\"BIG_QUERY\"] = \"BIG_QUERY\";\n    SupportedDataSource[\"SNOWFLAKE\"] = \"SNOWFLAKE\";\n    SupportedDataSource[\"MYSQL\"] = \"MYSQL\";\n    SupportedDataSource[\"MSSQL\"] = \"MSSQL\";\n    SupportedDataSource[\"CLICK_HOUSE\"] = \"CLICK_HOUSE\";\n    SupportedDataSource[\"TRINO\"] = \"TRINO\";\n})(SupportedDataSource || (SupportedDataSource = {}));\nconst dataSourceUrlMap = {\n    [\"POSTGRES\"]: \"postgres\",\n    [\"BIG_QUERY\"]: \"bigquery\",\n    [\"SNOWFLAKE\"]: \"snowflake\",\n    [\"MYSQL\"]: \"mysql\",\n    [\"MSSQL\"]: \"mssql\",\n    [\"CLICK_HOUSE\"]: \"clickhouse\",\n    [\"TRINO\"]: \"trino\"\n};\nvar ValidationRules;\n(function(ValidationRules) {\n    ValidationRules[\"COLUMN_IS_VALID\"] = \"COLUMN_IS_VALID\";\n})(ValidationRules || (ValidationRules = {}));\nvar IBIS_API_TYPE;\n(function(IBIS_API_TYPE) {\n    IBIS_API_TYPE[\"QUERY\"] = \"QUERY\";\n    IBIS_API_TYPE[\"DRY_RUN\"] = \"DRY_RUN\";\n    IBIS_API_TYPE[\"DRY_PLAN\"] = \"DRY_PLAN\";\n    IBIS_API_TYPE[\"METADATA\"] = \"METADATA\";\n    IBIS_API_TYPE[\"VALIDATION\"] = \"VALIDATION\";\n    IBIS_API_TYPE[\"ANALYSIS\"] = \"ANALYSIS\";\n})(IBIS_API_TYPE || (IBIS_API_TYPE = {}));\nclass IbisAdaptor {\n    constructor({ ibisServerEndpoint }){\n        this.ibisServerEndpoint = ibisServerEndpoint;\n    }\n    async getNativeSql(options) {\n        const { dataSource, mdl, sql } = options;\n        const body = {\n            sql,\n            manifestStr: Buffer.from(JSON.stringify(mdl)).toString(\"base64\")\n        };\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.ibisServerEndpoint}/${this.getIbisApiVersion(\"DRY_PLAN\")}/connector/${dataSourceUrlMap[dataSource]}/dry-plan`, body);\n            return res.data;\n        } catch (e) {\n            logger.debug(`Got error when dry plan with ibis: ${e.response.data}`);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.DRY_PLAN_ERROR, {\n                customMessage: e.response.data,\n                originalError: e\n            });\n        }\n    }\n    async query(query, options) {\n        const { dataSource, mdl } = options;\n        const connectionInfo = this.updateConnectionInfo(options.connectionInfo);\n        const ibisConnectionInfo = (0,_dataSource__WEBPACK_IMPORTED_MODULE_7__.toIbisConnectionInfo)(dataSource, connectionInfo);\n        const body = {\n            sql: query,\n            connectionInfo: ibisConnectionInfo,\n            manifestStr: Buffer.from(JSON.stringify(mdl)).toString(\"base64\")\n        };\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.ibisServerEndpoint}/${this.getIbisApiVersion(\"QUERY\")}/connector/${dataSourceUrlMap[dataSource]}/query`, body, {\n                params: {\n                    limit: options.limit || _server_services__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_PREVIEW_LIMIT\n                }\n            });\n            return {\n                ...res.data,\n                correlationId: res.headers[\"x-correlation-id\"],\n                processTime: res.headers[\"x-process-time\"]\n            };\n        } catch (e) {\n            logger.debug(`Got error when querying ibis: ${e.response?.data || e.message}`);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.IBIS_SERVER_ERROR, {\n                customMessage: e.response?.data || e.message || \"Error querying ibis server\",\n                originalError: e,\n                other: {\n                    correlationId: e.response?.headers[\"x-correlation-id\"],\n                    processTime: e.response?.headers[\"x-process-time\"]\n                }\n            });\n        }\n    }\n    async dryRun(query, options) {\n        const { dataSource, mdl } = options;\n        const connectionInfo = this.updateConnectionInfo(options.connectionInfo);\n        const ibisConnectionInfo = (0,_dataSource__WEBPACK_IMPORTED_MODULE_7__.toIbisConnectionInfo)(dataSource, connectionInfo);\n        const body = {\n            sql: query,\n            connectionInfo: ibisConnectionInfo,\n            manifestStr: Buffer.from(JSON.stringify(mdl)).toString(\"base64\")\n        };\n        logger.debug(`Dry run sql from ibis with body:`);\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.ibisServerEndpoint}/${this.getIbisApiVersion(\"DRY_RUN\")}/connector/${dataSourceUrlMap[dataSource]}/query?dryRun=true`, body);\n            logger.debug(`Ibis server Dry run success`);\n            return {\n                correlationId: response.headers[\"x-correlation-id\"],\n                processTime: response.headers[\"x-process-time\"]\n            };\n        } catch (err) {\n            logger.info(`Got error when dry running ibis`);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.DRY_RUN_ERROR, {\n                customMessage: err.response?.data || err.message,\n                originalError: err,\n                other: {\n                    correlationId: err.response?.headers[\"x-correlation-id\"],\n                    processTime: err.response?.headers[\"x-process-time\"]\n                }\n            });\n        }\n    }\n    async getTables(dataSource, connectionInfo) {\n        try {\n            const getTablesByConnectionInfo = async (ibisConnectionInfo)=>{\n                const body = {\n                    connectionInfo: ibisConnectionInfo\n                };\n                logger.debug(`Getting tables from ibis`);\n                const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.ibisServerEndpoint}/${this.getIbisApiVersion(\"METADATA\")}/connector/${dataSourceUrlMap[dataSource]}/metadata/tables`, body);\n                return this.transformDescriptionToProperties(res.data);\n            };\n            connectionInfo = this.updateConnectionInfo(connectionInfo);\n            // If the dataSource supports multiple connection info, we need to get tables from each connection info\n            const multipleIbisConnectionInfos = (0,_dataSource__WEBPACK_IMPORTED_MODULE_7__.toMultipleIbisConnectionInfos)(dataSource, connectionInfo);\n            if (multipleIbisConnectionInfos) {\n                const results = await Promise.all(multipleIbisConnectionInfos.map(getTablesByConnectionInfo));\n                return results.flat();\n            }\n            // If the dataSource does not support multiple connection info, we only need to get tables from one connection info\n            const ibisConnectionInfo = (0,_dataSource__WEBPACK_IMPORTED_MODULE_7__.toIbisConnectionInfo)(dataSource, connectionInfo);\n            return await getTablesByConnectionInfo(ibisConnectionInfo);\n        } catch (e) {\n            logger.debug(`Got error when getting table: ${e.response?.data || e.message}`);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.IBIS_SERVER_ERROR, {\n                customMessage: e.response?.data || e.message || \"Error getting table from ibis server\",\n                originalError: e\n            });\n        }\n    }\n    async getConstraints(dataSource, connectionInfo) {\n        connectionInfo = this.updateConnectionInfo(connectionInfo);\n        const ibisConnectionInfo = (0,_dataSource__WEBPACK_IMPORTED_MODULE_7__.toIbisConnectionInfo)(dataSource, connectionInfo);\n        const body = {\n            connectionInfo: ibisConnectionInfo\n        };\n        try {\n            logger.debug(`Getting constraint from ibis`);\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.ibisServerEndpoint}/${this.getIbisApiVersion(\"METADATA\")}/connector/${dataSourceUrlMap[dataSource]}/metadata/constraints`, body);\n            return res.data;\n        } catch (e) {\n            logger.debug(`Got error when getting constraint: ${e.response?.data || e.message}`);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.IBIS_SERVER_ERROR, {\n                customMessage: e.response?.data || e.message || \"Error getting constraint from ibis server\",\n                originalError: e\n            });\n        }\n    }\n    async validate(dataSource, validationRule, connectionInfo, mdl, parameters) {\n        connectionInfo = this.updateConnectionInfo(connectionInfo);\n        const ibisConnectionInfo = (0,_dataSource__WEBPACK_IMPORTED_MODULE_7__.toIbisConnectionInfo)(dataSource, connectionInfo);\n        const body = {\n            connectionInfo: ibisConnectionInfo,\n            manifestStr: Buffer.from(JSON.stringify(mdl)).toString(\"base64\"),\n            parameters\n        };\n        try {\n            logger.debug(`Run validation rule \"${validationRule}\" with ibis`);\n            await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.ibisServerEndpoint}/${this.getIbisApiVersion(\"VALIDATION\")}/connector/${dataSourceUrlMap[dataSource]}/validate/${lodash_snakeCase__WEBPACK_IMPORTED_MODULE_6___default()(validationRule)}`, body);\n            return {\n                valid: true,\n                message: null\n            };\n        } catch (e) {\n            logger.debug(`Got error when validating connection: ${e.response?.data || e.message}`);\n            return {\n                valid: false,\n                message: e.response?.data || e.message\n            };\n        }\n    }\n    updateConnectionInfo(connectionInfo) {\n        if (config.otherServiceUsingDocker && Object.hasOwnProperty.call(connectionInfo, \"host\")) {\n            connectionInfo.host = (0,_server_utils__WEBPACK_IMPORTED_MODULE_4__.toDockerHost)(connectionInfo.host);\n            logger.debug(`Host replaced with docker host`);\n        }\n        return connectionInfo;\n    }\n    transformDescriptionToProperties(tables) {\n        const handleColumnProperties = (column)=>{\n            const properties = column?.properties || {};\n            if (column.description) {\n                properties.description = column.description;\n            }\n            const nestedColumns = column.nestedColumns?.map((nc)=>{\n                return handleColumnProperties(nc);\n            });\n            return {\n                ...column,\n                properties,\n                nestedColumns\n            };\n        };\n        return tables.map((table)=>{\n            try {\n                const properties = table?.properties || {};\n                if (table.description) {\n                    properties.description = table.description;\n                }\n                if (table.columns) {\n                    const transformedColumns = table.columns.map((column)=>handleColumnProperties(column));\n                    table.columns = transformedColumns;\n                }\n                return {\n                    ...table,\n                    properties\n                };\n            } catch (e) {\n                console.log(\"e\", e);\n            }\n        });\n    }\n    getIbisApiVersion(apiType) {\n        if (!config.experimentalEngineRustVersion) {\n            return \"v2\";\n        }\n        const useV3 = [\n            \"QUERY\",\n            \"DRY_RUN\",\n            \"DRY_PLAN\",\n            \"VALIDATION\"\n        ].includes(apiType);\n        if (useV3) logger.debug(\"Using ibis v3 api\");\n        return useV3 ? \"v3\" : \"v2\";\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9hZGFwdG9ycy9pYmlzQWRhcHRvci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFFSTtBQUdIO0FBQ0g7QUFDRTtBQU1uQjtBQUNTO0FBS1o7QUFFdkIsTUFBTVMsU0FBU1IsK0RBQVNBLENBQUM7QUFDekJRLE9BQU9DLEtBQUssR0FBRztBQUVmLE1BQU1DLFNBQVNSLHlEQUFTQTs7VUFpRFpTOzs7Ozs7OztHQUFBQSx3QkFBQUE7QUFVWixNQUFNQyxtQkFBd0Q7SUFDNUQsWUFBOEIsRUFBRTtJQUNoQyxhQUErQixFQUFFO0lBQ2pDLGFBQStCLEVBQUU7SUFDakMsU0FBMkIsRUFBRTtJQUM3QixTQUEyQixFQUFFO0lBQzdCLGVBQWlDLEVBQUU7SUFDbkMsU0FBMkIsRUFBRTtBQUMvQjs7VUFLWUM7O0dBQUFBLG9CQUFBQTs7VUE2RFBDOzs7Ozs7O0dBQUFBLGtCQUFBQTtBQVNFLE1BQU1DO0lBR1hDLFlBQVksRUFBRUMsa0JBQWtCLEVBQWtDLENBQUU7UUFDbEUsSUFBSSxDQUFDQSxrQkFBa0IsR0FBR0E7SUFDNUI7SUFDQSxNQUFhQyxhQUFhQyxPQUEyQixFQUFtQjtRQUN0RSxNQUFNLEVBQUVDLFVBQVUsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUUsR0FBR0g7UUFDakMsTUFBTUksT0FBTztZQUNYRDtZQUNBRSxhQUFhQyxPQUFPQyxJQUFJLENBQUNDLEtBQUtDLFNBQVMsQ0FBQ1AsTUFBTVEsUUFBUSxDQUFDO1FBQ3pEO1FBQ0EsSUFBSTtZQUNGLE1BQU1DLE1BQU0sTUFBTS9CLGtEQUFVLENBQzFCLENBQUMsRUFBRSxJQUFJLENBQUNrQixrQkFBa0IsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDZSxpQkFBaUIsYUFBeUIsV0FBVyxFQUFFcEIsZ0JBQWdCLENBQUNRLFdBQVcsQ0FBQyxTQUFTLENBQUMsRUFDaklHO1lBRUYsT0FBT08sSUFBSUcsSUFBSTtRQUNqQixFQUFFLE9BQU9D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O1lBQ3pDLE9BQU87UUFDVDtRQUNBLE1BQU1DLFFBQVE7Ozs7O1NBS2IsQ0FBQ0MsUUFBUSxDQUFDSDtRQUNYLElBQUlFLE9BQU9uRixPQUFPMkIsS0FBSyxDQUFDO1FBQ3hCLE9BQU93RCxRQUFRLE9BQU87SUFDeEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9hZGFwdG9ycy9pYmlzQWRhcHRvci50cz9kNzUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcywgeyBBeGlvc1Jlc3BvbnNlIH0gZnJvbSAnYXhpb3MnO1xuXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2VydmVyL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgeyBEYXRhU291cmNlTmFtZSB9IGZyb20gJ0BzZXJ2ZXIvdHlwZXMnO1xuaW1wb3J0IHsgTWFuaWZlc3QgfSBmcm9tICdAc2VydmVyL21kbC90eXBlJztcbmltcG9ydCAqIGFzIEVycm9ycyBmcm9tICdAc2VydmVyL3V0aWxzL2Vycm9yJztcbmltcG9ydCB7IGdldENvbmZpZyB9IGZyb20gJ0BzZXJ2ZXIvY29uZmlnJztcbmltcG9ydCB7IHRvRG9ja2VySG9zdCB9IGZyb20gJ0BzZXJ2ZXIvdXRpbHMnO1xuaW1wb3J0IHtcbiAgQ29tcGFjdENvbHVtbixcbiAgQ29tcGFjdFRhYmxlLFxuICBERUZBVUxUX1BSRVZJRVdfTElNSVQsXG4gIFJlY29tbWVuZENvbnN0cmFpbnQsXG59IGZyb20gJ0BzZXJ2ZXIvc2VydmljZXMnO1xuaW1wb3J0IHsgc25ha2VDYXNlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IFdSRU5fQUlfQ09OTkVDVElPTl9JTkZPIH0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzJztcbmltcG9ydCB7XG4gIHRvSWJpc0Nvbm5lY3Rpb25JbmZvLFxuICB0b011bHRpcGxlSWJpc0Nvbm5lY3Rpb25JbmZvcyxcbn0gZnJvbSAnLi4vZGF0YVNvdXJjZSc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignSWJpc0FkYXB0b3InKTtcbmxvZ2dlci5sZXZlbCA9ICdkZWJ1Zyc7XG5cbmNvbnN0IGNvbmZpZyA9IGdldENvbmZpZygpO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhvc3RCYXNlZENvbm5lY3Rpb25JbmZvIHtcbiAgaG9zdDogc3RyaW5nO1xuICBwb3J0OiBudW1iZXI7XG4gIGRhdGFiYXNlOiBzdHJpbmc7XG4gIHVzZXI6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcmxCYXNlZENvbm5lY3Rpb25JbmZvIHtcbiAgY29ubmVjdGlvblVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBJYmlzUG9zdGdyZXNDb25uZWN0aW9uSW5mbyA9XG4gIHwgVXJsQmFzZWRDb25uZWN0aW9uSW5mb1xuICB8IEhvc3RCYXNlZENvbm5lY3Rpb25JbmZvO1xuXG5leHBvcnQgaW50ZXJmYWNlIEliaXNCaWdRdWVyeUNvbm5lY3Rpb25JbmZvIHtcbiAgcHJvamVjdF9pZDogc3RyaW5nO1xuICBkYXRhc2V0X2lkOiBzdHJpbmc7XG4gIGNyZWRlbnRpYWxzOiBzdHJpbmc7IC8vIGJhc2U2NCBlbmNvZGVkXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSWJpc1RyaW5vQ29ubmVjdGlvbkluZm8ge1xuICBob3N0OiBzdHJpbmc7XG4gIHBvcnQ6IG51bWJlcjtcbiAgY2F0YWxvZzogc3RyaW5nO1xuICBzY2hlbWE6IHN0cmluZztcbiAgdXNlcjogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEliaXNTbm93Zmxha2VDb25uZWN0aW9uSW5mbyB7XG4gIHVzZXI6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgYWNjb3VudDogc3RyaW5nO1xuICBkYXRhYmFzZTogc3RyaW5nO1xuICBzY2hlbWE6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgSWJpc0Nvbm5lY3Rpb25JbmZvID1cbiAgfCBVcmxCYXNlZENvbm5lY3Rpb25JbmZvXG4gIHwgSG9zdEJhc2VkQ29ubmVjdGlvbkluZm9cbiAgfCBJYmlzUG9zdGdyZXNDb25uZWN0aW9uSW5mb1xuICB8IEliaXNCaWdRdWVyeUNvbm5lY3Rpb25JbmZvXG4gIHwgSWJpc1RyaW5vQ29ubmVjdGlvbkluZm9cbiAgfCBJYmlzU25vd2ZsYWtlQ29ubmVjdGlvbkluZm87XG5cbmV4cG9ydCBlbnVtIFN1cHBvcnRlZERhdGFTb3VyY2Uge1xuICBQT1NUR1JFUyA9ICdQT1NUR1JFUycsXG4gIEJJR19RVUVSWSA9ICdCSUdfUVVFUlknLFxuICBTTk9XRkxBS0UgPSAnU05PV0ZMQUtFJyxcbiAgTVlTUUwgPSAnTVlTUUwnLFxuICBNU1NRTCA9ICdNU1NRTCcsXG4gIENMSUNLX0hPVVNFID0gJ0NMSUNLX0hPVVNFJyxcbiAgVFJJTk8gPSAnVFJJTk8nLFxufVxuXG5jb25zdCBkYXRhU291cmNlVXJsTWFwOiBSZWNvcmQ8U3VwcG9ydGVkRGF0YVNvdXJjZSwgc3RyaW5nPiA9IHtcbiAgW1N1cHBvcnRlZERhdGFTb3VyY2UuUE9TVEdSRVNdOiAncG9zdGdyZXMnLFxuICBbU3VwcG9ydGVkRGF0YVNvdXJjZS5CSUdfUVVFUlldOiAnYmlncXVlcnknLFxuICBbU3VwcG9ydGVkRGF0YVNvdXJjZS5TTk9XRkxBS0VdOiAnc25vd2ZsYWtlJyxcbiAgW1N1cHBvcnRlZERhdGFTb3VyY2UuTVlTUUxdOiAnbXlzcWwnLFxuICBbU3VwcG9ydGVkRGF0YVNvdXJjZS5NU1NRTF06ICdtc3NxbCcsXG4gIFtTdXBwb3J0ZWREYXRhU291cmNlLkNMSUNLX0hPVVNFXTogJ2NsaWNraG91c2UnLFxuICBbU3VwcG9ydGVkRGF0YVNvdXJjZS5UUklOT106ICd0cmlubycsXG59O1xuZXhwb3J0IGludGVyZmFjZSBUYWJsZVJlc3BvbnNlIHtcbiAgdGFibGVzOiBDb21wYWN0VGFibGVbXTtcbn1cblxuZXhwb3J0IGVudW0gVmFsaWRhdGlvblJ1bGVzIHtcbiAgQ09MVU1OX0lTX1ZBTElEID0gJ0NPTFVNTl9JU19WQUxJRCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblJlc3BvbnNlIHtcbiAgdmFsaWQ6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSWJpc0Jhc2VPcHRpb25zIHtcbiAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZU5hbWU7XG4gIGNvbm5lY3Rpb25JbmZvOiBXUkVOX0FJX0NPTk5FQ1RJT05fSU5GTztcbiAgbWRsOiBNYW5pZmVzdDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSWJpc1F1ZXJ5T3B0aW9ucyBleHRlbmRzIEliaXNCYXNlT3B0aW9ucyB7XG4gIGxpbWl0PzogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBJYmlzRHJ5UGxhbk9wdGlvbnMge1xuICBkYXRhU291cmNlOiBEYXRhU291cmNlTmFtZTtcbiAgbWRsOiBNYW5pZmVzdDtcbiAgc3FsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUliaXNBZGFwdG9yIHtcbiAgcXVlcnk6IChcbiAgICBxdWVyeTogc3RyaW5nLFxuICAgIG9wdGlvbnM6IEliaXNRdWVyeU9wdGlvbnMsXG4gICkgPT4gUHJvbWlzZTxJYmlzUXVlcnlSZXNwb25zZT47XG4gIGRyeVJ1bjogKHF1ZXJ5OiBzdHJpbmcsIG9wdGlvbnM6IEliaXNCYXNlT3B0aW9ucykgPT4gUHJvbWlzZTxEcnlSdW5SZXNwb25zZT47XG4gIGdldFRhYmxlczogKFxuICAgIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VOYW1lLFxuICAgIGNvbm5lY3Rpb25JbmZvOiBXUkVOX0FJX0NPTk5FQ1RJT05fSU5GTyxcbiAgKSA9PiBQcm9taXNlPENvbXBhY3RUYWJsZVtdPjtcbiAgZ2V0Q29uc3RyYWludHM6IChcbiAgICBkYXRhU291cmNlOiBEYXRhU291cmNlTmFtZSxcbiAgICBjb25uZWN0aW9uSW5mbzogV1JFTl9BSV9DT05ORUNUSU9OX0lORk8sXG4gICkgPT4gUHJvbWlzZTxSZWNvbW1lbmRDb25zdHJhaW50W10+O1xuXG4gIGdldE5hdGl2ZVNxbDogKG9wdGlvbnM6IEliaXNEcnlQbGFuT3B0aW9ucykgPT4gUHJvbWlzZTxzdHJpbmc+O1xuICB2YWxpZGF0ZTogKFxuICAgIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VOYW1lLFxuICAgIHJ1bGU6IFZhbGlkYXRpb25SdWxlcyxcbiAgICBjb25uZWN0aW9uSW5mbzogV1JFTl9BSV9DT05ORUNUSU9OX0lORk8sXG4gICAgbWRsOiBNYW5pZmVzdCxcbiAgICBwYXJhbWV0ZXJzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICApID0+IFByb21pc2U8VmFsaWRhdGlvblJlc3BvbnNlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJYmlzUmVzcG9uc2Uge1xuICBjb3JyZWxhdGlvbklkPzogc3RyaW5nO1xuICBwcm9jZXNzVGltZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJYmlzUXVlcnlSZXNwb25zZSBleHRlbmRzIEliaXNSZXNwb25zZSB7XG4gIGNvbHVtbnM6IHN0cmluZ1tdO1xuICBkYXRhOiBhbnlbXTtcbiAgZHR5cGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERyeVJ1blJlc3BvbnNlIGV4dGVuZHMgSWJpc1Jlc3BvbnNlIHt9XG5cbmVudW0gSUJJU19BUElfVFlQRSB7XG4gIFFVRVJZID0gJ1FVRVJZJyxcbiAgRFJZX1JVTiA9ICdEUllfUlVOJyxcbiAgRFJZX1BMQU4gPSAnRFJZX1BMQU4nLFxuICBNRVRBREFUQSA9ICdNRVRBREFUQScsXG4gIFZBTElEQVRJT04gPSAnVkFMSURBVElPTicsXG4gIEFOQUxZU0lTID0gJ0FOQUxZU0lTJyxcbn1cblxuZXhwb3J0IGNsYXNzIEliaXNBZGFwdG9yIGltcGxlbWVudHMgSUliaXNBZGFwdG9yIHtcbiAgcHJpdmF0ZSBpYmlzU2VydmVyRW5kcG9pbnQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcih7IGliaXNTZXJ2ZXJFbmRwb2ludCB9OiB7IGliaXNTZXJ2ZXJFbmRwb2ludDogc3RyaW5nIH0pIHtcbiAgICB0aGlzLmliaXNTZXJ2ZXJFbmRwb2ludCA9IGliaXNTZXJ2ZXJFbmRwb2ludDtcbiAgfVxuICBwdWJsaWMgYXN5bmMgZ2V0TmF0aXZlU3FsKG9wdGlvbnM6IEliaXNEcnlQbGFuT3B0aW9ucyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgeyBkYXRhU291cmNlLCBtZGwsIHNxbCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgc3FsLFxuICAgICAgbWFuaWZlc3RTdHI6IEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KG1kbCkpLnRvU3RyaW5nKCdiYXNlNjQnKSxcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBgJHt0aGlzLmliaXNTZXJ2ZXJFbmRwb2ludH0vJHt0aGlzLmdldEliaXNBcGlWZXJzaW9uKElCSVNfQVBJX1RZUEUuRFJZX1BMQU4pfS9jb25uZWN0b3IvJHtkYXRhU291cmNlVXJsTWFwW2RhdGFTb3VyY2VdfS9kcnktcGxhbmAsXG4gICAgICAgIGJvZHksXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgR290IGVycm9yIHdoZW4gZHJ5IHBsYW4gd2l0aCBpYmlzOiAke2UucmVzcG9uc2UuZGF0YX1gKTtcbiAgICAgIHRocm93IEVycm9ycy5jcmVhdGUoRXJyb3JzLkdlbmVyYWxFcnJvckNvZGVzLkRSWV9QTEFOX0VSUk9SLCB7XG4gICAgICAgIGN1c3RvbU1lc3NhZ2U6IGUucmVzcG9uc2UuZGF0YSxcbiAgICAgICAgb3JpZ2luYWxFcnJvcjogZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBxdWVyeShcbiAgICBxdWVyeTogc3RyaW5nLFxuICAgIG9wdGlvbnM6IEliaXNRdWVyeU9wdGlvbnMsXG4gICk6IFByb21pc2U8SWJpc1F1ZXJ5UmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IGRhdGFTb3VyY2UsIG1kbCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBjb25uZWN0aW9uSW5mbyA9IHRoaXMudXBkYXRlQ29ubmVjdGlvbkluZm8ob3B0aW9ucy5jb25uZWN0aW9uSW5mbyk7XG4gICAgY29uc3QgaWJpc0Nvbm5lY3Rpb25JbmZvID0gdG9JYmlzQ29ubmVjdGlvbkluZm8oZGF0YVNvdXJjZSwgY29ubmVjdGlvbkluZm8pO1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICBzcWw6IHF1ZXJ5LFxuICAgICAgY29ubmVjdGlvbkluZm86IGliaXNDb25uZWN0aW9uSW5mbyxcbiAgICAgIG1hbmlmZXN0U3RyOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtZGwpKS50b1N0cmluZygnYmFzZTY0JyksXG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgICAgYCR7dGhpcy5pYmlzU2VydmVyRW5kcG9pbnR9LyR7dGhpcy5nZXRJYmlzQXBpVmVyc2lvbihJQklTX0FQSV9UWVBFLlFVRVJZKX0vY29ubmVjdG9yLyR7ZGF0YVNvdXJjZVVybE1hcFtkYXRhU291cmNlXX0vcXVlcnlgLFxuICAgICAgICBib2R5LFxuICAgICAgICB7XG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBsaW1pdDogb3B0aW9ucy5saW1pdCB8fCBERUZBVUxUX1BSRVZJRVdfTElNSVQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXMuZGF0YSxcbiAgICAgICAgY29ycmVsYXRpb25JZDogcmVzLmhlYWRlcnNbJ3gtY29ycmVsYXRpb24taWQnXSxcbiAgICAgICAgcHJvY2Vzc1RpbWU6IHJlcy5oZWFkZXJzWyd4LXByb2Nlc3MtdGltZSddLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHb3QgZXJyb3Igd2hlbiBxdWVyeWluZyBpYmlzOiAke2UucmVzcG9uc2U/LmRhdGEgfHwgZS5tZXNzYWdlfWAsXG4gICAgICApO1xuXG4gICAgICB0aHJvdyBFcnJvcnMuY3JlYXRlKEVycm9ycy5HZW5lcmFsRXJyb3JDb2Rlcy5JQklTX1NFUlZFUl9FUlJPUiwge1xuICAgICAgICBjdXN0b21NZXNzYWdlOlxuICAgICAgICAgIGUucmVzcG9uc2U/LmRhdGEgfHwgZS5tZXNzYWdlIHx8ICdFcnJvciBxdWVyeWluZyBpYmlzIHNlcnZlcicsXG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IGUsXG4gICAgICAgIG90aGVyOiB7XG4gICAgICAgICAgY29ycmVsYXRpb25JZDogZS5yZXNwb25zZT8uaGVhZGVyc1sneC1jb3JyZWxhdGlvbi1pZCddLFxuICAgICAgICAgIHByb2Nlc3NUaW1lOiBlLnJlc3BvbnNlPy5oZWFkZXJzWyd4LXByb2Nlc3MtdGltZSddLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGRyeVJ1bihcbiAgICBxdWVyeTogc3RyaW5nLFxuICAgIG9wdGlvbnM6IEliaXNRdWVyeU9wdGlvbnMsXG4gICk6IFByb21pc2U8RHJ5UnVuUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IGRhdGFTb3VyY2UsIG1kbCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBjb25uZWN0aW9uSW5mbyA9IHRoaXMudXBkYXRlQ29ubmVjdGlvbkluZm8ob3B0aW9ucy5jb25uZWN0aW9uSW5mbyk7XG4gICAgY29uc3QgaWJpc0Nvbm5lY3Rpb25JbmZvID0gdG9JYmlzQ29ubmVjdGlvbkluZm8oZGF0YVNvdXJjZSwgY29ubmVjdGlvbkluZm8pO1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICBzcWw6IHF1ZXJ5LFxuICAgICAgY29ubmVjdGlvbkluZm86IGliaXNDb25uZWN0aW9uSW5mbyxcbiAgICAgIG1hbmlmZXN0U3RyOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtZGwpKS50b1N0cmluZygnYmFzZTY0JyksXG4gICAgfTtcbiAgICBsb2dnZXIuZGVidWcoYERyeSBydW4gc3FsIGZyb20gaWJpcyB3aXRoIGJvZHk6YCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgICAgYCR7dGhpcy5pYmlzU2VydmVyRW5kcG9pbnR9LyR7dGhpcy5nZXRJYmlzQXBpVmVyc2lvbihJQklTX0FQSV9UWVBFLkRSWV9SVU4pfS9jb25uZWN0b3IvJHtkYXRhU291cmNlVXJsTWFwW2RhdGFTb3VyY2VdfS9xdWVyeT9kcnlSdW49dHJ1ZWAsXG4gICAgICAgIGJvZHksXG4gICAgICApO1xuICAgICAgbG9nZ2VyLmRlYnVnKGBJYmlzIHNlcnZlciBEcnkgcnVuIHN1Y2Nlc3NgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtY29ycmVsYXRpb24taWQnXSxcbiAgICAgICAgcHJvY2Vzc1RpbWU6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtcHJvY2Vzcy10aW1lJ10sXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nZ2VyLmluZm8oYEdvdCBlcnJvciB3aGVuIGRyeSBydW5uaW5nIGliaXNgKTtcbiAgICAgIHRocm93IEVycm9ycy5jcmVhdGUoRXJyb3JzLkdlbmVyYWxFcnJvckNvZGVzLkRSWV9SVU5fRVJST1IsIHtcbiAgICAgICAgY3VzdG9tTWVzc2FnZTogZXJyLnJlc3BvbnNlPy5kYXRhIHx8IGVyci5tZXNzYWdlLFxuICAgICAgICBvcmlnaW5hbEVycm9yOiBlcnIsXG4gICAgICAgIG90aGVyOiB7XG4gICAgICAgICAgY29ycmVsYXRpb25JZDogZXJyLnJlc3BvbnNlPy5oZWFkZXJzWyd4LWNvcnJlbGF0aW9uLWlkJ10sXG4gICAgICAgICAgcHJvY2Vzc1RpbWU6IGVyci5yZXNwb25zZT8uaGVhZGVyc1sneC1wcm9jZXNzLXRpbWUnXSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRUYWJsZXMoXG4gICAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZU5hbWUsXG4gICAgY29ubmVjdGlvbkluZm86IFdSRU5fQUlfQ09OTkVDVElPTl9JTkZPLFxuICApOiBQcm9taXNlPENvbXBhY3RUYWJsZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGdldFRhYmxlc0J5Q29ubmVjdGlvbkluZm8gPSBhc3luYyAoaWJpc0Nvbm5lY3Rpb25JbmZvKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgY29ubmVjdGlvbkluZm86IGliaXNDb25uZWN0aW9uSW5mbyxcbiAgICAgICAgfTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBHZXR0aW5nIHRhYmxlcyBmcm9tIGliaXNgKTtcbiAgICAgICAgY29uc3QgcmVzOiBBeGlvc1Jlc3BvbnNlPENvbXBhY3RUYWJsZVtdPiA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgICAgYCR7dGhpcy5pYmlzU2VydmVyRW5kcG9pbnR9LyR7dGhpcy5nZXRJYmlzQXBpVmVyc2lvbihJQklTX0FQSV9UWVBFLk1FVEFEQVRBKX0vY29ubmVjdG9yLyR7ZGF0YVNvdXJjZVVybE1hcFtkYXRhU291cmNlXX0vbWV0YWRhdGEvdGFibGVzYCxcbiAgICAgICAgICBib2R5LFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybURlc2NyaXB0aW9uVG9Qcm9wZXJ0aWVzKHJlcy5kYXRhKTtcbiAgICAgIH07XG5cbiAgICAgIGNvbm5lY3Rpb25JbmZvID0gdGhpcy51cGRhdGVDb25uZWN0aW9uSW5mbyhjb25uZWN0aW9uSW5mbyk7XG5cbiAgICAgIC8vIElmIHRoZSBkYXRhU291cmNlIHN1cHBvcnRzIG11bHRpcGxlIGNvbm5lY3Rpb24gaW5mbywgd2UgbmVlZCB0byBnZXQgdGFibGVzIGZyb20gZWFjaCBjb25uZWN0aW9uIGluZm9cbiAgICAgIGNvbnN0IG11bHRpcGxlSWJpc0Nvbm5lY3Rpb25JbmZvcyA9IHRvTXVsdGlwbGVJYmlzQ29ubmVjdGlvbkluZm9zKFxuICAgICAgICBkYXRhU291cmNlLFxuICAgICAgICBjb25uZWN0aW9uSW5mbyxcbiAgICAgICk7XG4gICAgICBpZiAobXVsdGlwbGVJYmlzQ29ubmVjdGlvbkluZm9zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICBtdWx0aXBsZUliaXNDb25uZWN0aW9uSW5mb3MubWFwKGdldFRhYmxlc0J5Q29ubmVjdGlvbkluZm8pLFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzdWx0cy5mbGF0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBkYXRhU291cmNlIGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgY29ubmVjdGlvbiBpbmZvLCB3ZSBvbmx5IG5lZWQgdG8gZ2V0IHRhYmxlcyBmcm9tIG9uZSBjb25uZWN0aW9uIGluZm9cbiAgICAgIGNvbnN0IGliaXNDb25uZWN0aW9uSW5mbyA9IHRvSWJpc0Nvbm5lY3Rpb25JbmZvKFxuICAgICAgICBkYXRhU291cmNlLFxuICAgICAgICBjb25uZWN0aW9uSW5mbyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gYXdhaXQgZ2V0VGFibGVzQnlDb25uZWN0aW9uSW5mbyhpYmlzQ29ubmVjdGlvbkluZm8pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgYEdvdCBlcnJvciB3aGVuIGdldHRpbmcgdGFibGU6ICR7ZS5yZXNwb25zZT8uZGF0YSB8fCBlLm1lc3NhZ2V9YCxcbiAgICAgICk7XG4gICAgICB0aHJvdyBFcnJvcnMuY3JlYXRlKEVycm9ycy5HZW5lcmFsRXJyb3JDb2Rlcy5JQklTX1NFUlZFUl9FUlJPUiwge1xuICAgICAgICBjdXN0b21NZXNzYWdlOlxuICAgICAgICAgIGUucmVzcG9uc2U/LmRhdGEgfHxcbiAgICAgICAgICBlLm1lc3NhZ2UgfHxcbiAgICAgICAgICAnRXJyb3IgZ2V0dGluZyB0YWJsZSBmcm9tIGliaXMgc2VydmVyJyxcbiAgICAgICAgb3JpZ2luYWxFcnJvcjogZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRDb25zdHJhaW50cyhcbiAgICBkYXRhU291cmNlOiBEYXRhU291cmNlTmFtZSxcbiAgICBjb25uZWN0aW9uSW5mbzogV1JFTl9BSV9DT05ORUNUSU9OX0lORk8sXG4gICk6IFByb21pc2U8UmVjb21tZW5kQ29uc3RyYWludFtdPiB7XG4gICAgY29ubmVjdGlvbkluZm8gPSB0aGlzLnVwZGF0ZUNvbm5lY3Rpb25JbmZvKGNvbm5lY3Rpb25JbmZvKTtcbiAgICBjb25zdCBpYmlzQ29ubmVjdGlvbkluZm8gPSB0b0liaXNDb25uZWN0aW9uSW5mbyhkYXRhU291cmNlLCBjb25uZWN0aW9uSW5mbyk7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIGNvbm5lY3Rpb25JbmZvOiBpYmlzQ29ubmVjdGlvbkluZm8sXG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBHZXR0aW5nIGNvbnN0cmFpbnQgZnJvbSBpYmlzYCk7XG4gICAgICBjb25zdCByZXM6IEF4aW9zUmVzcG9uc2U8UmVjb21tZW5kQ29uc3RyYWludFtdPiA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgIGAke3RoaXMuaWJpc1NlcnZlckVuZHBvaW50fS8ke3RoaXMuZ2V0SWJpc0FwaVZlcnNpb24oSUJJU19BUElfVFlQRS5NRVRBREFUQSl9L2Nvbm5lY3Rvci8ke2RhdGFTb3VyY2VVcmxNYXBbZGF0YVNvdXJjZV19L21ldGFkYXRhL2NvbnN0cmFpbnRzYCxcbiAgICAgICAgYm9keSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBgR290IGVycm9yIHdoZW4gZ2V0dGluZyBjb25zdHJhaW50OiAke2UucmVzcG9uc2U/LmRhdGEgfHwgZS5tZXNzYWdlfWAsXG4gICAgICApO1xuXG4gICAgICB0aHJvdyBFcnJvcnMuY3JlYXRlKEVycm9ycy5HZW5lcmFsRXJyb3JDb2Rlcy5JQklTX1NFUlZFUl9FUlJPUiwge1xuICAgICAgICBjdXN0b21NZXNzYWdlOlxuICAgICAgICAgIGUucmVzcG9uc2U/LmRhdGEgfHxcbiAgICAgICAgICBlLm1lc3NhZ2UgfHxcbiAgICAgICAgICAnRXJyb3IgZ2V0dGluZyBjb25zdHJhaW50IGZyb20gaWJpcyBzZXJ2ZXInLFxuICAgICAgICBvcmlnaW5hbEVycm9yOiBlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlKFxuICAgIGRhdGFTb3VyY2U6IERhdGFTb3VyY2VOYW1lLFxuICAgIHZhbGlkYXRpb25SdWxlOiBWYWxpZGF0aW9uUnVsZXMsXG4gICAgY29ubmVjdGlvbkluZm86IFdSRU5fQUlfQ09OTkVDVElPTl9JTkZPLFxuICAgIG1kbDogTWFuaWZlc3QsXG4gICAgcGFyYW1ldGVyczogUmVjb3JkPHN0cmluZywgYW55PixcbiAgKTogUHJvbWlzZTxWYWxpZGF0aW9uUmVzcG9uc2U+IHtcbiAgICBjb25uZWN0aW9uSW5mbyA9IHRoaXMudXBkYXRlQ29ubmVjdGlvbkluZm8oY29ubmVjdGlvbkluZm8pO1xuICAgIGNvbnN0IGliaXNDb25uZWN0aW9uSW5mbyA9IHRvSWJpc0Nvbm5lY3Rpb25JbmZvKGRhdGFTb3VyY2UsIGNvbm5lY3Rpb25JbmZvKTtcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgY29ubmVjdGlvbkluZm86IGliaXNDb25uZWN0aW9uSW5mbyxcbiAgICAgIG1hbmlmZXN0U3RyOiBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShtZGwpKS50b1N0cmluZygnYmFzZTY0JyksXG4gICAgICBwYXJhbWV0ZXJzLFxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgUnVuIHZhbGlkYXRpb24gcnVsZSBcIiR7dmFsaWRhdGlvblJ1bGV9XCIgd2l0aCBpYmlzYCk7XG4gICAgICBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBgJHt0aGlzLmliaXNTZXJ2ZXJFbmRwb2ludH0vJHt0aGlzLmdldEliaXNBcGlWZXJzaW9uKElCSVNfQVBJX1RZUEUuVkFMSURBVElPTil9L2Nvbm5lY3Rvci8ke2RhdGFTb3VyY2VVcmxNYXBbZGF0YVNvdXJjZV19L3ZhbGlkYXRlLyR7c25ha2VDYXNlKHZhbGlkYXRpb25SdWxlKX1gLFxuICAgICAgICBib2R5LFxuICAgICAgKTtcbiAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBtZXNzYWdlOiBudWxsIH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBgR290IGVycm9yIHdoZW4gdmFsaWRhdGluZyBjb25uZWN0aW9uOiAke2UucmVzcG9uc2U/LmRhdGEgfHwgZS5tZXNzYWdlfWAsXG4gICAgICApO1xuXG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6IGUucmVzcG9uc2U/LmRhdGEgfHwgZS5tZXNzYWdlIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDb25uZWN0aW9uSW5mbyhjb25uZWN0aW9uSW5mbzogYW55KSB7XG4gICAgaWYgKFxuICAgICAgY29uZmlnLm90aGVyU2VydmljZVVzaW5nRG9ja2VyICYmXG4gICAgICBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChjb25uZWN0aW9uSW5mbywgJ2hvc3QnKVxuICAgICkge1xuICAgICAgY29ubmVjdGlvbkluZm8uaG9zdCA9IHRvRG9ja2VySG9zdChjb25uZWN0aW9uSW5mby5ob3N0KTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgSG9zdCByZXBsYWNlZCB3aXRoIGRvY2tlciBob3N0YCk7XG4gICAgfVxuICAgIHJldHVybiBjb25uZWN0aW9uSW5mbztcbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNmb3JtRGVzY3JpcHRpb25Ub1Byb3BlcnRpZXMoXG4gICAgdGFibGVzOiBDb21wYWN0VGFibGVbXSxcbiAgKTogQ29tcGFjdFRhYmxlW10ge1xuICAgIGNvbnN0IGhhbmRsZUNvbHVtblByb3BlcnRpZXMgPSAoY29sdW1uOiBDb21wYWN0Q29sdW1uKTogQ29tcGFjdENvbHVtbiA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gY29sdW1uPy5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgaWYgKGNvbHVtbi5kZXNjcmlwdGlvbikge1xuICAgICAgICBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uID0gY29sdW1uLmRlc2NyaXB0aW9uO1xuICAgICAgfVxuICAgICAgY29uc3QgbmVzdGVkQ29sdW1ucyA9IGNvbHVtbi5uZXN0ZWRDb2x1bW5zPy5tYXAoKG5jKSA9PiB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDb2x1bW5Qcm9wZXJ0aWVzKG5jKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHsgLi4uY29sdW1uLCBwcm9wZXJ0aWVzLCBuZXN0ZWRDb2x1bW5zIH07XG4gICAgfTtcblxuICAgIHJldHVybiB0YWJsZXMubWFwKCh0YWJsZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHRhYmxlPy5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgICBpZiAodGFibGUuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uID0gdGFibGUuZGVzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhYmxlLmNvbHVtbnMpIHtcbiAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZENvbHVtbnMgPSB0YWJsZS5jb2x1bW5zLm1hcCgoY29sdW1uKSA9PlxuICAgICAgICAgICAgaGFuZGxlQ29sdW1uUHJvcGVydGllcyhjb2x1bW4pLFxuICAgICAgICAgICk7XG4gICAgICAgICAgdGFibGUuY29sdW1ucyA9IHRyYW5zZm9ybWVkQ29sdW1ucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi50YWJsZSwgcHJvcGVydGllcyB9O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnZScsIGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRJYmlzQXBpVmVyc2lvbihhcGlUeXBlOiBJQklTX0FQSV9UWVBFKSB7XG4gICAgaWYgKCFjb25maWcuZXhwZXJpbWVudGFsRW5naW5lUnVzdFZlcnNpb24pIHtcbiAgICAgIHJldHVybiAndjInO1xuICAgIH1cbiAgICBjb25zdCB1c2VWMyA9IFtcbiAgICAgIElCSVNfQVBJX1RZUEUuUVVFUlksXG4gICAgICBJQklTX0FQSV9UWVBFLkRSWV9SVU4sXG4gICAgICBJQklTX0FQSV9UWVBFLkRSWV9QTEFOLFxuICAgICAgSUJJU19BUElfVFlQRS5WQUxJREFUSU9OLFxuICAgIF0uaW5jbHVkZXMoYXBpVHlwZSk7XG4gICAgaWYgKHVzZVYzKSBsb2dnZXIuZGVidWcoJ1VzaW5nIGliaXMgdjMgYXBpJyk7XG4gICAgcmV0dXJuIHVzZVYzID8gJ3YzJyA6ICd2Mic7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJheGlvcyIsImdldExvZ2dlciIsIkVycm9ycyIsImdldENvbmZpZyIsInRvRG9ja2VySG9zdCIsIkRFRkFVTFRfUFJFVklFV19MSU1JVCIsInNuYWtlQ2FzZSIsInRvSWJpc0Nvbm5lY3Rpb25JbmZvIiwidG9NdWx0aXBsZUliaXNDb25uZWN0aW9uSW5mb3MiLCJsb2dnZXIiLCJsZXZlbCIsImNvbmZpZyIsIlN1cHBvcnRlZERhdGFTb3VyY2UiLCJkYXRhU291cmNlVXJsTWFwIiwiVmFsaWRhdGlvblJ1bGVzIiwiSUJJU19BUElfVFlQRSIsIkliaXNBZGFwdG9yIiwiY29uc3RydWN0b3IiLCJpYmlzU2VydmVyRW5kcG9pbnQiLCJnZXROYXRpdmVTcWwiLCJvcHRpb25zIiwiZGF0YVNvdXJjZSIsIm1kbCIsInNxbCIsImJvZHkiLCJtYW5pZmVzdFN0ciIsIkJ1ZmZlciIsImZyb20iLCJKU09OIiwic3RyaW5naWZ5IiwidG9TdHJpbmciLCJyZXMiLCJwb3N0IiwiZ2V0SWJpc0FwaVZlcnNpb24iLCJkYXRhIiwiZSIsImRlYnVnIiwicmVzcG9uc2UiLCJjcmVhdGUiLCJHZW5lcmFsRXJyb3JDb2RlcyIsIkRSWV9QTEFOX0VSUk9SIiwiY3VzdG9tTWVzc2FnZSIsIm9yaWdpbmFsRXJyb3IiLCJxdWVyeSIsImNvbm5lY3Rpb25JbmZvIiwidXBkYXRlQ29ubmVjdGlvbkluZm8iLCJpYmlzQ29ubmVjdGlvbkluZm8iLCJwYXJhbXMiLCJsaW1pdCIsImNvcnJlbGF0aW9uSWQiLCJoZWFkZXJzIiwicHJvY2Vzc1RpbWUiLCJtZXNzYWdlIiwiSUJJU19TRVJWRVJfRVJST1IiLCJvdGhlciIsImRyeVJ1biIsImVyciIsImluZm8iLCJEUllfUlVOX0VSUk9SIiwiZ2V0VGFibGVzIiwiZ2V0VGFibGVzQnlDb25uZWN0aW9uSW5mbyIsInRyYW5zZm9ybURlc2NyaXB0aW9uVG9Qcm9wZXJ0aWVzIiwibXVsdGlwbGVJYmlzQ29ubmVjdGlvbkluZm9zIiwicmVzdWx0cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJmbGF0IiwiZ2V0Q29uc3RyYWludHMiLCJ2YWxpZGF0ZSIsInZhbGlkYXRpb25SdWxlIiwicGFyYW1ldGVycyIsInZhbGlkIiwib3RoZXJTZXJ2aWNlVXNpbmdEb2NrZXIiLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJob3N0IiwidGFibGVzIiwiaGFuZGxlQ29sdW1uUHJvcGVydGllcyIsImNvbHVtbiIsInByb3BlcnRpZXMiLCJkZXNjcmlwdGlvbiIsIm5lc3RlZENvbHVtbnMiLCJuYyIsInRhYmxlIiwiY29sdW1ucyIsInRyYW5zZm9ybWVkQ29sdW1ucyIsImNvbnNvbGUiLCJsb2ciLCJhcGlUeXBlIiwiZXhwZXJpbWVudGFsRW5naW5lUnVzdFZlcnNpb24iLCJ1c2VWMyIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/adaptors/ibisAdaptor.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/adaptors/index.ts":
/*!*********************************************!*\
  !*** ./src/apollo/server/adaptors/index.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ibisAdaptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ibisAdaptor */ \"(api)/./src/apollo/server/adaptors/ibisAdaptor.ts\");\n/* harmony import */ var _wrenAIAdaptor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wrenAIAdaptor */ \"(api)/./src/apollo/server/adaptors/wrenAIAdaptor.ts\");\n/* harmony import */ var _wrenEngineAdaptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./wrenEngineAdaptor */ \"(api)/./src/apollo/server/adaptors/wrenEngineAdaptor.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ibisAdaptor__WEBPACK_IMPORTED_MODULE_0__, _wrenAIAdaptor__WEBPACK_IMPORTED_MODULE_1__, _wrenEngineAdaptor__WEBPACK_IMPORTED_MODULE_2__]);\n([_ibisAdaptor__WEBPACK_IMPORTED_MODULE_0__, _wrenAIAdaptor__WEBPACK_IMPORTED_MODULE_1__, _wrenEngineAdaptor__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _ibisAdaptor__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _ibisAdaptor__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _wrenAIAdaptor__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _wrenAIAdaptor__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _wrenEngineAdaptor__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _wrenEngineAdaptor__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9hZGFwdG9ycy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQThCO0FBQ0U7QUFDSSIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9hZGFwdG9ycy9pbmRleC50cz81M2ZiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vaWJpc0FkYXB0b3InO1xuZXhwb3J0ICogZnJvbSAnLi93cmVuQUlBZGFwdG9yJztcbmV4cG9ydCAqIGZyb20gJy4vd3JlbkVuZ2luZUFkYXB0b3InO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/adaptors/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/adaptors/wrenAIAdaptor.ts":
/*!*****************************************************!*\
  !*** ./src/apollo/server/adaptors/wrenAIAdaptor.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WrenAIAdaptor: () => (/* binding */ WrenAIAdaptor)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _server_models_adaptor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _server_utils_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @server/utils/error */ \"(api)/./src/apollo/server/utils/error.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_2__.getLogger)(\"WrenAIAdaptor\");\nlogger.level = \"debug\";\nconst getAIServiceError = (error)=>{\n    const { data } = error.response || {};\n    return data?.detail ? `${error.message}, detail: ${data.detail}` : error.message;\n};\nclass WrenAIAdaptor {\n    constructor({ wrenAIBaseEndpoint }){\n        this.wrenAIBaseEndpoint = wrenAIBaseEndpoint;\n    }\n    /**\n   * Ask AI service a question.\n   * AI service will return anwser candidates containing sql.\n   */ async ask(input) {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.wrenAIBaseEndpoint}/v1/asks`, {\n                query: input.query,\n                id: input.deployId,\n                history: this.transfromHistoryInput(input.history),\n                configurations: input.configurations\n            });\n            return {\n                queryId: res.data.query_id\n            };\n        } catch (err) {\n            logger.debug(`Got error when asking wren AI: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async cancelAsk(queryId) {\n        // make PATCH request /v1/asks/:query_id to cancel the query\n        try {\n            await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].patch(`${this.wrenAIBaseEndpoint}/v1/asks/${queryId}`, {\n                status: \"stopped\"\n            });\n        } catch (err) {\n            logger.debug(`Got error when canceling ask: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async getAskResult(queryId) {\n        // make GET request /v1/asks/:query_id/result to get the result\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/asks/${queryId}/result`);\n            return this.transformAskResult(res.data);\n        } catch (err) {\n            logger.debug(`Got error when getting ask result: ${getAIServiceError(err)}`);\n            // throw err;\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_3__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_3__.GeneralErrorCodes.INTERNAL_SERVER_ERROR, {\n                originalError: err\n            });\n        }\n    }\n    async getAskStreamingResult(queryId) {\n        // make GET request /v1/asks/:query_id/streaming-result to get the streaming result\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/asks/${queryId}/streaming-result`, {\n                responseType: \"stream\"\n            });\n            return res.data;\n        } catch (err) {\n            logger.debug(`Got error when getting ask streaming result: ${getAIServiceError(err)}`);\n            // throw err;\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_3__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_3__.GeneralErrorCodes.INTERNAL_SERVER_ERROR, {\n                originalError: err\n            });\n        }\n    }\n    /**\n   * After you choose a candidate, you can request AI service to generate the detail.\n   */ async generateAskDetail(input) {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.wrenAIBaseEndpoint}/v1/ask-details`, input);\n            return {\n                queryId: res.data.query_id\n            };\n        } catch (err) {\n            logger.debug(`Got error when generating ask detail: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async getAskDetailResult(queryId) {\n        // make GET request /v1/ask-details/:query_id/result to get the result\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/ask-details/${queryId}/result`);\n            return this.transformAskDetailResult(res.data);\n        } catch (err) {\n            logger.debug(`Got error when getting ask detail result: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async deploy(deployData) {\n        const { manifest, hash } = deployData;\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.wrenAIBaseEndpoint}/v1/semantics-preparations`, {\n                mdl: JSON.stringify(manifest),\n                id: hash\n            });\n            const deployId = res.data.id;\n            logger.debug(`Wren AI: Deploying wren AI, hash: ${hash}, deployId: ${deployId}`);\n            const deploySuccess = await this.waitDeployFinished(deployId);\n            if (deploySuccess) {\n                logger.debug(`Wren AI: Deploy wren AI success, hash: ${hash}`);\n                return {\n                    status: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_1__.WrenAIDeployStatusEnum.SUCCESS\n                };\n            } else {\n                return {\n                    status: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_1__.WrenAIDeployStatusEnum.FAILED,\n                    error: `Wren AI: Deploy wren AI failed or timeout, hash: ${hash}`\n                };\n            }\n        } catch (err) {\n            logger.debug(`Got error when deploying to wren AI, hash: ${hash}. Error: ${err.message}`);\n            return {\n                status: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_1__.WrenAIDeployStatusEnum.FAILED,\n                error: `Wren AI Error: deployment hash:${hash}, ${err.message}`\n            };\n        }\n    }\n    async generateRecommendationQuestions(input) {\n        const body = {\n            mdl: JSON.stringify(input.manifest),\n            previous_questions: input.previousQuestions,\n            max_questions: input.maxQuestions,\n            max_categories: input.maxCategories,\n            configuration: input.configuration\n        };\n        logger.info(`Wren AI: Generating recommendation questions`);\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.wrenAIBaseEndpoint}/v1/question-recommendations`, body);\n            logger.info(`Wren AI: Generating recommendation questions, queryId: ${res.data.id}`);\n            return {\n                queryId: res.data.id\n            };\n        } catch (err) {\n            logger.debug(`Got error when generating recommendation questions: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async getRecommendationQuestionsResult(queryId) {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/question-recommendations/${queryId}`);\n            return this.transformRecommendationQuestionsResult(res.data);\n        } catch (err) {\n            logger.debug(`Got error when getting recommendation questions result: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async createTextBasedAnswer(input) {\n        const body = {\n            query: input.query,\n            sql: input.sql,\n            sql_data: input.sqlData,\n            thread_id: input.threadId,\n            user_id: input.userId,\n            configurations: input.configurations\n        };\n        // make POST request /v1/sql-answers to create text-based answer\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.wrenAIBaseEndpoint}/v1/sql-answers`, body);\n            return {\n                queryId: res.data.query_id\n            };\n        } catch (err) {\n            logger.debug(`Got error when creating text-based answer: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async getTextBasedAnswerResult(queryId) {\n        // make GET request /v1/sql-answers/:query_id to get the result\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/sql-answers/${queryId}`);\n            return this.transformTextBasedAnswerResult(res.data);\n        } catch (err) {\n            logger.debug(`Got error when getting text-based answer result: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async streamTextBasedAnswer(queryId) {\n        // make GET request /v1/sql-answers/:query_id/streaming to get the streaming result\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/sql-answers/${queryId}/streaming`, {\n                responseType: \"stream\"\n            });\n            return res.data;\n        } catch (err) {\n            logger.debug(`Got error when getting text-based answer streaming result: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async generateChart(input) {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.wrenAIBaseEndpoint}/v1/charts`, input);\n            return {\n                queryId: res.data.query_id\n            };\n        } catch (err) {\n            logger.debug(`Got error when creating chart: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async getChartResult(queryId) {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/charts/${queryId}`);\n            return this.transformChartResult(res.data);\n        } catch (err) {\n            logger.debug(`Got error when getting chart result: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async cancelChart(queryId) {\n        try {\n            await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].patch(`${this.wrenAIBaseEndpoint}/v1/charts/${queryId}`, {\n                status: \"stopped\"\n            });\n        } catch (err) {\n            logger.debug(`Got error when canceling chart: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async adjustChart(input) {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.wrenAIBaseEndpoint}/v1/chart-adjustments`, this.transformChartAdjustmentInput(input));\n            return {\n                queryId: res.data.query_id\n            };\n        } catch (err) {\n            logger.debug(`Got error when adjusting chart: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async getChartAdjustmentResult(queryId) {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/chart-adjustments/${queryId}`);\n            return this.transformChartResult(res.data);\n        } catch (err) {\n            logger.debug(`Got error when getting chart adjustment result: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    async cancelChartAdjustment(queryId) {\n        try {\n            await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].patch(`${this.wrenAIBaseEndpoint}/v1/chart-adjustments/${queryId}`, {\n                status: \"stopped\"\n            });\n        } catch (err) {\n            logger.debug(`Got error when canceling chart adjustment: ${getAIServiceError(err)}`);\n            throw err;\n        }\n    }\n    transformChartAdjustmentInput(input) {\n        const { query, sql, adjustmentOption, chartSchema, configurations } = input;\n        return {\n            query,\n            sql,\n            adjustment_option: {\n                chart_type: adjustmentOption.chartType.toLowerCase(),\n                x_axis: adjustmentOption.xAxis,\n                y_axis: adjustmentOption.yAxis,\n                x_offset: adjustmentOption.xOffset,\n                color: adjustmentOption.color,\n                theta: adjustmentOption.theta\n            },\n            chart_schema: chartSchema,\n            configurations\n        };\n    }\n    transformChartResult(body) {\n        const { status, error } = this.transformStatusAndError(body);\n        return {\n            status: status,\n            error,\n            response: {\n                reasoning: body.response?.reasoning,\n                chartType: body.response?.chart_type,\n                chartSchema: body.response?.chart_schema\n            }\n        };\n    }\n    transformTextBasedAnswerResult(body) {\n        const { status, error } = this.transformStatusAndError(body);\n        return {\n            status: status,\n            numRowsUsedInLLM: body.num_rows_used_in_llm,\n            error\n        };\n    }\n    async waitDeployFinished(deployId) {\n        let deploySuccess = false;\n        // timeout after 30 seconds\n        for(let waitTime = 1; waitTime <= 7; waitTime++){\n            try {\n                const status = await this.getDeployStatus(deployId);\n                logger.debug(`Wren AI: Deploy status: ${status}`);\n                if (status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_1__.WrenAISystemStatus.FINISHED) {\n                    deploySuccess = true;\n                    break;\n                } else if (status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_1__.WrenAISystemStatus.FAILED) {\n                    break;\n                } else if (status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_1__.WrenAISystemStatus.INDEXING) {\n                // do nothing\n                } else {\n                    logger.debug(`Wren AI: Unknown Wren AI deploy status: ${status}`);\n                    return;\n                }\n            } catch (err) {\n                throw err;\n            }\n            await new Promise((resolve)=>setTimeout(resolve, waitTime * 1000));\n        }\n        return deploySuccess;\n    }\n    async getDeployStatus(deployId) {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenAIBaseEndpoint}/v1/semantics-preparations/${deployId}/status`);\n            if (res.data.error) {\n                // passing AI response error string to catch block\n                throw new Error(res.data.error);\n            }\n            return res.data?.status.toUpperCase();\n        } catch (err) {\n            logger.debug(`Got error in API /v1/semantics-preparations/${deployId}/status: ${err.message}`);\n            throw err;\n        }\n    }\n    transformAskResult(body) {\n        const { type, intent_reasoning } = body;\n        const { status, error } = this.transformStatusAndError(body);\n        const candidates = (body?.response || []).map((candidate)=>({\n                type: candidate?.type?.toUpperCase(),\n                sql: candidate.sql,\n                viewId: candidate?.viewId ? Number(candidate.viewId) : null\n            }));\n        return {\n            type,\n            status: status,\n            error,\n            response: candidates,\n            intentReasoning: intent_reasoning\n        };\n    }\n    transformRecommendationQuestionsResult(body) {\n        const { status, error } = this.transformStatusAndError(body);\n        return {\n            ...body,\n            status,\n            error\n        };\n    }\n    transformAskDetailResult(body) {\n        const { type } = body;\n        const { status, error } = this.transformStatusAndError(body);\n        // snake_case to camelCase\n        const steps = (body?.response?.steps || []).map((step)=>({\n                summary: step.summary,\n                sql: step.sql,\n                cteName: step.cte_name\n            }));\n        return {\n            type,\n            status: status,\n            error,\n            response: {\n                description: body?.response?.description,\n                steps\n            }\n        };\n    }\n    transformStatusAndError(body) {\n        // transform status to enum\n        const status = body?.status?.toUpperCase();\n        if (!status) {\n            throw new Error(`Unknown ask status: ${body?.status}`);\n        }\n        // use custom error to transform error\n        const code = body?.error?.code;\n        const error = code ? _server_utils_error__WEBPACK_IMPORTED_MODULE_3__.create(code, code === _server_utils_error__WEBPACK_IMPORTED_MODULE_3__.GeneralErrorCodes.AI_SERVICE_UNDEFINED_ERROR ? {\n            customMessage: body?.error?.message\n        } : undefined) : null;\n        // format custom error into WrenAIError that is used in graphql\n        const formattedError = error ? {\n            code: error.extensions.code,\n            message: error.message,\n            shortMessage: error.extensions.shortMessage\n        } : null;\n        return {\n            status,\n            error: formattedError\n        };\n    }\n    transfromHistoryInput(history) {\n        if (!history) {\n            return null;\n        }\n        // make it snake_case\n        return {\n            ...history,\n            steps: history.steps.map((step)=>({\n                    sql: step.sql,\n                    summary: step.summary,\n                    cte_name: step.cteName\n                }))\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9hZGFwdG9ycy93cmVuQUlBZGFwdG9yLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTBCO0FBd0JNO0FBQ1U7QUFDSTtBQUU5QyxNQUFNSyxTQUFTRix3REFBU0EsQ0FBQztBQUN6QkUsT0FBT0MsS0FBSyxHQUFHO0FBRWYsTUFBTUMsb0JBQW9CLENBQUNDO0lBQ3pCLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUdELE1BQU1FLFFBQVEsSUFBSSxDQUFDO0lBQ3BDLE9BQU9ELE1BQU1FLFNBQ1QsQ0FBQyxFQUFFSCxNQUFNSSxPQUFPLENBQUMsVUFBVSxFQUFFSCxLQUFLRSxNQUFNLENBQUMsQ0FBQyxHQUMxQ0gsTUFBTUksT0FBTztBQUNuQjtBQXVETyxNQUFNQztJQUdYQyxZQUFZLEVBQUVDLGtCQUFrQixFQUFrQyxDQUFFO1FBQ2xFLElBQUksQ0FBQ0Esa0JBQWtCLEdBQUdBO0lBQzVCO0lBRUE7OztHQUdDLEdBRUQsTUFBYUMsSUFBSUMsS0FBZSxFQUErQjtRQUM3RCxJQUFJO1lBQ0YsTUFBTUMsTUFBTSxNQUFNbEIsa0RBQVUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDZSxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsRUFBRTtnQkFDakVLLE9BQU9ILE1BQU1HLEtBQUs7Z0JBQ2xCQyxJQUFJSixNQUFNSyxRQUFRO2dCQUNsQkMsU0FBUyxJQUFJLENBQUNDLHFCQUFxQixDQUFDUCxNQUFNTSxPQUFPO2dCQUNqREUsZ0JBQWdCUixNQUFNUSxjQUFjO1lBQ3RDO1lBQ0EsT0FBTztnQkFBRUMsU0FBU1IsSUFBSVQsSUFBSSxDQUFDa0IsUUFBUTtZQUFDO1FBQ3RDLEVBQUUsT0FBT0MsS0FBVTtZQUNqQnZCLE9BQU93QixLQUFLLENBQUMsQ0FBQywrQkFBK0IsRUFBRXRCLGtCQUFrQnFCLEtBQUssQ0FBQztZQUN2RSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFhRSxVQUFVSixPQUFlLEVBQWlCO1FBQ3JELDREQUE0RDtRQUM1RCxJQUFJO1lBQ0YsTUFBTTFCLG1EQUFXLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ2Usa0JBQWtCLENBQUMsU0FBUyxFQUFFVyxRQUFRLENBQUMsRUFBRTtnQkFDakVNLFFBQVE7WUFDVjtRQUNGLEVBQUUsT0FBT0osS0FBVTtZQUNqQnZCLE9BQU93QixLQUFLLENBQUMsQ0FBQyw4QkFBOEIsRUFBRXRCLGtCQUFrQnFCLEtBQUssQ0FBQztZQUN0RSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFhSyxhQUFhUCxPQUFlLEVBQXNCO1FBQzdELCtEQUErRDtRQUMvRCxJQUFJO1lBQ0YsTUFBTVIsTUFBTSxNQUFNbEIsaURBQVMsQ0FDekIsQ0FBQyxFQUFFLElBQUksQ0FBQ2Usa0JBQWtCLENBQUMsU0FBUyxFQUFFVyxRQUFRLE9BQU8sQ0FBQztZQUV4RCxPQUFPLElBQUksQ0FBQ1Msa0JBQWtCLENBQUNqQixJQUFJVCxJQUFJO1FBQ3pDLEVBQUUsT0FBT21CLEtBQVU7WUFDakJ2QixPQUFPd0IsS0FBSyxDQUNWLENBQUMsbUNBQW1DLEVBQUV0QixrQkFBa0JxQixLQUFLLENBQUM7WUFFaEUsYUFBYTtZQUNiLE1BQU14Qix1REFBYSxDQUFDQSxrRUFBd0IsQ0FBQ2tDLHFCQUFxQixFQUFFO2dCQUNsRUMsZUFBZVg7WUFDakI7UUFDRjtJQUNGO0lBRUEsTUFBYVksc0JBQXNCZCxPQUFlLEVBQXFCO1FBQ3JFLG1GQUFtRjtRQUNuRixJQUFJO1lBQ0YsTUFBTVIsTUFBTSxNQUFNbEIsaURBQVMsQ0FDekIsQ0FBQyxFQUFFLElBQUksQ0FBQ2Usa0JBQWtCLENBQUMsU0FBUyxFQUFFVyxRQUFRLGlCQUFpQixDQUFDLEVBQ2hFO2dCQUFFZSxjQUFjO1lBQVM7WUFFM0IsT0FBT3ZCLElBQUlULElBQUk7UUFDakIsRUFBRSxPQUFPbUIsS0FBVTtZQUNqQnZCLE9BQU93QixLQUFLLENBQ1YsQ0FBQyw2Q0FBNkMsRUFBRXRCLGtCQUFrQnFCLEtBQUssQ0FBQztZQUUxRSxhQUFhO1lBQ2IsTUFBTXhCLHVEQUFhLENBQUNBLGtFQUF3QixDQUFDa0MscUJBQXFCLEVBQUU7Z0JBQ2xFQyxlQUFlWDtZQUNqQjtRQUNGO0lBQ0Y7SUFFQTs7R0FFQyxHQUVELE1BQWFjLGtCQUNYekIsS0FBcUIsRUFDUTtRQUM3QixJQUFJO1lBQ0YsTUFBTUMsTUFBTSxNQUFNbEIsa0RBQVUsQ0FDMUIsQ0FBQyxFQUFFLElBQUksQ0FBQ2Usa0JBQWtCLENBQUMsZUFBZSxDQUFDLEVBQzNDRTtZQUVGLE9BQU87Z0JBQUVTLFNBQVNSLElBQUlULElBQUksQ0FBQ2tCLFFBQVE7WUFBQztRQUN0QyxFQUFFLE9BQU9DLEtBQVU7WUFDakJ2QixPQUFPd0IsS0FBSyxDQUNWLENBQUMsc0NBQXNDLEVBQUV0QixrQkFBa0JxQixLQUFLLENBQUM7WUFFbkUsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBYWUsbUJBQW1CakIsT0FBZSxFQUE0QjtRQUN6RSxzRUFBc0U7UUFDdEUsSUFBSTtZQUNGLE1BQU1SLE1BQU0sTUFBTWxCLGlEQUFTLENBQ3pCLENBQUMsRUFBRSxJQUFJLENBQUNlLGtCQUFrQixDQUFDLGdCQUFnQixFQUFFVyxRQUFRLE9BQU8sQ0FBQztZQUUvRCxPQUFPLElBQUksQ0FBQ2tCLHdCQUF3QixDQUFDMUIsSUFBSVQsSUFBSTtRQUMvQyxFQUFFLE9BQU9tQixLQUFVO1lBQ2pCdkIsT0FBT3dCLEtBQUssQ0FDVixDQUFDLDBDQUEwQyxFQUFFdEIsa0JBQWtCcUIsS0FBSyxDQUFDO1lBRXZFLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQWFpQixPQUFPQyxVQUFzQixFQUFpQztRQUN6RSxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsSUFBSSxFQUFFLEdBQUdGO1FBQzNCLElBQUk7WUFDRixNQUFNNUIsTUFBTSxNQUFNbEIsa0RBQVUsQ0FDMUIsQ0FBQyxFQUFFLElBQUksQ0FBQ2Usa0JBQWtCLENBQUMsMEJBQTBCLENBQUMsRUFDdEQ7Z0JBQ0VrQyxLQUFLQyxLQUFLQyxTQUFTLENBQUNKO2dCQUNwQjFCLElBQUkyQjtZQUNOO1lBRUYsTUFBTTFCLFdBQVdKLElBQUlULElBQUksQ0FBQ1ksRUFBRTtZQUM1QmhCLE9BQU93QixLQUFLLENBQ1YsQ0FBQyxrQ0FBa0MsRUFBRW1CLEtBQUssWUFBWSxFQUFFMUIsU0FBUyxDQUFDO1lBRXBFLE1BQU04QixnQkFBZ0IsTUFBTSxJQUFJLENBQUNDLGtCQUFrQixDQUFDL0I7WUFDcEQsSUFBSThCLGVBQWU7Z0JBQ2pCL0MsT0FBT3dCLEtBQUssQ0FBQyxDQUFDLHVDQUF1QyxFQUFFbUIsS0FBSyxDQUFDO2dCQUM3RCxPQUFPO29CQUFFaEIsUUFBUS9CLDBFQUFzQkEsQ0FBQ3FELE9BQU87Z0JBQUM7WUFDbEQsT0FBTztnQkFDTCxPQUFPO29CQUNMdEIsUUFBUS9CLDBFQUFzQkEsQ0FBQ3NELE1BQU07b0JBQ3JDL0MsT0FBTyxDQUFDLGlEQUFpRCxFQUFFd0MsS0FBSyxDQUFDO2dCQUNuRTtZQUNGO1FBQ0YsRUFBRSxPQUFPcEIsS0FBVTtZQUNqQnZCLE9BQU93QixLQUFLLENBQ1YsQ0FBQywyQ0FBMkMsRUFBRW1CLEtBQUssU0FBUyxFQUFFcEIsSUFBSWhCLE9BQU8sQ0FBQyxDQUFDO1lBRTdFLE9BQU87Z0JBQ0xvQixRQUFRL0IsMEVBQXNCQSxDQUFDc0QsTUFBTTtnQkFDckMvQyxPQUFPLENBQUMsK0JBQStCLEVBQUV3QyxLQUFLLEVBQUUsRUFBRXBCLElBQUloQixPQUFPLENBQUMsQ0FBQztZQUNqRTtRQUNGO0lBQ0Y7SUFFQSxNQUFhNEMsZ0NBQ1h2QyxLQUFtQyxFQUNOO1FBQzdCLE1BQU13QyxPQUFPO1lBQ1hSLEtBQUtDLEtBQUtDLFNBQVMsQ0FBQ2xDLE1BQU04QixRQUFRO1lBQ2xDVyxvQkFBb0J6QyxNQUFNMEMsaUJBQWlCO1lBQzNDQyxlQUFlM0MsTUFBTTRDLFlBQVk7WUFDakNDLGdCQUFnQjdDLE1BQU04QyxhQUFhO1lBQ25DQyxlQUFlL0MsTUFBTStDLGFBQWE7UUFDcEM7UUFDQTNELE9BQU80RCxJQUFJLENBQUMsQ0FBQyw0Q0FBNEMsQ0FBQztRQUMxRCxJQUFJO1lBQ0YsTUFBTS9DLE1BQU0sTUFBTWxCLGtEQUFVLENBQzFCLENBQUMsRUFBRSxJQUFJLENBQUNlLGtCQUFrQixDQUFDLDRCQUE0QixDQUFDLEVBQ3hEMEM7WUFFRnBELE9BQU80RCxJQUFJLENBQ1QsQ0FBQyx1REFBdUQsRUFBRS9DLElBQUlULElBQUksQ0FBQ1ksRUFBRSxDQUFDLENBQUM7WUFFekUsT0FBTztnQkFBRUssU0FBU1IsSUFBSVQsSUFBSSxDQUFDWSxFQUFFO1lBQUM7UUFDaEMsRUFBRSxPQUFPTyxLQUFVO1lBQ2pCdkIsT0FBT3dCLEtBQUssQ0FDVixDQUFDLG9EQUFvRCxFQUFFdEIsa0JBQWtCcUIsS0FBSyxDQUFDO1lBRWpGLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQWFzQyxpQ0FDWHhDLE9BQWUsRUFDeUI7UUFDeEMsSUFBSTtZQUNGLE1BQU1SLE1BQU0sTUFBTWxCLGlEQUFTLENBQ3pCLENBQUMsRUFBRSxJQUFJLENBQUNlLGtCQUFrQixDQUFDLDZCQUE2QixFQUFFVyxRQUFRLENBQUM7WUFFckUsT0FBTyxJQUFJLENBQUN5QyxzQ0FBc0MsQ0FBQ2pELElBQUlULElBQUk7UUFDN0QsRUFBRSxPQUFPbUIsS0FBVTtZQUNqQnZCLE9BQU93QixLQUFLLENBQ1YsQ0FBQyx3REFBd0QsRUFBRXRCLGtCQUFrQnFCLEtBQUssQ0FBQztZQUVyRixNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFhd0Msc0JBQ1huRCxLQUEyQixFQUNFO1FBQzdCLE1BQU13QyxPQUFPO1lBQ1hyQyxPQUFPSCxNQUFNRyxLQUFLO1lBQ2xCaUQsS0FBS3BELE1BQU1vRCxHQUFHO1lBQ2RDLFVBQVVyRCxNQUFNc0QsT0FBTztZQUN2QkMsV0FBV3ZELE1BQU13RCxRQUFRO1lBQ3pCQyxTQUFTekQsTUFBTTBELE1BQU07WUFDckJsRCxnQkFBZ0JSLE1BQU1RLGNBQWM7UUFDdEM7UUFDQSxnRUFBZ0U7UUFDaEUsSUFBSTtZQUNGLE1BQU1QLE1BQU0sTUFBTWxCLGtEQUFVLENBQzFCLENBQUMsRUFBRSxJQUFJLENBQUNlLGtCQUFrQixDQUFDLGVBQWUsQ0FBQyxFQUMzQzBDO1lBRUYsT0FBTztnQkFBRS9CLFNBQVNSLElBQUlULElBQUksQ0FBQ2tCLFFBQVE7WUFBQztRQUN0QyxFQUFFLE9BQU9DLEtBQVU7WUFDakJ2QixPQUFPd0IsS0FBSyxDQUNWLENBQUMsMkNBQTJDLEVBQUV0QixrQkFBa0JxQixLQUFLLENBQUM7WUFFeEUsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBYWdELHlCQUNYbEQsT0FBZSxFQUNpQjtRQUNoQywrREFBK0Q7UUFDL0QsSUFBSTtZQUNGLE1BQU1SLE1BQU0sTUFBTWxCLGlEQUFTLENBQ3pCLENBQUMsRUFBRSxJQUFJLENBQUNlLGtCQUFrQixDQUFDLGdCQUFnQixFQUFFVyxRQUFRLENBQUM7WUFFeEQsT0FBTyxJQUFJLENBQUNtRCw4QkFBOEIsQ0FBQzNELElBQUlULElBQUk7UUFDckQsRUFBRSxPQUFPbUIsS0FBVTtZQUNqQnZCLE9BQU93QixLQUFLLENBQ1YsQ0FBQyxpREFBaUQsRUFBRXRCLGtCQUFrQnFCLEtBQUssQ0FBQztZQUU5RSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFha0Qsc0JBQXNCcEQsT0FBZSxFQUFxQjtRQUNyRSxtRkFBbUY7UUFDbkYsSUFBSTtZQUNGLE1BQU1SLE1BQU0sTUFBTWxCLGlEQUFTLENBQ3pCLENBQUMsRUFBRSxJQUFJLENBQUNlLGtCQUFrQixDQUFDLGdCQUFnQixFQUFFVyxRQUFRLFVBQVUsQ0FBQyxFQUNoRTtnQkFBRWUsY0FBYztZQUFTO1lBRTNCLE9BQU92QixJQUFJVCxJQUFJO1FBQ2pCLEVBQUUsT0FBT21CLEtBQVU7WUFDakJ2QixPQUFPd0IsS0FBSyxDQUNWLENBQUMsMkRBQTJELEVBQUV0QixrQkFBa0JxQixLQUFLLENBQUM7WUFFeEYsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBYW1ELGNBQWM5RCxLQUFpQixFQUErQjtRQUN6RSxJQUFJO1lBQ0YsTUFBTUMsTUFBTSxNQUFNbEIsa0RBQVUsQ0FDMUIsQ0FBQyxFQUFFLElBQUksQ0FBQ2Usa0JBQWtCLENBQUMsVUFBVSxDQUFDLEVBQ3RDRTtZQUVGLE9BQU87Z0JBQUVTLFNBQVNSLElBQUlULElBQUksQ0FBQ2tCLFFBQVE7WUFBQztRQUN0QyxFQUFFLE9BQU9DLEtBQVU7WUFDakJ2QixPQUFPd0IsS0FBSyxDQUFDLENBQUMsK0JBQStCLEVBQUV0QixrQkFBa0JxQixLQUFLLENBQUM7WUFDdkUsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBYW9ELGVBQWV0RCxPQUFlLEVBQXdCO1FBQ2pFLElBQUk7WUFDRixNQUFNUixNQUFNLE1BQU1sQixpREFBUyxDQUN6QixDQUFDLEVBQUUsSUFBSSxDQUFDZSxrQkFBa0IsQ0FBQyxXQUFXLEVBQUVXLFFBQVEsQ0FBQztZQUVuRCxPQUFPLElBQUksQ0FBQ3VELG9CQUFvQixDQUFDL0QsSUFBSVQsSUFBSTtRQUMzQyxFQUFFLE9BQU9tQixLQUFVO1lBQ2pCdkIsT0FBT3dCLEtBQUssQ0FDVixDQUFDLHFDQUFxQyxFQUFFdEIsa0JBQWtCcUIsS0FBSyxDQUFDO1lBRWxFLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQWFzRCxZQUFZeEQsT0FBZSxFQUFpQjtRQUN2RCxJQUFJO1lBQ0YsTUFBTTFCLG1EQUFXLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ2Usa0JBQWtCLENBQUMsV0FBVyxFQUFFVyxRQUFRLENBQUMsRUFBRTtnQkFDbkVNLFFBQVE7WUFDVjtRQUNGLEVBQUUsT0FBT0osS0FBVTtZQUNqQnZCLE9BQU93QixLQUFLLENBQUMsQ0FBQyxnQ0FBZ0MsRUFBRXRCLGtCQUFrQnFCLEtBQUssQ0FBQztZQUN4RSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFhdUQsWUFDWGxFLEtBQTJCLEVBQ0U7UUFDN0IsSUFBSTtZQUNGLE1BQU1DLE1BQU0sTUFBTWxCLGtEQUFVLENBQzFCLENBQUMsRUFBRSxJQUFJLENBQUNlLGtCQUFrQixDQUFDLHFCQUFxQixDQUFDLEVBQ2pELElBQUksQ0FBQ3FFLDZCQUE2QixDQUFDbkU7WUFFckMsT0FBTztnQkFBRVMsU0FBU1IsSUFBSVQsSUFBSSxDQUFDa0IsUUFBUTtZQUFDO1FBQ3RDLEVBQUUsT0FBT0MsS0FBVTtZQUNqQnZCLE9BQU93QixLQUFLLENBQUMsQ0FBQyxnQ0FBZ0MsRUFBRXRCLGtCQUFrQnFCLEtBQUssQ0FBQztZQUN4RSxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFheUQseUJBQXlCM0QsT0FBZSxFQUF3QjtRQUMzRSxJQUFJO1lBQ0YsTUFBTVIsTUFBTSxNQUFNbEIsaURBQVMsQ0FDekIsQ0FBQyxFQUFFLElBQUksQ0FBQ2Usa0JBQWtCLENBQUMsc0JBQXNCLEVBQUVXLFFBQVEsQ0FBQztZQUU5RCxPQUFPLElBQUksQ0FBQ3VELG9CQUFvQixDQUFDL0QsSUFBSVQsSUFBSTtRQUMzQyxFQUFFLE9BQU9tQixLQUFVO1lBQ2pCdkIsT0FBT3dCLEtBQUssQ0FDVixDQUFDLGdEQUFnRCxFQUFFdEIsa0JBQWtCcUIsS0FBSyxDQUFDO1lBRTdFLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQWEwRCxzQkFBc0I1RCxPQUFlLEVBQWlCO1FBQ2pFLElBQUk7WUFDRixNQUFNMUIsbURBQVcsQ0FDZixDQUFDLEVBQUUsSUFBSSxDQUFDZSxrQkFBa0IsQ0FBQyxzQkFBc0IsRUFBRVcsUUFBUSxDQUFDLEVBQzVEO2dCQUNFTSxRQUFRO1lBQ1Y7UUFFSixFQUFFLE9BQU9KLEtBQVU7WUFDakJ2QixPQUFPd0IsS0FBSyxDQUNWLENBQUMsMkNBQTJDLEVBQUV0QixrQkFBa0JxQixLQUFLLENBQUM7WUFFeEUsTUFBTUE7UUFDUjtJQUNGO0lBRVF3RCw4QkFBOEJuRSxLQUEyQixFQUFFO1FBQ2pFLE1BQU0sRUFBRUcsS0FBSyxFQUFFaUQsR0FBRyxFQUFFa0IsZ0JBQWdCLEVBQUVDLFdBQVcsRUFBRS9ELGNBQWMsRUFBRSxHQUFHUjtRQUN0RSxPQUFPO1lBQ0xHO1lBQ0FpRDtZQUNBb0IsbUJBQW1CO2dCQUNqQkMsWUFBWUgsaUJBQWlCSSxTQUFTLENBQUNDLFdBQVc7Z0JBQ2xEQyxRQUFRTixpQkFBaUJPLEtBQUs7Z0JBQzlCQyxRQUFRUixpQkFBaUJTLEtBQUs7Z0JBQzlCQyxVQUFVVixpQkFBaUJXLE9BQU87Z0JBQ2xDQyxPQUFPWixpQkFBaUJZLEtBQUs7Z0JBQzdCQyxPQUFPYixpQkFBaUJhLEtBQUs7WUFDL0I7WUFDQUMsY0FBY2I7WUFDZC9EO1FBQ0Y7SUFDRjtJQUVRd0QscUJBQXFCeEIsSUFBUyxFQUFlO1FBQ25ELE1BQU0sRUFBRXpCLE1BQU0sRUFBRXhCLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQzhGLHVCQUF1QixDQUFDN0M7UUFDdkQsT0FBTztZQUNMekIsUUFBUUE7WUFDUnhCO1lBQ0FFLFVBQVU7Z0JBQ1I2RixXQUFXOUMsS0FBSy9DLFFBQVEsRUFBRTZGO2dCQUMxQlosV0FBV2xDLEtBQUsvQyxRQUFRLEVBQUVnRjtnQkFDMUJGLGFBQWEvQixLQUFLL0MsUUFBUSxFQUFFMkY7WUFDOUI7UUFDRjtJQUNGO0lBRVF4QiwrQkFBK0JwQixJQUFTLEVBQXlCO1FBQ3ZFLE1BQU0sRUFBRXpCLE1BQU0sRUFBRXhCLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQzhGLHVCQUF1QixDQUFDN0M7UUFDdkQsT0FBTztZQUNMekIsUUFBUUE7WUFDUndFLGtCQUFrQi9DLEtBQUtnRCxvQkFBb0I7WUFDM0NqRztRQUNGO0lBQ0Y7SUFFQSxNQUFjNkMsbUJBQW1CL0IsUUFBZ0IsRUFBb0I7UUFDbkUsSUFBSThCLGdCQUFnQjtRQUNwQiwyQkFBMkI7UUFDM0IsSUFBSyxJQUFJc0QsV0FBVyxHQUFHQSxZQUFZLEdBQUdBLFdBQVk7WUFDaEQsSUFBSTtnQkFDRixNQUFNMUUsU0FBUyxNQUFNLElBQUksQ0FBQzJFLGVBQWUsQ0FBQ3JGO2dCQUMxQ2pCLE9BQU93QixLQUFLLENBQUMsQ0FBQyx3QkFBd0IsRUFBRUcsT0FBTyxDQUFDO2dCQUNoRCxJQUFJQSxXQUFXOUIsc0VBQWtCQSxDQUFDMEcsUUFBUSxFQUFFO29CQUMxQ3hELGdCQUFnQjtvQkFDaEI7Z0JBQ0YsT0FBTyxJQUFJcEIsV0FBVzlCLHNFQUFrQkEsQ0FBQ3FELE1BQU0sRUFBRTtvQkFDL0M7Z0JBQ0YsT0FBTyxJQUFJdkIsV0FBVzlCLHNFQUFrQkEsQ0FBQzJHLFFBQVEsRUFBRTtnQkFDakQsYUFBYTtnQkFDZixPQUFPO29CQUNMeEcsT0FBT3dCLEtBQUssQ0FBQyxDQUFDLHdDQUF3QyxFQUFFRyxPQUFPLENBQUM7b0JBQ2hFO2dCQUNGO1lBQ0YsRUFBRSxPQUFPSixLQUFVO2dCQUNqQixNQUFNQTtZQUNSO1lBQ0EsTUFBTSxJQUFJa0YsUUFBUSxDQUFDQyxVQUFZQyxXQUFXRCxTQUFTTCxXQUFXO1FBQ2hFO1FBQ0EsT0FBT3REO0lBQ1Q7SUFFQSxNQUFjdUQsZ0JBQWdCckYsUUFBZ0IsRUFBK0I7UUFDM0UsSUFBSTtZQUNGLE1BQU1KLE1BQU0sTUFBTWxCLGlEQUFTLENBQ3pCLENBQUMsRUFBRSxJQUFJLENBQUNlLGtCQUFrQixDQUFDLDJCQUEyQixFQUFFTyxTQUFTLE9BQU8sQ0FBQztZQUUzRSxJQUFJSixJQUFJVCxJQUFJLENBQUNELEtBQUssRUFBRTtnQkFDbEIsa0RBQWtEO2dCQUNsRCxNQUFNLElBQUl5RyxNQUFNL0YsSUFBSVQsSUFBSSxDQUFDRCxLQUFLO1lBQ2hDO1lBQ0EsT0FBT1UsSUFBSVQsSUFBSSxFQUFFdUIsT0FBT2tGO1FBQzFCLEVBQUUsT0FBT3RGLEtBQVU7WUFDakJ2QixPQUFPd0IsS0FBSyxDQUNWLENBQUMsNENBQTRDLEVBQUVQLFNBQVMsU0FBUyxFQUFFTSxJQUFJaEIsT0FBTyxDQUFDLENBQUM7WUFFbEYsTUFBTWdCO1FBQ1I7SUFDRjtJQUVRTyxtQkFBbUJzQixJQUFTLEVBQWE7UUFDL0MsTUFBTSxFQUFFMEQsSUFBSSxFQUFFQyxnQkFBZ0IsRUFBRSxHQUFHM0Q7UUFDbkMsTUFBTSxFQUFFekIsTUFBTSxFQUFFeEIsS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDOEYsdUJBQXVCLENBQUM3QztRQUN2RCxNQUFNNEQsYUFBYSxDQUFDNUQsTUFBTS9DLFlBQVksRUFBRSxFQUFFNEcsR0FBRyxDQUFDLENBQUNDLFlBQW9CO2dCQUNqRUosTUFBTUksV0FBV0osTUFBTUQ7Z0JBQ3ZCN0MsS0FBS2tELFVBQVVsRCxHQUFHO2dCQUNsQm1ELFFBQVFELFdBQVdDLFNBQVNDLE9BQU9GLFVBQVVDLE1BQU0sSUFBSTtZQUN6RDtRQUVBLE9BQU87WUFDTEw7WUFDQW5GLFFBQVFBO1lBQ1J4QjtZQUNBRSxVQUFVMkc7WUFDVkssaUJBQWlCTjtRQUNuQjtJQUNGO0lBRVFqRCx1Q0FDTlYsSUFBUyxFQUNzQjtRQUMvQixNQUFNLEVBQUV6QixNQUFNLEVBQUV4QixLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUM4Rix1QkFBdUIsQ0FBQzdDO1FBQ3ZELE9BQU87WUFDTCxHQUFHQSxJQUFJO1lBQ1B6QjtZQUNBeEI7UUFDRjtJQUNGO0lBRVFvQyx5QkFBeUJhLElBQVMsRUFBbUI7UUFDM0QsTUFBTSxFQUFFMEQsSUFBSSxFQUFFLEdBQUcxRDtRQUNqQixNQUFNLEVBQUV6QixNQUFNLEVBQUV4QixLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUM4Rix1QkFBdUIsQ0FBQzdDO1FBRXZELDBCQUEwQjtRQUMxQixNQUFNa0UsUUFBUSxDQUFDbEUsTUFBTS9DLFVBQVVpSCxTQUFTLEVBQUUsRUFBRUwsR0FBRyxDQUFDLENBQUNNLE9BQWU7Z0JBQzlEQyxTQUFTRCxLQUFLQyxPQUFPO2dCQUNyQnhELEtBQUt1RCxLQUFLdkQsR0FBRztnQkFDYnlELFNBQVNGLEtBQUtHLFFBQVE7WUFDeEI7UUFFQSxPQUFPO1lBQ0xaO1lBQ0FuRixRQUFRQTtZQUNSeEI7WUFDQUUsVUFBVTtnQkFDUnNILGFBQWF2RSxNQUFNL0MsVUFBVXNIO2dCQUM3Qkw7WUFDRjtRQUNGO0lBQ0Y7SUFFUXJCLHdCQUF3QjdDLElBQVMsRUFPdkM7UUFDQSwyQkFBMkI7UUFDM0IsTUFBTXpCLFNBQVN5QixNQUFNekIsUUFBUWtGO1FBRTdCLElBQUksQ0FBQ2xGLFFBQVE7WUFDWCxNQUFNLElBQUlpRixNQUFNLENBQUMsb0JBQW9CLEVBQUV4RCxNQUFNekIsT0FBTyxDQUFDO1FBQ3ZEO1FBRUEsc0NBQXNDO1FBQ3RDLE1BQU1pRyxPQUFPeEUsTUFBTWpELE9BQU95SDtRQUMxQixNQUFNekgsUUFBUXlILE9BQ1Y3SCx1REFBYSxDQUNYNkgsTUFDQUEsU0FBUzdILGtFQUF3QixDQUFDOEgsMEJBQTBCLEdBQ3hEO1lBQ0VDLGVBQWUxRSxNQUFNakQsT0FBT0k7UUFDOUIsSUFDQXdILGFBRU47UUFFSiwrREFBK0Q7UUFDL0QsTUFBTUMsaUJBQWlCN0gsUUFDbkI7WUFDRXlILE1BQU16SCxNQUFNOEgsVUFBVSxDQUFDTCxJQUFJO1lBQzNCckgsU0FBU0osTUFBTUksT0FBTztZQUN0QjJILGNBQWMvSCxNQUFNOEgsVUFBVSxDQUFDQyxZQUFZO1FBQzdDLElBQ0E7UUFFSixPQUFPO1lBQ0x2RztZQUNBeEIsT0FBTzZIO1FBQ1Q7SUFDRjtJQUVRN0csc0JBQXNCRCxPQUFtQixFQUFFO1FBQ2pELElBQUksQ0FBQ0EsU0FBUztZQUNaLE9BQU87UUFDVDtRQUVBLHFCQUFxQjtRQUNyQixPQUFPO1lBQ0wsR0FBR0EsT0FBTztZQUNWb0csT0FBT3BHLFFBQVFvRyxLQUFLLENBQUNMLEdBQUcsQ0FBQyxDQUFDTSxPQUFVO29CQUNsQ3ZELEtBQUt1RCxLQUFLdkQsR0FBRztvQkFDYndELFNBQVNELEtBQUtDLE9BQU87b0JBQ3JCRSxVQUFVSCxLQUFLRSxPQUFPO2dCQUN4QjtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9hZGFwdG9ycy93cmVuQUlBZGFwdG9yLnRzPzdjYTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCB7XG4gIEFza0NhbmRpZGF0ZVR5cGUsXG4gIEFza0RldGFpbElucHV0LFxuICBBc2tEZXRhaWxSZXN1bHQsXG4gIEFza0hpc3RvcnksXG4gIEFza1Jlc3VsdCxcbiAgQXNrUmVzdWx0U3RhdHVzLFxuICBBc3luY1F1ZXJ5UmVzcG9uc2UsXG4gIFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zSW5wdXQsXG4gIFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0LFxuICBXcmVuQUlEZXBsb3lTdGF0dXNFbnVtLFxuICBXcmVuQUlTeXN0ZW1TdGF0dXMsXG4gIFdyZW5BSURlcGxveVJlc3BvbnNlLFxuICBEZXBsb3lEYXRhLFxuICBBc2tJbnB1dCxcbiAgVGV4dEJhc2VkQW5zd2VySW5wdXQsXG4gIFRleHRCYXNlZEFuc3dlclJlc3VsdCxcbiAgQ2hhcnRJbnB1dCxcbiAgQ2hhcnRBZGp1c3RtZW50SW5wdXQsXG4gIENoYXJ0UmVzdWx0LFxuICBDaGFydFN0YXR1cyxcbiAgVGV4dEJhc2VkQW5zd2VyU3RhdHVzLFxufSBmcm9tICdAc2VydmVyL21vZGVscy9hZGFwdG9yJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BzZXJ2ZXIvdXRpbHMnO1xuaW1wb3J0ICogYXMgRXJyb3JzIGZyb20gJ0BzZXJ2ZXIvdXRpbHMvZXJyb3InO1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ1dyZW5BSUFkYXB0b3InKTtcbmxvZ2dlci5sZXZlbCA9ICdkZWJ1Zyc7XG5cbmNvbnN0IGdldEFJU2VydmljZUVycm9yID0gKGVycm9yOiBhbnkpID0+IHtcbiAgY29uc3QgeyBkYXRhIH0gPSBlcnJvci5yZXNwb25zZSB8fCB7fTtcbiAgcmV0dXJuIGRhdGE/LmRldGFpbFxuICAgID8gYCR7ZXJyb3IubWVzc2FnZX0sIGRldGFpbDogJHtkYXRhLmRldGFpbH1gXG4gICAgOiBlcnJvci5tZXNzYWdlO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBJV3JlbkFJQWRhcHRvciB7XG4gIGRlcGxveShkZXBsb3lEYXRhOiBEZXBsb3lEYXRhKTogUHJvbWlzZTxXcmVuQUlEZXBsb3lSZXNwb25zZT47XG5cbiAgLyoqXG4gICAqIEFzayBBSSBzZXJ2aWNlIGEgcXVlc3Rpb24uXG4gICAqIEFJIHNlcnZpY2Ugd2lsbCByZXR1cm4gYW53c2VyIGNhbmRpZGF0ZXMgY29udGFpbmluZyBzcWwuXG4gICAqIDEuIHVzZSBhc2soKSB0byBhc2sgYSBxdWVzdGlvbiwgQUkgc2VydmljZSB3aWxsIHJldHVybiBhIHF1ZXJ5SWRcbiAgICogMi4gdXNlIGdldEFza1Jlc3VsdCgpIHRvIGdldCB0aGUgcmVzdWx0IG9mIHRoZSBxdWVyeUlkXG4gICAqIDMuIHVzZSBjYW5jZWxBc2soKSB0byBjYW5jZWwgdGhlIHF1ZXJ5XG4gICAqKi9cbiAgYXNrKGlucHV0OiBBc2tJbnB1dCk6IFByb21pc2U8QXN5bmNRdWVyeVJlc3BvbnNlPjtcbiAgY2FuY2VsQXNrKHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIGdldEFza1Jlc3VsdChxdWVyeUlkOiBzdHJpbmcpOiBQcm9taXNlPEFza1Jlc3VsdD47XG4gIGdldEFza1N0cmVhbWluZ1Jlc3VsdChxdWVyeUlkOiBzdHJpbmcpOiBQcm9taXNlPFJlYWRhYmxlPjtcblxuICAvKipcbiAgICogQWZ0ZXIgeW91IGNob29zZSBhIGNhbmRpZGF0ZSwgeW91IGNhbiByZXF1ZXN0IEFJIHNlcnZpY2UgdG8gZ2VuZXJhdGUgdGhlIGRldGFpbC5cbiAgICogMS4gdXNlIGdlbmVyYXRlQXNrRGV0YWlsKCkgdG8gZ2VuZXJhdGUgdGhlIGRldGFpbC4gQUkgc2VydmljZSB3aWxsIHJldHVybiBhIHF1ZXJ5SWRcbiAgICogMi4gdXNlIGdldEFza0RldGFpbFJlc3VsdCgpIHRvIGdldCB0aGUgcmVzdWx0IG9mIHRoZSBxdWVyeUlkXG4gICAqL1xuICBnZW5lcmF0ZUFza0RldGFpbChpbnB1dDogQXNrRGV0YWlsSW5wdXQpOiBQcm9taXNlPEFzeW5jUXVlcnlSZXNwb25zZT47XG4gIGdldEFza0RldGFpbFJlc3VsdChxdWVyeUlkOiBzdHJpbmcpOiBQcm9taXNlPEFza0RldGFpbFJlc3VsdD47XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHJlY29tbWVuZGF0aW9uIHF1ZXN0aW9uc1xuICAgKi9cbiAgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyhcbiAgICBpbnB1dDogUmVjb21tZW5kYXRpb25RdWVzdGlvbnNJbnB1dCxcbiAgKTogUHJvbWlzZTxBc3luY1F1ZXJ5UmVzcG9uc2U+O1xuICBnZXRSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc1Jlc3VsdChcbiAgICBxdWVyeUlkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8UmVjb21tZW5kYXRpb25RdWVzdGlvbnNSZXN1bHQ+O1xuXG4gIC8qKlxuICAgKiBHZXQgdGV4dC1iYXNlZCBhbnN3ZXIgZnJvbSBTUUxcbiAgICovXG4gIGNyZWF0ZVRleHRCYXNlZEFuc3dlcihcbiAgICBpbnB1dDogVGV4dEJhc2VkQW5zd2VySW5wdXQsXG4gICk6IFByb21pc2U8QXN5bmNRdWVyeVJlc3BvbnNlPjtcbiAgZ2V0VGV4dEJhc2VkQW5zd2VyUmVzdWx0KHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8VGV4dEJhc2VkQW5zd2VyUmVzdWx0PjtcbiAgc3RyZWFtVGV4dEJhc2VkQW5zd2VyKHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8UmVhZGFibGU+O1xuXG4gIC8qKlxuICAgKiBDaGFydCByZWxhdGVkIEFQSXNcbiAgICovXG4gIGdlbmVyYXRlQ2hhcnQoaW5wdXQ6IENoYXJ0SW5wdXQpOiBQcm9taXNlPEFzeW5jUXVlcnlSZXNwb25zZT47XG4gIGdldENoYXJ0UmVzdWx0KHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcnRSZXN1bHQ+O1xuICBjYW5jZWxDaGFydChxdWVyeUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICBhZGp1c3RDaGFydChpbnB1dDogQ2hhcnRBZGp1c3RtZW50SW5wdXQpOiBQcm9taXNlPEFzeW5jUXVlcnlSZXNwb25zZT47XG4gIGdldENoYXJ0QWRqdXN0bWVudFJlc3VsdChxdWVyeUlkOiBzdHJpbmcpOiBQcm9taXNlPENoYXJ0UmVzdWx0PjtcbiAgY2FuY2VsQ2hhcnRBZGp1c3RtZW50KHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBjbGFzcyBXcmVuQUlBZGFwdG9yIGltcGxlbWVudHMgSVdyZW5BSUFkYXB0b3Ige1xuICBwcml2YXRlIHJlYWRvbmx5IHdyZW5BSUJhc2VFbmRwb2ludDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHsgd3JlbkFJQmFzZUVuZHBvaW50IH06IHsgd3JlbkFJQmFzZUVuZHBvaW50OiBzdHJpbmcgfSkge1xuICAgIHRoaXMud3JlbkFJQmFzZUVuZHBvaW50ID0gd3JlbkFJQmFzZUVuZHBvaW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEFzayBBSSBzZXJ2aWNlIGEgcXVlc3Rpb24uXG4gICAqIEFJIHNlcnZpY2Ugd2lsbCByZXR1cm4gYW53c2VyIGNhbmRpZGF0ZXMgY29udGFpbmluZyBzcWwuXG4gICAqL1xuXG4gIHB1YmxpYyBhc3luYyBhc2soaW5wdXQ6IEFza0lucHV0KTogUHJvbWlzZTxBc3luY1F1ZXJ5UmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdChgJHt0aGlzLndyZW5BSUJhc2VFbmRwb2ludH0vdjEvYXNrc2AsIHtcbiAgICAgICAgcXVlcnk6IGlucHV0LnF1ZXJ5LFxuICAgICAgICBpZDogaW5wdXQuZGVwbG95SWQsXG4gICAgICAgIGhpc3Rvcnk6IHRoaXMudHJhbnNmcm9tSGlzdG9yeUlucHV0KGlucHV0Lmhpc3RvcnkpLFxuICAgICAgICBjb25maWd1cmF0aW9uczogaW5wdXQuY29uZmlndXJhdGlvbnMsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7IHF1ZXJ5SWQ6IHJlcy5kYXRhLnF1ZXJ5X2lkIH07XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgR290IGVycm9yIHdoZW4gYXNraW5nIHdyZW4gQUk6ICR7Z2V0QUlTZXJ2aWNlRXJyb3IoZXJyKX1gKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY2FuY2VsQXNrKHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIG1ha2UgUEFUQ0ggcmVxdWVzdCAvdjEvYXNrcy86cXVlcnlfaWQgdG8gY2FuY2VsIHRoZSBxdWVyeVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBheGlvcy5wYXRjaChgJHt0aGlzLndyZW5BSUJhc2VFbmRwb2ludH0vdjEvYXNrcy8ke3F1ZXJ5SWR9YCwge1xuICAgICAgICBzdGF0dXM6ICdzdG9wcGVkJyxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoYEdvdCBlcnJvciB3aGVuIGNhbmNlbGluZyBhc2s6ICR7Z2V0QUlTZXJ2aWNlRXJyb3IoZXJyKX1gKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0QXNrUmVzdWx0KHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8QXNrUmVzdWx0PiB7XG4gICAgLy8gbWFrZSBHRVQgcmVxdWVzdCAvdjEvYXNrcy86cXVlcnlfaWQvcmVzdWx0IHRvIGdldCB0aGUgcmVzdWx0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgICAgYCR7dGhpcy53cmVuQUlCYXNlRW5kcG9pbnR9L3YxL2Fza3MvJHtxdWVyeUlkfS9yZXN1bHRgLFxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUFza1Jlc3VsdChyZXMuZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgYEdvdCBlcnJvciB3aGVuIGdldHRpbmcgYXNrIHJlc3VsdDogJHtnZXRBSVNlcnZpY2VFcnJvcihlcnIpfWAsXG4gICAgICApO1xuICAgICAgLy8gdGhyb3cgZXJyO1xuICAgICAgdGhyb3cgRXJyb3JzLmNyZWF0ZShFcnJvcnMuR2VuZXJhbEVycm9yQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLCB7XG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycixcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRBc2tTdHJlYW1pbmdSZXN1bHQocXVlcnlJZDogc3RyaW5nKTogUHJvbWlzZTxSZWFkYWJsZT4ge1xuICAgIC8vIG1ha2UgR0VUIHJlcXVlc3QgL3YxL2Fza3MvOnF1ZXJ5X2lkL3N0cmVhbWluZy1yZXN1bHQgdG8gZ2V0IHRoZSBzdHJlYW1pbmcgcmVzdWx0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgICAgYCR7dGhpcy53cmVuQUlCYXNlRW5kcG9pbnR9L3YxL2Fza3MvJHtxdWVyeUlkfS9zdHJlYW1pbmctcmVzdWx0YCxcbiAgICAgICAgeyByZXNwb25zZVR5cGU6ICdzdHJlYW0nIH0sXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHb3QgZXJyb3Igd2hlbiBnZXR0aW5nIGFzayBzdHJlYW1pbmcgcmVzdWx0OiAke2dldEFJU2VydmljZUVycm9yKGVycil9YCxcbiAgICAgICk7XG4gICAgICAvLyB0aHJvdyBlcnI7XG4gICAgICB0aHJvdyBFcnJvcnMuY3JlYXRlKEVycm9ycy5HZW5lcmFsRXJyb3JDb2Rlcy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsIHtcbiAgICAgICAgb3JpZ2luYWxFcnJvcjogZXJyLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFmdGVyIHlvdSBjaG9vc2UgYSBjYW5kaWRhdGUsIHlvdSBjYW4gcmVxdWVzdCBBSSBzZXJ2aWNlIHRvIGdlbmVyYXRlIHRoZSBkZXRhaWwuXG4gICAqL1xuXG4gIHB1YmxpYyBhc3luYyBnZW5lcmF0ZUFza0RldGFpbChcbiAgICBpbnB1dDogQXNrRGV0YWlsSW5wdXQsXG4gICk6IFByb21pc2U8QXN5bmNRdWVyeVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgIGAke3RoaXMud3JlbkFJQmFzZUVuZHBvaW50fS92MS9hc2stZGV0YWlsc2AsXG4gICAgICAgIGlucHV0LFxuICAgICAgKTtcbiAgICAgIHJldHVybiB7IHF1ZXJ5SWQ6IHJlcy5kYXRhLnF1ZXJ5X2lkIH07XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgYEdvdCBlcnJvciB3aGVuIGdlbmVyYXRpbmcgYXNrIGRldGFpbDogJHtnZXRBSVNlcnZpY2VFcnJvcihlcnIpfWAsXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRBc2tEZXRhaWxSZXN1bHQocXVlcnlJZDogc3RyaW5nKTogUHJvbWlzZTxBc2tEZXRhaWxSZXN1bHQ+IHtcbiAgICAvLyBtYWtlIEdFVCByZXF1ZXN0IC92MS9hc2stZGV0YWlscy86cXVlcnlfaWQvcmVzdWx0IHRvIGdldCB0aGUgcmVzdWx0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgICAgYCR7dGhpcy53cmVuQUlCYXNlRW5kcG9pbnR9L3YxL2Fzay1kZXRhaWxzLyR7cXVlcnlJZH0vcmVzdWx0YCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Bc2tEZXRhaWxSZXN1bHQocmVzLmRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHb3QgZXJyb3Igd2hlbiBnZXR0aW5nIGFzayBkZXRhaWwgcmVzdWx0OiAke2dldEFJU2VydmljZUVycm9yKGVycil9YCxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlcGxveShkZXBsb3lEYXRhOiBEZXBsb3lEYXRhKTogUHJvbWlzZTxXcmVuQUlEZXBsb3lSZXNwb25zZT4ge1xuICAgIGNvbnN0IHsgbWFuaWZlc3QsIGhhc2ggfSA9IGRlcGxveURhdGE7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgIGAke3RoaXMud3JlbkFJQmFzZUVuZHBvaW50fS92MS9zZW1hbnRpY3MtcHJlcGFyYXRpb25zYCxcbiAgICAgICAge1xuICAgICAgICAgIG1kbDogSlNPTi5zdHJpbmdpZnkobWFuaWZlc3QpLFxuICAgICAgICAgIGlkOiBoYXNoLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRlcGxveUlkID0gcmVzLmRhdGEuaWQ7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBXcmVuIEFJOiBEZXBsb3lpbmcgd3JlbiBBSSwgaGFzaDogJHtoYXNofSwgZGVwbG95SWQ6ICR7ZGVwbG95SWR9YCxcbiAgICAgICk7XG4gICAgICBjb25zdCBkZXBsb3lTdWNjZXNzID0gYXdhaXQgdGhpcy53YWl0RGVwbG95RmluaXNoZWQoZGVwbG95SWQpO1xuICAgICAgaWYgKGRlcGxveVN1Y2Nlc3MpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBXcmVuIEFJOiBEZXBsb3kgd3JlbiBBSSBzdWNjZXNzLCBoYXNoOiAke2hhc2h9YCk7XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogV3JlbkFJRGVwbG95U3RhdHVzRW51bS5TVUNDRVNTIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXR1czogV3JlbkFJRGVwbG95U3RhdHVzRW51bS5GQUlMRUQsXG4gICAgICAgICAgZXJyb3I6IGBXcmVuIEFJOiBEZXBsb3kgd3JlbiBBSSBmYWlsZWQgb3IgdGltZW91dCwgaGFzaDogJHtoYXNofWAsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgYEdvdCBlcnJvciB3aGVuIGRlcGxveWluZyB0byB3cmVuIEFJLCBoYXNoOiAke2hhc2h9LiBFcnJvcjogJHtlcnIubWVzc2FnZX1gLFxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogV3JlbkFJRGVwbG95U3RhdHVzRW51bS5GQUlMRUQsXG4gICAgICAgIGVycm9yOiBgV3JlbiBBSSBFcnJvcjogZGVwbG95bWVudCBoYXNoOiR7aGFzaH0sICR7ZXJyLm1lc3NhZ2V9YCxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGdlbmVyYXRlUmVjb21tZW5kYXRpb25RdWVzdGlvbnMoXG4gICAgaW5wdXQ6IFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zSW5wdXQsXG4gICk6IFByb21pc2U8QXN5bmNRdWVyeVJlc3BvbnNlPiB7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIG1kbDogSlNPTi5zdHJpbmdpZnkoaW5wdXQubWFuaWZlc3QpLFxuICAgICAgcHJldmlvdXNfcXVlc3Rpb25zOiBpbnB1dC5wcmV2aW91c1F1ZXN0aW9ucyxcbiAgICAgIG1heF9xdWVzdGlvbnM6IGlucHV0Lm1heFF1ZXN0aW9ucyxcbiAgICAgIG1heF9jYXRlZ29yaWVzOiBpbnB1dC5tYXhDYXRlZ29yaWVzLFxuICAgICAgY29uZmlndXJhdGlvbjogaW5wdXQuY29uZmlndXJhdGlvbixcbiAgICB9O1xuICAgIGxvZ2dlci5pbmZvKGBXcmVuIEFJOiBHZW5lcmF0aW5nIHJlY29tbWVuZGF0aW9uIHF1ZXN0aW9uc2ApO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBgJHt0aGlzLndyZW5BSUJhc2VFbmRwb2ludH0vdjEvcXVlc3Rpb24tcmVjb21tZW5kYXRpb25zYCxcbiAgICAgICAgYm9keSxcbiAgICAgICk7XG4gICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgYFdyZW4gQUk6IEdlbmVyYXRpbmcgcmVjb21tZW5kYXRpb24gcXVlc3Rpb25zLCBxdWVyeUlkOiAke3Jlcy5kYXRhLmlkfWAsXG4gICAgICApO1xuICAgICAgcmV0dXJuIHsgcXVlcnlJZDogcmVzLmRhdGEuaWQgfTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBgR290IGVycm9yIHdoZW4gZ2VuZXJhdGluZyByZWNvbW1lbmRhdGlvbiBxdWVzdGlvbnM6ICR7Z2V0QUlTZXJ2aWNlRXJyb3IoZXJyKX1gLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVjb21tZW5kYXRpb25RdWVzdGlvbnNSZXN1bHQoXG4gICAgcXVlcnlJZDogc3RyaW5nLFxuICApOiBQcm9taXNlPFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgICAgYCR7dGhpcy53cmVuQUlCYXNlRW5kcG9pbnR9L3YxL3F1ZXN0aW9uLXJlY29tbWVuZGF0aW9ucy8ke3F1ZXJ5SWR9YCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1SZWNvbW1lbmRhdGlvblF1ZXN0aW9uc1Jlc3VsdChyZXMuZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgYEdvdCBlcnJvciB3aGVuIGdldHRpbmcgcmVjb21tZW5kYXRpb24gcXVlc3Rpb25zIHJlc3VsdDogJHtnZXRBSVNlcnZpY2VFcnJvcihlcnIpfWAsXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjcmVhdGVUZXh0QmFzZWRBbnN3ZXIoXG4gICAgaW5wdXQ6IFRleHRCYXNlZEFuc3dlcklucHV0LFxuICApOiBQcm9taXNlPEFzeW5jUXVlcnlSZXNwb25zZT4ge1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICBxdWVyeTogaW5wdXQucXVlcnksXG4gICAgICBzcWw6IGlucHV0LnNxbCxcbiAgICAgIHNxbF9kYXRhOiBpbnB1dC5zcWxEYXRhLFxuICAgICAgdGhyZWFkX2lkOiBpbnB1dC50aHJlYWRJZCxcbiAgICAgIHVzZXJfaWQ6IGlucHV0LnVzZXJJZCxcbiAgICAgIGNvbmZpZ3VyYXRpb25zOiBpbnB1dC5jb25maWd1cmF0aW9ucyxcbiAgICB9O1xuICAgIC8vIG1ha2UgUE9TVCByZXF1ZXN0IC92MS9zcWwtYW5zd2VycyB0byBjcmVhdGUgdGV4dC1iYXNlZCBhbnN3ZXJcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgICAgYCR7dGhpcy53cmVuQUlCYXNlRW5kcG9pbnR9L3YxL3NxbC1hbnN3ZXJzYCxcbiAgICAgICAgYm9keSxcbiAgICAgICk7XG4gICAgICByZXR1cm4geyBxdWVyeUlkOiByZXMuZGF0YS5xdWVyeV9pZCB9O1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHb3QgZXJyb3Igd2hlbiBjcmVhdGluZyB0ZXh0LWJhc2VkIGFuc3dlcjogJHtnZXRBSVNlcnZpY2VFcnJvcihlcnIpfWAsXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRUZXh0QmFzZWRBbnN3ZXJSZXN1bHQoXG4gICAgcXVlcnlJZDogc3RyaW5nLFxuICApOiBQcm9taXNlPFRleHRCYXNlZEFuc3dlclJlc3VsdD4ge1xuICAgIC8vIG1ha2UgR0VUIHJlcXVlc3QgL3YxL3NxbC1hbnN3ZXJzLzpxdWVyeV9pZCB0byBnZXQgdGhlIHJlc3VsdFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgIGAke3RoaXMud3JlbkFJQmFzZUVuZHBvaW50fS92MS9zcWwtYW5zd2Vycy8ke3F1ZXJ5SWR9YCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1UZXh0QmFzZWRBbnN3ZXJSZXN1bHQocmVzLmRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHb3QgZXJyb3Igd2hlbiBnZXR0aW5nIHRleHQtYmFzZWQgYW5zd2VyIHJlc3VsdDogJHtnZXRBSVNlcnZpY2VFcnJvcihlcnIpfWAsXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdHJlYW1UZXh0QmFzZWRBbnN3ZXIocXVlcnlJZDogc3RyaW5nKTogUHJvbWlzZTxSZWFkYWJsZT4ge1xuICAgIC8vIG1ha2UgR0VUIHJlcXVlc3QgL3YxL3NxbC1hbnN3ZXJzLzpxdWVyeV9pZC9zdHJlYW1pbmcgdG8gZ2V0IHRoZSBzdHJlYW1pbmcgcmVzdWx0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgICAgYCR7dGhpcy53cmVuQUlCYXNlRW5kcG9pbnR9L3YxL3NxbC1hbnN3ZXJzLyR7cXVlcnlJZH0vc3RyZWFtaW5nYCxcbiAgICAgICAgeyByZXNwb25zZVR5cGU6ICdzdHJlYW0nIH0sXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHb3QgZXJyb3Igd2hlbiBnZXR0aW5nIHRleHQtYmFzZWQgYW5zd2VyIHN0cmVhbWluZyByZXN1bHQ6ICR7Z2V0QUlTZXJ2aWNlRXJyb3IoZXJyKX1gLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVDaGFydChpbnB1dDogQ2hhcnRJbnB1dCk6IFByb21pc2U8QXN5bmNRdWVyeVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgIGAke3RoaXMud3JlbkFJQmFzZUVuZHBvaW50fS92MS9jaGFydHNgLFxuICAgICAgICBpbnB1dCxcbiAgICAgICk7XG4gICAgICByZXR1cm4geyBxdWVyeUlkOiByZXMuZGF0YS5xdWVyeV9pZCB9O1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoYEdvdCBlcnJvciB3aGVuIGNyZWF0aW5nIGNoYXJ0OiAke2dldEFJU2VydmljZUVycm9yKGVycil9YCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldENoYXJ0UmVzdWx0KHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcnRSZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KFxuICAgICAgICBgJHt0aGlzLndyZW5BSUJhc2VFbmRwb2ludH0vdjEvY2hhcnRzLyR7cXVlcnlJZH1gLFxuICAgICAgKTtcbiAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUNoYXJ0UmVzdWx0KHJlcy5kYXRhKTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBgR290IGVycm9yIHdoZW4gZ2V0dGluZyBjaGFydCByZXN1bHQ6ICR7Z2V0QUlTZXJ2aWNlRXJyb3IoZXJyKX1gLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY2FuY2VsQ2hhcnQocXVlcnlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGF4aW9zLnBhdGNoKGAke3RoaXMud3JlbkFJQmFzZUVuZHBvaW50fS92MS9jaGFydHMvJHtxdWVyeUlkfWAsIHtcbiAgICAgICAgc3RhdHVzOiAnc3RvcHBlZCcsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBHb3QgZXJyb3Igd2hlbiBjYW5jZWxpbmcgY2hhcnQ6ICR7Z2V0QUlTZXJ2aWNlRXJyb3IoZXJyKX1gKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYWRqdXN0Q2hhcnQoXG4gICAgaW5wdXQ6IENoYXJ0QWRqdXN0bWVudElucHV0LFxuICApOiBQcm9taXNlPEFzeW5jUXVlcnlSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBgJHt0aGlzLndyZW5BSUJhc2VFbmRwb2ludH0vdjEvY2hhcnQtYWRqdXN0bWVudHNgLFxuICAgICAgICB0aGlzLnRyYW5zZm9ybUNoYXJ0QWRqdXN0bWVudElucHV0KGlucHV0KSxcbiAgICAgICk7XG4gICAgICByZXR1cm4geyBxdWVyeUlkOiByZXMuZGF0YS5xdWVyeV9pZCB9O1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoYEdvdCBlcnJvciB3aGVuIGFkanVzdGluZyBjaGFydDogJHtnZXRBSVNlcnZpY2VFcnJvcihlcnIpfWApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRDaGFydEFkanVzdG1lbnRSZXN1bHQocXVlcnlJZDogc3RyaW5nKTogUHJvbWlzZTxDaGFydFJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgIGAke3RoaXMud3JlbkFJQmFzZUVuZHBvaW50fS92MS9jaGFydC1hZGp1c3RtZW50cy8ke3F1ZXJ5SWR9YCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1DaGFydFJlc3VsdChyZXMuZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgYEdvdCBlcnJvciB3aGVuIGdldHRpbmcgY2hhcnQgYWRqdXN0bWVudCByZXN1bHQ6ICR7Z2V0QUlTZXJ2aWNlRXJyb3IoZXJyKX1gLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY2FuY2VsQ2hhcnRBZGp1c3RtZW50KHF1ZXJ5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBheGlvcy5wYXRjaChcbiAgICAgICAgYCR7dGhpcy53cmVuQUlCYXNlRW5kcG9pbnR9L3YxL2NoYXJ0LWFkanVzdG1lbnRzLyR7cXVlcnlJZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgc3RhdHVzOiAnc3RvcHBlZCcsXG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHb3QgZXJyb3Igd2hlbiBjYW5jZWxpbmcgY2hhcnQgYWRqdXN0bWVudDogJHtnZXRBSVNlcnZpY2VFcnJvcihlcnIpfWAsXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNmb3JtQ2hhcnRBZGp1c3RtZW50SW5wdXQoaW5wdXQ6IENoYXJ0QWRqdXN0bWVudElucHV0KSB7XG4gICAgY29uc3QgeyBxdWVyeSwgc3FsLCBhZGp1c3RtZW50T3B0aW9uLCBjaGFydFNjaGVtYSwgY29uZmlndXJhdGlvbnMgfSA9IGlucHV0O1xuICAgIHJldHVybiB7XG4gICAgICBxdWVyeSxcbiAgICAgIHNxbCxcbiAgICAgIGFkanVzdG1lbnRfb3B0aW9uOiB7XG4gICAgICAgIGNoYXJ0X3R5cGU6IGFkanVzdG1lbnRPcHRpb24uY2hhcnRUeXBlLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIHhfYXhpczogYWRqdXN0bWVudE9wdGlvbi54QXhpcyxcbiAgICAgICAgeV9heGlzOiBhZGp1c3RtZW50T3B0aW9uLnlBeGlzLFxuICAgICAgICB4X29mZnNldDogYWRqdXN0bWVudE9wdGlvbi54T2Zmc2V0LFxuICAgICAgICBjb2xvcjogYWRqdXN0bWVudE9wdGlvbi5jb2xvcixcbiAgICAgICAgdGhldGE6IGFkanVzdG1lbnRPcHRpb24udGhldGEsXG4gICAgICB9LFxuICAgICAgY2hhcnRfc2NoZW1hOiBjaGFydFNjaGVtYSxcbiAgICAgIGNvbmZpZ3VyYXRpb25zLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybUNoYXJ0UmVzdWx0KGJvZHk6IGFueSk6IENoYXJ0UmVzdWx0IHtcbiAgICBjb25zdCB7IHN0YXR1cywgZXJyb3IgfSA9IHRoaXMudHJhbnNmb3JtU3RhdHVzQW5kRXJyb3IoYm9keSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogc3RhdHVzIGFzIENoYXJ0U3RhdHVzLFxuICAgICAgZXJyb3IsXG4gICAgICByZXNwb25zZToge1xuICAgICAgICByZWFzb25pbmc6IGJvZHkucmVzcG9uc2U/LnJlYXNvbmluZyxcbiAgICAgICAgY2hhcnRUeXBlOiBib2R5LnJlc3BvbnNlPy5jaGFydF90eXBlLFxuICAgICAgICBjaGFydFNjaGVtYTogYm9keS5yZXNwb25zZT8uY2hhcnRfc2NoZW1hLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFuc2Zvcm1UZXh0QmFzZWRBbnN3ZXJSZXN1bHQoYm9keTogYW55KTogVGV4dEJhc2VkQW5zd2VyUmVzdWx0IHtcbiAgICBjb25zdCB7IHN0YXR1cywgZXJyb3IgfSA9IHRoaXMudHJhbnNmb3JtU3RhdHVzQW5kRXJyb3IoYm9keSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogc3RhdHVzIGFzIFRleHRCYXNlZEFuc3dlclN0YXR1cyxcbiAgICAgIG51bVJvd3NVc2VkSW5MTE06IGJvZHkubnVtX3Jvd3NfdXNlZF9pbl9sbG0sXG4gICAgICBlcnJvcixcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB3YWl0RGVwbG95RmluaXNoZWQoZGVwbG95SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGxldCBkZXBsb3lTdWNjZXNzID0gZmFsc2U7XG4gICAgLy8gdGltZW91dCBhZnRlciAzMCBzZWNvbmRzXG4gICAgZm9yIChsZXQgd2FpdFRpbWUgPSAxOyB3YWl0VGltZSA8PSA3OyB3YWl0VGltZSsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCB0aGlzLmdldERlcGxveVN0YXR1cyhkZXBsb3lJZCk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgV3JlbiBBSTogRGVwbG95IHN0YXR1czogJHtzdGF0dXN9YCk7XG4gICAgICAgIGlmIChzdGF0dXMgPT09IFdyZW5BSVN5c3RlbVN0YXR1cy5GSU5JU0hFRCkge1xuICAgICAgICAgIGRlcGxveVN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gV3JlbkFJU3lzdGVtU3RhdHVzLkZBSUxFRCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gV3JlbkFJU3lzdGVtU3RhdHVzLklOREVYSU5HKSB7XG4gICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgV3JlbiBBSTogVW5rbm93biBXcmVuIEFJIGRlcGxveSBzdGF0dXM6ICR7c3RhdHVzfWApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgd2FpdFRpbWUgKiAxMDAwKSk7XG4gICAgfVxuICAgIHJldHVybiBkZXBsb3lTdWNjZXNzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXREZXBsb3lTdGF0dXMoZGVwbG95SWQ6IHN0cmluZyk6IFByb21pc2U8V3JlbkFJU3lzdGVtU3RhdHVzPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgICAgYCR7dGhpcy53cmVuQUlCYXNlRW5kcG9pbnR9L3YxL3NlbWFudGljcy1wcmVwYXJhdGlvbnMvJHtkZXBsb3lJZH0vc3RhdHVzYCxcbiAgICAgICk7XG4gICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgLy8gcGFzc2luZyBBSSByZXNwb25zZSBlcnJvciBzdHJpbmcgdG8gY2F0Y2ggYmxvY2tcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlcy5kYXRhLmVycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXMuZGF0YT8uc3RhdHVzLnRvVXBwZXJDYXNlKCkgYXMgV3JlbkFJU3lzdGVtU3RhdHVzO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHb3QgZXJyb3IgaW4gQVBJIC92MS9zZW1hbnRpY3MtcHJlcGFyYXRpb25zLyR7ZGVwbG95SWR9L3N0YXR1czogJHtlcnIubWVzc2FnZX1gLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybUFza1Jlc3VsdChib2R5OiBhbnkpOiBBc2tSZXN1bHQge1xuICAgIGNvbnN0IHsgdHlwZSwgaW50ZW50X3JlYXNvbmluZyB9ID0gYm9keTtcbiAgICBjb25zdCB7IHN0YXR1cywgZXJyb3IgfSA9IHRoaXMudHJhbnNmb3JtU3RhdHVzQW5kRXJyb3IoYm9keSk7XG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IChib2R5Py5yZXNwb25zZSB8fCBbXSkubWFwKChjYW5kaWRhdGU6IGFueSkgPT4gKHtcbiAgICAgIHR5cGU6IGNhbmRpZGF0ZT8udHlwZT8udG9VcHBlckNhc2UoKSBhcyBBc2tDYW5kaWRhdGVUeXBlLFxuICAgICAgc3FsOiBjYW5kaWRhdGUuc3FsLFxuICAgICAgdmlld0lkOiBjYW5kaWRhdGU/LnZpZXdJZCA/IE51bWJlcihjYW5kaWRhdGUudmlld0lkKSA6IG51bGwsXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGUsXG4gICAgICBzdGF0dXM6IHN0YXR1cyBhcyBBc2tSZXN1bHRTdGF0dXMsXG4gICAgICBlcnJvcixcbiAgICAgIHJlc3BvbnNlOiBjYW5kaWRhdGVzLFxuICAgICAgaW50ZW50UmVhc29uaW5nOiBpbnRlbnRfcmVhc29uaW5nLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybVJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0KFxuICAgIGJvZHk6IGFueSxcbiAgKTogUmVjb21tZW5kYXRpb25RdWVzdGlvbnNSZXN1bHQge1xuICAgIGNvbnN0IHsgc3RhdHVzLCBlcnJvciB9ID0gdGhpcy50cmFuc2Zvcm1TdGF0dXNBbmRFcnJvcihib2R5KTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uYm9keSxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGVycm9yLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybUFza0RldGFpbFJlc3VsdChib2R5OiBhbnkpOiBBc2tEZXRhaWxSZXN1bHQge1xuICAgIGNvbnN0IHsgdHlwZSB9ID0gYm9keTtcbiAgICBjb25zdCB7IHN0YXR1cywgZXJyb3IgfSA9IHRoaXMudHJhbnNmb3JtU3RhdHVzQW5kRXJyb3IoYm9keSk7XG5cbiAgICAvLyBzbmFrZV9jYXNlIHRvIGNhbWVsQ2FzZVxuICAgIGNvbnN0IHN0ZXBzID0gKGJvZHk/LnJlc3BvbnNlPy5zdGVwcyB8fCBbXSkubWFwKChzdGVwOiBhbnkpID0+ICh7XG4gICAgICBzdW1tYXJ5OiBzdGVwLnN1bW1hcnksXG4gICAgICBzcWw6IHN0ZXAuc3FsLFxuICAgICAgY3RlTmFtZTogc3RlcC5jdGVfbmFtZSxcbiAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZSxcbiAgICAgIHN0YXR1czogc3RhdHVzIGFzIEFza1Jlc3VsdFN0YXR1cyxcbiAgICAgIGVycm9yLFxuICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgZGVzY3JpcHRpb246IGJvZHk/LnJlc3BvbnNlPy5kZXNjcmlwdGlvbixcbiAgICAgICAgc3RlcHMsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybVN0YXR1c0FuZEVycm9yKGJvZHk6IGFueSk6IHtcbiAgICBzdGF0dXM6IEFza1Jlc3VsdFN0YXR1cyB8IFRleHRCYXNlZEFuc3dlclN0YXR1cyB8IENoYXJ0U3RhdHVzO1xuICAgIGVycm9yPzoge1xuICAgICAgY29kZTogRXJyb3JzLkdlbmVyYWxFcnJvckNvZGVzO1xuICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgc2hvcnRNZXNzYWdlOiBzdHJpbmc7XG4gICAgfSB8IG51bGw7XG4gIH0ge1xuICAgIC8vIHRyYW5zZm9ybSBzdGF0dXMgdG8gZW51bVxuICAgIGNvbnN0IHN0YXR1cyA9IGJvZHk/LnN0YXR1cz8udG9VcHBlckNhc2UoKTtcblxuICAgIGlmICghc3RhdHVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gYXNrIHN0YXR1czogJHtib2R5Py5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgLy8gdXNlIGN1c3RvbSBlcnJvciB0byB0cmFuc2Zvcm0gZXJyb3JcbiAgICBjb25zdCBjb2RlID0gYm9keT8uZXJyb3I/LmNvZGU7XG4gICAgY29uc3QgZXJyb3IgPSBjb2RlXG4gICAgICA/IEVycm9ycy5jcmVhdGUoXG4gICAgICAgICAgY29kZSxcbiAgICAgICAgICBjb2RlID09PSBFcnJvcnMuR2VuZXJhbEVycm9yQ29kZXMuQUlfU0VSVklDRV9VTkRFRklORURfRVJST1JcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGN1c3RvbU1lc3NhZ2U6IGJvZHk/LmVycm9yPy5tZXNzYWdlLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgKVxuICAgICAgOiBudWxsO1xuXG4gICAgLy8gZm9ybWF0IGN1c3RvbSBlcnJvciBpbnRvIFdyZW5BSUVycm9yIHRoYXQgaXMgdXNlZCBpbiBncmFwaHFsXG4gICAgY29uc3QgZm9ybWF0dGVkRXJyb3IgPSBlcnJvclxuICAgICAgPyB7XG4gICAgICAgICAgY29kZTogZXJyb3IuZXh0ZW5zaW9ucy5jb2RlIGFzIEVycm9ycy5HZW5lcmFsRXJyb3JDb2RlcyxcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIHNob3J0TWVzc2FnZTogZXJyb3IuZXh0ZW5zaW9ucy5zaG9ydE1lc3NhZ2UgYXMgc3RyaW5nLFxuICAgICAgICB9XG4gICAgICA6IG51bGw7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzLFxuICAgICAgZXJyb3I6IGZvcm1hdHRlZEVycm9yLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZnJvbUhpc3RvcnlJbnB1dChoaXN0b3J5OiBBc2tIaXN0b3J5KSB7XG4gICAgaWYgKCFoaXN0b3J5KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBtYWtlIGl0IHNuYWtlX2Nhc2VcbiAgICByZXR1cm4ge1xuICAgICAgLi4uaGlzdG9yeSxcbiAgICAgIHN0ZXBzOiBoaXN0b3J5LnN0ZXBzLm1hcCgoc3RlcCkgPT4gKHtcbiAgICAgICAgc3FsOiBzdGVwLnNxbCxcbiAgICAgICAgc3VtbWFyeTogc3RlcC5zdW1tYXJ5LFxuICAgICAgICBjdGVfbmFtZTogc3RlcC5jdGVOYW1lLFxuICAgICAgfSkpLFxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJheGlvcyIsIldyZW5BSURlcGxveVN0YXR1c0VudW0iLCJXcmVuQUlTeXN0ZW1TdGF0dXMiLCJnZXRMb2dnZXIiLCJFcnJvcnMiLCJsb2dnZXIiLCJsZXZlbCIsImdldEFJU2VydmljZUVycm9yIiwiZXJyb3IiLCJkYXRhIiwicmVzcG9uc2UiLCJkZXRhaWwiLCJtZXNzYWdlIiwiV3JlbkFJQWRhcHRvciIsImNvbnN0cnVjdG9yIiwid3JlbkFJQmFzZUVuZHBvaW50IiwiYXNrIiwiaW5wdXQiLCJyZXMiLCJwb3N0IiwicXVlcnkiLCJpZCIsImRlcGxveUlkIiwiaGlzdG9yeSIsInRyYW5zZnJvbUhpc3RvcnlJbnB1dCIsImNvbmZpZ3VyYXRpb25zIiwicXVlcnlJZCIsInF1ZXJ5X2lkIiwiZXJyIiwiZGVidWciLCJjYW5jZWxBc2siLCJwYXRjaCIsInN0YXR1cyIsImdldEFza1Jlc3VsdCIsImdldCIsInRyYW5zZm9ybUFza1Jlc3VsdCIsImNyZWF0ZSIsIkdlbmVyYWxFcnJvckNvZGVzIiwiSU5URVJOQUxfU0VSVkVSX0VSUk9SIiwib3JpZ2luYWxFcnJvciIsImdldEFza1N0cmVhbWluZ1Jlc3VsdCIsInJlc3BvbnNlVHlwZSIsImdlbmVyYXRlQXNrRGV0YWlsIiwiZ2V0QXNrRGV0YWlsUmVzdWx0IiwidHJhbnNmb3JtQXNrRGV0YWlsUmVzdWx0IiwiZGVwbG95IiwiZGVwbG95RGF0YSIsIm1hbmlmZXN0IiwiaGFzaCIsIm1kbCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZXBsb3lTdWNjZXNzIiwid2FpdERlcGxveUZpbmlzaGVkIiwiU1VDQ0VTUyIsIkZBSUxFRCIsImdlbmVyYXRlUmVjb21tZW5kYXRpb25RdWVzdGlvbnMiLCJib2R5IiwicHJldmlvdXNfcXVlc3Rpb25zIiwicHJldmlvdXNRdWVzdGlvbnMiLCJtYXhfcXVlc3Rpb25zIiwibWF4UXVlc3Rpb25zIiwibWF4X2NhdGVnb3JpZXMiLCJtYXhDYXRlZ29yaWVzIiwiY29uZmlndXJhdGlvbiIsImluZm8iLCJnZXRSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc1Jlc3VsdCIsInRyYW5zZm9ybVJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0IiwiY3JlYXRlVGV4dEJhc2VkQW5zd2VyIiwic3FsIiwic3FsX2RhdGEiLCJzcWxEYXRhIiwidGhyZWFkX2lkIiwidGhyZWFkSWQiLCJ1c2VyX2lkIiwidXNlcklkIiwiZ2V0VGV4dEJhc2VkQW5zd2VyUmVzdWx0IiwidHJhbnNmb3JtVGV4dEJhc2VkQW5zd2VyUmVzdWx0Iiwic3RyZWFtVGV4dEJhc2VkQW5zd2VyIiwiZ2VuZXJhdGVDaGFydCIsImdldENoYXJ0UmVzdWx0IiwidHJhbnNmb3JtQ2hhcnRSZXN1bHQiLCJjYW5jZWxDaGFydCIsImFkanVzdENoYXJ0IiwidHJhbnNmb3JtQ2hhcnRBZGp1c3RtZW50SW5wdXQiLCJnZXRDaGFydEFkanVzdG1lbnRSZXN1bHQiLCJjYW5jZWxDaGFydEFkanVzdG1lbnQiLCJhZGp1c3RtZW50T3B0aW9uIiwiY2hhcnRTY2hlbWEiLCJhZGp1c3RtZW50X29wdGlvbiIsImNoYXJ0X3R5cGUiLCJjaGFydFR5cGUiLCJ0b0xvd2VyQ2FzZSIsInhfYXhpcyIsInhBeGlzIiwieV9heGlzIiwieUF4aXMiLCJ4X29mZnNldCIsInhPZmZzZXQiLCJjb2xvciIsInRoZXRhIiwiY2hhcnRfc2NoZW1hIiwidHJhbnNmb3JtU3RhdHVzQW5kRXJyb3IiLCJyZWFzb25pbmciLCJudW1Sb3dzVXNlZEluTExNIiwibnVtX3Jvd3NfdXNlZF9pbl9sbG0iLCJ3YWl0VGltZSIsImdldERlcGxveVN0YXR1cyIsIkZJTklTSEVEIiwiSU5ERVhJTkciLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJFcnJvciIsInRvVXBwZXJDYXNlIiwidHlwZSIsImludGVudF9yZWFzb25pbmciLCJjYW5kaWRhdGVzIiwibWFwIiwiY2FuZGlkYXRlIiwidmlld0lkIiwiTnVtYmVyIiwiaW50ZW50UmVhc29uaW5nIiwic3RlcHMiLCJzdGVwIiwic3VtbWFyeSIsImN0ZU5hbWUiLCJjdGVfbmFtZSIsImRlc2NyaXB0aW9uIiwiY29kZSIsIkFJX1NFUlZJQ0VfVU5ERUZJTkVEX0VSUk9SIiwiY3VzdG9tTWVzc2FnZSIsInVuZGVmaW5lZCIsImZvcm1hdHRlZEVycm9yIiwiZXh0ZW5zaW9ucyIsInNob3J0TWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/adaptors/wrenAIAdaptor.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/adaptors/wrenEngineAdaptor.ts":
/*!*********************************************************!*\
  !*** ./src/apollo/server/adaptors/wrenEngineAdaptor.ts ***!
  \*********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WrenEngineAdaptor: () => (/* binding */ WrenEngineAdaptor),\n/* harmony export */   WrenEngineValidateStatus: () => (/* binding */ WrenEngineValidateStatus)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _server_utils_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/utils/error */ \"(api)/./src/apollo/server/utils/error.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services */ \"(api)/./src/apollo/server/services/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__, _services__WEBPACK_IMPORTED_MODULE_3__]);\n([axios__WEBPACK_IMPORTED_MODULE_0__, _services__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.getLogger)(\"WrenEngineAdaptor\");\nlogger.level = \"debug\";\nvar WrenEngineValidateStatus;\n(function(WrenEngineValidateStatus) {\n    WrenEngineValidateStatus[\"PASS\"] = \"PASS\";\n    WrenEngineValidateStatus[\"ERROR\"] = \"ERROR\";\n    WrenEngineValidateStatus[\"FAIL\"] = \"FAIL\";\n    WrenEngineValidateStatus[\"WARN\"] = \"WARN\";\n    WrenEngineValidateStatus[\"SKIP\"] = \"SKIP\";\n})(WrenEngineValidateStatus || (WrenEngineValidateStatus = {}));\nclass WrenEngineAdaptor {\n    constructor({ wrenEngineEndpoint }){\n        this.sessionPropsUrlPath = \"/v1/data-source/duckdb/settings/session-sql\";\n        this.queryDuckdbUrlPath = \"/v1/data-source/duckdb/query\";\n        this.initSqlUrlPath = \"/v1/data-source/duckdb/settings/init-sql\";\n        this.previewUrlPath = \"/v1/mdl/preview\";\n        this.dryPlanUrlPath = \"/v1/mdl/dry-plan\";\n        this.dryRunUrlPath = \"/v1/mdl/dry-run\";\n        this.validateUrlPath = \"/v1/mdl/validate\";\n        this.wrenEngineBaseEndpoint = wrenEngineEndpoint;\n    }\n    async validateColumnIsValid(manifest, modelName, columnName) {\n        const model = manifest.models.find((m)=>m.name === modelName);\n        if (!model) {\n            return {\n                valid: false,\n                message: `Model ${modelName} not found in the manifest`\n            };\n        }\n        const column = model.columns.find((c)=>c.name === columnName);\n        if (!column) {\n            return {\n                valid: false,\n                message: `Column ${columnName} not found in model ${modelName} in the manifest`\n            };\n        }\n        try {\n            const payload = {\n                manifest,\n                parameters: {\n                    modelName,\n                    columnName\n                }\n            };\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.wrenEngineBaseEndpoint}${this.validateUrlPath}/column_is_valid`, payload);\n            const result = res.data[0];\n            if (result.status === \"PASS\") {\n                return {\n                    valid: true\n                };\n            } else {\n                return {\n                    valid: false,\n                    message: JSON.stringify(result)\n                };\n            }\n        } catch (err) {\n            logger.debug(`Got error when validating column: ${err.message}`);\n            return {\n                valid: false,\n                message: err.message\n            };\n        }\n    }\n    async prepareDuckDB(options) {\n        const { initSql, sessionProps } = options;\n        await this.initDatabase(initSql);\n        await this.putSessionProps(sessionProps);\n    }\n    async listTables() {\n        const sql = \"SELECT       table_catalog, table_schema, table_name, column_name, ordinal_position, is_nullable, data_type      FROM INFORMATION_SCHEMA.COLUMNS;\";\n        const response = await this.queryDuckdb(sql);\n        return this.formatToCompactTable(response);\n    }\n    async putSessionProps(props) {\n        const setSessionStatements = Object.entries(props).map(([key, value])=>{\n            return `SET ${key} = '${value}';`;\n        }).join(\"\\n\");\n        try {\n            const url = new URL(this.sessionPropsUrlPath, this.wrenEngineBaseEndpoint);\n            const headers = {\n                \"Content-Type\": \"text/plain; charset=utf-8\"\n            };\n            await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].put(url.href, setSessionStatements, {\n                headers\n            });\n        } catch (err) {\n            logger.debug(`Got error when put session props: ${err.message}`);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.SESSION_PROPS_ERROR, {\n                customMessage: _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.errorMessages[_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.SESSION_PROPS_ERROR],\n                originalError: err\n            });\n        }\n    }\n    async queryDuckdb(sql) {\n        try {\n            const url = new URL(this.queryDuckdbUrlPath, this.wrenEngineBaseEndpoint);\n            const headers = {\n                \"Content-Type\": \"text/plain; charset=utf-8\"\n            };\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(url.href, sql, {\n                headers\n            });\n            return res.data;\n        } catch (err) {\n            logger.debug(`Got error when querying duckdb: ${err.message}`);\n            throw err;\n        }\n    }\n    async patchConfig(config) {\n        try {\n            const configPayload = Object.entries(config).map(([key, value])=>{\n                return {\n                    name: key,\n                    value\n                };\n            });\n            const url = new URL(\"/v1/config\", this.wrenEngineBaseEndpoint);\n            const headers = {\n                \"Content-Type\": \"application/json\"\n            };\n            await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].patch(url.href, configPayload, {\n                headers\n            });\n        } catch (err) {\n            logger.debug(`Got error when patching config: ${err.message}`);\n            throw err;\n        }\n    }\n    async previewData(sql, manifest, limit = _services__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_PREVIEW_LIMIT) {\n        try {\n            const url = new URL(this.previewUrlPath, this.wrenEngineBaseEndpoint);\n            const headers = {\n                \"Content-Type\": \"application/json\"\n            };\n            const res = await (0,axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n                method: \"get\",\n                url: url.href,\n                headers,\n                data: {\n                    sql,\n                    limit,\n                    manifest\n                }\n            });\n            return res.data;\n        } catch (err) {\n            logger.debug(`Got error when previewing data: ${err.message}`);\n            throw err;\n        }\n    }\n    async getNativeSQL(sql, options) {\n        try {\n            const props = {\n                modelingOnly: options?.modelingOnly ? true : false,\n                manifest: options?.manifest\n            };\n            const url = new URL(this.dryPlanUrlPath, this.wrenEngineBaseEndpoint);\n            const headers = {\n                \"Content-Type\": \"application/json\"\n            };\n            const res = await (0,axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n                method: \"get\",\n                url: url.href,\n                headers,\n                data: {\n                    sql,\n                    ...props\n                }\n            });\n            return res.data;\n        } catch (err) {\n            logger.debug(`Got error when getting native SQL: ${err.message}`);\n            _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.DRY_PLAN_ERROR, {\n                customMessage: err.message,\n                originalError: err\n            });\n        }\n    }\n    async dryRun(sql, options) {\n        try {\n            const { manifest } = options;\n            const body = {\n                sql,\n                manifest\n            };\n            logger.debug(`Dry run wren engine with body: ${JSON.stringify(sql, null, 2)}`);\n            const url = new URL(this.dryRunUrlPath, this.wrenEngineBaseEndpoint);\n            const res = await (0,axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n                method: \"get\",\n                url: url.href,\n                data: body\n            });\n            logger.debug(`Wren Engine Dry run success`);\n            return res.data;\n        } catch (err) {\n            logger.info(`Got error when dry running`);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.DRY_RUN_ERROR, {\n                customMessage: err.response.data.message,\n                originalError: err\n            });\n        }\n    }\n    async getDeployStatus() {\n        try {\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.wrenEngineBaseEndpoint}/v1/mdl/status`);\n            return res.data;\n        } catch (err) {\n            logger.debug(`WrenEngine: Got error when getting deploy status: ${err.message}`);\n            throw err;\n        }\n    }\n    async initDatabase(sql) {\n        try {\n            const url = new URL(this.initSqlUrlPath, this.wrenEngineBaseEndpoint);\n            const headers = {\n                \"Content-Type\": \"text/plain; charset=utf-8\"\n            };\n            await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].put(url.href, sql, {\n                headers\n            });\n        } catch (err) {\n            logger.debug(`Got error when init database: ${err}`);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.INIT_SQL_ERROR, {\n                customMessage: _server_utils_error__WEBPACK_IMPORTED_MODULE_2__.errorMessages[_server_utils_error__WEBPACK_IMPORTED_MODULE_2__.GeneralErrorCodes.INIT_SQL_ERROR],\n                originalError: err\n            });\n        }\n    }\n    formatToCompactTable(columns) {\n        return columns.data.reduce((acc, row)=>{\n            const [table_catalog, table_schema, table_name, column_name, _ordinal_position, is_nullable, data_type] = row;\n            let table = acc.find((t)=>t.name === table_name && t.properties.schema === table_schema);\n            if (!table) {\n                table = {\n                    name: table_name,\n                    description: \"\",\n                    columns: [],\n                    properties: {\n                        schema: table_schema,\n                        catalog: table_catalog,\n                        table: table_name\n                    },\n                    primaryKey: null\n                };\n                acc.push(table);\n            }\n            table.columns.push({\n                name: column_name,\n                type: data_type,\n                notNull: is_nullable.toLocaleLowerCase() !== \"yes\",\n                description: \"\",\n                properties: {}\n            });\n            return acc;\n        }, []);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9hZGFwdG9ycy93cmVuRW5naW5lQWRhcHRvci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBNkM7QUFFSDtBQUNJO0FBQ29CO0FBRWxFLE1BQU1JLFNBQVNILHdEQUFTQSxDQUFDO0FBQ3pCRyxPQUFPQyxLQUFLLEdBQUc7O1VBcUJIQzs7Ozs7O0dBQUFBLDZCQUFBQTtBQXNFTCxNQUFNQztJQVVYQyxZQUFZLEVBQUVDLGtCQUFrQixFQUFrQyxDQUFFO2FBUjVEQyxzQkFBc0I7YUFDdEJDLHFCQUFxQjthQUNyQkMsaUJBQWlCO2FBQ2pCQyxpQkFBaUI7YUFDakJDLGlCQUFpQjthQUNqQkMsZ0JBQWdCO2FBQ2hCQyxrQkFBa0I7UUFHeEIsSUFBSSxDQUFDQyxzQkFBc0IsR0FBR1I7SUFDaEM7SUFFQSxNQUFhUyxzQkFDWEMsUUFBa0IsRUFDbEJDLFNBQWlCLEVBQ2pCQyxVQUFrQixFQUNsQjtRQUNBLE1BQU1DLFFBQVFILFNBQVNJLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLElBQUksS0FBS047UUFDckQsSUFBSSxDQUFDRSxPQUFPO1lBQ1YsT0FBTztnQkFDTEssT0FBTztnQkFDUEMsU0FBUyxDQUFDLE1BQU0sRUFBRVIsVUFBVSwwQkFBMEIsQ0FBQztZQUN6RDtRQUNGO1FBQ0EsTUFBTVMsU0FBU1AsTUFBTVEsT0FBTyxDQUFDTixJQUFJLENBQUMsQ0FBQ08sSUFBTUEsRUFBRUwsSUFBSSxLQUFLTDtRQUNwRCxJQUFJLENBQUNRLFFBQVE7WUFDWCxPQUFPO2dCQUNMRixPQUFPO2dCQUNQQyxTQUFTLENBQUMsT0FBTyxFQUFFUCxXQUFXLG9CQUFvQixFQUFFRCxVQUFVLGdCQUFnQixDQUFDO1lBQ2pGO1FBQ0Y7UUFDQSxJQUFJO1lBQ0YsTUFBTVksVUFBVTtnQkFDZGI7Z0JBQ0FjLFlBQVk7b0JBQUViO29CQUFXQztnQkFBVztZQUN0QztZQUNBLE1BQU1hLE1BQU0sTUFBTWxDLGtE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QUNsQixDQUFDNkUsSUFBTUEsRUFBRTNFLElBQUksS0FBS3FFLGNBQWNNLEVBQUVDLFVBQVUsQ0FBQ0MsTUFBTSxLQUFLVDtZQUUxRCxJQUFJLENBQUNNLE9BQU87Z0JBQ1ZBLFFBQVE7b0JBQ04xRSxNQUFNcUU7b0JBQ05TLGFBQWE7b0JBQ2IxRSxTQUFTLEVBQUU7b0JBQ1h3RSxZQUFZO3dCQUNWQyxRQUFRVDt3QkFDUlcsU0FBU1o7d0JBQ1RPLE9BQU9MO29CQUNUO29CQUNBVyxZQUFZO2dCQUNkO2dCQUNBZixJQUFJZ0IsSUFBSSxDQUFDUDtZQUNYO1lBQ0FBLE1BQU10RSxPQUFPLENBQUM2RSxJQUFJLENBQUM7Z0JBQ2pCakYsTUFBTXNFO2dCQUNOWSxNQUFNVDtnQkFDTlUsU0FBU1gsWUFBWVksaUJBQWlCLE9BQU87Z0JBQzdDTixhQUFhO2dCQUNiRixZQUFZLENBQUM7WUFDZjtZQUNBLE9BQU9YO1FBQ1QsR0FBRyxFQUFFO0lBQ1A7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9hZGFwdG9ycy93cmVuRW5naW5lQWRhcHRvci50cz83NGMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcywgeyBBeGlvc1Jlc3BvbnNlIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgTWFuaWZlc3QgfSBmcm9tICcuLi9tZGwvdHlwZSc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2VydmVyL3V0aWxzJztcbmltcG9ydCAqIGFzIEVycm9ycyBmcm9tICdAc2VydmVyL3V0aWxzL2Vycm9yJztcbmltcG9ydCB7IENvbXBhY3RUYWJsZSwgREVGQVVMVF9QUkVWSUVXX0xJTUlUIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ1dyZW5FbmdpbmVBZGFwdG9yJyk7XG5sb2dnZXIubGV2ZWwgPSAnZGVidWcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdyZW5FbmdpbmVEZXBsb3lTdGF0dXNSZXNwb25zZSB7XG4gIHN5c3RlbVN0YXR1czogc3RyaW5nO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uTWV0YWRhdGEge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbmdpbmVRdWVyeVJlc3BvbnNlIHtcbiAgY29sdW1uczogQ29sdW1uTWV0YWRhdGFbXTtcbiAgZGF0YTogYW55W11bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXNjcmliZVN0YXRlbWVudFJlc3BvbnNlIHtcbiAgY29sdW1uczogQ29sdW1uTWV0YWRhdGFbXTtcbn1cblxuZXhwb3J0IGVudW0gV3JlbkVuZ2luZVZhbGlkYXRlU3RhdHVzIHtcbiAgUEFTUyA9ICdQQVNTJyxcbiAgRVJST1IgPSAnRVJST1InLFxuICBGQUlMID0gJ0ZBSUwnLFxuICBXQVJOID0gJ1dBUk4nLFxuICBTS0lQID0gJ1NLSVAnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdyZW5FbmdpbmVWYWxpZGF0ZVJlc3BvbnNlIHtcbiAgZHVyYXRpb246IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzdGF0dXM6IFdyZW5FbmdpbmVWYWxpZGF0ZVN0YXR1cztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXcmVuRW5naW5lVmFsaWRhdGlvblJlc3BvbnNlIHtcbiAgdmFsaWQ6IGJvb2xlYW47XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJ5UGxhbk9wdGlvbiB7XG4gIG1vZGVsaW5nT25seT86IGJvb2xlYW47XG4gIG1hbmlmZXN0PzogTWFuaWZlc3Q7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV3JlbkVuZ2luZURyeVJ1bk9wdGlvbiB7XG4gIG1hbmlmZXN0PzogTWFuaWZlc3Q7XG4gIGxpbWl0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIER1Y2tEQlByZXBhcmVPcHRpb25zIHtcbiAgaW5pdFNxbDogc3RyaW5nO1xuICBzZXNzaW9uUHJvcHM6IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbi8vIFRoZSByZXNwb25zZSBjb25zaXN0cyBvZiBhbiBhcnJheSBjb250YWluaW5nIGNvbHVtbnMuIEVhY2ggY29sdW1uIGNvbnRhaW5zIGEgbmFtZSBhbmQgYSB0eXBlLlxuZXhwb3J0IGludGVyZmFjZSBXcmVuRW5naW5lRHJ5UnVuUmVzcG9uc2Uge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJV3JlbkVuZ2luZUFkYXB0b3Ige1xuICAvLyBkdWNrZGIgZGF0YSBzb3VyY2UgcmVsYXRlZFxuICBwcmVwYXJlRHVja0RCKG9wdGlvbnM6IER1Y2tEQlByZXBhcmVPcHRpb25zKTogUHJvbWlzZTx2b2lkPjtcbiAgcXVlcnlEdWNrZGIoc3FsOiBzdHJpbmcpOiBQcm9taXNlPEVuZ2luZVF1ZXJ5UmVzcG9uc2U+O1xuICBwdXRTZXNzaW9uUHJvcHMocHJvcHM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBQcm9taXNlPHZvaWQ+O1xuXG4gIC8vIG1ldGFkYXRhIHJlbGF0ZWQsIHVzZWQgdG8gZmV0Y2ggbWV0YWRhdGEgb2YgZHVja2RiXG4gIGxpc3RUYWJsZXMoKTogUHJvbWlzZTxDb21wYWN0VGFibGVbXT47XG5cbiAgLy8gY29uZmlnIHdyZW4gZW5naW5lXG4gIHBhdGNoQ29uZmlnKGNvbmZpZzogUmVjb3JkPHN0cmluZywgYW55Pik6IFByb21pc2U8dm9pZD47XG5cbiAgLy8gcXVlcnlcbiAgcHJldmlld0RhdGEoXG4gICAgc3FsOiBzdHJpbmcsXG4gICAgbWRsOiBNYW5pZmVzdCxcbiAgICBsaW1pdD86IG51bWJlcixcbiAgKTogUHJvbWlzZTxFbmdpbmVRdWVyeVJlc3BvbnNlPjtcbiAgZ2V0TmF0aXZlU1FMKHNxbDogc3RyaW5nLCBvcHRpb25zPzogRHJ5UGxhbk9wdGlvbik6IFByb21pc2U8c3RyaW5nPjtcbiAgdmFsaWRhdGVDb2x1bW5Jc1ZhbGlkKFxuICAgIG1hbmlmZXN0OiBNYW5pZmVzdCxcbiAgICBtb2RlbE5hbWU6IHN0cmluZyxcbiAgICBjb2x1bW5OYW1lOiBzdHJpbmcsXG4gICk6IFByb21pc2U8V3JlbkVuZ2luZVZhbGlkYXRpb25SZXNwb25zZT47XG4gIGRyeVJ1bihcbiAgICBzcWw6IHN0cmluZyxcbiAgICBvcHRpb25zOiBXcmVuRW5naW5lRHJ5UnVuT3B0aW9uLFxuICApOiBQcm9taXNlPFdyZW5FbmdpbmVEcnlSdW5SZXNwb25zZVtdPjtcbn1cblxuZXhwb3J0IGNsYXNzIFdyZW5FbmdpbmVBZGFwdG9yIGltcGxlbWVudHMgSVdyZW5FbmdpbmVBZGFwdG9yIHtcbiAgcHJpdmF0ZSByZWFkb25seSB3cmVuRW5naW5lQmFzZUVuZHBvaW50OiBzdHJpbmc7XG4gIHByaXZhdGUgc2Vzc2lvblByb3BzVXJsUGF0aCA9ICcvdjEvZGF0YS1zb3VyY2UvZHVja2RiL3NldHRpbmdzL3Nlc3Npb24tc3FsJztcbiAgcHJpdmF0ZSBxdWVyeUR1Y2tkYlVybFBhdGggPSAnL3YxL2RhdGEtc291cmNlL2R1Y2tkYi9xdWVyeSc7XG4gIHByaXZhdGUgaW5pdFNxbFVybFBhdGggPSAnL3YxL2RhdGEtc291cmNlL2R1Y2tkYi9zZXR0aW5ncy9pbml0LXNxbCc7XG4gIHByaXZhdGUgcHJldmlld1VybFBhdGggPSAnL3YxL21kbC9wcmV2aWV3JztcbiAgcHJpdmF0ZSBkcnlQbGFuVXJsUGF0aCA9ICcvdjEvbWRsL2RyeS1wbGFuJztcbiAgcHJpdmF0ZSBkcnlSdW5VcmxQYXRoID0gJy92MS9tZGwvZHJ5LXJ1bic7XG4gIHByaXZhdGUgdmFsaWRhdGVVcmxQYXRoID0gJy92MS9tZGwvdmFsaWRhdGUnO1xuXG4gIGNvbnN0cnVjdG9yKHsgd3JlbkVuZ2luZUVuZHBvaW50IH06IHsgd3JlbkVuZ2luZUVuZHBvaW50OiBzdHJpbmcgfSkge1xuICAgIHRoaXMud3JlbkVuZ2luZUJhc2VFbmRwb2ludCA9IHdyZW5FbmdpbmVFbmRwb2ludDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZUNvbHVtbklzVmFsaWQoXG4gICAgbWFuaWZlc3Q6IE1hbmlmZXN0LFxuICAgIG1vZGVsTmFtZTogc3RyaW5nLFxuICAgIGNvbHVtbk5hbWU6IHN0cmluZyxcbiAgKSB7XG4gICAgY29uc3QgbW9kZWwgPSBtYW5pZmVzdC5tb2RlbHMuZmluZCgobSkgPT4gbS5uYW1lID09PSBtb2RlbE5hbWUpO1xuICAgIGlmICghbW9kZWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogYE1vZGVsICR7bW9kZWxOYW1lfSBub3QgZm91bmQgaW4gdGhlIG1hbmlmZXN0YCxcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGNvbHVtbiA9IG1vZGVsLmNvbHVtbnMuZmluZCgoYykgPT4gYy5uYW1lID09PSBjb2x1bW5OYW1lKTtcbiAgICBpZiAoIWNvbHVtbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBgQ29sdW1uICR7Y29sdW1uTmFtZX0gbm90IGZvdW5kIGluIG1vZGVsICR7bW9kZWxOYW1lfSBpbiB0aGUgbWFuaWZlc3RgLFxuICAgICAgfTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgIG1hbmlmZXN0LFxuICAgICAgICBwYXJhbWV0ZXJzOiB7IG1vZGVsTmFtZSwgY29sdW1uTmFtZSB9LFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICAgIGAke3RoaXMud3JlbkVuZ2luZUJhc2VFbmRwb2ludH0ke3RoaXMudmFsaWRhdGVVcmxQYXRofS9jb2x1bW5faXNfdmFsaWRgLFxuICAgICAgICBwYXlsb2FkLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHJlcy5kYXRhWzBdIGFzIFdyZW5FbmdpbmVWYWxpZGF0ZVJlc3BvbnNlO1xuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFdyZW5FbmdpbmVWYWxpZGF0ZVN0YXR1cy5QQVNTKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6IEpTT04uc3RyaW5naWZ5KHJlc3VsdCkgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBHb3QgZXJyb3Igd2hlbiB2YWxpZGF0aW5nIGNvbHVtbjogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcHJlcGFyZUR1Y2tEQihvcHRpb25zOiBEdWNrREJQcmVwYXJlT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgaW5pdFNxbCwgc2Vzc2lvblByb3BzIH0gPSBvcHRpb25zO1xuICAgIGF3YWl0IHRoaXMuaW5pdERhdGFiYXNlKGluaXRTcWwpO1xuICAgIGF3YWl0IHRoaXMucHV0U2Vzc2lvblByb3BzKHNlc3Npb25Qcm9wcyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgbGlzdFRhYmxlcygpIHtcbiAgICBjb25zdCBzcWwgPVxuICAgICAgJ1NFTEVDVCBcXFxuICAgICAgdGFibGVfY2F0YWxvZywgdGFibGVfc2NoZW1hLCB0YWJsZV9uYW1lLCBjb2x1bW5fbmFtZSwgb3JkaW5hbF9wb3NpdGlvbiwgaXNfbnVsbGFibGUsIGRhdGFfdHlwZVxcXG4gICAgICBGUk9NIElORk9STUFUSU9OX1NDSEVNQS5DT0xVTU5TOyc7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnF1ZXJ5RHVja2RiKHNxbCk7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0VG9Db21wYWN0VGFibGUocmVzcG9uc2UpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHB1dFNlc3Npb25Qcm9wcyhwcm9wczogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICAgIGNvbnN0IHNldFNlc3Npb25TdGF0ZW1lbnRzID0gT2JqZWN0LmVudHJpZXMocHJvcHMpXG4gICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgcmV0dXJuIGBTRVQgJHtrZXl9ID0gJyR7dmFsdWV9JztgO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCdcXG4nKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChcbiAgICAgICAgdGhpcy5zZXNzaW9uUHJvcHNVcmxQYXRoLFxuICAgICAgICB0aGlzLndyZW5FbmdpbmVCYXNlRW5kcG9pbnQsXG4gICAgICApO1xuICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgIH07XG4gICAgICBhd2FpdCBheGlvcy5wdXQodXJsLmhyZWYsIHNldFNlc3Npb25TdGF0ZW1lbnRzLCB7IGhlYWRlcnMgfSk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgR290IGVycm9yIHdoZW4gcHV0IHNlc3Npb24gcHJvcHM6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICB0aHJvdyBFcnJvcnMuY3JlYXRlKEVycm9ycy5HZW5lcmFsRXJyb3JDb2Rlcy5TRVNTSU9OX1BST1BTX0VSUk9SLCB7XG4gICAgICAgIGN1c3RvbU1lc3NhZ2U6XG4gICAgICAgICAgRXJyb3JzLmVycm9yTWVzc2FnZXNbRXJyb3JzLkdlbmVyYWxFcnJvckNvZGVzLlNFU1NJT05fUFJPUFNfRVJST1JdLFxuICAgICAgICBvcmlnaW5hbEVycm9yOiBlcnIsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcXVlcnlEdWNrZGIoc3FsOiBzdHJpbmcpOiBQcm9taXNlPEVuZ2luZVF1ZXJ5UmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLnF1ZXJ5RHVja2RiVXJsUGF0aCwgdGhpcy53cmVuRW5naW5lQmFzZUVuZHBvaW50KTtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOCcsXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdCh1cmwuaHJlZiwgc3FsLCB7IGhlYWRlcnMgfSk7XG4gICAgICByZXR1cm4gcmVzLmRhdGEgYXMgRW5naW5lUXVlcnlSZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBHb3QgZXJyb3Igd2hlbiBxdWVyeWluZyBkdWNrZGI6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHBhdGNoQ29uZmlnKGNvbmZpZzogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb25maWdQYXlsb2FkID0gT2JqZWN0LmVudHJpZXMoY29uZmlnKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IGtleSxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCgnL3YxL2NvbmZpZycsIHRoaXMud3JlbkVuZ2luZUJhc2VFbmRwb2ludCk7XG4gICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGF4aW9zLnBhdGNoKHVybC5ocmVmLCBjb25maWdQYXlsb2FkLCB7IGhlYWRlcnMgfSk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgR290IGVycm9yIHdoZW4gcGF0Y2hpbmcgY29uZmlnOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBwcmV2aWV3RGF0YShcbiAgICBzcWw6IHN0cmluZyxcbiAgICBtYW5pZmVzdDogTWFuaWZlc3QsXG4gICAgbGltaXQ6IG51bWJlciA9IERFRkFVTFRfUFJFVklFV19MSU1JVCxcbiAgKTogUHJvbWlzZTxFbmdpbmVRdWVyeVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGhpcy5wcmV2aWV3VXJsUGF0aCwgdGhpcy53cmVuRW5naW5lQmFzZUVuZHBvaW50KTtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXM6IEF4aW9zUmVzcG9uc2U8RW5naW5lUXVlcnlSZXNwb25zZT4gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgIHVybDogdXJsLmhyZWYsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzcWwsXG4gICAgICAgICAgbGltaXQsXG4gICAgICAgICAgbWFuaWZlc3QsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoYEdvdCBlcnJvciB3aGVuIHByZXZpZXdpbmcgZGF0YTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0TmF0aXZlU1FMKFxuICAgIHNxbDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IERyeVBsYW5PcHRpb24sXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICBtb2RlbGluZ09ubHk6IG9wdGlvbnM/Lm1vZGVsaW5nT25seSA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgbWFuaWZlc3Q6IG9wdGlvbnM/Lm1hbmlmZXN0LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmRyeVBsYW5VcmxQYXRoLCB0aGlzLndyZW5FbmdpbmVCYXNlRW5kcG9pbnQpO1xuICAgICAgY29uc3QgaGVhZGVycyA9IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9O1xuXG4gICAgICBjb25zdCByZXM6IEF4aW9zUmVzcG9uc2U8c3RyaW5nPiA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgICAgdXJsOiB1cmwuaHJlZixcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNxbCxcbiAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgR290IGVycm9yIHdoZW4gZ2V0dGluZyBuYXRpdmUgU1FMOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgRXJyb3JzLmNyZWF0ZShFcnJvcnMuR2VuZXJhbEVycm9yQ29kZXMuRFJZX1BMQU5fRVJST1IsIHtcbiAgICAgICAgY3VzdG9tTWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycixcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkcnlSdW4oXG4gICAgc3FsOiBzdHJpbmcsXG4gICAgb3B0aW9uczogV3JlbkVuZ2luZURyeVJ1bk9wdGlvbixcbiAgKTogUHJvbWlzZTxXcmVuRW5naW5lRHJ5UnVuUmVzcG9uc2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IG1hbmlmZXN0IH0gPSBvcHRpb25zO1xuICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgc3FsLFxuICAgICAgICBtYW5pZmVzdCxcbiAgICAgIH07XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBEcnkgcnVuIHdyZW4gZW5naW5lIHdpdGggYm9keTogJHtKU09OLnN0cmluZ2lmeShzcWwsIG51bGwsIDIpfWAsXG4gICAgICApO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmRyeVJ1blVybFBhdGgsIHRoaXMud3JlbkVuZ2luZUJhc2VFbmRwb2ludCk7XG4gICAgICBjb25zdCByZXM6IEF4aW9zUmVzcG9uc2U8V3JlbkVuZ2luZURyeVJ1blJlc3BvbnNlW10+ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICB1cmw6IHVybC5ocmVmLFxuICAgICAgICBkYXRhOiBib2R5LFxuICAgICAgfSk7XG4gICAgICBsb2dnZXIuZGVidWcoYFdyZW4gRW5naW5lIERyeSBydW4gc3VjY2Vzc2ApO1xuICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuaW5mbyhgR290IGVycm9yIHdoZW4gZHJ5IHJ1bm5pbmdgKTtcbiAgICAgIHRocm93IEVycm9ycy5jcmVhdGUoRXJyb3JzLkdlbmVyYWxFcnJvckNvZGVzLkRSWV9SVU5fRVJST1IsIHtcbiAgICAgICAgY3VzdG9tTWVzc2FnZTogZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSxcbiAgICAgICAgb3JpZ2luYWxFcnJvcjogZXJyLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXREZXBsb3lTdGF0dXMoKTogUHJvbWlzZTxXcmVuRW5naW5lRGVwbG95U3RhdHVzUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KFxuICAgICAgICBgJHt0aGlzLndyZW5FbmdpbmVCYXNlRW5kcG9pbnR9L3YxL21kbC9zdGF0dXNgLFxuICAgICAgKTtcbiAgICAgIHJldHVybiByZXMuZGF0YSBhcyBXcmVuRW5naW5lRGVwbG95U3RhdHVzUmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgYFdyZW5FbmdpbmU6IEdvdCBlcnJvciB3aGVuIGdldHRpbmcgZGVwbG95IHN0YXR1czogJHtlcnIubWVzc2FnZX1gLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGluaXREYXRhYmFzZShzcWwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmluaXRTcWxVcmxQYXRoLCB0aGlzLndyZW5FbmdpbmVCYXNlRW5kcG9pbnQpO1xuICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgIH07XG4gICAgICBhd2FpdCBheGlvcy5wdXQodXJsLmhyZWYsIHNxbCwgeyBoZWFkZXJzIH0pO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoYEdvdCBlcnJvciB3aGVuIGluaXQgZGF0YWJhc2U6ICR7ZXJyfWApO1xuICAgICAgdGhyb3cgRXJyb3JzLmNyZWF0ZShFcnJvcnMuR2VuZXJhbEVycm9yQ29kZXMuSU5JVF9TUUxfRVJST1IsIHtcbiAgICAgICAgY3VzdG9tTWVzc2FnZTpcbiAgICAgICAgICBFcnJvcnMuZXJyb3JNZXNzYWdlc1tFcnJvcnMuR2VuZXJhbEVycm9yQ29kZXMuSU5JVF9TUUxfRVJST1JdLFxuICAgICAgICBvcmlnaW5hbEVycm9yOiBlcnIsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFRvQ29tcGFjdFRhYmxlKGNvbHVtbnM6IEVuZ2luZVF1ZXJ5UmVzcG9uc2UpOiBDb21wYWN0VGFibGVbXSB7XG4gICAgcmV0dXJuIGNvbHVtbnMuZGF0YS5yZWR1Y2UoKGFjYzogQ29tcGFjdFRhYmxlW10sIHJvdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBbXG4gICAgICAgIHRhYmxlX2NhdGFsb2csXG4gICAgICAgIHRhYmxlX3NjaGVtYSxcbiAgICAgICAgdGFibGVfbmFtZSxcbiAgICAgICAgY29sdW1uX25hbWUsXG4gICAgICAgIF9vcmRpbmFsX3Bvc2l0aW9uLFxuICAgICAgICBpc19udWxsYWJsZSxcbiAgICAgICAgZGF0YV90eXBlLFxuICAgICAgXSA9IHJvdztcbiAgICAgIGxldCB0YWJsZSA9IGFjYy5maW5kKFxuICAgICAgICAodCkgPT4gdC5uYW1lID09PSB0YWJsZV9uYW1lICYmIHQucHJvcGVydGllcy5zY2hlbWEgPT09IHRhYmxlX3NjaGVtYSxcbiAgICAgICk7XG4gICAgICBpZiAoIXRhYmxlKSB7XG4gICAgICAgIHRhYmxlID0ge1xuICAgICAgICAgIG5hbWU6IHRhYmxlX25hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgIGNvbHVtbnM6IFtdLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHNjaGVtYTogdGFibGVfc2NoZW1hLFxuICAgICAgICAgICAgY2F0YWxvZzogdGFibGVfY2F0YWxvZyxcbiAgICAgICAgICAgIHRhYmxlOiB0YWJsZV9uYW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcHJpbWFyeUtleTogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgYWNjLnB1c2godGFibGUpO1xuICAgICAgfVxuICAgICAgdGFibGUuY29sdW1ucy5wdXNoKHtcbiAgICAgICAgbmFtZTogY29sdW1uX25hbWUsXG4gICAgICAgIHR5cGU6IGRhdGFfdHlwZSxcbiAgICAgICAgbm90TnVsbDogaXNfbnVsbGFibGUudG9Mb2NhbGVMb3dlckNhc2UoKSAhPT0gJ3llcycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiYXhpb3MiLCJnZXRMb2dnZXIiLCJFcnJvcnMiLCJERUZBVUxUX1BSRVZJRVdfTElNSVQiLCJsb2dnZXIiLCJsZXZlbCIsIldyZW5FbmdpbmVWYWxpZGF0ZVN0YXR1cyIsIldyZW5FbmdpbmVBZGFwdG9yIiwiY29uc3RydWN0b3IiLCJ3cmVuRW5naW5lRW5kcG9pbnQiLCJzZXNzaW9uUHJvcHNVcmxQYXRoIiwicXVlcnlEdWNrZGJVcmxQYXRoIiwiaW5pdFNxbFVybFBhdGgiLCJwcmV2aWV3VXJsUGF0aCIsImRyeVBsYW5VcmxQYXRoIiwiZHJ5UnVuVXJsUGF0aCIsInZhbGlkYXRlVXJsUGF0aCIsIndyZW5FbmdpbmVCYXNlRW5kcG9pbnQiLCJ2YWxpZGF0ZUNvbHVtbklzVmFsaWQiLCJtYW5pZmVzdCIsIm1vZGVsTmFtZSIsImNvbHVtbk5hbWUiLCJtb2RlbCIsIm1vZGVscyIsImZpbmQiLCJtIiwibmFtZSIsInZhbGlkIiwibWVzc2FnZSIsImNvbHVtbiIsImNvbHVtbnMiLCJjIiwicGF5bG9hZCIsInBhcmFtZXRlcnMiLCJyZXMiLCJwb3N0IiwicmVzdWx0IiwiZGF0YSIsInN0YXR1cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnIiLCJkZWJ1ZyIsInByZXBhcmVEdWNrREIiLCJvcHRpb25zIiwiaW5pdFNxbCIsInNlc3Npb25Qcm9wcyIsImluaXREYXRhYmFzZSIsInB1dFNlc3Npb25Qcm9wcyIsImxpc3RUYWJsZXMiLCJzcWwiLCJyZXNwb25zZSIsInF1ZXJ5RHVja2RiIiwiZm9ybWF0VG9Db21wYWN0VGFibGUiLCJwcm9wcyIsInNldFNlc3Npb25TdGF0ZW1lbnRzIiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsImtleSIsInZhbHVlIiwiam9pbiIsInVybCIsIlVSTCIsImhlYWRlcnMiLCJwdXQiLCJocmVmIiwiY3JlYXRlIiwiR2VuZXJhbEVycm9yQ29kZXMiLCJTRVNTSU9OX1BST1BTX0VSUk9SIiwiY3VzdG9tTWVzc2FnZSIsImVycm9yTWVzc2FnZXMiLCJvcmlnaW5hbEVycm9yIiwicGF0Y2hDb25maWciLCJjb25maWciLCJjb25maWdQYXlsb2FkIiwicGF0Y2giLCJwcmV2aWV3RGF0YSIsImxpbWl0IiwibWV0aG9kIiwiZ2V0TmF0aXZlU1FMIiwibW9kZWxpbmdPbmx5IiwiRFJZX1BMQU5fRVJST1IiLCJkcnlSdW4iLCJib2R5IiwiaW5mbyIsIkRSWV9SVU5fRVJST1IiLCJnZXREZXBsb3lTdGF0dXMiLCJnZXQiLCJJTklUX1NRTF9FUlJPUiIsInJlZHVjZSIsImFjYyIsInJvdyIsInRhYmxlX2NhdGFsb2ciLCJ0YWJsZV9zY2hlbWEiLCJ0YWJsZV9uYW1lIiwiY29sdW1uX25hbWUiLCJfb3JkaW5hbF9wb3NpdGlvbiIsImlzX251bGxhYmxlIiwiZGF0YV90eXBlIiwidGFibGUiLCJ0IiwicHJvcGVydGllcyIsInNjaGVtYSIsImRlc2NyaXB0aW9uIiwiY2F0YWxvZyIsInByaW1hcnlLZXkiLCJwdXNoIiwidHlwZSIsIm5vdE51bGwiLCJ0b0xvY2FsZUxvd2VyQ2FzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/adaptors/wrenEngineAdaptor.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/backgrounds/chart.ts":
/*!************************************************!*\
  !*** ./src/apollo/server/backgrounds/chart.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChartAdjustmentBackgroundTracker: () => (/* binding */ ChartAdjustmentBackgroundTracker),\n/* harmony export */   ChartBackgroundTracker: () => (/* binding */ ChartBackgroundTracker)\n/* harmony export */ });\n/* harmony import */ var _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var _server_utils_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/utils/logger */ \"(api)/./src/apollo/server/utils/logger.ts\");\n/* harmony import */ var _server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__]);\n_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst logger = (0,_server_utils_logger__WEBPACK_IMPORTED_MODULE_1__.getLogger)(\"ChartBackgroundTracker\");\nlogger.level = \"debug\";\nconst isFinalized = (status)=>{\n    return status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.ChartStatus.FINISHED || status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.ChartStatus.FAILED || status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.ChartStatus.STOPPED;\n};\nclass ChartBackgroundTracker {\n    constructor({ telemetry, wrenAIAdaptor, threadResponseRepository }){\n        this.tasks = {};\n        this.runningJobs = new Set();\n        this.telemetry = telemetry;\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.threadResponseRepository = threadResponseRepository;\n        this.intervalTime = 1000;\n        this.start();\n    }\n    start() {\n        logger.info(\"Chart background tracker started\");\n        setInterval(()=>{\n            const jobs = Object.values(this.tasks).map((threadResponse)=>async ()=>{\n                    // check if same job is running\n                    if (this.runningJobs.has(threadResponse.id)) {\n                        return;\n                    }\n                    // mark the job as running\n                    this.runningJobs.add(threadResponse.id);\n                    // get the chart detail\n                    const chartDetail = threadResponse.chartDetail;\n                    // get the latest result from AI service\n                    const result = await this.wrenAIAdaptor.getChartResult(chartDetail.queryId);\n                    // check if status change\n                    if (chartDetail.status === result.status) {\n                        // mark the job as finished\n                        logger.debug(`Job ${threadResponse.id} chart status not changed, finished`);\n                        this.runningJobs.delete(threadResponse.id);\n                        return;\n                    }\n                    // update database\n                    const updatedChartDetail = {\n                        queryId: chartDetail.queryId,\n                        status: result?.status,\n                        error: result?.error,\n                        description: result?.response?.reasoning,\n                        chartType: result?.response?.chartType?.toUpperCase() || null,\n                        chartSchema: result?.response?.chartSchema\n                    };\n                    logger.debug(`Job ${threadResponse.id} chart status changed, updating`);\n                    await this.threadResponseRepository.updateOne(threadResponse.id, {\n                        chartDetail: updatedChartDetail\n                    });\n                    // remove the task from tracker if it is finalized\n                    if (isFinalized(result.status)) {\n                        const eventProperties = {\n                            question: threadResponse.question,\n                            error: result.error\n                        };\n                        if (result.status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.ChartStatus.FINISHED) {\n                            this.telemetry.sendEvent(_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__.TelemetryEvent.HOME_ANSWER_CHART, eventProperties);\n                        } else {\n                            this.telemetry.sendEvent(_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__.TelemetryEvent.HOME_ANSWER_CHART, eventProperties, _server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__.WrenService.AI, false);\n                        }\n                        logger.debug(`Job ${threadResponse.id} chart is finalized, removing`);\n                        delete this.tasks[threadResponse.id];\n                    }\n                    // mark the job as finished\n                    this.runningJobs.delete(threadResponse.id);\n                });\n            // run the jobs\n            Promise.allSettled(jobs.map((job)=>job())).then((results)=>{\n                // show reason of rejection\n                results.forEach((result, index)=>{\n                    if (result.status === \"rejected\") {\n                        logger.error(`Job ${index} failed: ${result.reason}`);\n                    }\n                });\n            });\n        }, this.intervalTime);\n    }\n    addTask(threadResponse) {\n        this.tasks[threadResponse.id] = threadResponse;\n    }\n    getTasks() {\n        return this.tasks;\n    }\n}\nclass ChartAdjustmentBackgroundTracker {\n    constructor({ telemetry, wrenAIAdaptor, threadResponseRepository }){\n        this.tasks = {};\n        this.runningJobs = new Set();\n        this.telemetry = telemetry;\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.threadResponseRepository = threadResponseRepository;\n        this.intervalTime = 1000;\n        this.start();\n    }\n    start() {\n        logger.info(\"Chart adjustment background tracker started\");\n        setInterval(()=>{\n            const jobs = Object.values(this.tasks).map((threadResponse)=>async ()=>{\n                    // check if same job is running\n                    if (this.runningJobs.has(threadResponse.id)) {\n                        return;\n                    }\n                    // mark the job as running\n                    this.runningJobs.add(threadResponse.id);\n                    // get the chart detail\n                    const chartDetail = threadResponse.chartDetail;\n                    // get the latest result from AI service\n                    const result = await this.wrenAIAdaptor.getChartAdjustmentResult(chartDetail.queryId);\n                    // check if status change\n                    if (chartDetail.status === result.status) {\n                        // mark the job as finished\n                        logger.debug(`Job ${threadResponse.id} chart status not changed, finished`);\n                        this.runningJobs.delete(threadResponse.id);\n                        return;\n                    }\n                    // update database\n                    const updatedChartDetail = {\n                        queryId: chartDetail.queryId,\n                        status: result?.status,\n                        error: result?.error,\n                        description: result?.response?.reasoning,\n                        chartType: result?.response?.chartType?.toUpperCase() || null,\n                        chartSchema: result?.response?.chartSchema,\n                        adjustment: true\n                    };\n                    logger.debug(`Job ${threadResponse.id} chart status changed, updating`);\n                    await this.threadResponseRepository.updateOne(threadResponse.id, {\n                        chartDetail: updatedChartDetail\n                    });\n                    // remove the task from tracker if it is finalized\n                    if (isFinalized(result.status)) {\n                        const eventProperties = {\n                            question: threadResponse.question,\n                            error: result.error\n                        };\n                        if (result.status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.ChartStatus.FINISHED) {\n                            this.telemetry.sendEvent(_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__.TelemetryEvent.HOME_ANSWER_ADJUST_CHART, eventProperties);\n                        } else {\n                            this.telemetry.sendEvent(_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__.TelemetryEvent.HOME_ANSWER_ADJUST_CHART, eventProperties, _server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_2__.WrenService.AI, false);\n                        }\n                        logger.debug(`Job ${threadResponse.id} chart is finalized, removing`);\n                        delete this.tasks[threadResponse.id];\n                    }\n                    // mark the job as finished\n                    this.runningJobs.delete(threadResponse.id);\n                });\n            // run the jobs\n            Promise.allSettled(jobs.map((job)=>job())).then((results)=>{\n                // show reason of rejection\n                results.forEach((result, index)=>{\n                    if (result.status === \"rejected\") {\n                        logger.error(`Job ${index} failed: ${result.reason}`);\n                    }\n                });\n            });\n        }, this.intervalTime);\n    }\n    addTask(threadResponse) {\n        this.tasks[threadResponse.id] = threadResponse;\n    }\n    getTasks() {\n        return this.tasks;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9iYWNrZ3JvdW5kcy9jaGFydC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxRDtBQU1KO0FBS1o7QUFFckMsTUFBTUksU0FBU0gsK0RBQVNBLENBQUM7QUFDekJHLE9BQU9DLEtBQUssR0FBRztBQUVmLE1BQU1DLGNBQWMsQ0FBQ0M7SUFDbkIsT0FDRUEsV0FBV1AsK0RBQVdBLENBQUNRLFFBQVEsSUFDL0JELFdBQVdQLCtEQUFXQSxDQUFDUyxNQUFNLElBQzdCRixXQUFXUCwrREFBV0EsQ0FBQ1UsT0FBTztBQUVsQztBQUVPLE1BQU1DO0lBUVhDLFlBQVksRUFDVkMsU0FBUyxFQUNUQyxhQUFhLEVBQ2JDLHdCQUF3QixFQUt6QixDQUFFO2FBZktDLFFBQXdDLENBQUM7YUFJekNDLGNBQWMsSUFBSUM7UUFZeEIsSUFBSSxDQUFDTCxTQUFTLEdBQUdBO1FBQ2pCLElBQUksQ0FBQ0MsYUFBYSxHQUFHQTtRQUNyQixJQUFJLENBQUNDLHdCQUF3QixHQUFHQTtRQUNoQyxJQUFJLENBQUNJLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNDLEtBQUs7SUFDWjtJQUVRQSxRQUFRO1FBQ2RoQixPQUFPaUIsSUFBSSxDQUFDO1FBQ1pDLFlBQVk7WUFDVixNQUFNQyxPQUFPQyxPQUFPQyxNQUFNLENBQUMsSUFBSSxDQUFDVCxLQUFLLEVBQUVVLEdBQUcsQ0FDeEMsQ0FBQ0MsaUJBQW1CO29CQUNsQiwrQkFBK0I7b0JBQy9CLElBQUksSUFBSSxDQUFDVixXQUFXLENBQUNXLEdBQUcsQ0FBQ0QsZUFBZUUsRUFBRSxHQUFHO3dCQUMzQztvQkFDRjtvQkFFQSwwQkFBMEI7b0JBQzFCLElBQUksQ0FBQ1osV0FBVyxDQUFDYSxHQUFHLENBQUNILGVBQWVFLEVBQUU7b0JBRXRDLHVCQUF1QjtvQkFDdkIsTUFBTUUsY0FBY0osZUFBZUksV0FBVztvQkFFOUMsd0NBQXdDO29CQUN4QyxNQUFNQyxTQUFTLE1BQU0sSUFBSSxDQUFDbEIs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T2tDLEtBQUssQ0FBQyxDQUFDLElBQUksRUFBRW1CLE1BQU0sU0FBUyxFQUFFekIsT0FBTzBCLE1BQU0sQ0FBQyxDQUFDO29CQUN0RDtnQkFDRjtZQUNGO1FBQ0YsR0FBRyxJQUFJLENBQUN2QyxZQUFZO0lBQ3RCO0lBRU93QyxRQUFRaEMsY0FBOEIsRUFBRTtRQUM3QyxJQUFJLENBQUNYLEtBQUssQ0FBQ1csZUFBZUUsRUFBRSxDQUFDLEdBQUdGO0lBQ2xDO0lBRU9pQyxXQUFXO1FBQ2hCLE9BQU8sSUFBSSxDQUFDNUMsS0FBSztJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL2JhY2tncm91bmRzL2NoYXJ0LnRzP2E3MWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhcnRTdGF0dXMgfSBmcm9tICdAc2VydmVyL21vZGVscy9hZGFwdG9yJztcbmltcG9ydCB7IElXcmVuQUlBZGFwdG9yIH0gZnJvbSAnQHNlcnZlci9hZGFwdG9ycy93cmVuQUlBZGFwdG9yJztcbmltcG9ydCB7XG4gIElUaHJlYWRSZXNwb25zZVJlcG9zaXRvcnksXG4gIFRocmVhZFJlc3BvbnNlLFxufSBmcm9tICdAc2VydmVyL3JlcG9zaXRvcmllcyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2VydmVyL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQge1xuICBQb3N0SG9nVGVsZW1ldHJ5LFxuICBUZWxlbWV0cnlFdmVudCxcbiAgV3JlblNlcnZpY2UsXG59IGZyb20gJ0BzZXJ2ZXIvdGVsZW1ldHJ5L3RlbGVtZXRyeSc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignQ2hhcnRCYWNrZ3JvdW5kVHJhY2tlcicpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuY29uc3QgaXNGaW5hbGl6ZWQgPSAoc3RhdHVzOiBDaGFydFN0YXR1cykgPT4ge1xuICByZXR1cm4gKFxuICAgIHN0YXR1cyA9PT0gQ2hhcnRTdGF0dXMuRklOSVNIRUQgfHxcbiAgICBzdGF0dXMgPT09IENoYXJ0U3RhdHVzLkZBSUxFRCB8fFxuICAgIHN0YXR1cyA9PT0gQ2hhcnRTdGF0dXMuU1RPUFBFRFxuICApO1xufTtcblxuZXhwb3J0IGNsYXNzIENoYXJ0QmFja2dyb3VuZFRyYWNrZXIge1xuICBwcml2YXRlIHRhc2tzOiBSZWNvcmQ8bnVtYmVyLCBUaHJlYWRSZXNwb25zZT4gPSB7fTtcbiAgcHJpdmF0ZSBpbnRlcnZhbFRpbWU6IG51bWJlcjtcbiAgcHJpdmF0ZSB3cmVuQUlBZGFwdG9yOiBJV3JlbkFJQWRhcHRvcjtcbiAgcHJpdmF0ZSB0aHJlYWRSZXNwb25zZVJlcG9zaXRvcnk6IElUaHJlYWRSZXNwb25zZVJlcG9zaXRvcnk7XG4gIHByaXZhdGUgcnVubmluZ0pvYnMgPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgdGVsZW1ldHJ5OiBQb3N0SG9nVGVsZW1ldHJ5O1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICB0ZWxlbWV0cnksXG4gICAgd3JlbkFJQWRhcHRvcixcbiAgICB0aHJlYWRSZXNwb25zZVJlcG9zaXRvcnksXG4gIH06IHtcbiAgICB0ZWxlbWV0cnk6IFBvc3RIb2dUZWxlbWV0cnk7XG4gICAgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gICAgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5OiBJVGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5O1xuICB9KSB7XG4gICAgdGhpcy50ZWxlbWV0cnkgPSB0ZWxlbWV0cnk7XG4gICAgdGhpcy53cmVuQUlBZGFwdG9yID0gd3JlbkFJQWRhcHRvcjtcbiAgICB0aGlzLnRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSA9IHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeTtcbiAgICB0aGlzLmludGVydmFsVGltZSA9IDEwMDA7XG4gICAgdGhpcy5zdGFydCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydCgpIHtcbiAgICBsb2dnZXIuaW5mbygnQ2hhcnQgYmFja2dyb3VuZCB0cmFja2VyIHN0YXJ0ZWQnKTtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBjb25zdCBqb2JzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5tYXAoXG4gICAgICAgICh0aHJlYWRSZXNwb25zZSkgPT4gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIC8vIGNoZWNrIGlmIHNhbWUgam9iIGlzIHJ1bm5pbmdcbiAgICAgICAgICBpZiAodGhpcy5ydW5uaW5nSm9icy5oYXModGhyZWFkUmVzcG9uc2UuaWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWFyayB0aGUgam9iIGFzIHJ1bm5pbmdcbiAgICAgICAgICB0aGlzLnJ1bm5pbmdKb2JzLmFkZCh0aHJlYWRSZXNwb25zZS5pZCk7XG5cbiAgICAgICAgICAvLyBnZXQgdGhlIGNoYXJ0IGRldGFpbFxuICAgICAgICAgIGNvbnN0IGNoYXJ0RGV0YWlsID0gdGhyZWFkUmVzcG9uc2UuY2hhcnREZXRhaWw7XG5cbiAgICAgICAgICAvLyBnZXQgdGhlIGxhdGVzdCByZXN1bHQgZnJvbSBBSSBzZXJ2aWNlXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy53cmVuQUlBZGFwdG9yLmdldENoYXJ0UmVzdWx0KFxuICAgICAgICAgICAgY2hhcnREZXRhaWwucXVlcnlJZCxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gY2hlY2sgaWYgc3RhdHVzIGNoYW5nZVxuICAgICAgICAgIGlmIChjaGFydERldGFpbC5zdGF0dXMgPT09IHJlc3VsdC5zdGF0dXMpIHtcbiAgICAgICAgICAgIC8vIG1hcmsgdGhlIGpvYiBhcyBmaW5pc2hlZFxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICBgSm9iICR7dGhyZWFkUmVzcG9uc2UuaWR9IGNoYXJ0IHN0YXR1cyBub3QgY2hhbmdlZCwgZmluaXNoZWRgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMucnVubmluZ0pvYnMuZGVsZXRlKHRocmVhZFJlc3BvbnNlLmlkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB1cGRhdGUgZGF0YWJhc2VcbiAgICAgICAgICBjb25zdCB1cGRhdGVkQ2hhcnREZXRhaWwgPSB7XG4gICAgICAgICAgICBxdWVyeUlkOiBjaGFydERldGFpbC5xdWVyeUlkLFxuICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQ/LnN0YXR1cyxcbiAgICAgICAgICAgIGVycm9yOiByZXN1bHQ/LmVycm9yLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlc3VsdD8ucmVzcG9uc2U/LnJlYXNvbmluZyxcbiAgICAgICAgICAgIGNoYXJ0VHlwZTogcmVzdWx0Py5yZXNwb25zZT8uY2hhcnRUeXBlPy50b1VwcGVyQ2FzZSgpIHx8IG51bGwsXG4gICAgICAgICAgICBjaGFydFNjaGVtYTogcmVzdWx0Py5yZXNwb25zZT8uY2hhcnRTY2hlbWEsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBgSm9iICR7dGhyZWFkUmVzcG9uc2UuaWR9IGNoYXJ0IHN0YXR1cyBjaGFuZ2VkLCB1cGRhdGluZ2AsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeS51cGRhdGVPbmUodGhyZWFkUmVzcG9uc2UuaWQsIHtcbiAgICAgICAgICAgIGNoYXJ0RGV0YWlsOiB1cGRhdGVkQ2hhcnREZXRhaWwsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyByZW1vdmUgdGhlIHRhc2sgZnJvbSB0cmFja2VyIGlmIGl0IGlzIGZpbmFsaXplZFxuICAgICAgICAgIGlmIChpc0ZpbmFsaXplZChyZXN1bHQuc3RhdHVzKSkge1xuICAgICAgICAgICAgY29uc3QgZXZlbnRQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICBxdWVzdGlvbjogdGhyZWFkUmVzcG9uc2UucXVlc3Rpb24sXG4gICAgICAgICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IENoYXJ0U3RhdHVzLkZJTklTSEVEKSB7XG4gICAgICAgICAgICAgIHRoaXMudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgICAgICAgICBUZWxlbWV0cnlFdmVudC5IT01FX0FOU1dFUl9DSEFSVCxcbiAgICAgICAgICAgICAgICBldmVudFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgICAgICAgICAgVGVsZW1ldHJ5RXZlbnQuSE9NRV9BTlNXRVJfQ0hBUlQsXG4gICAgICAgICAgICAgICAgZXZlbnRQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIFdyZW5TZXJ2aWNlLkFJLFxuICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICBgSm9iICR7dGhyZWFkUmVzcG9uc2UuaWR9IGNoYXJ0IGlzIGZpbmFsaXplZCwgcmVtb3ZpbmdgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRhc2tzW3RocmVhZFJlc3BvbnNlLmlkXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBtYXJrIHRoZSBqb2IgYXMgZmluaXNoZWRcbiAgICAgICAgICB0aGlzLnJ1bm5pbmdKb2JzLmRlbGV0ZSh0aHJlYWRSZXNwb25zZS5pZCk7XG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICAvLyBydW4gdGhlIGpvYnNcbiAgICAgIFByb21pc2UuYWxsU2V0dGxlZChqb2JzLm1hcCgoam9iKSA9PiBqb2IoKSkpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgLy8gc2hvdyByZWFzb24gb2YgcmVqZWN0aW9uXG4gICAgICAgIHJlc3VsdHMuZm9yRWFjaCgocmVzdWx0LCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAncmVqZWN0ZWQnKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEpvYiAke2luZGV4fSBmYWlsZWQ6ICR7cmVzdWx0LnJlYXNvbn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSwgdGhpcy5pbnRlcnZhbFRpbWUpO1xuICB9XG5cbiAgcHVibGljIGFkZFRhc2sodGhyZWFkUmVzcG9uc2U6IFRocmVhZFJlc3BvbnNlKSB7XG4gICAgdGhpcy50YXNrc1t0aHJlYWRSZXNwb25zZS5pZF0gPSB0aHJlYWRSZXNwb25zZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUYXNrcygpIHtcbiAgICByZXR1cm4gdGhpcy50YXNrcztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2hhcnRBZGp1c3RtZW50QmFja2dyb3VuZFRyYWNrZXIge1xuICBwcml2YXRlIHRhc2tzOiBSZWNvcmQ8bnVtYmVyLCBUaHJlYWRSZXNwb25zZT4gPSB7fTtcbiAgcHJpdmF0ZSBpbnRlcnZhbFRpbWU6IG51bWJlcjtcbiAgcHJpdmF0ZSB3cmVuQUlBZGFwdG9yOiBJV3JlbkFJQWRhcHRvcjtcbiAgcHJpdmF0ZSB0aHJlYWRSZXNwb25zZVJlcG9zaXRvcnk6IElUaHJlYWRSZXNwb25zZVJlcG9zaXRvcnk7XG4gIHByaXZhdGUgcnVubmluZ0pvYnMgPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgdGVsZW1ldHJ5OiBQb3N0SG9nVGVsZW1ldHJ5O1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICB0ZWxlbWV0cnksXG4gICAgd3JlbkFJQWRhcHRvcixcbiAgICB0aHJlYWRSZXNwb25zZVJlcG9zaXRvcnksXG4gIH06IHtcbiAgICB0ZWxlbWV0cnk6IFBvc3RIb2dUZWxlbWV0cnk7XG4gICAgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gICAgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5OiBJVGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5O1xuICB9KSB7XG4gICAgdGhpcy50ZWxlbWV0cnkgPSB0ZWxlbWV0cnk7XG4gICAgdGhpcy53cmVuQUlBZGFwdG9yID0gd3JlbkFJQWRhcHRvcjtcbiAgICB0aGlzLnRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSA9IHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeTtcbiAgICB0aGlzLmludGVydmFsVGltZSA9IDEwMDA7XG4gICAgdGhpcy5zdGFydCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydCgpIHtcbiAgICBsb2dnZXIuaW5mbygnQ2hhcnQgYWRqdXN0bWVudCBiYWNrZ3JvdW5kIHRyYWNrZXIgc3RhcnRlZCcpO1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGNvbnN0IGpvYnMgPSBPYmplY3QudmFsdWVzKHRoaXMudGFza3MpLm1hcChcbiAgICAgICAgKHRocmVhZFJlc3BvbnNlKSA9PiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gY2hlY2sgaWYgc2FtZSBqb2IgaXMgcnVubmluZ1xuICAgICAgICAgIGlmICh0aGlzLnJ1bm5pbmdKb2JzLmhhcyh0aHJlYWRSZXNwb25zZS5pZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBtYXJrIHRoZSBqb2IgYXMgcnVubmluZ1xuICAgICAgICAgIHRoaXMucnVubmluZ0pvYnMuYWRkKHRocmVhZFJlc3BvbnNlLmlkKTtcblxuICAgICAgICAgIC8vIGdldCB0aGUgY2hhcnQgZGV0YWlsXG4gICAgICAgICAgY29uc3QgY2hhcnREZXRhaWwgPSB0aHJlYWRSZXNwb25zZS5jaGFydERldGFpbDtcblxuICAgICAgICAgIC8vIGdldCB0aGUgbGF0ZXN0IHJlc3VsdCBmcm9tIEFJIHNlcnZpY2VcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLndyZW5BSUFkYXB0b3IuZ2V0Q2hhcnRBZGp1c3RtZW50UmVzdWx0KFxuICAgICAgICAgICAgY2hhcnREZXRhaWwucXVlcnlJZCxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gY2hlY2sgaWYgc3RhdHVzIGNoYW5nZVxuICAgICAgICAgIGlmIChjaGFydERldGFpbC5zdGF0dXMgPT09IHJlc3VsdC5zdGF0dXMpIHtcbiAgICAgICAgICAgIC8vIG1hcmsgdGhlIGpvYiBhcyBmaW5pc2hlZFxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICBgSm9iICR7dGhyZWFkUmVzcG9uc2UuaWR9IGNoYXJ0IHN0YXR1cyBub3QgY2hhbmdlZCwgZmluaXNoZWRgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMucnVubmluZ0pvYnMuZGVsZXRlKHRocmVhZFJlc3BvbnNlLmlkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB1cGRhdGUgZGF0YWJhc2VcbiAgICAgICAgICBjb25zdCB1cGRhdGVkQ2hhcnREZXRhaWwgPSB7XG4gICAgICAgICAgICBxdWVyeUlkOiBjaGFydERldGFpbC5xdWVyeUlkLFxuICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQ/LnN0YXR1cyxcbiAgICAgICAgICAgIGVycm9yOiByZXN1bHQ/LmVycm9yLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlc3VsdD8ucmVzcG9uc2U/LnJlYXNvbmluZyxcbiAgICAgICAgICAgIGNoYXJ0VHlwZTogcmVzdWx0Py5yZXNwb25zZT8uY2hhcnRUeXBlPy50b1VwcGVyQ2FzZSgpIHx8IG51bGwsXG4gICAgICAgICAgICBjaGFydFNjaGVtYTogcmVzdWx0Py5yZXNwb25zZT8uY2hhcnRTY2hlbWEsXG4gICAgICAgICAgICBhZGp1c3RtZW50OiB0cnVlLFxuICAgICAgICAgIH07XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgYEpvYiAke3RocmVhZFJlc3BvbnNlLmlkfSBjaGFydCBzdGF0dXMgY2hhbmdlZCwgdXBkYXRpbmdgLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYXdhaXQgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkudXBkYXRlT25lKHRocmVhZFJlc3BvbnNlLmlkLCB7XG4gICAgICAgICAgICBjaGFydERldGFpbDogdXBkYXRlZENoYXJ0RGV0YWlsLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gcmVtb3ZlIHRoZSB0YXNrIGZyb20gdHJhY2tlciBpZiBpdCBpcyBmaW5hbGl6ZWRcbiAgICAgICAgICBpZiAoaXNGaW5hbGl6ZWQocmVzdWx0LnN0YXR1cykpIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50UHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgcXVlc3Rpb246IHRocmVhZFJlc3BvbnNlLnF1ZXN0aW9uLFxuICAgICAgICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBDaGFydFN0YXR1cy5GSU5JU0hFRCkge1xuICAgICAgICAgICAgICB0aGlzLnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgICAgICAgICAgVGVsZW1ldHJ5RXZlbnQuSE9NRV9BTlNXRVJfQURKVVNUX0NIQVJULFxuICAgICAgICAgICAgICAgIGV2ZW50UHJvcGVydGllcyxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgICAgICAgICBUZWxlbWV0cnlFdmVudC5IT01FX0FOU1dFUl9BREpVU1RfQ0hBUlQsXG4gICAgICAgICAgICAgICAgZXZlbnRQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIFdyZW5TZXJ2aWNlLkFJLFxuICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICBgSm9iICR7dGhyZWFkUmVzcG9uc2UuaWR9IGNoYXJ0IGlzIGZpbmFsaXplZCwgcmVtb3ZpbmdgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRhc2tzW3RocmVhZFJlc3BvbnNlLmlkXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBtYXJrIHRoZSBqb2IgYXMgZmluaXNoZWRcbiAgICAgICAgICB0aGlzLnJ1bm5pbmdKb2JzLmRlbGV0ZSh0aHJlYWRSZXNwb25zZS5pZCk7XG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICAvLyBydW4gdGhlIGpvYnNcbiAgICAgIFByb21pc2UuYWxsU2V0dGxlZChqb2JzLm1hcCgoam9iKSA9PiBqb2IoKSkpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgLy8gc2hvdyByZWFzb24gb2YgcmVqZWN0aW9uXG4gICAgICAgIHJlc3VsdHMuZm9yRWFjaCgocmVzdWx0LCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAncmVqZWN0ZWQnKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEpvYiAke2luZGV4fSBmYWlsZWQ6ICR7cmVzdWx0LnJlYXNvbn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSwgdGhpcy5pbnRlcnZhbFRpbWUpO1xuICB9XG5cbiAgcHVibGljIGFkZFRhc2sodGhyZWFkUmVzcG9uc2U6IFRocmVhZFJlc3BvbnNlKSB7XG4gICAgdGhpcy50YXNrc1t0aHJlYWRSZXNwb25zZS5pZF0gPSB0aHJlYWRSZXNwb25zZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUYXNrcygpIHtcbiAgICByZXR1cm4gdGhpcy50YXNrcztcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNoYXJ0U3RhdHVzIiwiZ2V0TG9nZ2VyIiwiVGVsZW1ldHJ5RXZlbnQiLCJXcmVuU2VydmljZSIsImxvZ2dlciIsImxldmVsIiwiaXNGaW5hbGl6ZWQiLCJzdGF0dXMiLCJGSU5JU0hFRCIsIkZBSUxFRCIsIlNUT1BQRUQiLCJDaGFydEJhY2tncm91bmRUcmFja2VyIiwiY29uc3RydWN0b3IiLCJ0ZWxlbWV0cnkiLCJ3cmVuQUlBZGFwdG9yIiwidGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5IiwidGFza3MiLCJydW5uaW5nSm9icyIsIlNldCIsImludGVydmFsVGltZSIsInN0YXJ0IiwiaW5mbyIsInNldEludGVydmFsIiwiam9icyIsIk9iamVjdCIsInZhbHVlcyIsIm1hcCIsInRocmVhZFJlc3BvbnNlIiwiaGFzIiwiaWQiLCJhZGQiLCJjaGFydERldGFpbCIsInJlc3VsdCIsImdldENoYXJ0UmVzdWx0IiwicXVlcnlJZCIsImRlYnVnIiwiZGVsZXRlIiwidXBkYXRlZENoYXJ0RGV0YWlsIiwiZXJyb3IiLCJkZXNjcmlwdGlvbiIsInJlc3BvbnNlIiwicmVhc29uaW5nIiwiY2hhcnRUeXBlIiwidG9VcHBlckNhc2UiLCJjaGFydFNjaGVtYSIsInVwZGF0ZU9uZSIsImV2ZW50UHJvcGVydGllcyIsInF1ZXN0aW9uIiwic2VuZEV2ZW50IiwiSE9NRV9BTlNXRVJfQ0hBUlQiLCJBSSIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiam9iIiwidGhlbiIsInJlc3VsdHMiLCJmb3JFYWNoIiwiaW5kZXgiLCJyZWFzb24iLCJhZGRUYXNrIiwiZ2V0VGFza3MiLCJDaGFydEFkanVzdG1lbnRCYWNrZ3JvdW5kVHJhY2tlciIsImdldENoYXJ0QWRqdXN0bWVudFJlc3VsdCIsImFkanVzdG1lbnQiLCJIT01FX0FOU1dFUl9BREpVU1RfQ0hBUlQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/backgrounds/chart.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/backgrounds/index.ts":
/*!************************************************!*\
  !*** ./src/apollo/server/backgrounds/index.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _recommend_question__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./recommend-question */ \"(api)/./src/apollo/server/backgrounds/recommend-question.ts\");\n/* harmony import */ var _chart__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chart */ \"(api)/./src/apollo/server/backgrounds/chart.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_recommend_question__WEBPACK_IMPORTED_MODULE_0__, _chart__WEBPACK_IMPORTED_MODULE_1__]);\n([_recommend_question__WEBPACK_IMPORTED_MODULE_0__, _chart__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _recommend_question__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _recommend_question__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _chart__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _chart__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9iYWNrZ3JvdW5kcy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBcUM7QUFDYiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9iYWNrZ3JvdW5kcy9pbmRleC50cz85ZTYzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vcmVjb21tZW5kLXF1ZXN0aW9uJztcbmV4cG9ydCAqIGZyb20gJy4vY2hhcnQnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/backgrounds/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/backgrounds/recommend-question.ts":
/*!*************************************************************!*\
  !*** ./src/apollo/server/backgrounds/recommend-question.ts ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProjectRecommendQuestionBackgroundTracker: () => (/* binding */ ProjectRecommendQuestionBackgroundTracker),\n/* harmony export */   ThreadRecommendQuestionBackgroundTracker: () => (/* binding */ ThreadRecommendQuestionBackgroundTracker)\n/* harmony export */ });\n/* harmony import */ var _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/logger */ \"(api)/./src/apollo/server/utils/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__]);\n_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// PRQ background tracker : project recommend question background tracker\nconst loggerPrefix = \"PRQBT:\";\nconst isFinalized = (status)=>{\n    return [\n        _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.RecommendationQuestionStatus.FINISHED,\n        _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.RecommendationQuestionStatus.FAILED\n    ].includes(status);\n};\nclass ProjectRecommendQuestionBackgroundTracker {\n    constructor({ telemetry, wrenAIAdaptor, projectRepository }){\n        // tasks is a kv pair of task id and thread response\n        this.tasks = {};\n        this.runningJobs = new Set();\n        this.logger = (0,_utils_logger__WEBPACK_IMPORTED_MODULE_2__.getLogger)(\"PRQ Background Tracker\");\n        this.logger.level = \"debug\";\n        this.telemetry = telemetry;\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.projectRepository = projectRepository;\n        this.intervalTime = 1000;\n        this.start();\n    }\n    start() {\n        this.logger.info(\"Recommend question background tracker started\");\n        setInterval(()=>{\n            const jobs = Object.values(this.tasks).map((project)=>async ()=>{\n                    // check if same job is running\n                    if (this.runningJobs.has(this.taskKey(project))) {\n                        return;\n                    }\n                    // mark the job as running\n                    this.runningJobs.add(this.taskKey(project));\n                    // get the latest result from AI service\n                    const result = await this.wrenAIAdaptor.getRecommendationQuestionsResult(project.queryId);\n                    // check if status change\n                    if (project.questionsStatus === result.status && result.response?.questions.length === (project.questions || []).length) {\n                        // mark the job as finished\n                        this.logger.debug(`${loggerPrefix}job ${this.taskKey(project)} status not changed, returning question count: ${result.response?.questions.length || 0}`);\n                        this.runningJobs.delete(this.taskKey(project));\n                        return;\n                    }\n                    // update database\n                    if (result.status !== project.questionsStatus || result.response?.questions.length !== (project.questions || []).length) {\n                        this.logger.debug(`${loggerPrefix}job ${this.taskKey(project)} have changes, returning question count: ${result.response?.questions.length || 0}, updating`);\n                        await this.projectRepository.updateOne(project.id, {\n                            questionsStatus: result.status.toUpperCase(),\n                            questions: result.response?.questions,\n                            questionsError: result.error\n                        });\n                        project.questionsStatus = result.status;\n                        project.questions = result.response?.questions;\n                    }\n                    // remove the task from tracker if it is finalized\n                    if (isFinalized(result.status)) {\n                        const eventProperties = {\n                            projectId: project.id,\n                            projectType: project.type,\n                            status: result.status,\n                            questions: project.questions,\n                            error: result.error\n                        };\n                        if (result.status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.RecommendationQuestionStatus.FINISHED) {\n                            this.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__.TelemetryEvent.HOME_GENERATE_PROJECT_RECOMMENDATION_QUESTIONS, eventProperties);\n                        } else {\n                            this.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__.TelemetryEvent.HOME_GENERATE_PROJECT_RECOMMENDATION_QUESTIONS, eventProperties, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__.WrenService.AI, false);\n                        }\n                        this.logger.debug(`${loggerPrefix}job ${this.taskKey(project)} is finalized, removing`);\n                        delete this.tasks[this.taskKey(project)];\n                    }\n                    // mark the job as finished\n                    this.runningJobs.delete(this.taskKey(project));\n                });\n            // run the jobs\n            Promise.allSettled(jobs.map((job)=>job())).then((results)=>{\n                // show reason of rejection\n                results.forEach((result, index)=>{\n                    if (result.status === \"rejected\") {\n                        this.logger.error(`Job ${index} failed: ${result.reason}`);\n                    }\n                });\n            });\n        }, this.intervalTime);\n    }\n    addTask(project) {\n        this.tasks[this.taskKey(project)] = project;\n    }\n    getTasks() {\n        return this.tasks;\n    }\n    async initialize() {\n        const projects = await this.projectRepository.findAll();\n        for (const project of projects){\n            if (this.taskKey(project) && !isFinalized(project.questionsStatus)) {\n                this.addTask(project);\n            }\n        }\n    }\n    taskKey(project) {\n        return project.id;\n    }\n    isExist(project) {\n        return this.tasks[this.taskKey(project)];\n    }\n}\nclass ThreadRecommendQuestionBackgroundTracker {\n    constructor({ telemetry, wrenAIAdaptor, threadRepository }){\n        // tasks is a kv pair of task id and thread response\n        this.tasks = {};\n        this.runningJobs = new Set();\n        this.logger = (0,_utils_logger__WEBPACK_IMPORTED_MODULE_2__.getLogger)(\"TRQ Background Tracker\");\n        this.logger.level = \"debug\";\n        this.telemetry = telemetry;\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.threadRepository = threadRepository;\n        this.intervalTime = 1000;\n        this.start();\n    }\n    start() {\n        this.logger.info(\"Recommend question background tracker started\");\n        setInterval(()=>{\n            const jobs = Object.values(this.tasks).map((thread)=>async ()=>{\n                    // check if same job is running\n                    if (this.runningJobs.has(this.taskKey(thread))) {\n                        return;\n                    }\n                    // mark the job as running\n                    this.runningJobs.add(this.taskKey(thread));\n                    // get the latest result from AI service\n                    const result = await this.wrenAIAdaptor.getRecommendationQuestionsResult(thread.queryId);\n                    // check if status change\n                    if (thread.questionsStatus === result.status && result.response?.questions.length === (thread.questions || []).length) {\n                        // mark the job as finished\n                        this.logger.debug(`${loggerPrefix}job ${this.taskKey(thread)} status not changed, returning question count: ${result.response?.questions.length || 0}`);\n                        this.runningJobs.delete(this.taskKey(thread));\n                        return;\n                    }\n                    // update database\n                    if (result.status !== thread.questionsStatus || result.response?.questions.length !== (thread.questions || []).length) {\n                        this.logger.debug(`${loggerPrefix}job ${this.taskKey(thread)} have changes, returning question count: ${result.response?.questions.length || 0}, updating`);\n                        await this.threadRepository.updateOne(thread.id, {\n                            questionsStatus: result.status.toUpperCase(),\n                            questions: result.response?.questions,\n                            questionsError: result.error\n                        });\n                        thread.questionsStatus = result.status;\n                        thread.questions = result.response?.questions;\n                    }\n                    // remove the task from tracker if it is finalized\n                    if (isFinalized(result.status)) {\n                        const eventProperties = {\n                            thread_id: thread.id,\n                            status: result.status,\n                            questions: thread.questions,\n                            error: result.error\n                        };\n                        if (result.status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.RecommendationQuestionStatus.FINISHED) {\n                            this.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__.TelemetryEvent.HOME_GENERATE_THREAD_RECOMMENDATION_QUESTIONS, eventProperties);\n                        } else {\n                            this.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__.TelemetryEvent.HOME_GENERATE_THREAD_RECOMMENDATION_QUESTIONS, eventProperties, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_1__.WrenService.AI, false);\n                        }\n                        this.logger.debug(`${loggerPrefix}job ${this.taskKey(thread)} is finalized, removing`);\n                        delete this.tasks[this.taskKey(thread)];\n                    }\n                    // mark the job as finished\n                    this.runningJobs.delete(this.taskKey(thread));\n                });\n            // run the jobs\n            Promise.allSettled(jobs.map((job)=>job())).then((results)=>{\n                // show reason of rejection\n                results.forEach((result, index)=>{\n                    if (result.status === \"rejected\") {\n                        this.logger.error(`Job ${index} failed: ${result.reason}`);\n                    }\n                });\n            });\n        }, this.intervalTime);\n    }\n    addTask(thread) {\n        this.tasks[this.taskKey(thread)] = thread;\n    }\n    getTasks() {\n        return this.tasks;\n    }\n    async initialize() {\n        const threads = await this.threadRepository.findAll();\n        for (const thread of threads){\n            if (!this.tasks[this.taskKey(thread)] && thread.queryId && !isFinalized(thread.questionsStatus)) {\n                this.addTask(thread);\n            }\n        }\n    }\n    taskKey(thread) {\n        return thread.id;\n    }\n    isExist(thread) {\n        return this.tasks[this.taskKey(thread)];\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9iYWNrZ3JvdW5kcy9yZWNvbW1lbmQtcXVlc3Rpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFDc0U7QUFPdEM7QUFDWTtBQUc1Qyx5RUFBeUU7QUFDekUsTUFBTUksZUFBZTtBQUVyQixNQUFNQyxjQUFjLENBQUNDO0lBQ25CLE9BQU87UUFDTE4sZ0ZBQTRCQSxDQUFDTyxRQUFRO1FBQ3JDUCxnRkFBNEJBLENBQUNRLE1BQU07S0FDcEMsQ0FBQ0MsUUFBUSxDQUFDSDtBQUNiO0FBRU8sTUFBTUk7SUFVWEMsWUFBWSxFQUNWQyxTQUFTLEVBQ1RDLGFBQWEsRUFDYkMsaUJBQWlCLEVBS2xCLENBQUU7UUFqQkgsb0RBQW9EO2FBQzVDQyxRQUFpQyxDQUFDO2FBSWxDQyxjQUFjLElBQUlDO1FBYXhCLElBQUksQ0FBQ0MsTUFBTSxHQUFHZix3REFBU0EsQ0FBQztRQUN4QixJQUFJLENBQUNlLE1BQU0sQ0FBQ0MsS0FBSyxHQUFHO1FBQ3BCLElBQUksQ0FBQ1AsU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNDLGFBQWEsR0FBR0E7UUFDckIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBR0E7UUFDekIsSUFBSSxDQUFDTSxZQUFZLEdBQUc7UUFDcEIsSUFBSSxDQUFDQyxLQUFLO0lBQ1o7SUFFT0EsUUFBUTtRQUNiLElBQUksQ0FBQ0gsTUFBTSxDQUFDSSxJQUFJLENBQUM7UUFDakJDLFlBQVk7WUFDVixNQUFNQyxPQUFPQyxPQUFPQyxNQUFNLENBQUMsSUFBSSxDQUFDWCxLQUFLLEVBQUVZLEdBQUcsQ0FBQyxDQUFDQyxVQUFZO29CQUN0RCwrQkFBK0I7b0JBQy9CLElBQUksSUFBSSxDQUFDWixXQUFXLENBQUNhLEdBQUcsQ0FBQyxJQUFJLENBQUNDLE9BQU8sQ0FBQ0YsV0FBVzt3QkFDL0M7b0JBQ0Y7b0JBRUEsMEJBQTBCO29CQUMxQixJQUFJLENBQUNaLFdBQVcsQ0FBQ2UsR0FBRyxDQUFDLElBQUksQ0FBQ0QsT0FB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TUFBTSxJQUFJLENBQUNKLGdCQUFnQixDQUFDSCxPQUFPO1FBQ25ELEtBQUssTUFBTUksVUFBVUcsUUFBUztZQUM1QixJQUNFLENBQUMsSUFBSSxDQUFDekQsS0FBSyxDQUFDLElBQUksQ0FBQ2UsT0FBTyxDQUFDdUMsUUFBUSxJQUNqQ0EsT0FBT25DLE9BQU8sSUFDZCxDQUFDN0IsWUFBWWdFLE9BQU9sQyxlQUFlLEdBQ25DO2dCQUNBLElBQUksQ0FBQzBCLE9BQU8sQ0FBQ1E7WUFDZjtRQUNGO0lBQ0Y7SUFFT3ZDLFFBQVF1QyxNQUFjLEVBQUU7UUFDN0IsT0FBT0EsT0FBTzNCLEVBQUU7SUFDbEI7SUFFT3dCLFFBQVFHLE1BQWMsRUFBRTtRQUM3QixPQUFPLElBQUksQ0FBQ3RELEtBQUssQ0FBQyxJQUFJLENBQUNlLE9BQU8sQ0FBQ3VDLFFBQVE7SUFDekM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9iYWNrZ3JvdW5kcy9yZWNvbW1lbmQtcXVlc3Rpb24udHM/NDk4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJUHJvamVjdFJlcG9zaXRvcnkgfSBmcm9tICcuLi9yZXBvc2l0b3JpZXMvcHJvamVjdFJlcG9zaXRvcnknO1xuaW1wb3J0IHsgUmVjb21tZW5kYXRpb25RdWVzdGlvblN0YXR1cyB9IGZyb20gJ0BzZXJ2ZXIvbW9kZWxzL2FkYXB0b3InO1xuaW1wb3J0IHsgSVdyZW5BSUFkYXB0b3IgfSBmcm9tICcuLi9hZGFwdG9ycy93cmVuQUlBZGFwdG9yJztcbmltcG9ydCB7IElUaHJlYWRSZXBvc2l0b3J5LCBQcm9qZWN0LCBUaHJlYWQgfSBmcm9tICcuLi9yZXBvc2l0b3JpZXMnO1xuaW1wb3J0IHtcbiAgSVRlbGVtZXRyeSxcbiAgVGVsZW1ldHJ5RXZlbnQsXG4gIFdyZW5TZXJ2aWNlLFxufSBmcm9tICcuLi90ZWxlbWV0cnkvdGVsZW1ldHJ5JztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICdsb2c0anMnO1xuXG4vLyBQUlEgYmFja2dyb3VuZCB0cmFja2VyIDogcHJvamVjdCByZWNvbW1lbmQgcXVlc3Rpb24gYmFja2dyb3VuZCB0cmFja2VyXG5jb25zdCBsb2dnZXJQcmVmaXggPSAnUFJRQlQ6JztcblxuY29uc3QgaXNGaW5hbGl6ZWQgPSAoc3RhdHVzOiBSZWNvbW1lbmRhdGlvblF1ZXN0aW9uU3RhdHVzKSA9PiB7XG4gIHJldHVybiBbXG4gICAgUmVjb21tZW5kYXRpb25RdWVzdGlvblN0YXR1cy5GSU5JU0hFRCxcbiAgICBSZWNvbW1lbmRhdGlvblF1ZXN0aW9uU3RhdHVzLkZBSUxFRCxcbiAgXS5pbmNsdWRlcyhzdGF0dXMpO1xufTtcblxuZXhwb3J0IGNsYXNzIFByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyIHtcbiAgLy8gdGFza3MgaXMgYSBrdiBwYWlyIG9mIHRhc2sgaWQgYW5kIHRocmVhZCByZXNwb25zZVxuICBwcml2YXRlIHRhc2tzOiBSZWNvcmQ8bnVtYmVyLCBQcm9qZWN0PiA9IHt9O1xuICBwcml2YXRlIGludGVydmFsVGltZTogbnVtYmVyO1xuICBwcml2YXRlIHdyZW5BSUFkYXB0b3I6IElXcmVuQUlBZGFwdG9yO1xuICBwcml2YXRlIHByb2plY3RSZXBvc2l0b3J5OiBJUHJvamVjdFJlcG9zaXRvcnk7XG4gIHByaXZhdGUgcnVubmluZ0pvYnMgPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgdGVsZW1ldHJ5OiBJVGVsZW1ldHJ5O1xuICBwcml2YXRlIGxvZ2dlcjogTG9nZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICB0ZWxlbWV0cnksXG4gICAgd3JlbkFJQWRhcHRvcixcbiAgICBwcm9qZWN0UmVwb3NpdG9yeSxcbiAgfToge1xuICAgIHRlbGVtZXRyeTogSVRlbGVtZXRyeTtcbiAgICB3cmVuQUlBZGFwdG9yOiBJV3JlbkFJQWRhcHRvcjtcbiAgICBwcm9qZWN0UmVwb3NpdG9yeTogSVByb2plY3RSZXBvc2l0b3J5O1xuICB9KSB7XG4gICAgdGhpcy5sb2dnZXIgPSBnZXRMb2dnZXIoJ1BSUSBCYWNrZ3JvdW5kIFRyYWNrZXInKTtcbiAgICB0aGlzLmxvZ2dlci5sZXZlbCA9ICdkZWJ1Zyc7XG4gICAgdGhpcy50ZWxlbWV0cnkgPSB0ZWxlbWV0cnk7XG4gICAgdGhpcy53cmVuQUlBZGFwdG9yID0gd3JlbkFJQWRhcHRvcjtcbiAgICB0aGlzLnByb2plY3RSZXBvc2l0b3J5ID0gcHJvamVjdFJlcG9zaXRvcnk7XG4gICAgdGhpcy5pbnRlcnZhbFRpbWUgPSAxMDAwO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGFydCgpIHtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCdSZWNvbW1lbmQgcXVlc3Rpb24gYmFja2dyb3VuZCB0cmFja2VyIHN0YXJ0ZWQnKTtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBjb25zdCBqb2JzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5tYXAoKHByb2plY3QpID0+IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gY2hlY2sgaWYgc2FtZSBqb2IgaXMgcnVubmluZ1xuICAgICAgICBpZiAodGhpcy5ydW5uaW5nSm9icy5oYXModGhpcy50YXNrS2V5KHByb2plY3QpKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1hcmsgdGhlIGpvYiBhcyBydW5uaW5nXG4gICAgICAgIHRoaXMucnVubmluZ0pvYnMuYWRkKHRoaXMudGFza0tleShwcm9qZWN0KSk7XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBsYXRlc3QgcmVzdWx0IGZyb20gQUkgc2VydmljZVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICAgICAgYXdhaXQgdGhpcy53cmVuQUlBZGFwdG9yLmdldFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0KFxuICAgICAgICAgICAgcHJvamVjdC5xdWVyeUlkLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgLy8gY2hlY2sgaWYgc3RhdHVzIGNoYW5nZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvamVjdC5xdWVzdGlvbnNTdGF0dXMgPT09IHJlc3VsdC5zdGF0dXMgJiZcbiAgICAgICAgICByZXN1bHQucmVzcG9uc2U/LnF1ZXN0aW9ucy5sZW5ndGggPT09IChwcm9qZWN0LnF1ZXN0aW9ucyB8fCBbXSkubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIG1hcmsgdGhlIGpvYiBhcyBmaW5pc2hlZFxuICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgYCR7bG9nZ2VyUHJlZml4fWpvYiAke3RoaXMudGFza0tleShwcm9qZWN0KX0gc3RhdHVzIG5vdCBjaGFuZ2VkLCByZXR1cm5pbmcgcXVlc3Rpb24gY291bnQ6ICR7cmVzdWx0LnJlc3BvbnNlPy5xdWVzdGlvbnMubGVuZ3RoIHx8IDB9YCxcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMucnVubmluZ0pvYnMuZGVsZXRlKHRoaXMudGFza0tleShwcm9qZWN0KSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlIGRhdGFiYXNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICByZXN1bHQuc3RhdHVzICE9PSBwcm9qZWN0LnF1ZXN0aW9uc1N0YXR1cyB8fFxuICAgICAgICAgIHJlc3VsdC5yZXNwb25zZT8ucXVlc3Rpb25zLmxlbmd0aCAhPT0gKHByb2plY3QucXVlc3Rpb25zIHx8IFtdKS5sZW5ndGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBgJHtsb2dnZXJQcmVmaXh9am9iICR7dGhpcy50YXNrS2V5KHByb2plY3QpfSBoYXZlIGNoYW5nZXMsIHJldHVybmluZyBxdWVzdGlvbiBjb3VudDogJHtyZXN1bHQucmVzcG9uc2U/LnF1ZXN0aW9ucy5sZW5ndGggfHwgMH0sIHVwZGF0aW5nYCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGF3YWl0IHRoaXMucHJvamVjdFJlcG9zaXRvcnkudXBkYXRlT25lKHByb2plY3QuaWQsIHtcbiAgICAgICAgICAgIHF1ZXN0aW9uc1N0YXR1czogcmVzdWx0LnN0YXR1cy50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgICAgcXVlc3Rpb25zOiByZXN1bHQucmVzcG9uc2U/LnF1ZXN0aW9ucyxcbiAgICAgICAgICAgIHF1ZXN0aW9uc0Vycm9yOiByZXN1bHQuZXJyb3IsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcHJvamVjdC5xdWVzdGlvbnNTdGF0dXMgPSByZXN1bHQuc3RhdHVzO1xuICAgICAgICAgIHByb2plY3QucXVlc3Rpb25zID0gcmVzdWx0LnJlc3BvbnNlPy5xdWVzdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgdGhlIHRhc2sgZnJvbSB0cmFja2VyIGlmIGl0IGlzIGZpbmFsaXplZFxuICAgICAgICBpZiAoaXNGaW5hbGl6ZWQocmVzdWx0LnN0YXR1cykpIHtcbiAgICAgICAgICBjb25zdCBldmVudFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3QuaWQsXG4gICAgICAgICAgICBwcm9qZWN0VHlwZTogcHJvamVjdC50eXBlLFxuICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQuc3RhdHVzLFxuICAgICAgICAgICAgcXVlc3Rpb25zOiBwcm9qZWN0LnF1ZXN0aW9ucyxcbiAgICAgICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gUmVjb21tZW5kYXRpb25RdWVzdGlvblN0YXR1cy5GSU5JU0hFRCkge1xuICAgICAgICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICAgICAgICBUZWxlbWV0cnlFdmVudC5IT01FX0dFTkVSQVRFX1BST0pFQ1RfUkVDT01NRU5EQVRJT05fUVVFU1RJT05TLFxuICAgICAgICAgICAgICBldmVudFByb3BlcnRpZXMsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgICAgICAgIFRlbGVtZXRyeUV2ZW50LkhPTUVfR0VORVJBVEVfUFJPSkVDVF9SRUNPTU1FTkRBVElPTl9RVUVTVElPTlMsXG4gICAgICAgICAgICAgIGV2ZW50UHJvcGVydGllcyxcbiAgICAgICAgICAgICAgV3JlblNlcnZpY2UuQUksXG4gICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBgJHtsb2dnZXJQcmVmaXh9am9iICR7dGhpcy50YXNrS2V5KHByb2plY3QpfSBpcyBmaW5hbGl6ZWQsIHJlbW92aW5nYCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLnRhc2tzW3RoaXMudGFza0tleShwcm9qZWN0KV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYXJrIHRoZSBqb2IgYXMgZmluaXNoZWRcbiAgICAgICAgdGhpcy5ydW5uaW5nSm9icy5kZWxldGUodGhpcy50YXNrS2V5KHByb2plY3QpKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBydW4gdGhlIGpvYnNcbiAgICAgIFByb21pc2UuYWxsU2V0dGxlZChqb2JzLm1hcCgoam9iKSA9PiBqb2IoKSkpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgLy8gc2hvdyByZWFzb24gb2YgcmVqZWN0aW9uXG4gICAgICAgIHJlc3VsdHMuZm9yRWFjaCgocmVzdWx0LCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAncmVqZWN0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgSm9iICR7aW5kZXh9IGZhaWxlZDogJHtyZXN1bHQucmVhc29ufWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LCB0aGlzLmludGVydmFsVGltZSk7XG4gIH1cblxuICBwdWJsaWMgYWRkVGFzayhwcm9qZWN0OiBQcm9qZWN0KSB7XG4gICAgdGhpcy50YXNrc1t0aGlzLnRhc2tLZXkocHJvamVjdCldID0gcHJvamVjdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUYXNrcygpIHtcbiAgICByZXR1cm4gdGhpcy50YXNrcztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKCkge1xuICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgdGhpcy5wcm9qZWN0UmVwb3NpdG9yeS5maW5kQWxsKCk7XG4gICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHByb2plY3RzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMudGFza0tleShwcm9qZWN0KSAmJlxuICAgICAgICAhaXNGaW5hbGl6ZWQocHJvamVjdC5xdWVzdGlvbnNTdGF0dXMgYXMgUmVjb21tZW5kYXRpb25RdWVzdGlvblN0YXR1cylcbiAgICAgICkge1xuICAgICAgICB0aGlzLmFkZFRhc2socHJvamVjdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHRhc2tLZXkocHJvamVjdDogUHJvamVjdCkge1xuICAgIHJldHVybiBwcm9qZWN0LmlkO1xuICB9XG5cbiAgcHVibGljIGlzRXhpc3QocHJvamVjdDogUHJvamVjdCkge1xuICAgIHJldHVybiB0aGlzLnRhc2tzW3RoaXMudGFza0tleShwcm9qZWN0KV07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIge1xuICAvLyB0YXNrcyBpcyBhIGt2IHBhaXIgb2YgdGFzayBpZCBhbmQgdGhyZWFkIHJlc3BvbnNlXG4gIHByaXZhdGUgdGFza3M6IFJlY29yZDxudW1iZXIsIFRocmVhZD4gPSB7fTtcbiAgcHJpdmF0ZSBpbnRlcnZhbFRpbWU6IG51bWJlcjtcbiAgcHJpdmF0ZSB3cmVuQUlBZGFwdG9yOiBJV3JlbkFJQWRhcHRvcjtcbiAgcHJpdmF0ZSB0aHJlYWRSZXBvc2l0b3J5OiBJVGhyZWFkUmVwb3NpdG9yeTtcbiAgcHJpdmF0ZSBydW5uaW5nSm9icyA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSB0ZWxlbWV0cnk6IElUZWxlbWV0cnk7XG4gIHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIHRlbGVtZXRyeSxcbiAgICB3cmVuQUlBZGFwdG9yLFxuICAgIHRocmVhZFJlcG9zaXRvcnksXG4gIH06IHtcbiAgICB0ZWxlbWV0cnk6IElUZWxlbWV0cnk7XG4gICAgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gICAgdGhyZWFkUmVwb3NpdG9yeTogSVRocmVhZFJlcG9zaXRvcnk7XG4gIH0pIHtcbiAgICB0aGlzLmxvZ2dlciA9IGdldExvZ2dlcignVFJRIEJhY2tncm91bmQgVHJhY2tlcicpO1xuICAgIHRoaXMubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcbiAgICB0aGlzLnRlbGVtZXRyeSA9IHRlbGVtZXRyeTtcbiAgICB0aGlzLndyZW5BSUFkYXB0b3IgPSB3cmVuQUlBZGFwdG9yO1xuICAgIHRoaXMudGhyZWFkUmVwb3NpdG9yeSA9IHRocmVhZFJlcG9zaXRvcnk7XG4gICAgdGhpcy5pbnRlcnZhbFRpbWUgPSAxMDAwO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGFydCgpIHtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCdSZWNvbW1lbmQgcXVlc3Rpb24gYmFja2dyb3VuZCB0cmFja2VyIHN0YXJ0ZWQnKTtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBjb25zdCBqb2JzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5tYXAoKHRocmVhZCkgPT4gYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBjaGVjayBpZiBzYW1lIGpvYiBpcyBydW5uaW5nXG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmdKb2JzLmhhcyh0aGlzLnRhc2tLZXkodGhyZWFkKSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtYXJrIHRoZSBqb2IgYXMgcnVubmluZ1xuICAgICAgICB0aGlzLnJ1bm5pbmdKb2JzLmFkZCh0aGlzLnRhc2tLZXkodGhyZWFkKSk7XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBsYXRlc3QgcmVzdWx0IGZyb20gQUkgc2VydmljZVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICAgICAgYXdhaXQgdGhpcy53cmVuQUlBZGFwdG9yLmdldFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0KFxuICAgICAgICAgICAgdGhyZWFkLnF1ZXJ5SWQsXG4gICAgICAgICAgKTtcblxuICAgICAgICAvLyBjaGVjayBpZiBzdGF0dXMgY2hhbmdlXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aHJlYWQucXVlc3Rpb25zU3RhdHVzID09PSByZXN1bHQuc3RhdHVzICYmXG4gICAgICAgICAgcmVzdWx0LnJlc3BvbnNlPy5xdWVzdGlvbnMubGVuZ3RoID09PSAodGhyZWFkLnF1ZXN0aW9ucyB8fCBbXSkubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIG1hcmsgdGhlIGpvYiBhcyBmaW5pc2hlZFxuICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgYCR7bG9nZ2VyUHJlZml4fWpvYiAke3RoaXMudGFza0tleSh0aHJlYWQpfSBzdGF0dXMgbm90IGNoYW5nZWQsIHJldHVybmluZyBxdWVzdGlvbiBjb3VudDogJHtyZXN1bHQucmVzcG9uc2U/LnF1ZXN0aW9ucy5sZW5ndGggfHwgMH1gLFxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5ydW5uaW5nSm9icy5kZWxldGUodGhpcy50YXNrS2V5KHRocmVhZCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhYmFzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgcmVzdWx0LnN0YXR1cyAhPT0gdGhyZWFkLnF1ZXN0aW9uc1N0YXR1cyB8fFxuICAgICAgICAgIHJlc3VsdC5yZXNwb25zZT8ucXVlc3Rpb25zLmxlbmd0aCAhPT0gKHRocmVhZC5xdWVzdGlvbnMgfHwgW10pLmxlbmd0aFxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgIGAke2xvZ2dlclByZWZpeH1qb2IgJHt0aGlzLnRhc2tLZXkodGhyZWFkKX0gaGF2ZSBjaGFuZ2VzLCByZXR1cm5pbmcgcXVlc3Rpb24gY291bnQ6ICR7cmVzdWx0LnJlc3BvbnNlPy5xdWVzdGlvbnMubGVuZ3RoIHx8IDB9LCB1cGRhdGluZ2AsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnRocmVhZFJlcG9zaXRvcnkudXBkYXRlT25lKHRocmVhZC5pZCwge1xuICAgICAgICAgICAgcXVlc3Rpb25zU3RhdHVzOiByZXN1bHQuc3RhdHVzLnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgICBxdWVzdGlvbnM6IHJlc3VsdC5yZXNwb25zZT8ucXVlc3Rpb25zLFxuICAgICAgICAgICAgcXVlc3Rpb25zRXJyb3I6IHJlc3VsdC5lcnJvcixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aHJlYWQucXVlc3Rpb25zU3RhdHVzID0gcmVzdWx0LnN0YXR1cztcbiAgICAgICAgICB0aHJlYWQucXVlc3Rpb25zID0gcmVzdWx0LnJlc3BvbnNlPy5xdWVzdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1vdmUgdGhlIHRhc2sgZnJvbSB0cmFja2VyIGlmIGl0IGlzIGZpbmFsaXplZFxuICAgICAgICBpZiAoaXNGaW5hbGl6ZWQocmVzdWx0LnN0YXR1cykpIHtcbiAgICAgICAgICBjb25zdCBldmVudFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICB0aHJlYWRfaWQ6IHRocmVhZC5pZCxcbiAgICAgICAgICAgIHN0YXR1czogcmVzdWx0LnN0YXR1cyxcbiAgICAgICAgICAgIHF1ZXN0aW9uczogdGhyZWFkLnF1ZXN0aW9ucyxcbiAgICAgICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gUmVjb21tZW5kYXRpb25RdWVzdGlvblN0YXR1cy5GSU5JU0hFRCkge1xuICAgICAgICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICAgICAgICBUZWxlbWV0cnlFdmVudC5IT01FX0dFTkVSQVRFX1RIUkVBRF9SRUNPTU1FTkRBVElPTl9RVUVTVElPTlMsXG4gICAgICAgICAgICAgIGV2ZW50UHJvcGVydGllcyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgICAgICAgVGVsZW1ldHJ5RXZlbnQuSE9NRV9HRU5FUkFURV9USFJFQURfUkVDT01NRU5EQVRJT05fUVVFU1RJT05TLFxuICAgICAgICAgICAgICBldmVudFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgIFdyZW5TZXJ2aWNlLkFJLFxuICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgYCR7bG9nZ2VyUHJlZml4fWpvYiAke3RoaXMudGFza0tleSh0aHJlYWQpfSBpcyBmaW5hbGl6ZWQsIHJlbW92aW5nYCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLnRhc2tzW3RoaXMudGFza0tleSh0aHJlYWQpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1hcmsgdGhlIGpvYiBhcyBmaW5pc2hlZFxuICAgICAgICB0aGlzLnJ1bm5pbmdKb2JzLmRlbGV0ZSh0aGlzLnRhc2tLZXkodGhyZWFkKSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gcnVuIHRoZSBqb2JzXG4gICAgICBQcm9taXNlLmFsbFNldHRsZWQoam9icy5tYXAoKGpvYikgPT4gam9iKCkpKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIC8vIHNob3cgcmVhc29uIG9mIHJlamVjdGlvblxuICAgICAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ3JlamVjdGVkJykge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEpvYiAke2luZGV4fSBmYWlsZWQ6ICR7cmVzdWx0LnJlYXNvbn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSwgdGhpcy5pbnRlcnZhbFRpbWUpO1xuICB9XG5cbiAgcHVibGljIGFkZFRhc2sodGhyZWFkOiBUaHJlYWQpIHtcbiAgICB0aGlzLnRhc2tzW3RoaXMudGFza0tleSh0aHJlYWQpXSA9IHRocmVhZDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUYXNrcygpIHtcbiAgICByZXR1cm4gdGhpcy50YXNrcztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKCkge1xuICAgIGNvbnN0IHRocmVhZHMgPSBhd2FpdCB0aGlzLnRocmVhZFJlcG9zaXRvcnkuZmluZEFsbCgpO1xuICAgIGZvciAoY29uc3QgdGhyZWFkIG9mIHRocmVhZHMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMudGFza3NbdGhpcy50YXNrS2V5KHRocmVhZCldICYmXG4gICAgICAgIHRocmVhZC5xdWVyeUlkICYmXG4gICAgICAgICFpc0ZpbmFsaXplZCh0aHJlYWQucXVlc3Rpb25zU3RhdHVzIGFzIFJlY29tbWVuZGF0aW9uUXVlc3Rpb25TdGF0dXMpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5hZGRUYXNrKHRocmVhZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHRhc2tLZXkodGhyZWFkOiBUaHJlYWQpIHtcbiAgICByZXR1cm4gdGhyZWFkLmlkO1xuICB9XG5cbiAgcHVibGljIGlzRXhpc3QodGhyZWFkOiBUaHJlYWQpIHtcbiAgICByZXR1cm4gdGhpcy50YXNrc1t0aGlzLnRhc2tLZXkodGhyZWFkKV07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJSZWNvbW1lbmRhdGlvblF1ZXN0aW9uU3RhdHVzIiwiVGVsZW1ldHJ5RXZlbnQiLCJXcmVuU2VydmljZSIsImdldExvZ2dlciIsImxvZ2dlclByZWZpeCIsImlzRmluYWxpemVkIiwic3RhdHVzIiwiRklOSVNIRUQiLCJGQUlMRUQiLCJpbmNsdWRlcyIsIlByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyIiwiY29uc3RydWN0b3IiLCJ0ZWxlbWV0cnkiLCJ3cmVuQUlBZGFwdG9yIiwicHJvamVjdFJlcG9zaXRvcnkiLCJ0YXNrcyIsInJ1bm5pbmdKb2JzIiwiU2V0IiwibG9nZ2VyIiwibGV2ZWwiLCJpbnRlcnZhbFRpbWUiLCJzdGFydCIsImluZm8iLCJzZXRJbnRlcnZhbCIsImpvYnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJwcm9qZWN0IiwiaGFzIiwidGFza0tleSIsImFkZCIsInJlc3VsdCIsImdldFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0IiwicXVlcnlJZCIsInF1ZXN0aW9uc1N0YXR1cyIsInJlc3BvbnNlIiwicXVlc3Rpb25zIiwibGVuZ3RoIiwiZGVidWciLCJkZWxldGUiLCJ1cGRhdGVPbmUiLCJpZCIsInRvVXBwZXJDYXNlIiwicXVlc3Rpb25zRXJyb3IiLCJlcnJvciIsImV2ZW50UHJvcGVydGllcyIsInByb2plY3RJZCIsInByb2plY3RUeXBlIiwidHlwZSIsInNlbmRFdmVudCIsIkhPTUVfR0VORVJBVEVfUFJPSkVDVF9SRUNPTU1FTkRBVElPTl9RVUVTVElPTlMiLCJBSSIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiam9iIiwidGhlbiIsInJlc3VsdHMiLCJmb3JFYWNoIiwiaW5kZXgiLCJyZWFzb24iLCJhZGRUYXNrIiwiZ2V0VGFza3MiLCJpbml0aWFsaXplIiwicHJvamVjdHMiLCJmaW5kQWxsIiwiaXNFeGlzdCIsIlRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIiLCJ0aHJlYWRSZXBvc2l0b3J5IiwidGhyZWFkIiwidGhyZWFkX2lkIiwiSE9NRV9HRU5FUkFURV9USFJFQURfUkVDT01NRU5EQVRJT05fUVVFU1RJT05TIiwidGhyZWFkcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/backgrounds/recommend-question.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/backgrounds/textBasedAnswerBackgroundTracker.ts":
/*!***************************************************************************!*\
  !*** ./src/apollo/server/backgrounds/textBasedAnswerBackgroundTracker.ts ***!
  \***************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TextBasedAnswerBackgroundTracker: () => (/* binding */ TextBasedAnswerBackgroundTracker)\n/* harmony export */ });\n/* harmony import */ var _models_adaptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services */ \"(api)/./src/apollo/server/services/index.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services__WEBPACK_IMPORTED_MODULE_1__]);\n_services__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_2__.getLogger)(\"TextBasedAnswerBackgroundTracker\");\nlogger.level = \"debug\";\nclass TextBasedAnswerBackgroundTracker {\n    constructor({ wrenAIAdaptor, threadResponseRepository, projectService, deployService, queryService }){\n        // tasks is a kv pair of task id and thread response\n        this.tasks = {};\n        this.runningJobs = new Set();\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.threadResponseRepository = threadResponseRepository;\n        this.projectService = projectService;\n        this.deployService = deployService;\n        this.queryService = queryService;\n        this.intervalTime = 1000;\n        this.start();\n    }\n    start() {\n        setInterval(async ()=>{\n            const jobs = Object.values(this.tasks).map((threadResponse)=>async ()=>{\n                    if (this.runningJobs.has(threadResponse.id) || !threadResponse.answerDetail) {\n                        return;\n                    }\n                    this.runningJobs.add(threadResponse.id);\n                    // update the status to fetching data\n                    await this.threadResponseRepository.updateOne(threadResponse.id, {\n                        answerDetail: {\n                            ...threadResponse.answerDetail,\n                            status: _services__WEBPACK_IMPORTED_MODULE_1__.ThreadResponseAnswerStatus.FETCHING_DATA\n                        }\n                    });\n                    // get sql data\n                    const project = await this.projectService.getCurrentProject();\n                    const deployment = await this.deployService.getLastDeployment(project.id);\n                    const mdl = deployment.manifest;\n                    const data = await this.queryService.preview(threadResponse.sql, {\n                        project,\n                        manifest: mdl,\n                        modelingOnly: false,\n                        limit: 500\n                    });\n                    // request AI service\n                    const response = await this.wrenAIAdaptor.createTextBasedAnswer({\n                        query: threadResponse.question,\n                        sql: threadResponse.sql,\n                        sqlData: data,\n                        threadId: threadResponse.threadId.toString(),\n                        configurations: {\n                            language: _models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage[project.language] || _models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage.EN\n                        }\n                    });\n                    // update the status to preprocessing\n                    await this.threadResponseRepository.updateOne(threadResponse.id, {\n                        answerDetail: {\n                            ...threadResponse.answerDetail,\n                            status: _services__WEBPACK_IMPORTED_MODULE_1__.ThreadResponseAnswerStatus.PREPROCESSING\n                        }\n                    });\n                    // polling query id to check the status\n                    let result;\n                    do {\n                        result = await this.wrenAIAdaptor.getTextBasedAnswerResult(response.queryId);\n                        if (result.status === _models_adaptor__WEBPACK_IMPORTED_MODULE_0__.TextBasedAnswerStatus.PREPROCESSING) {\n                            await new Promise((resolve)=>setTimeout(resolve, 500));\n                        }\n                    }while (result.status === _models_adaptor__WEBPACK_IMPORTED_MODULE_0__.TextBasedAnswerStatus.PREPROCESSING);\n                    // update the status to final\n                    const updatedAnswerDetail = {\n                        queryId: response.queryId,\n                        status: result.status === _models_adaptor__WEBPACK_IMPORTED_MODULE_0__.TextBasedAnswerStatus.SUCCEEDED ? _services__WEBPACK_IMPORTED_MODULE_1__.ThreadResponseAnswerStatus.STREAMING : _services__WEBPACK_IMPORTED_MODULE_1__.ThreadResponseAnswerStatus.FAILED,\n                        numRowsUsedInLLM: result.numRowsUsedInLLM,\n                        error: result.error\n                    };\n                    await this.threadResponseRepository.updateOne(threadResponse.id, {\n                        answerDetail: updatedAnswerDetail\n                    });\n                    delete this.tasks[threadResponse.id];\n                    // Mark the job as finished\n                    this.runningJobs.delete(threadResponse.id);\n                });\n            // Run the jobs\n            Promise.allSettled(jobs.map((job)=>job())).then((results)=>{\n                // Show reason of rejection\n                results.forEach((result, index)=>{\n                    if (result.status === \"rejected\") {\n                        logger.error(`Job ${index} failed: ${result.reason}`);\n                    }\n                });\n            });\n        }, this.intervalTime);\n    }\n    addTask(threadResponse) {\n        this.tasks[threadResponse.id] = threadResponse;\n    }\n    getTasks() {\n        return this.tasks;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9iYWNrZ3JvdW5kcy90ZXh0QmFzZWRBbnN3ZXJCYWNrZ3JvdW5kVHJhY2tlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBSzJCO0FBUU47QUFDcUI7QUFFMUMsTUFBTUksU0FBU0Qsd0RBQVNBLENBQUM7QUFDekJDLE9BQU9DLEtBQUssR0FBRztBQUVSLE1BQU1DO0lBV1hDLFlBQVksRUFDVkMsYUFBYSxFQUNiQyx3QkFBd0IsRUFDeEJDLGNBQWMsRUFDZEMsYUFBYSxFQUNiQyxZQUFZLEVBT2IsQ0FBRTtRQXRCSCxvREFBb0Q7YUFDNUNDLFFBQXdDLENBQUM7YUFPekNDLGNBQWMsSUFBSUM7UUFleEIsSUFBSSxDQUFDUCxhQUFhLEdBQUdBO1FBQ3JCLElBQUksQ0FBQ0Msd0JBQXdCLEdBQUdBO1FBQ2hDLElBQUksQ0FBQ0MsY0FBYyxHQUFHQTtRQUN0QixJQUFJLENBQUNDLGFBQWEsR0FBR0E7UUFDckIsSUFBSSxDQUFDQyxZQUFZLEdBQUdBO1FBQ3BCLElBQUksQ0FBQ0ksWUFBWSxHQUFHO1FBQ3BCLElBQUksQ0FBQ0MsS0FBSztJQUNaO0lBRVFBLFFBQVE7UUFDZEMsWUFBWTtZQUNWLE1BQU1DLE9BQU9DLE9BQU9DLE1BQU0sQ0FBQyxJQUFJLENBQUNSLEtBQUssRUFBRVMsR0FBRyxDQUN4QyxDQUFDQyxpQkFBbUI7b0JBQ2xCLElBQ0UsSUFBSSxDQUFDVCxXQUFXLENBQUNVLEdBQUcsQ0FBQ0QsZUFBZUUsRUFBRSxLQUN0QyxDQUFDRixlQUFlRyxZQUFZLEVBQzVCO3dCQUNBO29CQUNGO29CQUNBLElBQUksQ0FBQ1osV0FBVyxDQUFDYSxHQUFHLENBQUNKLGVBQWVFLEVBQUU7b0JBRXRDLHFDQUFxQztvQkFDckMsTUFBTSxJQUFJLENBQUNoQix3QkFBd0IsQ0FBQ21CLFNBQVMsQ0FBQ0wsZUFBZUUsRUFBRSxFQUFFO3dCQUMvREMsY0FBYzs0QkFDWixHQUFHSCxlQUFlRyxZQUFZOzRCQUM5QkcsUUFBUTNC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QUU7UUFDN0MsSUFBSSxDQUFDVixLQUFLLENBQUNVLGVBQWVFLEVBQUUsQ0FBQyxHQUFHRjtJQUNsQztJQUVPbUQsV0FBVztRQUNoQixPQUFPLElBQUksQ0FBQzdELEtBQUs7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9iYWNrZ3JvdW5kcy90ZXh0QmFzZWRBbnN3ZXJCYWNrZ3JvdW5kVHJhY2tlci50cz8zNmFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElXcmVuQUlBZGFwdG9yIH0gZnJvbSAnLi4vYWRhcHRvcnMnO1xuaW1wb3J0IHtcbiAgV3JlbkFJTGFuZ3VhZ2UsXG4gIFRleHRCYXNlZEFuc3dlclJlc3VsdCxcbiAgVGV4dEJhc2VkQW5zd2VyU3RhdHVzLFxufSBmcm9tICcuLi9tb2RlbHMvYWRhcHRvcic7XG5pbXBvcnQgeyBUaHJlYWRSZXNwb25zZSwgSVRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSB9IGZyb20gJy4uL3JlcG9zaXRvcmllcyc7XG5pbXBvcnQge1xuICBJUHJvamVjdFNlcnZpY2UsXG4gIElEZXBsb3lTZXJ2aWNlLFxuICBJUXVlcnlTZXJ2aWNlLFxuICBUaHJlYWRSZXNwb25zZUFuc3dlclN0YXR1cyxcbiAgUHJldmlld0RhdGFSZXNwb25zZSxcbn0gZnJvbSAnLi4vc2VydmljZXMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnQHNlcnZlci91dGlscyc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignVGV4dEJhc2VkQW5zd2VyQmFja2dyb3VuZFRyYWNrZXInKTtcbmxvZ2dlci5sZXZlbCA9ICdkZWJ1Zyc7XG5cbmV4cG9ydCBjbGFzcyBUZXh0QmFzZWRBbnN3ZXJCYWNrZ3JvdW5kVHJhY2tlciB7XG4gIC8vIHRhc2tzIGlzIGEga3YgcGFpciBvZiB0YXNrIGlkIGFuZCB0aHJlYWQgcmVzcG9uc2VcbiAgcHJpdmF0ZSB0YXNrczogUmVjb3JkPG51bWJlciwgVGhyZWFkUmVzcG9uc2U+ID0ge307XG4gIHByaXZhdGUgaW50ZXJ2YWxUaW1lOiBudW1iZXI7XG4gIHByaXZhdGUgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gIHByaXZhdGUgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5OiBJVGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5O1xuICBwcml2YXRlIHByb2plY3RTZXJ2aWNlOiBJUHJvamVjdFNlcnZpY2U7XG4gIHByaXZhdGUgZGVwbG95U2VydmljZTogSURlcGxveVNlcnZpY2U7XG4gIHByaXZhdGUgcXVlcnlTZXJ2aWNlOiBJUXVlcnlTZXJ2aWNlO1xuICBwcml2YXRlIHJ1bm5pbmdKb2JzID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICB3cmVuQUlBZGFwdG9yLFxuICAgIHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSxcbiAgICBwcm9qZWN0U2VydmljZSxcbiAgICBkZXBsb3lTZXJ2aWNlLFxuICAgIHF1ZXJ5U2VydmljZSxcbiAgfToge1xuICAgIHdyZW5BSUFkYXB0b3I6IElXcmVuQUlBZGFwdG9yO1xuICAgIHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeTogSVRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeTtcbiAgICBwcm9qZWN0U2VydmljZTogSVByb2plY3RTZXJ2aWNlO1xuICAgIGRlcGxveVNlcnZpY2U6IElEZXBsb3lTZXJ2aWNlO1xuICAgIHF1ZXJ5U2VydmljZTogSVF1ZXJ5U2VydmljZTtcbiAgfSkge1xuICAgIHRoaXMud3JlbkFJQWRhcHRvciA9IHdyZW5BSUFkYXB0b3I7XG4gICAgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkgPSB0aHJlYWRSZXNwb25zZVJlcG9zaXRvcnk7XG4gICAgdGhpcy5wcm9qZWN0U2VydmljZSA9IHByb2plY3RTZXJ2aWNlO1xuICAgIHRoaXMuZGVwbG95U2VydmljZSA9IGRlcGxveVNlcnZpY2U7XG4gICAgdGhpcy5xdWVyeVNlcnZpY2UgPSBxdWVyeVNlcnZpY2U7XG4gICAgdGhpcy5pbnRlcnZhbFRpbWUgPSAxMDAwO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnQoKSB7XG4gICAgc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgam9icyA9IE9iamVjdC52YWx1ZXModGhpcy50YXNrcykubWFwKFxuICAgICAgICAodGhyZWFkUmVzcG9uc2UpID0+IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmdKb2JzLmhhcyh0aHJlYWRSZXNwb25zZS5pZCkgfHxcbiAgICAgICAgICAgICF0aHJlYWRSZXNwb25zZS5hbnN3ZXJEZXRhaWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5ydW5uaW5nSm9icy5hZGQodGhyZWFkUmVzcG9uc2UuaWQpO1xuXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSBzdGF0dXMgdG8gZmV0Y2hpbmcgZGF0YVxuICAgICAgICAgIGF3YWl0IHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LnVwZGF0ZU9uZSh0aHJlYWRSZXNwb25zZS5pZCwge1xuICAgICAgICAgICAgYW5zd2VyRGV0YWlsOiB7XG4gICAgICAgICAgICAgIC4uLnRocmVhZFJlc3BvbnNlLmFuc3dlckRldGFpbCxcbiAgICAgICAgICAgICAgc3RhdHVzOiBUaHJlYWRSZXNwb25zZUFuc3dlclN0YXR1cy5GRVRDSElOR19EQVRBLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIGdldCBzcWwgZGF0YVxuICAgICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCB0aGlzLnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgICAgICAgY29uc3QgZGVwbG95bWVudCA9IGF3YWl0IHRoaXMuZGVwbG95U2VydmljZS5nZXRMYXN0RGVwbG95bWVudChcbiAgICAgICAgICAgIHByb2plY3QuaWQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBtZGwgPSBkZXBsb3ltZW50Lm1hbmlmZXN0O1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgdGhpcy5xdWVyeVNlcnZpY2UucHJldmlldyh0aHJlYWRSZXNwb25zZS5zcWwsIHtcbiAgICAgICAgICAgIHByb2plY3QsXG4gICAgICAgICAgICBtYW5pZmVzdDogbWRsLFxuICAgICAgICAgICAgbW9kZWxpbmdPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgIGxpbWl0OiA1MDAsXG4gICAgICAgICAgfSkpIGFzIFByZXZpZXdEYXRhUmVzcG9uc2U7XG5cbiAgICAgICAgICAvLyByZXF1ZXN0IEFJIHNlcnZpY2VcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMud3JlbkFJQWRhcHRvci5jcmVhdGVUZXh0QmFzZWRBbnN3ZXIoe1xuICAgICAgICAgICAgcXVlcnk6IHRocmVhZFJlc3BvbnNlLnF1ZXN0aW9uLFxuICAgICAgICAgICAgc3FsOiB0aHJlYWRSZXNwb25zZS5zcWwsXG4gICAgICAgICAgICBzcWxEYXRhOiBkYXRhLFxuICAgICAgICAgICAgdGhyZWFkSWQ6IHRocmVhZFJlc3BvbnNlLnRocmVhZElkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uczoge1xuICAgICAgICAgICAgICBsYW5ndWFnZTogV3JlbkFJTGFuZ3VhZ2VbcHJvamVjdC5sYW5ndWFnZV0gfHwgV3JlbkFJTGFuZ3VhZ2UuRU4sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSBzdGF0dXMgdG8gcHJlcHJvY2Vzc2luZ1xuICAgICAgICAgIGF3YWl0IHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LnVwZGF0ZU9uZSh0aHJlYWRSZXNwb25zZS5pZCwge1xuICAgICAgICAgICAgYW5zd2VyRGV0YWlsOiB7XG4gICAgICAgICAgICAgIC4uLnRocmVhZFJlc3BvbnNlLmFuc3dlckRldGFpbCxcbiAgICAgICAgICAgICAgc3RhdHVzOiBUaHJlYWRSZXNwb25zZUFuc3dlclN0YXR1cy5QUkVQUk9DRVNTSU5HLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIHBvbGxpbmcgcXVlcnkgaWQgdG8gY2hlY2sgdGhlIHN0YXR1c1xuICAgICAgICAgIGxldCByZXN1bHQ6IFRleHRCYXNlZEFuc3dlclJlc3VsdDtcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLndyZW5BSUFkYXB0b3IuZ2V0VGV4dEJhc2VkQW5zd2VyUmVzdWx0KFxuICAgICAgICAgICAgICByZXNwb25zZS5xdWVyeUlkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBUZXh0QmFzZWRBbnN3ZXJTdGF0dXMuUFJFUFJPQ0VTU0lORykge1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlIChyZXN1bHQuc3RhdHVzID09PSBUZXh0QmFzZWRBbnN3ZXJTdGF0dXMuUFJFUFJPQ0VTU0lORyk7XG5cbiAgICAgICAgICAvLyB1cGRhdGUgdGhlIHN0YXR1cyB0byBmaW5hbFxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRBbnN3ZXJEZXRhaWwgPSB7XG4gICAgICAgICAgICBxdWVyeUlkOiByZXNwb25zZS5xdWVyeUlkLFxuICAgICAgICAgICAgc3RhdHVzOlxuICAgICAgICAgICAgICByZXN1bHQuc3RhdHVzID09PSBUZXh0QmFzZWRBbnN3ZXJTdGF0dXMuU1VDQ0VFREVEXG4gICAgICAgICAgICAgICAgPyBUaHJlYWRSZXNwb25zZUFuc3dlclN0YXR1cy5TVFJFQU1JTkdcbiAgICAgICAgICAgICAgICA6IFRocmVhZFJlc3BvbnNlQW5zd2VyU3RhdHVzLkZBSUxFRCxcbiAgICAgICAgICAgIG51bVJvd3NVc2VkSW5MTE06IHJlc3VsdC5udW1Sb3dzVXNlZEluTExNLFxuICAgICAgICAgICAgZXJyb3I6IHJlc3VsdC5lcnJvcixcbiAgICAgICAgICB9O1xuICAgICAgICAgIGF3YWl0IHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LnVwZGF0ZU9uZSh0aHJlYWRSZXNwb25zZS5pZCwge1xuICAgICAgICAgICAgYW5zd2VyRGV0YWlsOiB1cGRhdGVkQW5zd2VyRGV0YWlsLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZGVsZXRlIHRoaXMudGFza3NbdGhyZWFkUmVzcG9uc2UuaWRdO1xuXG4gICAgICAgICAgLy8gTWFyayB0aGUgam9iIGFzIGZpbmlzaGVkXG4gICAgICAgICAgdGhpcy5ydW5uaW5nSm9icy5kZWxldGUodGhyZWFkUmVzcG9uc2UuaWQpO1xuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgLy8gUnVuIHRoZSBqb2JzXG4gICAgICBQcm9taXNlLmFsbFNldHRsZWQoam9icy5tYXAoKGpvYikgPT4gam9iKCkpKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIC8vIFNob3cgcmVhc29uIG9mIHJlamVjdGlvblxuICAgICAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ3JlamVjdGVkJykge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBKb2IgJHtpbmRleH0gZmFpbGVkOiAke3Jlc3VsdC5yZWFzb259YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sIHRoaXMuaW50ZXJ2YWxUaW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRUYXNrKHRocmVhZFJlc3BvbnNlOiBUaHJlYWRSZXNwb25zZSkge1xuICAgIHRoaXMudGFza3NbdGhyZWFkUmVzcG9uc2UuaWRdID0gdGhyZWFkUmVzcG9uc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0VGFza3MoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFza3M7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJXcmVuQUlMYW5ndWFnZSIsIlRleHRCYXNlZEFuc3dlclN0YXR1cyIsIlRocmVhZFJlc3BvbnNlQW5zd2VyU3RhdHVzIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwibGV2ZWwiLCJUZXh0QmFzZWRBbnN3ZXJCYWNrZ3JvdW5kVHJhY2tlciIsImNvbnN0cnVjdG9yIiwid3JlbkFJQWRhcHRvciIsInRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSIsInByb2plY3RTZXJ2aWNlIiwiZGVwbG95U2VydmljZSIsInF1ZXJ5U2VydmljZSIsInRhc2tzIiwicnVubmluZ0pvYnMiLCJTZXQiLCJpbnRlcnZhbFRpbWUiLCJzdGFydCIsInNldEludGVydmFsIiwiam9icyIsIk9iamVjdCIsInZhbHVlcyIsIm1hcCIsInRocmVhZFJlc3BvbnNlIiwiaGFzIiwiaWQiLCJhbnN3ZXJEZXRhaWwiLCJhZGQiLCJ1cGRhdGVPbmUiLCJzdGF0dXMiLCJGRVRDSElOR19EQVRBIiwicHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0IiwiZGVwbG95bWVudCIsImdldExhc3REZXBsb3ltZW50IiwibWRsIiwibWFuaWZlc3QiLCJkYXRhIiwicHJldmlldyIsInNxbCIsIm1vZGVsaW5nT25seSIsImxpbWl0IiwicmVzcG9uc2UiLCJjcmVhdGVUZXh0QmFzZWRBbnN3ZXIiLCJxdWVyeSIsInF1ZXN0aW9uIiwic3FsRGF0YSIsInRocmVhZElkIiwidG9TdHJpbmciLCJjb25maWd1cmF0aW9ucyIsImxhbmd1YWdlIiwiRU4iLCJQUkVQUk9DRVNTSU5HIiwicmVzdWx0IiwiZ2V0VGV4dEJhc2VkQW5zd2VyUmVzdWx0IiwicXVlcnlJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInVwZGF0ZWRBbnN3ZXJEZXRhaWwiLCJTVUNDRUVERUQiLCJTVFJFQU1JTkciLCJGQUlMRUQiLCJudW1Sb3dzVXNlZEluTExNIiwiZXJyb3IiLCJkZWxldGUiLCJhbGxTZXR0bGVkIiwiam9iIiwidGhlbiIsInJlc3VsdHMiLCJmb3JFYWNoIiwiaW5kZXgiLCJyZWFzb24iLCJhZGRUYXNrIiwiZ2V0VGFza3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/backgrounds/textBasedAnswerBackgroundTracker.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/config.ts":
/*!*************************************!*\
  !*** ./src/apollo/server/config.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getConfig: () => (/* binding */ getConfig)\n/* harmony export */ });\n/* harmony import */ var lodash_pickBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/pickBy */ \"lodash/pickBy\");\n/* harmony import */ var lodash_pickBy__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_pickBy__WEBPACK_IMPORTED_MODULE_0__);\n\nconst defaultConfig = {\n    // wren ui\n    otherServiceUsingDocker: false,\n    // database\n    dbType: \"sqlite\",\n    // pg\n    pgUrl: \"postgres://postgres:postgres@localhost:5432/admin_ui\",\n    debug: false,\n    // sqlite\n    sqliteFile: \"./db.sqlite3\",\n    persistCredentialDir: `${process.cwd()}/.tmp`,\n    // wren engine\n    wrenEngineEndpoint: \"http://localhost:8080\",\n    // wren AI\n    wrenAIEndpoint: \"http://localhost:5555\",\n    // ibis server\n    experimentalEngineRustVersion: false,\n    ibisServerEndpoint: \"http://127.0.0.1:8000\",\n    // encryption\n    encryptionPassword: \"sementic\",\n    encryptionSalt: \"layer\"\n};\nconst config = {\n    // node\n    otherServiceUsingDocker: process.env.OTHER_SERVICE_USING_DOCKER === \"true\",\n    // database\n    dbType: process.env.DB_TYPE,\n    // pg\n    pgUrl: process.env.PG_URL,\n    debug: process.env.DEBUG === \"true\",\n    // sqlite\n    sqliteFile: process.env.SQLITE_FILE,\n    persistCredentialDir: (()=>{\n        if (process.env.PERSIST_CREDENTIAL_DIR && process.env.PERSIST_CREDENTIAL_DIR.length > 0) {\n            return process.env.PERSIST_CREDENTIAL_DIR;\n        }\n        return undefined;\n    })(),\n    // wren engine\n    wrenEngineEndpoint: process.env.WREN_ENGINE_ENDPOINT,\n    // wren AI\n    wrenAIEndpoint: process.env.WREN_AI_ENDPOINT,\n    generationModel: process.env.GENERATION_MODEL,\n    // ibis server\n    experimentalEngineRustVersion: process.env.EXPERIMENTAL_ENGINE_RUST_VERSION === \"true\",\n    ibisServerEndpoint: process.env.IBIS_SERVER_ENDPOINT,\n    // encryption\n    encryptionPassword: process.env.ENCRYPTION_PASSWORD,\n    encryptionSalt: process.env.ENCRYPTION_SALT,\n    // telemetry\n    telemetryEnabled: process.env.TELEMETRY_ENABLED && process.env.TELEMETRY_ENABLED.toLocaleLowerCase() === \"true\",\n    posthogApiKey: process.env.POSTHOG_API_KEY,\n    posthogHost: process.env.POSTHOG_HOST,\n    userUUID: process.env.USER_UUID,\n    // versions\n    wrenUIVersion: process.env.WREN_UI_VERSION,\n    wrenEngineVersion: process.env.WREN_ENGINE_VERSION,\n    wrenAIVersion: process.env.WREN_AI_SERVICE_VERSION,\n    wrenProductVersion: process.env.WREN_PRODUCT_VERSION,\n    // generate recommendation questions max questions\n    projectRecommendationQuestionMaxCategories: process.env.PROJECT_RECOMMENDATION_QUESTION_MAX_CATEGORIES ? parseInt(process.env.PROJECT_RECOMMENDATION_QUESTION_MAX_CATEGORIES) : 3,\n    projectRecommendationQuestionsMaxQuestions: process.env.PROJECT_RECOMMENDATION_QUESTIONS_MAX_QUESTIONS ? parseInt(process.env.PROJECT_RECOMMENDATION_QUESTIONS_MAX_QUESTIONS) : 3,\n    threadRecommendationQuestionMaxCategories: process.env.THREAD_RECOMMENDATION_QUESTION_MAX_CATEGORIES ? parseInt(process.env.THREAD_RECOMMENDATION_QUESTION_MAX_CATEGORIES) : 3,\n    threadRecommendationQuestionsMaxQuestions: process.env.THREAD_RECOMMENDATION_QUESTIONS_MAX_QUESTIONS ? parseInt(process.env.THREAD_RECOMMENDATION_QUESTIONS_MAX_QUESTIONS) : 1\n};\nfunction getConfig() {\n    return {\n        ...defaultConfig,\n        ...lodash_pickBy__WEBPACK_IMPORTED_MODULE_0___default()(config)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTZDLEdBQzVDTixTQUFTN0MsUUFBUVMsR0FBRyxDQUFDMEMsNkNBQTZDLElBQ2xFO0FBQ047QUFFTyxTQUFTQztJQUNkLE9BQU87UUFBRSxHQUFHM0QsYUFBYTtRQUFFLEdBQUdELG9EQUFNQSxDQUFDZ0IsT0FBTztJQUFDO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL2NvbmZpZy50cz9hNjNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBpY2tCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbmZpZyB7XG4gIC8vIHdyZW4gdWlcbiAgb3RoZXJTZXJ2aWNlVXNpbmdEb2NrZXI6IGJvb2xlYW47XG5cbiAgLy8gZGF0YWJhc2VcbiAgZGJUeXBlOiBzdHJpbmc7XG4gIC8vIHBnXG4gIHBnVXJsPzogc3RyaW5nO1xuICBkZWJ1Zz86IGJvb2xlYW47XG4gIC8vIHNxbGl0ZVxuICBzcWxpdGVGaWxlPzogc3RyaW5nO1xuXG4gIHBlcnNpc3RDcmVkZW50aWFsRGlyPzogc3RyaW5nO1xuXG4gIC8vIHdyZW4gZW5naW5lXG4gIHdyZW5FbmdpbmVFbmRwb2ludDogc3RyaW5nO1xuXG4gIC8vIHdyZW4gQUlcbiAgd3JlbkFJRW5kcG9pbnQ6IHN0cmluZztcbiAgZ2VuZXJhdGlvbk1vZGVsPzogc3RyaW5nO1xuXG4gIC8vIGliaXMgc2VydmVyXG4gIGV4cGVyaW1lbnRhbEVuZ2luZVJ1c3RWZXJzaW9uPzogYm9vbGVhbjtcbiAgaWJpc1NlcnZlckVuZHBvaW50OiBzdHJpbmc7XG5cbiAgLy8gZW5jcnlwdGlvblxuICBlbmNyeXB0aW9uUGFzc3dvcmQ6IHN0cmluZztcbiAgZW5jcnlwdGlvblNhbHQ6IHN0cmluZztcblxuICAvLyB0ZWxlbWV0cnlcbiAgdGVsZW1ldHJ5RW5hYmxlZD86IGJvb2xlYW47XG4gIHBvc3Rob2dBcGlLZXk/OiBzdHJpbmc7XG4gIHBvc3Rob2dIb3N0Pzogc3RyaW5nO1xuICB1c2VyVVVJRD86IHN0cmluZztcblxuICAvLyB2ZXJzaW9uc1xuICB3cmVuVUlWZXJzaW9uPzogc3RyaW5nO1xuICB3cmVuRW5naW5lVmVyc2lvbj86IHN0cmluZztcbiAgd3JlbkFJVmVyc2lvbj86IHN0cmluZztcbiAgd3JlblByb2R1Y3RWZXJzaW9uPzogc3RyaW5nO1xuXG4gIC8vIGdlbmVyYXRlIHJlY29tbWVuZGF0aW9uIHF1ZXN0aW9ucyBtYXggY2F0ZWdvcmllc1xuICBwcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbk1heENhdGVnb3JpZXM/OiBudW1iZXI7XG4gIHByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc01heFF1ZXN0aW9ucz86IG51bWJlcjtcbiAgdGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbk1heENhdGVnb3JpZXM/OiBudW1iZXI7XG4gIHRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zTWF4UXVlc3Rpb25zPzogbnVtYmVyO1xufVxuXG5jb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAvLyB3cmVuIHVpXG4gIG90aGVyU2VydmljZVVzaW5nRG9ja2VyOiBmYWxzZSxcblxuICAvLyBkYXRhYmFzZVxuICBkYlR5cGU6ICdzcWxpdGUnLFxuXG4gIC8vIHBnXG4gIHBnVXJsOiAncG9zdGdyZXM6Ly9wb3N0Z3Jlczpwb3N0Z3Jlc0Bsb2NhbGhvc3Q6NTQzMi9hZG1pbl91aScsXG4gIGRlYnVnOiBmYWxzZSxcblxuICAvLyBzcWxpdGVcbiAgc3FsaXRlRmlsZTogJy4vZGIuc3FsaXRlMycsXG5cbiAgcGVyc2lzdENyZWRlbnRpYWxEaXI6IGAke3Byb2Nlc3MuY3dkKCl9Ly50bXBgLFxuXG4gIC8vIHdyZW4gZW5naW5lXG4gIHdyZW5FbmdpbmVFbmRwb2ludDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcsXG5cbiAgLy8gd3JlbiBBSVxuICB3cmVuQUlFbmRwb2ludDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTU1NScsXG5cbiAgLy8gaWJpcyBzZXJ2ZXJcbiAgZXhwZXJpbWVudGFsRW5naW5lUnVzdFZlcnNpb246IGZhbHNlLFxuICBpYmlzU2VydmVyRW5kcG9pbnQ6ICdodHRwOi8vMTI3LjAuMC4xOjgwMDAnLFxuXG4gIC8vIGVuY3J5cHRpb25cbiAgZW5jcnlwdGlvblBhc3N3b3JkOiAnc2VtZW50aWMnLFxuICBlbmNyeXB0aW9uU2FsdDogJ2xheWVyJyxcbn07XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgLy8gbm9kZVxuICBvdGhlclNlcnZpY2VVc2luZ0RvY2tlcjogcHJvY2Vzcy5lbnYuT1RIRVJfU0VSVklDRV9VU0lOR19ET0NLRVIgPT09ICd0cnVlJyxcblxuICAvLyBkYXRhYmFzZVxuICBkYlR5cGU6IHByb2Nlc3MuZW52LkRCX1RZUEUsXG4gIC8vIHBnXG4gIHBnVXJsOiBwcm9jZXNzLmVudi5QR19VUkwsXG4gIGRlYnVnOiBwcm9jZXNzLmVudi5ERUJVRyA9PT0gJ3RydWUnLFxuICAvLyBzcWxpdGVcbiAgc3FsaXRlRmlsZTogcHJvY2Vzcy5lbnYuU1FMSVRFX0ZJTEUsXG5cbiAgcGVyc2lzdENyZWRlbnRpYWxEaXI6ICgoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgcHJvY2Vzcy5lbnYuUEVSU0lTVF9DUkVERU5USUFMX0RJUiAmJlxuICAgICAgcHJvY2Vzcy5lbnYuUEVSU0lTVF9DUkVERU5USUFMX0RJUi5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuUEVSU0lTVF9DUkVERU5USUFMX0RJUjtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSkoKSxcblxuICAvLyB3cmVuIGVuZ2luZVxuICB3cmVuRW5naW5lRW5kcG9pbnQ6IHByb2Nlc3MuZW52LldSRU5fRU5HSU5FX0VORFBPSU5ULFxuXG4gIC8vIHdyZW4gQUlcbiAgd3JlbkFJRW5kcG9pbnQ6IHByb2Nlc3MuZW52LldSRU5fQUlfRU5EUE9JTlQsXG4gIGdlbmVyYXRpb25Nb2RlbDogcHJvY2Vzcy5lbnYuR0VORVJBVElPTl9NT0RFTCxcblxuICAvLyBpYmlzIHNlcnZlclxuICBleHBlcmltZW50YWxFbmdpbmVSdXN0VmVyc2lvbjpcbiAgICBwcm9jZXNzLmVudi5FWFBFUklNRU5UQUxfRU5HSU5FX1JVU1RfVkVSU0lPTiA9PT0gJ3RydWUnLFxuICBpYmlzU2VydmVyRW5kcG9pbnQ6IHByb2Nlc3MuZW52LklCSVNfU0VSVkVSX0VORFBPSU5ULFxuXG4gIC8vIGVuY3J5cHRpb25cbiAgZW5jcnlwdGlvblBhc3N3b3JkOiBwcm9jZXNzLmVudi5FTkNSWVBUSU9OX1BBU1NXT1JELFxuICBlbmNyeXB0aW9uU2FsdDogcHJvY2Vzcy5lbnYuRU5DUllQVElPTl9TQUxULFxuXG4gIC8vIHRlbGVtZXRyeVxuICB0ZWxlbWV0cnlFbmFibGVkOlxuICAgIHByb2Nlc3MuZW52LlRFTEVNRVRSWV9FTkFCTEVEICYmXG4gICAgcHJvY2Vzcy5lbnYuVEVMRU1FVFJZX0VOQUJMRUQudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gJ3RydWUnLFxuICBwb3N0aG9nQXBpS2V5OiBwcm9jZXNzLmVudi5QT1NUSE9HX0FQSV9LRVksXG4gIHBvc3Rob2dIb3N0OiBwcm9jZXNzLmVudi5QT1NUSE9HX0hPU1QsXG4gIHVzZXJVVUlEOiBwcm9jZXNzLmVudi5VU0VSX1VVSUQsXG5cbiAgLy8gdmVyc2lvbnNcbiAgd3JlblVJVmVyc2lvbjogcHJvY2Vzcy5lbnYuV1JFTl9VSV9WRVJTSU9OLFxuICB3cmVuRW5naW5lVmVyc2lvbjogcHJvY2Vzcy5lbnYuV1JFTl9FTkdJTkVfVkVSU0lPTixcbiAgd3JlbkFJVmVyc2lvbjogcHJvY2Vzcy5lbnYuV1JFTl9BSV9TRVJWSUNFX1ZFUlNJT04sXG4gIHdyZW5Qcm9kdWN0VmVyc2lvbjogcHJvY2Vzcy5lbnYuV1JFTl9QUk9EVUNUX1ZFUlNJT04sXG5cbiAgLy8gZ2VuZXJhdGUgcmVjb21tZW5kYXRpb24gcXVlc3Rpb25zIG1heCBxdWVzdGlvbnNcbiAgcHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25NYXhDYXRlZ29yaWVzOiBwcm9jZXNzLmVudlxuICAgIC5QUk9KRUNUX1JFQ09NTUVOREFUSU9OX1FVRVNUSU9OX01BWF9DQVRFR09SSUVTXG4gICAgPyBwYXJzZUludChwcm9jZXNzLmVudi5QUk9KRUNUX1JFQ09NTUVOREFUSU9OX1FVRVNUSU9OX01BWF9DQVRFR09SSUVTKVxuICAgIDogMyxcbiAgcHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zTWF4UXVlc3Rpb25zOiBwcm9jZXNzLmVudlxuICAgIC5QUk9KRUNUX1JFQ09NTUVOREFUSU9OX1FVRVNUSU9OU19NQVhfUVVFU1RJT05TXG4gICAgPyBwYXJzZUludChwcm9jZXNzLmVudi5QUk9KRUNUX1JFQ09NTUVOREFUSU9OX1FVRVNUSU9OU19NQVhfUVVFU1RJT05TKVxuICAgIDogMyxcbiAgdGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbk1heENhdGVnb3JpZXM6IHByb2Nlc3MuZW52XG4gICAgLlRIUkVBRF9SRUNPTU1FTkRBVElPTl9RVUVTVElPTl9NQVhfQ0FURUdPUklFU1xuICAgID8gcGFyc2VJbnQocHJvY2Vzcy5lbnYuVEhSRUFEX1JFQ09NTUVOREFUSU9OX1FVRVNUSU9OX01BWF9DQVRFR09SSUVTKVxuICAgIDogMyxcbiAgdGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbnNNYXhRdWVzdGlvbnM6IHByb2Nlc3MuZW52XG4gICAgLlRIUkVBRF9SRUNPTU1FTkRBVElPTl9RVUVTVElPTlNfTUFYX1FVRVNUSU9OU1xuICAgID8gcGFyc2VJbnQocHJvY2Vzcy5lbnYuVEhSRUFEX1JFQ09NTUVOREFUSU9OX1FVRVNUSU9OU19NQVhfUVVFU1RJT05TKVxuICAgIDogMSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWcoKTogSUNvbmZpZyB7XG4gIHJldHVybiB7IC4uLmRlZmF1bHRDb25maWcsIC4uLnBpY2tCeShjb25maWcpIH07XG59XG4iXSwibmFtZXMiOlsicGlja0J5IiwiZGVmYXVsdENvbmZpZyIsIm90aGVyU2VydmljZVVzaW5nRG9ja2VyIiwiZGJUeXBlIiwicGdVcmwiLCJkZWJ1ZyIsInNxbGl0ZUZpbGUiLCJwZXJzaXN0Q3JlZGVudGlhbERpciIsInByb2Nlc3MiLCJjd2QiLCJ3cmVuRW5naW5lRW5kcG9pbnQiLCJ3cmVuQUlFbmRwb2ludCIsImV4cGVyaW1lbnRhbEVuZ2luZVJ1c3RWZXJzaW9uIiwiaWJpc1NlcnZlckVuZHBvaW50IiwiZW5jcnlwdGlvblBhc3N3b3JkIiwiZW5jcnlwdGlvblNhbHQiLCJjb25maWciLCJlbnYiLCJPVEhFUl9TRVJWSUNFX1VTSU5HX0RPQ0tFUiIsIkRCX1RZUEUiLCJQR19VUkwiLCJERUJVRyIsIlNRTElURV9GSUxFIiwiUEVSU0lTVF9DUkVERU5USUFMX0RJUiIsImxlbmd0aCIsInVuZGVmaW5lZCIsIldSRU5fRU5HSU5FX0VORFBPSU5UIiwiV1JFTl9BSV9FTkRQT0lOVCIsImdlbmVyYXRpb25Nb2RlbCIsIkdFTkVSQVRJT05fTU9ERUwiLCJFWFBFUklNRU5UQUxfRU5HSU5FX1JVU1RfVkVSU0lPTiIsIklCSVNfU0VSVkVSX0VORFBPSU5UIiwiRU5DUllQVElPTl9QQVNTV09SRCIsIkVOQ1JZUFRJT05fU0FMVCIsInRlbGVtZXRyeUVuYWJsZWQiLCJURUxFTUVUUllfRU5BQkxFRCIsInRvTG9jYWxlTG93ZXJDYXNlIiwicG9zdGhvZ0FwaUtleSIsIlBPU1RIT0dfQVBJX0tFWSIsInBvc3Rob2dIb3N0IiwiUE9TVEhPR19IT1NUIiwidXNlclVVSUQiLCJVU0VSX1VVSUQiLCJ3cmVuVUlWZXJzaW9uIiwiV1JFTl9VSV9WRVJTSU9OIiwid3JlbkVuZ2luZVZlcnNpb24iLCJXUkVOX0VOR0lORV9WRVJTSU9OIiwid3JlbkFJVmVyc2lvbiIsIldSRU5fQUlfU0VSVklDRV9WRVJTSU9OIiwid3JlblByb2R1Y3RWZXJzaW9uIiwiV1JFTl9QUk9EVUNUX1ZFUlNJT04iLCJwcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbk1heENhdGVnb3JpZXMiLCJQUk9KRUNUX1JFQ09NTUVOREFUSU9OX1FVRVNUSU9OX01BWF9DQVRFR09SSUVTIiwicGFyc2VJbnQiLCJwcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnNNYXhRdWVzdGlvbnMiLCJQUk9KRUNUX1JFQ09NTUVOREFUSU9OX1FVRVNUSU9OU19NQVhfUVVFU1RJT05TIiwidGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbk1heENhdGVnb3JpZXMiLCJUSFJFQURfUkVDT01NRU5EQVRJT05fUVVFU1RJT05fTUFYX0NBVEVHT1JJRVMiLCJ0aHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc01heFF1ZXN0aW9ucyIsIlRIUkVBRF9SRUNPTU1FTkRBVElPTl9RVUVTVElPTlNfTUFYX1FVRVNUSU9OUyIsImdldENvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/config.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/dataSource.ts":
/*!*****************************************!*\
  !*** ./src/apollo/server/dataSource.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encryptConnectionInfo: () => (/* binding */ encryptConnectionInfo),\n/* harmony export */   toIbisConnectionInfo: () => (/* binding */ toIbisConnectionInfo),\n/* harmony export */   toMultipleIbisConnectionInfos: () => (/* binding */ toMultipleIbisConnectionInfos)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"(api)/./src/apollo/server/types/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ \"(api)/./src/apollo/server/config.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n\n\n\nconst config = (0,_config__WEBPACK_IMPORTED_MODULE_1__.getConfig)();\nconst encryptor = new _utils__WEBPACK_IMPORTED_MODULE_2__.Encryptor(config);\nfunction encryptConnectionInfo(dataSourceType, connectionInfo) {\n    return dataSource[dataSourceType].sensitiveProps.reduce((acc, prop)=>{\n        const value = connectionInfo[prop];\n        if (value) {\n            const encryption = encryptor.encrypt(JSON.parse(JSON.stringify({\n                [prop]: value\n            })));\n            return {\n                ...acc,\n                [prop]: encryption\n            };\n        }\n        return acc;\n    }, connectionInfo);\n}\nfunction toIbisConnectionInfo(dataSourceType, connectionInfo) {\n    return dataSource[dataSourceType].toIbisConnectionInfo(connectionInfo);\n}\nfunction toMultipleIbisConnectionInfos(dataSourceType, connectionInfo) {\n    if (!dataSource[dataSourceType].toMultipleIbisConnectionInfos) {\n        return null;\n    }\n    return dataSource[dataSourceType].toMultipleIbisConnectionInfos(connectionInfo);\n}\nconst dataSource = {\n    // BigQuery\n    [_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.BIG_QUERY]: {\n        sensitiveProps: [\n            \"credentials\"\n        ],\n        toIbisConnectionInfo (connectionInfo) {\n            const decryptedConnectionInfo = decryptConnectionInfo(_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.BIG_QUERY, connectionInfo);\n            const { projectId, datasetId, credentials } = decryptedConnectionInfo;\n            const base64Credentials = Buffer.from(JSON.stringify(credentials)).toString(\"base64\");\n            const res = {\n                project_id: projectId,\n                dataset_id: datasetId,\n                credentials: base64Credentials\n            };\n            return res;\n        }\n    },\n    // Postgres\n    [_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.POSTGRES]: {\n        sensitiveProps: [\n            \"password\"\n        ],\n        toIbisConnectionInfo (connectionInfo) {\n            const decryptedConnectionInfo = decryptConnectionInfo(_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.POSTGRES, connectionInfo);\n            const { host, port, database, user, password, ssl } = decryptedConnectionInfo;\n            let connectionUrl = `postgresql://${user}:${password}@${host}:${port}/${database}?`;\n            if (ssl) {\n                connectionUrl += \"sslmode=require\";\n            }\n            return {\n                connectionUrl\n            };\n        }\n    },\n    // mysql\n    [_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.MYSQL]: {\n        sensitiveProps: [\n            \"password\"\n        ],\n        toIbisConnectionInfo (connectionInfo) {\n            const decryptedConnectionInfo = decryptConnectionInfo(_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.MYSQL, connectionInfo);\n            const { host, port, database, user, password } = decryptedConnectionInfo;\n            return {\n                host,\n                port,\n                database,\n                user,\n                password\n            };\n        }\n    },\n    // SQL Server\n    [_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.MSSQL]: {\n        sensitiveProps: [\n            \"password\"\n        ],\n        toIbisConnectionInfo (connectionInfo) {\n            const decryptedConnectionInfo = decryptConnectionInfo(_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.MSSQL, connectionInfo);\n            const { host, port, database, user, password, trustServerCertificate } = decryptedConnectionInfo;\n            return {\n                host,\n                port,\n                database,\n                user,\n                password,\n                ...trustServerCertificate && {\n                    kwargs: {\n                        trustServerCertificate: \"YES\"\n                    }\n                }\n            };\n        }\n    },\n    // Click House\n    [_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.CLICK_HOUSE]: {\n        sensitiveProps: [\n            \"password\"\n        ],\n        toIbisConnectionInfo (connectionInfo) {\n            const decryptedConnectionInfo = decryptConnectionInfo(_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.CLICK_HOUSE, connectionInfo);\n            const { host, port, database, user, password, ssl } = decryptedConnectionInfo;\n            let connectionUrl = `clickhouse://${user}:${password}@${host}:${port}/${database}?`;\n            if (ssl) {\n                connectionUrl += \"secure=1\";\n            }\n            return {\n                connectionUrl\n            };\n        }\n    },\n    [_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.TRINO]: {\n        sensitiveProps: [\n            \"password\"\n        ],\n        toIbisConnectionInfo (connectionInfo) {\n            const { host, password, port, schemas, username, ssl } = decryptConnectionInfo(_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.TRINO, connectionInfo);\n            // pick first schema from schemas\n            const [catalog, schema] = schemas.split(\",\")?.[0]?.split(\".\") ?? [];\n            if (!catalog || !schema) {\n                throw new Error(\"Invalid schema format, expected catalog.schema\");\n            }\n            return {\n                host: ssl ? `https://${host}` : `http://${host}`,\n                port,\n                catalog,\n                schema,\n                user: username,\n                password\n            };\n        },\n        toMultipleIbisConnectionInfos (connectionInfo) {\n            const { host, port, schemas, username, password, ssl } = decryptConnectionInfo(_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.TRINO, connectionInfo);\n            // Helper function to parse and validate schema\n            const parseSchema = (schemaStr)=>{\n                const trimmed = schemaStr.trim();\n                const [catalog, schema] = trimmed.split(\".\");\n                if (!catalog || !schema) {\n                    throw new Error(`Invalid schema format: \"${trimmed}\". Expected format: catalog.schema`);\n                }\n                return {\n                    catalog,\n                    schema\n                };\n            };\n            // schemas format will be `catalog.schema, catalog.schema, ...`\n            const schemasArray = schemas.split(\",\").filter(Boolean);\n            if (schemasArray.length === 0) {\n                throw new Error(\"No valid schemas provided. Expected format: catalog.schema[, catalog.schema, ...]\");\n            }\n            return schemasArray.map((schema)=>{\n                const { catalog, schema: schemaName } = parseSchema(schema);\n                return {\n                    host: ssl ? `https://${host}` : `http://${host}`,\n                    port,\n                    catalog,\n                    schema: schemaName,\n                    user: username,\n                    password\n                };\n            });\n        }\n    },\n    // Snowflake\n    [_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.SNOWFLAKE]: {\n        sensitiveProps: [\n            \"password\"\n        ],\n        toIbisConnectionInfo (connectionInfo) {\n            const decryptedConnectionInfo = decryptConnectionInfo(_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.SNOWFLAKE, connectionInfo);\n            const { user, password, account, database, schema } = decryptedConnectionInfo;\n            return {\n                user,\n                password,\n                account,\n                database,\n                schema\n            };\n        }\n    },\n    // DuckDB\n    [_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.DUCKDB]: {\n        sensitiveProps: [],\n        toIbisConnectionInfo (_connectionInfo) {\n            throw new Error(\"Not implemented\");\n        }\n    }\n};\nfunction decryptConnectionInfo(dataSourceType, connectionInfo) {\n    return dataSource[dataSourceType].sensitiveProps.reduce((acc, prop)=>{\n        const value = connectionInfo[prop];\n        if (value) {\n            const decryption = encryptor.decrypt(value);\n            const decryptedValue = JSON.parse(decryption)[prop];\n            return {\n                ...acc,\n                [prop]: decryptedValue\n            };\n        }\n        return acc;\n    }, connectionInfo);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU11RCxhQUFhaEUsVUFBVWlFLE9BQU8sQ0FBQ3hEO1lBQ3JDLE1BQU15RCxpQkFBaUJ0RCxLQUFLQyxLQUFLLENBQUNtRCxXQUFXLENBQUN4RCxLQUFLO1lBQ25ELE9BQU87Z0JBQUUsR0FBR0QsR0FBRztnQkFBRSxDQUFDQyxLQUFLLEVBQUUwRDtZQUFlO1FBQzFDO1FBQ0EsT0FBTzNEO0lBQ1QsR0FDQUo7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9kYXRhU291cmNlLnRzPzA5YzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgSWJpc0JpZ1F1ZXJ5Q29ubmVjdGlvbkluZm8sXG4gIEliaXNQb3N0Z3Jlc0Nvbm5lY3Rpb25JbmZvLFxuICBIb3N0QmFzZWRDb25uZWN0aW9uSW5mbyxcbiAgVXJsQmFzZWRDb25uZWN0aW9uSW5mbyxcbiAgSWJpc1Nub3dmbGFrZUNvbm5lY3Rpb25JbmZvLFxuICBJYmlzVHJpbm9Db25uZWN0aW9uSW5mbyxcbn0gZnJvbSAnLi9hZGFwdG9ycy9pYmlzQWRhcHRvcic7XG5pbXBvcnQge1xuICBCSUdfUVVFUllfQ09OTkVDVElPTl9JTkZPLFxuICBEVUNLREJfQ09OTkVDVElPTl9JTkZPLFxuICBNWVNRTF9DT05ORUNUSU9OX0lORk8sXG4gIFBPU1RHUkVTX0NPTk5FQ1RJT05fSU5GTyxcbiAgTVNfU1FMX0NPTk5FQ1RJT05fSU5GTyxcbiAgV1JFTl9BSV9DT05ORUNUSU9OX0lORk8sXG4gIENMSUNLX0hPVVNFX0NPTk5FQ1RJT05fSU5GTyxcbiAgVFJJTk9fQ09OTkVDVElPTl9JTkZPLFxuICBTTk9XRkxBS0VfQ09OTkVDVElPTl9JTkZPLFxufSBmcm9tICcuL3JlcG9zaXRvcmllcyc7XG5pbXBvcnQgeyBEYXRhU291cmNlTmFtZSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgRW5jcnlwdG9yIH0gZnJvbSAnLi91dGlscyc7XG5cbmNvbnN0IGNvbmZpZyA9IGdldENvbmZpZygpO1xuY29uc3QgZW5jcnlwdG9yID0gbmV3IEVuY3J5cHRvcihjb25maWcpO1xuXG5leHBvcnQgZnVuY3Rpb24gZW5jcnlwdENvbm5lY3Rpb25JbmZvKFxuICBkYXRhU291cmNlVHlwZTogRGF0YVNvdXJjZU5hbWUsXG4gIGNvbm5lY3Rpb25JbmZvOiBXUkVOX0FJX0NPTk5FQ1RJT05fSU5GTyxcbikge1xuICByZXR1cm4gZGF0YVNvdXJjZVtkYXRhU291cmNlVHlwZV0uc2Vuc2l0aXZlUHJvcHMucmVkdWNlKFxuICAgIChhY2MsIHByb3A6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBjb25uZWN0aW9uSW5mb1twcm9wXTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBjb25zdCBlbmNyeXB0aW9uID0gZW5jcnlwdG9yLmVuY3J5cHQoXG4gICAgICAgICAgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7IFtwcm9wXTogdmFsdWUgfSkpLFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4geyAuLi5hY2MsIFtwcm9wXTogZW5jcnlwdGlvbiB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LFxuICAgIGNvbm5lY3Rpb25JbmZvLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9JYmlzQ29ubmVjdGlvbkluZm8oZGF0YVNvdXJjZVR5cGUsIGNvbm5lY3Rpb25JbmZvKSB7XG4gIHJldHVybiBkYXRhU291cmNlW2RhdGFTb3VyY2VUeXBlXS50b0liaXNDb25uZWN0aW9uSW5mbyhjb25uZWN0aW9uSW5mbyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b011bHRpcGxlSWJpc0Nvbm5lY3Rpb25JbmZvcyhkYXRhU291cmNlVHlwZSwgY29ubmVjdGlvbkluZm8pIHtcbiAgaWYgKCFkYXRhU291cmNlW2RhdGFTb3VyY2VUeXBlXS50b011bHRpcGxlSWJpc0Nvbm5lY3Rpb25JbmZvcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBkYXRhU291cmNlW2RhdGFTb3VyY2VUeXBlXS50b011bHRpcGxlSWJpc0Nvbm5lY3Rpb25JbmZvcyhcbiAgICBjb25uZWN0aW9uSW5mbyxcbiAgKTtcbn1cblxuaW50ZXJmYWNlIElEYXRhU291cmNlQ29ubmVjdGlvbkluZm88QywgST4ge1xuICBzZW5zaXRpdmVQcm9wczogc3RyaW5nW107XG4gIHRvSWJpc0Nvbm5lY3Rpb25JbmZvKGNvbm5lY3Rpb25JbmZvOiBDKTogSTtcbiAgdG9NdWx0aXBsZUliaXNDb25uZWN0aW9uSW5mb3M/KGNvbm5lY3Rpb25JbmZvOiBDKTogSVtdO1xufVxuXG5jb25zdCBkYXRhU291cmNlID0ge1xuICAvLyBCaWdRdWVyeVxuICBbRGF0YVNvdXJjZU5hbWUuQklHX1FVRVJZXToge1xuICAgIHNlbnNpdGl2ZVByb3BzOiBbJ2NyZWRlbnRpYWxzJ10sXG4gICAgdG9JYmlzQ29ubmVjdGlvbkluZm8oY29ubmVjdGlvbkluZm8pIHtcbiAgICAgIGNvbnN0IGRlY3J5cHRlZENvbm5lY3Rpb25JbmZvID0gZGVjcnlwdENvbm5lY3Rpb25JbmZvKFxuICAgICAgICBEYXRhU291cmNlTmFtZS5CSUdfUVVFUlksXG4gICAgICAgIGNvbm5lY3Rpb25JbmZvLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHsgcHJvamVjdElkLCBkYXRhc2V0SWQsIGNyZWRlbnRpYWxzIH0gPVxuICAgICAgICBkZWNyeXB0ZWRDb25uZWN0aW9uSW5mbyBhcyBCSUdfUVVFUllfQ09OTkVDVElPTl9JTkZPO1xuICAgICAgY29uc3QgYmFzZTY0Q3JlZGVudGlhbHMgPSBCdWZmZXIuZnJvbShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbHMpLFxuICAgICAgKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgICBjb25zdCByZXM6IEliaXNCaWdRdWVyeUNvbm5lY3Rpb25JbmZvID0ge1xuICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWQsXG4gICAgICAgIGRhdGFzZXRfaWQ6IGRhdGFzZXRJZCxcbiAgICAgICAgY3JlZGVudGlhbHM6IGJhc2U2NENyZWRlbnRpYWxzLFxuICAgICAgfTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfSxcbiAgfSBhcyBJRGF0YVNvdXJjZUNvbm5lY3Rpb25JbmZvPFxuICAgIEJJR19RVUVSWV9DT05ORUNUSU9OX0lORk8sXG4gICAgSWJpc0JpZ1F1ZXJ5Q29ubmVjdGlvbkluZm9cbiAgPixcblxuICAvLyBQb3N0Z3Jlc1xuICBbRGF0YVNvdXJjZU5hbWUuUE9TVEdSRVNdOiB7XG4gICAgc2Vuc2l0aXZlUHJvcHM6IFsncGFzc3dvcmQnXSxcbiAgICB0b0liaXNDb25uZWN0aW9uSW5mbyhjb25uZWN0aW9uSW5mbykge1xuICAgICAgY29uc3QgZGVjcnlwdGVkQ29ubmVjdGlvbkluZm8gPSBkZWNyeXB0Q29ubmVjdGlvbkluZm8oXG4gICAgICAgIERhdGFTb3VyY2VOYW1lLlBPU1RHUkVTLFxuICAgICAgICBjb25uZWN0aW9uSW5mbyxcbiAgICAgICk7XG4gICAgICBjb25zdCB7IGhvc3QsIHBvcnQsIGRhdGFiYXNlLCB1c2VyLCBwYXNzd29yZCwgc3NsIH0gPVxuICAgICAgICBkZWNyeXB0ZWRDb25uZWN0aW9uSW5mbyBhcyBQT1NUR1JFU19DT05ORUNUSU9OX0lORk87XG4gICAgICBsZXQgY29ubmVjdGlvblVybCA9IGBwb3N0Z3Jlc3FsOi8vJHt1c2VyfToke3Bhc3N3b3JkfUAke2hvc3R9OiR7cG9ydH0vJHtkYXRhYmFzZX0/YDtcbiAgICAgIGlmIChzc2wpIHtcbiAgICAgICAgY29ubmVjdGlvblVybCArPSAnc3NsbW9kZT1yZXF1aXJlJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbm5lY3Rpb25VcmwsXG4gICAgICB9O1xuICAgIH0sXG4gIH0gYXMgSURhdGFTb3VyY2VDb25uZWN0aW9uSW5mbzxcbiAgICBQT1NUR1JFU19DT05ORUNUSU9OX0lORk8sXG4gICAgSWJpc1Bvc3RncmVzQ29ubmVjdGlvbkluZm9cbiAgPixcblxuICAvLyBteXNxbFxuICBbRGF0YVNvdXJjZU5hbWUuTVlTUUxdOiB7XG4gICAgc2Vuc2l0aXZlUHJvcHM6IFsncGFzc3dvcmQnXSxcbiAgICB0b0liaXNDb25uZWN0aW9uSW5mbyhjb25uZWN0aW9uSW5mbykge1xuICAgICAgY29uc3QgZGVjcnlwdGVkQ29ubmVjdGlvbkluZm8gPSBkZWNyeXB0Q29ubmVjdGlvbkluZm8oXG4gICAgICAgIERhdGFTb3VyY2VOYW1lLk1ZU1FMLFxuICAgICAgICBjb25uZWN0aW9uSW5mbyxcbiAgICAgICk7XG4gICAgICBjb25zdCB7IGhvc3QsIHBvcnQsIGRhdGFiYXNlLCB1c2VyLCBwYXNzd29yZCB9ID1cbiAgICAgICAgZGVjcnlwdGVkQ29ubmVjdGlvbkluZm8gYXMgTVlTUUxfQ09OTkVDVElPTl9JTkZPO1xuICAgICAgcmV0dXJuIHsgaG9zdCwgcG9ydCwgZGF0YWJhc2UsIHVzZXIsIHBhc3N3b3JkIH07XG4gICAgfSxcbiAgfSBhcyBJRGF0YVNvdXJjZUNvbm5lY3Rpb25JbmZvPFxuICAgIE1ZU1FMX0NPTk5FQ1RJT05fSU5GTyxcbiAgICBIb3N0QmFzZWRDb25uZWN0aW9uSW5mb1xuICA+LFxuXG4gIC8vIFNRTCBTZXJ2ZXJcbiAgW0RhdGFTb3VyY2VOYW1lLk1TU1FMXToge1xuICAgIHNlbnNpdGl2ZVByb3BzOiBbJ3Bhc3N3b3JkJ10sXG4gICAgdG9JYmlzQ29ubmVjdGlvbkluZm8oY29ubmVjdGlvbkluZm8pIHtcbiAgICAgIGNvbnN0IGRlY3J5cHRlZENvbm5lY3Rpb25JbmZvID0gZGVjcnlwdENvbm5lY3Rpb25JbmZvKFxuICAgICAgICBEYXRhU291cmNlTmFtZS5NU1NRTCxcbiAgICAgICAgY29ubmVjdGlvbkluZm8sXG4gICAgICApO1xuICAgICAgY29uc3QgeyBob3N0LCBwb3J0LCBkYXRhYmFzZSwgdXNlciwgcGFzc3dvcmQsIHRydXN0U2VydmVyQ2VydGlmaWNhdGUgfSA9XG4gICAgICAgIGRlY3J5cHRlZENvbm5lY3Rpb25JbmZvIGFzIE1TX1NRTF9DT05ORUNUSU9OX0lORk87XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhvc3QsXG4gICAgICAgIHBvcnQsXG4gICAgICAgIGRhdGFiYXNlLFxuICAgICAgICB1c2VyLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgLi4uKHRydXN0U2VydmVyQ2VydGlmaWNhdGUgJiYge1xuICAgICAgICAgIGt3YXJnczogeyB0cnVzdFNlcnZlckNlcnRpZmljYXRlOiAnWUVTJyB9LFxuICAgICAgICB9KSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSBhcyBJRGF0YVNvdXJjZUNvbm5lY3Rpb25JbmZvPFxuICAgIE1TX1NRTF9DT05ORUNUSU9OX0lORk8sXG4gICAgSG9zdEJhc2VkQ29ubmVjdGlvbkluZm9cbiAgPixcblxuICAvLyBDbGljayBIb3VzZVxuICBbRGF0YVNvdXJjZU5hbWUuQ0xJQ0tfSE9VU0VdOiB7XG4gICAgc2Vuc2l0aXZlUHJvcHM6IFsncGFzc3dvcmQnXSxcbiAgICB0b0liaXNDb25uZWN0aW9uSW5mbyhjb25uZWN0aW9uSW5mbykge1xuICAgICAgY29uc3QgZGVjcnlwdGVkQ29ubmVjdGlvbkluZm8gPSBkZWNyeXB0Q29ubmVjdGlvbkluZm8oXG4gICAgICAgIERhdGFTb3VyY2VOYW1lLkNMSUNLX0hPVVNFLFxuICAgICAgICBjb25uZWN0aW9uSW5mbyxcbiAgICAgICk7XG4gICAgICBjb25zdCB7IGhvc3QsIHBvcnQsIGRhdGFiYXNlLCB1c2VyLCBwYXNzd29yZCwgc3NsIH0gPVxuICAgICAgICBkZWNyeXB0ZWRDb25uZWN0aW9uSW5mbyBhcyBDTElDS19IT1VTRV9DT05ORUNUSU9OX0lORk87XG4gICAgICBsZXQgY29ubmVjdGlvblVybCA9IGBjbGlja2hvdXNlOi8vJHt1c2VyfToke3Bhc3N3b3JkfUAke2hvc3R9OiR7cG9ydH0vJHtkYXRhYmFzZX0/YDtcbiAgICAgIGlmIChzc2wpIHtcbiAgICAgICAgY29ubmVjdGlvblVybCArPSAnc2VjdXJlPTEnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgY29ubmVjdGlvblVybCB9O1xuICAgIH0sXG4gIH0gYXMgSURhdGFTb3VyY2VDb25uZWN0aW9uSW5mbzxcbiAgICBDTElDS19IT1VTRV9DT05ORUNUSU9OX0lORk8sXG4gICAgVXJsQmFzZWRDb25uZWN0aW9uSW5mb1xuICA+LFxuICBbRGF0YVNvdXJjZU5hbWUuVFJJTk9dOiB7XG4gICAgc2Vuc2l0aXZlUHJvcHM6IFsncGFzc3dvcmQnXSxcbiAgICB0b0liaXNDb25uZWN0aW9uSW5mbyhjb25uZWN0aW9uSW5mbykge1xuICAgICAgY29uc3QgeyBob3N0LCBwYXNzd29yZCwgcG9ydCwgc2NoZW1hcywgdXNlcm5hbWUsIHNzbCB9ID1cbiAgICAgICAgZGVjcnlwdENvbm5lY3Rpb25JbmZvKFxuICAgICAgICAgIERhdGFTb3VyY2VOYW1lLlRSSU5PLFxuICAgICAgICAgIGNvbm5lY3Rpb25JbmZvLFxuICAgICAgICApIGFzIFRSSU5PX0NPTk5FQ1RJT05fSU5GTztcbiAgICAgIC8vIHBpY2sgZmlyc3Qgc2NoZW1hIGZyb20gc2NoZW1hc1xuICAgICAgY29uc3QgW2NhdGFsb2csIHNjaGVtYV0gPSBzY2hlbWFzLnNwbGl0KCcsJyk/LlswXT8uc3BsaXQoJy4nKSA/PyBbXTtcbiAgICAgIGlmICghY2F0YWxvZyB8fCAhc2NoZW1hKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzY2hlbWEgZm9ybWF0LCBleHBlY3RlZCBjYXRhbG9nLnNjaGVtYScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaG9zdDogc3NsID8gYGh0dHBzOi8vJHtob3N0fWAgOiBgaHR0cDovLyR7aG9zdH1gLFxuICAgICAgICBwb3J0LFxuICAgICAgICBjYXRhbG9nLFxuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHVzZXI6IHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH07XG4gICAgfSxcbiAgICB0b011bHRpcGxlSWJpc0Nvbm5lY3Rpb25JbmZvcyhjb25uZWN0aW9uSW5mbykge1xuICAgICAgY29uc3QgeyBob3N0LCBwb3J0LCBzY2hlbWFzLCB1c2VybmFtZSwgcGFzc3dvcmQsIHNzbCB9ID1cbiAgICAgICAgZGVjcnlwdENvbm5lY3Rpb25JbmZvKFxuICAgICAgICAgIERhdGFTb3VyY2VOYW1lLlRSSU5PLFxuICAgICAgICAgIGNvbm5lY3Rpb25JbmZvLFxuICAgICAgICApIGFzIFRSSU5PX0NPTk5FQ1RJT05fSU5GTztcblxuICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIGFuZCB2YWxpZGF0ZSBzY2hlbWFcbiAgICAgIGNvbnN0IHBhcnNlU2NoZW1hID0gKHNjaGVtYVN0cjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyaW1tZWQgPSBzY2hlbWFTdHIudHJpbSgpO1xuICAgICAgICBjb25zdCBbY2F0YWxvZywgc2NoZW1hXSA9IHRyaW1tZWQuc3BsaXQoJy4nKTtcbiAgICAgICAgaWYgKCFjYXRhbG9nIHx8ICFzY2hlbWEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgSW52YWxpZCBzY2hlbWEgZm9ybWF0OiBcIiR7dHJpbW1lZH1cIi4gRXhwZWN0ZWQgZm9ybWF0OiBjYXRhbG9nLnNjaGVtYWAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBjYXRhbG9nLCBzY2hlbWEgfTtcbiAgICAgIH07XG5cbiAgICAgIC8vIHNjaGVtYXMgZm9ybWF0IHdpbGwgYmUgYGNhdGFsb2cuc2NoZW1hLCBjYXRhbG9nLnNjaGVtYSwgLi4uYFxuICAgICAgY29uc3Qgc2NoZW1hc0FycmF5ID0gc2NoZW1hcy5zcGxpdCgnLCcpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIGlmIChzY2hlbWFzQXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnTm8gdmFsaWQgc2NoZW1hcyBwcm92aWRlZC4gRXhwZWN0ZWQgZm9ybWF0OiBjYXRhbG9nLnNjaGVtYVssIGNhdGFsb2cuc2NoZW1hLCAuLi5dJyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNjaGVtYXNBcnJheS5tYXAoKHNjaGVtYSkgPT4ge1xuICAgICAgICBjb25zdCB7IGNhdGFsb2csIHNjaGVtYTogc2NoZW1hTmFtZSB9ID0gcGFyc2VTY2hlbWEoc2NoZW1hKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhvc3Q6IHNzbCA/IGBodHRwczovLyR7aG9zdH1gIDogYGh0dHA6Ly8ke2hvc3R9YCxcbiAgICAgICAgICBwb3J0LFxuICAgICAgICAgIGNhdGFsb2csXG4gICAgICAgICAgc2NoZW1hOiBzY2hlbWFOYW1lLFxuICAgICAgICAgIHVzZXI6IHVzZXJuYW1lLFxuICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSxcbiAgfSBhcyBJRGF0YVNvdXJjZUNvbm5lY3Rpb25JbmZvPFxuICAgIFRSSU5PX0NPTk5FQ1RJT05fSU5GTyxcbiAgICBJYmlzVHJpbm9Db25uZWN0aW9uSW5mb1xuICA+LFxuXG4gIC8vIFNub3dmbGFrZVxuICBbRGF0YVNvdXJjZU5hbWUuU05PV0ZMQUtFXToge1xuICAgIHNlbnNpdGl2ZVByb3BzOiBbJ3Bhc3N3b3JkJ10sXG4gICAgdG9JYmlzQ29ubmVjdGlvbkluZm8oY29ubmVjdGlvbkluZm8pIHtcbiAgICAgIGNvbnN0IGRlY3J5cHRlZENvbm5lY3Rpb25JbmZvID0gZGVjcnlwdENvbm5lY3Rpb25JbmZvKFxuICAgICAgICBEYXRhU291cmNlTmFtZS5TTk9XRkxBS0UsXG4gICAgICAgIGNvbm5lY3Rpb25JbmZvLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHsgdXNlciwgcGFzc3dvcmQsIGFjY291bnQsIGRhdGFiYXNlLCBzY2hlbWEgfSA9XG4gICAgICAgIGRlY3J5cHRlZENvbm5lY3Rpb25JbmZvIGFzIFNOT1dGTEFLRV9DT05ORUNUSU9OX0lORk87XG4gICAgICByZXR1cm4geyB1c2VyLCBwYXNzd29yZCwgYWNjb3VudCwgZGF0YWJhc2UsIHNjaGVtYSB9O1xuICAgIH0sXG4gIH0gYXMgSURhdGFTb3VyY2VDb25uZWN0aW9uSW5mbzxcbiAgICBTTk9XRkxBS0VfQ09OTkVDVElPTl9JTkZPLFxuICAgIEliaXNTbm93Zmxha2VDb25uZWN0aW9uSW5mb1xuICA+LFxuXG4gIC8vIER1Y2tEQlxuICBbRGF0YVNvdXJjZU5hbWUuRFVDS0RCXToge1xuICAgIHNlbnNpdGl2ZVByb3BzOiBbXSxcbiAgICB0b0liaXNDb25uZWN0aW9uSW5mbyhfY29ubmVjdGlvbkluZm8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7XG4gICAgfSxcbiAgfSBhcyBJRGF0YVNvdXJjZUNvbm5lY3Rpb25JbmZvPERVQ0tEQl9DT05ORUNUSU9OX0lORk8sIHVua25vd24+LFxufTtcblxuZnVuY3Rpb24gZGVjcnlwdENvbm5lY3Rpb25JbmZvKFxuICBkYXRhU291cmNlVHlwZTogRGF0YVNvdXJjZU5hbWUsXG4gIGNvbm5lY3Rpb25JbmZvOiBXUkVOX0FJX0NPTk5FQ1RJT05fSU5GTyxcbik6IFdSRU5fQUlfQ09OTkVDVElPTl9JTkZPIHtcbiAgcmV0dXJuIGRhdGFTb3VyY2VbZGF0YVNvdXJjZVR5cGVdLnNlbnNpdGl2ZVByb3BzLnJlZHVjZShcbiAgICAoYWNjLCBwcm9wOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY29ubmVjdGlvbkluZm9bcHJvcF07XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgY29uc3QgZGVjcnlwdGlvbiA9IGVuY3J5cHRvci5kZWNyeXB0KHZhbHVlKTtcbiAgICAgICAgY29uc3QgZGVjcnlwdGVkVmFsdWUgPSBKU09OLnBhcnNlKGRlY3J5cHRpb24pW3Byb3BdO1xuICAgICAgICByZXR1cm4geyAuLi5hY2MsIFtwcm9wXTogZGVjcnlwdGVkVmFsdWUgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICBjb25uZWN0aW9uSW5mbyxcbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJEYXRhU291cmNlTmFtZSIsImdldENvbmZpZyIsIkVuY3J5cHRvciIsImNvbmZpZyIsImVuY3J5cHRvciIsImVuY3J5cHRDb25uZWN0aW9uSW5mbyIsImRhdGFTb3VyY2VUeXBlIiwiY29ubmVjdGlvbkluZm8iLCJkYXRhU291cmNlIiwic2Vuc2l0aXZlUHJvcHMiLCJyZWR1Y2UiLCJhY2MiLCJwcm9wIiwidmFsdWUiLCJlbmNyeXB0aW9uIiwiZW5jcnlwdCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInRvSWJpc0Nvbm5lY3Rpb25JbmZvIiwidG9NdWx0aXBsZUliaXNDb25uZWN0aW9uSW5mb3MiLCJCSUdfUVVFUlkiLCJkZWNyeXB0ZWRDb25uZWN0aW9uSW5mbyIsImRlY3J5cHRDb25uZWN0aW9uSW5mbyIsInByb2plY3RJZCIsImRhdGFzZXRJZCIsImNyZWRlbnRpYWxzIiwiYmFzZTY0Q3JlZGVudGlhbHMiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJyZXMiLCJwcm9qZWN0X2lkIiwiZGF0YXNldF9pZCIsIlBPU1RHUkVTIiwiaG9zdCIsInBvcnQiLCJkYXRhYmFzZSIsInVzZXIiLCJwYXNzd29yZCIsInNzbCIsImNvbm5lY3Rpb25VcmwiLCJNWVNRTCIsIk1TU1FMIiwidHJ1c3RTZXJ2ZXJDZXJ0aWZpY2F0ZSIsImt3YXJncyIsIkNMSUNLX0hPVVNFIiwiVFJJTk8iLCJzY2hlbWFzIiwidXNlcm5hbWUiLCJjYXRhbG9nIiwic2NoZW1hIiwic3BsaXQiLCJFcnJvciIsInBhcnNlU2NoZW1hIiwic2NoZW1hU3RyIiwidHJpbW1lZCIsInRyaW0iLCJzY2hlbWFzQXJyYXkiLCJmaWx0ZXIiLCJCb29sZWFuIiwibGVuZ3RoIiwibWFwIiwic2NoZW1hTmFtZSIsIlNOT1dGTEFLRSIsImFjY291bnQiLCJEVUNLREIiLCJfY29ubmVjdGlvbkluZm8iLCJkZWNyeXB0aW9uIiwiZGVjcnlwdCIsImRlY3J5cHRlZFZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/dataSource.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/data/index.ts":
/*!*****************************************!*\
  !*** ./src/apollo/server/data/index.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sample__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sample */ \"(api)/./src/apollo/server/data/sample.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _sample__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _sample__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./type */ \"(api)/./src/apollo/server/data/type.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _type__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _type__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9kYXRhL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL2RhdGEvaW5kZXgudHM/ZTYzNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL3NhbXBsZSc7XG5leHBvcnQgKiBmcm9tICcuL3R5cGUnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/data/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/data/sample.ts":
/*!******************************************!*\
  !*** ./src/apollo/server/data/sample.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildInitSql: () => (/* binding */ buildInitSql),\n/* harmony export */   getRelations: () => (/* binding */ getRelations),\n/* harmony export */   getSampleAskQuestions: () => (/* binding */ getSampleAskQuestions),\n/* harmony export */   sampleDatasets: () => (/* binding */ sampleDatasets)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ \"(api)/./src/apollo/server/types/index.ts\");\n/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./type */ \"(api)/./src/apollo/server/data/type.ts\");\n\n\nconst sampleDatasets = {\n    hr: {\n        name: _type__WEBPACK_IMPORTED_MODULE_1__.SampleDatasetName.HR,\n        tables: [\n            {\n                tableName: \"salaries\",\n                filePath: \"https://assets.getwren.ai/sample_data/employees/salaries.parquet\",\n                schema: [\n                    {\n                        columnName: \"emp_no\",\n                        dataType: \"INTEGER\"\n                    },\n                    {\n                        columnName: \"salary\",\n                        dataType: \"INTEGER\"\n                    },\n                    {\n                        columnName: \"from_date\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"to_date\",\n                        dataType: \"DATE\"\n                    }\n                ],\n                columns: [\n                    {\n                        name: \"emp_no\",\n                        properties: {\n                            description: \"The employee number\",\n                            displayName: \"emp_no\"\n                        }\n                    },\n                    {\n                        name: \"salary\",\n                        properties: {\n                            description: \"The salary of the employee.\",\n                            displayName: \"salary\"\n                        }\n                    },\n                    {\n                        name: \"from_date\",\n                        properties: {\n                            description: \"The start date of the salary period.\",\n                            displayName: \"from_date\"\n                        }\n                    },\n                    {\n                        name: \"to_date\",\n                        properties: {\n                            description: \"The end date of the salary period.\",\n                            displayName: \"to_date\"\n                        }\n                    }\n                ],\n                properties: {\n                    description: \"Tracks the salary of employees, including the period during which each salary was valid.\",\n                    displayName: \"salaries\"\n                }\n            },\n            {\n                tableName: \"titles\",\n                filePath: \"https://assets.getwren.ai/sample_data/employees/titles.parquet\",\n                schema: [\n                    {\n                        columnName: \"emp_no\",\n                        dataType: \"INTEGER\"\n                    },\n                    {\n                        columnName: \"title\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"from_date\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"to_date\",\n                        dataType: \"DATE\"\n                    }\n                ],\n                columns: [\n                    {\n                        name: \"emp_no\",\n                        properties: {\n                            description: \"The employee number\",\n                            displayName: \"emp_no\"\n                        }\n                    },\n                    {\n                        name: \"title\",\n                        properties: {\n                            description: \"The title or position held by the employee. Limited to a maximum of 50 characters.\",\n                            displayName: \"title\"\n                        }\n                    },\n                    {\n                        name: \"from_date\",\n                        properties: {\n                            description: \"The start date when the employee held this title\",\n                            displayName: \"from_date\"\n                        }\n                    },\n                    {\n                        name: \"to_date\",\n                        properties: {\n                            description: \"The end date when the employee held this title. This can be NULL if the employee currently holds the title.\",\n                            displayName: \"to_date\"\n                        }\n                    }\n                ],\n                properties: {\n                    description: \"Tracks the titles (positions) held by employees, including the period during which they held each title.\",\n                    displayName: \"titles\"\n                }\n            },\n            {\n                tableName: \"dept_emp\",\n                filePath: \"https://assets.getwren.ai/sample_data/employees/dept_emp.parquet\",\n                schema: [\n                    {\n                        columnName: \"emp_no\",\n                        dataType: \"INTEGER\"\n                    },\n                    {\n                        columnName: \"dept_no\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"from_date\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"to_date\",\n                        dataType: \"DATE\"\n                    }\n                ],\n                columns: [\n                    {\n                        name: \"emp_no\",\n                        properties: {\n                            description: \"The employee number.\",\n                            displayName: \"emp_no\"\n                        }\n                    },\n                    {\n                        name: \"dept_no\",\n                        properties: {\n                            description: \"The department number the employee is associated with, referencing the dept_no in the departments table.\",\n                            displayName: \"dept_no\"\n                        }\n                    },\n                    {\n                        name: \"from_date\",\n                        properties: {\n                            description: \"The start date of the employee's association with the department.\",\n                            displayName: \"from_date\"\n                        }\n                    },\n                    {\n                        name: \"to_date\",\n                        properties: {\n                            description: \"The end date of the employee's association with the department\",\n                            displayName: \"to_date\"\n                        }\n                    }\n                ],\n                properties: {\n                    displayName: \"dept_emp\"\n                }\n            },\n            {\n                tableName: \"departments\",\n                filePath: \"https://assets.getwren.ai/sample_data/employees/departments.parquet\",\n                schema: [\n                    {\n                        columnName: \"dept_name\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"dept_no\",\n                        dataType: \"VARCHAR\"\n                    }\n                ],\n                columns: [\n                    {\n                        name: \"dept_name\",\n                        properties: {\n                            description: \"The name of the department. Limited to a maximum of 40 characters. This column is also unique across the table, ensuring no two departments share the same name\",\n                            displayName: \"dept_name\"\n                        }\n                    },\n                    {\n                        name: \"dept_no\",\n                        properties: {\n                            description: \"A unique identifier for each department. It serves as the primary key of the table.\",\n                            displayName: \"dept_no\"\n                        }\n                    }\n                ],\n                properties: {\n                    displayName: \"departments\"\n                }\n            },\n            {\n                tableName: \"employees\",\n                filePath: \"https://assets.getwren.ai/sample_data/employees/employees.parquet\",\n                schema: [\n                    {\n                        columnName: \"birth_date\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"first_name\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"last_name\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"gender\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"hire_date\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"emp_no\",\n                        dataType: \"INTEGER\"\n                    }\n                ],\n                columns: [\n                    {\n                        name: \"birth_date\",\n                        properties: {\n                            description: \"The birth date of the employee.\",\n                            displayName: \"birth_date\"\n                        }\n                    },\n                    {\n                        name: \"first_name\",\n                        properties: {\n                            description: \"The first name of the employee. Limited to a maximum of 14 characters.\",\n                            displayName: \"first_name\"\n                        }\n                    },\n                    {\n                        name: \"last_name\",\n                        properties: {\n                            description: \"The last name of the employee. Limited to a maximum of 16 characters.\",\n                            displayName: \"last_name\"\n                        }\n                    },\n                    {\n                        name: \"gender\",\n                        properties: {\n                            description: \"The gender of the employee, with possible values 'M' (Male) or 'F' (Female).\",\n                            displayName: \"gender\"\n                        }\n                    },\n                    {\n                        name: \"hire_date\",\n                        properties: {\n                            description: \"The date when the employee was hired.\",\n                            displayName: \"hire_date\"\n                        }\n                    },\n                    {\n                        name: \"emp_no\",\n                        properties: {\n                            description: \"A unique identifier for each employee. It serves as the primary key of the table\",\n                            displayName: \"emp_no\"\n                        }\n                    }\n                ],\n                properties: {\n                    description: \"Stores basic information about employees such as their employee number, name, gender, birth date, and hire date\",\n                    displayName: \"employees\"\n                }\n            },\n            {\n                tableName: \"dept_manager\",\n                filePath: \"https://assets.getwren.ai/sample_data/employees/dept_manager.parquet\",\n                schema: [\n                    {\n                        columnName: \"from_date\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"to_date\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"emp_no\",\n                        dataType: \"INTEGER\"\n                    },\n                    {\n                        columnName: \"dept_no\",\n                        dataType: \"VARCHAR\"\n                    }\n                ],\n                columns: [\n                    {\n                        name: \"from_date\",\n                        properties: {\n                            description: \"The start date of the employee’s managerial role in the department.\",\n                            displayName: \"from_date\"\n                        }\n                    },\n                    {\n                        name: \"to_date\",\n                        properties: {\n                            description: \"The end date of the employee’s managerial role in the department.\",\n                            displayName: \"to_date\"\n                        }\n                    },\n                    {\n                        name: \"emp_no\",\n                        properties: {\n                            description: \"The employee number of the department manager\",\n                            displayName: \"emp_no\"\n                        }\n                    },\n                    {\n                        name: \"dept_no\",\n                        properties: {\n                            description: \"The department number that the manager is assigned to, referencing the dept_no in the departments table.\",\n                            displayName: \"dept_no\"\n                        }\n                    }\n                ],\n                properties: {\n                    description: \"Tracks the assignment of managers to departments, including the period during which they managed a department\",\n                    displayName: \"dept_manager\"\n                }\n            }\n        ],\n        relations: [\n            {\n                fromModelName: \"employees\",\n                fromColumnName: \"emp_no\",\n                toModelName: \"titles\",\n                toColumnName: \"emp_no\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY,\n                description: \"Each entry represents a title held by an employee during a specific time period.\"\n            },\n            {\n                fromModelName: \"departments\",\n                fromColumnName: \"dept_no\",\n                toModelName: \"dept_emp\",\n                toColumnName: \"dept_no\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            {\n                fromModelName: \"employees\",\n                fromColumnName: \"emp_no\",\n                toModelName: \"salaries\",\n                toColumnName: \"emp_no\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            {\n                fromModelName: \"dept_manager\",\n                fromColumnName: \"emp_no\",\n                toModelName: \"employees\",\n                toColumnName: \"emp_no\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.MANY_TO_ONE\n            },\n            {\n                fromModelName: \"dept_emp\",\n                fromColumnName: \"emp_no\",\n                toModelName: \"employees\",\n                toColumnName: \"emp_no\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.MANY_TO_ONE,\n                description: \"meaning an employee can be associated with multiple departments, titles, and salaries over time.\"\n            },\n            {\n                fromModelName: \"departments\",\n                fromColumnName: \"dept_no\",\n                toModelName: \"dept_manager\",\n                toColumnName: \"dept_no\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            }\n        ],\n        questions: [\n            {\n                question: \"What is the average salary for each position?\",\n                label: \"Aggregation\"\n            },\n            {\n                question: \"Compare the average salary of male and female employees in each department.\",\n                label: \"Comparison\"\n            },\n            {\n                question: \"What are the names of the managers and the departments they manage?\",\n                label: \"Associating\"\n            }\n        ]\n    },\n    music: {\n        name: _type__WEBPACK_IMPORTED_MODULE_1__.SampleDatasetName.MUSIC,\n        tables: [\n            {\n                tableName: \"album\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/Music/Album.csv\",\n                schema: [\n                    {\n                        columnName: \"AlbumId\",\n                        dataType: \"INT\"\n                    },\n                    {\n                        columnName: \"Title\",\n                        dataType: \"varchar\"\n                    },\n                    {\n                        columnName: \"ArtistId\",\n                        dataType: \"INT\"\n                    }\n                ]\n            },\n            {\n                tableName: \"artist\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/Music/Artist.csv\",\n                schema: [\n                    {\n                        columnName: \"ArtistId\",\n                        dataType: \"INT\"\n                    },\n                    {\n                        columnName: \"Name\",\n                        dataType: \"varchar\"\n                    }\n                ]\n            },\n            {\n                tableName: \"customer\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/Music/Customer.csv\",\n                schema: [\n                    {\n                        columnName: \"CustomerId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FirstName\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"LastName\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Company\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Address\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"City\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"State\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Country\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"PostalCode\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Phone\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Fax\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Email\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"SupportRepId\",\n                        dataType: \"BIGINT\"\n                    }\n                ]\n            },\n            {\n                tableName: \"genre\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/Music/Genre.csv\",\n                schema: [\n                    {\n                        columnName: \"GenreId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"Name\",\n                        dataType: \"VARCHAR\"\n                    }\n                ]\n            },\n            {\n                tableName: \"invoice\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/Music/Invoice.csv\",\n                schema: [\n                    {\n                        columnName: \"InvoiceId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"CustomerId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"InvoiceDate\",\n                        dataType: \"Date\"\n                    },\n                    {\n                        columnName: \"BillingAddress\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"BillingCity\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"BillingState\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"BillingCountry\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"BillingPostalCode\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Total\",\n                        dataType: \"DOUBLE\"\n                    }\n                ]\n            },\n            {\n                tableName: \"invoiceLine\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/Music/InvoiceLine.csv\",\n                schema: [\n                    {\n                        columnName: \"InvoiceLineId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"InvoiceId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TrackId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"UnitPrice\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"Quantity\",\n                        dataType: \"BIGINT\"\n                    }\n                ]\n            },\n            {\n                tableName: \"track\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/Music/Track.csv\",\n                schema: [\n                    {\n                        columnName: \"TrackId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"Name\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"AlbumId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"MediaTypeId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"GenreId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"Composer\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Milliseconds\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"Bytes\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"UnitPrice\",\n                        dataType: \"DOUBLE\"\n                    }\n                ]\n            }\n        ],\n        questions: [\n            {\n                question: \"What are the top 5 selling albums in the US?\",\n                label: \"Ranking\"\n            },\n            {\n                question: \"What is the total revenue generated from each genre?\",\n                label: \"Aggregation\"\n            },\n            {\n                question: \"Which customers have made purchases of tracks from albums in each genre?\",\n                label: \"General\"\n            }\n        ],\n        relations: [\n            {\n                fromModelName: \"album\",\n                fromColumnName: \"ArtistId\",\n                toModelName: \"artist\",\n                toColumnName: \"ArtistId\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.MANY_TO_ONE\n            },\n            {\n                fromModelName: \"customer\",\n                fromColumnName: \"CustomerId\",\n                toModelName: \"invoice\",\n                toColumnName: \"CustomerId\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            {\n                fromModelName: \"genre\",\n                fromColumnName: \"GenreId\",\n                toModelName: \"track\",\n                toColumnName: \"GenreId\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            {\n                fromModelName: \"invoice\",\n                fromColumnName: \"InvoiceId\",\n                toModelName: \"invoiceLine\",\n                toColumnName: \"InvoiceId\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            {\n                fromModelName: \"track\",\n                fromColumnName: \"TrackId\",\n                toModelName: \"invoiceLine\",\n                toColumnName: \"TrackId\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            // album -> track\n            {\n                fromModelName: \"album\",\n                fromColumnName: \"AlbumId\",\n                toModelName: \"track\",\n                toColumnName: \"AlbumId\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            }\n        ]\n    },\n    ecommerce: {\n        name: _type__WEBPACK_IMPORTED_MODULE_1__.SampleDatasetName.ECOMMERCE,\n        tables: [\n            {\n                tableName: \"olist_customers_dataset\",\n                primaryKey: \"customer_id\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/olist_customers_dataset.parquet\",\n                properties: {\n                    displayName: \"customers\"\n                },\n                columns: [\n                    {\n                        name: \"customer_city\",\n                        properties: {\n                            description: \"Name of the city where the customer is located\",\n                            displayName: \"customer_city\"\n                        }\n                    },\n                    {\n                        name: \"customer_id\",\n                        properties: {\n                            description: null,\n                            displayName: \"customer_id\"\n                        }\n                    },\n                    {\n                        name: \"customer_state\",\n                        properties: {\n                            description: \"Name of the state where the customer is located\",\n                            displayName: \"customer_state\"\n                        }\n                    },\n                    {\n                        name: \"customer_unique_id\",\n                        properties: {\n                            description: \"Unique id of the customer\",\n                            displayName: \"customer_unique_id\"\n                        }\n                    },\n                    {\n                        name: \"customer_zip_code_prefix\",\n                        properties: {\n                            description: \"First 5 digits of customer zip code\",\n                            displayName: \"customer_zip_code_prefix\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"customer_city\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"customer_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"customer_state\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"customer_unique_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"customer_zip_code_prefix\",\n                        dataType: \"VARCHAR\"\n                    }\n                ]\n            },\n            {\n                tableName: \"olist_order_items_dataset\",\n                primaryKey: \"order_item_id\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/olist_order_items_dataset.parquet\",\n                properties: {\n                    displayName: \"order items\",\n                    description: \"This table contains the information related to a specific order containing its shipping cost, products, cost, number of order items, and the seller.\"\n                },\n                columns: [\n                    {\n                        name: \"freight_value\",\n                        properties: {\n                            description: \"Cost of shipping associated with the specific order item\",\n                            displayName: \"freight_value\"\n                        }\n                    },\n                    {\n                        name: \"order_id\",\n                        properties: {\n                            description: \"Unique identifier for the order across the platform\",\n                            displayName: \"order_id\"\n                        }\n                    },\n                    {\n                        name: \"order_item_id\",\n                        properties: {\n                            description: \"Unique identifier for each item within a specific order\",\n                            displayName: \"order_item_id\"\n                        }\n                    },\n                    {\n                        name: \"price\",\n                        properties: {\n                            description: \"Price of the individual item within the order\",\n                            displayName: \"price\"\n                        }\n                    },\n                    {\n                        name: \"product_id\",\n                        properties: {\n                            description: \"Unique identifier for the product sold in the order.\",\n                            displayName: \"product_id\"\n                        }\n                    },\n                    {\n                        name: \"seller_id\",\n                        properties: {\n                            description: \"Unique identifier of the seller who fulfilled the order item.\",\n                            displayName: \"seller_id\"\n                        }\n                    },\n                    {\n                        name: \"shipping_limit_date\",\n                        properties: {\n                            description: \"Deadline for the order item to be shipped by the seller.\",\n                            displayName: \"shipping_limit_date\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"freight_value\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"order_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"order_item_id\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"price\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"product_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"seller_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"shipping_limit_date\",\n                        dataType: \"TIMESTAMP\"\n                    }\n                ]\n            },\n            {\n                tableName: \"olist_orders_dataset\",\n                primaryKey: \"order_id\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/olist_orders_dataset.parquet\",\n                properties: {\n                    displayName: \"orders\",\n                    description: \"This table contains detailed information about customer orders, including timestamps for various stages of the order process (approval, shipping, delivery), as well as the order status and customer identification. It helps track the lifecycle of an order from purchase to delivery.\"\n                },\n                columns: [\n                    {\n                        name: \"customer_id\",\n                        properties: {\n                            description: \"Unique identifier for the customer who placed the order.\",\n                            displayName: \"customer_id\"\n                        }\n                    },\n                    {\n                        name: \"order_approved_at\",\n                        properties: {\n                            description: \"Date and time when the order was approved for processing.\",\n                            displayName: \"order_approved_at\"\n                        }\n                    },\n                    {\n                        name: \"order_delivered_carrier_date\",\n                        properties: {\n                            description: \"Date when the order was handed over to the carrier or freight forwarder for delivery.\",\n                            displayName: \"order_delivered_carrier_date\"\n                        }\n                    },\n                    {\n                        name: \"order_delivered_customer_date\",\n                        properties: {\n                            description: \"Date when the order was delivered to the customer.\",\n                            displayName: \"order_delivered_customer_date\"\n                        }\n                    },\n                    {\n                        name: \"order_estimated_delivery_date\",\n                        properties: {\n                            description: \"Expected delivery date based on the initial estimate.\",\n                            displayName: \"order_estimated_delivery_date\"\n                        }\n                    },\n                    {\n                        name: \"order_id\",\n                        properties: {\n                            description: \"Unique identifier for the specific order\",\n                            displayName: \"order_id\"\n                        }\n                    },\n                    {\n                        name: \"order_purchase_timestamp\",\n                        properties: {\n                            description: \"Date and time when the order was placed by the customer.\",\n                            displayName: \"order_purchase_timestamp\"\n                        }\n                    },\n                    {\n                        name: \"order_status\",\n                        properties: {\n                            description: \"Current status of the order (e.g., delivered, shipped, canceled).\",\n                            displayName: \"order_status\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"customer_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"order_approved_at\",\n                        dataType: \"TIMESTAMP\"\n                    },\n                    {\n                        columnName: \"order_delivered_carrier_date\",\n                        dataType: \"TIMESTAMP\"\n                    },\n                    {\n                        columnName: \"order_delivered_customer_date\",\n                        dataType: \"TIMESTAMP\"\n                    },\n                    {\n                        columnName: \"order_estimated_delivery_date\",\n                        dataType: \"TIMESTAMP\"\n                    },\n                    {\n                        columnName: \"order_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"order_purchase_timestamp\",\n                        dataType: \"TIMESTAMP\"\n                    },\n                    {\n                        columnName: \"order_status\",\n                        dataType: \"VARCHAR\"\n                    }\n                ]\n            },\n            {\n                tableName: \"olist_order_payments_dataset\",\n                primaryKey: \"order_id\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/olist_order_payments_dataset.parquet\",\n                properties: {\n                    displayName: \"order payments\",\n                    description: \"This table contains information about payment details for each order, including payment methods, amounts, installment plans, and payment sequences, helping to track how orders were paid and processed within the e-commerce platform.\"\n                },\n                columns: [\n                    {\n                        name: \"order_id\",\n                        properties: {\n                            description: \"Unique identifier for the order associated with the payment.\",\n                            displayName: \"order_id\"\n                        }\n                    },\n                    {\n                        name: \"payment_installments\",\n                        properties: {\n                            description: \"Number of installments the payment is divided into for the order.\",\n                            displayName: \"payment_installments\"\n                        }\n                    },\n                    {\n                        name: \"payment_sequential\",\n                        properties: {\n                            description: \"Sequence number for tracking multiple payments within the same order.\",\n                            displayName: \"payment_sequential\"\n                        }\n                    },\n                    {\n                        name: \"payment_type\",\n                        properties: {\n                            description: \"Method used for the payment, such as credit card, debit, or voucher.\",\n                            displayName: \"payment_type\"\n                        }\n                    },\n                    {\n                        name: \"payment_value\",\n                        properties: {\n                            description: \"Total amount paid in the specific transaction.\",\n                            displayName: \"payment_value\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"order_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"payment_installments\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"payment_sequential\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"payment_type\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"payment_value\",\n                        dataType: \"DOUBLE\"\n                    }\n                ]\n            },\n            {\n                tableName: \"olist_products_dataset\",\n                primaryKey: \"product_id\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/olist_products_dataset.parquet\",\n                properties: {\n                    displayName: \"products\",\n                    description: \"This table provides detailed information about products, including their category, dimensions, weight, description length, and the number of photos. This helps in managing product details and enhancing the shopping experience on the e-commerce platform.\"\n                },\n                columns: [\n                    {\n                        name: \"product_category_name\",\n                        properties: {\n                            description: \"Name of the product category to which the item belongs.\",\n                            displayName: \"product_category_name\"\n                        }\n                    },\n                    {\n                        name: \"product_description_lenght\",\n                        properties: {\n                            description: \"Length of the product description in characters.\",\n                            displayName: \"product_description_lenght\"\n                        }\n                    },\n                    {\n                        name: \"product_height_cm\",\n                        properties: {\n                            description: \"Height of the product in centimeters.\",\n                            displayName: \"product_height_cm\"\n                        }\n                    },\n                    {\n                        name: \"product_id\",\n                        properties: {\n                            description: \"Unique identifier for the product\",\n                            displayName: \"product_id\"\n                        }\n                    },\n                    {\n                        name: \"product_length_cm\",\n                        properties: {\n                            description: \"Length of the product in centimeters\",\n                            displayName: \"product_length_cm\"\n                        }\n                    },\n                    {\n                        name: \"product_name_lenght\",\n                        properties: {\n                            description: \"Length of the product name in characters\",\n                            displayName: \"product_name_lenght\"\n                        }\n                    },\n                    {\n                        name: \"product_photos_qty\",\n                        properties: {\n                            description: \"Number of photos available for the product\",\n                            displayName: \"product_photos_qty\"\n                        }\n                    },\n                    {\n                        name: \"product_weight_g\",\n                        properties: {\n                            description: \"Weight of the product in grams\",\n                            displayName: \"product_weight_g\"\n                        }\n                    },\n                    {\n                        name: \"product_width_cm\",\n                        properties: {\n                            description: \"Width of the product in centimeters\",\n                            displayName: \"product_width_cm\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"product_category_name\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"product_description_lenght\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"product_height_cm\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"product_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"product_length_cm\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"product_name_lenght\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"product_photos_qty\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"product_weight_g\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"product_width_cm\",\n                        dataType: \"BIGINT\"\n                    }\n                ]\n            },\n            {\n                tableName: \"olist_order_reviews_dataset\",\n                primaryKey: \"review_id\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/olist_order_reviews_dataset.parquet\",\n                properties: {\n                    displayName: \"order reviews\",\n                    description: \"This table contains customer reviews for each order, including feedback comments, ratings, and timestamps for when the review was submitted and responded to. It helps track customer satisfaction and review management on the e-commerce platform.\"\n                },\n                columns: [\n                    {\n                        name: \"order_id\",\n                        properties: {\n                            description: \"Unique identifier linking the review to the corresponding order.\",\n                            displayName: \"order_id\"\n                        }\n                    },\n                    {\n                        name: \"review_answer_timestamp\",\n                        properties: {\n                            description: \"Date and time when the review was responded to by the seller\",\n                            displayName: \"review_answer_timestamp\"\n                        }\n                    },\n                    {\n                        name: \"review_comment_message\",\n                        properties: {\n                            description: \"Detailed feedback or comments provided by the customer regarding the order.\",\n                            displayName: \"review_comment_message\"\n                        }\n                    },\n                    {\n                        name: \"review_comment_title\",\n                        properties: {\n                            description: \"Summary or title of the customer's review\",\n                            displayName: \"review_comment_title\"\n                        }\n                    },\n                    {\n                        name: \"review_creation_date\",\n                        properties: {\n                            description: \"Date and time when the customer initially submitted the review.\",\n                            displayName: \"review_creation_date\"\n                        }\n                    },\n                    {\n                        name: \"review_id\",\n                        properties: {\n                            description: \"Unique identifier for the specific review entry.\",\n                            displayName: \"review_id\"\n                        }\n                    },\n                    {\n                        name: \"review_score\",\n                        properties: {\n                            description: \"Numeric rating given by the customer, typically ranging from 1 (worst) to 5 (best).\",\n                            displayName: \"review_score\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"order_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"review_answer_timestamp\",\n                        dataType: \"TIMESTAMP\"\n                    },\n                    {\n                        columnName: \"review_comment_message\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"review_comment_title\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"review_creation_date\",\n                        dataType: \"TIMESTAMP\"\n                    },\n                    {\n                        columnName: \"review_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"review_score\",\n                        dataType: \"BIGINT\"\n                    }\n                ]\n            },\n            {\n                tableName: \"olist_geolocation_dataset\",\n                primaryKey: \"\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/olist_geolocation_dataset.parquet\",\n                properties: {\n                    displayName: \"geolocation\",\n                    description: \"This table contains detailed information about Brazilian zip codes and their corresponding latitude and longitude coordinates. It can be used to plot maps, calculate distances between sellers and customers, and perform geographic analysis.\"\n                },\n                columns: [\n                    {\n                        name: \"geolocation_city\",\n                        properties: {\n                            displayName: \"geolocation_city\",\n                            description: \"The city name of the geolocation\"\n                        }\n                    },\n                    {\n                        name: \"geolocation_lat\",\n                        properties: {\n                            displayName: \"geolocation_lat\",\n                            description: \"The coordinations for the locations latitude\"\n                        }\n                    },\n                    {\n                        name: \"geolocation_lng\",\n                        properties: {\n                            displayName: \"geolocation_lng\",\n                            description: \"The coordinations for the locations longitude\"\n                        }\n                    },\n                    {\n                        name: \"geolocation_state\",\n                        properties: {\n                            displayName: \"geolocation_state\",\n                            description: \"The state of the geolocation\"\n                        }\n                    },\n                    {\n                        name: \"geolocation_zip_code_prefix\",\n                        properties: {\n                            displayName: \"geolocation_zip_code_prefix\",\n                            description: \"First 5 digits of zip code\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"geolocation_city\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"geolocation_lat\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"geolocation_lng\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"geolocation_state\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"geolocation_zip_code_prefix\",\n                        dataType: \"VARCHAR\"\n                    }\n                ]\n            },\n            {\n                tableName: \"olist_sellers_dataset\",\n                primaryKey: \"\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/olist_sellers_dataset.parquet\",\n                properties: {\n                    displayName: \"sellers\",\n                    description: \"This table includes data about the sellers that fulfilled orders made. Use it to find the seller location and to identify which seller fulfilled each product.\"\n                },\n                columns: [\n                    {\n                        name: \"seller_city\",\n                        properties: {\n                            description: \"The Brazilian city where the seller is located\",\n                            displayName: \"seller_city\"\n                        }\n                    },\n                    {\n                        name: \"seller_id\",\n                        properties: {\n                            description: \"Unique identifier for the seller on the platform\",\n                            displayName: \"seller_id\"\n                        }\n                    },\n                    {\n                        name: \"seller_state\",\n                        properties: {\n                            description: \"The Brazilian state where the seller is located\",\n                            displayName: \"seller_state\"\n                        }\n                    },\n                    {\n                        name: \"seller_zip_code_prefix\",\n                        properties: {\n                            description: \"First 5 digits of seller zip code\",\n                            displayName: \"seller_zip_code_prefix\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"seller_city\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"seller_id\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"seller_state\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"seller_zip_code_prefix\",\n                        dataType: \"VARCHAR\"\n                    }\n                ]\n            },\n            {\n                tableName: \"product_category_name_translation\",\n                primaryKey: \"product_category_name\",\n                filePath: \"https://assets.getwren.ai/sample_data/brazilian-ecommerce/product_category_name_translation.parquet\",\n                properties: {\n                    displayName: \"product category name translation\",\n                    description: \"This table contains translations of product categories from Portuguese to English.\"\n                },\n                columns: [\n                    {\n                        name: \"product_category_name\",\n                        properties: {\n                            description: \"Original name of the product category in Portuguese.\",\n                            displayName: \"product_category_name\"\n                        }\n                    },\n                    {\n                        name: \"product_category_name_english\",\n                        properties: {\n                            description: \"Translated name of the product category in English.\",\n                            displayName: \"product_category_name_english\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"product_category_name\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"product_category_name_english\",\n                        dataType: \"VARCHAR\"\n                    }\n                ]\n            }\n        ],\n        questions: [\n            {\n                question: \"Which are the top 3 cities with the highest number of orders?\",\n                label: \"Ranking\"\n            },\n            {\n                question: \"What is the average score of reviews submitted for orders placed by customers in each city?\",\n                label: \"Aggregation\"\n            },\n            {\n                question: \"What is the total value of payments made by customers from each state?\",\n                label: \"Aggregation\"\n            }\n        ],\n        relations: [\n            // orders\n            // orders -> customers\n            {\n                fromModelName: \"olist_orders_dataset\",\n                fromColumnName: \"customer_id\",\n                toModelName: \"olist_customers_dataset\",\n                toColumnName: \"customer_id\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.MANY_TO_ONE\n            },\n            // orders -> items\n            {\n                fromModelName: \"olist_orders_dataset\",\n                fromColumnName: \"order_id\",\n                toModelName: \"olist_order_items_dataset\",\n                toColumnName: \"order_id\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            // orders -> reviews\n            {\n                fromModelName: \"olist_orders_dataset\",\n                fromColumnName: \"order_id\",\n                toModelName: \"olist_order_reviews_dataset\",\n                toColumnName: \"order_id\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            // orders -> payments\n            {\n                fromModelName: \"olist_orders_dataset\",\n                fromColumnName: \"order_id\",\n                toModelName: \"olist_order_payments_dataset\",\n                toColumnName: \"order_id\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            // items -> products\n            {\n                fromModelName: \"olist_order_items_dataset\",\n                fromColumnName: \"product_id\",\n                toModelName: \"olist_products_dataset\",\n                toColumnName: \"product_id\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.MANY_TO_ONE\n            },\n            // items -> sellers\n            {\n                fromModelName: \"olist_order_items_dataset\",\n                fromColumnName: \"seller_id\",\n                toModelName: \"olist_sellers_dataset\",\n                toColumnName: \"seller_id\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.MANY_TO_ONE\n            },\n            // geolocation -> customers (zip code prefix)\n            {\n                fromModelName: \"olist_geolocation_dataset\",\n                fromColumnName: \"geolocation_zip_code_prefix\",\n                toModelName: \"olist_customers_dataset\",\n                toColumnName: \"customer_zip_code_prefix\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            // geolocation -> sellers (zip code prefix)\n            {\n                fromModelName: \"olist_geolocation_dataset\",\n                fromColumnName: \"geolocation_zip_code_prefix\",\n                toModelName: \"olist_sellers_dataset\",\n                toColumnName: \"seller_zip_code_prefix\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            // product category name translation -> products\n            {\n                fromModelName: \"product_category_name_translation\",\n                fromColumnName: \"product_category_name\",\n                toModelName: \"olist_products_dataset\",\n                toColumnName: \"product_category_name\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            }\n        ]\n    },\n    nba: {\n        name: _type__WEBPACK_IMPORTED_MODULE_1__.SampleDatasetName.NBA,\n        tables: [\n            {\n                tableName: \"game\",\n                primaryKey: \"Id\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/v0.3.0/NBA/game.csv\",\n                columns: [\n                    {\n                        name: \"Id\"\n                    },\n                    {\n                        name: \"SeasonId\"\n                    },\n                    {\n                        name: \"TeamIdHome\"\n                    },\n                    {\n                        name: \"WlHome\"\n                    },\n                    {\n                        name: \"Min\"\n                    },\n                    {\n                        name: \"FgmHome\",\n                        properties: {\n                            description: \"number of field goals made by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"FgaHome\",\n                        properties: {\n                            description: \"number of field goals attempted by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"threepHome\",\n                        properties: {\n                            description: \"number of three point field goals made by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"threepaHome\",\n                        properties: {\n                            description: \"number of three point field goals attempted by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"FtmHome\",\n                        properties: {\n                            description: \"number of free throws made by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"FtaHome\",\n                        properties: {\n                            description: \"number of free throws attempted by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"OrebHome\",\n                        properties: {\n                            description: \"number of offensive rebounds by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"DrebHome\",\n                        properties: {\n                            description: \"number of defensive rebounds by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"RebHome\",\n                        properties: {\n                            description: \"number of rebounds by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"AstHome\",\n                        properties: {\n                            description: \"number of assists by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"StlHome\",\n                        properties: {\n                            description: \"number of steels by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"BlkHome\",\n                        properties: {\n                            description: \"number of blocks by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"TovHome\",\n                        properties: {\n                            description: \"number of turnovers by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"PfHome\",\n                        properties: {\n                            description: \"number of personal fouls by the home team.\"\n                        }\n                    },\n                    {\n                        name: \"PtsHome\",\n                        properties: {\n                            description: \"Total score of the home team.\"\n                        }\n                    },\n                    {\n                        name: \"PlusMimusHome\"\n                    },\n                    {\n                        name: \"TeamIdAway\"\n                    },\n                    {\n                        name: \"WlAway\"\n                    },\n                    {\n                        name: \"FgmAway\",\n                        properties: {\n                            description: \"number of field goals made by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"FgaAway\",\n                        properties: {\n                            description: \"number of field goals attempted by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"threepAway\",\n                        properties: {\n                            description: \"number of three point field goals made by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"threepaAway\",\n                        properties: {\n                            description: \"number of three point field goals attempted by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"FtmAway\",\n                        properties: {\n                            description: \"number of free throws made by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"FtaAway\",\n                        properties: {\n                            description: \"number of free throws attempted by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"OrebAway\",\n                        properties: {\n                            description: \"number of offensive rebounds by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"DrebAway\",\n                        properties: {\n                            description: \"number of defensive rebounds by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"RebAway\",\n                        properties: {\n                            description: \"number of rebounds by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"AstAway\",\n                        properties: {\n                            description: \"number of assists by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"StlAway\",\n                        properties: {\n                            description: \"number of steels by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"BlkAway\",\n                        properties: {\n                            description: \"number of blocks by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"TovAway\",\n                        properties: {\n                            description: \"number of turnovers by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"PfAway\",\n                        properties: {\n                            description: \"number of personal fouls by the away team.\"\n                        }\n                    },\n                    {\n                        name: \"PtsAway\",\n                        properties: {\n                            description: \"Total score of the away team.\"\n                        }\n                    },\n                    {\n                        name: \"PlusMimusAway\"\n                    },\n                    {\n                        name: \"seasonType\"\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"SeasonId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TeamIdHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"Id\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"GameDate\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"WlHome\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Min\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FgmHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FgaHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FgPct_home\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"threepHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"threepaHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"fg3_pct_home\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"FtmHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FtaHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"ft_pct_home\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"OrebHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"DrebHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"RebHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"AstHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"StlHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"BlkHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TovHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PfHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PlusMinusHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TeamIdAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"WlAway\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"FgmAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FgaAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"fg_pct_away\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"threepAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"threepaAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"Fg3_pct_away\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"FtmAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FtaAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"Ft_pct_away\",\n                        dataType: \"DOUBLE\"\n                    },\n                    {\n                        columnName: \"OrebAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"DrebAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"RebAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"AstAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"StlAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"BlkAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TovAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PfAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PlusMinusAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"SeasonType\",\n                        dataType: \"VARCHAR\"\n                    }\n                ],\n                properties: {\n                    description: 'This table describes the game statistics for both the home and away teams in each NBA game. Turnover percentage is the number of possessions that end in a turnover. The formula for turnover percentage (TOV%) is \"TOV% = (Tov \\xf7 (FGA + (0.44 x FTA) + Tov)) x 100%\".'\n                }\n            },\n            {\n                tableName: \"line_score\",\n                primaryKey: \"GameId\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/v0.3.0/NBA/line_score.csv\",\n                columns: [\n                    {\n                        name: \"GameId\"\n                    },\n                    {\n                        name: \"GameDate\"\n                    },\n                    {\n                        name: \"GameSequence\"\n                    },\n                    {\n                        name: \"TeamIdHome\"\n                    },\n                    {\n                        name: \"TeamWinsLossesHome\"\n                    },\n                    {\n                        name: \"PtsQtr1Home\",\n                        properties: {\n                            description: \"The score of the home team in the first quarter.\"\n                        }\n                    },\n                    {\n                        name: \"PtsQtr2Home\",\n                        properties: {\n                            description: \"The score of the home team in the second quarter.\"\n                        }\n                    },\n                    {\n                        name: \"PtsQtr3Home\",\n                        properties: {\n                            description: \"The score of the home team in the third quarter.\"\n                        }\n                    },\n                    {\n                        name: \"PtsQtr4Home\",\n                        properties: {\n                            description: \"The score of the home team in the fourth quarter.\"\n                        }\n                    },\n                    {\n                        name: \"PtsOt1Home\",\n                        properties: {\n                            description: \"The score of the home team in the overtime. The value of 0 indicates that the game did not go into overtime.\"\n                        }\n                    },\n                    {\n                        name: \"PtsHome\",\n                        properties: {\n                            description: \"Total score of the home team.\"\n                        }\n                    },\n                    {\n                        name: \"TeamIdAway\"\n                    },\n                    {\n                        name: \"TeamWinsLossesAway\"\n                    },\n                    {\n                        name: \"PtsQtr1Away\",\n                        properties: {\n                            description: \"The score of the away team in the first quarter.\"\n                        }\n                    },\n                    {\n                        name: \"PtsQtr2Away\",\n                        properties: {\n                            description: \"The score of the away team in the second quarter.\"\n                        }\n                    },\n                    {\n                        name: \"PtsQtr3Away\",\n                        properties: {\n                            description: \"The score of the away team in the third quarter.\"\n                        }\n                    },\n                    {\n                        name: \"PtsQtr4Away\",\n                        properties: {\n                            description: \"The score of the away team in the fourth quarter.\"\n                        }\n                    },\n                    {\n                        name: \"PtsOt1Away\",\n                        properties: {\n                            description: \"The score of the away team in the overtime. The value of 0 indicates that the game did not go into overtime.\"\n                        }\n                    },\n                    {\n                        name: \"PtsAway\",\n                        properties: {\n                            description: \"Total score of the away team.\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"GameDate\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"GameSequence\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"GameId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TeamIdHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TeamWinsLossesHome\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"PtsQtr1Home\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsQtr2Home\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsQtr3Home\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsQtr4Home\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsOt1Home\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsHome\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TeamIdAway\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TeamWinsLossesAway\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"PtsQtr1Away\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsQtr2Away\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsQtr3Away\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsQtr4Away\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsOt1Away\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PtsAway\",\n                        dataType: \"BIGINT\"\n                    }\n                ],\n                properties: {\n                    description: \"This table describes the scores and total score for each quarter or overtime of an NBA game, detailing the scores for both the home team and the away team.\"\n                }\n            },\n            {\n                tableName: \"player_games\",\n                primaryKey: \"Id\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/v0.3.0/NBA/player_game.csv\",\n                columns: [\n                    {\n                        name: \"Id\"\n                    },\n                    {\n                        name: \"GameId\"\n                    },\n                    {\n                        name: \"PlayerId\"\n                    },\n                    {\n                        name: \"Date\"\n                    },\n                    {\n                        name: \"Age\",\n                        properties: {\n                            description: 'player age. The format is \"age-days\"'\n                        }\n                    },\n                    {\n                        name: \"Tm\",\n                        properties: {\n                            description: \"team affiliation.\"\n                        }\n                    },\n                    {\n                        name: \"Opp\",\n                        properties: {\n                            description: \"opposing team.\"\n                        }\n                    },\n                    {\n                        name: \"MP\",\n                        properties: {\n                            description: \"minutes played\"\n                        }\n                    },\n                    {\n                        name: \"FG\",\n                        properties: {\n                            description: \"number of two point field goals made.\"\n                        }\n                    },\n                    {\n                        name: \"FGA\",\n                        properties: {\n                            description: \"number of two point field goals attempted (do not include free throws).\"\n                        }\n                    },\n                    {\n                        name: \"threeP\",\n                        properties: {\n                            description: \"number of three point field goals made.\"\n                        }\n                    },\n                    {\n                        name: \"threePA\",\n                        properties: {\n                            description: \"number of three point field goals attempted.\"\n                        }\n                    },\n                    {\n                        name: \"FT\",\n                        properties: {\n                            description: \"number of free throws made.\"\n                        }\n                    },\n                    {\n                        name: \"FTA\",\n                        properties: {\n                            description: \"number of free throws attempted.\"\n                        }\n                    },\n                    {\n                        name: \"ORB\",\n                        properties: {\n                            description: \"number of offensive rebounds.\"\n                        }\n                    },\n                    {\n                        name: \"DRB\",\n                        properties: {\n                            description: \"number of defensive rebounds.\"\n                        }\n                    },\n                    {\n                        name: \"AST\",\n                        properties: {\n                            description: \"number of assists.\"\n                        }\n                    },\n                    {\n                        name: \"STL\",\n                        properties: {\n                            description: \"number of Steals.\"\n                        }\n                    },\n                    {\n                        name: \"BLK\",\n                        properties: {\n                            description: \"number of blocks.\"\n                        }\n                    },\n                    {\n                        name: \"TOV\",\n                        properties: {\n                            description: \"number of turnovers allowed\"\n                        }\n                    },\n                    {\n                        name: \"PF\",\n                        properties: {\n                            description: \"number of personal fouls\"\n                        }\n                    },\n                    {\n                        name: \"PTS\",\n                        properties: {\n                            description: \"total score\"\n                        }\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"Id\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PlayerID\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"GameID\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"Date\",\n                        dataType: \"DATE\"\n                    },\n                    {\n                        columnName: \"Age\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Tm\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Opp\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"MP\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"FG\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FGA\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"threeP\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"threePA\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FT\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FTA\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"ORB\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"DRB\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TRB\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"AST\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"STL\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"BLK\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TOV\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PF\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"PTS\",\n                        dataType: \"BIGINT\"\n                    }\n                ],\n                properties: {\n                    description: 'This table describes the game statistics for each NBA player in every game. Turnover percentage is the number of possessions that end in a turnover. The formula for turnover percentage (TOV%) is \"TOV% = (Tov \\xf7 (FGA + (0.44 x FTA) + Tov)) x 100%\".'\n                }\n            },\n            {\n                tableName: \"player\",\n                primaryKey: \"Id\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/v0.3.0/NBA/player.csv\",\n                columns: [\n                    {\n                        name: \"Id\"\n                    },\n                    {\n                        name: \"TeamId\"\n                    },\n                    {\n                        name: \"FullName\"\n                    },\n                    {\n                        name: \"FirstName\"\n                    },\n                    {\n                        name: \"LastName\"\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"Id\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"TeamId\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FullName\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"FirstName\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"LastName\",\n                        dataType: \"VARCHAR\"\n                    }\n                ],\n                properties: {\n                    description: \"This table describes NBA players by their ID, name, and team affiliation.\"\n                }\n            },\n            {\n                tableName: \"team\",\n                primaryKey: \"Id\",\n                filePath: \"https://wrenai-public.s3.amazonaws.com/demo/v0.3.0/NBA/team.csv\",\n                columns: [\n                    {\n                        name: \"Id\"\n                    },\n                    {\n                        name: \"FullName\"\n                    },\n                    {\n                        name: \"Abbreviation\"\n                    },\n                    {\n                        name: \"Nickname\"\n                    },\n                    {\n                        name: \"City\"\n                    },\n                    {\n                        name: \"State\"\n                    },\n                    {\n                        name: \"YearFounded\"\n                    }\n                ],\n                schema: [\n                    {\n                        columnName: \"Id\",\n                        dataType: \"BIGINT\"\n                    },\n                    {\n                        columnName: \"FullName\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Abbreviation\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"Nickname\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"City\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"State\",\n                        dataType: \"VARCHAR\"\n                    },\n                    {\n                        columnName: \"YearFounded\",\n                        dataType: \"INT\"\n                    }\n                ],\n                properties: {\n                    description: \"This table describes NBA teams by their ID, team name, team abbreviation, and founding date.\"\n                }\n            }\n        ],\n        questions: [\n            {\n                question: \"How many three-pointers were made by each player in each game?\",\n                label: \"Aggregation\"\n            },\n            {\n                question: \"What is the differences in turnover rates between teams with high and low average scores?\",\n                label: \"Comparison\"\n            },\n            {\n                question: \"Which teams had the highest average points scored per game throughout the season?\",\n                label: \"Ranking\"\n            }\n        ],\n        relations: [\n            {\n                fromModelName: \"game\",\n                fromColumnName: \"Id\",\n                toModelName: \"line_score\",\n                toColumnName: \"GameId\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            {\n                fromModelName: \"line_score\",\n                fromColumnName: \"GameId\",\n                toModelName: \"player_games\",\n                toColumnName: \"GameID\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            },\n            {\n                fromModelName: \"player\",\n                fromColumnName: \"TeamId\",\n                toModelName: \"team\",\n                toColumnName: \"Id\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_ONE\n            },\n            {\n                fromModelName: \"team\",\n                fromColumnName: \"Id\",\n                toModelName: \"game\",\n                toColumnName: \"TeamIdHome\",\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            }\n        ]\n    }\n};\nconst buildInitSql = (datasetName)=>{\n    const selectedDataset = sampleDatasets[datasetName.toLowerCase()];\n    return selectedDataset.tables.map((table)=>{\n        const schema = table.schema?.map(({ columnName, dataType })=>`'${columnName}': '${dataType}'`).join(\", \");\n        const fileExtension = table.filePath.split(\".\").pop();\n        const createTableStatement = (fileType, schema)=>{\n            if (fileType !== \"csv\" && fileType !== \"parquet\") {\n                throw new Error(`Unsupported file type: ${fileType}`);\n            }\n            const baseStatement = `CREATE TABLE ${table.tableName} AS select * FROM read_${fileType}('${table.filePath}'`;\n            const schemaPart = fileType === \"csv\" && schema ? `, columns={${schema}}` : \"\";\n            const headerPart = fileType === \"csv\" ? \",header=true\" : \"\";\n            return `${baseStatement}${headerPart}${schemaPart});`;\n        };\n        return createTableStatement(fileExtension, schema);\n    }).join(\"\\n\");\n};\nconst getRelations = (datasetName)=>{\n    const selectedDataset = sampleDatasets[datasetName.toLowerCase()];\n    return selectedDataset.relations;\n};\nconst getSampleAskQuestions = (datasetName)=>{\n    const selectedDataset = sampleDatasets[datasetName.toLowerCase()];\n    return selectedDataset.questions;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDdEI7Z0JBQ0VDLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLE1BQU1yQixnREFBWUEsQ0FBQ3VCLFdBQVc7WUFDaEM7WUFDQSxrQkFBa0I7WUFDbEI7Z0JBQ0VOLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLE1BQU1yQixnREFBWUEsQ0FBQ3NCLFdBQVc7WUFDaEM7WUFDQSxvQkFBb0I7WUFDcEI7Z0JBQ0VMLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLE1BQU1yQixnREFBWUEsQ0FBQ3NCLFdBQVc7WUFDaEM7WUFDQSxxQkFBcUI7WUFDckI7Z0JBQ0VMLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLE1BQU1yQixnREFBWUEsQ0FBQ3NCLFdBQVc7WUFDaEM7WUFDQSxvQkFBb0I7WUFDcEI7Z0JBQ0VMLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLE1BQU1yQixnREFBWUEsQ0FBQ3VCLFdBQVc7WUFDaEM7WUFDQSxtQkFBbUI7WUFDbkI7Z0JBQ0VOLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLE1BQU1yQixnREFBWUEsQ0FBQ3VCLFdBQVc7WUFDaEM7WUFDQSw2Q0FBNkM7WUFDN0M7Z0JBQ0VOLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLE1BQU1yQixnREFBWUEsQ0FBQ3NCLFdBQVc7WUFDaEM7WUFDQSwyQ0FBMkM7WUFDM0M7Z0JBQ0VMLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFDaEJDLGFBQWE7Z0JBQ2JDLGNBQWM7Z0JBQ2RDLE1BQU1yQixnREFBWUEsQ0FBQ3NCLFdBQVc7WUFDaEM7WUFDQSxnREFBZ0Q7WUFDaEQ7Z0JBQ0VMLGVBQWU7Z0JBQ2ZDLGdCQUFnQjtnQkFD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QVU7b0JBQVM7b0JBQzdDO3dCQUFFRCxZQUFZO3dCQUFXQyxVQUFVO29CQUFTO29CQUM1Qzt3QkFBRUQsWUFBWTt3QkFBV0MsVUFBVTtvQkFBUztvQkFDNUM7d0JBQUVELFlBQVk7d0JBQVdDLFVBQVU7b0JBQVM7b0JBQzVDO3dCQUFFRCxZQUFZO3dCQUFXQyxVQUFVO29CQUFTO29CQUM1Qzt3QkFBRUQsWUFBWTt3QkFBV0MsVUFBVTtvQkFBUztvQkFDNUM7d0JBQUVELFlBQVk7d0JBQVVDLFVBQVU7b0JBQVM7b0JBQzNDO3dCQUFFRCxZQUFZO3dCQUFXQyxVQUFVO29CQUFTO29CQUM1Qzt3QkFBRUQsWUFBWTt3QkFBaUJDLFVBQVU7b0JBQVM7b0JBQ2xEO3dCQUFFRCxZQUFZO3dCQUFjQyxVQUFVO29CQUFTO29CQUMvQzt3QkFBRUQsWUFBWTt3QkFBVUMsVUFBVTtvQkFBVTtvQkFDNUM7d0JBQUVELFlBQVk7d0JBQVdDLFVBQVU7b0JBQVM7b0JBQzVDO3dCQUFFRCxZQUFZO3dCQUFXQyxVQUFVO29CQUFTO29CQUM1Qzt3QkFBRUQsWUFBWTt3QkFBZUMsVUFBVTtvQkFBUztvQkFDaEQ7d0JBQUVELFlBQVk7d0JBQWNDLFVBQVU7b0JBQVM7b0JBQy9DO3dCQUFFRCxZQUFZO3dCQUFlQyxVQUFVO29CQUFTO29CQUNoRDt3QkFBRUQsWUFBWTt3QkFBZ0JDLFVBQVU7b0JBQVM7b0JBQ2pEO3dCQUFFRCxZQUFZO3dCQUFXQyxVQUFVO29CQUFTO29CQUM1Qzt3QkFBRUQsWUFBWTt3QkFBV0MsVUFBVTtvQkFBUztvQkFDNUM7d0JBQUVELFlBQVk7d0JBQWVDLFVBQVU7b0JBQVM7b0JBQ2hEO3dCQUFFRCxZQUFZO3dCQUFZQyxVQUFVO29CQUFTO29CQUM3Qzt3QkFBRUQsWUFBWTt3QkFBWUMsVUFBVTtvQkFBUztvQkFDN0M7d0JBQUVELFlBQVk7d0JBQVdDLFVBQVU7b0JBQVM7b0JBQzVDO3dCQUFFRCxZQUFZO3dCQUFXQyxVQUFVO29CQUFTO29CQUM1Qzt3QkFBRUQsWUFBWTt3QkFBV0MsVUFBVTtvQkFBUztv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LFlBQVlFLFdBQVcsR0FBRztJQUNqRSxPQUFPRCxnQkFBZ0JyQixTQUFTO0FBQ2xDLEVBQUU7QUFFSyxNQUFNb0Msd0JBQXdCLENBQUNoQjtJQUNwQyxNQUFNQyxrQkFBa0JuQyxjQUFjLENBQUNrQyxZQUFZRSxXQUFXLEdBQUc7SUFDakUsT0FBT0QsZ0JBQWdCYixTQUFTO0FBQ2xDLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvZGF0YS9zYW1wbGUudHM/OTM0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWxhdGlvblR5cGUgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBTYW1wbGVEYXRhc2V0TmFtZSB9IGZyb20gJy4vdHlwZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FtcGxlRGF0YXNldENvbHVtbiB7XG4gIG5hbWU6IHN0cmluZztcbiAgcHJvcGVydGllcz86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FtcGxlRGF0YXNldFNjaGVtYSB7XG4gIGNvbHVtbk5hbWU6IHN0cmluZztcbiAgZGF0YVR5cGU6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU2FtcGxlRGF0YXNldFRhYmxlIHtcbiAgZmlsZVBhdGg6IHN0cmluZztcbiAgdGFibGVOYW1lOiBzdHJpbmc7XG4gIHByaW1hcnlLZXk/OiBzdHJpbmc7XG4gIC8vIHRoZSBjb2x1bW4gb3JkZXIgaW4gc2NoZW1hIGRlZmluaXRpb24gc2hvdWxkIGJlIHRoZSBzYW1lIGFzIHRoZSBjb2x1bW4gaW4gY3N2IGZpbGVcbiAgc2NoZW1hPzogU2FtcGxlRGF0YXNldFNjaGVtYVtdO1xuICBjb2x1bW5zPzogU2FtcGxlRGF0YXNldENvbHVtbltdO1xuICBwcm9wZXJ0aWVzPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTYW1wbGVEYXRhc2V0UmVsYXRpb25zaGlwIHtcbiAgZnJvbU1vZGVsTmFtZTogc3RyaW5nO1xuICBmcm9tQ29sdW1uTmFtZTogc3RyaW5nO1xuICB0b01vZGVsTmFtZTogc3RyaW5nO1xuICB0b0NvbHVtbk5hbWU6IHN0cmluZztcbiAgdHlwZTogUmVsYXRpb25UeXBlO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgU3VnZ2VzdGVkUXVlc3Rpb24ge1xuICBxdWVzdGlvbjogc3RyaW5nO1xuICBsYWJlbDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNhbXBsZURhdGFzZXQge1xuICBuYW1lOiBzdHJpbmc7IC8vIFNhbXBsZURhdGFzZXROYW1lXG4gIHRhYmxlczogU2FtcGxlRGF0YXNldFRhYmxlW107XG4gIHF1ZXN0aW9ucz86IFN1Z2dlc3RlZFF1ZXN0aW9uW107XG4gIHJlbGF0aW9ucz86IFNhbXBsZURhdGFzZXRSZWxhdGlvbnNoaXBbXTtcbn1cblxuZXhwb3J0IGNvbnN0IHNhbXBsZURhdGFzZXRzOiBSZWNvcmQ8c3RyaW5nLCBTYW1wbGVEYXRhc2V0PiA9IHtcbiAgaHI6IHtcbiAgICBuYW1lOiBTYW1wbGVEYXRhc2V0TmFtZS5IUixcbiAgICB0YWJsZXM6IFtcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiAnc2FsYXJpZXMnLFxuICAgICAgICBmaWxlUGF0aDpcbiAgICAgICAgICAnaHR0cHM6Ly9hc3NldHMuZ2V0d3Jlbi5haS9zYW1wbGVfZGF0YS9lbXBsb3llZXMvc2FsYXJpZXMucGFycXVldCcsXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2VtcF9ubycsIGRhdGFUeXBlOiAnSU5URUdFUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdzYWxhcnknLCBkYXRhVHlwZTogJ0lOVEVHRVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZnJvbV9kYXRlJywgZGF0YVR5cGU6ICdEQVRFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3RvX2RhdGUnLCBkYXRhVHlwZTogJ0RBVEUnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZW1wX25vJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgZW1wbG95ZWUgbnVtYmVyJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdlbXBfbm8nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzYWxhcnknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBzYWxhcnkgb2YgdGhlIGVtcGxveWVlLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnc2FsYXJ5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZnJvbV9kYXRlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgc3RhcnQgZGF0ZSBvZiB0aGUgc2FsYXJ5IHBlcmlvZC4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ2Zyb21fZGF0ZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3RvX2RhdGUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBlbmQgZGF0ZSBvZiB0aGUgc2FsYXJ5IHBlcmlvZC4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3RvX2RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAnVHJhY2tzIHRoZSBzYWxhcnkgb2YgZW1wbG95ZWVzLCBpbmNsdWRpbmcgdGhlIHBlcmlvZCBkdXJpbmcgd2hpY2ggZWFjaCBzYWxhcnkgd2FzIHZhbGlkLicsXG4gICAgICAgICAgZGlzcGxheU5hbWU6ICdzYWxhcmllcycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICd0aXRsZXMnLFxuICAgICAgICBmaWxlUGF0aDpcbiAgICAgICAgICAnaHR0cHM6Ly9hc3NldHMuZ2V0d3Jlbi5haS9zYW1wbGVfZGF0YS9lbXBsb3llZXMvdGl0bGVzLnBhcnF1ZXQnLFxuICAgICAgICBzY2hlbWE6IFtcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdlbXBfbm8nLCBkYXRhVHlwZTogJ0lOVEVHRVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAndGl0bGUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZnJvbV9kYXRlJywgZGF0YVR5cGU6ICdEQVRFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3RvX2RhdGUnLCBkYXRhVHlwZTogJ0RBVEUnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZW1wX25vJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgZW1wbG95ZWUgbnVtYmVyJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdlbXBfbm8nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0aXRsZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdUaGUgdGl0bGUgb3IgcG9zaXRpb24gaGVsZCBieSB0aGUgZW1wbG95ZWUuIExpbWl0ZWQgdG8gYSBtYXhpbXVtIG9mIDUwIGNoYXJhY3RlcnMuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICd0aXRsZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2Zyb21fZGF0ZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHN0YXJ0IGRhdGUgd2hlbiB0aGUgZW1wbG95ZWUgaGVsZCB0aGlzIHRpdGxlJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdmcm9tX2RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0b19kYXRlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ1RoZSBlbmQgZGF0ZSB3aGVuIHRoZSBlbXBsb3llZSBoZWxkIHRoaXMgdGl0bGUuIFRoaXMgY2FuIGJlIE5VTEwgaWYgdGhlIGVtcGxveWVlIGN1cnJlbnRseSBob2xkcyB0aGUgdGl0bGUuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICd0b19kYXRlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgJ1RyYWNrcyB0aGUgdGl0bGVzIChwb3NpdGlvbnMpIGhlbGQgYnkgZW1wbG95ZWVzLCBpbmNsdWRpbmcgdGhlIHBlcmlvZCBkdXJpbmcgd2hpY2ggdGhleSBoZWxkIGVhY2ggdGl0bGUuJyxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ3RpdGxlcycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICdkZXB0X2VtcCcsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2VtcGxveWVlcy9kZXB0X2VtcC5wYXJxdWV0JyxcbiAgICAgICAgc2NoZW1hOiBbXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZW1wX25vJywgZGF0YVR5cGU6ICdJTlRFR0VSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2RlcHRfbm8nLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZnJvbV9kYXRlJywgZGF0YVR5cGU6ICdEQVRFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3RvX2RhdGUnLCBkYXRhVHlwZTogJ0RBVEUnIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZW1wX25vJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgZW1wbG95ZWUgbnVtYmVyLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZW1wX25vJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZGVwdF9ubycsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdUaGUgZGVwYXJ0bWVudCBudW1iZXIgdGhlIGVtcGxveWVlIGlzIGFzc29jaWF0ZWQgd2l0aCwgcmVmZXJlbmNpbmcgdGhlIGRlcHRfbm8gaW4gdGhlIGRlcGFydG1lbnRzIHRhYmxlLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZGVwdF9ubycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2Zyb21fZGF0ZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgIFwiVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGVtcGxveWVlJ3MgYXNzb2NpYXRpb24gd2l0aCB0aGUgZGVwYXJ0bWVudC5cIixcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdmcm9tX2RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0b19kYXRlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgXCJUaGUgZW5kIGRhdGUgb2YgdGhlIGVtcGxveWVlJ3MgYXNzb2NpYXRpb24gd2l0aCB0aGUgZGVwYXJ0bWVudFwiLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3RvX2RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgZGlzcGxheU5hbWU6ICdkZXB0X2VtcCcsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICdkZXBhcnRtZW50cycsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2VtcGxveWVlcy9kZXBhcnRtZW50cy5wYXJxdWV0JyxcbiAgICAgICAgc2NoZW1hOiBbXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZGVwdF9uYW1lJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2RlcHRfbm8nLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZGVwdF9uYW1lJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ1RoZSBuYW1lIG9mIHRoZSBkZXBhcnRtZW50LiBMaW1pdGVkIHRvIGEgbWF4aW11bSBvZiA0MCBjaGFyYWN0ZXJzLiBUaGlzIGNvbHVtbiBpcyBhbHNvIHVuaXF1ZSBhY3Jvc3MgdGhlIHRhYmxlLCBlbnN1cmluZyBubyB0d28gZGVwYXJ0bWVudHMgc2hhcmUgdGhlIHNhbWUgbmFtZScsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZGVwdF9uYW1lJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZGVwdF9ubycsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciBlYWNoIGRlcGFydG1lbnQuIEl0IHNlcnZlcyBhcyB0aGUgcHJpbWFyeSBrZXkgb2YgdGhlIHRhYmxlLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZGVwdF9ubycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ2RlcGFydG1lbnRzJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ2VtcGxveWVlcycsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2VtcGxveWVlcy9lbXBsb3llZXMucGFycXVldCcsXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2JpcnRoX2RhdGUnLCBkYXRhVHlwZTogJ0RBVEUnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZmlyc3RfbmFtZScsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdsYXN0X25hbWUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZ2VuZGVyJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2hpcmVfZGF0ZScsIGRhdGFUeXBlOiAnREFURScgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdlbXBfbm8nLCBkYXRhVHlwZTogJ0lOVEVHRVInIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnYmlydGhfZGF0ZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGJpcnRoIGRhdGUgb2YgdGhlIGVtcGxveWVlLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnYmlydGhfZGF0ZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2ZpcnN0X25hbWUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnVGhlIGZpcnN0IG5hbWUgb2YgdGhlIGVtcGxveWVlLiBMaW1pdGVkIHRvIGEgbWF4aW11bSBvZiAxNCBjaGFyYWN0ZXJzLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZmlyc3RfbmFtZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2xhc3RfbmFtZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdUaGUgbGFzdCBuYW1lIG9mIHRoZSBlbXBsb3llZS4gTGltaXRlZCB0byBhIG1heGltdW0gb2YgMTYgY2hhcmFjdGVycy4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ2xhc3RfbmFtZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2dlbmRlcicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgIFwiVGhlIGdlbmRlciBvZiB0aGUgZW1wbG95ZWUsIHdpdGggcG9zc2libGUgdmFsdWVzICdNJyAoTWFsZSkgb3IgJ0YnIChGZW1hbGUpLlwiLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ2dlbmRlcicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2hpcmVfZGF0ZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGRhdGUgd2hlbiB0aGUgZW1wbG95ZWUgd2FzIGhpcmVkLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnaGlyZV9kYXRlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZW1wX25vJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ0EgdW5pcXVlIGlkZW50aWZpZXIgZm9yIGVhY2ggZW1wbG95ZWUuIEl0IHNlcnZlcyBhcyB0aGUgcHJpbWFyeSBrZXkgb2YgdGhlIHRhYmxlJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdlbXBfbm8nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAnU3RvcmVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVtcGxveWVlcyBzdWNoIGFzIHRoZWlyIGVtcGxveWVlIG51bWJlciwgbmFtZSwgZ2VuZGVyLCBiaXJ0aCBkYXRlLCBhbmQgaGlyZSBkYXRlJyxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ2VtcGxveWVlcycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICdkZXB0X21hbmFnZXInLFxuICAgICAgICBmaWxlUGF0aDpcbiAgICAgICAgICAnaHR0cHM6Ly9hc3NldHMuZ2V0d3Jlbi5haS9zYW1wbGVfZGF0YS9lbXBsb3llZXMvZGVwdF9tYW5hZ2VyLnBhcnF1ZXQnLFxuICAgICAgICBzY2hlbWE6IFtcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdmcm9tX2RhdGUnLCBkYXRhVHlwZTogJ0RBVEUnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAndG9fZGF0ZScsIGRhdGFUeXBlOiAnREFURScgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdlbXBfbm8nLCBkYXRhVHlwZTogJ0lOVEVHRVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZGVwdF9ubycsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgXSxcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdmcm9tX2RhdGUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGVtcGxveWVl4oCZcyBtYW5hZ2VyaWFsIHJvbGUgaW4gdGhlIGRlcGFydG1lbnQuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdmcm9tX2RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0b19kYXRlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ1RoZSBlbmQgZGF0ZSBvZiB0aGUgZW1wbG95ZWXigJlzIG1hbmFnZXJpYWwgcm9sZSBpbiB0aGUgZGVwYXJ0bWVudC4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3RvX2RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdlbXBfbm8nLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBlbXBsb3llZSBudW1iZXIgb2YgdGhlIGRlcGFydG1lbnQgbWFuYWdlcicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZW1wX25vJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnZGVwdF9ubycsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdUaGUgZGVwYXJ0bWVudCBudW1iZXIgdGhhdCB0aGUgbWFuYWdlciBpcyBhc3NpZ25lZCB0bywgcmVmZXJlbmNpbmcgdGhlIGRlcHRfbm8gaW4gdGhlIGRlcGFydG1lbnRzIHRhYmxlLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZGVwdF9ubycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICdUcmFja3MgdGhlIGFzc2lnbm1lbnQgb2YgbWFuYWdlcnMgdG8gZGVwYXJ0bWVudHMsIGluY2x1ZGluZyB0aGUgcGVyaW9kIGR1cmluZyB3aGljaCB0aGV5IG1hbmFnZWQgYSBkZXBhcnRtZW50JyxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ2RlcHRfbWFuYWdlcicsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0sXG4gICAgcmVsYXRpb25zOiBbXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdlbXBsb3llZXMnLFxuICAgICAgICBmcm9tQ29sdW1uTmFtZTogJ2VtcF9ubycsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAndGl0bGVzJyxcbiAgICAgICAgdG9Db2x1bW5OYW1lOiAnZW1wX25vJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19NQU5ZLFxuICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAnRWFjaCBlbnRyeSByZXByZXNlbnRzIGEgdGl0bGUgaGVsZCBieSBhbiBlbXBsb3llZSBkdXJpbmcgYSBzcGVjaWZpYyB0aW1lIHBlcmlvZC4nLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZnJvbU1vZGVsTmFtZTogJ2RlcGFydG1lbnRzJyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdkZXB0X25vJyxcbiAgICAgICAgdG9Nb2RlbE5hbWU6ICdkZXB0X2VtcCcsXG4gICAgICAgIHRvQ29sdW1uTmFtZTogJ2RlcHRfbm8nLFxuICAgICAgICB0eXBlOiBSZWxhdGlvblR5cGUuT05FX1RPX01BTlksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmcm9tTW9kZWxOYW1lOiAnZW1wbG95ZWVzJyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdlbXBfbm8nLFxuICAgICAgICB0b01vZGVsTmFtZTogJ3NhbGFyaWVzJyxcbiAgICAgICAgdG9Db2x1bW5OYW1lOiAnZW1wX25vJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19NQU5ZLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZnJvbU1vZGVsTmFtZTogJ2RlcHRfbWFuYWdlcicsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnZW1wX25vJyxcbiAgICAgICAgdG9Nb2RlbE5hbWU6ICdlbXBsb3llZXMnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdlbXBfbm8nLFxuICAgICAgICB0eXBlOiBSZWxhdGlvblR5cGUuTUFOWV9UT19PTkUsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmcm9tTW9kZWxOYW1lOiAnZGVwdF9lbXAnLFxuICAgICAgICBmcm9tQ29sdW1uTmFtZTogJ2VtcF9ubycsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAnZW1wbG95ZWVzJyxcbiAgICAgICAgdG9Db2x1bW5OYW1lOiAnZW1wX25vJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk1BTllfVE9fT05FLFxuICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAnbWVhbmluZyBhbiBlbXBsb3llZSBjYW4gYmUgYXNzb2NpYXRlZCB3aXRoIG11bHRpcGxlIGRlcGFydG1lbnRzLCB0aXRsZXMsIGFuZCBzYWxhcmllcyBvdmVyIHRpbWUuJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdkZXBhcnRtZW50cycsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnZGVwdF9ubycsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAnZGVwdF9tYW5hZ2VyJyxcbiAgICAgICAgdG9Db2x1bW5OYW1lOiAnZGVwdF9ubycsXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5PTkVfVE9fTUFOWSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBxdWVzdGlvbnM6IFtcbiAgICAgIHtcbiAgICAgICAgcXVlc3Rpb246ICdXaGF0IGlzIHRoZSBhdmVyYWdlIHNhbGFyeSBmb3IgZWFjaCBwb3NpdGlvbj8nLFxuICAgICAgICBsYWJlbDogJ0FnZ3JlZ2F0aW9uJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHF1ZXN0aW9uOlxuICAgICAgICAgICdDb21wYXJlIHRoZSBhdmVyYWdlIHNhbGFyeSBvZiBtYWxlIGFuZCBmZW1hbGUgZW1wbG95ZWVzIGluIGVhY2ggZGVwYXJ0bWVudC4nLFxuICAgICAgICBsYWJlbDogJ0NvbXBhcmlzb24nLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcXVlc3Rpb246XG4gICAgICAgICAgJ1doYXQgYXJlIHRoZSBuYW1lcyBvZiB0aGUgbWFuYWdlcnMgYW5kIHRoZSBkZXBhcnRtZW50cyB0aGV5IG1hbmFnZT8nLFxuICAgICAgICBsYWJlbDogJ0Fzc29jaWF0aW5nJyxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSxcbiAgbXVzaWM6IHtcbiAgICBuYW1lOiBTYW1wbGVEYXRhc2V0TmFtZS5NVVNJQyxcbiAgICB0YWJsZXM6IFtcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiAnYWxidW0nLFxuICAgICAgICBmaWxlUGF0aDogJ2h0dHBzOi8vd3JlbmFpLXB1YmxpYy5zMy5hbWF6b25hd3MuY29tL2RlbW8vTXVzaWMvQWxidW0uY3N2JyxcbiAgICAgICAgc2NoZW1hOiBbXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQWxidW1JZCcsIGRhdGFUeXBlOiAnSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1RpdGxlJywgZGF0YVR5cGU6ICd2YXJjaGFyJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0FydGlzdElkJywgZGF0YVR5cGU6ICdJTlQnIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICdhcnRpc3QnLFxuICAgICAgICBmaWxlUGF0aDpcbiAgICAgICAgICAnaHR0cHM6Ly93cmVuYWktcHVibGljLnMzLmFtYXpvbmF3cy5jb20vZGVtby9NdXNpYy9BcnRpc3QuY3N2JyxcbiAgICAgICAgc2NoZW1hOiBbXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQXJ0aXN0SWQnLCBkYXRhVHlwZTogJ0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdOYW1lJywgZGF0YVR5cGU6ICd2YXJjaGFyJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiAnY3VzdG9tZXInLFxuICAgICAgICBmaWxlUGF0aDpcbiAgICAgICAgICAnaHR0cHM6Ly93cmVuYWktcHVibGljLnMzLmFtYXpvbmF3cy5jb20vZGVtby9NdXNpYy9DdXN0b21lci5jc3YnLFxuICAgICAgICBzY2hlbWE6IFtcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdDdXN0b21lcklkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRmlyc3ROYW1lJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0xhc3ROYW1lJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0NvbXBhbnknLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQWRkcmVzcycsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdDaXR5JywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1N0YXRlJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0NvdW50cnknLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUG9zdGFsQ29kZScsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQaG9uZScsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdGYXgnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRW1haWwnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnU3VwcG9ydFJlcElkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICdnZW5yZScsXG4gICAgICAgIGZpbGVQYXRoOiAnaHR0cHM6Ly93cmVuYWktcHVibGljLnMzLmFtYXpvbmF3cy5jb20vZGVtby9NdXNpYy9HZW5yZS5jc3YnLFxuICAgICAgICBzY2hlbWE6IFtcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdHZW5yZUlkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnTmFtZScsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ2ludm9pY2UnLFxuICAgICAgICBmaWxlUGF0aDpcbiAgICAgICAgICAnaHR0cHM6Ly93cmVuYWktcHVibGljLnMzLmFtYXpvbmF3cy5jb20vZGVtby9NdXNpYy9JbnZvaWNlLmNzdicsXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0ludm9pY2VJZCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0N1c3RvbWVySWQnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdJbnZvaWNlRGF0ZScsIGRhdGFUeXBlOiAnRGF0ZScgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdCaWxsaW5nQWRkcmVzcycsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdCaWxsaW5nQ2l0eScsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdCaWxsaW5nU3RhdGUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQmlsbGluZ0NvdW50cnknLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQmlsbGluZ1Bvc3RhbENvZGUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnVG90YWwnLCBkYXRhVHlwZTogJ0RPVUJMRScgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ2ludm9pY2VMaW5lJyxcbiAgICAgICAgZmlsZVBhdGg6XG4gICAgICAgICAgJ2h0dHBzOi8vd3JlbmFpLXB1YmxpYy5zMy5hbWF6b25hd3MuY29tL2RlbW8vTXVzaWMvSW52b2ljZUxpbmUuY3N2JyxcbiAgICAgICAgc2NoZW1hOiBbXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnSW52b2ljZUxpbmVJZCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0ludm9pY2VJZCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1RyYWNrSWQnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdVbml0UHJpY2UnLCBkYXRhVHlwZTogJ0RPVUJMRScgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdRdWFudGl0eScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiAndHJhY2snLFxuICAgICAgICBmaWxlUGF0aDogJ2h0dHBzOi8vd3JlbmFpLXB1YmxpYy5zMy5hbWF6b25hd3MuY29tL2RlbW8vTXVzaWMvVHJhY2suY3N2JyxcbiAgICAgICAgc2NoZW1hOiBbXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnVHJhY2tJZCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ05hbWUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQWxidW1JZCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ01lZGlhVHlwZUlkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnR2VucmVJZCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0NvbXBvc2VyJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ01pbGxpc2Vjb25kcycsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0J5dGVzJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnVW5pdFByaWNlJywgZGF0YVR5cGU6ICdET1VCTEUnIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0sXG4gICAgcXVlc3Rpb25zOiBbXG4gICAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBhcmUgdGhlIHRvcCA1IHNlbGxpbmcgYWxidW1zIGluIHRoZSBVUz8nLFxuICAgICAgICBsYWJlbDogJ1JhbmtpbmcnLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcXVlc3Rpb246ICdXaGF0IGlzIHRoZSB0b3RhbCByZXZlbnVlIGdlbmVyYXRlZCBmcm9tIGVhY2ggZ2VucmU/JyxcbiAgICAgICAgbGFiZWw6ICdBZ2dyZWdhdGlvbicsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBxdWVzdGlvbjpcbiAgICAgICAgICAnV2hpY2ggY3VzdG9tZXJzIGhhdmUgbWFkZSBwdXJjaGFzZXMgb2YgdHJhY2tzIGZyb20gYWxidW1zIGluIGVhY2ggZ2VucmU/JyxcbiAgICAgICAgbGFiZWw6ICdHZW5lcmFsJyxcbiAgICAgIH0sXG4gICAgXSxcbiAgICByZWxhdGlvbnM6IFtcbiAgICAgIHtcbiAgICAgICAgZnJvbU1vZGVsTmFtZTogJ2FsYnVtJyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdBcnRpc3RJZCcsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAnYXJ0aXN0JyxcbiAgICAgICAgdG9Db2x1bW5OYW1lOiAnQXJ0aXN0SWQnLFxuICAgICAgICB0eXBlOiBSZWxhdGlvblR5cGUuTUFOWV9UT19PTkUsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmcm9tTW9kZWxOYW1lOiAnY3VzdG9tZXInLFxuICAgICAgICBmcm9tQ29sdW1uTmFtZTogJ0N1c3RvbWVySWQnLFxuICAgICAgICB0b01vZGVsTmFtZTogJ2ludm9pY2UnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdDdXN0b21lcklkJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19NQU5ZLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZnJvbU1vZGVsTmFtZTogJ2dlbnJlJyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdHZW5yZUlkJyxcbiAgICAgICAgdG9Nb2RlbE5hbWU6ICd0cmFjaycsXG4gICAgICAgIHRvQ29sdW1uTmFtZTogJ0dlbnJlSWQnLFxuICAgICAgICB0eXBlOiBSZWxhdGlvblR5cGUuT05FX1RPX01BTlksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmcm9tTW9kZWxOYW1lOiAnaW52b2ljZScsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnSW52b2ljZUlkJyxcbiAgICAgICAgdG9Nb2RlbE5hbWU6ICdpbnZvaWNlTGluZScsXG4gICAgICAgIHRvQ29sdW1uTmFtZTogJ0ludm9pY2VJZCcsXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5PTkVfVE9fTUFOWSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICd0cmFjaycsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnVHJhY2tJZCcsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAnaW52b2ljZUxpbmUnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdUcmFja0lkJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19NQU5ZLFxuICAgICAgfSxcbiAgICAgIC8vIGFsYnVtIC0+IHRyYWNrXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdhbGJ1bScsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnQWxidW1JZCcsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAndHJhY2snLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdBbGJ1bUlkJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19NQU5ZLFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuICBlY29tbWVyY2U6IHtcbiAgICBuYW1lOiBTYW1wbGVEYXRhc2V0TmFtZS5FQ09NTUVSQ0UsXG4gICAgdGFibGVzOiBbXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ29saXN0X2N1c3RvbWVyc19kYXRhc2V0JyxcbiAgICAgICAgcHJpbWFyeUtleTogJ2N1c3RvbWVyX2lkJyxcbiAgICAgICAgZmlsZVBhdGg6XG4gICAgICAgICAgJ2h0dHBzOi8vYXNzZXRzLmdldHdyZW4uYWkvc2FtcGxlX2RhdGEvYnJhemlsaWFuLWVjb21tZXJjZS9vbGlzdF9jdXN0b21lcnNfZGF0YXNldC5wYXJxdWV0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnY3VzdG9tZXJzJyxcbiAgICAgICAgfSxcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdjdXN0b21lcl9jaXR5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdOYW1lIG9mIHRoZSBjaXR5IHdoZXJlIHRoZSBjdXN0b21lciBpcyBsb2NhdGVkJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdjdXN0b21lcl9jaXR5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnY3VzdG9tZXJfaWQnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdjdXN0b21lcl9pZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2N1c3RvbWVyX3N0YXRlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdOYW1lIG9mIHRoZSBzdGF0ZSB3aGVyZSB0aGUgY3VzdG9tZXIgaXMgbG9jYXRlZCcsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnY3VzdG9tZXJfc3RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdjdXN0b21lcl91bmlxdWVfaWQnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSBpZCBvZiB0aGUgY3VzdG9tZXInLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ2N1c3RvbWVyX3VuaXF1ZV9pZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2N1c3RvbWVyX3ppcF9jb2RlX3ByZWZpeCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRmlyc3QgNSBkaWdpdHMgb2YgY3VzdG9tZXIgemlwIGNvZGUnLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ2N1c3RvbWVyX3ppcF9jb2RlX3ByZWZpeCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2N1c3RvbWVyX2NpdHknLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnY3VzdG9tZXJfaWQnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnY3VzdG9tZXJfc3RhdGUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnY3VzdG9tZXJfdW5pcXVlX2lkJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2N1c3RvbWVyX3ppcF9jb2RlX3ByZWZpeCcsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ29saXN0X29yZGVyX2l0ZW1zX2RhdGFzZXQnLFxuICAgICAgICBwcmltYXJ5S2V5OiAnb3JkZXJfaXRlbV9pZCcsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2JyYXppbGlhbi1lY29tbWVyY2Uvb2xpc3Rfb3JkZXJfaXRlbXNfZGF0YXNldC5wYXJxdWV0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnb3JkZXIgaXRlbXMnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgJ1RoaXMgdGFibGUgY29udGFpbnMgdGhlIGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gYSBzcGVjaWZpYyBvcmRlciBjb250YWluaW5nIGl0cyBzaGlwcGluZyBjb3N0LCBwcm9kdWN0cywgY29zdCwgbnVtYmVyIG9mIG9yZGVyIGl0ZW1zLCBhbmQgdGhlIHNlbGxlci4nLFxuICAgICAgICB9LFxuICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2ZyZWlnaHRfdmFsdWUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnQ29zdCBvZiBzaGlwcGluZyBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmljIG9yZGVyIGl0ZW0nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ2ZyZWlnaHRfdmFsdWUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdvcmRlcl9pZCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIG9yZGVyIGFjcm9zcyB0aGUgcGxhdGZvcm0nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ29yZGVyX2lkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnb3JkZXJfaXRlbV9pZCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdVbmlxdWUgaWRlbnRpZmllciBmb3IgZWFjaCBpdGVtIHdpdGhpbiBhIHNwZWNpZmljIG9yZGVyJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdvcmRlcl9pdGVtX2lkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAncHJpY2UnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ByaWNlIG9mIHRoZSBpbmRpdmlkdWFsIGl0ZW0gd2l0aGluIHRoZSBvcmRlcicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncHJpY2UnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdwcm9kdWN0X2lkJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ1VuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgcHJvZHVjdCBzb2xkIGluIHRoZSBvcmRlci4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3Byb2R1Y3RfaWQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZWxsZXJfaWQnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHNlbGxlciB3aG8gZnVsZmlsbGVkIHRoZSBvcmRlciBpdGVtLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnc2VsbGVyX2lkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnc2hpcHBpbmdfbGltaXRfZGF0ZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdEZWFkbGluZSBmb3IgdGhlIG9yZGVyIGl0ZW0gdG8gYmUgc2hpcHBlZCBieSB0aGUgc2VsbGVyLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnc2hpcHBpbmdfbGltaXRfZGF0ZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2ZyZWlnaHRfdmFsdWUnLCBkYXRhVHlwZTogJ0RPVUJMRScgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdvcmRlcl9pZCcsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdvcmRlcl9pdGVtX2lkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncHJpY2UnLCBkYXRhVHlwZTogJ0RPVUJMRScgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdwcm9kdWN0X2lkJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3NlbGxlcl9pZCcsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdzaGlwcGluZ19saW1pdF9kYXRlJywgZGF0YVR5cGU6ICdUSU1FU1RBTVAnIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICdvbGlzdF9vcmRlcnNfZGF0YXNldCcsXG4gICAgICAgIHByaW1hcnlLZXk6ICdvcmRlcl9pZCcsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2JyYXppbGlhbi1lY29tbWVyY2Uvb2xpc3Rfb3JkZXJzX2RhdGFzZXQucGFycXVldCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ29yZGVycycsXG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAnVGhpcyB0YWJsZSBjb250YWlucyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBjdXN0b21lciBvcmRlcnMsIGluY2x1ZGluZyB0aW1lc3RhbXBzIGZvciB2YXJpb3VzIHN0YWdlcyBvZiB0aGUgb3JkZXIgcHJvY2VzcyAoYXBwcm92YWwsIHNoaXBwaW5nLCBkZWxpdmVyeSksIGFzIHdlbGwgYXMgdGhlIG9yZGVyIHN0YXR1cyBhbmQgY3VzdG9tZXIgaWRlbnRpZmljYXRpb24uIEl0IGhlbHBzIHRyYWNrIHRoZSBsaWZlY3ljbGUgb2YgYW4gb3JkZXIgZnJvbSBwdXJjaGFzZSB0byBkZWxpdmVyeS4nLFxuICAgICAgICB9LFxuICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2N1c3RvbWVyX2lkJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ1VuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY3VzdG9tZXIgd2hvIHBsYWNlZCB0aGUgb3JkZXIuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdjdXN0b21lcl9pZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ29yZGVyX2FwcHJvdmVkX2F0JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ0RhdGUgYW5kIHRpbWUgd2hlbiB0aGUgb3JkZXIgd2FzIGFwcHJvdmVkIGZvciBwcm9jZXNzaW5nLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnb3JkZXJfYXBwcm92ZWRfYXQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdvcmRlcl9kZWxpdmVyZWRfY2Fycmllcl9kYXRlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ0RhdGUgd2hlbiB0aGUgb3JkZXIgd2FzIGhhbmRlZCBvdmVyIHRvIHRoZSBjYXJyaWVyIG9yIGZyZWlnaHQgZm9yd2FyZGVyIGZvciBkZWxpdmVyeS4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ29yZGVyX2RlbGl2ZXJlZF9jYXJyaWVyX2RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdvcmRlcl9kZWxpdmVyZWRfY3VzdG9tZXJfZGF0ZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGF0ZSB3aGVuIHRoZSBvcmRlciB3YXMgZGVsaXZlcmVkIHRvIHRoZSBjdXN0b21lci4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ29yZGVyX2RlbGl2ZXJlZF9jdXN0b21lcl9kYXRlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnb3JkZXJfZXN0aW1hdGVkX2RlbGl2ZXJ5X2RhdGUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnRXhwZWN0ZWQgZGVsaXZlcnkgZGF0ZSBiYXNlZCBvbiB0aGUgaW5pdGlhbCBlc3RpbWF0ZS4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ29yZGVyX2VzdGltYXRlZF9kZWxpdmVyeV9kYXRlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnb3JkZXJfaWQnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc3BlY2lmaWMgb3JkZXInLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ29yZGVyX2lkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnb3JkZXJfcHVyY2hhc2VfdGltZXN0YW1wJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ0RhdGUgYW5kIHRpbWUgd2hlbiB0aGUgb3JkZXIgd2FzIHBsYWNlZCBieSB0aGUgY3VzdG9tZXIuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdvcmRlcl9wdXJjaGFzZV90aW1lc3RhbXAnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdvcmRlcl9zdGF0dXMnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnQ3VycmVudCBzdGF0dXMgb2YgdGhlIG9yZGVyIChlLmcuLCBkZWxpdmVyZWQsIHNoaXBwZWQsIGNhbmNlbGVkKS4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ29yZGVyX3N0YXR1cycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2N1c3RvbWVyX2lkJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ29yZGVyX2FwcHJvdmVkX2F0JywgZGF0YVR5cGU6ICdUSU1FU1RBTVAnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnb3JkZXJfZGVsaXZlcmVkX2NhcnJpZXJfZGF0ZScsIGRhdGFUeXBlOiAnVElNRVNUQU1QJyB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbHVtbk5hbWU6ICdvcmRlcl9kZWxpdmVyZWRfY3VzdG9tZXJfZGF0ZScsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ1RJTUVTVEFNUCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb2x1bW5OYW1lOiAnb3JkZXJfZXN0aW1hdGVkX2RlbGl2ZXJ5X2RhdGUnLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdUSU1FU1RBTVAnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnb3JkZXJfaWQnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnb3JkZXJfcHVyY2hhc2VfdGltZXN0YW1wJywgZGF0YVR5cGU6ICdUSU1FU1RBTVAnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnb3JkZXJfc3RhdHVzJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiAnb2xpc3Rfb3JkZXJfcGF5bWVudHNfZGF0YXNldCcsXG4gICAgICAgIHByaW1hcnlLZXk6ICdvcmRlcl9pZCcsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2JyYXppbGlhbi1lY29tbWVyY2Uvb2xpc3Rfb3JkZXJfcGF5bWVudHNfZGF0YXNldC5wYXJxdWV0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnb3JkZXIgcGF5bWVudHMnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgJ1RoaXMgdGFibGUgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgcGF5bWVudCBkZXRhaWxzIGZvciBlYWNoIG9yZGVyLCBpbmNsdWRpbmcgcGF5bWVudCBtZXRob2RzLCBhbW91bnRzLCBpbnN0YWxsbWVudCBwbGFucywgYW5kIHBheW1lbnQgc2VxdWVuY2VzLCBoZWxwaW5nIHRvIHRyYWNrIGhvdyBvcmRlcnMgd2VyZSBwYWlkIGFuZCBwcm9jZXNzZWQgd2l0aGluIHRoZSBlLWNvbW1lcmNlIHBsYXRmb3JtLicsXG4gICAgICAgIH0sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnb3JkZXJfaWQnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBvcmRlciBhc3NvY2lhdGVkIHdpdGggdGhlIHBheW1lbnQuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdvcmRlcl9pZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3BheW1lbnRfaW5zdGFsbG1lbnRzJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ051bWJlciBvZiBpbnN0YWxsbWVudHMgdGhlIHBheW1lbnQgaXMgZGl2aWRlZCBpbnRvIGZvciB0aGUgb3JkZXIuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdwYXltZW50X2luc3RhbGxtZW50cycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3BheW1lbnRfc2VxdWVudGlhbCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdTZXF1ZW5jZSBudW1iZXIgZm9yIHRyYWNraW5nIG11bHRpcGxlIHBheW1lbnRzIHdpdGhpbiB0aGUgc2FtZSBvcmRlci4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3BheW1lbnRfc2VxdWVudGlhbCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3BheW1lbnRfdHlwZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdNZXRob2QgdXNlZCBmb3IgdGhlIHBheW1lbnQsIHN1Y2ggYXMgY3JlZGl0IGNhcmQsIGRlYml0LCBvciB2b3VjaGVyLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncGF5bWVudF90eXBlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAncGF5bWVudF92YWx1ZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVG90YWwgYW1vdW50IHBhaWQgaW4gdGhlIHNwZWNpZmljIHRyYW5zYWN0aW9uLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncGF5bWVudF92YWx1ZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ29yZGVyX2lkJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3BheW1lbnRfaW5zdGFsbG1lbnRzJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncGF5bWVudF9zZXF1ZW50aWFsJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncGF5bWVudF90eXBlJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3BheW1lbnRfdmFsdWUnLCBkYXRhVHlwZTogJ0RPVUJMRScgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ29saXN0X3Byb2R1Y3RzX2RhdGFzZXQnLFxuICAgICAgICBwcmltYXJ5S2V5OiAncHJvZHVjdF9pZCcsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2JyYXppbGlhbi1lY29tbWVyY2Uvb2xpc3RfcHJvZHVjdHNfZGF0YXNldC5wYXJxdWV0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGRpc3BsYXlOYW1lOiAncHJvZHVjdHMnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgJ1RoaXMgdGFibGUgcHJvdmlkZXMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgcHJvZHVjdHMsIGluY2x1ZGluZyB0aGVpciBjYXRlZ29yeSwgZGltZW5zaW9ucywgd2VpZ2h0LCBkZXNjcmlwdGlvbiBsZW5ndGgsIGFuZCB0aGUgbnVtYmVyIG9mIHBob3Rvcy4gVGhpcyBoZWxwcyBpbiBtYW5hZ2luZyBwcm9kdWN0IGRldGFpbHMgYW5kIGVuaGFuY2luZyB0aGUgc2hvcHBpbmcgZXhwZXJpZW5jZSBvbiB0aGUgZS1jb21tZXJjZSBwbGF0Zm9ybS4nLFxuICAgICAgICB9LFxuICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Byb2R1Y3RfY2F0ZWdvcnlfbmFtZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdOYW1lIG9mIHRoZSBwcm9kdWN0IGNhdGVnb3J5IHRvIHdoaWNoIHRoZSBpdGVtIGJlbG9uZ3MuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdwcm9kdWN0X2NhdGVnb3J5X25hbWUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdwcm9kdWN0X2Rlc2NyaXB0aW9uX2xlbmdodCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTGVuZ3RoIG9mIHRoZSBwcm9kdWN0IGRlc2NyaXB0aW9uIGluIGNoYXJhY3RlcnMuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdwcm9kdWN0X2Rlc2NyaXB0aW9uX2xlbmdodCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Byb2R1Y3RfaGVpZ2h0X2NtJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdIZWlnaHQgb2YgdGhlIHByb2R1Y3QgaW4gY2VudGltZXRlcnMuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdwcm9kdWN0X2hlaWdodF9jbScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Byb2R1Y3RfaWQnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgcHJvZHVjdCcsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncHJvZHVjdF9pZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Byb2R1Y3RfbGVuZ3RoX2NtJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdMZW5ndGggb2YgdGhlIHByb2R1Y3QgaW4gY2VudGltZXRlcnMnLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3Byb2R1Y3RfbGVuZ3RoX2NtJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAncHJvZHVjdF9uYW1lX2xlbmdodCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTGVuZ3RoIG9mIHRoZSBwcm9kdWN0IG5hbWUgaW4gY2hhcmFjdGVycycsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncHJvZHVjdF9uYW1lX2xlbmdodCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Byb2R1Y3RfcGhvdG9zX3F0eScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTnVtYmVyIG9mIHBob3RvcyBhdmFpbGFibGUgZm9yIHRoZSBwcm9kdWN0JyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdwcm9kdWN0X3Bob3Rvc19xdHknLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdwcm9kdWN0X3dlaWdodF9nJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdXZWlnaHQgb2YgdGhlIHByb2R1Y3QgaW4gZ3JhbXMnLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3Byb2R1Y3Rfd2VpZ2h0X2cnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdwcm9kdWN0X3dpZHRoX2NtJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdXaWR0aCBvZiB0aGUgcHJvZHVjdCBpbiBjZW50aW1ldGVycycsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncHJvZHVjdF93aWR0aF9jbScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3Byb2R1Y3RfY2F0ZWdvcnlfbmFtZScsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdwcm9kdWN0X2Rlc2NyaXB0aW9uX2xlbmdodCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3Byb2R1Y3RfaGVpZ2h0X2NtJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncHJvZHVjdF9pZCcsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdwcm9kdWN0X2xlbmd0aF9jbScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3Byb2R1Y3RfbmFtZV9sZW5naHQnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdwcm9kdWN0X3Bob3Rvc19xdHknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdwcm9kdWN0X3dlaWdodF9nJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncHJvZHVjdF93aWR0aF9jbScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiAnb2xpc3Rfb3JkZXJfcmV2aWV3c19kYXRhc2V0JyxcbiAgICAgICAgcHJpbWFyeUtleTogJ3Jldmlld19pZCcsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2JyYXppbGlhbi1lY29tbWVyY2Uvb2xpc3Rfb3JkZXJfcmV2aWV3c19kYXRhc2V0LnBhcnF1ZXQnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgZGlzcGxheU5hbWU6ICdvcmRlciByZXZpZXdzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICdUaGlzIHRhYmxlIGNvbnRhaW5zIGN1c3RvbWVyIHJldmlld3MgZm9yIGVhY2ggb3JkZXIsIGluY2x1ZGluZyBmZWVkYmFjayBjb21tZW50cywgcmF0aW5ncywgYW5kIHRpbWVzdGFtcHMgZm9yIHdoZW4gdGhlIHJldmlldyB3YXMgc3VibWl0dGVkIGFuZCByZXNwb25kZWQgdG8uIEl0IGhlbHBzIHRyYWNrIGN1c3RvbWVyIHNhdGlzZmFjdGlvbiBhbmQgcmV2aWV3IG1hbmFnZW1lbnQgb24gdGhlIGUtY29tbWVyY2UgcGxhdGZvcm0uJyxcbiAgICAgICAgfSxcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdvcmRlcl9pZCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdVbmlxdWUgaWRlbnRpZmllciBsaW5raW5nIHRoZSByZXZpZXcgdG8gdGhlIGNvcnJlc3BvbmRpbmcgb3JkZXIuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdvcmRlcl9pZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Jldmlld19hbnN3ZXJfdGltZXN0YW1wJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ0RhdGUgYW5kIHRpbWUgd2hlbiB0aGUgcmV2aWV3IHdhcyByZXNwb25kZWQgdG8gYnkgdGhlIHNlbGxlcicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncmV2aWV3X2Fuc3dlcl90aW1lc3RhbXAnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdyZXZpZXdfY29tbWVudF9tZXNzYWdlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ0RldGFpbGVkIGZlZWRiYWNrIG9yIGNvbW1lbnRzIHByb3ZpZGVkIGJ5IHRoZSBjdXN0b21lciByZWdhcmRpbmcgdGhlIG9yZGVyLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncmV2aWV3X2NvbW1lbnRfbWVzc2FnZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Jldmlld19jb21tZW50X3RpdGxlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU3VtbWFyeSBvciB0aXRsZSBvZiB0aGUgY3VzdG9tZXIncyByZXZpZXdcIixcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdyZXZpZXdfY29tbWVudF90aXRsZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Jldmlld19jcmVhdGlvbl9kYXRlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ0RhdGUgYW5kIHRpbWUgd2hlbiB0aGUgY3VzdG9tZXIgaW5pdGlhbGx5IHN1Ym1pdHRlZCB0aGUgcmV2aWV3LicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncmV2aWV3X2NyZWF0aW9uX2RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdyZXZpZXdfaWQnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc3BlY2lmaWMgcmV2aWV3IGVudHJ5LicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncmV2aWV3X2lkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAncmV2aWV3X3Njb3JlJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ051bWVyaWMgcmF0aW5nIGdpdmVuIGJ5IHRoZSBjdXN0b21lciwgdHlwaWNhbGx5IHJhbmdpbmcgZnJvbSAxICh3b3JzdCkgdG8gNSAoYmVzdCkuJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdyZXZpZXdfc2NvcmUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBzY2hlbWE6IFtcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdvcmRlcl9pZCcsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdyZXZpZXdfYW5zd2VyX3RpbWVzdGFtcCcsIGRhdGFUeXBlOiAnVElNRVNUQU1QJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3Jldmlld19jb21tZW50X21lc3NhZ2UnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncmV2aWV3X2NvbW1lbnRfdGl0bGUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncmV2aWV3X2NyZWF0aW9uX2RhdGUnLCBkYXRhVHlwZTogJ1RJTUVTVEFNUCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdyZXZpZXdfaWQnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncmV2aWV3X3Njb3JlJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICdvbGlzdF9nZW9sb2NhdGlvbl9kYXRhc2V0JyxcbiAgICAgICAgcHJpbWFyeUtleTogJycsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL2Fzc2V0cy5nZXR3cmVuLmFpL3NhbXBsZV9kYXRhL2JyYXppbGlhbi1lY29tbWVyY2Uvb2xpc3RfZ2VvbG9jYXRpb25fZGF0YXNldC5wYXJxdWV0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZ2VvbG9jYXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgJ1RoaXMgdGFibGUgY29udGFpbnMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgQnJhemlsaWFuIHppcCBjb2RlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlIGNvb3JkaW5hdGVzLiBJdCBjYW4gYmUgdXNlZCB0byBwbG90IG1hcHMsIGNhbGN1bGF0ZSBkaXN0YW5jZXMgYmV0d2VlbiBzZWxsZXJzIGFuZCBjdXN0b21lcnMsIGFuZCBwZXJmb3JtIGdlb2dyYXBoaWMgYW5hbHlzaXMuJyxcbiAgICAgICAgfSxcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdnZW9sb2NhdGlvbl9jaXR5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdnZW9sb2NhdGlvbl9jaXR5JyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgY2l0eSBuYW1lIG9mIHRoZSBnZW9sb2NhdGlvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2dlb2xvY2F0aW9uX2xhdCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZ2VvbG9jYXRpb25fbGF0JyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgY29vcmRpbmF0aW9ucyBmb3IgdGhlIGxvY2F0aW9ucyBsYXRpdHVkZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2dlb2xvY2F0aW9uX2xuZycsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZ2VvbG9jYXRpb25fbG5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgY29vcmRpbmF0aW9ucyBmb3IgdGhlIGxvY2F0aW9ucyBsb25naXR1ZGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdnZW9sb2NhdGlvbl9zdGF0ZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAnZ2VvbG9jYXRpb25fc3RhdGUnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBzdGF0ZSBvZiB0aGUgZ2VvbG9jYXRpb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdnZW9sb2NhdGlvbl96aXBfY29kZV9wcmVmaXgnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ2dlb2xvY2F0aW9uX3ppcF9jb2RlX3ByZWZpeCcsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRmlyc3QgNSBkaWdpdHMgb2YgemlwIGNvZGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBzY2hlbWE6IFtcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdnZW9sb2NhdGlvbl9jaXR5JywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2dlb2xvY2F0aW9uX2xhdCcsIGRhdGFUeXBlOiAnRE9VQkxFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2dlb2xvY2F0aW9uX2xuZycsIGRhdGFUeXBlOiAnRE9VQkxFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2dlb2xvY2F0aW9uX3N0YXRlJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2dlb2xvY2F0aW9uX3ppcF9jb2RlX3ByZWZpeCcsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ29saXN0X3NlbGxlcnNfZGF0YXNldCcsXG4gICAgICAgIHByaW1hcnlLZXk6ICcnLFxuICAgICAgICBmaWxlUGF0aDpcbiAgICAgICAgICAnaHR0cHM6Ly9hc3NldHMuZ2V0d3Jlbi5haS9zYW1wbGVfZGF0YS9icmF6aWxpYW4tZWNvbW1lcmNlL29saXN0X3NlbGxlcnNfZGF0YXNldC5wYXJxdWV0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGRpc3BsYXlOYW1lOiAnc2VsbGVycycsXG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAnVGhpcyB0YWJsZSBpbmNsdWRlcyBkYXRhIGFib3V0IHRoZSBzZWxsZXJzIHRoYXQgZnVsZmlsbGVkIG9yZGVycyBtYWRlLiBVc2UgaXQgdG8gZmluZCB0aGUgc2VsbGVyIGxvY2F0aW9uIGFuZCB0byBpZGVudGlmeSB3aGljaCBzZWxsZXIgZnVsZmlsbGVkIGVhY2ggcHJvZHVjdC4nLFxuICAgICAgICB9LFxuICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3NlbGxlcl9jaXR5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgQnJhemlsaWFuIGNpdHkgd2hlcmUgdGhlIHNlbGxlciBpcyBsb2NhdGVkJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdzZWxsZXJfY2l0eScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3NlbGxlcl9pZCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBzZWxsZXIgb24gdGhlIHBsYXRmb3JtJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdzZWxsZXJfaWQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZWxsZXJfc3RhdGUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBCcmF6aWxpYW4gc3RhdGUgd2hlcmUgdGhlIHNlbGxlciBpcyBsb2NhdGVkJyxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICdzZWxsZXJfc3RhdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZWxsZXJfemlwX2NvZGVfcHJlZml4JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdGaXJzdCA1IGRpZ2l0cyBvZiBzZWxsZXIgemlwIGNvZGUnLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3NlbGxlcl96aXBfY29kZV9wcmVmaXgnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBzY2hlbWE6IFtcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdzZWxsZXJfY2l0eScsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdzZWxsZXJfaWQnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnc2VsbGVyX3N0YXRlJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3NlbGxlcl96aXBfY29kZV9wcmVmaXgnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICdwcm9kdWN0X2NhdGVnb3J5X25hbWVfdHJhbnNsYXRpb24nLFxuICAgICAgICBwcmltYXJ5S2V5OiAncHJvZHVjdF9jYXRlZ29yeV9uYW1lJyxcbiAgICAgICAgZmlsZVBhdGg6XG4gICAgICAgICAgJ2h0dHBzOi8vYXNzZXRzLmdldHdyZW4uYWkvc2FtcGxlX2RhdGEvYnJhemlsaWFuLWVjb21tZXJjZS9wcm9kdWN0X2NhdGVnb3J5X25hbWVfdHJhbnNsYXRpb24ucGFycXVldCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ3Byb2R1Y3QgY2F0ZWdvcnkgbmFtZSB0cmFuc2xhdGlvbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAnVGhpcyB0YWJsZSBjb250YWlucyB0cmFuc2xhdGlvbnMgb2YgcHJvZHVjdCBjYXRlZ29yaWVzIGZyb20gUG9ydHVndWVzZSB0byBFbmdsaXNoLicsXG4gICAgICAgIH0sXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAncHJvZHVjdF9jYXRlZ29yeV9uYW1lJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ09yaWdpbmFsIG5hbWUgb2YgdGhlIHByb2R1Y3QgY2F0ZWdvcnkgaW4gUG9ydHVndWVzZS4nLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogJ3Byb2R1Y3RfY2F0ZWdvcnlfbmFtZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Byb2R1Y3RfY2F0ZWdvcnlfbmFtZV9lbmdsaXNoJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ1RyYW5zbGF0ZWQgbmFtZSBvZiB0aGUgcHJvZHVjdCBjYXRlZ29yeSBpbiBFbmdsaXNoLicsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiAncHJvZHVjdF9jYXRlZ29yeV9uYW1lX2VuZ2xpc2gnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBzY2hlbWE6IFtcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdwcm9kdWN0X2NhdGVnb3J5X25hbWUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAncHJvZHVjdF9jYXRlZ29yeV9uYW1lX2VuZ2xpc2gnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0sXG4gICAgcXVlc3Rpb25zOiBbXG4gICAgICB7XG4gICAgICAgIHF1ZXN0aW9uOlxuICAgICAgICAgICdXaGljaCBhcmUgdGhlIHRvcCAzIGNpdGllcyB3aXRoIHRoZSBoaWdoZXN0IG51bWJlciBvZiBvcmRlcnM/JyxcbiAgICAgICAgbGFiZWw6ICdSYW5raW5nJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHF1ZXN0aW9uOlxuICAgICAgICAgICdXaGF0IGlzIHRoZSBhdmVyYWdlIHNjb3JlIG9mIHJldmlld3Mgc3VibWl0dGVkIGZvciBvcmRlcnMgcGxhY2VkIGJ5IGN1c3RvbWVycyBpbiBlYWNoIGNpdHk/JyxcbiAgICAgICAgbGFiZWw6ICdBZ2dyZWdhdGlvbicsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBxdWVzdGlvbjpcbiAgICAgICAgICAnV2hhdCBpcyB0aGUgdG90YWwgdmFsdWUgb2YgcGF5bWVudHMgbWFkZSBieSBjdXN0b21lcnMgZnJvbSBlYWNoIHN0YXRlPycsXG4gICAgICAgIGxhYmVsOiAnQWdncmVnYXRpb24nLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHJlbGF0aW9uczogW1xuICAgICAgLy8gb3JkZXJzXG4gICAgICAvLyBvcmRlcnMgLT4gY3VzdG9tZXJzXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdvbGlzdF9vcmRlcnNfZGF0YXNldCcsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnY3VzdG9tZXJfaWQnLFxuICAgICAgICB0b01vZGVsTmFtZTogJ29saXN0X2N1c3RvbWVyc19kYXRhc2V0JyxcbiAgICAgICAgdG9Db2x1bW5OYW1lOiAnY3VzdG9tZXJfaWQnLFxuICAgICAgICB0eXBlOiBSZWxhdGlvblR5cGUuTUFOWV9UT19PTkUsXG4gICAgICB9LFxuICAgICAgLy8gb3JkZXJzIC0+IGl0ZW1zXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdvbGlzdF9vcmRlcnNfZGF0YXNldCcsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnb3JkZXJfaWQnLFxuICAgICAgICB0b01vZGVsTmFtZTogJ29saXN0X29yZGVyX2l0ZW1zX2RhdGFzZXQnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdvcmRlcl9pZCcsXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5PTkVfVE9fTUFOWSxcbiAgICAgIH0sXG4gICAgICAvLyBvcmRlcnMgLT4gcmV2aWV3c1xuICAgICAge1xuICAgICAgICBmcm9tTW9kZWxOYW1lOiAnb2xpc3Rfb3JkZXJzX2RhdGFzZXQnLFxuICAgICAgICBmcm9tQ29sdW1uTmFtZTogJ29yZGVyX2lkJyxcbiAgICAgICAgdG9Nb2RlbE5hbWU6ICdvbGlzdF9vcmRlcl9yZXZpZXdzX2RhdGFzZXQnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdvcmRlcl9pZCcsXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5PTkVfVE9fTUFOWSxcbiAgICAgIH0sXG4gICAgICAvLyBvcmRlcnMgLT4gcGF5bWVudHNcbiAgICAgIHtcbiAgICAgICAgZnJvbU1vZGVsTmFtZTogJ29saXN0X29yZGVyc19kYXRhc2V0JyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdvcmRlcl9pZCcsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAnb2xpc3Rfb3JkZXJfcGF5bWVudHNfZGF0YXNldCcsXG4gICAgICAgIHRvQ29sdW1uTmFtZTogJ29yZGVyX2lkJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19NQU5ZLFxuICAgICAgfSxcbiAgICAgIC8vIGl0ZW1zIC0+IHByb2R1Y3RzXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdvbGlzdF9vcmRlcl9pdGVtc19kYXRhc2V0JyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdwcm9kdWN0X2lkJyxcbiAgICAgICAgdG9Nb2RlbE5hbWU6ICdvbGlzdF9wcm9kdWN0c19kYXRhc2V0JyxcbiAgICAgICAgdG9Db2x1bW5OYW1lOiAncHJvZHVjdF9pZCcsXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5NQU5ZX1RPX09ORSxcbiAgICAgIH0sXG4gICAgICAvLyBpdGVtcyAtPiBzZWxsZXJzXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdvbGlzdF9vcmRlcl9pdGVtc19kYXRhc2V0JyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdzZWxsZXJfaWQnLFxuICAgICAgICB0b01vZGVsTmFtZTogJ29saXN0X3NlbGxlcnNfZGF0YXNldCcsXG4gICAgICAgIHRvQ29sdW1uTmFtZTogJ3NlbGxlcl9pZCcsXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5NQU5ZX1RPX09ORSxcbiAgICAgIH0sXG4gICAgICAvLyBnZW9sb2NhdGlvbiAtPiBjdXN0b21lcnMgKHppcCBjb2RlIHByZWZpeClcbiAgICAgIHtcbiAgICAgICAgZnJvbU1vZGVsTmFtZTogJ29saXN0X2dlb2xvY2F0aW9uX2RhdGFzZXQnLFxuICAgICAgICBmcm9tQ29sdW1uTmFtZTogJ2dlb2xvY2F0aW9uX3ppcF9jb2RlX3ByZWZpeCcsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAnb2xpc3RfY3VzdG9tZXJzX2RhdGFzZXQnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdjdXN0b21lcl96aXBfY29kZV9wcmVmaXgnLFxuICAgICAgICB0eXBlOiBSZWxhdGlvblR5cGUuT05FX1RPX01BTlksXG4gICAgICB9LFxuICAgICAgLy8gZ2VvbG9jYXRpb24gLT4gc2VsbGVycyAoemlwIGNvZGUgcHJlZml4KVxuICAgICAge1xuICAgICAgICBmcm9tTW9kZWxOYW1lOiAnb2xpc3RfZ2VvbG9jYXRpb25fZGF0YXNldCcsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnZ2VvbG9jYXRpb25femlwX2NvZGVfcHJlZml4JyxcbiAgICAgICAgdG9Nb2RlbE5hbWU6ICdvbGlzdF9zZWxsZXJzX2RhdGFzZXQnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdzZWxsZXJfemlwX2NvZGVfcHJlZml4JyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19NQU5ZLFxuICAgICAgfSxcbiAgICAgIC8vIHByb2R1Y3QgY2F0ZWdvcnkgbmFtZSB0cmFuc2xhdGlvbiAtPiBwcm9kdWN0c1xuICAgICAge1xuICAgICAgICBmcm9tTW9kZWxOYW1lOiAncHJvZHVjdF9jYXRlZ29yeV9uYW1lX3RyYW5zbGF0aW9uJyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdwcm9kdWN0X2NhdGVnb3J5X25hbWUnLFxuICAgICAgICB0b01vZGVsTmFtZTogJ29saXN0X3Byb2R1Y3RzX2RhdGFzZXQnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdwcm9kdWN0X2NhdGVnb3J5X25hbWUnLFxuICAgICAgICB0eXBlOiBSZWxhdGlvblR5cGUuT05FX1RPX01BTlksXG4gICAgICB9LFxuICAgIF0sXG4gIH0sXG4gIG5iYToge1xuICAgIG5hbWU6IFNhbXBsZURhdGFzZXROYW1lLk5CQSxcbiAgICB0YWJsZXM6IFtcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiAnZ2FtZScsXG4gICAgICAgIHByaW1hcnlLZXk6ICdJZCcsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL3dyZW5haS1wdWJsaWMuczMuYW1hem9uYXdzLmNvbS9kZW1vL3YwLjMuMC9OQkEvZ2FtZS5jc3YnLFxuICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0lkJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdTZWFzb25JZCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnVGVhbUlkSG9tZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnV2xIb21lJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdNaW4nLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0ZnbUhvbWUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ251bWJlciBvZiBmaWVsZCBnb2FscyBtYWRlIGJ5IHRoZSBob21lIHRlYW0uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRmdhSG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIGZpZWxkIGdvYWxzIGF0dGVtcHRlZCBieSB0aGUgaG9tZSB0ZWFtLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3RocmVlcEhvbWUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnbnVtYmVyIG9mIHRocmVlIHBvaW50IGZpZWxkIGdvYWxzIG1hZGUgYnkgdGhlIGhvbWUgdGVhbS4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0aHJlZXBhSG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdudW1iZXIgb2YgdGhyZWUgcG9pbnQgZmllbGQgZ29hbHMgYXR0ZW1wdGVkIGJ5IHRoZSBob21lIHRlYW0uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRnRtSG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIGZyZWUgdGhyb3dzIG1hZGUgYnkgdGhlIGhvbWUgdGVhbS4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdGdGFIb21lJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdudW1iZXIgb2YgZnJlZSB0aHJvd3MgYXR0ZW1wdGVkIGJ5IHRoZSBob21lIHRlYW0uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnT3JlYkhvbWUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ251bWJlciBvZiBvZmZlbnNpdmUgcmVib3VuZHMgYnkgdGhlIGhvbWUgdGVhbS4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEcmViSG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIGRlZmVuc2l2ZSByZWJvdW5kcyBieSB0aGUgaG9tZSB0ZWFtLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1JlYkhvbWUnLFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBkZXNjcmlwdGlvbjogJ251bWJlciBvZiByZWJvdW5kcyBieSB0aGUgaG9tZSB0ZWFtLicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdBc3RIb21lJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgZGVzY3JpcHRpb246ICdudW1iZXIgb2YgYXNzaXN0cyBieSB0aGUgaG9tZSB0ZWFtLicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdTdGxIb21lJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgZGVzY3JpcHRpb246ICdudW1iZXIgb2Ygc3RlZWxzIGJ5IHRoZSBob21lIHRlYW0uJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0Jsa0hvbWUnLFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBkZXNjcmlwdGlvbjogJ251bWJlciBvZiBibG9ja3MgYnkgdGhlIGhvbWUgdGVhbS4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnVG92SG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIHR1cm5vdmVycyBieSB0aGUgaG9tZSB0ZWFtLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1BmSG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIHBlcnNvbmFsIGZvdWxzIGJ5IHRoZSBob21lIHRlYW0uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUHRzSG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnVG90YWwgc2NvcmUgb2YgdGhlIGhvbWUgdGVhbS4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUGx1c01pbXVzSG9tZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnVGVhbUlkQXdheScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnV2xBd2F5JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdGZ21Bd2F5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdudW1iZXIgb2YgZmllbGQgZ29hbHMgbWFkZSBieSB0aGUgYXdheSB0ZWFtLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0ZnYUF3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ251bWJlciBvZiBmaWVsZCBnb2FscyBhdHRlbXB0ZWQgYnkgdGhlIGF3YXkgdGVhbS4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0aHJlZXBBd2F5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ251bWJlciBvZiB0aHJlZSBwb2ludCBmaWVsZCBnb2FscyBtYWRlIGJ5IHRoZSBhd2F5IHRlYW0uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndGhyZWVwYUF3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnbnVtYmVyIG9mIHRocmVlIHBvaW50IGZpZWxkIGdvYWxzIGF0dGVtcHRlZCBieSB0aGUgYXdheSB0ZWFtLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0Z0bUF3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ251bWJlciBvZiBmcmVlIHRocm93cyBtYWRlIGJ5IHRoZSBhd2F5IHRlYW0uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRnRhQXdheScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIGZyZWUgdGhyb3dzIGF0dGVtcHRlZCBieSB0aGUgYXdheSB0ZWFtLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ09yZWJBd2F5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdudW1iZXIgb2Ygb2ZmZW5zaXZlIHJlYm91bmRzIGJ5IHRoZSBhd2F5IHRlYW0uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRHJlYkF3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ251bWJlciBvZiBkZWZlbnNpdmUgcmVib3VuZHMgYnkgdGhlIGF3YXkgdGVhbS4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdSZWJBd2F5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgZGVzY3JpcHRpb246ICdudW1iZXIgb2YgcmVib3VuZHMgYnkgdGhlIGF3YXkgdGVhbS4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnQXN0QXdheScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIGFzc2lzdHMgYnkgdGhlIGF3YXkgdGVhbS4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnU3RsQXdheScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIHN0ZWVscyBieSB0aGUgYXdheSB0ZWFtLicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdCbGtBd2F5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgZGVzY3JpcHRpb246ICdudW1iZXIgb2YgYmxvY2tzIGJ5IHRoZSBhd2F5IHRlYW0uJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1RvdkF3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ251bWJlciBvZiB0dXJub3ZlcnMgYnkgdGhlIGF3YXkgdGVhbS4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQZkF3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ251bWJlciBvZiBwZXJzb25hbCBmb3VscyBieSB0aGUgYXdheSB0ZWFtLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1B0c0F3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBkZXNjcmlwdGlvbjogJ1RvdGFsIHNjb3JlIG9mIHRoZSBhd2F5IHRlYW0uJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1BsdXNNaW11c0F3YXknLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3NlYXNvblR5cGUnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1NlYXNvbklkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnVGVhbUlkSG9tZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0lkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnR2FtZURhdGUnLCBkYXRhVHlwZTogJ0RBVEUnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnV2xIb21lJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ01pbicsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0ZnbUhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdGZ2FIb21lJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRmdQY3RfaG9tZScsIGRhdGFUeXBlOiAnRE9VQkxFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3RocmVlcEhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICd0aHJlZXBhSG9tZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ2ZnM19wY3RfaG9tZScsIGRhdGFUeXBlOiAnRE9VQkxFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0Z0bUhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdGdGFIb21lJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnZnRfcGN0X2hvbWUnLCBkYXRhVHlwZTogJ0RPVUJMRScgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdPcmViSG9tZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0RyZWJIb21lJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUmViSG9tZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0FzdEhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdTdGxIb21lJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQmxrSG9tZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1RvdkhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQZkhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQdHNIb21lJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUGx1c01pbnVzSG9tZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1RlYW1JZEF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdXbEF3YXknLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRmdtQXdheScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0ZnYUF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdmZ19wY3RfYXdheScsIGRhdGFUeXBlOiAnRE9VQkxFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ3RocmVlcEF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICd0aHJlZXBhQXdheScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0ZnM19wY3RfYXdheScsIGRhdGFUeXBlOiAnRE9VQkxFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0Z0bUF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdGdGFBd2F5JywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRnRfcGN0X2F3YXknLCBkYXRhVHlwZTogJ0RPVUJMRScgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdPcmViQXdheScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0RyZWJBd2F5JywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUmViQXdheScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0FzdEF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdTdGxBd2F5JywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQmxrQXdheScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1RvdkF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQZkF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQdHNBd2F5JywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUGx1c01pbnVzQXdheScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1NlYXNvblR5cGUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICdUaGlzIHRhYmxlIGRlc2NyaWJlcyB0aGUgZ2FtZSBzdGF0aXN0aWNzIGZvciBib3RoIHRoZSBob21lIGFuZCBhd2F5IHRlYW1zIGluIGVhY2ggTkJBIGdhbWUuIFR1cm5vdmVyIHBlcmNlbnRhZ2UgaXMgdGhlIG51bWJlciBvZiBwb3NzZXNzaW9ucyB0aGF0IGVuZCBpbiBhIHR1cm5vdmVyLiBUaGUgZm9ybXVsYSBmb3IgdHVybm92ZXIgcGVyY2VudGFnZSAoVE9WJSkgaXMgXCJUT1YlID0gKFRvdiDDtyAoRkdBICsgKDAuNDQgeCBGVEEpICsgVG92KSkgeCAxMDAlXCIuJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ2xpbmVfc2NvcmUnLFxuICAgICAgICBwcmltYXJ5S2V5OiAnR2FtZUlkJyxcbiAgICAgICAgZmlsZVBhdGg6XG4gICAgICAgICAgJ2h0dHBzOi8vd3JlbmFpLXB1YmxpYy5zMy5hbWF6b25hd3MuY29tL2RlbW8vdjAuMy4wL05CQS9saW5lX3Njb3JlLmNzdicsXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnR2FtZUlkJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdHYW1lRGF0ZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnR2FtZVNlcXVlbmNlJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdUZWFtSWRIb21lJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdUZWFtV2luc0xvc3Nlc0hvbWUnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1B0c1F0cjFIb21lJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgc2NvcmUgb2YgdGhlIGhvbWUgdGVhbSBpbiB0aGUgZmlyc3QgcXVhcnRlci4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQdHNRdHIySG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHNjb3JlIG9mIHRoZSBob21lIHRlYW0gaW4gdGhlIHNlY29uZCBxdWFydGVyLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1B0c1F0cjNIb21lJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgc2NvcmUgb2YgdGhlIGhvbWUgdGVhbSBpbiB0aGUgdGhpcmQgcXVhcnRlci4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQdHNRdHI0SG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHNjb3JlIG9mIHRoZSBob21lIHRlYW0gaW4gdGhlIGZvdXJ0aCBxdWFydGVyLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1B0c090MUhvbWUnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAnVGhlIHNjb3JlIG9mIHRoZSBob21lIHRlYW0gaW4gdGhlIG92ZXJ0aW1lLiBUaGUgdmFsdWUgb2YgMCBpbmRpY2F0ZXMgdGhhdCB0aGUgZ2FtZSBkaWQgbm90IGdvIGludG8gb3ZlcnRpbWUuJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUHRzSG9tZScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnVG90YWwgc2NvcmUgb2YgdGhlIGhvbWUgdGVhbS4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnVGVhbUlkQXdheScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnVGVhbVdpbnNMb3NzZXNBd2F5JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQdHNRdHIxQXdheScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHNjb3JlIG9mIHRoZSBhd2F5IHRlYW0gaW4gdGhlIGZpcnN0IHF1YXJ0ZXIuJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUHRzUXRyMkF3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBzY29yZSBvZiB0aGUgYXdheSB0ZWFtIGluIHRoZSBzZWNvbmQgcXVhcnRlci4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQdHNRdHIzQXdheScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIHNjb3JlIG9mIHRoZSBhd2F5IHRlYW0gaW4gdGhlIHRoaXJkIHF1YXJ0ZXIuJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnUHRzUXRyNEF3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBzY29yZSBvZiB0aGUgYXdheSB0ZWFtIGluIHRoZSBmb3VydGggcXVhcnRlci4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQdHNPdDFBd2F5JyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgJ1RoZSBzY29yZSBvZiB0aGUgYXdheSB0ZWFtIGluIHRoZSBvdmVydGltZS4gVGhlIHZhbHVlIG9mIDAgaW5kaWNhdGVzIHRoYXQgdGhlIGdhbWUgZGlkIG5vdCBnbyBpbnRvIG92ZXJ0aW1lLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1B0c0F3YXknLFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBkZXNjcmlwdGlvbjogJ1RvdGFsIHNjb3JlIG9mIHRoZSBhd2F5IHRlYW0uJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0dhbWVEYXRlJywgZGF0YVR5cGU6ICdEQVRFJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0dhbWVTZXF1ZW5jZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0dhbWVJZCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1RlYW1JZEhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdUZWFtV2luc0xvc3Nlc0hvbWUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUHRzUXRyMUhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQdHNRdHIySG9tZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1B0c1F0cjNIb21lJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUHRzUXRyNEhvbWUnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQdHNPdDFIb21lJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUHRzSG9tZScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1RlYW1JZEF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdUZWFtV2luc0xvc3Nlc0F3YXknLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUHRzUXRyMUF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQdHNRdHIyQXdheScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1B0c1F0cjNBd2F5JywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUHRzUXRyNEF3YXknLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQdHNPdDFBd2F5JywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnUHRzQXdheScsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICBdLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAnVGhpcyB0YWJsZSBkZXNjcmliZXMgdGhlIHNjb3JlcyBhbmQgdG90YWwgc2NvcmUgZm9yIGVhY2ggcXVhcnRlciBvciBvdmVydGltZSBvZiBhbiBOQkEgZ2FtZSwgZGV0YWlsaW5nIHRoZSBzY29yZXMgZm9yIGJvdGggdGhlIGhvbWUgdGVhbSBhbmQgdGhlIGF3YXkgdGVhbS4nLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFibGVOYW1lOiAncGxheWVyX2dhbWVzJyxcbiAgICAgICAgcHJpbWFyeUtleTogJ0lkJyxcbiAgICAgICAgZmlsZVBhdGg6XG4gICAgICAgICAgJ2h0dHBzOi8vd3JlbmFpLXB1YmxpYy5zMy5hbWF6b25hd3MuY29tL2RlbW8vdjAuMy4wL05CQS9wbGF5ZXJfZ2FtZS5jc3YnLFxuICAgICAgICBjb2x1bW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0lkJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdHYW1lSWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1BsYXllcklkJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEYXRlJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdBZ2UnLFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBkZXNjcmlwdGlvbjogJ3BsYXllciBhZ2UuIFRoZSBmb3JtYXQgaXMgXCJhZ2UtZGF5c1wiJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1RtJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgZGVzY3JpcHRpb246ICd0ZWFtIGFmZmlsaWF0aW9uLicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdPcHAnLFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBkZXNjcmlwdGlvbjogJ29wcG9zaW5nIHRlYW0uJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ01QJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgZGVzY3JpcHRpb246ICdtaW51dGVzIHBsYXllZCcgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdGRycsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIHR3byBwb2ludCBmaWVsZCBnb2FscyBtYWRlLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0ZHQScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICdudW1iZXIgb2YgdHdvIHBvaW50IGZpZWxkIGdvYWxzIGF0dGVtcHRlZCAoZG8gbm90IGluY2x1ZGUgZnJlZSB0aHJvd3MpLicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3RocmVlUCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIHRocmVlIHBvaW50IGZpZWxkIGdvYWxzIG1hZGUuJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndGhyZWVQQScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIHRocmVlIHBvaW50IGZpZWxkIGdvYWxzIGF0dGVtcHRlZC4nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdGVCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIGZyZWUgdGhyb3dzIG1hZGUuJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0ZUQScsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIGZyZWUgdGhyb3dzIGF0dGVtcHRlZC4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnT1JCJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgZGVzY3JpcHRpb246ICdudW1iZXIgb2Ygb2ZmZW5zaXZlIHJlYm91bmRzLicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdEUkInLFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBkZXNjcmlwdGlvbjogJ251bWJlciBvZiBkZWZlbnNpdmUgcmVib3VuZHMuJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0FTVCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIGFzc2lzdHMuJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1NUTCcsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIFN0ZWFscy4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnQkxLJyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgZGVzY3JpcHRpb246ICdudW1iZXIgb2YgYmxvY2tzLicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdUT1YnLFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBkZXNjcmlwdGlvbjogJ251bWJlciBvZiB0dXJub3ZlcnMgYWxsb3dlZCcgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQRicsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAnbnVtYmVyIG9mIHBlcnNvbmFsIGZvdWxzJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1BUUycsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IGRlc2NyaXB0aW9uOiAndG90YWwgc2NvcmUnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgc2NoZW1hOiBbXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnSWQnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQbGF5ZXJJRCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0dhbWVJRCcsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0RhdGUnLCBkYXRhVHlwZTogJ0RBVEUnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQWdlJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LCAvLyAzNS0wMzJcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdUbScsIGRhdGFUeXBlOiAnVkFSQ0hBUicgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdPcHAnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnTVAnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sIC8vIDM3OjI1OjAwXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRkcnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdGR0EnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICd0aHJlZVAnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICd0aHJlZVBBJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRlQnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdGVEEnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdPUkInLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdEUkInLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdUUkInLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdBU1QnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdTVEwnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdCTEsnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdUT1YnLCBkYXRhVHlwZTogJ0JJR0lOVCcgfSxcbiAgICAgICAgICB7IGNvbHVtbk5hbWU6ICdQRicsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ1BUUycsIGRhdGFUeXBlOiAnQklHSU5UJyB9LFxuICAgICAgICBdLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAnVGhpcyB0YWJsZSBkZXNjcmliZXMgdGhlIGdhbWUgc3RhdGlzdGljcyBmb3IgZWFjaCBOQkEgcGxheWVyIGluIGV2ZXJ5IGdhbWUuIFR1cm5vdmVyIHBlcmNlbnRhZ2UgaXMgdGhlIG51bWJlciBvZiBwb3NzZXNzaW9ucyB0aGF0IGVuZCBpbiBhIHR1cm5vdmVyLiBUaGUgZm9ybXVsYSBmb3IgdHVybm92ZXIgcGVyY2VudGFnZSAoVE9WJSkgaXMgXCJUT1YlID0gKFRvdiDDtyAoRkdBICsgKDAuNDQgeCBGVEEpICsgVG92KSkgeCAxMDAlXCIuJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhYmxlTmFtZTogJ3BsYXllcicsXG4gICAgICAgIHByaW1hcnlLZXk6ICdJZCcsXG4gICAgICAgIGZpbGVQYXRoOlxuICAgICAgICAgICdodHRwczovL3dyZW5haS1wdWJsaWMuczMuYW1hem9uYXdzLmNvbS9kZW1vL3YwLjMuMC9OQkEvcGxheWVyLmNzdicsXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnSWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1RlYW1JZCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnRnVsbE5hbWUnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0ZpcnN0TmFtZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnTGFzdE5hbWUnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0lkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnVGVhbUlkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRnVsbE5hbWUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRmlyc3ROYW1lJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0xhc3ROYW1lJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICBdLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICAnVGhpcyB0YWJsZSBkZXNjcmliZXMgTkJBIHBsYXllcnMgYnkgdGhlaXIgSUQsIG5hbWUsIGFuZCB0ZWFtIGFmZmlsaWF0aW9uLicsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWJsZU5hbWU6ICd0ZWFtJyxcbiAgICAgICAgcHJpbWFyeUtleTogJ0lkJyxcbiAgICAgICAgZmlsZVBhdGg6XG4gICAgICAgICAgJ2h0dHBzOi8vd3JlbmFpLXB1YmxpYy5zMy5hbWF6b25hd3MuY29tL2RlbW8vdjAuMy4wL05CQS90ZWFtLmNzdicsXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnSWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0Z1bGxOYW1lJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdBYmJyZXZpYXRpb24nLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ05pY2tuYW1lJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdDaXR5JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdTdGF0ZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnWWVhckZvdW5kZWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0lkJywgZGF0YVR5cGU6ICdCSUdJTlQnIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnRnVsbE5hbWUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnQWJicmV2aWF0aW9uJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ05pY2tuYW1lJywgZGF0YVR5cGU6ICdWQVJDSEFSJyB9LFxuICAgICAgICAgIHsgY29sdW1uTmFtZTogJ0NpdHknLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnU3RhdGUnLCBkYXRhVHlwZTogJ1ZBUkNIQVInIH0sXG4gICAgICAgICAgeyBjb2x1bW5OYW1lOiAnWWVhckZvdW5kZWQnLCBkYXRhVHlwZTogJ0lOVCcgfSxcbiAgICAgICAgXSxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgJ1RoaXMgdGFibGUgZGVzY3JpYmVzIE5CQSB0ZWFtcyBieSB0aGVpciBJRCwgdGVhbSBuYW1lLCB0ZWFtIGFiYnJldmlhdGlvbiwgYW5kIGZvdW5kaW5nIGRhdGUuJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBxdWVzdGlvbnM6IFtcbiAgICAgIHtcbiAgICAgICAgcXVlc3Rpb246XG4gICAgICAgICAgJ0hvdyBtYW55IHRocmVlLXBvaW50ZXJzIHdlcmUgbWFkZSBieSBlYWNoIHBsYXllciBpbiBlYWNoIGdhbWU/JyxcbiAgICAgICAgbGFiZWw6ICdBZ2dyZWdhdGlvbicsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBxdWVzdGlvbjpcbiAgICAgICAgICAnV2hhdCBpcyB0aGUgZGlmZmVyZW5jZXMgaW4gdHVybm92ZXIgcmF0ZXMgYmV0d2VlbiB0ZWFtcyB3aXRoIGhpZ2ggYW5kIGxvdyBhdmVyYWdlIHNjb3Jlcz8nLFxuICAgICAgICBsYWJlbDogJ0NvbXBhcmlzb24nLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcXVlc3Rpb246XG4gICAgICAgICAgJ1doaWNoIHRlYW1zIGhhZCB0aGUgaGlnaGVzdCBhdmVyYWdlIHBvaW50cyBzY29yZWQgcGVyIGdhbWUgdGhyb3VnaG91dCB0aGUgc2Vhc29uPycsXG4gICAgICAgIGxhYmVsOiAnUmFua2luZycsXG4gICAgICB9LFxuICAgIF0sXG4gICAgcmVsYXRpb25zOiBbXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdnYW1lJyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdJZCcsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAnbGluZV9zY29yZScsXG4gICAgICAgIHRvQ29sdW1uTmFtZTogJ0dhbWVJZCcsXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5PTkVfVE9fTUFOWSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdsaW5lX3Njb3JlJyxcbiAgICAgICAgZnJvbUNvbHVtbk5hbWU6ICdHYW1lSWQnLFxuICAgICAgICB0b01vZGVsTmFtZTogJ3BsYXllcl9nYW1lcycsXG4gICAgICAgIHRvQ29sdW1uTmFtZTogJ0dhbWVJRCcsXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5PTkVfVE9fTUFOWSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGZyb21Nb2RlbE5hbWU6ICdwbGF5ZXInLFxuICAgICAgICBmcm9tQ29sdW1uTmFtZTogJ1RlYW1JZCcsXG4gICAgICAgIHRvTW9kZWxOYW1lOiAndGVhbScsXG4gICAgICAgIHRvQ29sdW1uTmFtZTogJ0lkJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19PTkUsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmcm9tTW9kZWxOYW1lOiAndGVhbScsXG4gICAgICAgIGZyb21Db2x1bW5OYW1lOiAnSWQnLFxuICAgICAgICB0b01vZGVsTmFtZTogJ2dhbWUnLFxuICAgICAgICB0b0NvbHVtbk5hbWU6ICdUZWFtSWRIb21lJyxcbiAgICAgICAgdHlwZTogUmVsYXRpb25UeXBlLk9ORV9UT19NQU5ZLFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IGJ1aWxkSW5pdFNxbCA9IChkYXRhc2V0TmFtZTogU2FtcGxlRGF0YXNldE5hbWUpID0+IHtcbiAgY29uc3Qgc2VsZWN0ZWREYXRhc2V0ID0gc2FtcGxlRGF0YXNldHNbZGF0YXNldE5hbWUudG9Mb3dlckNhc2UoKV07XG5cbiAgcmV0dXJuIHNlbGVjdGVkRGF0YXNldC50YWJsZXNcbiAgICAubWFwKCh0YWJsZSkgPT4ge1xuICAgICAgY29uc3Qgc2NoZW1hID0gdGFibGUuc2NoZW1hXG4gICAgICAgID8ubWFwKCh7IGNvbHVtbk5hbWUsIGRhdGFUeXBlIH0pID0+IGAnJHtjb2x1bW5OYW1lfSc6ICcke2RhdGFUeXBlfSdgKVxuICAgICAgICAuam9pbignLCAnKTtcbiAgICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSB0YWJsZS5maWxlUGF0aC5zcGxpdCgnLicpLnBvcCgpO1xuICAgICAgY29uc3QgY3JlYXRlVGFibGVTdGF0ZW1lbnQgPSAoZmlsZVR5cGU6IHN0cmluZywgc2NoZW1hPzogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChmaWxlVHlwZSAhPT0gJ2NzdicgJiYgZmlsZVR5cGUgIT09ICdwYXJxdWV0Jykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgZmlsZSB0eXBlOiAke2ZpbGVUeXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJhc2VTdGF0ZW1lbnQgPSBgQ1JFQVRFIFRBQkxFICR7dGFibGUudGFibGVOYW1lfSBBUyBzZWxlY3QgKiBGUk9NIHJlYWRfJHtmaWxlVHlwZX0oJyR7dGFibGUuZmlsZVBhdGh9J2A7XG4gICAgICAgIGNvbnN0IHNjaGVtYVBhcnQgPVxuICAgICAgICAgIGZpbGVUeXBlID09PSAnY3N2JyAmJiBzY2hlbWEgPyBgLCBjb2x1bW5zPXske3NjaGVtYX19YCA6ICcnO1xuICAgICAgICBjb25zdCBoZWFkZXJQYXJ0ID0gZmlsZVR5cGUgPT09ICdjc3YnID8gJyxoZWFkZXI9dHJ1ZScgOiAnJztcbiAgICAgICAgcmV0dXJuIGAke2Jhc2VTdGF0ZW1lbnR9JHtoZWFkZXJQYXJ0fSR7c2NoZW1hUGFydH0pO2A7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gY3JlYXRlVGFibGVTdGF0ZW1lbnQoZmlsZUV4dGVuc2lvbiwgc2NoZW1hKTtcbiAgICB9KVxuICAgIC5qb2luKCdcXG4nKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRSZWxhdGlvbnMgPSAoZGF0YXNldE5hbWU6IFNhbXBsZURhdGFzZXROYW1lKSA9PiB7XG4gIGNvbnN0IHNlbGVjdGVkRGF0YXNldCA9IHNhbXBsZURhdGFzZXRzW2RhdGFzZXROYW1lLnRvTG93ZXJDYXNlKCldO1xuICByZXR1cm4gc2VsZWN0ZWREYXRhc2V0LnJlbGF0aW9ucztcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTYW1wbGVBc2tRdWVzdGlvbnMgPSAoZGF0YXNldE5hbWU6IFNhbXBsZURhdGFzZXROYW1lKSA9PiB7XG4gIGNvbnN0IHNlbGVjdGVkRGF0YXNldCA9IHNhbXBsZURhdGFzZXRzW2RhdGFzZXROYW1lLnRvTG93ZXJDYXNlKCldO1xuICByZXR1cm4gc2VsZWN0ZWREYXRhc2V0LnF1ZXN0aW9ucztcbn07XG4iXSwibmFtZXMiOlsiUmVsYXRpb25UeXBlIiwiU2FtcGxlRGF0YXNldE5hbWUiLCJzYW1wbGVEYXRhc2V0cyIsImhyIiwibmFtZSIsIkhSIiwidGFibGVzIiwidGFibGVOYW1lIiwiZmlsZVBhdGgiLCJzY2hlbWEiLCJjb2x1bW5OYW1lIiwiZGF0YVR5cGUiLCJjb2x1bW5zIiwicHJvcGVydGllcyIsImRlc2NyaXB0aW9uIiwiZGlzcGxheU5hbWUiLCJyZWxhdGlvbnMiLCJmcm9tTW9kZWxOYW1lIiwiZnJvbUNvbHVtbk5hbWUiLCJ0b01vZGVsTmFtZSIsInRvQ29sdW1uTmFtZSIsInR5cGUiLCJPTkVfVE9fTUFOWSIsIk1BTllfVE9fT05FIiwicXVlc3Rpb25zIiwicXVlc3Rpb24iLCJsYWJlbCIsIm11c2ljIiwiTVVTSUMiLCJlY29tbWVyY2UiLCJFQ09NTUVSQ0UiLCJwcmltYXJ5S2V5IiwibmJhIiwiTkJBIiwiT05FX1RPX09ORSIsImJ1aWxkSW5pdFNxbCIsImRhdGFzZXROYW1lIiwic2VsZWN0ZWREYXRhc2V0IiwidG9Mb3dlckNhc2UiLCJtYXAiLCJ0YWJsZSIsImpvaW4iLCJmaWxlRXh0ZW5zaW9uIiwic3BsaXQiLCJwb3AiLCJjcmVhdGVUYWJsZVN0YXRlbWVudCIsImZpbGVUeXBlIiwiRXJyb3IiLCJiYXNlU3RhdGVtZW50Iiwic2NoZW1hUGFydCIsImhlYWRlclBhcnQiLCJnZXRSZWxhdGlvbnMiLCJnZXRTYW1wbGVBc2tRdWVzdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/data/sample.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/data/type.ts":
/*!****************************************!*\
  !*** ./src/apollo/server/data/type.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SampleDatasetName: () => (/* binding */ SampleDatasetName)\n/* harmony export */ });\nvar SampleDatasetName;\n(function(SampleDatasetName) {\n    SampleDatasetName[\"MUSIC\"] = \"MUSIC\";\n    SampleDatasetName[\"NBA\"] = \"NBA\";\n    SampleDatasetName[\"ECOMMERCE\"] = \"ECOMMERCE\";\n    SampleDatasetName[\"HR\"] = \"HR\";\n})(SampleDatasetName || (SampleDatasetName = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9kYXRhL3R5cGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7VUFBWUE7Ozs7O0dBQUFBLHNCQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9kYXRhL3R5cGUudHM/OGJhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBTYW1wbGVEYXRhc2V0TmFtZSB7XG4gIE1VU0lDID0gJ01VU0lDJyxcbiAgTkJBID0gJ05CQScsXG4gIEVDT01NRVJDRSA9ICdFQ09NTUVSQ0UnLFxuICBIUiA9ICdIUicsXG59XG4iXSwibmFtZXMiOlsiU2FtcGxlRGF0YXNldE5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/data/type.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/index.ts":
/*!************************************!*\
  !*** ./src/apollo/server/index.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schema */ \"(api)/./src/apollo/server/schema.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _schema__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _schema__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _resolvers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resolvers */ \"(api)/./src/apollo/server/resolvers.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_resolvers__WEBPACK_IMPORTED_MODULE_1__]);\n_resolvers__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _resolvers__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _resolvers__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBeUI7QUFDRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9pbmRleC50cz85NTU2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vc2NoZW1hJztcbmV4cG9ydCAqIGZyb20gJy4vcmVzb2x2ZXJzJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/managers/dataSourceSchemaDetector.ts":
/*!****************************************************************!*\
  !*** ./src/apollo/server/managers/dataSourceSchemaDetector.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SchemaChangeType: () => (/* binding */ SchemaChangeType),\n/* harmony export */   \"default\": () => (/* binding */ DataSourceSchemaDetector)\n/* harmony export */ });\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_differenceWith__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/differenceWith */ \"lodash/differenceWith\");\n/* harmony import */ var lodash_differenceWith__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_differenceWith__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isEmpty */ \"lodash/isEmpty\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isEqual */ \"lodash/isEqual\");\n/* harmony import */ var lodash_isEqual__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEqual__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/uniqBy */ \"lodash/uniqBy\");\n/* harmony import */ var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var log4js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! log4js */ \"log4js\");\n/* harmony import */ var log4js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(log4js__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nconst logger = (0,log4js__WEBPACK_IMPORTED_MODULE_5__.getLogger)(\"DataSourceSchemaDetector\");\nlogger.level = \"debug\";\nvar SchemaChangeType;\n(function(SchemaChangeType) {\n    // the tables has been deleted\n    SchemaChangeType[\"DELETED_TABLES\"] = \"deletedTables\";\n    // the columns has been deleted\n    SchemaChangeType[\"DELETED_COLUMNS\"] = \"deletedColumns\";\n    // the columns type has been changed\n    SchemaChangeType[\"MODIFIED_COLUMNS\"] = \"modifiedColumns\";\n})(SchemaChangeType || (SchemaChangeType = {}));\nclass DataSourceSchemaDetector {\n    constructor({ ctx, projectId }){\n        this.ctx = ctx;\n        this.projectId = projectId;\n    }\n    async detectSchemaChange() {\n        const diffSchema = await this.getDiffSchema();\n        if (diffSchema) {\n            await this.addSchemaChange(diffSchema);\n        } else {\n            // Mark resolve all in last schema change if it has unresolved flag when no schema change detected.\n            const lastSchemaChange = await this.ctx.schemaChangeRepository.findLastSchemaChange(this.projectId);\n            if (lastSchemaChange !== null) {\n                const hasUnresolved = Object.values(lastSchemaChange.resolve).some((resolve)=>!resolve);\n                if (hasUnresolved) {\n                    await this.updateResolveToSchemaChange(lastSchemaChange, Object.values(SchemaChangeType));\n                }\n            }\n        }\n        return !!diffSchema;\n    }\n    async resolveSchemaChange(type) {\n        const schemaChangeType = lodash_camelCase__WEBPACK_IMPORTED_MODULE_0___default()(type);\n        const supportedTypes = [\n            \"deletedTables\",\n            \"deletedColumns\"\n        ];\n        if (!supportedTypes.includes(schemaChangeType)) {\n            throw new Error(\"Resolved scheme change type is not supported.\");\n        }\n        const lastSchemaChange = await this.ctx.schemaChangeRepository.findLastSchemaChange(this.projectId);\n        const changes = lastSchemaChange?.change[schemaChangeType];\n        const isResolved = lastSchemaChange?.resolve[schemaChangeType];\n        if (isResolved) {\n            throw new Error(`Schema change \"${schemaChangeType}\" has nothing to resolve.`);\n        }\n        const models = await this.ctx.modelRepository.findAllBy({\n            projectId: this.projectId\n        });\n        const modelIds = models.map((model)=>model.id);\n        const modelColumns = await this.ctx.modelColumnRepository.findColumnsByModelIds(modelIds);\n        const modelRelationships = await this.ctx.relationRepository.findRelationInfoBy({\n            modelIds\n        });\n        const affectedResources = this.getAffectedResources(changes, {\n            models,\n            modelColumns,\n            modelRelationships\n        });\n        /**\n     * Handle resolve scheme change for DELETED_TABLES / DELETED_COLUMNS\n     *  1. Remove all affected calculated fields\n     *  2. Remove all affected columns if DELETED_COLUMNS\n     *  3. Remove all affected tables if DELETED_TABLES\n     *\n     *  Considering that we have set up foreign keys, some data will be automatically deleted in cascade,\n     *  so there is no need to perform additional deletions. (E.g., relationships, model's column)\n     */ await Promise.all(affectedResources.map(async (resource)=>{\n            // both DELETED_TABLES and DELETED_COLUMNS need to remove all affected calculated fields\n            logger.debug(`Start to remove all affected calculated fields \"${resource.calculatedFields.map((column)=>`${column.displayName} (${column.referenceName})`)}\".`);\n            const columnIds = resource.calculatedFields.map((column)=>column.id);\n            await this.ctx.modelColumnRepository.deleteAllByColumnIds(columnIds);\n            // remove columns if SchemaChangeType is DELETED_COLUMNS\n            if (schemaChangeType === \"deletedColumns\") {\n                const affectedColumnNames = resource.columns.map((column)=>column.sourceColumnName);\n                logger.debug(`Start to remove columns \"${affectedColumnNames}\" from model \"${resource.referenceName}\".`);\n                await this.ctx.modelColumnRepository.deleteAllBySourceColumnNames(resource.modelId, affectedColumnNames);\n            }\n            return;\n        }));\n        // remove tables if SchemaChangeType is DELETED_TABLES\n        if (schemaChangeType === \"deletedTables\") {\n            // delete models\n            const affectedTableNames = changes.map((table)=>table.name);\n            logger.debug(`Start to remove tables \"${affectedTableNames}\" from models.`);\n            await this.ctx.modelRepository.deleteAllBySourceTableNames(affectedTableNames);\n        }\n        // update resolve flag\n        await this.updateResolveToSchemaChange(lastSchemaChange, [\n            schemaChangeType\n        ]);\n    }\n    /**\n   * According to affected models and column data, we also need to find affected resources, including calculated fields and relationships.\n   *\n   * Find all affected resources include:\n   *  - columns (called \"affected column\")\n   *  - relationships (called \"affected relationship\")\n   *  - calculated fields:\n   *    - calculated fields which were affected by affected columns\n   *    - calculated fields which were affected by affected relationships\n   */ getAffectedResources(changes, { models, modelColumns, modelRelationships }) {\n        const affectedModels = models.filter((model)=>changes.findIndex((table)=>table.name === model.sourceTableName) !== -1);\n        const affectedResources = affectedModels.map((model)=>{\n            const affectedColumns = changes.find((table)=>table.name === model.sourceTableName).columns;\n            const allCalculatedFields = modelColumns.filter((column)=>column.isCalculated);\n            const affectedMaterials = affectedColumns.reduce((result, column)=>{\n                const affectedColumn = modelColumns.find((modelColumn)=>modelColumn.sourceColumnName === column.name && modelColumn.modelId === model.id);\n                result.columns.push({\n                    sourceColumnName: column.name,\n                    displayName: affectedColumn.displayName,\n                    type: column.type\n                });\n                // collect affected calculated fields if it's target column\n                const affectedCalculatedFieldsByColumnId = allCalculatedFields.filter((calculatedField)=>{\n                    const lineage = JSON.parse(calculatedField.lineage);\n                    return lineage && lineage[lineage.length - 1] === affectedColumn.id;\n                });\n                result.calculatedFields.push(...affectedCalculatedFieldsByColumnId);\n                // collect affected relationships\n                const affectedRelationships = modelRelationships.map((relationship)=>[\n                        relationship.fromColumnId,\n                        relationship.toColumnId\n                    ].includes(affectedColumn.id) ? relationship : null).filter((relationship)=>!!relationship);\n                affectedRelationships.forEach((relationship)=>{\n                    const referenceName = model.referenceName === relationship.fromModelName ? relationship.toModelName : relationship.fromModelName;\n                    const displayName = models.find((model)=>model.referenceName === referenceName)?.displayName;\n                    result.relationships.push({\n                        displayName,\n                        id: relationship.id,\n                        referenceName\n                    });\n                    // collect affected calculated fields if the relationship is in use\n                    const affectedCalculatedFieldsByRelationshipId = allCalculatedFields.filter((calculatedField)=>{\n                        const lineage = JSON.parse(calculatedField.lineage);\n                        // pop the column ID from the lineage\n                        lineage.pop();\n                        return lineage && lineage.includes(relationship.id);\n                    });\n                    result.calculatedFields.push(...affectedCalculatedFieldsByRelationshipId);\n                });\n                return result;\n            }, {\n                columns: [],\n                relationships: [],\n                calculatedFields: []\n            });\n            // unique calculated fields by id since it can be duplicated\n            const calculatedFields = lodash_uniqBy__WEBPACK_IMPORTED_MODULE_4___default()(affectedMaterials.calculatedFields, \"id\");\n            return {\n                sourceTableName: model.sourceTableName,\n                displayName: model.displayName,\n                referenceName: model.referenceName,\n                modelId: model.id,\n                ...affectedMaterials,\n                calculatedFields\n            };\n        });\n        return affectedResources;\n    }\n    async getDiffSchema() {\n        logger.info(\"Start to detect Data Source Schema changes.\");\n        const currentSchema = await this.getCurrentSchema();\n        const latestSchema = await this.getLatestSchema();\n        const diffSchema = currentSchema.reduce((result, currentTable)=>{\n            const lastestTable = latestSchema.find((table)=>table.name === currentTable.name);\n            // If the table is not found in the latest schema, it means the table has been deleted.\n            if (!lastestTable) {\n                result[\"deletedTables\"] = [\n                    ...result[\"deletedTables\"] || [],\n                    currentTable\n                ];\n                return result;\n            }\n            // If the table is found in the latest schema, we need to diff the columns.\n            const diffColumns = lodash_differenceWith__WEBPACK_IMPORTED_MODULE_1___default()(currentTable.columns, lastestTable.columns, (lodash_isEqual__WEBPACK_IMPORTED_MODULE_3___default()));\n            if (diffColumns.length > 0) {\n                const deletedColumnChange = {\n                    name: currentTable.name,\n                    columns: []\n                };\n                const modifiedColumnChange = {\n                    name: currentTable.name,\n                    columns: []\n                };\n                for (const currentColumn of diffColumns){\n                    const latestColumn = lastestTable.columns.find((column)=>column.name === currentColumn.name);\n                    // If the column is not found in the latest schema, it means the column has been deleted.\n                    if (!latestColumn) {\n                        deletedColumnChange.columns.push(currentColumn);\n                        continue;\n                    }\n                    // If the column is found in the latest schema, it means the column has been modified.\n                    // save latest column as modified column\n                    modifiedColumnChange.columns.push(latestColumn);\n                }\n                // If there are any deleted or modified columns, we need to add them to the result.\n                if (deletedColumnChange.columns.length > 0) {\n                    result[\"deletedColumns\"] = [\n                        ...result[\"deletedColumns\"] || [],\n                        deletedColumnChange\n                    ];\n                }\n                if (modifiedColumnChange.columns.length > 0) {\n                    result[\"modifiedColumns\"] = [\n                        ...result[\"modifiedColumns\"] || [],\n                        modifiedColumnChange\n                    ];\n                }\n            }\n            return result;\n        }, {});\n        if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default()(diffSchema)) {\n            logger.debug(\"Diff Schema:\", JSON.stringify(diffSchema));\n            logger.info(\"Data Source Schema has changed.\");\n            return diffSchema;\n        }\n        logger.info(\"No changes in Data Source Schema.\");\n        return null;\n    }\n    async addSchemaChange(diffSchema) {\n        const getResolveState = (change)=>!!change ? false : undefined;\n        const lastSchemaChange = await this.ctx.schemaChangeRepository.findLastSchemaChange(this.projectId);\n        // If the schema change is the same as the last one, we don't need to create a new one.\n        const isNewSchemaChange = JSON.stringify(lastSchemaChange?.change) !== JSON.stringify(diffSchema);\n        if (isNewSchemaChange) {\n            await this.ctx.schemaChangeRepository.createOne({\n                projectId: this.projectId,\n                change: diffSchema,\n                // Set the resolve to false if there are any changes. It will set resolve to true once the schema has been synced.\n                resolve: {\n                    [\"deletedTables\"]: getResolveState(diffSchema[\"deletedTables\"]),\n                    [\"deletedColumns\"]: getResolveState(diffSchema[\"deletedColumns\"]),\n                    [\"modifiedColumns\"]: getResolveState(diffSchema[\"modifiedColumns\"])\n                }\n            });\n        }\n    }\n    async getCurrentSchema() {\n        const models = await this.ctx.modelRepository.findAllBy({\n            projectId: this.projectId\n        });\n        const modelIds = models.map((model)=>model.id);\n        const modelColumns = await this.ctx.modelColumnRepository.findColumnsByModelIds(modelIds);\n        const result = models.map((model)=>{\n            return {\n                name: model.sourceTableName,\n                columns: modelColumns.filter((column)=>column.modelId === model.id && !column.isCalculated).map((column)=>({\n                        name: column.sourceColumnName,\n                        type: column.type\n                    }))\n            };\n        });\n        return result;\n    }\n    async getLatestSchema() {\n        const project = await this.ctx.projectRepository.findOneBy({\n            id: this.projectId\n        });\n        const latestDataSourceTables = await this.ctx.projectService.getProjectDataSourceTables(project);\n        const result = latestDataSourceTables.map((table)=>{\n            return {\n                name: table.name,\n                columns: table.columns.map((column)=>{\n                    return {\n                        name: column.name,\n                        type: column.type\n                    };\n                })\n            };\n        });\n        return result;\n    }\n    async updateResolveToSchemaChange(lastSchemaChange, schemaChangeTypes) {\n        await this.ctx.schemaChangeRepository.updateOne(lastSchemaChange.id, {\n            resolve: {\n                ...lastSchemaChange.resolve,\n                ...schemaChangeTypes.reduce((result, type)=>({\n                        ...result,\n                        [type]: true\n                    }), {})\n            }\n        });\n        logger.info(`Schema change \"${schemaChangeTypes}\" resolved successfully.`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9tYW5hZ2Vycy9kYXRhU291cmNlU2NoZW1hRGV0ZWN0b3IudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUUxQztBQUluQyxNQUFNTSxTQUFTRCxpREFBU0EsQ0FBQztBQUN6QkMsT0FBT0MsS0FBSyxHQUFHOztVQXNCSEM7SUFDViw4QkFBOEI7O0lBRTlCLCtCQUErQjs7SUFFL0Isb0NBQW9DOztHQUwxQkEscUJBQUFBO0FBNENHLE1BQU1DO0lBTW5CQyxZQUFZLEVBQUVDLEdBQUcsRUFBRUMsU0FBUyxFQUF3QyxDQUFFO1FBQ3BFLElBQUksQ0FBQ0QsR0FBRyxHQUFHQTtRQUNYLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtJQUNuQjtJQUVBLE1BQWFDLHFCQUFxQjtRQUNoQyxNQUFNQyxhQUFhLE1BQU0sSUFBSSxDQUFDQyxhQUFhO1FBQzNDLElBQUlELFlBQVk7WUFDZCxNQUFNLElBQUksQ0FBQ0UsZUFBZSxDQUFDRjtRQUM3QixPQUFPO1lBQ0wsbUdBQW1HO1lBQ25HLE1BQU1HLG1CQUNKLE1BQU0sSUFBSSxDQUFDTixHQUFHLENBQUNPLHNCQUFzQixDQUFDQyxvQkFBb0IsQ0FDeEQsSUFBSSxDQUFDUCxTQUFTO1lBRWxCLElBQUlLLHFCQUFxQixNQUFNO2dCQUM3QixNQUFNRyxnQkFBZ0JDLE9BQU9DLE1BQU0sQ0FBQ0wsaUJBQWlCTSxPQUFPLEVBQUVDLElBQUksQ0FDaEUsQ0FBQ0QsVUFBWSxDQUFDQTtnQkFFaEIsSUFBSUgsZUFBZTtvQkFDakIsTUFBTSxJQUFJLENBQUNLLDJCQUEyQixDQUNwQ1Isa0JBQ0FJLE9BQU9DLE1BQU0sQ0FBQ2Q7Z0JBRWxCO1lBQ0Y7UUFDRjtRQUVBLE9BQU8sQ0FBQyxDQUFDTTtJQUNYO0lBRUEsTUFBYVksb0JBQW9CQyxJQUFZLEVBQUU7UUFDN0MsTUFBTUMsbUJBQW1CNUIsdURBQVNBLENBQUMyQjtRQUNuQyxNQUFN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QzdCLFNBQVM7UUFDcEI7UUFDQSxNQUFNMkcseUJBQ0osTUFBTSxJQUFJLENBQUM1RyxHQUFHLENBQUM2RyxjQUFjLENBQUNDLDBCQUEwQixDQUFDTDtRQUMzRCxNQUFNckMsU0FBU3dDLHVCQUF1QmhGLEdBQUcsQ0FBQyxDQUFDMkI7WUFDekMsT0FBTztnQkFDTEMsTUFBTUQsTUFBTUMsSUFBSTtnQkFDaEJOLFNBQVNLLE1BQU1MLE9BQU8sQ0FBQ3RCLEdBQUcsQ0FBQyxDQUFDZ0I7b0JBQzFCLE9BQU87d0JBQ0xZLE1BQU1aLE9BQU9ZLElBQUk7d0JBQ2pCeEMsTUFBTTRCLE9BQU81QixJQUFJO29CQUNuQjtnQkFDRjtZQUNGO1FBQ0Y7UUFDQSxPQUFPb0Q7SUFDVDtJQUVBLE1BQWN0RCw0QkFDWlIsZ0JBQThCLEVBQzlCeUcsaUJBQXFDLEVBQ3JDO1FBQ0EsTUFBTSxJQUFJLENBQUMvRyxHQUFHLENBQUNPLHNCQUFzQixDQUFDeUcsU0FBUyxDQUFDMUcsaUJBQWlCd0IsRUFBRSxFQUFFO1lBQ25FbEIsU0FBUztnQkFDUCxHQUFHTixpQkFBaUJNLE9BQU87Z0JBQzNCLEdBQUdtRyxrQkFBa0I1QyxNQUFNLENBQ3pCLENBQUNDLFFBQVFwRCxPQUFVO3dCQUFFLEdBQUdvRCxNQUFNO3dCQUFFLENBQUNwRCxLQUFLLEVBQUU7b0JBQUssSUFDN0MsQ0FBQyxFQUNGO1lBQ0g7UUFDRjtRQUNBckIsT0FBTzZGLElBQUksQ0FBQyxDQUFDLGVBQWUsRUFBRXVCLGtCQUFrQix3QkFBd0IsQ0FBQztJQUMzRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL21hbmFnZXJzL2RhdGFTb3VyY2VTY2hlbWFEZXRlY3Rvci50cz9mOTJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNhbWVsQ2FzZSwgZGlmZmVyZW5jZVdpdGgsIGlzRW1wdHksIGlzRXF1YWwsIHVuaXFCeSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBJQ29udGV4dCB9IGZyb20gJ0BzZXJ2ZXIvdHlwZXMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnbG9nNGpzJztcbmltcG9ydCB7IFNjaGVtYUNoYW5nZSB9IGZyb20gJ0BzZXJ2ZXIvcmVwb3NpdG9yaWVzL3NjaGVtYUNoYW5nZVJlcG9zaXRvcnknO1xuaW1wb3J0IHsgTW9kZWwsIE1vZGVsQ29sdW1uLCBSZWxhdGlvbkluZm8gfSBmcm9tICcuLi9yZXBvc2l0b3JpZXMnO1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ0RhdGFTb3VyY2VTY2hlbWFEZXRlY3RvcicpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuZXhwb3J0IHR5cGUgRGF0YVNvdXJjZVNjaGVtYSA9IHtcbiAgbmFtZTogc3RyaW5nO1xuICBjb2x1bW5zOiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbiAgfVtdO1xufTtcblxuZXhwb3J0IHR5cGUgRGF0YVNvdXJjZVNjaGVtYUNoYW5nZSA9IHtcbiAgW1NjaGVtYUNoYW5nZVR5cGUuREVMRVRFRF9UQUJMRVNdPzogRGF0YVNvdXJjZVNjaGVtYVtdO1xuICBbU2NoZW1hQ2hhbmdlVHlwZS5ERUxFVEVEX0NPTFVNTlNdPzogRGF0YVNvdXJjZVNjaGVtYVtdO1xuICBbU2NoZW1hQ2hhbmdlVHlwZS5NT0RJRklFRF9DT0xVTU5TXT86IERhdGFTb3VyY2VTY2hlbWFbXTtcbn07XG5cbmV4cG9ydCB0eXBlIERhdGFTb3VyY2VTY2hlbWFSZXNvbHZlID0ge1xuICBbU2NoZW1hQ2hhbmdlVHlwZS5ERUxFVEVEX1RBQkxFU10/OiBib29sZWFuO1xuICBbU2NoZW1hQ2hhbmdlVHlwZS5ERUxFVEVEX0NPTFVNTlNdPzogYm9vbGVhbjtcbiAgW1NjaGVtYUNoYW5nZVR5cGUuTU9ESUZJRURfQ09MVU1OU10/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGVudW0gU2NoZW1hQ2hhbmdlVHlwZSB7XG4gIC8vIHRoZSB0YWJsZXMgaGFzIGJlZW4gZGVsZXRlZFxuICBERUxFVEVEX1RBQkxFUyA9ICdkZWxldGVkVGFibGVzJyxcbiAgLy8gdGhlIGNvbHVtbnMgaGFzIGJlZW4gZGVsZXRlZFxuICBERUxFVEVEX0NPTFVNTlMgPSAnZGVsZXRlZENvbHVtbnMnLFxuICAvLyB0aGUgY29sdW1ucyB0eXBlIGhhcyBiZWVuIGNoYW5nZWRcbiAgTU9ESUZJRURfQ09MVU1OUyA9ICdtb2RpZmllZENvbHVtbnMnLFxufVxuXG5pbnRlcmZhY2UgQWZmZWN0ZWRSZXNvdXJjZXMge1xuICBzb3VyY2VUYWJsZU5hbWU6IHN0cmluZztcbiAgcmVmZXJlbmNlTmFtZTogc3RyaW5nO1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICBtb2RlbElkOiBudW1iZXI7XG4gIGNvbHVtbnM6IEFycmF5PHtcbiAgICBzb3VyY2VDb2x1bW5OYW1lOiBzdHJpbmc7XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG4gIH0+O1xuICByZWxhdGlvbnNoaXBzOiBBcnJheTx7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICAgIHJlZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgfT47XG4gIGNhbGN1bGF0ZWRGaWVsZHM6IE1vZGVsQ29sdW1uW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURhdGFTb3VyY2VTY2hlbWFEZXRlY3RvciB7XG4gIGRldGVjdFNjaGVtYUNoYW5nZSgpOiBQcm9taXNlPGJvb2xlYW4+O1xuICByZXNvbHZlU2NoZW1hQ2hhbmdlKHR5cGU6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIGdldEFmZmVjdGVkUmVzb3VyY2VzKFxuICAgIGNoYW5nZXM6IERhdGFTb3VyY2VTY2hlbWFbXSxcbiAgICB7XG4gICAgICBtb2RlbHMsXG4gICAgICBtb2RlbENvbHVtbnMsXG4gICAgICBtb2RlbFJlbGF0aW9uc2hpcHMsXG4gICAgfToge1xuICAgICAgbW9kZWxzOiBNb2RlbFtdO1xuICAgICAgbW9kZWxDb2x1bW5zOiBNb2RlbENvbHVtbltdO1xuICAgICAgbW9kZWxSZWxhdGlvbnNoaXBzOiBSZWxhdGlvbkluZm9bXTtcbiAgICB9LFxuICApOiBBZmZlY3RlZFJlc291cmNlc1tdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRhU291cmNlU2NoZW1hRGV0ZWN0b3JcbiAgaW1wbGVtZW50cyBJRGF0YVNvdXJjZVNjaGVtYURldGVjdG9yXG57XG4gIHB1YmxpYyBjdHg6IElDb250ZXh0O1xuICBwdWJsaWMgcHJvamVjdElkOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoeyBjdHgsIHByb2plY3RJZCB9OiB7IGN0eDogSUNvbnRleHQ7IHByb2plY3RJZDogbnVtYmVyIH0pIHtcbiAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICB0aGlzLnByb2plY3RJZCA9IHByb2plY3RJZDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZXRlY3RTY2hlbWFDaGFuZ2UoKSB7XG4gICAgY29uc3QgZGlmZlNjaGVtYSA9IGF3YWl0IHRoaXMuZ2V0RGlmZlNjaGVtYSgpO1xuICAgIGlmIChkaWZmU2NoZW1hKSB7XG4gICAgICBhd2FpdCB0aGlzLmFkZFNjaGVtYUNoYW5nZShkaWZmU2NoZW1hKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTWFyayByZXNvbHZlIGFsbCBpbiBsYXN0IHNjaGVtYSBjaGFuZ2UgaWYgaXQgaGFzIHVucmVzb2x2ZWQgZmxhZyB3aGVuIG5vIHNjaGVtYSBjaGFuZ2UgZGV0ZWN0ZWQuXG4gICAgICBjb25zdCBsYXN0U2NoZW1hQ2hhbmdlID1cbiAgICAgICAgYXdhaXQgdGhpcy5jdHguc2NoZW1hQ2hhbmdlUmVwb3NpdG9yeS5maW5kTGFzdFNjaGVtYUNoYW5nZShcbiAgICAgICAgICB0aGlzLnByb2plY3RJZCxcbiAgICAgICAgKTtcbiAgICAgIGlmIChsYXN0U2NoZW1hQ2hhbmdlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGhhc1VucmVzb2x2ZWQgPSBPYmplY3QudmFsdWVzKGxhc3RTY2hlbWFDaGFuZ2UucmVzb2x2ZSkuc29tZShcbiAgICAgICAgICAocmVzb2x2ZSkgPT4gIXJlc29sdmUsXG4gICAgICAgICk7XG4gICAgICAgIGlmIChoYXNVbnJlc29sdmVkKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVSZXNvbHZlVG9TY2hlbWFDaGFuZ2UoXG4gICAgICAgICAgICBsYXN0U2NoZW1hQ2hhbmdlLFxuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhTY2hlbWFDaGFuZ2VUeXBlKSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICEhZGlmZlNjaGVtYTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZXNvbHZlU2NoZW1hQ2hhbmdlKHR5cGU6IHN0cmluZykge1xuICAgIGNvbnN0IHNjaGVtYUNoYW5nZVR5cGUgPSBjYW1lbENhc2UodHlwZSkgYXMgU2NoZW1hQ2hhbmdlVHlwZTtcbiAgICBjb25zdCBzdXBwb3J0ZWRUeXBlcyA9IFtcbiAgICAgIFNjaGVtYUNoYW5nZVR5cGUuREVMRVRFRF9UQUJMRVMsXG4gICAgICBTY2hlbWFDaGFuZ2VUeXBlLkRFTEVURURfQ09MVU1OUyxcbiAgICBdO1xuICAgIGlmICghc3VwcG9ydGVkVHlwZXMuaW5jbHVkZXMoc2NoZW1hQ2hhbmdlVHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVzb2x2ZWQgc2NoZW1lIGNoYW5nZSB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgfVxuXG4gICAgY29uc3QgbGFzdFNjaGVtYUNoYW5nZSA9XG4gICAgICBhd2FpdCB0aGlzLmN0eC5zY2hlbWFDaGFuZ2VSZXBvc2l0b3J5LmZpbmRMYXN0U2NoZW1hQ2hhbmdlKFxuICAgICAgICB0aGlzLnByb2plY3RJZCxcbiAgICAgICk7XG4gICAgY29uc3QgY2hhbmdlcyA9IGxhc3RTY2hlbWFDaGFuZ2U/LmNoYW5nZVtzY2hlbWFDaGFuZ2VUeXBlXTtcbiAgICBjb25zdCBpc1Jlc29sdmVkID0gbGFzdFNjaGVtYUNoYW5nZT8ucmVzb2x2ZVtzY2hlbWFDaGFuZ2VUeXBlXTtcblxuICAgIGlmIChpc1Jlc29sdmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBTY2hlbWEgY2hhbmdlIFwiJHtzY2hlbWFDaGFuZ2VUeXBlfVwiIGhhcyBub3RoaW5nIHRvIHJlc29sdmUuYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWxzID0gYXdhaXQgdGhpcy5jdHgubW9kZWxSZXBvc2l0b3J5LmZpbmRBbGxCeSh7XG4gICAgICBwcm9qZWN0SWQ6IHRoaXMucHJvamVjdElkLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kZWxJZHMgPSBtb2RlbHMubWFwKChtb2RlbCkgPT4gbW9kZWwuaWQpO1xuICAgIGNvbnN0IG1vZGVsQ29sdW1ucyA9XG4gICAgICBhd2FpdCB0aGlzLmN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeU1vZGVsSWRzKG1vZGVsSWRzKTtcblxuICAgIGNvbnN0IG1vZGVsUmVsYXRpb25zaGlwcyA9XG4gICAgICBhd2FpdCB0aGlzLmN0eC5yZWxhdGlvblJlcG9zaXRvcnkuZmluZFJlbGF0aW9uSW5mb0J5KHtcbiAgICAgICAgbW9kZWxJZHMsXG4gICAgICB9KTtcblxuICAgIGNvbnN0IGFmZmVjdGVkUmVzb3VyY2VzID0gdGhpcy5nZXRBZmZlY3RlZFJlc291cmNlcyhjaGFuZ2VzLCB7XG4gICAgICBtb2RlbHMsXG4gICAgICBtb2RlbENvbHVtbnMsXG4gICAgICBtb2RlbFJlbGF0aW9uc2hpcHMsXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcmVzb2x2ZSBzY2hlbWUgY2hhbmdlIGZvciBERUxFVEVEX1RBQkxFUyAvIERFTEVURURfQ09MVU1OU1xuICAgICAqICAxLiBSZW1vdmUgYWxsIGFmZmVjdGVkIGNhbGN1bGF0ZWQgZmllbGRzXG4gICAgICogIDIuIFJlbW92ZSBhbGwgYWZmZWN0ZWQgY29sdW1ucyBpZiBERUxFVEVEX0NPTFVNTlNcbiAgICAgKiAgMy4gUmVtb3ZlIGFsbCBhZmZlY3RlZCB0YWJsZXMgaWYgREVMRVRFRF9UQUJMRVNcbiAgICAgKlxuICAgICAqICBDb25zaWRlcmluZyB0aGF0IHdlIGhhdmUgc2V0IHVwIGZvcmVpZ24ga2V5cywgc29tZSBkYXRhIHdpbGwgYmUgYXV0b21hdGljYWxseSBkZWxldGVkIGluIGNhc2NhZGUsXG4gICAgICogIHNvIHRoZXJlIGlzIG5vIG5lZWQgdG8gcGVyZm9ybSBhZGRpdGlvbmFsIGRlbGV0aW9ucy4gKEUuZy4sIHJlbGF0aW9uc2hpcHMsIG1vZGVsJ3MgY29sdW1uKVxuICAgICAqL1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgYWZmZWN0ZWRSZXNvdXJjZXMubWFwKGFzeW5jIChyZXNvdXJjZSkgPT4ge1xuICAgICAgICAvLyBib3RoIERFTEVURURfVEFCTEVTIGFuZCBERUxFVEVEX0NPTFVNTlMgbmVlZCB0byByZW1vdmUgYWxsIGFmZmVjdGVkIGNhbGN1bGF0ZWQgZmllbGRzXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICBgU3RhcnQgdG8gcmVtb3ZlIGFsbCBhZmZlY3RlZCBjYWxjdWxhdGVkIGZpZWxkcyBcIiR7cmVzb3VyY2UuY2FsY3VsYXRlZEZpZWxkcy5tYXAoXG4gICAgICAgICAgICAoY29sdW1uKSA9PiBgJHtjb2x1bW4uZGlzcGxheU5hbWV9ICgke2NvbHVtbi5yZWZlcmVuY2VOYW1lfSlgLFxuICAgICAgICAgICl9XCIuYCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjb2x1bW5JZHMgPSByZXNvdXJjZS5jYWxjdWxhdGVkRmllbGRzLm1hcCgoY29sdW1uKSA9PiBjb2x1bW4uaWQpO1xuICAgICAgICBhd2FpdCB0aGlzLmN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZGVsZXRlQWxsQnlDb2x1bW5JZHMoY29sdW1uSWRzKTtcblxuICAgICAgICAvLyByZW1vdmUgY29sdW1ucyBpZiBTY2hlbWFDaGFuZ2VUeXBlIGlzIERFTEVURURfQ09MVU1OU1xuICAgICAgICBpZiAoc2NoZW1hQ2hhbmdlVHlwZSA9PT0gU2NoZW1hQ2hhbmdlVHlwZS5ERUxFVEVEX0NPTFVNTlMpIHtcbiAgICAgICAgICBjb25zdCBhZmZlY3RlZENvbHVtbk5hbWVzID0gcmVzb3VyY2UuY29sdW1ucy5tYXAoXG4gICAgICAgICAgICAoY29sdW1uKSA9PiBjb2x1bW4uc291cmNlQ29sdW1uTmFtZSxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgYFN0YXJ0IHRvIHJlbW92ZSBjb2x1bW5zIFwiJHthZmZlY3RlZENvbHVtbk5hbWVzfVwiIGZyb20gbW9kZWwgXCIke3Jlc291cmNlLnJlZmVyZW5jZU5hbWV9XCIuYCxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgYXdhaXQgdGhpcy5jdHgubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmRlbGV0ZUFsbEJ5U291cmNlQ29sdW1uTmFtZXMoXG4gICAgICAgICAgICByZXNvdXJjZS5tb2RlbElkLFxuICAgICAgICAgICAgYWZmZWN0ZWRDb2x1bW5OYW1lcyxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICAvLyByZW1vdmUgdGFibGVzIGlmIFNjaGVtYUNoYW5nZVR5cGUgaXMgREVMRVRFRF9UQUJMRVNcbiAgICBpZiAoc2NoZW1hQ2hhbmdlVHlwZSA9PT0gU2NoZW1hQ2hhbmdlVHlwZS5ERUxFVEVEX1RBQkxFUykge1xuICAgICAgLy8gZGVsZXRlIG1vZGVsc1xuICAgICAgY29uc3QgYWZmZWN0ZWRUYWJsZU5hbWVzID0gY2hhbmdlcy5tYXAoKHRhYmxlKSA9PiB0YWJsZS5uYW1lKTtcblxuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBgU3RhcnQgdG8gcmVtb3ZlIHRhYmxlcyBcIiR7YWZmZWN0ZWRUYWJsZU5hbWVzfVwiIGZyb20gbW9kZWxzLmAsXG4gICAgICApO1xuXG4gICAgICBhd2FpdCB0aGlzLmN0eC5tb2RlbFJlcG9zaXRvcnkuZGVsZXRlQWxsQnlTb3VyY2VUYWJsZU5hbWVzKFxuICAgICAgICBhZmZlY3RlZFRhYmxlTmFtZXMsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSByZXNvbHZlIGZsYWdcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVJlc29sdmVUb1NjaGVtYUNoYW5nZShsYXN0U2NoZW1hQ2hhbmdlLCBbXG4gICAgICBzY2hlbWFDaGFuZ2VUeXBlLFxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY29yZGluZyB0byBhZmZlY3RlZCBtb2RlbHMgYW5kIGNvbHVtbiBkYXRhLCB3ZSBhbHNvIG5lZWQgdG8gZmluZCBhZmZlY3RlZCByZXNvdXJjZXMsIGluY2x1ZGluZyBjYWxjdWxhdGVkIGZpZWxkcyBhbmQgcmVsYXRpb25zaGlwcy5cbiAgICpcbiAgICogRmluZCBhbGwgYWZmZWN0ZWQgcmVzb3VyY2VzIGluY2x1ZGU6XG4gICAqICAtIGNvbHVtbnMgKGNhbGxlZCBcImFmZmVjdGVkIGNvbHVtblwiKVxuICAgKiAgLSByZWxhdGlvbnNoaXBzIChjYWxsZWQgXCJhZmZlY3RlZCByZWxhdGlvbnNoaXBcIilcbiAgICogIC0gY2FsY3VsYXRlZCBmaWVsZHM6XG4gICAqICAgIC0gY2FsY3VsYXRlZCBmaWVsZHMgd2hpY2ggd2VyZSBhZmZlY3RlZCBieSBhZmZlY3RlZCBjb2x1bW5zXG4gICAqICAgIC0gY2FsY3VsYXRlZCBmaWVsZHMgd2hpY2ggd2VyZSBhZmZlY3RlZCBieSBhZmZlY3RlZCByZWxhdGlvbnNoaXBzXG4gICAqL1xuICBwdWJsaWMgZ2V0QWZmZWN0ZWRSZXNvdXJjZXMoXG4gICAgY2hhbmdlczogRGF0YVNvdXJjZVNjaGVtYVtdLFxuICAgIHtcbiAgICAgIG1vZGVscyxcbiAgICAgIG1vZGVsQ29sdW1ucyxcbiAgICAgIG1vZGVsUmVsYXRpb25zaGlwcyxcbiAgICB9OiB7XG4gICAgICBtb2RlbHM6IE1vZGVsW107XG4gICAgICBtb2RlbENvbHVtbnM6IE1vZGVsQ29sdW1uW107XG4gICAgICBtb2RlbFJlbGF0aW9uc2hpcHM6IFJlbGF0aW9uSW5mb1tdO1xuICAgIH0sXG4gICkge1xuICAgIGNvbnN0IGFmZmVjdGVkTW9kZWxzID0gbW9kZWxzLmZpbHRlcihcbiAgICAgIChtb2RlbCkgPT5cbiAgICAgICAgY2hhbmdlcy5maW5kSW5kZXgoKHRhYmxlKSA9PiB0YWJsZS5uYW1lID09PSBtb2RlbC5zb3VyY2VUYWJsZU5hbWUpICE9PVxuICAgICAgICAtMSxcbiAgICApO1xuXG4gICAgY29uc3QgYWZmZWN0ZWRSZXNvdXJjZXMgPSBhZmZlY3RlZE1vZGVscy5tYXAoKG1vZGVsKSA9PiB7XG4gICAgICBjb25zdCBhZmZlY3RlZENvbHVtbnMgPSBjaGFuZ2VzLmZpbmQoXG4gICAgICAgICh0YWJsZSkgPT4gdGFibGUubmFtZSA9PT0gbW9kZWwuc291cmNlVGFibGVOYW1lLFxuICAgICAgKS5jb2x1bW5zO1xuXG4gICAgICBjb25zdCBhbGxDYWxjdWxhdGVkRmllbGRzID0gbW9kZWxDb2x1bW5zLmZpbHRlcihcbiAgICAgICAgKGNvbHVtbikgPT4gY29sdW1uLmlzQ2FsY3VsYXRlZCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGFmZmVjdGVkTWF0ZXJpYWxzID0gYWZmZWN0ZWRDb2x1bW5zLnJlZHVjZShcbiAgICAgICAgKHJlc3VsdCwgY29sdW1uKSA9PiB7XG4gICAgICAgICAgY29uc3QgYWZmZWN0ZWRDb2x1bW4gPSBtb2RlbENvbHVtbnMuZmluZChcbiAgICAgICAgICAgIChtb2RlbENvbHVtbikgPT5cbiAgICAgICAgICAgICAgbW9kZWxDb2x1bW4uc291cmNlQ29sdW1uTmFtZSA9PT0gY29sdW1uLm5hbWUgJiZcbiAgICAgICAgICAgICAgbW9kZWxDb2x1bW4ubW9kZWxJZCA9PT0gbW9kZWwuaWQsXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHJlc3VsdC5jb2x1bW5zLnB1c2goe1xuICAgICAgICAgICAgc291cmNlQ29sdW1uTmFtZTogY29sdW1uLm5hbWUsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogYWZmZWN0ZWRDb2x1bW4uZGlzcGxheU5hbWUsXG4gICAgICAgICAgICB0eXBlOiBjb2x1bW4udHlwZSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIGNvbGxlY3QgYWZmZWN0ZWQgY2FsY3VsYXRlZCBmaWVsZHMgaWYgaXQncyB0YXJnZXQgY29sdW1uXG4gICAgICAgICAgY29uc3QgYWZmZWN0ZWRDYWxjdWxhdGVkRmllbGRzQnlDb2x1bW5JZCA9IGFsbENhbGN1bGF0ZWRGaWVsZHMuZmlsdGVyKFxuICAgICAgICAgICAgKGNhbGN1bGF0ZWRGaWVsZCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBsaW5lYWdlID0gSlNPTi5wYXJzZShjYWxjdWxhdGVkRmllbGQubGluZWFnZSk7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgbGluZWFnZSAmJiBsaW5lYWdlW2xpbmVhZ2UubGVuZ3RoIC0gMV0gPT09IGFmZmVjdGVkQ29sdW1uLmlkXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICByZXN1bHQuY2FsY3VsYXRlZEZpZWxkcy5wdXNoKC4uLmFmZmVjdGVkQ2FsY3VsYXRlZEZpZWxkc0J5Q29sdW1uSWQpO1xuXG4gICAgICAgICAgLy8gY29sbGVjdCBhZmZlY3RlZCByZWxhdGlvbnNoaXBzXG4gICAgICAgICAgY29uc3QgYWZmZWN0ZWRSZWxhdGlvbnNoaXBzID0gbW9kZWxSZWxhdGlvbnNoaXBzXG4gICAgICAgICAgICAubWFwKChyZWxhdGlvbnNoaXApID0+XG4gICAgICAgICAgICAgIFtyZWxhdGlvbnNoaXAuZnJvbUNvbHVtbklkLCByZWxhdGlvbnNoaXAudG9Db2x1bW5JZF0uaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgYWZmZWN0ZWRDb2x1bW4uaWQsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICA/IHJlbGF0aW9uc2hpcFxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5maWx0ZXIoKHJlbGF0aW9uc2hpcCkgPT4gISFyZWxhdGlvbnNoaXApO1xuXG4gICAgICAgICAgYWZmZWN0ZWRSZWxhdGlvbnNoaXBzLmZvckVhY2goKHJlbGF0aW9uc2hpcCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlTmFtZSA9XG4gICAgICAgICAgICAgIG1vZGVsLnJlZmVyZW5jZU5hbWUgPT09IHJlbGF0aW9uc2hpcC5mcm9tTW9kZWxOYW1lXG4gICAgICAgICAgICAgICAgPyByZWxhdGlvbnNoaXAudG9Nb2RlbE5hbWVcbiAgICAgICAgICAgICAgICA6IHJlbGF0aW9uc2hpcC5mcm9tTW9kZWxOYW1lO1xuXG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IG1vZGVscy5maW5kKFxuICAgICAgICAgICAgICAobW9kZWwpID0+IG1vZGVsLnJlZmVyZW5jZU5hbWUgPT09IHJlZmVyZW5jZU5hbWUsXG4gICAgICAgICAgICApPy5kaXNwbGF5TmFtZTtcblxuICAgICAgICAgICAgcmVzdWx0LnJlbGF0aW9uc2hpcHMucHVzaCh7XG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICBpZDogcmVsYXRpb25zaGlwLmlkLFxuICAgICAgICAgICAgICByZWZlcmVuY2VOYW1lLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGNvbGxlY3QgYWZmZWN0ZWQgY2FsY3VsYXRlZCBmaWVsZHMgaWYgdGhlIHJlbGF0aW9uc2hpcCBpcyBpbiB1c2VcbiAgICAgICAgICAgIGNvbnN0IGFmZmVjdGVkQ2FsY3VsYXRlZEZpZWxkc0J5UmVsYXRpb25zaGlwSWQgPVxuICAgICAgICAgICAgICBhbGxDYWxjdWxhdGVkRmllbGRzLmZpbHRlcigoY2FsY3VsYXRlZEZpZWxkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZWFnZSA9IEpTT04ucGFyc2UoY2FsY3VsYXRlZEZpZWxkLmxpbmVhZ2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gcG9wIHRoZSBjb2x1bW4gSUQgZnJvbSB0aGUgbGluZWFnZVxuICAgICAgICAgICAgICAgIGxpbmVhZ2UucG9wKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmVhZ2UgJiYgbGluZWFnZS5pbmNsdWRlcyhyZWxhdGlvbnNoaXAuaWQpO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVzdWx0LmNhbGN1bGF0ZWRGaWVsZHMucHVzaChcbiAgICAgICAgICAgICAgLi4uYWZmZWN0ZWRDYWxjdWxhdGVkRmllbGRzQnlSZWxhdGlvbnNoaXBJZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICB7IGNvbHVtbnM6IFtdLCByZWxhdGlvbnNoaXBzOiBbXSwgY2FsY3VsYXRlZEZpZWxkczogW10gfSxcbiAgICAgICk7XG5cbiAgICAgIC8vIHVuaXF1ZSBjYWxjdWxhdGVkIGZpZWxkcyBieSBpZCBzaW5jZSBpdCBjYW4gYmUgZHVwbGljYXRlZFxuICAgICAgY29uc3QgY2FsY3VsYXRlZEZpZWxkcyA9IHVuaXFCeShhZmZlY3RlZE1hdGVyaWFscy5jYWxjdWxhdGVkRmllbGRzLCAnaWQnKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc291cmNlVGFibGVOYW1lOiBtb2RlbC5zb3VyY2VUYWJsZU5hbWUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBtb2RlbC5kaXNwbGF5TmFtZSxcbiAgICAgICAgcmVmZXJlbmNlTmFtZTogbW9kZWwucmVmZXJlbmNlTmFtZSxcbiAgICAgICAgbW9kZWxJZDogbW9kZWwuaWQsXG4gICAgICAgIC4uLmFmZmVjdGVkTWF0ZXJpYWxzLFxuICAgICAgICBjYWxjdWxhdGVkRmllbGRzLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBhZmZlY3RlZFJlc291cmNlcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0RGlmZlNjaGVtYSgpIHtcbiAgICBsb2dnZXIuaW5mbygnU3RhcnQgdG8gZGV0ZWN0IERhdGEgU291cmNlIFNjaGVtYSBjaGFuZ2VzLicpO1xuICAgIGNvbnN0IGN1cnJlbnRTY2hlbWEgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRTY2hlbWEoKTtcbiAgICBjb25zdCBsYXRlc3RTY2hlbWEgPSBhd2FpdCB0aGlzLmdldExhdGVzdFNjaGVtYSgpO1xuXG4gICAgY29uc3QgZGlmZlNjaGVtYSA9IGN1cnJlbnRTY2hlbWEucmVkdWNlKChyZXN1bHQsIGN1cnJlbnRUYWJsZSkgPT4ge1xuICAgICAgY29uc3QgbGFzdGVzdFRhYmxlID0gbGF0ZXN0U2NoZW1hLmZpbmQoXG4gICAgICAgICh0YWJsZSkgPT4gdGFibGUubmFtZSA9PT0gY3VycmVudFRhYmxlLm5hbWUsXG4gICAgICApO1xuICAgICAgLy8gSWYgdGhlIHRhYmxlIGlzIG5vdCBmb3VuZCBpbiB0aGUgbGF0ZXN0IHNjaGVtYSwgaXQgbWVhbnMgdGhlIHRhYmxlIGhhcyBiZWVuIGRlbGV0ZWQuXG4gICAgICBpZiAoIWxhc3Rlc3RUYWJsZSkge1xuICAgICAgICByZXN1bHRbU2NoZW1hQ2hhbmdlVHlwZS5ERUxFVEVEX1RBQkxFU10gPSBbXG4gICAgICAgICAgLi4uKHJlc3VsdFtTY2hlbWFDaGFuZ2VUeXBlLkRFTEVURURfVEFCTEVTXSB8fCBbXSksXG4gICAgICAgICAgY3VycmVudFRhYmxlLFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgdGFibGUgaXMgZm91bmQgaW4gdGhlIGxhdGVzdCBzY2hlbWEsIHdlIG5lZWQgdG8gZGlmZiB0aGUgY29sdW1ucy5cbiAgICAgIGNvbnN0IGRpZmZDb2x1bW5zID0gZGlmZmVyZW5jZVdpdGgoXG4gICAgICAgIGN1cnJlbnRUYWJsZS5jb2x1bW5zLFxuICAgICAgICBsYXN0ZXN0VGFibGUuY29sdW1ucyxcbiAgICAgICAgaXNFcXVhbCxcbiAgICAgICk7XG4gICAgICBpZiAoZGlmZkNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBkZWxldGVkQ29sdW1uQ2hhbmdlID0geyBuYW1lOiBjdXJyZW50VGFibGUubmFtZSwgY29sdW1uczogW10gfTtcbiAgICAgICAgY29uc3QgbW9kaWZpZWRDb2x1bW5DaGFuZ2UgPSB7IG5hbWU6IGN1cnJlbnRUYWJsZS5uYW1lLCBjb2x1bW5zOiBbXSB9O1xuXG4gICAgICAgIGZvciAoY29uc3QgY3VycmVudENvbHVtbiBvZiBkaWZmQ29sdW1ucykge1xuICAgICAgICAgIGNvbnN0IGxhdGVzdENvbHVtbiA9IGxhc3Rlc3RUYWJsZS5jb2x1bW5zLmZpbmQoXG4gICAgICAgICAgICAoY29sdW1uKSA9PiBjb2x1bW4ubmFtZSA9PT0gY3VycmVudENvbHVtbi5uYW1lLFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gSWYgdGhlIGNvbHVtbiBpcyBub3QgZm91bmQgaW4gdGhlIGxhdGVzdCBzY2hlbWEsIGl0IG1lYW5zIHRoZSBjb2x1bW4gaGFzIGJlZW4gZGVsZXRlZC5cbiAgICAgICAgICBpZiAoIWxhdGVzdENvbHVtbikge1xuICAgICAgICAgICAgZGVsZXRlZENvbHVtbkNoYW5nZS5jb2x1bW5zLnB1c2goY3VycmVudENvbHVtbik7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gSWYgdGhlIGNvbHVtbiBpcyBmb3VuZCBpbiB0aGUgbGF0ZXN0IHNjaGVtYSwgaXQgbWVhbnMgdGhlIGNvbHVtbiBoYXMgYmVlbiBtb2RpZmllZC5cbiAgICAgICAgICAvLyBzYXZlIGxhdGVzdCBjb2x1bW4gYXMgbW9kaWZpZWQgY29sdW1uXG4gICAgICAgICAgbW9kaWZpZWRDb2x1bW5DaGFuZ2UuY29sdW1ucy5wdXNoKGxhdGVzdENvbHVtbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYW55IGRlbGV0ZWQgb3IgbW9kaWZpZWQgY29sdW1ucywgd2UgbmVlZCB0byBhZGQgdGhlbSB0byB0aGUgcmVzdWx0LlxuICAgICAgICBpZiAoZGVsZXRlZENvbHVtbkNoYW5nZS5jb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXN1bHRbU2NoZW1hQ2hhbmdlVHlwZS5ERUxFVEVEX0NPTFVNTlNdID0gW1xuICAgICAgICAgICAgLi4uKHJlc3VsdFtTY2hlbWFDaGFuZ2VUeXBlLkRFTEVURURfQ09MVU1OU10gfHwgW10pLFxuICAgICAgICAgICAgZGVsZXRlZENvbHVtbkNoYW5nZSxcbiAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb2RpZmllZENvbHVtbkNoYW5nZS5jb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXN1bHRbU2NoZW1hQ2hhbmdlVHlwZS5NT0RJRklFRF9DT0xVTU5TXSA9IFtcbiAgICAgICAgICAgIC4uLihyZXN1bHRbU2NoZW1hQ2hhbmdlVHlwZS5NT0RJRklFRF9DT0xVTU5TXSB8fCBbXSksXG4gICAgICAgICAgICBtb2RpZmllZENvbHVtbkNoYW5nZSxcbiAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwge30pO1xuXG4gICAgaWYgKCFpc0VtcHR5KGRpZmZTY2hlbWEpKSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ0RpZmYgU2NoZW1hOicsIEpTT04uc3RyaW5naWZ5KGRpZmZTY2hlbWEpKTtcbiAgICAgIGxvZ2dlci5pbmZvKCdEYXRhIFNvdXJjZSBTY2hlbWEgaGFzIGNoYW5nZWQuJyk7XG4gICAgICByZXR1cm4gZGlmZlNjaGVtYSBhcyBEYXRhU291cmNlU2NoZW1hQ2hhbmdlO1xuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKCdObyBjaGFuZ2VzIGluIERhdGEgU291cmNlIFNjaGVtYS4nKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYWRkU2NoZW1hQ2hhbmdlKGRpZmZTY2hlbWE6IERhdGFTb3VyY2VTY2hlbWFDaGFuZ2UpIHtcbiAgICBjb25zdCBnZXRSZXNvbHZlU3RhdGUgPSAoY2hhbmdlKSA9PiAoISFjaGFuZ2UgPyBmYWxzZSA6IHVuZGVmaW5lZCk7XG5cbiAgICBjb25zdCBsYXN0U2NoZW1hQ2hhbmdlID1cbiAgICAgIGF3YWl0IHRoaXMuY3R4LnNjaGVtYUNoYW5nZVJlcG9zaXRvcnkuZmluZExhc3RTY2hlbWFDaGFuZ2UoXG4gICAgICAgIHRoaXMucHJvamVjdElkLFxuICAgICAgKTtcbiAgICAvLyBJZiB0aGUgc2NoZW1hIGNoYW5nZSBpcyB0aGUgc2FtZSBhcyB0aGUgbGFzdCBvbmUsIHdlIGRvbid0IG5lZWQgdG8gY3JlYXRlIGEgbmV3IG9uZS5cbiAgICBjb25zdCBpc05ld1NjaGVtYUNoYW5nZSA9XG4gICAgICBKU09OLnN0cmluZ2lmeShsYXN0U2NoZW1hQ2hhbmdlPy5jaGFuZ2UpICE9PSBKU09OLnN0cmluZ2lmeShkaWZmU2NoZW1hKTtcblxuICAgIGlmIChpc05ld1NjaGVtYUNoYW5nZSkge1xuICAgICAgYXdhaXQgdGhpcy5jdHguc2NoZW1hQ2hhbmdlUmVwb3NpdG9yeS5jcmVhdGVPbmUoe1xuICAgICAgICBwcm9qZWN0SWQ6IHRoaXMucHJvamVjdElkLFxuICAgICAgICBjaGFuZ2U6IGRpZmZTY2hlbWEsXG4gICAgICAgIC8vIFNldCB0aGUgcmVzb2x2ZSB0byBmYWxzZSBpZiB0aGVyZSBhcmUgYW55IGNoYW5nZXMuIEl0IHdpbGwgc2V0IHJlc29sdmUgdG8gdHJ1ZSBvbmNlIHRoZSBzY2hlbWEgaGFzIGJlZW4gc3luY2VkLlxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgW1NjaGVtYUNoYW5nZVR5cGUuREVMRVRFRF9UQUJMRVNdOiBnZXRSZXNvbHZlU3RhdGUoXG4gICAgICAgICAgICBkaWZmU2NoZW1hW1NjaGVtYUNoYW5nZVR5cGUuREVMRVRFRF9UQUJMRVNdLFxuICAgICAgICAgICksXG4gICAgICAgICAgW1NjaGVtYUNoYW5nZVR5cGUuREVMRVRFRF9DT0xVTU5TXTogZ2V0UmVzb2x2ZVN0YXRlKFxuICAgICAgICAgICAgZGlmZlNjaGVtYVtTY2hlbWFDaGFuZ2VUeXBlLkRFTEVURURfQ09MVU1OU10sXG4gICAgICAgICAgKSxcbiAgICAgICAgICBbU2NoZW1hQ2hhbmdlVHlwZS5NT0RJRklFRF9DT0xVTU5TXTogZ2V0UmVzb2x2ZVN0YXRlKFxuICAgICAgICAgICAgZGlmZlNjaGVtYVtTY2hlbWFDaGFuZ2VUeXBlLk1PRElGSUVEX0NPTFVNTlNdLFxuICAgICAgICAgICksXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldEN1cnJlbnRTY2hlbWEoKTogUHJvbWlzZTxEYXRhU291cmNlU2NoZW1hW10+IHtcbiAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLmN0eC5tb2RlbFJlcG9zaXRvcnkuZmluZEFsbEJ5KHtcbiAgICAgIHByb2plY3RJZDogdGhpcy5wcm9qZWN0SWQsXG4gICAgfSk7XG4gICAgY29uc3QgbW9kZWxJZHMgPSBtb2RlbHMubWFwKChtb2RlbCkgPT4gbW9kZWwuaWQpO1xuICAgIGNvbnN0IG1vZGVsQ29sdW1ucyA9XG4gICAgICBhd2FpdCB0aGlzLmN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeU1vZGVsSWRzKG1vZGVsSWRzKTtcbiAgICBjb25zdCByZXN1bHQgPSBtb2RlbHMubWFwKChtb2RlbCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogbW9kZWwuc291cmNlVGFibGVOYW1lLFxuICAgICAgICBjb2x1bW5zOiBtb2RlbENvbHVtbnNcbiAgICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgICAgKGNvbHVtbikgPT4gY29sdW1uLm1vZGVsSWQgPT09IG1vZGVsLmlkICYmICFjb2x1bW4uaXNDYWxjdWxhdGVkLFxuICAgICAgICAgIClcbiAgICAgICAgICAubWFwKChjb2x1bW4pID0+ICh7XG4gICAgICAgICAgICBuYW1lOiBjb2x1bW4uc291cmNlQ29sdW1uTmFtZSxcbiAgICAgICAgICAgIHR5cGU6IGNvbHVtbi50eXBlLFxuICAgICAgICAgIH0pKSxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0TGF0ZXN0U2NoZW1hKCk6IFByb21pc2U8RGF0YVNvdXJjZVNjaGVtYVtdPiB7XG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IHRoaXMuY3R4LnByb2plY3RSZXBvc2l0b3J5LmZpbmRPbmVCeSh7XG4gICAgICBpZDogdGhpcy5wcm9qZWN0SWQsXG4gICAgfSk7XG4gICAgY29uc3QgbGF0ZXN0RGF0YVNvdXJjZVRhYmxlcyA9XG4gICAgICBhd2FpdCB0aGlzLmN0eC5wcm9qZWN0U2VydmljZS5nZXRQcm9qZWN0RGF0YVNvdXJjZVRhYmxlcyhwcm9qZWN0KTtcbiAgICBjb25zdCByZXN1bHQgPSBsYXRlc3REYXRhU291cmNlVGFibGVzLm1hcCgodGFibGUpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHRhYmxlLm5hbWUsXG4gICAgICAgIGNvbHVtbnM6IHRhYmxlLmNvbHVtbnMubWFwKChjb2x1bW4pID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogY29sdW1uLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBjb2x1bW4udHlwZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlUmVzb2x2ZVRvU2NoZW1hQ2hhbmdlKFxuICAgIGxhc3RTY2hlbWFDaGFuZ2U6IFNjaGVtYUNoYW5nZSxcbiAgICBzY2hlbWFDaGFuZ2VUeXBlczogU2NoZW1hQ2hhbmdlVHlwZVtdLFxuICApIHtcbiAgICBhd2FpdCB0aGlzLmN0eC5zY2hlbWFDaGFuZ2VSZXBvc2l0b3J5LnVwZGF0ZU9uZShsYXN0U2NoZW1hQ2hhbmdlLmlkLCB7XG4gICAgICByZXNvbHZlOiB7XG4gICAgICAgIC4uLmxhc3RTY2hlbWFDaGFuZ2UucmVzb2x2ZSxcbiAgICAgICAgLi4uc2NoZW1hQ2hhbmdlVHlwZXMucmVkdWNlKFxuICAgICAgICAgIChyZXN1bHQsIHR5cGUpID0+ICh7IC4uLnJlc3VsdCwgW3R5cGVdOiB0cnVlIH0pLFxuICAgICAgICAgIHt9LFxuICAgICAgICApLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBsb2dnZXIuaW5mbyhgU2NoZW1hIGNoYW5nZSBcIiR7c2NoZW1hQ2hhbmdlVHlwZXN9XCIgcmVzb2x2ZWQgc3VjY2Vzc2Z1bGx5LmApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY2FtZWxDYXNlIiwiZGlmZmVyZW5jZVdpdGgiLCJpc0VtcHR5IiwiaXNFcXVhbCIsInVuaXFCeSIsImdldExvZ2dlciIsImxvZ2dlciIsImxldmVsIiwiU2NoZW1hQ2hhbmdlVHlwZSIsIkRhdGFTb3VyY2VTY2hlbWFEZXRlY3RvciIsImNvbnN0cnVjdG9yIiwiY3R4IiwicHJvamVjdElkIiwiZGV0ZWN0U2NoZW1hQ2hhbmdlIiwiZGlmZlNjaGVtYSIsImdldERpZmZTY2hlbWEiLCJhZGRTY2hlbWFDaGFuZ2UiLCJsYXN0U2NoZW1hQ2hhbmdlIiwic2NoZW1hQ2hhbmdlUmVwb3NpdG9yeSIsImZpbmRMYXN0U2NoZW1hQ2hhbmdlIiwiaGFzVW5yZXNvbHZlZCIsIk9iamVjdCIsInZhbHVlcyIsInJlc29sdmUiLCJzb21lIiwidXBkYXRlUmVzb2x2ZVRvU2NoZW1hQ2hhbmdlIiwicmVzb2x2ZVNjaGVtYUNoYW5nZSIsInR5cGUiLCJzY2hlbWFDaGFuZ2VUeXBlIiwic3VwcG9ydGVkVHlwZXMiLCJpbmNsdWRlcyIsIkVycm9yIiwiY2hhbmdlcyIsImNoYW5nZSIsImlzUmVzb2x2ZWQiLCJtb2RlbHMiLCJtb2RlbFJlcG9zaXRvcnkiLCJmaW5kQWxsQnkiLCJtb2RlbElkcyIsIm1hcCIsIm1vZGVsIiwiaWQiLCJtb2RlbENvbHVtbnMiLCJtb2RlbENvbHVtblJlcG9zaXRvcnkiLCJmaW5kQ29sdW1uc0J5TW9kZWxJZHMiLCJtb2RlbFJlbGF0aW9uc2hpcHMiLCJyZWxhdGlvblJlcG9zaXRvcnkiLCJmaW5kUmVsYXRpb25JbmZvQnkiLCJhZmZlY3RlZFJlc291cmNlcyIsImdldEFmZmVjdGVkUmVzb3VyY2VzIiwiUHJvbWlzZSIsImFsbCIsInJlc291cmNlIiwiZGVidWciLCJjYWxjdWxhdGVkRmllbGRzIiwiY29sdW1uIiwiZGlzcGxheU5hbWUiLCJyZWZlcmVuY2VOYW1lIiwiY29sdW1uSWRzIiwiZGVsZXRlQWxsQnlDb2x1bW5JZHMiLCJhZmZlY3RlZENvbHVtbk5hbWVzIiwiY29sdW1ucyIsInNvdXJjZUNvbHVtbk5hbWUiLCJkZWxldGVBbGxCeVNvdXJjZUNvbHVtbk5hbWVzIiwibW9kZWxJZCIsImFmZmVjdGVkVGFibGVOYW1lcyIsInRhYmxlIiwibmFtZSIsImRlbGV0ZUFsbEJ5U291cmNlVGFibGVOYW1lcyIsImFmZmVjdGVkTW9kZWxzIiwiZmlsdGVyIiwiZmluZEluZGV4Iiwic291cmNlVGFibGVOYW1lIiwiYWZmZWN0ZWRDb2x1bW5zIiwiZmluZCIsImFsbENhbGN1bGF0ZWRGaWVsZHMiLCJpc0NhbGN1bGF0ZWQiLCJhZmZlY3RlZE1hdGVyaWFscyIsInJlZHVjZSIsInJlc3VsdCIsImFmZmVjdGVkQ29sdW1uIiwibW9kZWxDb2x1bW4iLCJwdXNoIiwiYWZmZWN0ZWRDYWxjdWxhdGVkRmllbGRzQnlDb2x1bW5JZCIsImNhbGN1bGF0ZWRGaWVsZCIsImxpbmVhZ2UiLCJKU09OIiwicGFyc2UiLCJsZW5ndGgiLCJhZmZlY3RlZFJlbGF0aW9uc2hpcHMiLCJyZWxhdGlvbnNoaXAiLCJmcm9tQ29sdW1uSWQiLCJ0b0NvbHVtbklkIiwiZm9yRWFjaCIsImZyb21Nb2RlbE5hbWUiLCJ0b01vZGVsTmFtZSIsInJlbGF0aW9uc2hpcHMiLCJhZmZlY3RlZENhbGN1bGF0ZWRGaWVsZHNCeVJlbGF0aW9uc2hpcElkIiwicG9wIiwiaW5mbyIsImN1cnJlbnRTY2hlbWEiLCJnZXRDdXJyZW50U2NoZW1hIiwibGF0ZXN0U2NoZW1hIiwiZ2V0TGF0ZXN0U2NoZW1hIiwiY3VycmVudFRhYmxlIiwibGFzdGVzdFRhYmxlIiwiZGlmZkNvbHVtbnMiLCJkZWxldGVkQ29sdW1uQ2hhbmdlIiwibW9kaWZpZWRDb2x1bW5DaGFuZ2UiLCJjdXJyZW50Q29sdW1uIiwibGF0ZXN0Q29sdW1uIiwic3RyaW5naWZ5IiwiZ2V0UmVzb2x2ZVN0YXRlIiwidW5kZWZpbmVkIiwiaXNOZXdTY2hlbWFDaGFuZ2UiLCJjcmVhdGVPbmUiLCJwcm9qZWN0IiwicHJvamVjdFJlcG9zaXRvcnkiLCJmaW5kT25lQnkiLCJsYXRlc3REYXRhU291cmNlVGFibGVzIiwicHJvamVjdFNlcnZpY2UiLCJnZXRQcm9qZWN0RGF0YVNvdXJjZVRhYmxlcyIsInNjaGVtYUNoYW5nZVR5cGVzIiwidXBkYXRlT25lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/managers/dataSourceSchemaDetector.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/mdl/mdlBuilder.ts":
/*!*********************************************!*\
  !*** ./src/apollo/server/mdl/mdlBuilder.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MDLBuilder: () => (/* binding */ MDLBuilder)\n/* harmony export */ });\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/isEmpty */ \"lodash/isEmpty\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/isNil */ \"lodash/isNil\");\n/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isNil__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_pickBy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/pickBy */ \"lodash/pickBy\");\n/* harmony import */ var lodash_pickBy__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_pickBy__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _type__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type */ \"(api)/./src/apollo/server/mdl/type.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _server_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @server/config */ \"(api)/./src/apollo/server/config.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../types */ \"(api)/./src/apollo/server/types/index.ts\");\n\n\n\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_4__.getLogger)(\"MDLBuilder\");\nlogger.level = \"debug\";\nconst config = (0,_server_config__WEBPACK_IMPORTED_MODULE_5__.getConfig)();\n// responsible to generate a valid manifest json\nclass MDLBuilder {\n    constructor(builderOptions){\n        const { project, models, columns, nestedColumns, relations, views, relatedModels, relatedColumns, relatedRelations } = builderOptions;\n        this.project = project;\n        this.models = models.sort((a, b)=>a.id - b.id);\n        this.columns = columns.sort((a, b)=>a.id - b.id);\n        this.nestedColumns = nestedColumns;\n        this.relations = relations.sort((a, b)=>a.id - b.id);\n        this.views = views || [];\n        this.relatedModels = relatedModels;\n        this.relatedColumns = relatedColumns;\n        this.relatedRelations = relatedRelations;\n        // init manifest\n        this.manifest = {};\n    }\n    build() {\n        this.addProject();\n        this.addModel();\n        this.addNormalField();\n        this.addRelation();\n        this.addCalculatedField();\n        this.addView();\n        this.postProcessManifest();\n        return this.getManifest();\n    }\n    getManifest() {\n        return this.manifest;\n    }\n    addModel() {\n        if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()(this.manifest.models)) {\n            return;\n        }\n        this.manifest.models = this.models.map((model)=>{\n            const properties = model.properties ? JSON.parse(model.properties) : {};\n            // put displayName in properties\n            if (model.displayName) {\n                properties.displayName = model.displayName;\n            }\n            const tableReference = this.buildTableReference(model);\n            return {\n                name: model.referenceName,\n                columns: [],\n                tableReference,\n                // can only have one of refSql or tableReference\n                refSql: this.useRustWrenEngine() ? null : tableReference ? null : model.refSql,\n                cached: model.cached ? true : false,\n                refreshTime: model.refreshTime,\n                properties: {\n                    displayName: model.displayName,\n                    description: properties.description\n                },\n                primaryKey: \"\"\n            };\n        });\n    }\n    addView() {\n        if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()(this.manifest.views)) {\n            return;\n        }\n        this.manifest.views = this.views.map((view)=>{\n            const properties = JSON.parse(view.properties) || {};\n            // filter out properties that are not null or undefined\n            // and are in the list of properties that are allowed\n            const viewProperties = lodash_pickBy__WEBPACK_IMPORTED_MODULE_2___default()(properties, (value, key)=>{\n                return !lodash_isNil__WEBPACK_IMPORTED_MODULE_1___default()(value) && [\n                    \"displayName\",\n                    \"description\",\n                    \"question\",\n                    \"summary\"\n                ].includes(key);\n            });\n            return {\n                name: view.name,\n                statement: view.statement,\n                properties: {\n                    ...viewProperties,\n                    // viewId will be passed back in other APIs\n                    // to identify the view\n                    viewId: view.id.toString()\n                }\n            };\n        });\n    }\n    addNormalField() {\n        // should addModel first\n        if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()(this.manifest.models)) {\n            logger.debug(\"No model in manifest, should build model first\");\n            return;\n        }\n        this.columns.filter(({ isCalculated })=>!isCalculated).forEach((column)=>{\n            // validate manifest.model exist\n            const modelRefName = this.models.find((model)=>model.id === column.modelId)?.referenceName;\n            if (!modelRefName) {\n                logger.debug(`Build MDL Column Error: can not find model, modelId ${column.modelId}, columnId: ${column.id}`);\n                return;\n            }\n            const model = this.manifest.models.find((model)=>model.name === modelRefName);\n            // modify model primary key\n            if (column.isPk) {\n                model.primaryKey = column.referenceName;\n            }\n            // add column into model\n            if (!model.columns) {\n                model.columns = [];\n            }\n            const properties = column.properties ? JSON.parse(column.properties) : {};\n            // put displayName in properties\n            if (column.displayName) {\n                properties.displayName = column.displayName;\n            }\n            // put nested columns in properties\n            if (column.type.includes(\"STRUCT\")) {\n                const nestedColumns = this.nestedColumns.filter((nestedColumn)=>nestedColumn.columnId === column.id);\n                nestedColumns.forEach((column)=>{\n                    if (column.displayName) {\n                        properties[`nestedDisplayName.${column.sourceColumnName}`] = column.displayName;\n                    }\n                    if (column.properties?.description) {\n                        properties[`nestedDescription.${column.sourceColumnName}`] = column.properties.description;\n                    }\n                }, {});\n            }\n            const expression = this.getColumnExpression(column, model);\n            model.columns.push({\n                name: column.referenceName,\n                type: column.type,\n                isCalculated: column.isCalculated ? true : false,\n                notNull: column.notNull ? true : false,\n                expression,\n                properties: properties\n            });\n        });\n    }\n    addCalculatedField() {\n        // should addModel first\n        if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_0___default()(this.manifest.models)) {\n            logger.debug(\"No model in manifest, should build model first\");\n            return;\n        }\n        this.columns.filter(({ isCalculated })=>isCalculated).forEach((column)=>{\n            // validate manifest.model exist\n            const relatedModel = this.relatedModels.find((model)=>model.id === column.modelId);\n            const model = this.manifest.models.find((model)=>model.name === relatedModel.referenceName);\n            if (!model) {\n                logger.debug(`Build MDL Column Error: can not find model, modelId \"${column.modelId}\", columnId: \"${column.id}\"`);\n                return;\n            }\n            const expression = this.getColumnExpression(column, model);\n            const columnValue = {\n                name: column.referenceName,\n                type: column.type,\n                isCalculated: true,\n                expression,\n                notNull: column.notNull ? true : false,\n                properties: JSON.parse(column.properties)\n            };\n            model.columns.push(columnValue);\n        });\n    }\n    insertCalculatedField(modelName, calculatedField) {\n        const model = this.manifest.models.find((model)=>model.name === modelName);\n        if (!model) {\n            logger.debug(`Can not find model \"${modelName}\" to add calculated field`);\n            return;\n        }\n        // if calculated field is already in the model, skip\n        if (model.columns.find((column)=>column.name === calculatedField.referenceName)) {\n            return;\n        }\n        const expression = this.getColumnExpression(calculatedField, model);\n        const columnValue = {\n            name: calculatedField.referenceName,\n            type: calculatedField.type,\n            isCalculated: true,\n            expression,\n            notNull: calculatedField.notNull ? true : false,\n            properties: JSON.parse(calculatedField.properties)\n        };\n        model.columns.push(columnValue);\n    }\n    addRelation() {\n        this.manifest.relationships = this.relations.map((relation)=>{\n            const { name, joinType, fromModelName, fromColumnName, toModelName, toColumnName } = relation;\n            const condition = this.getRelationCondition(relation);\n            this.addRelationColumn(fromModelName, {\n                modelReferenceName: toModelName,\n                columnReferenceName: toColumnName,\n                relation: name\n            });\n            this.addRelationColumn(toModelName, {\n                modelReferenceName: fromModelName,\n                columnReferenceName: fromColumnName,\n                relation: name\n            });\n            const properties = relation.properties ? JSON.parse(relation.properties) : {};\n            return {\n                name: name,\n                models: [\n                    fromModelName,\n                    toModelName\n                ],\n                joinType: joinType,\n                condition,\n                properties\n            };\n        });\n    }\n    addProject() {\n        this.manifest.schema = this.project.schema;\n        this.manifest.catalog = this.project.catalog;\n        const dataSource = this.buildDataSource();\n        if (dataSource) {\n            this.manifest.dataSource = dataSource;\n        }\n    }\n    addRelationColumn(modelName, columnData) {\n        const model = this.manifest.models.find((model)=>model.name === modelName);\n        if (!model) {\n            logger.debug(`Can not find model \"${modelName}\" to add relation column`);\n            return;\n        }\n        if (!model.columns) {\n            model.columns = [];\n        }\n        // check if the modelReferenceName is already in the model column\n        const modelNameDuplicated = model.columns.find((column)=>column.name === columnData.modelReferenceName);\n        const column = {\n            name: modelNameDuplicated ? `${columnData.modelReferenceName}_${columnData.columnReferenceName}` : columnData.modelReferenceName,\n            type: columnData.modelReferenceName,\n            properties: null,\n            relationship: columnData.relation,\n            isCalculated: false,\n            notNull: false\n        };\n        model.columns.push(column);\n    }\n    getColumnExpression(column, currentModel) {\n        if (!column.isCalculated) {\n            // columns existed in the data source.\n            // Provide original column name in expression to MDL if referenceName has converted.\n            if (column.sourceColumnName !== column.referenceName) {\n                return `\"${column.sourceColumnName}\"`;\n            }\n            return \"\";\n        }\n        // calculated field\n        const lineage = JSON.parse(column.lineage);\n        // lineage = [relationId1, relationId2, ..., columnId]\n        const fieldExpression = Object.entries(lineage).reduce((acc, [index, id])=>{\n            const isLast = parseInt(index) == lineage.length - 1;\n            if (isLast) {\n                // id is columnId\n                const columnReferenceName = this.relatedColumns.find((relatedColumn)=>relatedColumn.id === id)?.referenceName;\n                acc.push(`\\\"${columnReferenceName}\\\"`);\n                return acc;\n            }\n            // id is relationId\n            const usedRelation = this.relatedRelations.find((relatedRelation)=>relatedRelation.id === id);\n            const relationColumnName = currentModel.columns.find((c)=>c.relationship === usedRelation.name).name;\n            // move to next model\n            const nextModelName = currentModel.name === usedRelation.fromModelName ? usedRelation.toModelName : usedRelation.fromModelName;\n            const nextModel = this.manifest.models.find((model)=>model.name === nextModelName);\n            currentModel = nextModel;\n            acc.push(relationColumnName);\n            return acc;\n        }, []);\n        return `${column.aggregation}(${fieldExpression.join(\".\")})`;\n    }\n    getRelationCondition(relation) {\n        //TODO phase2: implement the expression for relation condition\n        const { fromColumnName, toColumnName, fromModelName, toModelName } = relation;\n        return `\"${fromModelName}\".${fromColumnName} = \"${toModelName}\".${toColumnName}`;\n    }\n    buildTableReference(model) {\n        const modelProps = model.properties && typeof model.properties === \"string\" ? JSON.parse(model.properties) : {};\n        if (!modelProps.table) {\n            return null;\n        }\n        return {\n            catalog: modelProps.catalog || null,\n            schema: modelProps.schema || null,\n            table: modelProps.table\n        };\n    }\n    postProcessManifest() {\n        if (this.useRustWrenEngine()) {\n            // 1. remove all the key that the value is null\n            this.manifest.models = this.manifest.models?.map((model)=>{\n                model.columns.map((column)=>{\n                    column.properties = lodash_pickBy__WEBPACK_IMPORTED_MODULE_2___default()(column.properties, (value)=>value !== null);\n                    return column;\n                });\n                return lodash_pickBy__WEBPACK_IMPORTED_MODULE_2___default()(model, (value)=>value !== null);\n            });\n            this.manifest.views = this.manifest.views?.map((view)=>{\n                return lodash_pickBy__WEBPACK_IMPORTED_MODULE_2___default()(view, (value)=>value !== null);\n            });\n            this.manifest.relationships = this.manifest.relationships?.map((relationship)=>{\n                return lodash_pickBy__WEBPACK_IMPORTED_MODULE_2___default()(relationship, (value)=>value !== null);\n            });\n            this.manifest.enumDefinitions = this.manifest.enumDefinitions?.map((enumDefinition)=>{\n                return lodash_pickBy__WEBPACK_IMPORTED_MODULE_2___default()(enumDefinition, (value)=>value !== null);\n            });\n            // 2. remove expression if it's empty string\n            this.manifest.models?.forEach((model)=>{\n                model.columns?.forEach((column)=>{\n                    if (column.expression === \"\") {\n                        delete column.expression;\n                    }\n                });\n            });\n        }\n    }\n    useRustWrenEngine() {\n        return !!config.experimentalEngineRustVersion;\n    }\n    buildDataSource() {\n        const type = this.project.type;\n        if (!type) {\n            return;\n        }\n        switch(type){\n            case _types__WEBPACK_IMPORTED_MODULE_6__.DataSourceName.BIG_QUERY:\n                return _type__WEBPACK_IMPORTED_MODULE_3__.WrenEngineDataSourceType.BIGQUERY;\n            case _types__WEBPACK_IMPORTED_MODULE_6__.DataSourceName.DUCKDB:\n                return _type__WEBPACK_IMPORTED_MODULE_3__.WrenEngineDataSourceType.DUCKDB;\n            case _types__WEBPACK_IMPORTED_MODULE_6__.DataSourceName.POSTGRES:\n                return _type__WEBPACK_IMPORTED_MODULE_3__.WrenEngineDataSourceType.POSTGRES;\n            case _types__WEBPACK_IMPORTED_MODULE_6__.DataSourceName.MYSQL:\n                return _type__WEBPACK_IMPORTED_MODULE_3__.WrenEngineDataSourceType.MYSQL;\n            case _types__WEBPACK_IMPORTED_MODULE_6__.DataSourceName.MSSQL:\n                return _type__WEBPACK_IMPORTED_MODULE_3__.WrenEngineDataSourceType.MSSQL;\n            case _types__WEBPACK_IMPORTED_MODULE_6__.DataSourceName.CLICK_HOUSE:\n                return _type__WEBPACK_IMPORTED_MODULE_3__.WrenEngineDataSourceType.CLICKHOUSE;\n            case _types__WEBPACK_IMPORTED_MODULE_6__.DataSourceName.TRINO:\n                return _type__WEBPACK_IMPORTED_MODULE_3__.WrenEngineDataSourceType.TRINO;\n            case _types__WEBPACK_IMPORTED_MODULE_6__.DataSourceName.SNOWFLAKE:\n                return _type__WEBPACK_IMPORTED_MODULE_3__.WrenEngineDataSourceType.SNOWFLAKE;\n            default:\n                throw new Error(`Unsupported data source type: ${type} found when building manifest`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9tZGwvbWRsQnVpbGRlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUFBO0FBQUE7QUFjaEM7QUFDMEI7QUFDQztBQUNEO0FBRTFDLE1BQU1PLFNBQVNILHdEQUFTQSxDQUFDO0FBQ3pCRyxPQUFPQyxLQUFLLEdBQUc7QUFFZixNQUFNQyxTQUFTSix5REFBU0E7QUFrQnhCLGdEQUFnRDtBQUN6QyxNQUFNSztJQWtCWEMsWUFBWUMsY0FBMEMsQ0FBRTtRQUN0RCxNQUFNLEVBQ0pDLE9BQU8sRUFDUEMsTUFBTSxFQUNOQyxPQUFPLEVBQ1BDLGFBQWEsRUFDYkMsU0FBUyxFQUNUQyxLQUFLLEVBQ0xDLGFBQWEsRUFDYkMsY0FBYyxFQUNkQyxnQkFBZ0IsRUFDakIsR0FBR1Q7UUFDSixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLE1BQU0sR0FBR0EsT0FBT1EsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVFLEVBQUUsR0FBR0QsRUFBRUMsRUFBRTtRQUMvQyxJQUFJLENBQUNWLE9BQU8sR0FBR0EsUUFBUU8sSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVFLEVBQUUsR0FBR0QsRUFBRUMsRUFBRTtRQUNqRCxJQUFJLENBQUNULGFBQWEsR0FBR0E7UUFDckIsSUFBSSxDQUFDQyxTQUFTLEdBQUdBLFVBQVVLLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxFQUFFRSxFQUFFLEdBQUdELEVBQUVDLEVBQUU7UUFDckQsSUFBSSxDQUFDUCxLQUFLLEdBQUdBLFNBQVMsRUFBRTtRQUN4QixJQUFJLENBQUNDLGFBQWEsR0FBR0E7UUFDckIsSUFBSSxDQUFDQyxjQUFjLEdBQUdBO1FBQ3RCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUdBO1FBRXhCLGdCQUFnQjtRQUNoQixJQUFJLENBQUNLLFFBQVEsR0FBRyxDQUFDO0lBQ25CO0lBRU9DLFFBQWtCO1FBQ3ZCLElB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SCwyREFBd0JBLENBQUMrSCxLQUFLO1lBQ3ZDLEtBQUs1SCxrREFBY0EsQ0FBQzZILEtBQUs7Z0JBQ3ZCLE9BQU9oSSwyREFBd0JBLENBQUNnSSxLQUFLO1lBQ3ZDLEtBQUs3SCxrREFBY0EsQ0FBQzhILFdBQVc7Z0JBQzdCLE9BQU9qSSwyREFBd0JBLENBQUNrSSxVQUFVO1lBQzVDLEtBQUsvSCxrREFBY0EsQ0FBQ2dJLEtBQUs7Z0JBQ3ZCLE9BQU9uSSwyREFBd0JBLENBQUNtSSxLQUFLO1lBQ3ZDLEtBQUtoSSxrREFBY0EsQ0FBQ2lJLFNBQVM7Z0JBQzNCLE9BQU9wSSwyREFBd0JBLENBQUNvSSxTQUFTO1lBQzNDO2dCQUNFLE1BQU0sSUFBSUMsTUFDUixDQUFDLDhCQUE4QixFQUFFbkUsS0FBSyw2QkFBNkIsQ0FBQztRQUUxRTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvbWRsL21kbEJ1aWxkZXIudHM/ZTRhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0VtcHR5LCBpc05pbCwgcGlja0J5IH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7XG4gIE1vZGVsLFxuICBNb2RlbENvbHVtbixcbiAgTW9kZWxOZXN0ZWRDb2x1bW4sXG4gIFByb2plY3QsXG4gIFJlbGF0aW9uSW5mbyxcbiAgVmlldyxcbn0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzJztcbmltcG9ydCB7XG4gIE1hbmlmZXN0LFxuICBNb2RlbE1ETCxcbiAgVGFibGVSZWZlcmVuY2UsXG4gIFdyZW5FbmdpbmVEYXRhU291cmNlVHlwZSxcbn0gZnJvbSAnLi90eXBlJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BzZXJ2ZXIvdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnQHNlcnZlci9jb25maWcnO1xuaW1wb3J0IHsgRGF0YVNvdXJjZU5hbWUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignTURMQnVpbGRlcicpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKCk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTURMQnVpbGRlckJ1aWxkRnJvbU9wdGlvbnMge1xuICBwcm9qZWN0OiBQcm9qZWN0O1xuICBtb2RlbHM6IE1vZGVsW107XG4gIGNvbHVtbnM/OiBNb2RlbENvbHVtbltdO1xuICBuZXN0ZWRDb2x1bW5zPzogTW9kZWxOZXN0ZWRDb2x1bW5bXTtcbiAgcmVsYXRpb25zPzogUmVsYXRpb25JbmZvW107XG4gIHZpZXdzOiBWaWV3W107XG4gIHJlbGF0ZWRNb2RlbHM/OiBNb2RlbFtdO1xuICByZWxhdGVkQ29sdW1ucz86IE1vZGVsQ29sdW1uW107XG4gIHJlbGF0ZWRSZWxhdGlvbnM/OiBSZWxhdGlvbkluZm9bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTURMQnVpbGRlciB7XG4gIGJ1aWxkKCk6IE1hbmlmZXN0OyAvL2ZhY2FkZSBtZXRob2QgdG8gYnVpbGQgdGhlIG1hbmlmZXN0IGpzb25cbn1cblxuLy8gcmVzcG9uc2libGUgdG8gZ2VuZXJhdGUgYSB2YWxpZCBtYW5pZmVzdCBqc29uXG5leHBvcnQgY2xhc3MgTURMQnVpbGRlciBpbXBsZW1lbnRzIElNRExCdWlsZGVyIHtcbiAgcHJpdmF0ZSBtYW5pZmVzdDogTWFuaWZlc3Q7XG5cbiAgcHJpdmF0ZSBwcm9qZWN0OiBQcm9qZWN0O1xuICBwcml2YXRlIHJlYWRvbmx5IG1vZGVsczogTW9kZWxbXTtcbiAgcHJpdmF0ZSByZWFkb25seSBjb2x1bW5zOiBNb2RlbENvbHVtbltdO1xuICBwcml2YXRlIHJlYWRvbmx5IG5lc3RlZENvbHVtbnM6IE1vZGVsTmVzdGVkQ29sdW1uW107XG4gIHByaXZhdGUgcmVhZG9ubHkgcmVsYXRpb25zOiBSZWxhdGlvbkluZm9bXTtcbiAgcHJpdmF0ZSByZWFkb25seSB2aWV3czogVmlld1tdO1xuXG4gIC8vIHJlbGF0ZWQgbW9kZWxzLCBjb2x1bW5zLCBhbmQgcmVsYXRpb25zIGFyZSB1c2VkIGFzIHRoZSByZWZlcmVuY2UgdG8gYnVpbGQgY2FsY3VsYXRlZEZpZWxkIGV4cHJlc3Npb24gb3Igb3RoZXJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICBwcml2YXRlIHJlYWRvbmx5IHJlbGF0ZWRNb2RlbHM6IE1vZGVsW107XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgcHJpdmF0ZSByZWFkb25seSByZWxhdGVkQ29sdW1uczogTW9kZWxDb2x1bW5bXTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICBwcml2YXRlIHJlYWRvbmx5IHJlbGF0ZWRSZWxhdGlvbnM6IFJlbGF0aW9uSW5mb1tdO1xuXG4gIGNvbnN0cnVjdG9yKGJ1aWxkZXJPcHRpb25zOiBNRExCdWlsZGVyQnVpbGRGcm9tT3B0aW9ucykge1xuICAgIGNvbnN0IHtcbiAgICAgIHByb2plY3QsXG4gICAgICBtb2RlbHMsXG4gICAgICBjb2x1bW5zLFxuICAgICAgbmVzdGVkQ29sdW1ucyxcbiAgICAgIHJlbGF0aW9ucyxcbiAgICAgIHZpZXdzLFxuICAgICAgcmVsYXRlZE1vZGVscyxcbiAgICAgIHJlbGF0ZWRDb2x1bW5zLFxuICAgICAgcmVsYXRlZFJlbGF0aW9ucyxcbiAgICB9ID0gYnVpbGRlck9wdGlvbnM7XG4gICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICB0aGlzLm1vZGVscyA9IG1vZGVscy5zb3J0KChhLCBiKSA9PiBhLmlkIC0gYi5pZCk7XG4gICAgdGhpcy5jb2x1bW5zID0gY29sdW1ucy5zb3J0KChhLCBiKSA9PiBhLmlkIC0gYi5pZCk7XG4gICAgdGhpcy5uZXN0ZWRDb2x1bW5zID0gbmVzdGVkQ29sdW1ucztcbiAgICB0aGlzLnJlbGF0aW9ucyA9IHJlbGF0aW9ucy5zb3J0KChhLCBiKSA9PiBhLmlkIC0gYi5pZCk7XG4gICAgdGhpcy52aWV3cyA9IHZpZXdzIHx8IFtdO1xuICAgIHRoaXMucmVsYXRlZE1vZGVscyA9IHJlbGF0ZWRNb2RlbHM7XG4gICAgdGhpcy5yZWxhdGVkQ29sdW1ucyA9IHJlbGF0ZWRDb2x1bW5zO1xuICAgIHRoaXMucmVsYXRlZFJlbGF0aW9ucyA9IHJlbGF0ZWRSZWxhdGlvbnM7XG5cbiAgICAvLyBpbml0IG1hbmlmZXN0XG4gICAgdGhpcy5tYW5pZmVzdCA9IHt9O1xuICB9XG5cbiAgcHVibGljIGJ1aWxkKCk6IE1hbmlmZXN0IHtcbiAgICB0aGlzLmFkZFByb2plY3QoKTtcbiAgICB0aGlzLmFkZE1vZGVsKCk7XG4gICAgdGhpcy5hZGROb3JtYWxGaWVsZCgpO1xuICAgIHRoaXMuYWRkUmVsYXRpb24oKTtcbiAgICB0aGlzLmFkZENhbGN1bGF0ZWRGaWVsZCgpO1xuICAgIHRoaXMuYWRkVmlldygpO1xuICAgIHRoaXMucG9zdFByb2Nlc3NNYW5pZmVzdCgpO1xuICAgIHJldHVybiB0aGlzLmdldE1hbmlmZXN0KCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TWFuaWZlc3QoKTogTWFuaWZlc3Qge1xuICAgIHJldHVybiB0aGlzLm1hbmlmZXN0O1xuICB9XG5cbiAgcHVibGljIGFkZE1vZGVsKCk6IHZvaWQge1xuICAgIGlmICghaXNFbXB0eSh0aGlzLm1hbmlmZXN0Lm1vZGVscykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tYW5pZmVzdC5tb2RlbHMgPSB0aGlzLm1vZGVscy5tYXAoKG1vZGVsOiBNb2RlbCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydGllcyA9IG1vZGVsLnByb3BlcnRpZXMgPyBKU09OLnBhcnNlKG1vZGVsLnByb3BlcnRpZXMpIDoge307XG4gICAgICAvLyBwdXQgZGlzcGxheU5hbWUgaW4gcHJvcGVydGllc1xuICAgICAgaWYgKG1vZGVsLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgIHByb3BlcnRpZXMuZGlzcGxheU5hbWUgPSBtb2RlbC5kaXNwbGF5TmFtZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhYmxlUmVmZXJlbmNlID0gdGhpcy5idWlsZFRhYmxlUmVmZXJlbmNlKG1vZGVsKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogbW9kZWwucmVmZXJlbmNlTmFtZSxcbiAgICAgICAgY29sdW1uczogW10sXG4gICAgICAgIHRhYmxlUmVmZXJlbmNlLFxuICAgICAgICAvLyBjYW4gb25seSBoYXZlIG9uZSBvZiByZWZTcWwgb3IgdGFibGVSZWZlcmVuY2VcbiAgICAgICAgcmVmU3FsOiB0aGlzLnVzZVJ1c3RXcmVuRW5naW5lKClcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6IHRhYmxlUmVmZXJlbmNlXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogbW9kZWwucmVmU3FsLFxuICAgICAgICBjYWNoZWQ6IG1vZGVsLmNhY2hlZCA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgcmVmcmVzaFRpbWU6IG1vZGVsLnJlZnJlc2hUaW1lLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgZGlzcGxheU5hbWU6IG1vZGVsLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uLFxuICAgICAgICB9LFxuICAgICAgICBwcmltYXJ5S2V5OiAnJywgLy8gd2lsbCBiZSBtb2RpZmllZCBpbiBhZGRDb2x1bW5cbiAgICAgIH0gYXMgTW9kZWxNREw7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYWRkVmlldygpOiB2b2lkIHtcbiAgICBpZiAoIWlzRW1wdHkodGhpcy5tYW5pZmVzdC52aWV3cykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tYW5pZmVzdC52aWV3cyA9IHRoaXMudmlld3MubWFwKCh2aWV3OiBWaWV3KSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gSlNPTi5wYXJzZSh2aWV3LnByb3BlcnRpZXMpIHx8IHt9O1xuXG4gICAgICAvLyBmaWx0ZXIgb3V0IHByb3BlcnRpZXMgdGhhdCBhcmUgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAvLyBhbmQgYXJlIGluIHRoZSBsaXN0IG9mIHByb3BlcnRpZXMgdGhhdCBhcmUgYWxsb3dlZFxuICAgICAgY29uc3Qgdmlld1Byb3BlcnRpZXMgPSBwaWNrQnkocHJvcGVydGllcywgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAhaXNOaWwodmFsdWUpICYmXG4gICAgICAgICAgWydkaXNwbGF5TmFtZScsICdkZXNjcmlwdGlvbicsICdxdWVzdGlvbicsICdzdW1tYXJ5J10uaW5jbHVkZXMoa2V5KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHZpZXcubmFtZSxcbiAgICAgICAgc3RhdGVtZW50OiB2aWV3LnN0YXRlbWVudCxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIC4uLnZpZXdQcm9wZXJ0aWVzLFxuXG4gICAgICAgICAgLy8gdmlld0lkIHdpbGwgYmUgcGFzc2VkIGJhY2sgaW4gb3RoZXIgQVBJc1xuICAgICAgICAgIC8vIHRvIGlkZW50aWZ5IHRoZSB2aWV3XG4gICAgICAgICAgdmlld0lkOiB2aWV3LmlkLnRvU3RyaW5nKCksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFkZE5vcm1hbEZpZWxkKCk6IHZvaWQge1xuICAgIC8vIHNob3VsZCBhZGRNb2RlbCBmaXJzdFxuICAgIGlmIChpc0VtcHR5KHRoaXMubWFuaWZlc3QubW9kZWxzKSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdObyBtb2RlbCBpbiBtYW5pZmVzdCwgc2hvdWxkIGJ1aWxkIG1vZGVsIGZpcnN0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY29sdW1uc1xuICAgICAgLmZpbHRlcigoeyBpc0NhbGN1bGF0ZWQgfSkgPT4gIWlzQ2FsY3VsYXRlZClcbiAgICAgIC5mb3JFYWNoKChjb2x1bW46IE1vZGVsQ29sdW1uKSA9PiB7XG4gICAgICAgIC8vIHZhbGlkYXRlIG1hbmlmZXN0Lm1vZGVsIGV4aXN0XG4gICAgICAgIGNvbnN0IG1vZGVsUmVmTmFtZSA9IHRoaXMubW9kZWxzLmZpbmQoXG4gICAgICAgICAgKG1vZGVsOiBhbnkpID0+IG1vZGVsLmlkID09PSBjb2x1bW4ubW9kZWxJZCxcbiAgICAgICAgKT8ucmVmZXJlbmNlTmFtZTtcbiAgICAgICAgaWYgKCFtb2RlbFJlZk5hbWUpIHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBgQnVpbGQgTURMIENvbHVtbiBFcnJvcjogY2FuIG5vdCBmaW5kIG1vZGVsLCBtb2RlbElkICR7Y29sdW1uLm1vZGVsSWR9LCBjb2x1bW5JZDogJHtjb2x1bW4uaWR9YCxcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMubWFuaWZlc3QubW9kZWxzLmZpbmQoXG4gICAgICAgICAgKG1vZGVsOiBhbnkpID0+IG1vZGVsLm5hbWUgPT09IG1vZGVsUmVmTmFtZSxcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBtb2RpZnkgbW9kZWwgcHJpbWFyeSBrZXlcbiAgICAgICAgaWYgKGNvbHVtbi5pc1BrKSB7XG4gICAgICAgICAgbW9kZWwucHJpbWFyeUtleSA9IGNvbHVtbi5yZWZlcmVuY2VOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIGNvbHVtbiBpbnRvIG1vZGVsXG4gICAgICAgIGlmICghbW9kZWwuY29sdW1ucykge1xuICAgICAgICAgIG1vZGVsLmNvbHVtbnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gY29sdW1uLnByb3BlcnRpZXNcbiAgICAgICAgICA/IEpTT04ucGFyc2UoY29sdW1uLnByb3BlcnRpZXMpXG4gICAgICAgICAgOiB7fTtcbiAgICAgICAgLy8gcHV0IGRpc3BsYXlOYW1lIGluIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGNvbHVtbi5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIHByb3BlcnRpZXMuZGlzcGxheU5hbWUgPSBjb2x1bW4uZGlzcGxheU5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHV0IG5lc3RlZCBjb2x1bW5zIGluIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKGNvbHVtbi50eXBlLmluY2x1ZGVzKCdTVFJVQ1QnKSkge1xuICAgICAgICAgIGNvbnN0IG5lc3RlZENvbHVtbnMgPSB0aGlzLm5lc3RlZENvbHVtbnMuZmlsdGVyKFxuICAgICAgICAgICAgKG5lc3RlZENvbHVtbikgPT4gbmVzdGVkQ29sdW1uLmNvbHVtbklkID09PSBjb2x1bW4uaWQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBuZXN0ZWRDb2x1bW5zLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbHVtbi5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgICBwcm9wZXJ0aWVzW2BuZXN0ZWREaXNwbGF5TmFtZS4ke2NvbHVtbi5zb3VyY2VDb2x1bW5OYW1lfWBdID1cbiAgICAgICAgICAgICAgICBjb2x1bW4uZGlzcGxheU5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sdW1uLnByb3BlcnRpZXM/LmRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgIHByb3BlcnRpZXNbYG5lc3RlZERlc2NyaXB0aW9uLiR7Y29sdW1uLnNvdXJjZUNvbHVtbk5hbWV9YF0gPVxuICAgICAgICAgICAgICAgIGNvbHVtbi5wcm9wZXJ0aWVzLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleHByZXNzaW9uID0gdGhpcy5nZXRDb2x1bW5FeHByZXNzaW9uKGNvbHVtbiwgbW9kZWwpO1xuICAgICAgICBtb2RlbC5jb2x1bW5zLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGNvbHVtbi5yZWZlcmVuY2VOYW1lLFxuICAgICAgICAgIHR5cGU6IGNvbHVtbi50eXBlLFxuICAgICAgICAgIGlzQ2FsY3VsYXRlZDogY29sdW1uLmlzQ2FsY3VsYXRlZCA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICBub3ROdWxsOiBjb2x1bW4ubm90TnVsbCA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICBleHByZXNzaW9uLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYWRkQ2FsY3VsYXRlZEZpZWxkKCk6IHZvaWQge1xuICAgIC8vIHNob3VsZCBhZGRNb2RlbCBmaXJzdFxuICAgIGlmIChpc0VtcHR5KHRoaXMubWFuaWZlc3QubW9kZWxzKSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdObyBtb2RlbCBpbiBtYW5pZmVzdCwgc2hvdWxkIGJ1aWxkIG1vZGVsIGZpcnN0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY29sdW1uc1xuICAgICAgLmZpbHRlcigoeyBpc0NhbGN1bGF0ZWQgfSkgPT4gaXNDYWxjdWxhdGVkKVxuICAgICAgLmZvckVhY2goKGNvbHVtbjogTW9kZWxDb2x1bW4pID0+IHtcbiAgICAgICAgLy8gdmFsaWRhdGUgbWFuaWZlc3QubW9kZWwgZXhpc3RcbiAgICAgICAgY29uc3QgcmVsYXRlZE1vZGVsID0gdGhpcy5yZWxhdGVkTW9kZWxzLmZpbmQoXG4gICAgICAgICAgKG1vZGVsOiBhbnkpID0+IG1vZGVsLmlkID09PSBjb2x1bW4ubW9kZWxJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLm1hbmlmZXN0Lm1vZGVscy5maW5kKFxuICAgICAgICAgIChtb2RlbDogYW55KSA9PiBtb2RlbC5uYW1lID09PSByZWxhdGVkTW9kZWwucmVmZXJlbmNlTmFtZSxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFtb2RlbCkge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgIGBCdWlsZCBNREwgQ29sdW1uIEVycm9yOiBjYW4gbm90IGZpbmQgbW9kZWwsIG1vZGVsSWQgXCIke2NvbHVtbi5tb2RlbElkfVwiLCBjb2x1bW5JZDogXCIke2NvbHVtbi5pZH1cImAsXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IHRoaXMuZ2V0Q29sdW1uRXhwcmVzc2lvbihjb2x1bW4sIG1vZGVsKTtcbiAgICAgICAgY29uc3QgY29sdW1uVmFsdWUgPSB7XG4gICAgICAgICAgbmFtZTogY29sdW1uLnJlZmVyZW5jZU5hbWUsXG4gICAgICAgICAgdHlwZTogY29sdW1uLnR5cGUsXG4gICAgICAgICAgaXNDYWxjdWxhdGVkOiB0cnVlLFxuICAgICAgICAgIGV4cHJlc3Npb24sXG4gICAgICAgICAgbm90TnVsbDogY29sdW1uLm5vdE51bGwgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgICAgcHJvcGVydGllczogSlNPTi5wYXJzZShjb2x1bW4ucHJvcGVydGllcyksXG4gICAgICAgIH07XG4gICAgICAgIG1vZGVsLmNvbHVtbnMucHVzaChjb2x1bW5WYWx1ZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBpbnNlcnRDYWxjdWxhdGVkRmllbGQoXG4gICAgbW9kZWxOYW1lOiBzdHJpbmcsXG4gICAgY2FsY3VsYXRlZEZpZWxkOiBNb2RlbENvbHVtbixcbiAgKSB7XG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLm1hbmlmZXN0Lm1vZGVscy5maW5kKFxuICAgICAgKG1vZGVsOiBhbnkpID0+IG1vZGVsLm5hbWUgPT09IG1vZGVsTmFtZSxcbiAgICApO1xuICAgIGlmICghbW9kZWwpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2FuIG5vdCBmaW5kIG1vZGVsIFwiJHttb2RlbE5hbWV9XCIgdG8gYWRkIGNhbGN1bGF0ZWQgZmllbGRgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gaWYgY2FsY3VsYXRlZCBmaWVsZCBpcyBhbHJlYWR5IGluIHRoZSBtb2RlbCwgc2tpcFxuICAgIGlmIChcbiAgICAgIG1vZGVsLmNvbHVtbnMuZmluZChcbiAgICAgICAgKGNvbHVtbjogYW55KSA9PiBjb2x1bW4ubmFtZSA9PT0gY2FsY3VsYXRlZEZpZWxkLnJlZmVyZW5jZU5hbWUsXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV4cHJlc3Npb24gPSB0aGlzLmdldENvbHVtbkV4cHJlc3Npb24oY2FsY3VsYXRlZEZpZWxkLCBtb2RlbCk7XG4gICAgY29uc3QgY29sdW1uVmFsdWUgPSB7XG4gICAgICBuYW1lOiBjYWxjdWxhdGVkRmllbGQucmVmZXJlbmNlTmFtZSxcbiAgICAgIHR5cGU6IGNhbGN1bGF0ZWRGaWVsZC50eXBlLFxuICAgICAgaXNDYWxjdWxhdGVkOiB0cnVlLFxuICAgICAgZXhwcmVzc2lvbixcbiAgICAgIG5vdE51bGw6IGNhbGN1bGF0ZWRGaWVsZC5ub3ROdWxsID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgcHJvcGVydGllczogSlNPTi5wYXJzZShjYWxjdWxhdGVkRmllbGQucHJvcGVydGllcyksXG4gICAgfTtcbiAgICBtb2RlbC5jb2x1bW5zLnB1c2goY29sdW1uVmFsdWUpO1xuICB9XG5cbiAgcHVibGljIGFkZFJlbGF0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMubWFuaWZlc3QucmVsYXRpb25zaGlwcyA9IHRoaXMucmVsYXRpb25zLm1hcChcbiAgICAgIChyZWxhdGlvbjogUmVsYXRpb25JbmZvKSA9PiB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGpvaW5UeXBlLFxuICAgICAgICAgIGZyb21Nb2RlbE5hbWUsXG4gICAgICAgICAgZnJvbUNvbHVtbk5hbWUsXG4gICAgICAgICAgdG9Nb2RlbE5hbWUsXG4gICAgICAgICAgdG9Db2x1bW5OYW1lLFxuICAgICAgICB9ID0gcmVsYXRpb247XG4gICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IHRoaXMuZ2V0UmVsYXRpb25Db25kaXRpb24ocmVsYXRpb24pO1xuICAgICAgICB0aGlzLmFkZFJlbGF0aW9uQ29sdW1uKGZyb21Nb2RlbE5hbWUsIHtcbiAgICAgICAgICBtb2RlbFJlZmVyZW5jZU5hbWU6IHRvTW9kZWxOYW1lLFxuICAgICAgICAgIGNvbHVtblJlZmVyZW5jZU5hbWU6IHRvQ29sdW1uTmFtZSxcbiAgICAgICAgICByZWxhdGlvbjogbmFtZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWRkUmVsYXRpb25Db2x1bW4odG9Nb2RlbE5hbWUsIHtcbiAgICAgICAgICBtb2RlbFJlZmVyZW5jZU5hbWU6IGZyb21Nb2RlbE5hbWUsXG4gICAgICAgICAgY29sdW1uUmVmZXJlbmNlTmFtZTogZnJvbUNvbHVtbk5hbWUsXG4gICAgICAgICAgcmVsYXRpb246IG5hbWUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSByZWxhdGlvbi5wcm9wZXJ0aWVzXG4gICAgICAgICAgPyBKU09OLnBhcnNlKHJlbGF0aW9uLnByb3BlcnRpZXMpXG4gICAgICAgICAgOiB7fTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgbW9kZWxzOiBbZnJvbU1vZGVsTmFtZSwgdG9Nb2RlbE5hbWVdLFxuICAgICAgICAgIGpvaW5UeXBlOiBqb2luVHlwZSxcbiAgICAgICAgICBjb25kaXRpb24sXG4gICAgICAgICAgcHJvcGVydGllcyxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRQcm9qZWN0KCk6IHZvaWQge1xuICAgIHRoaXMubWFuaWZlc3Quc2NoZW1hID0gdGhpcy5wcm9qZWN0LnNjaGVtYTtcbiAgICB0aGlzLm1hbmlmZXN0LmNhdGFsb2cgPSB0aGlzLnByb2plY3QuY2F0YWxvZztcbiAgICBjb25zdCBkYXRhU291cmNlID0gdGhpcy5idWlsZERhdGFTb3VyY2UoKTtcbiAgICBpZiAoZGF0YVNvdXJjZSkge1xuICAgICAgdGhpcy5tYW5pZmVzdC5kYXRhU291cmNlID0gZGF0YVNvdXJjZTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgYWRkUmVsYXRpb25Db2x1bW4oXG4gICAgbW9kZWxOYW1lOiBzdHJpbmcsXG4gICAgY29sdW1uRGF0YToge1xuICAgICAgbW9kZWxSZWZlcmVuY2VOYW1lOiBzdHJpbmc7XG4gICAgICBjb2x1bW5SZWZlcmVuY2VOYW1lOiBzdHJpbmc7XG4gICAgICByZWxhdGlvbjogc3RyaW5nO1xuICAgIH0sXG4gICkge1xuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5tYW5pZmVzdC5tb2RlbHMuZmluZChcbiAgICAgIChtb2RlbDogYW55KSA9PiBtb2RlbC5uYW1lID09PSBtb2RlbE5hbWUsXG4gICAgKTtcbiAgICBpZiAoIW1vZGVsKSB7XG4gICAgICBsb2dnZXIuZGVidWcoYENhbiBub3QgZmluZCBtb2RlbCBcIiR7bW9kZWxOYW1lfVwiIHRvIGFkZCByZWxhdGlvbiBjb2x1bW5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFtb2RlbC5jb2x1bW5zKSB7XG4gICAgICBtb2RlbC5jb2x1bW5zID0gW107XG4gICAgfVxuICAgIC8vIGNoZWNrIGlmIHRoZSBtb2RlbFJlZmVyZW5jZU5hbWUgaXMgYWxyZWFkeSBpbiB0aGUgbW9kZWwgY29sdW1uXG4gICAgY29uc3QgbW9kZWxOYW1lRHVwbGljYXRlZCA9IG1vZGVsLmNvbHVtbnMuZmluZChcbiAgICAgIChjb2x1bW46IGFueSkgPT4gY29sdW1uLm5hbWUgPT09IGNvbHVtbkRhdGEubW9kZWxSZWZlcmVuY2VOYW1lLFxuICAgICk7XG4gICAgY29uc3QgY29sdW1uID0ge1xuICAgICAgbmFtZTogbW9kZWxOYW1lRHVwbGljYXRlZFxuICAgICAgICA/IGAke2NvbHVtbkRhdGEubW9kZWxSZWZlcmVuY2VOYW1lfV8ke2NvbHVtbkRhdGEuY29sdW1uUmVmZXJlbmNlTmFtZX1gXG4gICAgICAgIDogY29sdW1uRGF0YS5tb2RlbFJlZmVyZW5jZU5hbWUsXG4gICAgICB0eXBlOiBjb2x1bW5EYXRhLm1vZGVsUmVmZXJlbmNlTmFtZSxcbiAgICAgIHByb3BlcnRpZXM6IG51bGwsXG4gICAgICByZWxhdGlvbnNoaXA6IGNvbHVtbkRhdGEucmVsYXRpb24sXG4gICAgICBpc0NhbGN1bGF0ZWQ6IGZhbHNlLFxuICAgICAgbm90TnVsbDogZmFsc2UsXG4gICAgfTtcbiAgICBtb2RlbC5jb2x1bW5zLnB1c2goY29sdW1uKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRDb2x1bW5FeHByZXNzaW9uKFxuICAgIGNvbHVtbjogTW9kZWxDb2x1bW4sXG4gICAgY3VycmVudE1vZGVsPzogUGFydGlhbDxNb2RlbE1ETD4sXG4gICk6IHN0cmluZyB7XG4gICAgaWYgKCFjb2x1bW4uaXNDYWxjdWxhdGVkKSB7XG4gICAgICAvLyBjb2x1bW5zIGV4aXN0ZWQgaW4gdGhlIGRhdGEgc291cmNlLlxuICAgICAgLy8gUHJvdmlkZSBvcmlnaW5hbCBjb2x1bW4gbmFtZSBpbiBleHByZXNzaW9uIHRvIE1ETCBpZiByZWZlcmVuY2VOYW1lIGhhcyBjb252ZXJ0ZWQuXG4gICAgICBpZiAoY29sdW1uLnNvdXJjZUNvbHVtbk5hbWUgIT09IGNvbHVtbi5yZWZlcmVuY2VOYW1lKSB7XG4gICAgICAgIHJldHVybiBgXCIke2NvbHVtbi5zb3VyY2VDb2x1bW5OYW1lfVwiYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgLy8gY2FsY3VsYXRlZCBmaWVsZFxuICAgIGNvbnN0IGxpbmVhZ2UgPSBKU09OLnBhcnNlKGNvbHVtbi5saW5lYWdlKSBhcyBudW1iZXJbXTtcbiAgICAvLyBsaW5lYWdlID0gW3JlbGF0aW9uSWQxLCByZWxhdGlvbklkMiwgLi4uLCBjb2x1bW5JZF1cbiAgICBjb25zdCBmaWVsZEV4cHJlc3Npb24gPSBPYmplY3QuZW50cmllczxudW1iZXI+KGxpbmVhZ2UpLnJlZHVjZShcbiAgICAgIChhY2MsIFtpbmRleCwgaWRdKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzTGFzdCA9IHBhcnNlSW50KGluZGV4KSA9PSBsaW5lYWdlLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChpc0xhc3QpIHtcbiAgICAgICAgICAvLyBpZCBpcyBjb2x1bW5JZFxuICAgICAgICAgIGNvbnN0IGNvbHVtblJlZmVyZW5jZU5hbWUgPSB0aGlzLnJlbGF0ZWRDb2x1bW5zLmZpbmQoXG4gICAgICAgICAgICAocmVsYXRlZENvbHVtbikgPT4gcmVsYXRlZENvbHVtbi5pZCA9PT0gaWQsXG4gICAgICAgICAgKT8ucmVmZXJlbmNlTmFtZTtcbiAgICAgICAgICBhY2MucHVzaChgXFxcIiR7Y29sdW1uUmVmZXJlbmNlTmFtZX1cXFwiYCk7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfVxuICAgICAgICAvLyBpZCBpcyByZWxhdGlvbklkXG4gICAgICAgIGNvbnN0IHVzZWRSZWxhdGlvbiA9IHRoaXMucmVsYXRlZFJlbGF0aW9ucy5maW5kKFxuICAgICAgICAgIChyZWxhdGVkUmVsYXRpb24pID0+IHJlbGF0ZWRSZWxhdGlvbi5pZCA9PT0gaWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlbGF0aW9uQ29sdW1uTmFtZSA9IGN1cnJlbnRNb2RlbCEuY29sdW1ucy5maW5kKFxuICAgICAgICAgIChjKSA9PiBjLnJlbGF0aW9uc2hpcCA9PT0gdXNlZFJlbGF0aW9uLm5hbWUsXG4gICAgICAgICkubmFtZTtcbiAgICAgICAgLy8gbW92ZSB0byBuZXh0IG1vZGVsXG4gICAgICAgIGNvbnN0IG5leHRNb2RlbE5hbWUgPVxuICAgICAgICAgIGN1cnJlbnRNb2RlbC5uYW1lID09PSB1c2VkUmVsYXRpb24uZnJvbU1vZGVsTmFtZVxuICAgICAgICAgICAgPyB1c2VkUmVsYXRpb24udG9Nb2RlbE5hbWVcbiAgICAgICAgICAgIDogdXNlZFJlbGF0aW9uLmZyb21Nb2RlbE5hbWU7XG4gICAgICAgIGNvbnN0IG5leHRNb2RlbCA9IHRoaXMubWFuaWZlc3QubW9kZWxzLmZpbmQoXG4gICAgICAgICAgKG1vZGVsKSA9PiBtb2RlbC5uYW1lID09PSBuZXh0TW9kZWxOYW1lLFxuICAgICAgICApO1xuICAgICAgICBjdXJyZW50TW9kZWwgPSBuZXh0TW9kZWw7XG4gICAgICAgIGFjYy5wdXNoKHJlbGF0aW9uQ29sdW1uTmFtZSk7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LFxuICAgICAgW10sXG4gICAgKTtcbiAgICByZXR1cm4gYCR7Y29sdW1uLmFnZ3JlZ2F0aW9ufSgke2ZpZWxkRXhwcmVzc2lvbi5qb2luKCcuJyl9KWA7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0UmVsYXRpb25Db25kaXRpb24ocmVsYXRpb246IFJlbGF0aW9uSW5mbyk6IHN0cmluZyB7XG4gICAgLy9UT0RPIHBoYXNlMjogaW1wbGVtZW50IHRoZSBleHByZXNzaW9uIGZvciByZWxhdGlvbiBjb25kaXRpb25cbiAgICBjb25zdCB7IGZyb21Db2x1bW5OYW1lLCB0b0NvbHVtbk5hbWUsIGZyb21Nb2RlbE5hbWUsIHRvTW9kZWxOYW1lIH0gPVxuICAgICAgcmVsYXRpb247XG4gICAgcmV0dXJuIGBcIiR7ZnJvbU1vZGVsTmFtZX1cIi4ke2Zyb21Db2x1bW5OYW1lfSA9IFwiJHt0b01vZGVsTmFtZX1cIi4ke3RvQ29sdW1uTmFtZX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFRhYmxlUmVmZXJlbmNlKG1vZGVsOiBNb2RlbCk6IFRhYmxlUmVmZXJlbmNlIHwgbnVsbCB7XG4gICAgY29uc3QgbW9kZWxQcm9wcyA9XG4gICAgICBtb2RlbC5wcm9wZXJ0aWVzICYmIHR5cGVvZiBtb2RlbC5wcm9wZXJ0aWVzID09PSAnc3RyaW5nJ1xuICAgICAgICA/IEpTT04ucGFyc2UobW9kZWwucHJvcGVydGllcylcbiAgICAgICAgOiB7fTtcbiAgICBpZiAoIW1vZGVsUHJvcHMudGFibGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY2F0YWxvZzogbW9kZWxQcm9wcy5jYXRhbG9nIHx8IG51bGwsXG4gICAgICBzY2hlbWE6IG1vZGVsUHJvcHMuc2NoZW1hIHx8IG51bGwsXG4gICAgICB0YWJsZTogbW9kZWxQcm9wcy50YWJsZSxcbiAgICB9O1xuICB9XG4gIHByaXZhdGUgcG9zdFByb2Nlc3NNYW5pZmVzdCgpIHtcbiAgICBpZiAodGhpcy51c2VSdXN0V3JlbkVuZ2luZSgpKSB7XG4gICAgICAvLyAxLiByZW1vdmUgYWxsIHRoZSBrZXkgdGhhdCB0aGUgdmFsdWUgaXMgbnVsbFxuICAgICAgdGhpcy5tYW5pZmVzdC5tb2RlbHMgPSB0aGlzLm1hbmlmZXN0Lm1vZGVscz8ubWFwKChtb2RlbCkgPT4ge1xuICAgICAgICBtb2RlbC5jb2x1bW5zLm1hcCgoY29sdW1uKSA9PiB7XG4gICAgICAgICAgY29sdW1uLnByb3BlcnRpZXMgPSBwaWNrQnkoXG4gICAgICAgICAgICBjb2x1bW4ucHJvcGVydGllcyxcbiAgICAgICAgICAgICh2YWx1ZSkgPT4gdmFsdWUgIT09IG51bGwsXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gY29sdW1uO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHBpY2tCeShtb2RlbCwgKHZhbHVlKSA9PiB2YWx1ZSAhPT0gbnVsbCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWFuaWZlc3Qudmlld3MgPSB0aGlzLm1hbmlmZXN0LnZpZXdzPy5tYXAoKHZpZXcpID0+IHtcbiAgICAgICAgcmV0dXJuIHBpY2tCeSh2aWV3LCAodmFsdWUpID0+IHZhbHVlICE9PSBudWxsKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5tYW5pZmVzdC5yZWxhdGlvbnNoaXBzID0gdGhpcy5tYW5pZmVzdC5yZWxhdGlvbnNoaXBzPy5tYXAoXG4gICAgICAgIChyZWxhdGlvbnNoaXApID0+IHtcbiAgICAgICAgICByZXR1cm4gcGlja0J5KHJlbGF0aW9uc2hpcCwgKHZhbHVlKSA9PiB2YWx1ZSAhPT0gbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICApO1xuICAgICAgdGhpcy5tYW5pZmVzdC5lbnVtRGVmaW5pdGlvbnMgPSB0aGlzLm1hbmlmZXN0LmVudW1EZWZpbml0aW9ucz8ubWFwKFxuICAgICAgICAoZW51bURlZmluaXRpb24pID0+IHtcbiAgICAgICAgICByZXR1cm4gcGlja0J5KGVudW1EZWZpbml0aW9uLCAodmFsdWUpID0+IHZhbHVlICE9PSBudWxsKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgICAvLyAyLiByZW1vdmUgZXhwcmVzc2lvbiBpZiBpdCdzIGVtcHR5IHN0cmluZ1xuICAgICAgdGhpcy5tYW5pZmVzdC5tb2RlbHM/LmZvckVhY2goKG1vZGVsKSA9PiB7XG4gICAgICAgIG1vZGVsLmNvbHVtbnM/LmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgICAgIGlmIChjb2x1bW4uZXhwcmVzc2lvbiA9PT0gJycpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjb2x1bW4uZXhwcmVzc2lvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHByaXZhdGUgdXNlUnVzdFdyZW5FbmdpbmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhY29uZmlnLmV4cGVyaW1lbnRhbEVuZ2luZVJ1c3RWZXJzaW9uO1xuICB9XG4gIHByaXZhdGUgYnVpbGREYXRhU291cmNlKCk6IFdyZW5FbmdpbmVEYXRhU291cmNlVHlwZSB7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMucHJvamVjdC50eXBlO1xuICAgIGlmICghdHlwZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgRGF0YVNvdXJjZU5hbWUuQklHX1FVRVJZOlxuICAgICAgICByZXR1cm4gV3JlbkVuZ2luZURhdGFTb3VyY2VUeXBlLkJJR1FVRVJZO1xuICAgICAgY2FzZSBEYXRhU291cmNlTmFtZS5EVUNLREI6XG4gICAgICAgIHJldHVybiBXcmVuRW5naW5lRGF0YVNvdXJjZVR5cGUuRFVDS0RCO1xuICAgICAgY2FzZSBEYXRhU291cmNlTmFtZS5QT1NUR1JFUzpcbiAgICAgICAgcmV0dXJuIFdyZW5FbmdpbmVEYXRhU291cmNlVHlwZS5QT1NUR1JFUztcbiAgICAgIGNhc2UgRGF0YVNvdXJjZU5hbWUuTVlTUUw6XG4gICAgICAgIHJldHVybiBXcmVuRW5naW5lRGF0YVNvdXJjZVR5cGUuTVlTUUw7XG4gICAgICBjYXNlIERhdGFTb3VyY2VOYW1lLk1TU1FMOlxuICAgICAgICByZXR1cm4gV3JlbkVuZ2luZURhdGFTb3VyY2VUeXBlLk1TU1FMO1xuICAgICAgY2FzZSBEYXRhU291cmNlTmFtZS5DTElDS19IT1VTRTpcbiAgICAgICAgcmV0dXJuIFdyZW5FbmdpbmVEYXRhU291cmNlVHlwZS5DTElDS0hPVVNFO1xuICAgICAgY2FzZSBEYXRhU291cmNlTmFtZS5UUklOTzpcbiAgICAgICAgcmV0dXJuIFdyZW5FbmdpbmVEYXRhU291cmNlVHlwZS5UUklOTztcbiAgICAgIGNhc2UgRGF0YVNvdXJjZU5hbWUuU05PV0ZMQUtFOlxuICAgICAgICByZXR1cm4gV3JlbkVuZ2luZURhdGFTb3VyY2VUeXBlLlNOT1dGTEFLRTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgVW5zdXBwb3J0ZWQgZGF0YSBzb3VyY2UgdHlwZTogJHt0eXBlfSBmb3VuZCB3aGVuIGJ1aWxkaW5nIG1hbmlmZXN0YCxcbiAgICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJpc0VtcHR5IiwiaXNOaWwiLCJwaWNrQnkiLCJXcmVuRW5naW5lRGF0YVNvdXJjZVR5cGUiLCJnZXRMb2dnZXIiLCJnZXRDb25maWciLCJEYXRhU291cmNlTmFtZSIsImxvZ2dlciIsImxldmVsIiwiY29uZmlnIiwiTURMQnVpbGRlciIsImNvbnN0cnVjdG9yIiwiYnVpbGRlck9wdGlvbnMiLCJwcm9qZWN0IiwibW9kZWxzIiwiY29sdW1ucyIsIm5lc3RlZENvbHVtbnMiLCJyZWxhdGlvbnMiLCJ2aWV3cyIsInJlbGF0ZWRNb2RlbHMiLCJyZWxhdGVkQ29sdW1ucyIsInJlbGF0ZWRSZWxhdGlvbnMiLCJzb3J0IiwiYSIsImIiLCJpZCIsIm1hbmlmZXN0IiwiYnVpbGQiLCJhZGRQcm9qZWN0IiwiYWRkTW9kZWwiLCJhZGROb3JtYWxGaWVsZCIsImFkZFJlbGF0aW9uIiwiYWRkQ2FsY3VsYXRlZEZpZWxkIiwiYWRkVmlldyIsInBvc3RQcm9jZXNzTWFuaWZlc3QiLCJnZXRNYW5pZmVzdCIsIm1hcCIsIm1vZGVsIiwicHJvcGVydGllcyIsIkpTT04iLCJwYXJzZSIsImRpc3BsYXlOYW1lIiwidGFibGVSZWZlcmVuY2UiLCJidWlsZFRhYmxlUmVmZXJlbmNlIiwibmFtZSIsInJlZmVyZW5jZU5hbWUiLCJyZWZTcWwiLCJ1c2VSdXN0V3JlbkVuZ2luZSIsImNhY2hlZCIsInJlZnJlc2hUaW1lIiwiZGVzY3JpcHRpb24iLCJwcmltYXJ5S2V5IiwidmlldyIsInZpZXdQcm9wZXJ0aWVzIiwidmFsdWUiLCJrZXkiLCJpbmNsdWRlcyIsInN0YXRlbWVudCIsInZpZXdJZCIsInRvU3RyaW5nIiwiZGVidWciLCJmaWx0ZXIiLCJpc0NhbGN1bGF0ZWQiLCJmb3JFYWNoIiwiY29sdW1uIiwibW9kZWxSZWZOYW1lIiwiZmluZCIsIm1vZGVsSWQiLCJpc1BrIiwidHlwZSIsIm5lc3RlZENvbHVtbiIsImNvbHVtbklkIiwic291cmNlQ29sdW1uTmFtZSIsImV4cHJlc3Npb24iLCJnZXRDb2x1bW5FeHByZXNzaW9uIiwicHVzaCIsIm5vdE51bGwiLCJyZWxhdGVkTW9kZWwiLCJjb2x1bW5WYWx1ZSIsImluc2VydENhbGN1bGF0ZWRGaWVsZCIsIm1vZGVsTmFtZSIsImNhbGN1bGF0ZWRGaWVsZCIsInJlbGF0aW9uc2hpcHMiLCJyZWxhdGlvbiIsImpvaW5UeXBlIiwiZnJvbU1vZGVsTmFtZSIsImZyb21Db2x1bW5OYW1lIiwidG9Nb2RlbE5hbWUiLCJ0b0NvbHVtbk5hbWUiLCJjb25kaXRpb24iLCJnZXRSZWxhdGlvbkNvbmRpdGlvbiIsImFkZFJlbGF0aW9uQ29sdW1uIiwibW9kZWxSZWZlcmVuY2VOYW1lIiwiY29sdW1uUmVmZXJlbmNlTmFtZSIsInNjaGVtYSIsImNhdGFsb2ciLCJkYXRhU291cmNlIiwiYnVpbGREYXRhU291cmNlIiwiY29sdW1uRGF0YSIsIm1vZGVsTmFtZUR1cGxpY2F0ZWQiLCJyZWxhdGlvbnNoaXAiLCJjdXJyZW50TW9kZWwiLCJsaW5lYWdlIiwiZmllbGRFeHByZXNzaW9uIiwiT2JqZWN0IiwiZW50cmllcyIsInJlZHVjZSIsImFjYyIsImluZGV4IiwiaXNMYXN0IiwicGFyc2VJbnQiLCJsZW5ndGgiLCJyZWxhdGVkQ29sdW1uIiwidXNlZFJlbGF0aW9uIiwicmVsYXRlZFJlbGF0aW9uIiwicmVsYXRpb25Db2x1bW5OYW1lIiwiYyIsIm5leHRNb2RlbE5hbWUiLCJuZXh0TW9kZWwiLCJhZ2dyZWdhdGlvbiIsImpvaW4iLCJtb2RlbFByb3BzIiwidGFibGUiLCJlbnVtRGVmaW5pdGlvbnMiLCJlbnVtRGVmaW5pdGlvbiIsImV4cGVyaW1lbnRhbEVuZ2luZVJ1c3RWZXJzaW9uIiwiQklHX1FVRVJZIiwiQklHUVVFUlkiLCJEVUNLREIiLCJQT1NUR1JFUyIsIk1ZU1FMIiwiTVNTUUwiLCJDTElDS19IT1VTRSIsIkNMSUNLSE9VU0UiLCJUUklOTyIsIlNOT1dGTEFLRSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/mdl/mdlBuilder.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/mdl/type.ts":
/*!***************************************!*\
  !*** ./src/apollo/server/mdl/type.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WrenEngineDataSourceType: () => (/* binding */ WrenEngineDataSourceType)\n/* harmony export */ });\nvar WrenEngineDataSourceType;\n(function(WrenEngineDataSourceType) {\n    WrenEngineDataSourceType[\"BIGQUERY\"] = \"BIGQUERY\";\n    WrenEngineDataSourceType[\"CANNER\"] = \"CANNER\";\n    WrenEngineDataSourceType[\"CLICKHOUSE\"] = \"CLICKHOUSE\";\n    WrenEngineDataSourceType[\"MSSQL\"] = \"MSSQL\";\n    WrenEngineDataSourceType[\"MYSQL\"] = \"MYSQL\";\n    WrenEngineDataSourceType[\"POSTGRES\"] = \"POSTGRES\";\n    WrenEngineDataSourceType[\"SNOWFLAKE\"] = \"SNOWFLAKE\";\n    WrenEngineDataSourceType[\"TRINO\"] = \"TRINO\";\n    WrenEngineDataSourceType[\"DUCKDB\"] = \"DUCKDB\";\n    // accepted by the wren engine, but not supported by the wren ui\n    WrenEngineDataSourceType[\"DATAFUSION\"] = \"DATAFUSION\";\n})(WrenEngineDataSourceType || (WrenEngineDataSourceType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9tZGwvdHlwZS50cyIsIm1hcHBpbmdzIjoiOzs7OztVQXFGWUE7Ozs7Ozs7Ozs7SUFVVixnRUFBZ0U7O0dBVnREQSw2QkFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvbWRsL3R5cGUudHM/ZWNjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIENvbHVtbk1ETCB7XG4gIG5hbWU6IHN0cmluZzsgLy8gZWc6IFwib3JkZXJrZXlcIiwgXCJjdXN0a2V5XCIsIFwib3JkZXJzdGF0dXNcIlxuICB0eXBlPzogc3RyaW5nOyAvLyBlZzogXCJpbnRlZ2VyXCIsIFwic3RyaW5nXCIsIFwicmVsYXRpb25OYW1lXCJcbiAgaXNDYWxjdWxhdGVkOiBib29sZWFuOyAvLyBlZzogdHJ1ZSwgZmFsc2VcbiAgbm90TnVsbD86IGJvb2xlYW47IC8vIGVnOiB0cnVlLCBmYWxzZVxuICByZWxhdGlvbnNoaXA/OiBzdHJpbmc7IC8vZWc6IE9yZGVyc0N1c3RvbWVyXG4gIHByb3BlcnRpZXM/OiB7XG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7IC8vIGVnOiBcInRoZSBrZXkgb2YgZWFjaCBvcmRlclwiXG4gICAgZGlzcGxheU5hbWU/OiBzdHJpbmc7IC8vIGVnOiBcIk9yZGVyIEtleVwiXG4gIH07XG4gIGV4cHJlc3Npb24/OiBzdHJpbmc7IC8vIGVnOiBcIlNVTShvcmRlcnMudG90YWxwcmljZSlcIlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsTURMIHtcbiAgbmFtZTogc3RyaW5nOyAvLyBlZzogXCJPcmRlcnNNb2RlbFwiLCBcIkxpbmVpdGVtTW9kZWxcIlxuICByZWZTcWw/OiBzdHJpbmc7IC8vIGVnOiBcInNlbGVjdCAqIGZyb20gb3JkZXJzXCIsIFwic2VsZWN0ICogZnJvbSBsaW5laXRlbVwiXG4gIHRhYmxlUmVmZXJlbmNlPzogVGFibGVSZWZlcmVuY2U7XG4gIGNvbHVtbnM/OiBDb2x1bW5NRExbXTtcbiAgcHJpbWFyeUtleT86IHN0cmluZzsgLy8gZWc6IFwib3JkZXJrZXlcIiwgXCJjdXN0a2V5XCJcbiAgY2FjaGVkOiBib29sZWFuOyAvLyBlZyB0cnVlLCBmYWxzZVxuICByZWZyZXNoVGltZT86IHN0cmluZzsgLy8gZWc6IFwiMzAuMDBtXCJcbiAgcHJvcGVydGllcz86IHtcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZzsgLy8gZWc6IFwidHBjaCB0aW55IG9yZGVycyB0YWJsZVwiXG4gICAgZGlzcGxheU5hbWU/OiBzdHJpbmc7IC8vIGVnOiBcIk9yZGVyc1wiXG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVsYXRpb25NREwge1xuICBuYW1lOiBzdHJpbmc7IC8vIGVnOiBcIk9yZGVyc0N1c3RvbWVyXCJcbiAgbW9kZWxzOiBzdHJpbmdbXTsgLy8gZWc6IFtcIk9yZGVyc01vZGVsXCIsIFwiQ3VzdG9tZXJNb2RlbFwiXVxuICBqb2luVHlwZTogc3RyaW5nOyAvLyBlZzogXCJNQU5ZX1RPX09ORVwiXG4gIGNvbmRpdGlvbjogc3RyaW5nOyAvLyBlZzogXCJPcmRlcnNNb2RlbC5jdXN0a2V5ID0gQ3VzdG9tZXJNb2RlbC5jdXN0a2V5XCJcbiAgbWFueVNpZGVTb3J0S2V5cz86IHtcbiAgICBuYW1lOiBzdHJpbmc7IC8vIGVnOiBcIm9yZGVya2V5XCJcbiAgICBkZXNjZW5kaW5nOiBib29sZWFuOyAvLyBlZzogZmFsc2VcbiAgfVtdO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZzsgLy8gZWc6IFwidGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIG9yZGVycyBhbmQgY3VzdG9tZXJzXCJcbiAgcHJvcGVydGllcz86IHtcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZzsgLy8gZWc6IFwidGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIG9yZGVycyBhbmQgY3VzdG9tZXJzXCJcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnVtRGVmaW5pdGlvbiB7XG4gIG5hbWU6IHN0cmluZzsgLy8gZWc6IFwiT3JkZXJTdGF0dXNcIlxuICB2YWx1ZXM6IHtcbiAgICBuYW1lOiBzdHJpbmc7IC8vIGVnOiBcIlBFTkRJTkdcIiwgXCJQUk9DRVNTSU5HXCJcbiAgICB2YWx1ZTogc3RyaW5nOyAvLyBlZzogXCJwZW5kaW5nXCIsIFwicHJvY2Vzc2luZ1wiXG4gICAgcHJvcGVydGllcz86IHtcbiAgICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nOyAvLyBlZzogXCJwZW5kaW5nXCJcbiAgICB9O1xuICB9W107XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nOyAvLyBlZzogXCJ0aGUgc3RhdHVzIG9mIGFuIG9yZGVyXCJcbiAgcHJvcGVydGllcz86IHtcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZzsgLy8gZWc6IFwidGhlIHN0YXR1cyBvZiBhbiBvcmRlclwiXG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlld01ETCB7XG4gIG5hbWU6IHN0cmluZztcbiAgc3RhdGVtZW50OiBzdHJpbmc7XG4gIHByb3BlcnRpZXM/OiB7XG4gICAgZGlzcGxheU5hbWU/OiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gICAgdmlld0lkPzogc3RyaW5nO1xuICAgIHF1ZXN0aW9uPzogc3RyaW5nO1xuICAgIHN1bW1hcnk/OiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFuaWZlc3Qge1xuICBjYXRhbG9nPzogc3RyaW5nOyAvLyBlZzogXCJ0ZXN0LWNhdGFsb2dcIlxuICBzY2hlbWE/OiBzdHJpbmc7IC8vIGVnOiBcInRlc3Qtc2NoZW1hXCJcbiAgZGF0YVNvdXJjZT86IFdyZW5FbmdpbmVEYXRhU291cmNlVHlwZTtcbiAgbW9kZWxzPzogUGFydGlhbDxNb2RlbE1ETD5bXTsgLy8gdXNlIHBhcnRpYWwgc2luY2UgUnVzdCB2ZXJzaW9uIGRvZXNuJ3Qgc3VwcG9ydCBudWxsIHZhbHVlcywgd2UgbmVlZCB0byByZW1vdmUgYWxsIHRoZSBudWxsIHZhbHVlc1xuICByZWxhdGlvbnNoaXBzPzogUGFydGlhbDxSZWxhdGlvbk1ETD5bXTsgLy8gdXNlIHBhcnRpYWwgc2luY2UgUnVzdCB2ZXJzaW9uIGRvZXNuJ3Qgc3VwcG9ydCBudWxsIHZhbHVlcywgd2UgbmVlZCB0byByZW1vdmUgYWxsIHRoZSBudWxsIHZhbHVlc1xuICBlbnVtRGVmaW5pdGlvbnM/OiBQYXJ0aWFsPEVudW1EZWZpbml0aW9uPltdOyAvLyB1c2UgcGFydGlhbCBzaW5jZSBSdXN0IHZlcnNpb24gZG9lc24ndCBzdXBwb3J0IG51bGwgdmFsdWVzLCB3ZSBuZWVkIHRvIHJlbW92ZSBhbGwgdGhlIG51bGwgdmFsdWVzXG4gIHZpZXdzPzogUGFydGlhbDxWaWV3TURMPltdOyAvLyB1c2UgcGFydGlhbCBzaW5jZSBSdXN0IHZlcnNpb24gZG9lc24ndCBzdXBwb3J0IG51bGwgdmFsdWVzLCB3ZSBuZWVkIHRvIHJlbW92ZSBhbGwgdGhlIG51bGwgdmFsdWVzXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFibGVSZWZlcmVuY2Uge1xuICBzY2hlbWE/OiBzdHJpbmc7XG4gIGNhdGFsb2c/OiBzdHJpbmc7XG4gIHRhYmxlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFdyZW5FbmdpbmVEYXRhU291cmNlVHlwZSB7XG4gIEJJR1FVRVJZID0gJ0JJR1FVRVJZJyxcbiAgQ0FOTkVSID0gJ0NBTk5FUicsXG4gIENMSUNLSE9VU0UgPSAnQ0xJQ0tIT1VTRScsXG4gIE1TU1FMID0gJ01TU1FMJyxcbiAgTVlTUUwgPSAnTVlTUUwnLFxuICBQT1NUR1JFUyA9ICdQT1NUR1JFUycsXG4gIFNOT1dGTEFLRSA9ICdTTk9XRkxBS0UnLFxuICBUUklOTyA9ICdUUklOTycsXG4gIERVQ0tEQiA9ICdEVUNLREInLFxuICAvLyBhY2NlcHRlZCBieSB0aGUgd3JlbiBlbmdpbmUsIGJ1dCBub3Qgc3VwcG9ydGVkIGJ5IHRoZSB3cmVuIHVpXG4gIERBVEFGVVNJT04gPSAnREFUQUZVU0lPTicsXG59XG4iXSwibmFtZXMiOlsiV3JlbkVuZ2luZURhdGFTb3VyY2VUeXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/mdl/type.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/models/adaptor.ts":
/*!*********************************************!*\
  !*** ./src/apollo/server/models/adaptor.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AskCandidateType: () => (/* binding */ AskCandidateType),\n/* harmony export */   AskResultStatus: () => (/* binding */ AskResultStatus),\n/* harmony export */   AskResultType: () => (/* binding */ AskResultType),\n/* harmony export */   ChartStatus: () => (/* binding */ ChartStatus),\n/* harmony export */   ChartType: () => (/* binding */ ChartType),\n/* harmony export */   RecommendationQuestionStatus: () => (/* binding */ RecommendationQuestionStatus),\n/* harmony export */   TextBasedAnswerStatus: () => (/* binding */ TextBasedAnswerStatus),\n/* harmony export */   WrenAIDeployStatusEnum: () => (/* binding */ WrenAIDeployStatusEnum),\n/* harmony export */   WrenAILanguage: () => (/* binding */ WrenAILanguage),\n/* harmony export */   WrenAISystemStatus: () => (/* binding */ WrenAISystemStatus)\n/* harmony export */ });\nvar WrenAIDeployStatusEnum;\n(function(WrenAIDeployStatusEnum) {\n    WrenAIDeployStatusEnum[\"SUCCESS\"] = \"SUCCESS\";\n    WrenAIDeployStatusEnum[\"FAILED\"] = \"FAILED\";\n})(WrenAIDeployStatusEnum || (WrenAIDeployStatusEnum = {}));\nvar WrenAISystemStatus;\n(function(WrenAISystemStatus) {\n    WrenAISystemStatus[\"INDEXING\"] = \"INDEXING\";\n    WrenAISystemStatus[\"FINISHED\"] = \"FINISHED\";\n    WrenAISystemStatus[\"FAILED\"] = \"FAILED\";\n})(WrenAISystemStatus || (WrenAISystemStatus = {}));\nvar WrenAILanguage;\n(function(WrenAILanguage) {\n    WrenAILanguage[\"EN\"] = \"English\";\n    WrenAILanguage[\"ES\"] = \"Spanish\";\n    WrenAILanguage[\"FR\"] = \"French\";\n    WrenAILanguage[\"ZH_TW\"] = \"Traditional Chinese\";\n    WrenAILanguage[\"ZH_CN\"] = \"Simplified Chinese\";\n    WrenAILanguage[\"DE\"] = \"German\";\n    WrenAILanguage[\"PT\"] = \"Portuguese\";\n    WrenAILanguage[\"RU\"] = \"Russian\";\n    WrenAILanguage[\"JA\"] = \"Japanese\";\n    WrenAILanguage[\"KO\"] = \"Korean\";\n})(WrenAILanguage || (WrenAILanguage = {}));\nvar AskResultStatus;\n(function(AskResultStatus) {\n    AskResultStatus[\"UNDERSTANDING\"] = \"UNDERSTANDING\";\n    AskResultStatus[\"SEARCHING\"] = \"SEARCHING\";\n    AskResultStatus[\"PLANNING\"] = \"PLANNING\";\n    AskResultStatus[\"GENERATING\"] = \"GENERATING\";\n    AskResultStatus[\"CORRECTING\"] = \"CORRECTING\";\n    AskResultStatus[\"FINISHED\"] = \"FINISHED\";\n    AskResultStatus[\"FAILED\"] = \"FAILED\";\n    AskResultStatus[\"STOPPED\"] = \"STOPPED\";\n})(AskResultStatus || (AskResultStatus = {}));\nvar AskResultType;\n(function(AskResultType) {\n    AskResultType[\"GENERAL\"] = \"GENERAL\";\n    AskResultType[\"TEXT_TO_SQL\"] = \"TEXT_TO_SQL\";\n    AskResultType[\"MISLEADING_QUERY\"] = \"MISLEADING_QUERY\";\n})(AskResultType || (AskResultType = {}));\nvar AskCandidateType;\n(function(AskCandidateType) {\n    AskCandidateType[\"VIEW\"] = \"VIEW\";\n    AskCandidateType[\"LLM\"] = \"LLM\";\n})(AskCandidateType || (AskCandidateType = {}));\nvar RecommendationQuestionStatus;\n(function(RecommendationQuestionStatus) {\n    RecommendationQuestionStatus[\"GENERATING\"] = \"GENERATING\";\n    RecommendationQuestionStatus[\"FINISHED\"] = \"FINISHED\";\n    RecommendationQuestionStatus[\"FAILED\"] = \"FAILED\";\n})(RecommendationQuestionStatus || (RecommendationQuestionStatus = {}));\nvar TextBasedAnswerStatus;\n(function(TextBasedAnswerStatus) {\n    TextBasedAnswerStatus[\"PREPROCESSING\"] = \"PREPROCESSING\";\n    TextBasedAnswerStatus[\"SUCCEEDED\"] = \"SUCCEEDED\";\n    TextBasedAnswerStatus[\"FAILED\"] = \"FAILED\";\n})(TextBasedAnswerStatus || (TextBasedAnswerStatus = {}));\nvar ChartStatus;\n(function(ChartStatus) {\n    ChartStatus[\"FETCHING\"] = \"FETCHING\";\n    ChartStatus[\"GENERATING\"] = \"GENERATING\";\n    ChartStatus[\"FINISHED\"] = \"FINISHED\";\n    ChartStatus[\"FAILED\"] = \"FAILED\";\n    ChartStatus[\"STOPPED\"] = \"STOPPED\";\n})(ChartStatus || (ChartStatus = {}));\nvar ChartType;\n(function(ChartType) {\n    ChartType[\"BAR\"] = \"bar\";\n    ChartType[\"GROUPED_BAR\"] = \"grouped_bar\";\n    ChartType[\"STACKED_BAR\"] = \"stacked_bar\";\n    ChartType[\"LINE\"] = \"line\";\n    ChartType[\"MULTI_LINE\"] = \"multi_line\";\n    ChartType[\"PIE\"] = \"pie\";\n    ChartType[\"AREA\"] = \"area\";\n})(ChartType || (ChartType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9tb2RlbHMvYWRhcHRvci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztVQVFZQTs7O0dBQUFBLDJCQUFBQTs7VUFVQUM7Ozs7R0FBQUEsdUJBQUFBOztVQU1BQzs7Ozs7Ozs7Ozs7R0FBQUEsbUJBQUFBOztVQThDQUM7Ozs7Ozs7OztHQUFBQSxvQkFBQUE7O1VBV0FDOzs7O0dBQUFBLGtCQUFBQTs7VUFRQUM7OztHQUFBQSxxQkFBQUE7O1VBcUNBQzs7OztHQUFBQSxpQ0FBQUE7O1VBNkNBQzs7OztHQUFBQSwwQkFBQUE7O1VBWUFDOzs7Ozs7R0FBQUEsZ0JBQUFBOztVQVFBQzs7Ozs7Ozs7R0FBQUEsY0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvbW9kZWxzL2FkYXB0b3IudHM/ZTdiMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFcnJvcnMgZnJvbSAnQHNlcnZlci91dGlscy9lcnJvcic7XG5pbXBvcnQgeyBNYW5pZmVzdCB9IGZyb20gJ0BzZXJ2ZXIvbWRsL3R5cGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdyZW5BSUVycm9yIHtcbiAgY29kZTogRXJyb3JzLkdlbmVyYWxFcnJvckNvZGVzO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFdyZW5BSURlcGxveVN0YXR1c0VudW0ge1xuICBTVUNDRVNTID0gJ1NVQ0NFU1MnLFxuICBGQUlMRUQgPSAnRkFJTEVEJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXcmVuQUlEZXBsb3lSZXNwb25zZSB7XG4gIHN0YXR1czogV3JlbkFJRGVwbG95U3RhdHVzRW51bTtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFdyZW5BSVN5c3RlbVN0YXR1cyB7XG4gIElOREVYSU5HID0gJ0lOREVYSU5HJyxcbiAgRklOSVNIRUQgPSAnRklOSVNIRUQnLFxuICBGQUlMRUQgPSAnRkFJTEVEJyxcbn1cblxuZXhwb3J0IGVudW0gV3JlbkFJTGFuZ3VhZ2Uge1xuICBFTiA9ICdFbmdsaXNoJyxcbiAgRVMgPSAnU3BhbmlzaCcsXG4gIEZSID0gJ0ZyZW5jaCcsXG4gIFpIX1RXID0gJ1RyYWRpdGlvbmFsIENoaW5lc2UnLFxuICBaSF9DTiA9ICdTaW1wbGlmaWVkIENoaW5lc2UnLFxuICBERSA9ICdHZXJtYW4nLFxuICBQVCA9ICdQb3J0dWd1ZXNlJyxcbiAgUlUgPSAnUnVzc2lhbicsXG4gIEpBID0gJ0phcGFuZXNlJyxcbiAgS08gPSAnS29yZWFuJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXBsb3lEYXRhIHtcbiAgbWFuaWZlc3Q6IE1hbmlmZXN0O1xuICBoYXNoOiBzdHJpbmc7XG59XG5cbi8vIGFza1xuZXhwb3J0IGludGVyZmFjZSBBc2tTdGVwIHtcbiAgc3VtbWFyeTogc3RyaW5nO1xuICBzcWw6IHN0cmluZztcbiAgY3RlTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFza0hpc3Rvcnkge1xuICBzcWw6IHN0cmluZztcbiAgc3RlcHM6IEFycmF5PEFza1N0ZXA+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFza0NvbmZpZ3VyYXRpb25zIHtcbiAgbGFuZ3VhZ2U/OiBzdHJpbmc7XG4gIHRpbWV6b25lPzogeyBuYW1lOiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBc2tJbnB1dCB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIGRlcGxveUlkOiBzdHJpbmc7XG4gIGhpc3Rvcnk/OiBBc2tIaXN0b3J5O1xuICBjb25maWd1cmF0aW9ucz86IEFza0NvbmZpZ3VyYXRpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFzeW5jUXVlcnlSZXNwb25zZSB7XG4gIHF1ZXJ5SWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gQXNrUmVzdWx0U3RhdHVzIHtcbiAgVU5ERVJTVEFORElORyA9ICdVTkRFUlNUQU5ESU5HJyxcbiAgU0VBUkNISU5HID0gJ1NFQVJDSElORycsXG4gIFBMQU5OSU5HID0gJ1BMQU5OSU5HJyxcbiAgR0VORVJBVElORyA9ICdHRU5FUkFUSU5HJyxcbiAgQ09SUkVDVElORyA9ICdDT1JSRUNUSU5HJyxcbiAgRklOSVNIRUQgPSAnRklOSVNIRUQnLFxuICBGQUlMRUQgPSAnRkFJTEVEJyxcbiAgU1RPUFBFRCA9ICdTVE9QUEVEJyxcbn1cblxuZXhwb3J0IGVudW0gQXNrUmVzdWx0VHlwZSB7XG4gIEdFTkVSQUwgPSAnR0VORVJBTCcsXG4gIFRFWFRfVE9fU1FMID0gJ1RFWFRfVE9fU1FMJyxcbiAgTUlTTEVBRElOR19RVUVSWSA9ICdNSVNMRUFESU5HX1FVRVJZJyxcbn1cblxuLy8gaWYgaXQncyB2aWV3LCB2aWV3SWQgd2lsbCBiZSByZXR1cm5lZCBhcyB3ZWxsLiBJdCBtZWFucyB0aGUgY2FuZGlkYXRlIGlzIG9yaWdpbmFsbHkgc2F2ZWQgaW4gbWRsIGFzIGEgdmlldy5cbi8vIGlmIGl0J3MgbGxtLCB2aWV3SWQgd2lsbCBub3QgYmUgcmV0dXJuZWQuIEl0IG1lYW5zIHRoZSBjYW5kaWRhdGUgaXMgZ2VuZXJhdGVkIGJ5IEFJIHNlcnZpY2UuXG5leHBvcnQgZW51bSBBc2tDYW5kaWRhdGVUeXBlIHtcbiAgVklFVyA9ICdWSUVXJyxcbiAgTExNID0gJ0xMTScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNrUmVzcG9uc2U8UiwgUz4ge1xuICB0eXBlOiBBc2tSZXN1bHRUeXBlIHwgbnVsbDtcbiAgc3RhdHVzOiBTO1xuICByZXNwb25zZTogUiB8IG51bGw7XG4gIGVycm9yOiBXcmVuQUlFcnJvciB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNrRGV0YWlsSW5wdXQge1xuICBxdWVyeTogc3RyaW5nO1xuICBzcWw6IHN0cmluZztcbiAgY29uZmlndXJhdGlvbnM/OiBBc2tDb25maWd1cmF0aW9ucztcbn1cblxuZXhwb3J0IHR5cGUgQXNrRGV0YWlsUmVzdWx0ID0gQXNrUmVzcG9uc2U8XG4gIHtcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIHN0ZXBzOiBBc2tTdGVwW107XG4gIH0sXG4gIEFza1Jlc3VsdFN0YXR1c1xuPjtcblxuZXhwb3J0IHR5cGUgQXNrUmVzdWx0ID0gQXNrUmVzcG9uc2U8XG4gIEFycmF5PHtcbiAgICB0eXBlOiBBc2tDYW5kaWRhdGVUeXBlO1xuICAgIHNxbDogc3RyaW5nO1xuICAgIHZpZXdJZD86IG51bWJlciB8IG51bGw7XG4gIH0+LFxuICBBc2tSZXN1bHRTdGF0dXNcbj4gJiB7XG4gIGludGVudFJlYXNvbmluZz86IHN0cmluZztcbn07XG5cbmV4cG9ydCBlbnVtIFJlY29tbWVuZGF0aW9uUXVlc3Rpb25TdGF0dXMge1xuICBHRU5FUkFUSU5HID0gJ0dFTkVSQVRJTkcnLFxuICBGSU5JU0hFRCA9ICdGSU5JU0hFRCcsXG4gIEZBSUxFRCA9ICdGQUlMRUQnLFxufVxuXG5leHBvcnQgdHlwZSBSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc0lucHV0ID0ge1xuICAvLyBKU09OIHN0cmluZyBvZiB0aGUgTURMIChNb2RlbCBEZWZpbml0aW9uIExhbmd1YWdlKVxuICBtYW5pZmVzdDogTWFuaWZlc3Q7XG4gIC8vIE9wdGlvbmFsIGxpc3Qgb2YgcHJldmlvdXMgcXVlc3Rpb25zXG4gIHByZXZpb3VzUXVlc3Rpb25zPzogc3RyaW5nW107XG4gIC8vIE9wdGlvbmFsIHByb2plY3QgSURcbiAgcHJvamVjdElkPzogc3RyaW5nO1xuICAvLyBPcHRpb25hbCBtYXggbnVtYmVyIG9mIHF1ZXN0aW9ucyB0byBnZW5lcmF0ZSAoZGVmYXVsdDogNSlcbiAgbWF4UXVlc3Rpb25zPzogbnVtYmVyO1xuICAvLyBPcHRpb25hbCBtYXggbnVtYmVyIG9mIGNhdGVnb3JpZXMgKGRlZmF1bHQ6IDMpXG4gIG1heENhdGVnb3JpZXM/OiBudW1iZXI7XG4gIHJlZ2VuZXJhdGU/OiBib29sZWFuOyAvLyBPcHRpb25hbCByZWdlbmVyYXRlIHF1ZXN0aW9ucyAoZGVmYXVsdDogZmFsc2UpXG4gIC8vIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3NcbiAgY29uZmlndXJhdGlvbj86IEFza0NvbmZpZ3VyYXRpb25zO1xufTtcblxuZXhwb3J0IHR5cGUgUmVjb21tZW5kYXRpb25RdWVzdGlvbiA9IHtcbiAgcXVlc3Rpb246IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZzsgLy8gY2F0ZWdvcnkgZm9yIHRoZSBxdWVzdGlvblxuICBzcWw6IHN0cmluZzsgLy8gdmFsaWRhdGVkIHNxbCBmb3IgdGhpcyBxdWVzdGlvbiwgY2FuIGJlIHVzZWQgaW4gZ2VuZXJhdGVBc2tEZXRhaWxcbn07XG5cbmV4cG9ydCB0eXBlIFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0ID0gQXNrUmVzcG9uc2U8XG4gIHtcbiAgICBxdWVzdGlvbnM6IFJlY29tbWVuZGF0aW9uUXVlc3Rpb25bXTtcbiAgfSxcbiAgUmVjb21tZW5kYXRpb25RdWVzdGlvblN0YXR1c1xuPjtcblxuLy8gdGV4dC1iYXNlZCBhbnN3ZXJcbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEJhc2VkQW5zd2VySW5wdXQge1xuICBxdWVyeTogc3RyaW5nO1xuICBzcWw6IHN0cmluZztcbiAgc3FsRGF0YTogYW55O1xuICB0aHJlYWRJZD86IHN0cmluZztcbiAgdXNlcklkPzogc3RyaW5nO1xuICBjb25maWd1cmF0aW9ucz86IEFza0NvbmZpZ3VyYXRpb25zO1xufVxuXG5leHBvcnQgZW51bSBUZXh0QmFzZWRBbnN3ZXJTdGF0dXMge1xuICBQUkVQUk9DRVNTSU5HID0gJ1BSRVBST0NFU1NJTkcnLFxuICBTVUNDRUVERUQgPSAnU1VDQ0VFREVEJyxcbiAgRkFJTEVEID0gJ0ZBSUxFRCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEJhc2VkQW5zd2VyUmVzdWx0IHtcbiAgc3RhdHVzOiBUZXh0QmFzZWRBbnN3ZXJTdGF0dXM7XG4gIG51bVJvd3NVc2VkSW5MTE0/OiBudW1iZXI7XG4gIGVycm9yPzogV3JlbkFJRXJyb3I7XG59XG5cbmV4cG9ydCBlbnVtIENoYXJ0U3RhdHVzIHtcbiAgRkVUQ0hJTkcgPSAnRkVUQ0hJTkcnLFxuICBHRU5FUkFUSU5HID0gJ0dFTkVSQVRJTkcnLFxuICBGSU5JU0hFRCA9ICdGSU5JU0hFRCcsXG4gIEZBSUxFRCA9ICdGQUlMRUQnLFxuICBTVE9QUEVEID0gJ1NUT1BQRUQnLFxufVxuXG5leHBvcnQgZW51bSBDaGFydFR5cGUge1xuICBCQVIgPSAnYmFyJyxcbiAgR1JPVVBFRF9CQVIgPSAnZ3JvdXBlZF9iYXInLFxuICBTVEFDS0VEX0JBUiA9ICdzdGFja2VkX2JhcicsXG4gIExJTkUgPSAnbGluZScsXG4gIE1VTFRJX0xJTkUgPSAnbXVsdGlfbGluZScsXG4gIFBJRSA9ICdwaWUnLFxuICBBUkVBID0gJ2FyZWEnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXJ0SW5wdXQge1xuICBxdWVyeTogc3RyaW5nO1xuICBzcWw6IHN0cmluZztcbiAgcHJvamVjdElkPzogc3RyaW5nO1xuICBjb25maWd1cmF0aW9ucz86IEFza0NvbmZpZ3VyYXRpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXJ0QWRqdXN0bWVudE9wdGlvbiB7XG4gIGNoYXJ0VHlwZTogQ2hhcnRUeXBlO1xuICB4QXhpcz86IHN0cmluZztcbiAgeUF4aXM/OiBzdHJpbmc7XG4gIHhPZmZzZXQ/OiBzdHJpbmc7XG4gIGNvbG9yPzogc3RyaW5nO1xuICB0aGV0YT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaGFydEFkanVzdG1lbnRJbnB1dCB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIHNxbDogc3RyaW5nO1xuICBhZGp1c3RtZW50T3B0aW9uOiBDaGFydEFkanVzdG1lbnRPcHRpb247XG4gIGNoYXJ0U2NoZW1hOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBwcm9qZWN0SWQ/OiBzdHJpbmc7XG4gIGNvbmZpZ3VyYXRpb25zPzogQXNrQ29uZmlndXJhdGlvbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhcnRSZXNwb25zZSB7XG4gIHJlYXNvbmluZzogc3RyaW5nO1xuICBjaGFydFR5cGU6IENoYXJ0VHlwZTtcbiAgY2hhcnRTY2hlbWE6IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhcnRSZXN1bHQge1xuICBzdGF0dXM6IENoYXJ0U3RhdHVzO1xuICByZXNwb25zZT86IENoYXJ0UmVzcG9uc2U7XG4gIGVycm9yPzogV3JlbkFJRXJyb3I7XG59XG4iXSwibmFtZXMiOlsiV3JlbkFJRGVwbG95U3RhdHVzRW51bSIsIldyZW5BSVN5c3RlbVN0YXR1cyIsIldyZW5BSUxhbmd1YWdlIiwiQXNrUmVzdWx0U3RhdHVzIiwiQXNrUmVzdWx0VHlwZSIsIkFza0NhbmRpZGF0ZVR5cGUiLCJSZWNvbW1lbmRhdGlvblF1ZXN0aW9uU3RhdHVzIiwiVGV4dEJhc2VkQW5zd2VyU3RhdHVzIiwiQ2hhcnRTdGF0dXMiLCJDaGFydFR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/models/adaptor.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/models/index.ts":
/*!*******************************************!*\
  !*** ./src/apollo/server/models/index.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./model */ \"(api)/./src/apollo/server/models/model.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _model__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _model__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9tb2RlbHMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvbW9kZWxzL2luZGV4LnRzPzc1MjQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9tb2RlbCc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/models/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/models/model.ts":
/*!*******************************************!*\
  !*** ./src/apollo/server/models/model.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExpressionName: () => (/* binding */ ExpressionName)\n/* harmony export */ });\nvar ExpressionName;\n(function(ExpressionName) {\n    ExpressionName[\"ABS\"] = \"ABS\";\n    ExpressionName[\"AVG\"] = \"AVG\";\n    ExpressionName[\"COUNT\"] = \"COUNT\";\n    ExpressionName[\"MAX\"] = \"MAX\";\n    ExpressionName[\"MIN\"] = \"MIN\";\n    ExpressionName[\"SUM\"] = \"SUM\";\n    ExpressionName[\"CBRT\"] = \"CBRT\";\n    ExpressionName[\"CEIL\"] = \"CEIL\";\n    ExpressionName[\"EXP\"] = \"EXP\";\n    ExpressionName[\"FLOOR\"] = \"FLOOR\";\n    ExpressionName[\"LN\"] = \"LN\";\n    ExpressionName[\"LOG10\"] = \"LOG10\";\n    ExpressionName[\"ROUND\"] = \"ROUND\";\n    ExpressionName[\"SIGN\"] = \"SIGN\";\n    ExpressionName[\"LENGTH\"] = \"LENGTH\";\n    ExpressionName[\"REVERSE\"] = \"REVERSE\";\n})(ExpressionName || (ExpressionName = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9tb2RlbHMvbW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7VUFxRFlBOzs7Ozs7Ozs7Ozs7Ozs7OztHQUFBQSxtQkFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvbW9kZWxzL21vZGVsLnRzPzk4NzUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBDcmVhdGVNb2RlbERhdGEge1xuICBzb3VyY2VUYWJsZU5hbWU6IHN0cmluZztcbiAgZmllbGRzOiBbc3RyaW5nXTtcbiAgcHJpbWFyeUtleTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZU1vZGVsRGF0YSB7XG4gIGZpZWxkczogW3N0cmluZ107XG4gIHByaW1hcnlLZXk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOZXN0ZWRDb2x1bW5NZXRhZGF0YUlucHV0IHtcbiAgaWQ6IG51bWJlcjtcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb2x1bW5NZXRhZGF0YUlucHV0IHtcbiAgaWQ6IG51bWJlcjtcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYWxjdWxhdGVkRmllbGRNZXRhZGF0YUlucHV0IHtcbiAgaWQ6IG51bWJlcjtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWxhdGlvbnNoaXBNZXRhZGF0YUlucHV0IHtcbiAgaWQ6IG51bWJlcjtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaWV3Q29sdW1uTWV0YWRhdGFJbnB1dCB7XG4gIHJlZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVNb2RlbE1ldGFkYXRhSW5wdXQge1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjb2x1bW5zOiBBcnJheTxDb2x1bW5NZXRhZGF0YUlucHV0PjtcbiAgbmVzdGVkQ29sdW1uczogQXJyYXk8TmVzdGVkQ29sdW1uTWV0YWRhdGFJbnB1dD47XG4gIGNhbGN1bGF0ZWRGaWVsZHM6IEFycmF5PENhbGN1bGF0ZWRGaWVsZE1ldGFkYXRhSW5wdXQ+O1xuICByZWxhdGlvbnNoaXBzOiBBcnJheTxSZWxhdGlvbnNoaXBNZXRhZGF0YUlucHV0Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVWaWV3TWV0YWRhdGFJbnB1dCB7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNvbHVtbnM6IEFycmF5PFZpZXdDb2x1bW5NZXRhZGF0YUlucHV0Pjtcbn1cblxuZXhwb3J0IGVudW0gRXhwcmVzc2lvbk5hbWUge1xuICBBQlMgPSAnQUJTJyxcbiAgQVZHID0gJ0FWRycsXG4gIENPVU5UID0gJ0NPVU5UJyxcbiAgTUFYID0gJ01BWCcsXG4gIE1JTiA9ICdNSU4nLFxuICBTVU0gPSAnU1VNJyxcbiAgQ0JSVCA9ICdDQlJUJyxcbiAgQ0VJTCA9ICdDRUlMJyxcbiAgRVhQID0gJ0VYUCcsXG4gIEZMT09SID0gJ0ZMT09SJyxcbiAgTE4gPSAnTE4nLFxuICBMT0cxMCA9ICdMT0cxMCcsXG4gIFJPVU5EID0gJ1JPVU5EJyxcbiAgU0lHTiA9ICdTSUdOJyxcbiAgTEVOR1RIID0gJ0xFTkdUSCcsXG4gIFJFVkVSU0UgPSAnUkVWRVJTRScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQ2FsY3VsYXRlZEZpZWxkRGF0YSB7XG4gIG1vZGVsSWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nOyAvL2Rpc3BsYXlOYW1lXG4gIGV4cHJlc3Npb246IEV4cHJlc3Npb25OYW1lO1xuICBsaW5lYWdlOiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDYWxjdWxhdGVkRmllbGREYXRhIHtcbiAgbmFtZTogc3RyaW5nOyAvL2Rpc3BsYXlOYW1lXG4gIGV4cHJlc3Npb246IEV4cHJlc3Npb25OYW1lO1xuICBsaW5lYWdlOiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaGVja0NhbGN1bGF0ZWRGaWVsZENhblF1ZXJ5RGF0YSB7XG4gIHJlZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgZXhwcmVzc2lvbjogRXhwcmVzc2lvbk5hbWU7XG4gIGxpbmVhZ2U6IG51bWJlcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByZXZpZXdTUUxEYXRhIHtcbiAgc3FsOiBzdHJpbmc7XG4gIHByb2plY3RJZD86IG51bWJlcjtcbiAgbGltaXQ/OiBudW1iZXI7XG4gIGRyeVJ1bj86IGJvb2xlYW47XG59XG4iXSwibmFtZXMiOlsiRXhwcmVzc2lvbk5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/models/model.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/baseRepository.ts":
/*!**********************************************************!*\
  !*** ./src/apollo/server/repositories/baseRepository.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseRepository: () => (/* binding */ BaseRepository)\n/* harmony export */ });\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nclass BaseRepository {\n    constructor({ knexPg, tableName }){\n        this.deleteAllBy = async (where, queryOptions)=>{\n            const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n            const builder = executer(this.tableName).where(this.transformToDBData(where)).delete();\n            return await builder;\n        };\n        this.transformToDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_1___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            return lodash_mapKeys__WEBPACK_IMPORTED_MODULE_2___default()(data, (_value, key)=>lodash_snakeCase__WEBPACK_IMPORTED_MODULE_3___default()(key));\n        };\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_1___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_2___default()(data, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_0___default()(key));\n            return camelCaseData;\n        };\n        this.knex = knexPg;\n        this.tableName = tableName;\n    }\n    async transaction() {\n        return await this.knex.transaction();\n    }\n    async commit(tx) {\n        await tx.commit();\n    }\n    async rollback(tx) {\n        await tx.rollback();\n    }\n    async findOneBy(filter, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const query = executer(this.tableName).where(this.transformToDBData(filter));\n        if (queryOptions?.limit) {\n            query.limit(queryOptions.limit);\n        }\n        const result = [];\n        return result && result.length > 0 ? this.transformFromDBData(result[0]) : null;\n    }\n    async findAllBy(filter, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        // format filter keys to snake_case\n        const query = executer(this.tableName).where(this.transformToDBData(filter));\n        if (queryOptions?.order) {\n            query.orderBy(queryOptions.order);\n        }\n        const result = await query;\n        return result.map(this.transformFromDBData);\n    }\n    async findAll(queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const query = executer(this.tableName);\n        if (queryOptions?.order) {\n            query.orderBy(queryOptions.order);\n        }\n        if (queryOptions?.limit) {\n            query.limit(queryOptions.limit);\n        }\n        const result = await query;\n        return result.map(this.transformFromDBData);\n    }\n    async createOne(data, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const [result] = await executer(this.tableName).insert(this.transformToDBData(data)).returning(\"*\");\n        return this.transformFromDBData(result);\n    }\n    async createMany(data, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const batchSize = 100;\n        const batchCount = Math.ceil(data.length / batchSize);\n        const result = [];\n        for(let i = 0; i < batchCount; i++){\n            const start = i * batchSize;\n            const end = Math.min((i + 1) * batchSize, data.length);\n            const batchValues = data.slice(start, end);\n            const chunk = await executer(this.tableName).insert(batchValues.map(this.transformToDBData)).returning(\"*\");\n            result.push(...chunk);\n        }\n        return result.map((data)=>this.transformFromDBData(data));\n    }\n    async updateOne(id, data, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const [result] = await executer(this.tableName).where({\n            id\n        }).update(this.transformToDBData(data)).returning(\"*\");\n        return this.transformFromDBData(result);\n    }\n    async deleteOne(id, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const builder = executer.from(this.tableName).where({\n            id\n        }).delete();\n        return await builder;\n    }\n    async deleteMany(ids, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const builder = executer.from(this.tableName).whereIn(\"id\", ids).delete();\n        return await builder;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvYmFzZVJlcG9zaXRvcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQ3NFO0FBQUE7QUFBQTtBQUFBO0FBMEMvRCxNQUFNSTtJQUlYQyxZQUFZLEVBQUVDLE1BQU0sRUFBRUMsU0FBUyxFQUF1QyxDQUFFO2FBZ0hqRUMsY0FBYyxPQUNuQkMsT0FDQUM7WUFFQSxNQUFNQyxXQUFXRCxjQUFjRSxLQUFLRixhQUFhRSxFQUFFLEdBQUcsSUFBSSxDQUFDQyxJQUFJO1lBQy9ELE1BQU1DLFVBQVVILFNBQVMsSUFBSSxDQUFDSixTQUFTLEVBQ3BDRSxLQUFLLENBQUMsSUFBSSxDQUFDTSxpQkFBaUIsQ0FBQ04sUUFDN0JPLE1BQU07WUFDVCxPQUFPLE1BQU1GO1FBQ2Y7YUFFVUMsb0JBQW9CLENBQUNFO1lBQzdCLElBQUksQ0FBQ2hCLDJEQUFhQSxDQUFDZ0IsT0FBTztnQkFDeEIsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBQ0EsT0FBT2hCLHFEQUFPQSxDQUFDZSxNQUFNLENBQUNFLFFBQVFDLE1BQVFqQix1REFBU0EsQ0FBQ2lCO1FBQ2xEO2FBRVVDLHNCQUFzQixDQUFDSjtZQUMvQixJQUFJLENBQUNoQiwyREFBYUEsQ0FBQ2dCLE9BQU87Z0JBQ3hCLE1BQU0sSUFBSUMsTUFBTTtZQUNsQjtZQUNBLE1BQU1JLGdCQUFnQnBCLHFEQUFPQSxDQUFDZSxNQUFNLENBQUNFLFFBQVFDLE1BQVFwQix1REFBU0EsQ0FBQ29CO1lBQy9ELE9BQU9FO1FBQ1Q7UUF2SUUsSUFBSSxDQUFDVCxJQUFJLEdBQUdQO1FBQ1osSUFBSSxDQUFDQyxTQUFTLEdBQUdBO0lBQ25CO0lBRUEsTUFBYWdCLGNBQWM7UUFDekIsT0FBTyxNQUFNLElBQUksQ0FBQ1YsSUFBSSxDQUFDVSxXQUFXO0lBQ3BDO0lBRUEsTUFBYUMsT0FBT1osRUFBb0IsRUFBRTtRQUN4QyxNQUFNQSxHQUFHWSxNQUFNO0lBQ2pCO0lBRUEsTUFB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d2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvYmFzZVJlcG9zaXRvcnkudHM/NzM5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLbmV4IH0gZnJvbSAna25leCc7XG5pbXBvcnQgeyBjYW1lbENhc2UsIGlzUGxhaW5PYmplY3QsIG1hcEtleXMsIHNuYWtlQ2FzZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVF1ZXJ5T3B0aW9ucyB7XG4gIHR4PzogS25leC5UcmFuc2FjdGlvbjtcbiAgb3JkZXI/OiBzdHJpbmc7XG4gIGxpbWl0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCYXNpY1JlcG9zaXRvcnk8VD4ge1xuICB0cmFuc2FjdGlvbjogKCkgPT4gUHJvbWlzZTxLbmV4LlRyYW5zYWN0aW9uPjtcbiAgY29tbWl0OiAodHg6IEtuZXguVHJhbnNhY3Rpb24pID0+IFByb21pc2U8dm9pZD47XG4gIHJvbGxiYWNrOiAodHg6IEtuZXguVHJhbnNhY3Rpb24pID0+IFByb21pc2U8dm9pZD47XG4gIGZpbmRPbmVCeTogKFxuICAgIGZpbHRlcjogUGFydGlhbDxUPixcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApID0+IFByb21pc2U8VCB8IG51bGw+O1xuICBmaW5kQWxsQnk6IChmaWx0ZXI6IFBhcnRpYWw8VD4sIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMpID0+IFByb21pc2U8VFtdPjtcbiAgZmluZEFsbDogKHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMpID0+IFByb21pc2U8VFtdPjtcbiAgY3JlYXRlT25lOiAoZGF0YTogUGFydGlhbDxUPiwgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucykgPT4gUHJvbWlzZTxUPjtcbiAgY3JlYXRlTWFueTogKFxuICAgIGRhdGE6IFBhcnRpYWw8VD5bXSxcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApID0+IFByb21pc2U8VFtdPjtcbiAgdXBkYXRlT25lOiAoXG4gICAgaWQ6IHN0cmluZyB8IG51bWJlcixcbiAgICBkYXRhOiBQYXJ0aWFsPFQ+LFxuICAgIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMsXG4gICkgPT4gUHJvbWlzZTxUPjtcbiAgZGVsZXRlT25lOiAoXG4gICAgaWQ6IHN0cmluZyB8IG51bWJlcixcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApID0+IFByb21pc2U8bnVtYmVyPjtcbiAgZGVsZXRlTWFueTogKFxuICAgIGlkczogKHN0cmluZyB8IG51bWJlcilbXSxcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApID0+IFByb21pc2U8bnVtYmVyPjtcbiAgZGVsZXRlQWxsQnk6IChcbiAgICB3aGVyZTogUGFydGlhbDxUPixcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApID0+IFByb21pc2U8bnVtYmVyPjtcbn1cblxuZXhwb3J0IGNsYXNzIEJhc2VSZXBvc2l0b3J5PFQ+IGltcGxlbWVudHMgSUJhc2ljUmVwb3NpdG9yeTxUPiB7XG4gIHByb3RlY3RlZCBrbmV4OiBLbmV4O1xuICBwcm90ZWN0ZWQgdGFibGVOYW1lOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoeyBrbmV4UGcsIHRhYmxlTmFtZSB9OiB7IGtuZXhQZzogS25leDsgdGFibGVOYW1lOiBzdHJpbmcgfSkge1xuICAgIHRoaXMua25leCA9IGtuZXhQZztcbiAgICB0aGlzLnRhYmxlTmFtZSA9IHRhYmxlTmFtZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB0cmFuc2FjdGlvbigpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5rbmV4LnRyYW5zYWN0aW9uKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY29tbWl0KHR4OiBLbmV4LlRyYW5zYWN0aW9uKSB7XG4gICAgYXdhaXQgdHguY29tbWl0KCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcm9sbGJhY2sodHg6IEtuZXguVHJhbnNhY3Rpb24pIHtcbiAgICBhd2FpdCB0eC5yb2xsYmFjaygpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGZpbmRPbmVCeShmaWx0ZXI6IFBhcnRpYWw8VD4sIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMpIHtcbiAgICBjb25zdCBleGVjdXRlciA9IHF1ZXJ5T3B0aW9ucz8udHggPyBxdWVyeU9wdGlvbnMudHggOiB0aGlzLmtuZXg7XG4gICAgY29uc3QgcXVlcnkgPSBleGVjdXRlcih0aGlzLnRhYmxlTmFtZSkud2hlcmUoXG4gICAgICB0aGlzLnRyYW5zZm9ybVRvREJEYXRhKGZpbHRlciksXG4gICAgKTtcbiAgICBpZiAocXVlcnlPcHRpb25zPy5saW1pdCkge1xuICAgICAgcXVlcnkubGltaXQocXVlcnlPcHRpb25zLmxpbWl0KTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgcmV0dXJuIHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoID4gMFxuICAgICAgPyB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocmVzdWx0WzBdKVxuICAgICAgOiBudWxsO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGZpbmRBbGxCeShmaWx0ZXI6IFBhcnRpYWw8VD4sIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMpIHtcbiAgICBjb25zdCBleGVjdXRlciA9IHF1ZXJ5T3B0aW9ucz8udHggPyBxdWVyeU9wdGlvbnMudHggOiB0aGlzLmtuZXg7XG4gICAgLy8gZm9ybWF0IGZpbHRlciBrZXlzIHRvIHNuYWtlX2Nhc2VcblxuICAgIGNvbnN0IHF1ZXJ5ID0gZXhlY3V0ZXIodGhpcy50YWJsZU5hbWUpLndoZXJlKFxuICAgICAgdGhpcy50cmFuc2Zvcm1Ub0RCRGF0YShmaWx0ZXIpLFxuICAgICk7XG4gICAgaWYgKHF1ZXJ5T3B0aW9ucz8ub3JkZXIpIHtcbiAgICAgIHF1ZXJ5Lm9yZGVyQnkocXVlcnlPcHRpb25zLm9yZGVyKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk7XG4gICAgcmV0dXJuIHJlc3VsdC5tYXAodGhpcy50cmFuc2Zvcm1Gcm9tREJEYXRhKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBmaW5kQWxsKHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMpIHtcbiAgICBjb25zdCBleGVjdXRlciA9IHF1ZXJ5T3B0aW9ucz8udHggPyBxdWVyeU9wdGlvbnMudHggOiB0aGlzLmtuZXg7XG4gICAgY29uc3QgcXVlcnkgPSBleGVjdXRlcih0aGlzLnRhYmxlTmFtZSk7XG4gICAgaWYgKHF1ZXJ5T3B0aW9ucz8ub3JkZXIpIHtcbiAgICAgIHF1ZXJ5Lm9yZGVyQnkocXVlcnlPcHRpb25zLm9yZGVyKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5T3B0aW9ucz8ubGltaXQpIHtcbiAgICAgIHF1ZXJ5LmxpbWl0KHF1ZXJ5T3B0aW9ucy5saW1pdCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5O1xuICAgIHJldHVybiByZXN1bHQubWFwKHRoaXMudHJhbnNmb3JtRnJvbURCRGF0YSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlT25lKGRhdGE6IFBhcnRpYWw8VD4sIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMpIHtcbiAgICBjb25zdCBleGVjdXRlciA9IHF1ZXJ5T3B0aW9ucz8udHggPyBxdWVyeU9wdGlvbnMudHggOiB0aGlzLmtuZXg7XG4gICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBleGVjdXRlcih0aGlzLnRhYmxlTmFtZSlcbiAgICAgIC5pbnNlcnQodGhpcy50cmFuc2Zvcm1Ub0RCRGF0YShkYXRhKSlcbiAgICAgIC5yZXR1cm5pbmcoJyonKTtcbiAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1Gcm9tREJEYXRhKHJlc3VsdCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlTWFueShkYXRhOiBQYXJ0aWFsPFQ+W10sIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMpIHtcbiAgICBjb25zdCBleGVjdXRlciA9IHF1ZXJ5T3B0aW9ucz8udHggPyBxdWVyeU9wdGlvbnMudHggOiB0aGlzLmtuZXg7XG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTAwO1xuICAgIGNvbnN0IGJhdGNoQ291bnQgPSBNYXRoLmNlaWwoZGF0YS5sZW5ndGggLyBiYXRjaFNpemUpO1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmF0Y2hDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBzdGFydCA9IGkgKiBiYXRjaFNpemU7XG4gICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbigoaSArIDEpICogYmF0Y2hTaXplLCBkYXRhLmxlbmd0aCk7XG4gICAgICBjb25zdCBiYXRjaFZhbHVlcyA9IGRhdGEuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICBjb25zdCBjaHVuayA9IGF3YWl0IGV4ZWN1dGVyKHRoaXMudGFibGVOYW1lKVxuICAgICAgICAuaW5zZXJ0KGJhdGNoVmFsdWVzLm1hcCh0aGlzLnRyYW5zZm9ybVRvREJEYXRhKSlcbiAgICAgICAgLnJldHVybmluZygnKicpO1xuICAgICAgcmVzdWx0LnB1c2goLi4uY2h1bmspO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQubWFwKChkYXRhKSA9PiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEoZGF0YSkpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHVwZGF0ZU9uZShcbiAgICBpZDogc3RyaW5nIHwgbnVtYmVyLFxuICAgIGRhdGE6IFBhcnRpYWw8VD4sXG4gICAgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucyxcbiAgKSB7XG4gICAgY29uc3QgZXhlY3V0ZXIgPSBxdWVyeU9wdGlvbnM/LnR4ID8gcXVlcnlPcHRpb25zLnR4IDogdGhpcy5rbmV4O1xuICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZXhlY3V0ZXIodGhpcy50YWJsZU5hbWUpXG4gICAgICAud2hlcmUoeyBpZCB9KVxuICAgICAgLnVwZGF0ZSh0aGlzLnRyYW5zZm9ybVRvREJEYXRhKGRhdGEpKVxuICAgICAgLnJldHVybmluZygnKicpO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocmVzdWx0KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVPbmUoaWQ6IHN0cmluZywgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucykge1xuICAgIGNvbnN0IGV4ZWN1dGVyID0gcXVlcnlPcHRpb25zPy50eCA/IHF1ZXJ5T3B0aW9ucy50eCA6IHRoaXMua25leDtcbiAgICBjb25zdCBidWlsZGVyID0gZXhlY3V0ZXIuZnJvbSh0aGlzLnRhYmxlTmFtZSkud2hlcmUoeyBpZCB9KS5kZWxldGUoKTtcbiAgICByZXR1cm4gYXdhaXQgYnVpbGRlcjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVNYW55KFxuICAgIGlkczogKHN0cmluZyB8IG51bWJlcilbXSxcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApIHtcbiAgICBjb25zdCBleGVjdXRlciA9IHF1ZXJ5T3B0aW9ucz8udHggPyBxdWVyeU9wdGlvbnMudHggOiB0aGlzLmtuZXg7XG4gICAgY29uc3QgYnVpbGRlciA9IGV4ZWN1dGVyLmZyb20odGhpcy50YWJsZU5hbWUpLndoZXJlSW4oJ2lkJywgaWRzKS5kZWxldGUoKTtcbiAgICByZXR1cm4gYXdhaXQgYnVpbGRlcjtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGVBbGxCeSA9IGFzeW5jIChcbiAgICB3aGVyZTogUGFydGlhbDxUPixcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApID0+IHtcbiAgICBjb25zdCBleGVjdXRlciA9IHF1ZXJ5T3B0aW9ucz8udHggPyBxdWVyeU9wdGlvbnMudHggOiB0aGlzLmtuZXg7XG4gICAgY29uc3QgYnVpbGRlciA9IGV4ZWN1dGVyKHRoaXMudGFibGVOYW1lKVxuICAgICAgLndoZXJlKHRoaXMudHJhbnNmb3JtVG9EQkRhdGEod2hlcmUpKVxuICAgICAgLmRlbGV0ZSgpO1xuICAgIHJldHVybiBhd2FpdCBidWlsZGVyO1xuICB9O1xuXG4gIHByb3RlY3RlZCB0cmFuc2Zvcm1Ub0RCRGF0YSA9IChkYXRhOiBQYXJ0aWFsPFQ+KSA9PiB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZGJkYXRhJyk7XG4gICAgfVxuICAgIHJldHVybiBtYXBLZXlzKGRhdGEsIChfdmFsdWUsIGtleSkgPT4gc25ha2VDYXNlKGtleSkpO1xuICB9O1xuXG4gIHByb3RlY3RlZCB0cmFuc2Zvcm1Gcm9tREJEYXRhID0gKGRhdGE6IGFueSk6IFQgPT4ge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGRiZGF0YScpO1xuICAgIH1cbiAgICBjb25zdCBjYW1lbENhc2VEYXRhID0gbWFwS2V5cyhkYXRhLCAoX3ZhbHVlLCBrZXkpID0+IGNhbWVsQ2FzZShrZXkpKTtcbiAgICByZXR1cm4gY2FtZWxDYXNlRGF0YSBhcyBUO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbImNhbWVsQ2FzZSIsImlzUGxhaW5PYmplY3QiLCJtYXBLZXlzIiwic25ha2VDYXNlIiwiQmFzZVJlcG9zaXRvcnkiLCJjb25zdHJ1Y3RvciIsImtuZXhQZyIsInRhYmxlTmFtZSIsImRlbGV0ZUFsbEJ5Iiwid2hlcmUiLCJxdWVyeU9wdGlvbnMiLCJleGVjdXRlciIsInR4Iiwia25leCIsImJ1aWxkZXIiLCJ0cmFuc2Zvcm1Ub0RCRGF0YSIsImRlbGV0ZSIsImRhdGEiLCJFcnJvciIsIl92YWx1ZSIsImtleSIsInRyYW5zZm9ybUZyb21EQkRhdGEiLCJjYW1lbENhc2VEYXRhIiwidHJhbnNhY3Rpb24iLCJjb21taXQiLCJyb2xsYmFjayIsImZpbmRPbmVCeSIsImZpbHRlciIsInF1ZXJ5IiwibGltaXQiLCJyZXN1bHQiLCJsZW5ndGgiLCJmaW5kQWxsQnkiLCJvcmRlciIsIm9yZGVyQnkiLCJtYXAiLCJmaW5kQWxsIiwiY3JlYXRlT25lIiwiaW5zZXJ0IiwicmV0dXJuaW5nIiwiY3JlYXRlTWFueSIsImJhdGNoU2l6ZSIsImJhdGNoQ291bnQiLCJNYXRoIiwiY2VpbCIsImkiLCJzdGFydCIsImVuZCIsIm1pbiIsImJhdGNoVmFsdWVzIiwic2xpY2UiLCJjaHVuayIsInB1c2giLCJ1cGRhdGVPbmUiLCJpZCIsInVwZGF0ZSIsImRlbGV0ZU9uZSIsImZyb20iLCJkZWxldGVNYW55IiwiaWRzIiwid2hlcmVJbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/baseRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/dashboardItemRepository.ts":
/*!*******************************************************************!*\
  !*** ./src/apollo/server/repositories/dashboardItemRepository.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashboardItemRepository: () => (/* binding */ DashboardItemRepository),\n/* harmony export */   DashboardItemType: () => (/* binding */ DashboardItemType)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/mapValues */ \"lodash/mapValues\");\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nvar DashboardItemType;\n(function(DashboardItemType) {\n    // AI chart types, refer to ChartType in adaptor.ts\n    DashboardItemType[\"AREA\"] = \"AREA\";\n    DashboardItemType[\"BAR\"] = \"BAR\";\n    DashboardItemType[\"GROUPED_BAR\"] = \"GROUPED_BAR\";\n    DashboardItemType[\"LINE\"] = \"LINE\";\n    DashboardItemType[\"PIE\"] = \"PIE\";\n    DashboardItemType[\"STACKED_BAR\"] = \"STACKED_BAR\";\n    // other types\n    DashboardItemType[\"TABLE\"] = \"TABLE\";\n    DashboardItemType[\"NUMBER\"] = \"NUMBER\";\n})(DashboardItemType || (DashboardItemType = {}));\nclass DashboardItemRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"dashboard_item\"\n        });\n        this.jsonbColumns = [\n            \"layout\",\n            \"detail\"\n        ];\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(data, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n            const transformData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(camelCaseData, (value, key)=>{\n                if (this.jsonbColumns.includes(key)) {\n                    if (typeof value === \"string\") {\n                        return value ? JSON.parse(value) : value;\n                    } else {\n                        return value;\n                    }\n                }\n                return value;\n            });\n            return transformData;\n        };\n        this.transformToDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const transformedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(data, (value, key)=>{\n                if (this.jsonbColumns.includes(key)) {\n                    return JSON.stringify(value);\n                } else {\n                    return value;\n                }\n            });\n            return lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(transformedData, (_value, key)=>lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default()(key));\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvZGFzaGJvYXJkSXRlbVJlcG9zaXRvcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUNvRTtBQU9wRDtBQUFBO0FBQUE7QUFBQTtBQUFBOztVQUVKTTtJQUNWLG1EQUFtRDs7Ozs7OztJQU9uRCxjQUFjOzs7R0FSSkEsc0JBQUFBO0FBb0NMLE1BQU1DLGdDQUNIUCwyREFBY0E7SUFLdEJRLFlBQVlDLE1BQVksQ0FBRTtRQUN4QixLQUFLLENBQUM7WUFBRUE7WUFBUUMsV0FBVztRQUFpQjthQUg3QkMsZUFBZTtZQUFDO1lBQVU7U0FBUzthQU1qQ0Msc0JBQXNCLENBQUNDO1lBQ3hDLElBQUksQ0FBQ1gsMkRBQWFBLENBQUNXLE9BQU87Z0JBQ3hCLE1BQU0sSUFBSUMsTUFBTTtZQUNsQjtZQUNBLE1BQU1DLGdCQUFnQloscURBQU9BLENBQUNVLE1BQU0sQ0FBQ0csUUFBUUMsTUFBUWhCLHVEQUFTQSxDQUFDZ0I7WUFDL0QsTUFBTUMsZ0JBQWdCZCx1REFBU0EsQ0FBQ1csZUFBZSxDQUFDSSxPQUFPRjtnQkFDckQsSUFBSSxJQUFJLENBQUNOLFlBQVksQ0FBQ1MsUUFBUSxDQUFDSCxNQUFNO29CQUNuQyxJQUFJLE9BQU9FLFVBQVUsVUFBVTt3QkFDN0IsT0FBT0EsUUFBUUUsS0FBS0MsS0FBSyxDQUFDSCxTQUFTQTtvQkFDckMsT0FBTzt3QkFDTCxPQUFPQTtvQkFDVDtnQkFDRjtnQkFDQSxPQUFPQTtZQUNUO1lBQ0EsT0FBT0Q7UUFDVDthQUVtQkssb0JBQW9CLENBQUNWO1lBQ3RDLElBQUksQ0FBQ1gsMkRBQWFBLENBQUNXLE9BQU87Z0JBQ3hCLE1BQU0sSUFBSUMsTUFBTTtZQUNsQjtZQUNBLE1BQU1VLGtCQUFrQnBCLHVEQUFTQSxDQUFDUyxNQUFNLENBQUNNLE9BQU9GO2dCQUM5QyxJQUFJLElBQUksQ0FBQ04sWUFBWSxDQUFDUyxRQUFRLENBQUNILE1BQU07b0JBQ25DLE9BQU9JLEtBQUtJLFNBQVMsQ0FBQ047Z0JBQ3hCLE9BQU87b0JBQ0wsT0FBT0E7Z0JBQ1Q7WUFDRjtZQUNBLE9BQU9oQixxREFBT0EsQ0FBQ3FCLGlCQUFpQixDQUFDUixRQUFRQyxNQUFRWix1REFBU0EsQ0FBQ1k7UUFDN0Q7SUFoQ0E7QUFpQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL2Rhc2hib2FyZEl0ZW1SZXBvc2l0b3J5LnRzPzFjOTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS25leCB9IGZyb20gJ2tuZXgnO1xuaW1wb3J0IHsgQmFzZVJlcG9zaXRvcnksIElCYXNpY1JlcG9zaXRvcnkgfSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcbmltcG9ydCB7XG4gIGNhbWVsQ2FzZSxcbiAgaXNQbGFpbk9iamVjdCxcbiAgbWFwS2V5cyxcbiAgbWFwVmFsdWVzLFxuICBzbmFrZUNhc2UsXG59IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBlbnVtIERhc2hib2FyZEl0ZW1UeXBlIHtcbiAgLy8gQUkgY2hhcnQgdHlwZXMsIHJlZmVyIHRvIENoYXJ0VHlwZSBpbiBhZGFwdG9yLnRzXG4gIEFSRUEgPSAnQVJFQScsXG4gIEJBUiA9ICdCQVInLFxuICBHUk9VUEVEX0JBUiA9ICdHUk9VUEVEX0JBUicsXG4gIExJTkUgPSAnTElORScsXG4gIFBJRSA9ICdQSUUnLFxuICBTVEFDS0VEX0JBUiA9ICdTVEFDS0VEX0JBUicsXG4gIC8vIG90aGVyIHR5cGVzXG4gIFRBQkxFID0gJ1RBQkxFJyxcbiAgTlVNQkVSID0gJ05VTUJFUicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGFzaGJvYXJkSXRlbUxheW91dCB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICB3OiBudW1iZXI7XG4gIGg6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEYXNoYm9hcmRJdGVtRGV0YWlsIHtcbiAgc3FsOiBzdHJpbmc7XG4gIGNoYXJ0U2NoZW1hPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEYXNoYm9hcmRJdGVtIHtcbiAgaWQ6IG51bWJlcjtcbiAgZGFzaGJvYXJkSWQ6IG51bWJlcjtcbiAgdHlwZTogRGFzaGJvYXJkSXRlbVR5cGU7XG4gIGxheW91dDogRGFzaGJvYXJkSXRlbUxheW91dDtcbiAgZGV0YWlsOiBEYXNoYm9hcmRJdGVtRGV0YWlsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEYXNoYm9hcmRJdGVtUmVwb3NpdG9yeVxuICBleHRlbmRzIElCYXNpY1JlcG9zaXRvcnk8RGFzaGJvYXJkSXRlbT4ge31cblxuZXhwb3J0IGNsYXNzIERhc2hib2FyZEl0ZW1SZXBvc2l0b3J5XG4gIGV4dGVuZHMgQmFzZVJlcG9zaXRvcnk8RGFzaGJvYXJkSXRlbT5cbiAgaW1wbGVtZW50cyBJRGFzaGJvYXJkSXRlbVJlcG9zaXRvcnlcbntcbiAgcHJpdmF0ZSByZWFkb25seSBqc29uYkNvbHVtbnMgPSBbJ2xheW91dCcsICdkZXRhaWwnXTtcblxuICBjb25zdHJ1Y3RvcihrbmV4UGc6IEtuZXgpIHtcbiAgICBzdXBlcih7IGtuZXhQZywgdGFibGVOYW1lOiAnZGFzaGJvYXJkX2l0ZW0nIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIHRyYW5zZm9ybUZyb21EQkRhdGEgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZGJkYXRhJyk7XG4gICAgfVxuICAgIGNvbnN0IGNhbWVsQ2FzZURhdGEgPSBtYXBLZXlzKGRhdGEsIChfdmFsdWUsIGtleSkgPT4gY2FtZWxDYXNlKGtleSkpO1xuICAgIGNvbnN0IHRyYW5zZm9ybURhdGEgPSBtYXBWYWx1ZXMoY2FtZWxDYXNlRGF0YSwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGlmICh0aGlzLmpzb25iQ29sdW1ucy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdHJhbnNmb3JtRGF0YSBhcyBEYXNoYm9hcmRJdGVtO1xuICB9O1xuXG4gIHByb3RlY3RlZCBvdmVycmlkZSB0cmFuc2Zvcm1Ub0RCRGF0YSA9IChkYXRhOiBhbnkpID0+IHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBkYmRhdGEnKTtcbiAgICB9XG4gICAgY29uc3QgdHJhbnNmb3JtZWREYXRhID0gbWFwVmFsdWVzKGRhdGEsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBpZiAodGhpcy5qc29uYkNvbHVtbnMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtYXBLZXlzKHRyYW5zZm9ybWVkRGF0YSwgKF92YWx1ZSwga2V5KSA9PiBzbmFrZUNhc2Uoa2V5KSk7XG4gIH07XG59XG4iXSwibmFtZXMiOlsiQmFzZVJlcG9zaXRvcnkiLCJjYW1lbENhc2UiLCJpc1BsYWluT2JqZWN0IiwibWFwS2V5cyIsIm1hcFZhbHVlcyIsInNuYWtlQ2FzZSIsIkRhc2hib2FyZEl0ZW1UeXBlIiwiRGFzaGJvYXJkSXRlbVJlcG9zaXRvcnkiLCJjb25zdHJ1Y3RvciIsImtuZXhQZyIsInRhYmxlTmFtZSIsImpzb25iQ29sdW1ucyIsInRyYW5zZm9ybUZyb21EQkRhdGEiLCJkYXRhIiwiRXJyb3IiLCJjYW1lbENhc2VEYXRhIiwiX3ZhbHVlIiwia2V5IiwidHJhbnNmb3JtRGF0YSIsInZhbHVlIiwiaW5jbHVkZXMiLCJKU09OIiwicGFyc2UiLCJ0cmFuc2Zvcm1Ub0RCRGF0YSIsInRyYW5zZm9ybWVkRGF0YSIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/dashboardItemRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/dashboardRepository.ts":
/*!***************************************************************!*\
  !*** ./src/apollo/server/repositories/dashboardRepository.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashboardRepository: () => (/* binding */ DashboardRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n\nclass DashboardRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"dashboard\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvZGFzaGJvYXJkUmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUNvRTtBQVU3RCxNQUFNQyw0QkFDSEQsMkRBQWNBO0lBR3RCRSxZQUFZQyxNQUFZLENBQUU7UUFDeEIsS0FBSyxDQUFDO1lBQUVBO1lBQVFDLFdBQVc7UUFBWTtJQUN6QztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3JlcG9zaXRvcmllcy9kYXNoYm9hcmRSZXBvc2l0b3J5LnRzPzU1MWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS25leCB9IGZyb20gJ2tuZXgnO1xuaW1wb3J0IHsgQmFzZVJlcG9zaXRvcnksIElCYXNpY1JlcG9zaXRvcnkgfSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcblxuZXhwb3J0IGludGVyZmFjZSBEYXNoYm9hcmQge1xuICBpZDogbnVtYmVyO1xuICBwcm9qZWN0SWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEYXNoYm9hcmRSZXBvc2l0b3J5IGV4dGVuZHMgSUJhc2ljUmVwb3NpdG9yeTxEYXNoYm9hcmQ+IHt9XG5cbmV4cG9ydCBjbGFzcyBEYXNoYm9hcmRSZXBvc2l0b3J5XG4gIGV4dGVuZHMgQmFzZVJlcG9zaXRvcnk8RGFzaGJvYXJkPlxuICBpbXBsZW1lbnRzIElEYXNoYm9hcmRSZXBvc2l0b3J5XG57XG4gIGNvbnN0cnVjdG9yKGtuZXhQZzogS25leCkge1xuICAgIHN1cGVyKHsga25leFBnLCB0YWJsZU5hbWU6ICdkYXNoYm9hcmQnIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVJlcG9zaXRvcnkiLCJEYXNoYm9hcmRSZXBvc2l0b3J5IiwiY29uc3RydWN0b3IiLCJrbmV4UGciLCJ0YWJsZU5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/dashboardRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/deployLogRepository.ts":
/*!***************************************************************!*\
  !*** ./src/apollo/server/repositories/deployLogRepository.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DeployLogRepository: () => (/* binding */ DeployLogRepository),\n/* harmony export */   DeployStatusEnum: () => (/* binding */ DeployStatusEnum)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/mapValues */ \"lodash/mapValues\");\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nvar DeployStatusEnum;\n(function(DeployStatusEnum) {\n    DeployStatusEnum[\"IN_PROGRESS\"] = \"IN_PROGRESS\";\n    DeployStatusEnum[\"SUCCESS\"] = \"SUCCESS\";\n    DeployStatusEnum[\"FAILED\"] = \"FAILED\";\n})(DeployStatusEnum || (DeployStatusEnum = {}));\nclass DeployLogRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"deploy_log\"\n        });\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(data, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n            const formattedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(camelCaseData, (value, key)=>{\n                if ([\n                    \"manifest\"\n                ].includes(key)) {\n                    // sqlite return a string for json field, but postgres return an object\n                    return typeof value === \"string\" ? JSON.parse(value) : value;\n                }\n                return value;\n            });\n            return formattedData;\n        };\n    }\n    async findLastProjectDeployLog(projectId) {\n        const res = await this.knex.select(\"*\").from(this.tableName).where(this.transformToDBData({\n            projectId,\n            status: \"SUCCESS\"\n        })).orderBy(\"created_at\", \"desc\").first();\n        return res && this.transformFromDBData(res) || null;\n    }\n    async findInProgressProjectDeployLog(projectId) {\n        const res = await this.knex.select(\"*\").from(this.tableName).where(this.transformToDBData({\n            projectId,\n            status: \"IN_PROGRESS\"\n        })).orderBy(\"created_at\", \"desc\").first();\n        return res && this.transformFromDBData(res) || null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvZGVwbG95TG9nUmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUNvRTtBQUNFO0FBQUE7QUFBQTtBQUFBOztVQVcxREs7Ozs7R0FBQUEscUJBQUFBO0FBV0wsTUFBTUMsNEJBQ0hOLDJEQUFjQTtJQUd0Qk8sWUFBWUMsTUFBWSxDQUFFO1FBQ3hCLEtBQUssQ0FBQztZQUFFQTtZQUFRQyxXQUFXO1FBQWE7YUE4QjFCQyxzQkFBNkMsQ0FBQ0M7WUFDNUQsSUFBSSxDQUFDVCwyREFBYUEsQ0FBQ1MsT0FBTztnQkFDeEIsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBQ0EsTUFBTUMsZ0JBQWdCVixxREFBT0EsQ0FBQ1EsTUFBTSxDQUFDRyxRQUFRQyxNQUFRZCx1REFBU0EsQ0FBQ2M7WUFDL0QsTUFBTUMsZ0JBQWdCWix1REFBU0EsQ0FBQ1MsZUFBZSxDQUFDSSxPQUFPRjtnQkFDckQsSUFBSTtvQkFBQztpQkFBVyxDQUFDRyxRQUFRLENBQUNILE1BQU07b0JBQzlCLHVFQUF1RTtvQkFDdkUsT0FBTyxPQUFPRSxVQUFVLFdBQVdFLEtBQUtDLEtBQUssQ0FBQ0gsU0FBU0E7Z0JBQ3pEO2dCQUNBLE9BQU9BO1lBQ1Q7WUFDQSxPQUFPRDtRQUNUO0lBMUNBO0lBRUEsTUFBYUsseUJBQXlCQyxTQUFpQixFQUFFO1FBQ3ZELE1BQU1DLE1BQU0sTUFBTSxJQUFJLENBQUNDLElBQUksQ0FDeEJDLE1BQU0sQ0FBQyxLQUNQQyxJQUFJLENBQUMsSUFBSSxDQUFDakIsU0FBUyxFQUNuQmtCLEtBQUssQ0FDSixJQUFJLENBQUNDLGlCQUFpQixDQUFDO1lBQUVOO1lBQVdPLE1BQU07UUFBMkIsSUFFdEVDLE9BQU8sQ0FBQyxjQUFjLFFBQ3RCQyxLQUFLO1FBQ1IsT0FBTyxPQUFRLElBQUksQ0FBQ3JCLG1CQUFtQixDQUFDYSxRQUFTO0lBQ25EO0lBRUEsTUFBYVMsK0JBQStCVixTQUFpQixFQUFFO1FBQzdELE1BQU1DLE1BQU0sTUFBTSxJQUFJLENBQUNDLElBQUksQ0FDeEJDLE1BQU0sQ0FBQyxLQUNQQyxJQUFJLENBQUMsSUFBSSxDQUFDakIsU0FBUyxFQUNuQmtCLEtBQUssQ0FDSixJQUFJLENBQUNDLGlCQUFpQixDQUFDO1lBQ3JCTjtZQUNBTyxNQUFNO1FBQ1IsSUFFREMsT0FBTyxDQUFDLGNBQWMsUUFDdEJDLEtBQUs7UUFDUixPQUFPLE9BQVEsSUFBSSxDQUFDckIsbUJBQW1CLENBQUNhLFFBQVM7SUFDbkQ7QUFnQkYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL2RlcGxveUxvZ1JlcG9zaXRvcnkudHM/YTc5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLbmV4IH0gZnJvbSAna25leCc7XG5pbXBvcnQgeyBCYXNlUmVwb3NpdG9yeSwgSUJhc2ljUmVwb3NpdG9yeSB9IGZyb20gJy4vYmFzZVJlcG9zaXRvcnknO1xuaW1wb3J0IHsgY2FtZWxDYXNlLCBpc1BsYWluT2JqZWN0LCBtYXBLZXlzLCBtYXBWYWx1ZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERlcGxveSB7XG4gIGlkOiBudW1iZXI7IC8vIElEXG4gIHByb2plY3RJZDogbnVtYmVyOyAvLyBSZWZlcmVuY2UgdG8gcHJvamVjdC5pZFxuICBtYW5pZmVzdDogb2JqZWN0OyAvLyBNb2RlbCBtYW5pZmVzdFxuICBoYXNoOiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nOyAvLyBEZXBsb3kgc3RhdHVzXG4gIGVycm9yOiBzdHJpbmc7IC8vIEVycm9yIG1lc3NhZ2Vcbn1cblxuZXhwb3J0IGVudW0gRGVwbG95U3RhdHVzRW51bSB7XG4gIElOX1BST0dSRVNTID0gJ0lOX1BST0dSRVNTJyxcbiAgU1VDQ0VTUyA9ICdTVUNDRVNTJyxcbiAgRkFJTEVEID0gJ0ZBSUxFRCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURlcGxveUxvZ1JlcG9zaXRvcnkgZXh0ZW5kcyBJQmFzaWNSZXBvc2l0b3J5PERlcGxveT4ge1xuICBmaW5kTGFzdFByb2plY3REZXBsb3lMb2cocHJvamVjdElkOiBudW1iZXIpOiBQcm9taXNlPERlcGxveSB8IG51bGw+O1xuICBmaW5kSW5Qcm9ncmVzc1Byb2plY3REZXBsb3lMb2cocHJvamVjdElkOiBudW1iZXIpOiBQcm9taXNlPERlcGxveSB8IG51bGw+O1xufVxuXG5leHBvcnQgY2xhc3MgRGVwbG95TG9nUmVwb3NpdG9yeVxuICBleHRlbmRzIEJhc2VSZXBvc2l0b3J5PERlcGxveT5cbiAgaW1wbGVtZW50cyBJRGVwbG95TG9nUmVwb3NpdG9yeVxue1xuICBjb25zdHJ1Y3RvcihrbmV4UGc6IEtuZXgpIHtcbiAgICBzdXBlcih7IGtuZXhQZywgdGFibGVOYW1lOiAnZGVwbG95X2xvZycgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmluZExhc3RQcm9qZWN0RGVwbG95TG9nKHByb2plY3RJZDogbnVtYmVyKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5rbmV4XG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5mcm9tKHRoaXMudGFibGVOYW1lKVxuICAgICAgLndoZXJlKFxuICAgICAgICB0aGlzLnRyYW5zZm9ybVRvREJEYXRhKHsgcHJvamVjdElkLCBzdGF0dXM6IERlcGxveVN0YXR1c0VudW0uU1VDQ0VTUyB9KSxcbiAgICAgIClcbiAgICAgIC5vcmRlckJ5KCdjcmVhdGVkX2F0JywgJ2Rlc2MnKVxuICAgICAgLmZpcnN0KCk7XG4gICAgcmV0dXJuIChyZXMgJiYgdGhpcy50cmFuc2Zvcm1Gcm9tREJEYXRhKHJlcykpIHx8IG51bGw7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmluZEluUHJvZ3Jlc3NQcm9qZWN0RGVwbG95TG9nKHByb2plY3RJZDogbnVtYmVyKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5rbmV4XG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5mcm9tKHRoaXMudGFibGVOYW1lKVxuICAgICAgLndoZXJlKFxuICAgICAgICB0aGlzLnRyYW5zZm9ybVRvREJEYXRhKHtcbiAgICAgICAgICBwcm9qZWN0SWQsXG4gICAgICAgICAgc3RhdHVzOiBEZXBsb3lTdGF0dXNFbnVtLklOX1BST0dSRVNTLFxuICAgICAgICB9KSxcbiAgICAgIClcbiAgICAgIC5vcmRlckJ5KCdjcmVhdGVkX2F0JywgJ2Rlc2MnKVxuICAgICAgLmZpcnN0KCk7XG4gICAgcmV0dXJuIChyZXMgJiYgdGhpcy50cmFuc2Zvcm1Gcm9tREJEYXRhKHJlcykpIHx8IG51bGw7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgdHJhbnNmb3JtRnJvbURCRGF0YTogKGRhdGE6IGFueSkgPT4gRGVwbG95ID0gKGRhdGE6IGFueSkgPT4ge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGRiZGF0YScpO1xuICAgIH1cbiAgICBjb25zdCBjYW1lbENhc2VEYXRhID0gbWFwS2V5cyhkYXRhLCAoX3ZhbHVlLCBrZXkpID0+IGNhbWVsQ2FzZShrZXkpKTtcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRhID0gbWFwVmFsdWVzKGNhbWVsQ2FzZURhdGEsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBpZiAoWydtYW5pZmVzdCddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgLy8gc3FsaXRlIHJldHVybiBhIHN0cmluZyBmb3IganNvbiBmaWVsZCwgYnV0IHBvc3RncmVzIHJldHVybiBhbiBvYmplY3RcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtYXR0ZWREYXRhIGFzIERlcGxveTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmVwb3NpdG9yeSIsImNhbWVsQ2FzZSIsImlzUGxhaW5PYmplY3QiLCJtYXBLZXlzIiwibWFwVmFsdWVzIiwiRGVwbG95U3RhdHVzRW51bSIsIkRlcGxveUxvZ1JlcG9zaXRvcnkiLCJjb25zdHJ1Y3RvciIsImtuZXhQZyIsInRhYmxlTmFtZSIsInRyYW5zZm9ybUZyb21EQkRhdGEiLCJkYXRhIiwiRXJyb3IiLCJjYW1lbENhc2VEYXRhIiwiX3ZhbHVlIiwia2V5IiwiZm9ybWF0dGVkRGF0YSIsInZhbHVlIiwiaW5jbHVkZXMiLCJKU09OIiwicGFyc2UiLCJmaW5kTGFzdFByb2plY3REZXBsb3lMb2ciLCJwcm9qZWN0SWQiLCJyZXMiLCJrbmV4Iiwic2VsZWN0IiwiZnJvbSIsIndoZXJlIiwidHJhbnNmb3JtVG9EQkRhdGEiLCJzdGF0dXMiLCJvcmRlckJ5IiwiZmlyc3QiLCJmaW5kSW5Qcm9ncmVzc1Byb2plY3REZXBsb3lMb2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/deployLogRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/index.ts":
/*!*************************************************!*\
  !*** ./src/apollo/server/repositories/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _baseRepository__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _baseRepository__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _learningRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./learningRepository */ \"(api)/./src/apollo/server/repositories/learningRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _learningRepository__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _learningRepository__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _modelRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modelRepository */ \"(api)/./src/apollo/server/repositories/modelRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _modelRepository__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _modelRepository__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _projectRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./projectRepository */ \"(api)/./src/apollo/server/repositories/projectRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _projectRepository__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _projectRepository__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _modelColumnRepository__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modelColumnRepository */ \"(api)/./src/apollo/server/repositories/modelColumnRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _modelColumnRepository__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _modelColumnRepository__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _modelNestedColumnRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./modelNestedColumnRepository */ \"(api)/./src/apollo/server/repositories/modelNestedColumnRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _modelNestedColumnRepository__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _modelNestedColumnRepository__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _relationshipRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./relationshipRepository */ \"(api)/./src/apollo/server/repositories/relationshipRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _relationshipRepository__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _relationshipRepository__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _metricsRepository__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./metricsRepository */ \"(api)/./src/apollo/server/repositories/metricsRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _metricsRepository__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _metricsRepository__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _metricsMeasureRepository__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./metricsMeasureRepository */ \"(api)/./src/apollo/server/repositories/metricsMeasureRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _metricsMeasureRepository__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _metricsMeasureRepository__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _deployLogRepository__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./deployLogRepository */ \"(api)/./src/apollo/server/repositories/deployLogRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _deployLogRepository__WEBPACK_IMPORTED_MODULE_9__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _deployLogRepository__WEBPACK_IMPORTED_MODULE_9__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _viewRepository__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./viewRepository */ \"(api)/./src/apollo/server/repositories/viewRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _viewRepository__WEBPACK_IMPORTED_MODULE_10__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _viewRepository__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _threadRepository__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./threadRepository */ \"(api)/./src/apollo/server/repositories/threadRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _threadRepository__WEBPACK_IMPORTED_MODULE_11__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _threadRepository__WEBPACK_IMPORTED_MODULE_11__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _threadResponseRepository__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./threadResponseRepository */ \"(api)/./src/apollo/server/repositories/threadResponseRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _threadResponseRepository__WEBPACK_IMPORTED_MODULE_12__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _threadResponseRepository__WEBPACK_IMPORTED_MODULE_12__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _schemaChangeRepository__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./schemaChangeRepository */ \"(api)/./src/apollo/server/repositories/schemaChangeRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _schemaChangeRepository__WEBPACK_IMPORTED_MODULE_13__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _schemaChangeRepository__WEBPACK_IMPORTED_MODULE_13__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _dashboardRepository__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./dashboardRepository */ \"(api)/./src/apollo/server/repositories/dashboardRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _dashboardRepository__WEBPACK_IMPORTED_MODULE_14__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _dashboardRepository__WEBPACK_IMPORTED_MODULE_14__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _dashboardItemRepository__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./dashboardItemRepository */ \"(api)/./src/apollo/server/repositories/dashboardItemRepository.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _dashboardItemRepository__WEBPACK_IMPORTED_MODULE_15__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _dashboardItemRepository__WEBPACK_IMPORTED_MODULE_15__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDSTtBQUNIO0FBQ0U7QUFDSTtBQUNNO0FBQ0w7QUFDTDtBQUNPO0FBQ0w7QUFDTDtBQUNFO0FBQ1E7QUFDRjtBQUNIO0FBQ0kiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL2luZGV4LnRzPzY4NGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9iYXNlUmVwb3NpdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL2xlYXJuaW5nUmVwb3NpdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL21vZGVsUmVwb3NpdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL3Byb2plY3RSZXBvc2l0b3J5JztcbmV4cG9ydCAqIGZyb20gJy4vbW9kZWxDb2x1bW5SZXBvc2l0b3J5JztcbmV4cG9ydCAqIGZyb20gJy4vbW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5JztcbmV4cG9ydCAqIGZyb20gJy4vcmVsYXRpb25zaGlwUmVwb3NpdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL21ldHJpY3NSZXBvc2l0b3J5JztcbmV4cG9ydCAqIGZyb20gJy4vbWV0cmljc01lYXN1cmVSZXBvc2l0b3J5JztcbmV4cG9ydCAqIGZyb20gJy4vZGVwbG95TG9nUmVwb3NpdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL3ZpZXdSZXBvc2l0b3J5JztcbmV4cG9ydCAqIGZyb20gJy4vdGhyZWFkUmVwb3NpdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL3RocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSc7XG5leHBvcnQgKiBmcm9tICcuL3NjaGVtYUNoYW5nZVJlcG9zaXRvcnknO1xuZXhwb3J0ICogZnJvbSAnLi9kYXNoYm9hcmRSZXBvc2l0b3J5JztcbmV4cG9ydCAqIGZyb20gJy4vZGFzaGJvYXJkSXRlbVJlcG9zaXRvcnknO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/learningRepository.ts":
/*!**************************************************************!*\
  !*** ./src/apollo/server/repositories/learningRepository.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LearningRepository: () => (/* binding */ LearningRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/mapValues */ \"lodash/mapValues\");\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nclass LearningRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"learning\"\n        });\n        this.transformToDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const transformedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(data, (value, key)=>{\n                if ([\n                    \"paths\"\n                ].includes(key)) {\n                    return value ? JSON.stringify(value) : null;\n                }\n                return value;\n            });\n            return lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(transformedData, (_value, key)=>lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default()(key));\n        };\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(data, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n            const formattedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(camelCaseData, (value, key)=>{\n                if ([\n                    \"paths\"\n                ].includes(key)) {\n                    // The value from Sqlite will be string type, while the value from PG is JSON object\n                    if (typeof value === \"string\") {\n                        return value ? JSON.parse(value) : value;\n                    } else {\n                        return value;\n                    }\n                }\n                return value;\n            });\n            return formattedData;\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvbGVhcm5pbmdSZXBvc2l0b3J5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUNvRTtBQU9wRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBVVQsTUFBTU0sMkJBQ0hOLDJEQUFjQTtJQUd0Qk8sWUFBWUMsTUFBWSxDQUFFO1FBQ3hCLEtBQUssQ0FBQztZQUFFQTtZQUFRQyxXQUFXO1FBQVc7YUFHckJDLG9CQUFvQixDQUFDQztZQUN0QyxJQUFJLENBQUNULDJEQUFhQSxDQUFDUyxPQUFPO2dCQUN4QixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFDQSxNQUFNQyxrQkFBa0JULHVEQUFTQSxDQUFDTyxNQUFNLENBQUNHLE9BQU9DO2dCQUM5QyxJQUFJO29CQUFDO2lCQUFRLENBQUNDLFFBQVEsQ0FBQ0QsTUFBTTtvQkFDM0IsT0FBT0QsUUFBUUcsS0FBS0MsU0FBUyxDQUFDSixTQUFTO2dCQUN6QztnQkFDQSxPQUFPQTtZQUNUO1lBQ0EsT0FBT1gscURBQU9BLENBQUNVLGlCQUFpQixDQUFDTSxRQUFRSixNQUFRVix1REFBU0EsQ0FBQ1U7UUFDN0Q7YUFFbUJLLHNCQUFzQixDQUFDVDtZQUN4QyxJQUFJLENBQUNULDJEQUFhQSxDQUFDUyxPQUFPO2dCQUN4QixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFDQSxNQUFNUyxnQkFBZ0JsQixxREFBT0EsQ0FBQ1EsTUFBTSxDQUFDUSxRQUFRSixNQUFRZCx1REFBU0EsQ0FBQ2M7WUFDL0QsTUFBTU8sZ0JBQWdCbEIsdURBQVNBLENBQUNpQixlQUFlLENBQUNQLE9BQU9DO2dCQUNyRCxJQUFJO29CQUFDO2lCQUFRLENBQUNDLFFBQVEsQ0FBQ0QsTUFBTTtvQkFDM0Isb0ZBQW9GO29CQUNwRixJQUFJLE9BQU9ELFVBQVUsVUFBVTt3QkFDN0IsT0FBT0EsUUFBUUcsS0FBS00sS0FBSyxDQUFDVCxTQUFTQTtvQkFDckMsT0FBTzt3QkFDTCxPQUFPQTtvQkFDVDtnQkFDRjtnQkFDQSxPQUFPQTtZQUNUO1lBQ0EsT0FBT1E7UUFDVDtJQWhDQTtBQWlDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvbGVhcm5pbmdSZXBvc2l0b3J5LnRzPzRjMDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS25leCB9IGZyb20gJ2tuZXgnO1xuaW1wb3J0IHsgQmFzZVJlcG9zaXRvcnksIElCYXNpY1JlcG9zaXRvcnkgfSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcbmltcG9ydCB7XG4gIGNhbWVsQ2FzZSxcbiAgaXNQbGFpbk9iamVjdCxcbiAgbWFwS2V5cyxcbiAgbWFwVmFsdWVzLFxuICBzbmFrZUNhc2UsXG59IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmcge1xuICBpZDogbnVtYmVyOyAvLyBJRFxuICB1c2VySWQ6IHN0cmluZzsgLy8gUmVmZXJlbmNlIHRvIGNvbmZpZyB1c2VyVVVJRFxuICBwYXRoczogc3RyaW5nW107IC8vIFRoZSBsZWFybmluZyBwYXRocywgYXJyYXkgb2YgbGVhcm5pbmcgc3Rvcmllc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElMZWFybmluZ1JlcG9zaXRvcnkgZXh0ZW5kcyBJQmFzaWNSZXBvc2l0b3J5PExlYXJuaW5nPiB7fVxuXG5leHBvcnQgY2xhc3MgTGVhcm5pbmdSZXBvc2l0b3J5XG4gIGV4dGVuZHMgQmFzZVJlcG9zaXRvcnk8TGVhcm5pbmc+XG4gIGltcGxlbWVudHMgSUxlYXJuaW5nUmVwb3NpdG9yeVxue1xuICBjb25zdHJ1Y3RvcihrbmV4UGc6IEtuZXgpIHtcbiAgICBzdXBlcih7IGtuZXhQZywgdGFibGVOYW1lOiAnbGVhcm5pbmcnIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIHRyYW5zZm9ybVRvREJEYXRhID0gKGRhdGE6IGFueSkgPT4ge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGRiZGF0YScpO1xuICAgIH1cbiAgICBjb25zdCB0cmFuc2Zvcm1lZERhdGEgPSBtYXBWYWx1ZXMoZGF0YSwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGlmIChbJ3BhdGhzJ10uaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBtYXBLZXlzKHRyYW5zZm9ybWVkRGF0YSwgKF92YWx1ZSwga2V5KSA9PiBzbmFrZUNhc2Uoa2V5KSk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIHRyYW5zZm9ybUZyb21EQkRhdGEgPSAoZGF0YTogYW55KTogTGVhcm5pbmcgPT4ge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGRiZGF0YScpO1xuICAgIH1cbiAgICBjb25zdCBjYW1lbENhc2VEYXRhID0gbWFwS2V5cyhkYXRhLCAoX3ZhbHVlLCBrZXkpID0+IGNhbWVsQ2FzZShrZXkpKTtcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRhID0gbWFwVmFsdWVzKGNhbWVsQ2FzZURhdGEsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBpZiAoWydwYXRocyddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgLy8gVGhlIHZhbHVlIGZyb20gU3FsaXRlIHdpbGwgYmUgc3RyaW5nIHR5cGUsIHdoaWxlIHRoZSB2YWx1ZSBmcm9tIFBHIGlzIEpTT04gb2JqZWN0XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KSBhcyBMZWFybmluZztcbiAgICByZXR1cm4gZm9ybWF0dGVkRGF0YTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmVwb3NpdG9yeSIsImNhbWVsQ2FzZSIsImlzUGxhaW5PYmplY3QiLCJtYXBLZXlzIiwibWFwVmFsdWVzIiwic25ha2VDYXNlIiwiTGVhcm5pbmdSZXBvc2l0b3J5IiwiY29uc3RydWN0b3IiLCJrbmV4UGciLCJ0YWJsZU5hbWUiLCJ0cmFuc2Zvcm1Ub0RCRGF0YSIsImRhdGEiLCJFcnJvciIsInRyYW5zZm9ybWVkRGF0YSIsInZhbHVlIiwia2V5IiwiaW5jbHVkZXMiLCJKU09OIiwic3RyaW5naWZ5IiwiX3ZhbHVlIiwidHJhbnNmb3JtRnJvbURCRGF0YSIsImNhbWVsQ2FzZURhdGEiLCJmb3JtYXR0ZWREYXRhIiwicGFyc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/learningRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/metricsMeasureRepository.ts":
/*!********************************************************************!*\
  !*** ./src/apollo/server/repositories/metricsMeasureRepository.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetricMeasureRepository: () => (/* binding */ MetricMeasureRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n\nclass MetricMeasureRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"metric_measure\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvbWV0cmljc01lYXN1cmVSZXBvc2l0b3J5LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQ29FO0FBYTdELE1BQU1DLGdDQUNIRCwyREFBY0E7SUFHdEJFLFlBQVlDLE1BQVksQ0FBRTtRQUN4QixLQUFLLENBQUM7WUFBRUE7WUFBUUMsV0FBVztRQUFpQjtJQUM5QztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3JlcG9zaXRvcmllcy9tZXRyaWNzTWVhc3VyZVJlcG9zaXRvcnkudHM/OGQ4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLbmV4IH0gZnJvbSAna25leCc7XG5pbXBvcnQgeyBCYXNlUmVwb3NpdG9yeSwgSUJhc2ljUmVwb3NpdG9yeSB9IGZyb20gJy4vYmFzZVJlcG9zaXRvcnknO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1ldHJpY01lYXN1cmUge1xuICBpZDogbnVtYmVyOyAvLyBJRFxuICBtZXRyaWNJZDogbnVtYmVyOyAvLyBSZWZlcmVuY2UgdG8gbWV0cmljIElEXG4gIG5hbWU6IHN0cmluZzsgLy8gTWVhc3VyZSBuYW1lXG4gIGV4cHJlc3Npb246IHN0cmluZzsgLy8gRXhwcmVzc2lvbiBmb3IgdGhlIG1lYXN1cmVcbiAgZ3JhbnVsYXJpdHk/OiBzdHJpbmc7IC8vIEdyYW51bGFyaXR5IGZvciB0aGUgbWVhc3VyZSwgZWc6IFwiZGF5XCIsIFwiaG91clwiLCBcIm1pbnV0ZVwiLCBcInllYXJcIlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNZXRyaWNNZWFzdXJlUmVwb3NpdG9yeVxuICBleHRlbmRzIElCYXNpY1JlcG9zaXRvcnk8TWV0cmljTWVhc3VyZT4ge31cblxuZXhwb3J0IGNsYXNzIE1ldHJpY01lYXN1cmVSZXBvc2l0b3J5XG4gIGV4dGVuZHMgQmFzZVJlcG9zaXRvcnk8TWV0cmljTWVhc3VyZT5cbiAgaW1wbGVtZW50cyBJTWV0cmljTWVhc3VyZVJlcG9zaXRvcnlcbntcbiAgY29uc3RydWN0b3Ioa25leFBnOiBLbmV4KSB7XG4gICAgc3VwZXIoeyBrbmV4UGcsIHRhYmxlTmFtZTogJ21ldHJpY19tZWFzdXJlJyB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VSZXBvc2l0b3J5IiwiTWV0cmljTWVhc3VyZVJlcG9zaXRvcnkiLCJjb25zdHJ1Y3RvciIsImtuZXhQZyIsInRhYmxlTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/metricsMeasureRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/metricsRepository.ts":
/*!*************************************************************!*\
  !*** ./src/apollo/server/repositories/metricsRepository.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetricRepository: () => (/* binding */ MetricRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n\nclass MetricRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"metric\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvbWV0cmljc1JlcG9zaXRvcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDb0U7QUFrQjdELE1BQU1DLHlCQUNIRCwyREFBY0E7SUFHdEJFLFlBQVlDLE1BQVksQ0FBRTtRQUN4QixLQUFLLENBQUM7WUFBRUE7WUFBUUMsV0FBVztRQUFTO0lBQ3RDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL21ldHJpY3NSZXBvc2l0b3J5LnRzPzgzMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS25leCB9IGZyb20gJ2tuZXgnO1xuaW1wb3J0IHsgQmFzZVJlcG9zaXRvcnksIElCYXNpY1JlcG9zaXRvcnkgfSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcblxuZXhwb3J0IGludGVyZmFjZSBNZXRyaWMge1xuICBpZDogbnVtYmVyOyAvLyBJRFxuICBwcm9qZWN0SWQ6IG51bWJlcjsgLy8gUmVmZXJlbmNlIHRvIHByb2plY3QuaWRcbiAgbmFtZTogc3RyaW5nOyAvLyBNZXRyaWMgbmFtZVxuICB0eXBlOiBzdHJpbmc7IC8vIE1ldHJpYyB0eXBlLCBleDogXCJzaW1wbGVcIiBvciBcImN1bXVsYXRpdmVcIlxuICBjYWNoZWQ6IGJvb2xlYW47IC8vIE1vZGVsIGlzIGNhY2hlZCBvciBub3RcbiAgcmVmcmVzaFRpbWU/OiBzdHJpbmc7IC8vIENvbnRhaW4gYSBudW1iZXIgZm9sbG93ZWQgYnkgYSB0aW1lIHVuaXQgKG5zLCB1cywgbXMsIHMsIG0sIGgsIGQpLiBGb3IgZXhhbXBsZSwgXCIyaFwiXG5cbiAgLy8gbWV0cmljIGNhbiBiYXNlZCBvbiBtb2RlbCBvciBhbm90aGVyIG1ldHJpY1xuICBtb2RlbElkPzogbnVtYmVyOyAvLyBSZWZlcmVuY2UgdG8gbW9kZWwuaWRcbiAgbWV0cmljSWQ/OiBudW1iZXI7IC8vIFJlZmVyZW5jZSB0byBtZXRyaWMuaWRcbiAgcHJvcGVydGllcz86IHN0cmluZzsgLy8gTWV0cmljIHByb3BlcnRpZXMsIGEganNvbiBzdHJpbmcsIHRoZSBkZXNjcmlwdGlvbiBhbmQgZGlzcGxheU5hbWUgc2hvdWxkIGJlIHN0b3JlZCBoZXJlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1ldHJpY1JlcG9zaXRvcnkgZXh0ZW5kcyBJQmFzaWNSZXBvc2l0b3J5PE1ldHJpYz4ge31cblxuZXhwb3J0IGNsYXNzIE1ldHJpY1JlcG9zaXRvcnlcbiAgZXh0ZW5kcyBCYXNlUmVwb3NpdG9yeTxNZXRyaWM+XG4gIGltcGxlbWVudHMgSU1ldHJpY1JlcG9zaXRvcnlcbntcbiAgY29uc3RydWN0b3Ioa25leFBnOiBLbmV4KSB7XG4gICAgc3VwZXIoeyBrbmV4UGcsIHRhYmxlTmFtZTogJ21ldHJpYycgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmVwb3NpdG9yeSIsIk1ldHJpY1JlcG9zaXRvcnkiLCJjb25zdHJ1Y3RvciIsImtuZXhQZyIsInRhYmxlTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/metricsRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/modelColumnRepository.ts":
/*!*****************************************************************!*\
  !*** ./src/apollo/server/repositories/modelColumnRepository.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelColumnRepository: () => (/* binding */ ModelColumnRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n\nclass ModelColumnRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"model_column\"\n        });\n    }\n    async findColumnsByModelIds(modelIds, queryOptions) {\n        if (queryOptions && queryOptions.tx) {\n            const { tx } = queryOptions;\n            const result = await tx(this.tableName).whereIn(\"model_id\", modelIds).select(\"*\");\n            return result.map((r)=>this.transformFromDBData(r));\n        }\n        const result = await this.knex(\"model_column\").whereIn(\"model_id\", modelIds).select(\"*\");\n        return result.map((r)=>this.transformFromDBData(r));\n    }\n    async findColumnsByIds(ids, queryOptions) {\n        if (queryOptions && queryOptions.tx) {\n            const { tx } = queryOptions;\n            const result = await tx(this.tableName).whereIn(\"id\", ids).select(\"*\");\n            return result.map((r)=>this.transformFromDBData(r));\n        }\n        const result = await this.knex(\"model_column\").whereIn(\"id\", ids).select(\"*\");\n        return result.map((r)=>this.transformFromDBData(r));\n    }\n    async deleteByModelIds(modelIds, queryOptions) {\n        if (queryOptions && queryOptions.tx) {\n            const { tx } = queryOptions;\n            await tx(this.tableName).whereIn(\"model_id\", modelIds).delete();\n            return;\n        }\n        await this.knex(\"model_column\").whereIn(\"model_id\", modelIds).delete();\n    }\n    async resetModelPrimaryKey(modelId) {\n        await this.knex(\"model_column\").where(this.transformToDBData({\n            modelId\n        })).update(this.transformToDBData({\n            isPk: false\n        }));\n    }\n    async setModelPrimaryKey(modelId, sourceColumnName) {\n        await this.knex(\"model_column\").where(this.transformToDBData({\n            modelId,\n            sourceColumnName\n        })).update(this.transformToDBData({\n            isPk: true\n        }));\n    }\n    async deleteAllBySourceColumnNames(modelId, sourceColumnNames, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const builder = executer(this.tableName).where(this.transformToDBData({\n            modelId\n        })).whereIn(\"source_column_name\", sourceColumnNames).delete();\n        return await builder;\n    }\n    async deleteAllByColumnIds(columnIds, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        await executer(this.tableName).whereIn(\"id\", columnIds).delete();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvbW9kZWxDb2x1bW5SZXBvc2l0b3J5LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBSzBCO0FBNENuQixNQUFNQyw4QkFDSEQsMkRBQWNBO0lBR3RCRSxZQUFZQyxNQUFZLENBQUU7UUFDeEIsS0FBSyxDQUFDO1lBQUVBO1lBQVFDLFdBQVc7UUFBZTtJQUM1QztJQUVBLE1BQWFDLHNCQUFzQkMsUUFBUSxFQUFFQyxZQUE0QixFQUFFO1FBQ3pFLElBQUlBLGdCQUFnQkEsYUFBYUMsRUFBRSxFQUFFO1lBQ25DLE1BQU0sRUFBRUEsRUFBRSxFQUFFLEdBQUdEO1lBQ2YsTUFBTUUsU0FBUyxNQUFNRCxHQUFHLElBQUksQ0FBQ0osU0FBUyxFQUNuQ00sT0FBTyxDQUFDLFlBQVlKLFVBQ3BCSyxNQUFNLENBQUM7WUFDVixPQUFPRixPQUFPRyxHQUFHLENBQUMsQ0FBQ0MsSUFBTSxJQUFJLENBQUNDLG1CQUFtQixDQUFDRDtRQUNwRDtRQUNBLE1BQU1KLFNBQVMsTUFBTSxJQUFJLENBQUNNLElBQUksQ0FBYyxnQkFDekNMLE9BQU8sQ0FBQyxZQUFZSixVQUNwQkssTUFBTSxDQUFDO1FBQ1YsT0FBT0YsT0FBT0csR0FBRyxDQUFDLENBQUNDLElBQU0sSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQ0Q7SUFDcEQ7SUFFQSxNQUFhRyxpQkFBaUJDLEdBQWEsRUFBRVYsWUFBNEIsRUFBRTtRQUN6RSxJQUFJQSxnQkFBZ0JBLGFBQWFDLEVBQUUsRUFBRTtZQUNuQyxNQUFNLEVBQUVBLEVBQUUsRUFBRSxHQUFHRDtZQUNmLE1BQU1FLFNBQVMsTUFBTUQsR0FBRyxJQUFJLENBQUNKLFNBQVMsRUFBRU0sT0FBTyxDQUFDLE1BQU1PLEtBQUtOLE1BQU0sQ0FBQztZQUNsRSxPQUFPRixPQUFPRyxHQUFHLENBQUMsQ0FBQ0MsSUFBTSxJQUFJLENBQUNDLG1CQUFtQixDQUFDRDtRQUNwRDtRQUNBLE1BQU1KLFNBQVMsTUFBTSxJQUFJLENBQUNNLElBQUksQ0FBYyxnQkFDekNMLE9BQU8sQ0FBQyxNQUFNTyxLQUNkTixNQUFNLENBQUM7UUFDVixPQUFPRixPQUFPRyxHQUFHLENBQUMsQ0FBQ0MsSUFBTSxJQUFJLENBQUNDLG1CQUFtQixDQUFDRDtJQUNwRDtJQUVBLE1BQWFLLGlCQUNYWixRQUFrQixFQUNsQkMsWUFBNEIsRUFDNUI7UUFDQSxJQUFJQSxnQkFBZ0JBLGFBQWFDLEVBQUUsRUFBRTtZQUNuQyxNQUFNLEVBQUVBLEVBQUUsRUFBRSxHQUFHRDtZQUNmLE1BQU1DLEdBQUcsSUFBSSxDQUFDSixTQUFTLEVBQUVNLE9BQU8sQ0FBQyxZQUFZSixVQUFVYSxNQUFNO1lBQzdEO1FBQ0Y7UUFDQSxNQUFNLElBQUksQ0FBQ0osSUFBSSxDQUFjLGdCQUMxQkwsT0FBTyxDQUFDLFlBQVlKLFVBQ3BCYSxNQUFNO0lBQ1g7SUFFQSxNQUFhQyxxQkFBcUJDLE9BQWUsRUFBRTtRQUNqRCxNQUFNLElBQUksQ0FBQ04sSUFBSSxDQUFjLGdCQUMxQk8sS0FBSyxDQUFDLElBQUksQ0FBQ0MsaUJBQWlCLENBQUM7WUFBRUY7UUFBUSxJQUN2Q0csTUFBTSxDQUFDLElBQUksQ0FBQ0QsaUJBQWlCLENBQUM7WUFBRUUsTUFBTTtRQUFNO0lBQ2pEO0lBQ0EsTUFBYUMsbUJBQW1CTCxPQUFlLEVBQUVNLGdCQUF3QixFQUFFO1FBQ3pFLE1BQU0sSUFBSSxDQUFDWixJQUFJLENBQWMsZ0JBQzFCTyxLQUFLLENBQUMsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQztZQUFFRjtZQUFTTTtRQUFpQixJQUN6REgsTUFBTSxDQUFDLElBQUksQ0FBQ0QsaUJBQWlCLENBQUM7WUFBRUUsTUFBTTtRQUFLO0lBQ2hEO0lBRUEsTUFBYUcsNkJBQ1hQLE9BQWUsRUFDZlEsaUJBQTJCLEVBQzNCdEIsWUFBNEIsRUFDWDtRQUNqQixNQUFNdUIsV0FBV3ZCLGNBQWNDLEtBQUtELGFBQWFDLEVBQUUsR0FBRyxJQUFJLENBQUNPLElBQUk7UUFDL0QsTUFBTWdCLFVBQVVELFNBQVMsSUFBSSxDQUFDMUIsU0FBUyxFQUNwQ2tCLEtBQUssQ0FBQyxJQUFJLENBQUNDLGlCQUFpQixDQUFDO1lBQUVGO1FBQVEsSUFDdkNYLE9BQU8sQ0FBQyxzQkFBc0JtQixtQkFDOUJWLE1BQU07UUFDVCxPQUFPLE1BQU1ZO0lBQ2Y7SUFFQSxNQUFhQyxxQkFDWEMsU0FBbUIsRUFDbkIxQixZQUE0QixFQUNiO1FBQ2YsTUFBTXVCLFdBQVd2QixjQUFjQyxLQUFLRCxhQUFhQyxFQUFFLEdBQUcsSUFBSSxDQUFDTyxJQUFJO1FBQy9ELE1BQU1lLFNBQXNCLElBQUksQ0FBQzFCLFNBQVMsRUFDdkNNLE9BQU8sQ0FBQyxNQUFNdUIsV0FDZGQsTUFBTTtJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL21vZGVsQ29sdW1uUmVwb3NpdG9yeS50cz84NTMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tICdrbmV4JztcbmltcG9ydCB7XG4gIEJhc2VSZXBvc2l0b3J5LFxuICBJQmFzaWNSZXBvc2l0b3J5LFxuICBJUXVlcnlPcHRpb25zLFxufSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbENvbHVtbiB7XG4gIGlkOiBudW1iZXI7IC8vIElEXG4gIG1vZGVsSWQ6IG51bWJlcjsgLy8gUmVmZXJlbmNlIHRvIG1vZGVsIElEXG4gIGlzQ2FsY3VsYXRlZDogYm9vbGVhbjsgLy8gSXMgY2FsY3VsYXRlZCBmaWVsZFxuICBkaXNwbGF5TmFtZTogc3RyaW5nOyAvLyBDb2x1bW4gbmFtZSBkaXNwbGF5ZWQgaW4gVUlcbiAgcmVmZXJlbmNlTmFtZTogc3RyaW5nOyAvLyBUaGUgbmFtZSB1c2VkIGluIHRoZSBNREwgc3RydWN0dXJlIGFuZCB3aGVuIHF1ZXJ5aW5nIHRoZSBkYXRhXG4gIHNvdXJjZUNvbHVtbk5hbWU6IHN0cmluZzsgLy8gVGhlIGNvbHVtbiBuYW1lIGluIHRoZSBkYXRhc291cmNlXG4gIGFnZ3JlZ2F0aW9uPzogc3RyaW5nOyAvLyBFeHByZXNzaW9uIGZvciB0aGUgY29sdW1uLCBjb3VsZCBiZSBjdXN0b20gZmllbGQgb3IgY2FsY3VsYXRlZCBmaWVsZCBleHByZXNzaW9uXG4gIGxpbmVhZ2U/OiBzdHJpbmc7IC8vIFRoZSBzZWxlY3RlZCBmaWVsZCBpbiBjYWxjdWxhdGVkIGZpZWxkLCBhcnJheSBvZiBpZHNcbiAgY3VzdG9tRXhwcmVzc2lvbj86IHN0cmluZzsgLy8gRm9yIGN1c3RvbSBmaWVsZCBvciBjdXN0b20gZXhwcmVzc2lvbiBvZiBjYWxjdWxhdGVkIGZpZWxkXG4gIHR5cGU6IHN0cmluZzsgLy8gRGF0YSB0eXBlLCByZWZlciB0byB0aGUgY29sdW1uIHR5cGUgaW4gdGhlIGRhdGFzb3VyY2VcbiAgbm90TnVsbDogYm9vbGVhbjsgLy8gSXMgbm90IG51bGxcbiAgaXNQazogYm9vbGVhbjsgLy8gSXMgcHJpbWFyeSBrZXkgb2YgdGhlIHRhYmxlXG4gIHByb3BlcnRpZXM/OiBzdHJpbmc7IC8vIENvbHVtbiBwcm9wZXJ0aWVzLCBhIGpzb24gc3RyaW5nLCB0aGUgZGVzY3JpcHRpb24gYW5kIGRpc3BsYXlOYW1lIHNob3VsZCBiZSBzdG9yZWQgaGVyZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNb2RlbENvbHVtblJlcG9zaXRvcnkgZXh0ZW5kcyBJQmFzaWNSZXBvc2l0b3J5PE1vZGVsQ29sdW1uPiB7XG4gIGZpbmRDb2x1bW5zQnlNb2RlbElkcyhcbiAgICBtb2RlbElkczogbnVtYmVyW10sXG4gICAgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxNb2RlbENvbHVtbltdPjtcbiAgZmluZENvbHVtbnNCeUlkcyhcbiAgICBpZHM6IG51bWJlcltdLFxuICAgIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMsXG4gICk6IFByb21pc2U8TW9kZWxDb2x1bW5bXT47XG4gIGRlbGV0ZUJ5TW9kZWxJZHMoXG4gICAgbW9kZWxJZHM6IG51bWJlcltdLFxuICAgIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMsXG4gICk6IFByb21pc2U8dm9pZD47XG4gIHJlc2V0TW9kZWxQcmltYXJ5S2V5KG1vZGVsSWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD47XG4gIHNldE1vZGVsUHJpbWFyeUtleShtb2RlbElkOiBudW1iZXIsIHNvdXJjZUNvbHVtbk5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIGRlbGV0ZUFsbEJ5U291cmNlQ29sdW1uTmFtZXMoXG4gICAgbW9kZWxJZDogbnVtYmVyLFxuICAgIHNvdXJjZUNvbHVtbk5hbWVzOiBzdHJpbmdbXSxcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApOiBQcm9taXNlPG51bWJlcj47XG4gIGRlbGV0ZUFsbEJ5Q29sdW1uSWRzKFxuICAgIGNvbHVtbklkczogbnVtYmVyW10sXG4gICAgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGNsYXNzIE1vZGVsQ29sdW1uUmVwb3NpdG9yeVxuICBleHRlbmRzIEJhc2VSZXBvc2l0b3J5PE1vZGVsQ29sdW1uPlxuICBpbXBsZW1lbnRzIElNb2RlbENvbHVtblJlcG9zaXRvcnlcbntcbiAgY29uc3RydWN0b3Ioa25leFBnOiBLbmV4KSB7XG4gICAgc3VwZXIoeyBrbmV4UGcsIHRhYmxlTmFtZTogJ21vZGVsX2NvbHVtbicgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmluZENvbHVtbnNCeU1vZGVsSWRzKG1vZGVsSWRzLCBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zKSB7XG4gICAgaWYgKHF1ZXJ5T3B0aW9ucyAmJiBxdWVyeU9wdGlvbnMudHgpIHtcbiAgICAgIGNvbnN0IHsgdHggfSA9IHF1ZXJ5T3B0aW9ucztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHR4KHRoaXMudGFibGVOYW1lKVxuICAgICAgICAud2hlcmVJbignbW9kZWxfaWQnLCBtb2RlbElkcylcbiAgICAgICAgLnNlbGVjdCgnKicpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5tYXAoKHIpID0+IHRoaXMudHJhbnNmb3JtRnJvbURCRGF0YShyKSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMua25leDxNb2RlbENvbHVtbj4oJ21vZGVsX2NvbHVtbicpXG4gICAgICAud2hlcmVJbignbW9kZWxfaWQnLCBtb2RlbElkcylcbiAgICAgIC5zZWxlY3QoJyonKTtcbiAgICByZXR1cm4gcmVzdWx0Lm1hcCgocikgPT4gdGhpcy50cmFuc2Zvcm1Gcm9tREJEYXRhKHIpKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBmaW5kQ29sdW1uc0J5SWRzKGlkczogbnVtYmVyW10sIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMpIHtcbiAgICBpZiAocXVlcnlPcHRpb25zICYmIHF1ZXJ5T3B0aW9ucy50eCkge1xuICAgICAgY29uc3QgeyB0eCB9ID0gcXVlcnlPcHRpb25zO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdHgodGhpcy50YWJsZU5hbWUpLndoZXJlSW4oJ2lkJywgaWRzKS5zZWxlY3QoJyonKTtcbiAgICAgIHJldHVybiByZXN1bHQubWFwKChyKSA9PiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocikpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmtuZXg8TW9kZWxDb2x1bW4+KCdtb2RlbF9jb2x1bW4nKVxuICAgICAgLndoZXJlSW4oJ2lkJywgaWRzKVxuICAgICAgLnNlbGVjdCgnKicpO1xuICAgIHJldHVybiByZXN1bHQubWFwKChyKSA9PiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocikpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlbGV0ZUJ5TW9kZWxJZHMoXG4gICAgbW9kZWxJZHM6IG51bWJlcltdLFxuICAgIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMsXG4gICkge1xuICAgIGlmIChxdWVyeU9wdGlvbnMgJiYgcXVlcnlPcHRpb25zLnR4KSB7XG4gICAgICBjb25zdCB7IHR4IH0gPSBxdWVyeU9wdGlvbnM7XG4gICAgICBhd2FpdCB0eCh0aGlzLnRhYmxlTmFtZSkud2hlcmVJbignbW9kZWxfaWQnLCBtb2RlbElkcykuZGVsZXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IHRoaXMua25leDxNb2RlbENvbHVtbj4oJ21vZGVsX2NvbHVtbicpXG4gICAgICAud2hlcmVJbignbW9kZWxfaWQnLCBtb2RlbElkcylcbiAgICAgIC5kZWxldGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZXNldE1vZGVsUHJpbWFyeUtleShtb2RlbElkOiBudW1iZXIpIHtcbiAgICBhd2FpdCB0aGlzLmtuZXg8TW9kZWxDb2x1bW4+KCdtb2RlbF9jb2x1bW4nKVxuICAgICAgLndoZXJlKHRoaXMudHJhbnNmb3JtVG9EQkRhdGEoeyBtb2RlbElkIH0pKVxuICAgICAgLnVwZGF0ZSh0aGlzLnRyYW5zZm9ybVRvREJEYXRhKHsgaXNQazogZmFsc2UgfSkpO1xuICB9XG4gIHB1YmxpYyBhc3luYyBzZXRNb2RlbFByaW1hcnlLZXkobW9kZWxJZDogbnVtYmVyLCBzb3VyY2VDb2x1bW5OYW1lOiBzdHJpbmcpIHtcbiAgICBhd2FpdCB0aGlzLmtuZXg8TW9kZWxDb2x1bW4+KCdtb2RlbF9jb2x1bW4nKVxuICAgICAgLndoZXJlKHRoaXMudHJhbnNmb3JtVG9EQkRhdGEoeyBtb2RlbElkLCBzb3VyY2VDb2x1bW5OYW1lIH0pKVxuICAgICAgLnVwZGF0ZSh0aGlzLnRyYW5zZm9ybVRvREJEYXRhKHsgaXNQazogdHJ1ZSB9KSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVsZXRlQWxsQnlTb3VyY2VDb2x1bW5OYW1lcyhcbiAgICBtb2RlbElkOiBudW1iZXIsXG4gICAgc291cmNlQ29sdW1uTmFtZXM6IHN0cmluZ1tdLFxuICAgIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMsXG4gICk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgZXhlY3V0ZXIgPSBxdWVyeU9wdGlvbnM/LnR4ID8gcXVlcnlPcHRpb25zLnR4IDogdGhpcy5rbmV4O1xuICAgIGNvbnN0IGJ1aWxkZXIgPSBleGVjdXRlcih0aGlzLnRhYmxlTmFtZSlcbiAgICAgIC53aGVyZSh0aGlzLnRyYW5zZm9ybVRvREJEYXRhKHsgbW9kZWxJZCB9KSlcbiAgICAgIC53aGVyZUluKCdzb3VyY2VfY29sdW1uX25hbWUnLCBzb3VyY2VDb2x1bW5OYW1lcylcbiAgICAgIC5kZWxldGUoKTtcbiAgICByZXR1cm4gYXdhaXQgYnVpbGRlcjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVBbGxCeUNvbHVtbklkcyhcbiAgICBjb2x1bW5JZHM6IG51bWJlcltdLFxuICAgIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGV4ZWN1dGVyID0gcXVlcnlPcHRpb25zPy50eCA/IHF1ZXJ5T3B0aW9ucy50eCA6IHRoaXMua25leDtcbiAgICBhd2FpdCBleGVjdXRlcjxNb2RlbENvbHVtbj4odGhpcy50YWJsZU5hbWUpXG4gICAgICAud2hlcmVJbignaWQnLCBjb2x1bW5JZHMpXG4gICAgICAuZGVsZXRlKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmVwb3NpdG9yeSIsIk1vZGVsQ29sdW1uUmVwb3NpdG9yeSIsImNvbnN0cnVjdG9yIiwia25leFBnIiwidGFibGVOYW1lIiwiZmluZENvbHVtbnNCeU1vZGVsSWRzIiwibW9kZWxJZHMiLCJxdWVyeU9wdGlvbnMiLCJ0eCIsInJlc3VsdCIsIndoZXJlSW4iLCJzZWxlY3QiLCJtYXAiLCJyIiwidHJhbnNmb3JtRnJvbURCRGF0YSIsImtuZXgiLCJmaW5kQ29sdW1uc0J5SWRzIiwiaWRzIiwiZGVsZXRlQnlNb2RlbElkcyIsImRlbGV0ZSIsInJlc2V0TW9kZWxQcmltYXJ5S2V5IiwibW9kZWxJZCIsIndoZXJlIiwidHJhbnNmb3JtVG9EQkRhdGEiLCJ1cGRhdGUiLCJpc1BrIiwic2V0TW9kZWxQcmltYXJ5S2V5Iiwic291cmNlQ29sdW1uTmFtZSIsImRlbGV0ZUFsbEJ5U291cmNlQ29sdW1uTmFtZXMiLCJzb3VyY2VDb2x1bW5OYW1lcyIsImV4ZWN1dGVyIiwiYnVpbGRlciIsImRlbGV0ZUFsbEJ5Q29sdW1uSWRzIiwiY29sdW1uSWRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/modelColumnRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/modelNestedColumnRepository.ts":
/*!***********************************************************************!*\
  !*** ./src/apollo/server/repositories/modelNestedColumnRepository.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelNestedColumnRepository: () => (/* binding */ ModelNestedColumnRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/mapValues */ \"lodash/mapValues\");\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nclass ModelNestedColumnRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"model_nested_column\"\n        });\n        this.findNestedColumnsByModelIds = async (modelIds)=>{\n            const result = await this.knex(this.tableName).select(\"*\").whereIn(\"model_id\", modelIds);\n            return result.map((r)=>this.transformFromDBData(r));\n        };\n        this.findNestedColumnsByIds = async (ids)=>{\n            const result = await this.knex(this.tableName).select(\"*\").whereIn(\"id\", ids);\n            return result.map((r)=>this.transformFromDBData(r));\n        };\n        this.transformToDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const transformedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(data, (value, key)=>{\n                if ([\n                    \"columnPath\",\n                    \"properties\"\n                ].includes(key)) {\n                    return value ? JSON.stringify(value) : null;\n                }\n                return value;\n            });\n            return lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(transformedData, (_value, key)=>lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default()(key));\n        };\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(data, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n            const formattedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(camelCaseData, (value, key)=>{\n                if ([\n                    \"columnPath\",\n                    \"properties\"\n                ].includes(key)) {\n                    // The value from Sqlite will be string type, while the value from PG is JSON object\n                    if (typeof value === \"string\") {\n                        return value ? JSON.parse(value) : value;\n                    } else {\n                        return value;\n                    }\n                }\n                return value;\n            });\n            return formattedData;\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvbW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUNvRTtBQU9wRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBb0JULE1BQU1NLG9DQUNITiwyREFBY0E7SUFHdEJPLFlBQVlDLE1BQVksQ0FBRTtRQUN4QixLQUFLLENBQUM7WUFBRUE7WUFBUUMsV0FBVztRQUFzQjthQUc1Q0MsOEJBQThCLE9BQU9DO1lBQzFDLE1BQU1DLFNBQVMsTUFBTSxJQUFJLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUNKLFNBQVMsRUFDMUNLLE1BQU0sQ0FBQyxLQUNQQyxPQUFPLENBQUMsWUFBWUo7WUFDdkIsT0FBT0MsT0FBT0ksR0FBRyxDQUFDLENBQUNDLElBQU0sSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQ0Q7UUFDcEQ7YUFFT0UseUJBQXlCLE9BQU9DO1lBQ3JDLE1BQU1SLFNBQVMsTUFBTSxJQUFJLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUNKLFNBQVMsRUFDMUNLLE1BQU0sQ0FBQyxLQUNQQyxPQUFPLENBQUMsTUFBTUs7WUFDakIsT0FBT1IsT0FBT0ksR0FBRyxDQUFDLENBQUNDLElBQU0sSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQ0Q7UUFDcEQ7YUFFbUJJLG9CQUFvQixDQUFDQztZQUN0QyxJQUFJLENBQUNwQiwyREFBYUEsQ0FBQ29CLE9BQU87Z0JBQ3hCLE1BQU0sSUFBSUMsTUFBTTtZQUNsQjtZQUNBLE1BQU1DLGtCQUFrQnBCLHVEQUFTQSxDQUFDa0IsTUFBTSxDQUFDRyxPQUFPQztnQkFDOUMsSUFBSTtvQkFBQztvQkFBYztpQkFBYSxDQUFDQyxRQUFRLENBQUNELE1BQU07b0JBQzlDLE9BQU9ELFFBQVFHLEtBQUtDLFNBQVMsQ0FBQ0osU0FBUztnQkFDekM7Z0JBQ0EsT0FBT0E7WUFDVDtZQUNBLE9BQU90QixxREFBT0EsQ0FBQ3FCLGlCQUFpQixDQUFDTSxRQUFRSixNQUFRckIsdURBQVNBLENBQUNxQjtRQUM3RDthQUVtQlIsc0JBQXNCLENBQUNJO1lBQ3hDLElBQUksQ0FBQ3BCLDJEQUFhQSxDQUFDb0IsT0FBTztnQkFDeEIsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBQ0EsTUFBTVEsZ0JBQWdCNUIscURBQU9BLENBQUNtQixNQUFNLENBQUNRLFFBQVFKLE1BQVF6Qix1REFBU0EsQ0FBQ3lCO1lBQy9ELE1BQU1NLGdCQUFnQjVCLHVEQUFTQSxDQUFDMkIsZUFBZSxDQUFDTixPQUFPQztnQkFDckQsSUFBSTtvQkFBQztvQkFBYztpQkFBYSxDQUFDQyxRQUFRLENBQUNELE1BQU07b0JBQzlDLG9GQUFvRjtvQkFDcEYsSUFBSSxPQUFPRCxVQUFVLFVBQVU7d0JBQzdCLE9BQU9BLFFBQVFHLEtBQUtLLEtBQUssQ0FBQ1IsU0FBU0E7b0JBQ3JDLE9BQU87d0JBQ0wsT0FBT0E7b0JBQ1Q7Z0JBQ0Y7Z0JBQ0EsT0FBT0E7WUFDVDtZQUNBLE9BQU9PO1FBQ1Q7SUE5Q0E7QUErQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL21vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeS50cz8zMDgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tICdrbmV4JztcbmltcG9ydCB7IEJhc2VSZXBvc2l0b3J5LCBJQmFzaWNSZXBvc2l0b3J5IH0gZnJvbSAnLi9iYXNlUmVwb3NpdG9yeSc7XG5pbXBvcnQge1xuICBjYW1lbENhc2UsXG4gIGlzUGxhaW5PYmplY3QsXG4gIG1hcEtleXMsXG4gIG1hcFZhbHVlcyxcbiAgc25ha2VDYXNlLFxufSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsTmVzdGVkQ29sdW1uIHtcbiAgaWQ6IG51bWJlcjsgLy8gSURcbiAgbW9kZWxJZDogbnVtYmVyOyAvLyBSZWZlcmVuY2UgdG8gbW9kZWwgSURcbiAgY29sdW1uSWQ6IG51bWJlcjsgLy8gUmVmZXJlbmNlIHRvIGNvbHVtbiBJRFxuICBjb2x1bW5QYXRoOiBzdHJpbmdbXTtcbiAgZGlzcGxheU5hbWU6IHN0cmluZzsgLy8gTmVzdGVkIGNvbHVtbiBuYW1lIGRpc3BsYXllZCBpbiBVSVxuICByZWZlcmVuY2VOYW1lOiBzdHJpbmc7IC8vIFRoZSBuYW1lIHVzZWQgaW4gdGhlIE1ETCBzdHJ1Y3R1cmUgYW5kIHdoZW4gcXVlcnlpbmcgdGhlIGRhdGFcbiAgc291cmNlQ29sdW1uTmFtZTogc3RyaW5nOyAvLyBUaGUgbmVzdGVkIGNvbHVtbiBuYW1lIGluIHRoZSBkYXRhc291cmNlXG4gIHR5cGU6IHN0cmluZzsgLy8gRGF0YSB0eXBlLCByZWZlciB0byB0aGUgbmVzdGVkIGNvbHVtbiB0eXBlIGluIHRoZSBkYXRhc291cmNlXG4gIHByb3BlcnRpZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+OyAvLyBOZXN0ZWQgY29sdW1uIHByb3BlcnRpZXMsIGEganNvbiBzdHJpbmcsIHRoZSBkZXNjcmlwdGlvbiBzaG91bGQgYmUgc3RvcmVkIGhlcmVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5XG4gIGV4dGVuZHMgSUJhc2ljUmVwb3NpdG9yeTxNb2RlbE5lc3RlZENvbHVtbj4ge1xuICBmaW5kTmVzdGVkQ29sdW1uc0J5TW9kZWxJZHMobW9kZWxJZHM6IG51bWJlcltdKTogUHJvbWlzZTxNb2RlbE5lc3RlZENvbHVtbltdPjtcbiAgZmluZE5lc3RlZENvbHVtbnNCeUlkcyhpZHM6IG51bWJlcltdKTogUHJvbWlzZTxNb2RlbE5lc3RlZENvbHVtbltdPjtcbn1cblxuZXhwb3J0IGNsYXNzIE1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeVxuICBleHRlbmRzIEJhc2VSZXBvc2l0b3J5PE1vZGVsTmVzdGVkQ29sdW1uPlxuICBpbXBsZW1lbnRzIElNb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnlcbntcbiAgY29uc3RydWN0b3Ioa25leFBnOiBLbmV4KSB7XG4gICAgc3VwZXIoeyBrbmV4UGcsIHRhYmxlTmFtZTogJ21vZGVsX25lc3RlZF9jb2x1bW4nIH0pO1xuICB9XG5cbiAgcHVibGljIGZpbmROZXN0ZWRDb2x1bW5zQnlNb2RlbElkcyA9IGFzeW5jIChtb2RlbElkczogbnVtYmVyW10pID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmtuZXgodGhpcy50YWJsZU5hbWUpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC53aGVyZUluKCdtb2RlbF9pZCcsIG1vZGVsSWRzKTtcbiAgICByZXR1cm4gcmVzdWx0Lm1hcCgocikgPT4gdGhpcy50cmFuc2Zvcm1Gcm9tREJEYXRhKHIpKTtcbiAgfTtcblxuICBwdWJsaWMgZmluZE5lc3RlZENvbHVtbnNCeUlkcyA9IGFzeW5jIChpZHM6IG51bWJlcltdKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5rbmV4KHRoaXMudGFibGVOYW1lKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAud2hlcmVJbignaWQnLCBpZHMpO1xuICAgIHJldHVybiByZXN1bHQubWFwKChyKSA9PiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocikpO1xuICB9O1xuXG4gIHByb3RlY3RlZCBvdmVycmlkZSB0cmFuc2Zvcm1Ub0RCRGF0YSA9IChkYXRhOiBhbnkpID0+IHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBkYmRhdGEnKTtcbiAgICB9XG4gICAgY29uc3QgdHJhbnNmb3JtZWREYXRhID0gbWFwVmFsdWVzKGRhdGEsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBpZiAoWydjb2x1bW5QYXRoJywgJ3Byb3BlcnRpZXMnXS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA6IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hcEtleXModHJhbnNmb3JtZWREYXRhLCAoX3ZhbHVlLCBrZXkpID0+IHNuYWtlQ2FzZShrZXkpKTtcbiAgfTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdHJhbnNmb3JtRnJvbURCRGF0YSA9IChkYXRhOiBhbnkpOiBNb2RlbE5lc3RlZENvbHVtbiA9PiB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZGJkYXRhJyk7XG4gICAgfVxuICAgIGNvbnN0IGNhbWVsQ2FzZURhdGEgPSBtYXBLZXlzKGRhdGEsIChfdmFsdWUsIGtleSkgPT4gY2FtZWxDYXNlKGtleSkpO1xuICAgIGNvbnN0IGZvcm1hdHRlZERhdGEgPSBtYXBWYWx1ZXMoY2FtZWxDYXNlRGF0YSwgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgIGlmIChbJ2NvbHVtblBhdGgnLCAncHJvcGVydGllcyddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgLy8gVGhlIHZhbHVlIGZyb20gU3FsaXRlIHdpbGwgYmUgc3RyaW5nIHR5cGUsIHdoaWxlIHRoZSB2YWx1ZSBmcm9tIFBHIGlzIEpTT04gb2JqZWN0XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KSBhcyBNb2RlbE5lc3RlZENvbHVtbjtcbiAgICByZXR1cm4gZm9ybWF0dGVkRGF0YTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmVwb3NpdG9yeSIsImNhbWVsQ2FzZSIsImlzUGxhaW5PYmplY3QiLCJtYXBLZXlzIiwibWFwVmFsdWVzIiwic25ha2VDYXNlIiwiTW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5IiwiY29uc3RydWN0b3IiLCJrbmV4UGciLCJ0YWJsZU5hbWUiLCJmaW5kTmVzdGVkQ29sdW1uc0J5TW9kZWxJZHMiLCJtb2RlbElkcyIsInJlc3VsdCIsImtuZXgiLCJzZWxlY3QiLCJ3aGVyZUluIiwibWFwIiwiciIsInRyYW5zZm9ybUZyb21EQkRhdGEiLCJmaW5kTmVzdGVkQ29sdW1uc0J5SWRzIiwiaWRzIiwidHJhbnNmb3JtVG9EQkRhdGEiLCJkYXRhIiwiRXJyb3IiLCJ0cmFuc2Zvcm1lZERhdGEiLCJ2YWx1ZSIsImtleSIsImluY2x1ZGVzIiwiSlNPTiIsInN0cmluZ2lmeSIsIl92YWx1ZSIsImNhbWVsQ2FzZURhdGEiLCJmb3JtYXR0ZWREYXRhIiwicGFyc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/modelNestedColumnRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/modelRepository.ts":
/*!***********************************************************!*\
  !*** ./src/apollo/server/repositories/modelRepository.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelRepository: () => (/* binding */ ModelRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n\nclass ModelRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"model\"\n        });\n    }\n    async findAllByIds(ids) {\n        const res = await this.knex(this.tableName).whereIn(\"id\", ids);\n        return res.map((r)=>this.transformFromDBData(r));\n    }\n    async deleteAllBySourceTableNames(sourceTableNames, queryOptions) {\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const builder = executer(this.tableName).whereIn(\"source_table_name\", sourceTableNames).delete();\n        return await builder;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvbW9kZWxSZXBvc2l0b3J5LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBSzBCO0FBc0JuQixNQUFNQyx3QkFDSEQsMkRBQWNBO0lBR3RCRSxZQUFZQyxNQUFZLENBQUU7UUFDeEIsS0FBSyxDQUFDO1lBQUVBO1lBQVFDLFdBQVc7UUFBUTtJQUNyQztJQUNBLE1BQWFDLGFBQWFDLEdBQWEsRUFBRTtRQUN2QyxNQUFNQyxNQUFNLE1BQU0sSUFBSSxDQUFDQyxJQUFJLENBQVEsSUFBSSxDQUFDSixTQUFTLEVBQUVLLE9BQU8sQ0FBQyxNQUFNSDtRQUNqRSxPQUFPQyxJQUFJRyxHQUFHLENBQUMsQ0FBQ0MsSUFBTSxJQUFJLENBQUNDLG1CQUFtQixDQUFDRDtJQUNqRDtJQUVBLE1BQWFFLDRCQUNYQyxnQkFBMEIsRUFDMUJDLFlBQTRCLEVBQzVCO1FBQ0EsTUFBTUMsV0FBV0QsY0FBY0UsS0FBS0YsYUFBYUUsRUFBRSxHQUFHLElBQUksQ0FBQ1QsSUFBSTtRQUMvRCxNQUFNVSxVQUFVRixTQUFTLElBQUksQ0FBQ1osU0FBUyxFQUNwQ0ssT0FBTyxDQUFDLHFCQUFxQkssa0JBQzdCSyxNQUFNO1FBQ1QsT0FBTyxNQUFNRDtJQUNmO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL21vZGVsUmVwb3NpdG9yeS50cz9kMWZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tICdrbmV4JztcbmltcG9ydCB7XG4gIEJhc2VSZXBvc2l0b3J5LFxuICBJQmFzaWNSZXBvc2l0b3J5LFxuICBJUXVlcnlPcHRpb25zLFxufSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbCB7XG4gIGlkOiBudW1iZXI7IC8vIElEXG4gIHByb2plY3RJZDogbnVtYmVyOyAvLyBSZWZlcmVuY2UgdG8gcHJvamVjdC5pZFxuICBkaXNwbGF5TmFtZTogc3RyaW5nOyAvLyBNb2RlbCBuYW1lIGRpc3BsYXllZCBpbiBVSVxuICBzb3VyY2VUYWJsZU5hbWU6IHN0cmluZzsgLy8gdGhlIHRhYmxlIG5hbWUgaW4gdGhlIGRhdGFzb3VyY2VcbiAgcmVmZXJlbmNlTmFtZTogc3RyaW5nOyAvLyB0aGUgbmFtZSB1c2VkIGluIHRoZSBNREwgc3RydWN0dXJlXG4gIHJlZlNxbDogc3RyaW5nOyAvLyBSZWZlcmVuY2UgU1FMXG4gIGNhY2hlZDogYm9vbGVhbjsgLy8gTW9kZWwgaXMgY2FjaGVkIG9yIG5vdFxuICByZWZyZXNoVGltZTogc3RyaW5nIHwgbnVsbDsgLy8gQ29udGFpbiBhIG51bWJlciBmb2xsb3dlZCBieSBhIHRpbWUgdW5pdCAobnMsIHVzLCBtcywgcywgbSwgaCwgZCkuIEZvciBleGFtcGxlLCBcIjJoXCJcbiAgcHJvcGVydGllczogc3RyaW5nIHwgbnVsbDsgLy8gTW9kZWwgcHJvcGVydGllcywgYSBqc29uIHN0cmluZywgdGhlIGRlc2NyaXB0aW9uIGFuZCBkaXNwbGF5TmFtZSBzaG91bGQgYmUgc3RvcmVkIGhlcmVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTW9kZWxSZXBvc2l0b3J5IGV4dGVuZHMgSUJhc2ljUmVwb3NpdG9yeTxNb2RlbD4ge1xuICBmaW5kQWxsQnlJZHMoaWRzOiBudW1iZXJbXSk6IFByb21pc2U8TW9kZWxbXT47XG4gIGRlbGV0ZUFsbEJ5U291cmNlVGFibGVOYW1lcyhcbiAgICBzb3VyY2VUYWJsZU5hbWVzOiBzdHJpbmdbXSxcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApOiBQcm9taXNlPG51bWJlcj47XG59XG5cbmV4cG9ydCBjbGFzcyBNb2RlbFJlcG9zaXRvcnlcbiAgZXh0ZW5kcyBCYXNlUmVwb3NpdG9yeTxNb2RlbD5cbiAgaW1wbGVtZW50cyBJTW9kZWxSZXBvc2l0b3J5XG57XG4gIGNvbnN0cnVjdG9yKGtuZXhQZzogS25leCkge1xuICAgIHN1cGVyKHsga25leFBnLCB0YWJsZU5hbWU6ICdtb2RlbCcgfSk7XG4gIH1cbiAgcHVibGljIGFzeW5jIGZpbmRBbGxCeUlkcyhpZHM6IG51bWJlcltdKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5rbmV4PE1vZGVsPih0aGlzLnRhYmxlTmFtZSkud2hlcmVJbignaWQnLCBpZHMpO1xuICAgIHJldHVybiByZXMubWFwKChyKSA9PiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocikpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlbGV0ZUFsbEJ5U291cmNlVGFibGVOYW1lcyhcbiAgICBzb3VyY2VUYWJsZU5hbWVzOiBzdHJpbmdbXSxcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApIHtcbiAgICBjb25zdCBleGVjdXRlciA9IHF1ZXJ5T3B0aW9ucz8udHggPyBxdWVyeU9wdGlvbnMudHggOiB0aGlzLmtuZXg7XG4gICAgY29uc3QgYnVpbGRlciA9IGV4ZWN1dGVyKHRoaXMudGFibGVOYW1lKVxuICAgICAgLndoZXJlSW4oJ3NvdXJjZV90YWJsZV9uYW1lJywgc291cmNlVGFibGVOYW1lcylcbiAgICAgIC5kZWxldGUoKTtcbiAgICByZXR1cm4gYXdhaXQgYnVpbGRlcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VSZXBvc2l0b3J5IiwiTW9kZWxSZXBvc2l0b3J5IiwiY29uc3RydWN0b3IiLCJrbmV4UGciLCJ0YWJsZU5hbWUiLCJmaW5kQWxsQnlJZHMiLCJpZHMiLCJyZXMiLCJrbmV4Iiwid2hlcmVJbiIsIm1hcCIsInIiLCJ0cmFuc2Zvcm1Gcm9tREJEYXRhIiwiZGVsZXRlQWxsQnlTb3VyY2VUYWJsZU5hbWVzIiwic291cmNlVGFibGVOYW1lcyIsInF1ZXJ5T3B0aW9ucyIsImV4ZWN1dGVyIiwidHgiLCJidWlsZGVyIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/modelRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/projectRepository.ts":
/*!*************************************************************!*\
  !*** ./src/apollo/server/repositories/projectRepository.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProjectRepository: () => (/* binding */ ProjectRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/mapValues */ \"lodash/mapValues\");\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash/isEmpty */ \"lodash/isEmpty\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _server_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @server/types */ \"(api)/./src/apollo/server/types/index.ts\");\n\n\n\n\n\n\n\n\nclass ProjectRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"project\"\n        });\n        this.jsonTypeColumns = [\n            \"questions\",\n            \"questions_error\",\n            \"connection_info\"\n        ];\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected db data\");\n            }\n            const formattedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(data, (value, key)=>{\n                if (this.jsonTypeColumns.includes(key) && typeof value === \"string\") {\n                    // should return {} if value is null / {}, use value ? {} : JSON.parse(value) will throw error when value is null\n                    return lodash_isEmpty__WEBPACK_IMPORTED_MODULE_6___default()(value) ? {} : JSON.parse(value);\n                }\n                if (key === \"type\") {\n                    return _server_types__WEBPACK_IMPORTED_MODULE_7__.DataSourceName[value];\n                }\n                return value;\n            });\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(formattedData, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n            return camelCaseData;\n        };\n        this.transformToDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected db data\");\n            }\n            const snakeCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(data, (_value, key)=>lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default()(key));\n            const formattedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(snakeCaseData, (value, key)=>{\n                if (this.jsonTypeColumns.includes(key) && typeof value !== \"string\") {\n                    return JSON.stringify(value);\n                }\n                return value;\n            });\n            return formattedData;\n        };\n    }\n    async getCurrentProject() {\n        const projects = await this.findAll({\n            order: \"id\",\n            limit: 1\n        });\n        if (!projects.length) {\n            throw new Error(\"No project found\");\n        }\n        return projects[0];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvcHJvamVjdFJlcG9zaXRvcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ29FO0FBUXBEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUMrQjtBQXNHeEMsTUFBTVEsMEJBQ0hSLDJEQUFjQTtJQUt0QlMsWUFBWUMsTUFBWSxDQUFFO1FBQ3hCLEtBQUssQ0FBQztZQUFFQTtZQUFRQyxXQUFXO1FBQVU7YUFIL0JDLGtCQUFrQjtZQUFDO1lBQWE7WUFBbUI7U0FBa0I7YUFpQjdEQyxzQkFBOEMsQ0FBQ0M7WUFDN0QsSUFBSSxDQUFDWiwyREFBYUEsQ0FBQ1ksT0FBTztnQkFDeEIsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBQ0EsTUFBTUMsZ0JBQWdCWix1REFBU0EsQ0FBQ1UsTUFBTSxDQUFDRyxPQUFPQztnQkFDNUMsSUFBSSxJQUFJLENBQUNOLGVBQWUsQ0FBQ08sUUFBUSxDQUFDRCxRQUFRLE9BQU9ELFVBQVUsVUFBVTtvQkFDbkUsaUhBQWlIO29CQUNqSCxPQUFPWCxxREFBT0EsQ0FBQ1csU0FBUyxDQUFDLElBQUlHLEtBQUtDLEtBQUssQ0FBQ0o7Z0JBQzFDO2dCQUNBLElBQUlDLFFBQVEsUUFBUTtvQkFDbEIsT0FBT1gseURBQWMsQ0FBQ1UsTUFBTTtnQkFDOUI7Z0JBQ0EsT0FBT0E7WUFDVDtZQUNBLE1BQU1LLGdCQUFnQm5CLHFEQUFPQSxDQUFDYSxlQUFlLENBQUNPLFFBQVFMLE1BQ3BEakIsdURBQVNBLENBQUNpQjtZQUVaLE9BQU9JO1FBQ1Q7YUFFZ0JFLG9CQUE0QyxDQUMxRFY7WUFFQSxJQUFJLENBQUNaLDJEQUFhQSxDQUFDWSxPQUFPO2dCQUN4QixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFDQSxNQUFNVSxnQkFBZ0J0QixxREFBT0EsQ0FBQ1csTUFBTSxDQUFDUyxRQUFRTCxNQUFRYix1REFBU0EsQ0FBQ2E7WUFDL0QsTUFBTUYsZ0JBQWdCWix1REFBU0EsQ0FBQ3FCLGVBQWUsQ0FBQ1IsT0FBT0M7Z0JBQ3JELElBQUksSUFBSSxDQUFDTixlQUFlLENBQUNPLFFBQVEsQ0FBQ0QsUUFBUSxPQUFPRCxVQUFVLFVBQVU7b0JBQ25FLE9BQU9HLEtBQUtNLFNBQVMsQ0FBQ1Q7Z0JBQ3hCO2dCQUNBLE9BQU9BO1lBQ1Q7WUFDQSxPQUFPRDtRQUNUO0lBL0NBO0lBRUEsTUFBYVcsb0JBQW9CO1FBQy9CLE1BQU1DLFdBQVcsTUFBTSxJQUFJLENBQUNDLE9BQU8sQ0FBQztZQUNsQ0MsT0FBTztZQUNQQyxPQUFPO1FBQ1Q7UUFDQSxJQUFJLENBQUNILFNBQVNJLE1BQU0sRUFBRTtZQUNwQixNQUFNLElBQUlqQixNQUFNO1FBQ2xCO1FBQ0EsT0FBT2EsUUFBUSxDQUFDLEVBQUU7SUFDcEI7QUFxQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL3Byb2plY3RSZXBvc2l0b3J5LnRzP2QwNDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS25leCB9IGZyb20gJ2tuZXgnO1xuaW1wb3J0IHsgQmFzZVJlcG9zaXRvcnksIElCYXNpY1JlcG9zaXRvcnkgfSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcbmltcG9ydCB7XG4gIGNhbWVsQ2FzZSxcbiAgaXNQbGFpbk9iamVjdCxcbiAgbWFwS2V5cyxcbiAgbWFwVmFsdWVzLFxuICBzbmFrZUNhc2UsXG4gIGlzRW1wdHksXG59IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBEYXRhU291cmNlTmFtZSB9IGZyb20gJ0BzZXJ2ZXIvdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJJR19RVUVSWV9DT05ORUNUSU9OX0lORk8ge1xuICBwcm9qZWN0SWQ6IHN0cmluZztcbiAgZGF0YXNldElkOiBzdHJpbmc7XG4gIGNyZWRlbnRpYWxzOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIFBPU1RHUkVTX0NPTk5FQ1RJT05fSU5GTyB7XG4gIGhvc3Q6IHN0cmluZztcbiAgcG9ydDogbnVtYmVyO1xuICB1c2VyOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIGRhdGFiYXNlOiBzdHJpbmc7XG4gIHNzbDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNWVNRTF9DT05ORUNUSU9OX0lORk8ge1xuICBob3N0OiBzdHJpbmc7XG4gIHBvcnQ6IG51bWJlcjtcbiAgdXNlcjogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBkYXRhYmFzZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1TX1NRTF9DT05ORUNUSU9OX0lORk8ge1xuICBob3N0OiBzdHJpbmc7XG4gIHBvcnQ6IG51bWJlcjtcbiAgdXNlcjogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBkYXRhYmFzZTogc3RyaW5nO1xuICB0cnVzdFNlcnZlckNlcnRpZmljYXRlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENMSUNLX0hPVVNFX0NPTk5FQ1RJT05fSU5GTyB7XG4gIGhvc3Q6IHN0cmluZztcbiAgcG9ydDogbnVtYmVyO1xuICB1c2VyOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIGRhdGFiYXNlOiBzdHJpbmc7XG4gIHNzbDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUUklOT19DT05ORUNUSU9OX0lORk8ge1xuICBob3N0OiBzdHJpbmc7XG4gIHBvcnQ6IG51bWJlcjtcbiAgc2NoZW1hczogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBzc2w6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU05PV0ZMQUtFX0NPTk5FQ1RJT05fSU5GTyB7XG4gIHVzZXI6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgYWNjb3VudDogc3RyaW5nO1xuICBkYXRhYmFzZTogc3RyaW5nO1xuICBzY2hlbWE6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEVUNLREJfQ09OTkVDVElPTl9JTkZPIHtcbiAgaW5pdFNxbDogc3RyaW5nO1xuICBleHRlbnNpb25zOiBBcnJheTxzdHJpbmc+O1xuICBjb25maWd1cmF0aW9uczogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IHR5cGUgV1JFTl9BSV9DT05ORUNUSU9OX0lORk8gPVxuICB8IEJJR19RVUVSWV9DT05ORUNUSU9OX0lORk9cbiAgfCBQT1NUR1JFU19DT05ORUNUSU9OX0lORk9cbiAgfCBNWVNRTF9DT05ORUNUSU9OX0lORk9cbiAgfCBEVUNLREJfQ09OTkVDVElPTl9JTkZPXG4gIHwgTVNfU1FMX0NPTk5FQ1RJT05fSU5GT1xuICB8IENMSUNLX0hPVVNFX0NPTk5FQ1RJT05fSU5GT1xuICB8IFRSSU5PX0NPTk5FQ1RJT05fSU5GT1xuICB8IFNOT1dGTEFLRV9DT05ORUNUSU9OX0lORk87XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb21tZW5kYXRpb25RdWVzdGlvblJlc3VsdCB7XG4gIHF1ZXN0aW9uOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBzdHJpbmc7IC8vIGNhdGVnb3J5IGZvciB0aGUgcXVlc3Rpb25cbiAgc3FsOiBzdHJpbmc7IC8vIHZhbGlkYXRlZCBzcWwgZm9yIHRoaXMgcXVlc3Rpb24sIGNhbiBiZSB1c2VkIGluIGdlbmVyYXRlQXNrRGV0YWlsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvamVjdCB7XG4gIGlkOiBudW1iZXI7IC8vIElEXG4gIHR5cGU6IERhdGFTb3VyY2VOYW1lOyAvLyBQcm9qZWN0IGRhdGFzb3VyY2UgdHlwZS4gZXg6IGJpZ3F1ZXJ5LCBteXNxbCwgcG9zdGdyZXNxbCwgbW9uZ29kYiwgZXRjXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7IC8vIFByb2plY3QgZGlzcGxheSBuYW1lXG4gIGNhdGFsb2c6IHN0cmluZzsgLy8gQ2F0YWxvZyBuYW1lXG4gIHNjaGVtYTogc3RyaW5nOyAvLyBTY2hlbWEgbmFtZVxuICBzYW1wbGVEYXRhc2V0OiBzdHJpbmc7IC8vIFNhbXBsZSBkYXRhc2V0IG5hbWVcbiAgY29ubmVjdGlvbkluZm86IFdSRU5fQUlfQ09OTkVDVElPTl9JTkZPO1xuICBsYW5ndWFnZT86IHN0cmluZzsgLy8gUHJvamVjdCBsYW5ndWFnZVxuXG4gIC8vIFRoZSByZWNvbW1lbmRlZCBxdWVzdGlvbnMgZ2VuZXJhdGVkIGJ5IEFJXG4gIHF1ZXJ5SWQ/OiBzdHJpbmc7XG4gIHF1ZXN0aW9ucz86IFJlY29tbWVuZGF0aW9uUXVlc3Rpb25SZXN1bHRbXTtcbiAgcXVlc3Rpb25zU3RhdHVzPzogc3RyaW5nO1xuICBxdWVzdGlvbnNFcnJvcj86IG9iamVjdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUHJvamVjdFJlcG9zaXRvcnkgZXh0ZW5kcyBJQmFzaWNSZXBvc2l0b3J5PFByb2plY3Q+IHtcbiAgZ2V0Q3VycmVudFByb2plY3Q6ICgpID0+IFByb21pc2U8UHJvamVjdD47XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9qZWN0UmVwb3NpdG9yeVxuICBleHRlbmRzIEJhc2VSZXBvc2l0b3J5PFByb2plY3Q+XG4gIGltcGxlbWVudHMgSVByb2plY3RSZXBvc2l0b3J5XG57XG4gIHByaXZhdGUganNvblR5cGVDb2x1bW5zID0gWydxdWVzdGlvbnMnLCAncXVlc3Rpb25zX2Vycm9yJywgJ2Nvbm5lY3Rpb25faW5mbyddO1xuXG4gIGNvbnN0cnVjdG9yKGtuZXhQZzogS25leCkge1xuICAgIHN1cGVyKHsga25leFBnLCB0YWJsZU5hbWU6ICdwcm9qZWN0JyB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRDdXJyZW50UHJvamVjdCgpIHtcbiAgICBjb25zdCBwcm9qZWN0cyA9IGF3YWl0IHRoaXMuZmluZEFsbCh7XG4gICAgICBvcmRlcjogJ2lkJyxcbiAgICAgIGxpbWl0OiAxLFxuICAgIH0pO1xuICAgIGlmICghcHJvamVjdHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHByb2plY3QgZm91bmQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb2plY3RzWzBdO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIHRyYW5zZm9ybUZyb21EQkRhdGE6IChkYXRhOiBhbnkpID0+IFByb2plY3QgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZGIgZGF0YScpO1xuICAgIH1cbiAgICBjb25zdCBmb3JtYXR0ZWREYXRhID0gbWFwVmFsdWVzKGRhdGEsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBpZiAodGhpcy5qc29uVHlwZUNvbHVtbnMuaW5jbHVkZXMoa2V5KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIHNob3VsZCByZXR1cm4ge30gaWYgdmFsdWUgaXMgbnVsbCAvIHt9LCB1c2UgdmFsdWUgPyB7fSA6IEpTT04ucGFyc2UodmFsdWUpIHdpbGwgdGhyb3cgZXJyb3Igd2hlbiB2YWx1ZSBpcyBudWxsXG4gICAgICAgIHJldHVybiBpc0VtcHR5KHZhbHVlKSA/IHt9IDogSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSAndHlwZScpIHtcbiAgICAgICAgcmV0dXJuIERhdGFTb3VyY2VOYW1lW3ZhbHVlXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KTtcbiAgICBjb25zdCBjYW1lbENhc2VEYXRhID0gbWFwS2V5cyhmb3JtYXR0ZWREYXRhLCAoX3ZhbHVlLCBrZXkpID0+XG4gICAgICBjYW1lbENhc2Uoa2V5KSxcbiAgICApO1xuICAgIHJldHVybiBjYW1lbENhc2VEYXRhIGFzIFByb2plY3Q7XG4gIH07XG5cbiAgcHVibGljIG92ZXJyaWRlIHRyYW5zZm9ybVRvREJEYXRhOiAoZGF0YTogUHJvamVjdCkgPT4gYW55ID0gKFxuICAgIGRhdGE6IFByb2plY3QsXG4gICkgPT4ge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGRiIGRhdGEnKTtcbiAgICB9XG4gICAgY29uc3Qgc25ha2VDYXNlRGF0YSA9IG1hcEtleXMoZGF0YSwgKF92YWx1ZSwga2V5KSA9PiBzbmFrZUNhc2Uoa2V5KSk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0YSA9IG1hcFZhbHVlcyhzbmFrZUNhc2VEYXRhLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaWYgKHRoaXMuanNvblR5cGVDb2x1bW5zLmluY2x1ZGVzKGtleSkgJiYgdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtYXR0ZWREYXRhO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbIkJhc2VSZXBvc2l0b3J5IiwiY2FtZWxDYXNlIiwiaXNQbGFpbk9iamVjdCIsIm1hcEtleXMiLCJtYXBWYWx1ZXMiLCJzbmFrZUNhc2UiLCJpc0VtcHR5IiwiRGF0YVNvdXJjZU5hbWUiLCJQcm9qZWN0UmVwb3NpdG9yeSIsImNvbnN0cnVjdG9yIiwia25leFBnIiwidGFibGVOYW1lIiwianNvblR5cGVDb2x1bW5zIiwidHJhbnNmb3JtRnJvbURCRGF0YSIsImRhdGEiLCJFcnJvciIsImZvcm1hdHRlZERhdGEiLCJ2YWx1ZSIsImtleSIsImluY2x1ZGVzIiwiSlNPTiIsInBhcnNlIiwiY2FtZWxDYXNlRGF0YSIsIl92YWx1ZSIsInRyYW5zZm9ybVRvREJEYXRhIiwic25ha2VDYXNlRGF0YSIsInN0cmluZ2lmeSIsImdldEN1cnJlbnRQcm9qZWN0IiwicHJvamVjdHMiLCJmaW5kQWxsIiwib3JkZXIiLCJsaW1pdCIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/projectRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/relationshipRepository.ts":
/*!******************************************************************!*\
  !*** ./src/apollo/server/repositories/relationshipRepository.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RelationRepository: () => (/* binding */ RelationRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n\nclass RelationRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"relation\"\n        });\n    }\n    async findRelationsBy({ columnIds, modelIds }, queryOptions) {\n        let executer = this.knex;\n        if (queryOptions && queryOptions.tx) {\n            const { tx } = queryOptions;\n            executer = tx;\n        }\n        // select the leftModel name and rightModel name along with relation\n        const builder = executer(this.tableName).join(\"model_column AS fmc\", `${this.tableName}.from_column_id`, \"=\", \"fmc.id\").join(\"model_column AS tmc\", `${this.tableName}.to_column_id`, \"=\", \"tmc.id\");\n        if (columnIds && columnIds.length > 0) {\n            builder.whereIn(`${this.tableName}.from_column_id`, columnIds).orWhereIn(`${this.tableName}.to_column_id`, columnIds);\n        }\n        if (modelIds && modelIds.length > 0) {\n            builder.whereIn(\"fmc.model_id\", modelIds).orWhereIn(\"tmc.model_id\", modelIds);\n        }\n        const result = await builder.select(`${this.tableName}.*`, \"fmc.model_id AS fromModelId\", \"tmc.model_id AS toModelId\");\n        return result.map((r)=>this.transformFromDBData(r));\n    }\n    async findRelationsByIds(ids, queryOptions) {\n        let executer = this.knex;\n        if (queryOptions && queryOptions.tx) {\n            const { tx } = queryOptions;\n            executer = tx;\n        }\n        const result = await executer(this.tableName).whereIn(\"id\", ids).select(\"*\");\n        return result.map((r)=>this.transformFromDBData(r));\n    }\n    async deleteRelationsByColumnIds(columnIds, queryOptions) {\n        if (queryOptions && queryOptions.tx) {\n            const { tx } = queryOptions;\n            await tx(this.tableName).whereIn(\"from_column_id\", columnIds).orWhereIn(\"to_column_id\", columnIds).delete();\n            return;\n        }\n        await this.knex(this.tableName).whereIn(\"from_column_id\", columnIds).orWhereIn(\"to_column_id\", columnIds).delete();\n    }\n    async findRelationInfoBy(filter, queryOptions) {\n        const { projectId, columnIds, modelIds } = filter;\n        let executer = this.knex;\n        if (queryOptions && queryOptions.tx) {\n            const { tx } = queryOptions;\n            executer = tx;\n        }\n        // select the leftModel name and rightModel name along with relation\n        const builder = executer(this.tableName).join(\"model_column AS fmc\", `${this.tableName}.from_column_id`, \"=\", \"fmc.id\").join(\"model_column AS tmc\", `${this.tableName}.to_column_id`, \"=\", \"tmc.id\").join(\"model AS fm\", \"fmc.model_id\", \"=\", \"fm.id\").join(\"model AS tm\", \"tmc.model_id\", \"=\", \"tm.id\");\n        if (projectId) {\n            builder.where(`${this.tableName}.project_id`, projectId);\n        } else if (columnIds && columnIds.length > 0) {\n            builder.whereIn(`${this.tableName}.from_column_id`, columnIds).orWhereIn(`${this.tableName}.to_column_id`, columnIds);\n        } else if (modelIds && modelIds.length > 0) {\n            builder.whereIn(\"fmc.model_id\", modelIds).orWhereIn(\"tmc.model_id\", modelIds);\n        }\n        const result = await builder.select(`${this.tableName}.*`, \"fm.id AS fromModelId\", \"fm.reference_name AS fromModelName\", \"fm.display_name AS fromModelDisplayName\", \"tm.id AS toModelId\", \"tm.reference_name AS toModelName\", \"tm.display_name AS toModelDisplayName\", \"fmc.reference_name AS fromColumnName\", \"fmc.display_name AS fromColumnDisplayName\", \"tmc.reference_name AS toColumnName\", \"tmc.display_name AS toColumnDisplayName\");\n        return result.map((r)=>this.transformFromDBData(r));\n    }\n    async findExistedRelationBetweenModels(relation) {\n        const { fromModelId, fromColumnId, toModelId, toColumnId } = relation;\n        const query = this.knex(this.tableName).join(\"model_column AS fmc\", `${this.tableName}.from_column_id`, \"=\", \"fmc.id\").join(\"model_column AS tmc\", `${this.tableName}.to_column_id`, \"=\", \"tmc.id\")// duplicate relationship check\n        .whereRaw(`fmc.model_id = ? And ${this.tableName}.from_column_id = ? And tmc.model_id = ? And ${this.tableName}.to_column_id = ?`, [\n            fromModelId,\n            fromColumnId,\n            toModelId,\n            toColumnId\n        ])// reverse relationship check\n        .orWhereRaw(`fmc.model_id = ? And ${this.tableName}.from_column_id = ? And tmc.model_id = ? And ${this.tableName}.to_column_id = ?`, [\n            toModelId,\n            toColumnId,\n            fromModelId,\n            fromColumnId\n        ]).select(`${this.tableName}.*`);\n        const result = await query;\n        return result.map((r)=>this.transformFromDBData(r));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvcmVsYXRpb25zaGlwUmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUswQjtBQXVEbkIsTUFBTUMsMkJBQ0hELDJEQUFjQTtJQUd0QkUsWUFBWUMsTUFBWSxDQUFFO1FBQ3hCLEtBQUssQ0FBQztZQUFFQTtZQUFRQyxXQUFXO1FBQVc7SUFDeEM7SUFFQSxNQUFhQyxnQkFDWCxFQUFFQyxTQUFTLEVBQUVDLFFBQVEsRUFBRSxFQUN2QkMsWUFBNEIsRUFDNUI7UUFDQSxJQUFJQyxXQUFXLElBQUksQ0FBQ0MsSUFBSTtRQUN4QixJQUFJRixnQkFBZ0JBLGFBQWFHLEVBQUUsRUFBRTtZQUNuQyxNQUFNLEVBQUVBLEVBQUUsRUFBRSxHQUFHSDtZQUNmQyxXQUFXRTtRQUNiO1FBQ0Esb0VBQW9FO1FBQ3BFLE1BQU1DLFVBQVVILFNBQVMsSUFBSSxDQUFDTCxTQUFTLEVBQ3BDUyxJQUFJLENBQ0gsdUJBQ0EsQ0FBQyxFQUFFLElBQUksQ0FBQ1QsU0FBUyxDQUFDLGVBQWUsQ0FBQyxFQUNsQyxLQUNBLFVBRURTLElBQUksQ0FDSCx1QkFDQSxDQUFDLEVBQUUsSUFBSSxDQUFDVCxTQUFTLENBQUMsYUFBYSxDQUFDLEVBQ2hDLEtBQ0E7UUFFSixJQUFJRSxhQUFhQSxVQUFVUSxNQUFNLEdBQUcsR0FBRztZQUNyQ0YsUUFDR0csT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNYLFNBQVMsQ0FBQyxlQUFlLENBQUMsRUFBRUUsV0FDNUNVLFNBQVMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDWixTQUFTLENBQUMsYUFBYSxDQUFDLEVBQUVFO1FBQ2pEO1FBQ0EsSUFBSUMsWUFBWUEsU0FBU08sTUFBTSxHQUFHLEdBQUc7WUFDbkNGLFFBQ0dHLE9BQU8sQ0FBQyxnQkFBZ0JSLFVBQ3hCUyxTQUFTLENBQUMsZ0JBQWdCVDtRQUMvQjtRQUVBLE1BQU1VLFNBQVMsTUFBTUwsUUFBUU0sTUFBTSxDQUNqQyxDQUFDLEVBQUUsSUFBSSxDQUFDZCxTQUFTLENBQUMsRUFBRSxDQUFDLEVBQ3JCLCtCQUNBO1FBRUYsT0FBT2EsT0FBT0UsR0FBRyxDQUFDLENBQUNDLElBQU0sSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQ0Q7SUFDcEQ7SUFFQSxNQUFhRSxtQkFBbUJDLEdBQWEsRUFBRWYsWUFBNEIsRUFBRTtRQUMzRSxJQUFJQyxXQUFXLElBQUksQ0FBQ0MsSUFBSTtRQUN4QixJQUFJRixnQkFBZ0JBLGFBQWFHLEVBQUUsRUFBRTtZQUNuQyxNQUFNLEVBQUVBLEVBQUUsRUFBRSxHQUFHSDtZQUNmQyxXQUFXRTtRQUNiO1FBRUEsTUFBTU0sU0FBUyxNQUFNUixTQUFTLElBQUksQ0FBQ0wsU0FBUyxFQUN6Q1csT0FBTyxDQUFDLE1BQU1RLEtBQ2RMLE1BQU0sQ0FBQztRQUNWLE9BQU9ELE9BQU9FLEdBQUcsQ0FBQyxDQUFDQyxJQUFNLElBQUksQ0FBQ0MsbUJBQW1CLENBQUNEO0lBQ3BEO0lBRUEsTUFBYUksMkJBQ1hsQixTQUFtQixFQUNuQkUsWUFBNEIsRUFDNUI7UUFDQSxJQUFJQSxnQkFBZ0JBLGFBQWFHLEVBQUUsRUFBRTtZQUNuQyxNQUFNLEVBQUVBLEVBQUUsRUFBRSxHQUFHSDtZQUNmLE1BQU1HLEdBQUcsSUFBSSxDQUFDUCxTQUFTLEVBQ3BCVyxPQUFPLENBQUMsa0JBQWtCVCxXQUMxQlUsU0FBUyxDQUFDLGdCQUFnQlYsV0FDMUJtQixNQUFNO1lBQ1Q7UUFDRjtRQUNBLE1BQU0sSUFBSSxDQUFDZixJQUFJLENBQUMsSUFBSSxDQUFDTixTQUFTLEVBQzNCVyxPQUFPLENBQUMsa0JBQWtCVCxXQUMxQlUsU0FBUyxDQUFDLGdCQUFnQlYsV0FDMUJtQixNQUFNO0lBQ1g7SUFFQSxNQUFhQyxtQkFBbUJDLE1BQU0sRUFBRW5CLFlBQVksRUFBRTtRQUNwRCxNQUFNLEVBQUVvQixTQUFTLEVBQUV0QixTQUFTLEVBQUVDLFFBQVEsRUFBRSxHQUFHb0I7UUFDM0MsSUFBSWxCLFdBQVcsSUFBSSxDQUFDQyxJQUFJO1FBQ3hCLElBQUlGLGdCQUFnQkEsYUFBYUcsRUFBRSxFQUFFO1lBQ25DLE1BQU0sRUFBRUEsRUFBRSxFQUFFLEdBQUdIO1lBQ2ZDLFdBQVdFO1FBQ2I7UUFDQSxvRUFBb0U7UUFDcEUsTUFBTUMsVUFBVUgsU0FBUyxJQUFJLENBQUNMLFNBQVMsRUFDcENTLElBQUksQ0FDSCx1QkFDQSxDQUFDLEVBQUUsSUFBSSxDQUFDVCxTQUFTLENBQUMsZUFBZSxDQUFDLEVBQ2xDLEtBQ0EsVUFFRFMsSUFBSSxDQUNILHVCQUNBLENBQUMsRUFBRSxJQUFJLENBQUNULFNBQVMsQ0FBQyxhQUFhLENBQUMsRUFDaEMsS0FDQSxVQUVEUyxJQUFJLENBQUMsZUFBZSxnQkFBZ0IsS0FBSyxTQUN6Q0EsSUFBSSxDQUFDLGVBQWUsZ0JBQWdCLEtBQUs7UUFFNUMsSUFBSWUsV0FBVztZQUNiaEIsUUFBUWlCLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDekIsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFFd0I7UUFDaEQsT0FBTyxJQUFJdEIsYUFBYUEsVUFBVVEsTUFBTSxHQUFHLEdBQUc7WUFDNUNGLFFBQ0dHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDWCxTQUFTLENBQUMsZUFBZSxDQUFDLEVBQUVFLFdBQzVDVSxTQUFTLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ1osU0FBUyxDQUFDLGFBQWEsQ0FBQyxFQUFFRTtRQUNqRCxPQUFPLElBQUlDLFlBQVlBLFNBQVNPLE1BQU0sR0FBRyxHQUFHO1lBQzFDRixRQUNHRyxPQUFPLENBQUMsZ0JBQWdCUixVQUN4QlMsU0FBUyxDQUFDLGdCQUFnQlQ7UUFDL0I7UUFFQSxNQUFNVSxTQUFTLE1BQU1MLFFBQVFNLE1BQU0sQ0FDakMsQ0FBQyxFQUFFLElBQUksQ0FBQ2QsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUNyQix3QkFDQSxzQ0FDQSwyQ0FDQSxzQkFDQSxvQ0FDQSx5Q0FDQSx3Q0FDQSw2Q0FDQSxzQ0FDQTtRQUVGLE9BQU9hLE9BQU9FLEdBQUcsQ0FBQyxDQUFDQyxJQUFNLElBQUksQ0FBQ0MsbUJBQW1CLENBQUNEO0lBQ3BEO0lBRUEsTUFBYVUsaUNBQWlDQyxRQUFzQixFQUFFO1FBQ3BFLE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxZQUFZLEVBQUVDLFNBQVMsRUFBRUMsVUFBVSxFQUFFLEdBQUdKO1FBQzdELE1BQU1LLFFBQVEsSUFBSSxDQUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQ04sU0FBUyxFQUNuQ1MsSUFBSSxDQUNILHVCQUNBLENBQUMsRUFBRSxJQUFJLENBQUNULFNBQVMsQ0FBQyxlQUFlLENBQUMsRUFDbEMsS0FDQSxVQUVEUyxJQUFJLENBQ0gsdUJBQ0EsQ0FBQyxFQUFFLElBQUksQ0FBQ1QsU0FBUyxDQUFDLGFBQWEsQ0FBQyxFQUNoQyxLQUNBLFNBRUYsK0JBQStCO1NBQzlCaUMsUUFBUSxDQUNQLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDakMsU0FBUyxDQUFDLDZDQUE2QyxFQUFFLElBQUksQ0FBQ0EsU0FBUyxDQUFDLGlCQUFpQixDQUFDLEVBQ3ZIO1lBQUM0QjtZQUFhQztZQUFjQztZQUFXQztTQUFXLENBRXBELDZCQUE2QjtTQUM1QkcsVUFBVSxDQUNULENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDbEMsU0FBUyxDQUFDLDZDQUE2QyxFQUFFLElBQUksQ0FBQ0EsU0FBUyxDQUFDLGlCQUFpQixDQUFDLEVBQ3ZIO1lBQUM4QjtZQUFXQztZQUFZSDtZQUFhQztTQUFhLEVBRW5EZixNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ2QsU0FBUyxDQUFDLEVBQUUsQ0FBQztRQUMvQixNQUFNYSxTQUFTLE1BQU1tQjtRQUNyQixPQUFPbkIsT0FBT0UsR0FBRyxDQUFDLENBQUNDLElBQU0sSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQ0Q7SUFDcEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvcmVsYXRpb25zaGlwUmVwb3NpdG9yeS50cz9iZmEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tICdrbmV4JztcbmltcG9ydCB7XG4gIEJhc2VSZXBvc2l0b3J5LFxuICBJQmFzaWNSZXBvc2l0b3J5LFxuICBJUXVlcnlPcHRpb25zLFxufSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcbmltcG9ydCB7IFJlbGF0aW9uRGF0YSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBSZWxhdGlvbiB7XG4gIGlkOiBudW1iZXI7IC8vIElEXG4gIHByb2plY3RJZDogbnVtYmVyOyAvLyBSZWZlcmVuY2UgdG8gcHJvamVjdC5pZFxuICBuYW1lOiBzdHJpbmc7IC8vIFJlbGF0aW9uIG5hbWVcbiAgam9pblR5cGU6IHN0cmluZzsgLy8gSm9pbiB0eXBlLCBlZzpcIk1BTllfVE9fT05FXCIsIFwiT05FX1RPX01BTllcIiwgXCJNQU5ZX1RPX01BTllcIlxuICBjb25kaXRpb246IHN0cmluZzsgLy8gSm9pbiBjb25kaXRpb24sIGV4OiBcIk9yZGVyc01vZGVsLmN1c3RrZXkgPSBDdXN0b21lck1vZGVsLmN1c3RrZXlcIlxuICBmcm9tQ29sdW1uSWQ6IG51bWJlcjsgLy8gZnJvbSBjb2x1bW4gaWQsIFwie2Zyb21Db2x1bW59IHtqb2luVHlwZX0ge3RvQ29sdW1ufVwiXG4gIHRvQ29sdW1uSWQ6IG51bWJlcjsgLy8gdG8gY29sdW1uIGlkLCBcIntmcm9tQ29sdW1ufSB7am9pblR5cGV9IHt0b0NvbHVtbn1cIlxuICBwcm9wZXJ0aWVzOiBzdHJpbmcgfCBudWxsOyAvLyBNb2RlbCBwcm9wZXJ0aWVzLCBhIGpzb24gc3RyaW5nLCB0aGUgZGVzY3JpcHRpb24gc2hvdWxkIGJlIHN0b3JlZCBoZXJlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXh0cmFSZWxhdGlvbkluZm8ge1xuICBmcm9tTW9kZWxJZDogbnVtYmVyO1xuICBmcm9tTW9kZWxOYW1lOiBzdHJpbmc7XG4gIGZyb21Nb2RlbERpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIGZyb21Db2x1bW5OYW1lOiBzdHJpbmc7XG4gIGZyb21Db2x1bW5EaXNwbGF5TmFtZTogc3RyaW5nO1xuICB0b01vZGVsSWQ6IG51bWJlcjtcbiAgdG9Nb2RlbE5hbWU6IHN0cmluZztcbiAgdG9Nb2RlbERpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIHRvQ29sdW1uTmFtZTogc3RyaW5nO1xuICB0b0NvbHVtbkRpc3BsYXlOYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFJlbGF0aW9uSW5mbyA9IFJlbGF0aW9uICYgRXh0cmFSZWxhdGlvbkluZm87XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlbGF0aW9uUmVwb3NpdG9yeSBleHRlbmRzIElCYXNpY1JlcG9zaXRvcnk8UmVsYXRpb24+IHtcbiAgZmluZFJlbGF0aW9uc0J5KFxuICAgIGZpbHRlcjogeyBjb2x1bW5JZHM/OiBudW1iZXJbXTsgbW9kZWxJZHM/OiBudW1iZXJbXSB9LFxuICAgIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMsXG4gICk6IFByb21pc2U8UmVsYXRpb25bXT47XG4gIGZpbmRSZWxhdGlvbnNCeUlkcyhcbiAgICBpZHM6IG51bWJlcltdLFxuICAgIHF1ZXJ5T3B0aW9ucz86IElRdWVyeU9wdGlvbnMsXG4gICk6IFByb21pc2U8UmVsYXRpb25bXT47XG4gIGRlbGV0ZVJlbGF0aW9uc0J5Q29sdW1uSWRzKFxuICAgIGNvbHVtbklkczogbnVtYmVyW10sXG4gICAgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPjtcbiAgZmluZFJlbGF0aW9uSW5mb0J5KFxuICAgIGZpbHRlcjoge1xuICAgICAgcHJvamVjdElkPzogbnVtYmVyO1xuICAgICAgY29sdW1uSWRzPzogbnVtYmVyW107XG4gICAgICBtb2RlbElkcz86IG51bWJlcltdO1xuICAgIH0sXG4gICAgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxSZWxhdGlvbkluZm9bXT47XG4gIGZpbmRFeGlzdGVkUmVsYXRpb25CZXR3ZWVuTW9kZWxzKFxuICAgIHJlbGF0aW9uOiBSZWxhdGlvbkRhdGEsXG4gICk6IFByb21pc2U8UmVsYXRpb25JbmZvW10+O1xufVxuXG5leHBvcnQgY2xhc3MgUmVsYXRpb25SZXBvc2l0b3J5XG4gIGV4dGVuZHMgQmFzZVJlcG9zaXRvcnk8UmVsYXRpb24+XG4gIGltcGxlbWVudHMgSVJlbGF0aW9uUmVwb3NpdG9yeVxue1xuICBjb25zdHJ1Y3RvcihrbmV4UGc6IEtuZXgpIHtcbiAgICBzdXBlcih7IGtuZXhQZywgdGFibGVOYW1lOiAncmVsYXRpb24nIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGZpbmRSZWxhdGlvbnNCeShcbiAgICB7IGNvbHVtbklkcywgbW9kZWxJZHMgfSxcbiAgICBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zLFxuICApIHtcbiAgICBsZXQgZXhlY3V0ZXIgPSB0aGlzLmtuZXg7XG4gICAgaWYgKHF1ZXJ5T3B0aW9ucyAmJiBxdWVyeU9wdGlvbnMudHgpIHtcbiAgICAgIGNvbnN0IHsgdHggfSA9IHF1ZXJ5T3B0aW9ucztcbiAgICAgIGV4ZWN1dGVyID0gdHg7XG4gICAgfVxuICAgIC8vIHNlbGVjdCB0aGUgbGVmdE1vZGVsIG5hbWUgYW5kIHJpZ2h0TW9kZWwgbmFtZSBhbG9uZyB3aXRoIHJlbGF0aW9uXG4gICAgY29uc3QgYnVpbGRlciA9IGV4ZWN1dGVyKHRoaXMudGFibGVOYW1lKVxuICAgICAgLmpvaW4oXG4gICAgICAgICdtb2RlbF9jb2x1bW4gQVMgZm1jJyxcbiAgICAgICAgYCR7dGhpcy50YWJsZU5hbWV9LmZyb21fY29sdW1uX2lkYCxcbiAgICAgICAgJz0nLFxuICAgICAgICAnZm1jLmlkJyxcbiAgICAgIClcbiAgICAgIC5qb2luKFxuICAgICAgICAnbW9kZWxfY29sdW1uIEFTIHRtYycsXG4gICAgICAgIGAke3RoaXMudGFibGVOYW1lfS50b19jb2x1bW5faWRgLFxuICAgICAgICAnPScsXG4gICAgICAgICd0bWMuaWQnLFxuICAgICAgKTtcbiAgICBpZiAoY29sdW1uSWRzICYmIGNvbHVtbklkcy5sZW5ndGggPiAwKSB7XG4gICAgICBidWlsZGVyXG4gICAgICAgIC53aGVyZUluKGAke3RoaXMudGFibGVOYW1lfS5mcm9tX2NvbHVtbl9pZGAsIGNvbHVtbklkcylcbiAgICAgICAgLm9yV2hlcmVJbihgJHt0aGlzLnRhYmxlTmFtZX0udG9fY29sdW1uX2lkYCwgY29sdW1uSWRzKTtcbiAgICB9XG4gICAgaWYgKG1vZGVsSWRzICYmIG1vZGVsSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLndoZXJlSW4oJ2ZtYy5tb2RlbF9pZCcsIG1vZGVsSWRzKVxuICAgICAgICAub3JXaGVyZUluKCd0bWMubW9kZWxfaWQnLCBtb2RlbElkcyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYnVpbGRlci5zZWxlY3QoXG4gICAgICBgJHt0aGlzLnRhYmxlTmFtZX0uKmAsXG4gICAgICAnZm1jLm1vZGVsX2lkIEFTIGZyb21Nb2RlbElkJyxcbiAgICAgICd0bWMubW9kZWxfaWQgQVMgdG9Nb2RlbElkJyxcbiAgICApO1xuICAgIHJldHVybiByZXN1bHQubWFwKChyKSA9PiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocikpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGZpbmRSZWxhdGlvbnNCeUlkcyhpZHM6IG51bWJlcltdLCBxdWVyeU9wdGlvbnM/OiBJUXVlcnlPcHRpb25zKSB7XG4gICAgbGV0IGV4ZWN1dGVyID0gdGhpcy5rbmV4O1xuICAgIGlmIChxdWVyeU9wdGlvbnMgJiYgcXVlcnlPcHRpb25zLnR4KSB7XG4gICAgICBjb25zdCB7IHR4IH0gPSBxdWVyeU9wdGlvbnM7XG4gICAgICBleGVjdXRlciA9IHR4O1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVyKHRoaXMudGFibGVOYW1lKVxuICAgICAgLndoZXJlSW4oJ2lkJywgaWRzKVxuICAgICAgLnNlbGVjdCgnKicpO1xuICAgIHJldHVybiByZXN1bHQubWFwKChyKSA9PiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocikpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlbGV0ZVJlbGF0aW9uc0J5Q29sdW1uSWRzKFxuICAgIGNvbHVtbklkczogbnVtYmVyW10sXG4gICAgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucyxcbiAgKSB7XG4gICAgaWYgKHF1ZXJ5T3B0aW9ucyAmJiBxdWVyeU9wdGlvbnMudHgpIHtcbiAgICAgIGNvbnN0IHsgdHggfSA9IHF1ZXJ5T3B0aW9ucztcbiAgICAgIGF3YWl0IHR4KHRoaXMudGFibGVOYW1lKVxuICAgICAgICAud2hlcmVJbignZnJvbV9jb2x1bW5faWQnLCBjb2x1bW5JZHMpXG4gICAgICAgIC5vcldoZXJlSW4oJ3RvX2NvbHVtbl9pZCcsIGNvbHVtbklkcylcbiAgICAgICAgLmRlbGV0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmtuZXgodGhpcy50YWJsZU5hbWUpXG4gICAgICAud2hlcmVJbignZnJvbV9jb2x1bW5faWQnLCBjb2x1bW5JZHMpXG4gICAgICAub3JXaGVyZUluKCd0b19jb2x1bW5faWQnLCBjb2x1bW5JZHMpXG4gICAgICAuZGVsZXRlKCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmluZFJlbGF0aW9uSW5mb0J5KGZpbHRlciwgcXVlcnlPcHRpb25zKSB7XG4gICAgY29uc3QgeyBwcm9qZWN0SWQsIGNvbHVtbklkcywgbW9kZWxJZHMgfSA9IGZpbHRlcjtcbiAgICBsZXQgZXhlY3V0ZXIgPSB0aGlzLmtuZXg7XG4gICAgaWYgKHF1ZXJ5T3B0aW9ucyAmJiBxdWVyeU9wdGlvbnMudHgpIHtcbiAgICAgIGNvbnN0IHsgdHggfSA9IHF1ZXJ5T3B0aW9ucztcbiAgICAgIGV4ZWN1dGVyID0gdHg7XG4gICAgfVxuICAgIC8vIHNlbGVjdCB0aGUgbGVmdE1vZGVsIG5hbWUgYW5kIHJpZ2h0TW9kZWwgbmFtZSBhbG9uZyB3aXRoIHJlbGF0aW9uXG4gICAgY29uc3QgYnVpbGRlciA9IGV4ZWN1dGVyKHRoaXMudGFibGVOYW1lKVxuICAgICAgLmpvaW4oXG4gICAgICAgICdtb2RlbF9jb2x1bW4gQVMgZm1jJyxcbiAgICAgICAgYCR7dGhpcy50YWJsZU5hbWV9LmZyb21fY29sdW1uX2lkYCxcbiAgICAgICAgJz0nLFxuICAgICAgICAnZm1jLmlkJyxcbiAgICAgIClcbiAgICAgIC5qb2luKFxuICAgICAgICAnbW9kZWxfY29sdW1uIEFTIHRtYycsXG4gICAgICAgIGAke3RoaXMudGFibGVOYW1lfS50b19jb2x1bW5faWRgLFxuICAgICAgICAnPScsXG4gICAgICAgICd0bWMuaWQnLFxuICAgICAgKVxuICAgICAgLmpvaW4oJ21vZGVsIEFTIGZtJywgJ2ZtYy5tb2RlbF9pZCcsICc9JywgJ2ZtLmlkJylcbiAgICAgIC5qb2luKCdtb2RlbCBBUyB0bScsICd0bWMubW9kZWxfaWQnLCAnPScsICd0bS5pZCcpO1xuXG4gICAgaWYgKHByb2plY3RJZCkge1xuICAgICAgYnVpbGRlci53aGVyZShgJHt0aGlzLnRhYmxlTmFtZX0ucHJvamVjdF9pZGAsIHByb2plY3RJZCk7XG4gICAgfSBlbHNlIGlmIChjb2x1bW5JZHMgJiYgY29sdW1uSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLndoZXJlSW4oYCR7dGhpcy50YWJsZU5hbWV9LmZyb21fY29sdW1uX2lkYCwgY29sdW1uSWRzKVxuICAgICAgICAub3JXaGVyZUluKGAke3RoaXMudGFibGVOYW1lfS50b19jb2x1bW5faWRgLCBjb2x1bW5JZHMpO1xuICAgIH0gZWxzZSBpZiAobW9kZWxJZHMgJiYgbW9kZWxJZHMubGVuZ3RoID4gMCkge1xuICAgICAgYnVpbGRlclxuICAgICAgICAud2hlcmVJbignZm1jLm1vZGVsX2lkJywgbW9kZWxJZHMpXG4gICAgICAgIC5vcldoZXJlSW4oJ3RtYy5tb2RlbF9pZCcsIG1vZGVsSWRzKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBidWlsZGVyLnNlbGVjdChcbiAgICAgIGAke3RoaXMudGFibGVOYW1lfS4qYCxcbiAgICAgICdmbS5pZCBBUyBmcm9tTW9kZWxJZCcsXG4gICAgICAnZm0ucmVmZXJlbmNlX25hbWUgQVMgZnJvbU1vZGVsTmFtZScsXG4gICAgICAnZm0uZGlzcGxheV9uYW1lIEFTIGZyb21Nb2RlbERpc3BsYXlOYW1lJyxcbiAgICAgICd0bS5pZCBBUyB0b01vZGVsSWQnLFxuICAgICAgJ3RtLnJlZmVyZW5jZV9uYW1lIEFTIHRvTW9kZWxOYW1lJyxcbiAgICAgICd0bS5kaXNwbGF5X25hbWUgQVMgdG9Nb2RlbERpc3BsYXlOYW1lJyxcbiAgICAgICdmbWMucmVmZXJlbmNlX25hbWUgQVMgZnJvbUNvbHVtbk5hbWUnLFxuICAgICAgJ2ZtYy5kaXNwbGF5X25hbWUgQVMgZnJvbUNvbHVtbkRpc3BsYXlOYW1lJyxcbiAgICAgICd0bWMucmVmZXJlbmNlX25hbWUgQVMgdG9Db2x1bW5OYW1lJyxcbiAgICAgICd0bWMuZGlzcGxheV9uYW1lIEFTIHRvQ29sdW1uRGlzcGxheU5hbWUnLFxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdC5tYXAoKHIpID0+IHRoaXMudHJhbnNmb3JtRnJvbURCRGF0YShyKSkgYXMgUmVsYXRpb25JbmZvW107XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmluZEV4aXN0ZWRSZWxhdGlvbkJldHdlZW5Nb2RlbHMocmVsYXRpb246IFJlbGF0aW9uRGF0YSkge1xuICAgIGNvbnN0IHsgZnJvbU1vZGVsSWQsIGZyb21Db2x1bW5JZCwgdG9Nb2RlbElkLCB0b0NvbHVtbklkIH0gPSByZWxhdGlvbjtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMua25leCh0aGlzLnRhYmxlTmFtZSlcbiAgICAgIC5qb2luKFxuICAgICAgICAnbW9kZWxfY29sdW1uIEFTIGZtYycsXG4gICAgICAgIGAke3RoaXMudGFibGVOYW1lfS5mcm9tX2NvbHVtbl9pZGAsXG4gICAgICAgICc9JyxcbiAgICAgICAgJ2ZtYy5pZCcsXG4gICAgICApXG4gICAgICAuam9pbihcbiAgICAgICAgJ21vZGVsX2NvbHVtbiBBUyB0bWMnLFxuICAgICAgICBgJHt0aGlzLnRhYmxlTmFtZX0udG9fY29sdW1uX2lkYCxcbiAgICAgICAgJz0nLFxuICAgICAgICAndG1jLmlkJyxcbiAgICAgIClcbiAgICAgIC8vIGR1cGxpY2F0ZSByZWxhdGlvbnNoaXAgY2hlY2tcbiAgICAgIC53aGVyZVJhdyhcbiAgICAgICAgYGZtYy5tb2RlbF9pZCA9ID8gQW5kICR7dGhpcy50YWJsZU5hbWV9LmZyb21fY29sdW1uX2lkID0gPyBBbmQgdG1jLm1vZGVsX2lkID0gPyBBbmQgJHt0aGlzLnRhYmxlTmFtZX0udG9fY29sdW1uX2lkID0gP2AsXG4gICAgICAgIFtmcm9tTW9kZWxJZCwgZnJvbUNvbHVtbklkLCB0b01vZGVsSWQsIHRvQ29sdW1uSWRdLFxuICAgICAgKVxuICAgICAgLy8gcmV2ZXJzZSByZWxhdGlvbnNoaXAgY2hlY2tcbiAgICAgIC5vcldoZXJlUmF3KFxuICAgICAgICBgZm1jLm1vZGVsX2lkID0gPyBBbmQgJHt0aGlzLnRhYmxlTmFtZX0uZnJvbV9jb2x1bW5faWQgPSA/IEFuZCB0bWMubW9kZWxfaWQgPSA/IEFuZCAke3RoaXMudGFibGVOYW1lfS50b19jb2x1bW5faWQgPSA/YCxcbiAgICAgICAgW3RvTW9kZWxJZCwgdG9Db2x1bW5JZCwgZnJvbU1vZGVsSWQsIGZyb21Db2x1bW5JZF0sXG4gICAgICApXG4gICAgICAuc2VsZWN0KGAke3RoaXMudGFibGVOYW1lfS4qYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk7XG4gICAgcmV0dXJuIHJlc3VsdC5tYXAoKHIpID0+IHRoaXMudHJhbnNmb3JtRnJvbURCRGF0YShyKSkgYXMgUmVsYXRpb25JbmZvW107XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmVwb3NpdG9yeSIsIlJlbGF0aW9uUmVwb3NpdG9yeSIsImNvbnN0cnVjdG9yIiwia25leFBnIiwidGFibGVOYW1lIiwiZmluZFJlbGF0aW9uc0J5IiwiY29sdW1uSWRzIiwibW9kZWxJZHMiLCJxdWVyeU9wdGlvbnMiLCJleGVjdXRlciIsImtuZXgiLCJ0eCIsImJ1aWxkZXIiLCJqb2luIiwibGVuZ3RoIiwid2hlcmVJbiIsIm9yV2hlcmVJbiIsInJlc3VsdCIsInNlbGVjdCIsIm1hcCIsInIiLCJ0cmFuc2Zvcm1Gcm9tREJEYXRhIiwiZmluZFJlbGF0aW9uc0J5SWRzIiwiaWRzIiwiZGVsZXRlUmVsYXRpb25zQnlDb2x1bW5JZHMiLCJkZWxldGUiLCJmaW5kUmVsYXRpb25JbmZvQnkiLCJmaWx0ZXIiLCJwcm9qZWN0SWQiLCJ3aGVyZSIsImZpbmRFeGlzdGVkUmVsYXRpb25CZXR3ZWVuTW9kZWxzIiwicmVsYXRpb24iLCJmcm9tTW9kZWxJZCIsImZyb21Db2x1bW5JZCIsInRvTW9kZWxJZCIsInRvQ29sdW1uSWQiLCJxdWVyeSIsIndoZXJlUmF3Iiwib3JXaGVyZVJhdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/relationshipRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/schemaChangeRepository.ts":
/*!******************************************************************!*\
  !*** ./src/apollo/server/repositories/schemaChangeRepository.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SchemaChangeRepository: () => (/* binding */ SchemaChangeRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/mapValues */ \"lodash/mapValues\");\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nclass SchemaChangeRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"schema_change\"\n        });\n        this.transformToDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const transformedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(data, (value, key)=>{\n                if ([\n                    \"change\",\n                    \"resolve\"\n                ].includes(key)) {\n                    return value ? JSON.stringify(value) : null;\n                }\n                return value;\n            });\n            return lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(transformedData, (_value, key)=>lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default()(key));\n        };\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(data, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n            const formattedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(camelCaseData, (value, key)=>{\n                if ([\n                    \"change\",\n                    \"resolve\"\n                ].includes(key)) {\n                    // The value from Sqlite will be string type, while the value from PG is JSON object\n                    if (typeof value === \"string\") {\n                        return value ? JSON.parse(value) : value;\n                    } else {\n                        return value;\n                    }\n                }\n                return value;\n            });\n            return formattedData;\n        };\n    }\n    async findLastSchemaChange(projectId) {\n        const res = await this.knex.select(\"*\").from(this.tableName).where(this.transformToDBData({\n            projectId\n        })).orderBy(\"created_at\", \"desc\").first();\n        return res && this.transformFromDBData(res) || null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvc2NoZW1hQ2hhbmdlUmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFDb0U7QUFPcEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQW9CVCxNQUFNTSwrQkFDSE4sMkRBQWNBO0lBR3RCTyxZQUFZQyxNQUFZLENBQUU7UUFDeEIsS0FBSyxDQUFDO1lBQUVBO1lBQVFDLFdBQVc7UUFBZ0I7YUFhMUJDLG9CQUFvQixDQUFDQztZQUN0QyxJQUFJLENBQUNULDJEQUFhQSxDQUFDUyxPQUFPO2dCQUN4QixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFDQSxNQUFNQyxrQkFBa0JULHVEQUFTQSxDQUFDTyxNQUFNLENBQUNHLE9BQU9DO2dCQUM5QyxJQUFJO29CQUFDO29CQUFVO2lCQUFVLENBQUNDLFFBQVEsQ0FBQ0QsTUFBTTtvQkFDdkMsT0FBT0QsUUFBUUcsS0FBS0MsU0FBUyxDQUFDSixTQUFTO2dCQUN6QztnQkFDQSxPQUFPQTtZQUNUO1lBQ0EsT0FBT1gscURBQU9BLENBQUNVLGlCQUFpQixDQUFDTSxRQUFRSixNQUFRVix1REFBU0EsQ0FBQ1U7UUFDN0Q7YUFFbUJLLHNCQUFzQixDQUFDVDtZQUN4QyxJQUFJLENBQUNULDJEQUFhQSxDQUFDUyxPQUFPO2dCQUN4QixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFDQSxNQUFNUyxnQkFBZ0JsQixxREFBT0EsQ0FBQ1EsTUFBTSxDQUFDUSxRQUFRSixNQUFRZCx1REFBU0EsQ0FBQ2M7WUFDL0QsTUFBTU8sZ0JBQWdCbEIsdURBQVNBLENBQUNpQixlQUFlLENBQUNQLE9BQU9DO2dCQUNyRCxJQUFJO29CQUFDO29CQUFVO2lCQUFVLENBQUNDLFFBQVEsQ0FBQ0QsTUFBTTtvQkFDdkMsb0ZBQW9GO29CQUNwRixJQUFJLE9BQU9ELFVBQVUsVUFBVTt3QkFDN0IsT0FBT0EsUUFBUUcsS0FBS00sS0FBSyxDQUFDVCxTQUFTQTtvQkFDckMsT0FBTzt3QkFDTCxPQUFPQTtvQkFDVDtnQkFDRjtnQkFDQSxPQUFPQTtZQUNUO1lBQ0EsT0FBT1E7UUFDVDtJQTFDQTtJQUVBLE1BQWFFLHFCQUFxQkMsU0FBaUIsRUFBRTtRQUNuRCxNQUFNQyxNQUFNLE1BQU0sSUFBSSxDQUFDQyxJQUFJLENBQ3hCQyxNQUFNLENBQUMsS0FDUEMsSUFBSSxDQUFDLElBQUksQ0FBQ3BCLFNBQVMsRUFDbkJxQixLQUFLLENBQUMsSUFBSSxDQUFDcEIsaUJBQWlCLENBQUM7WUFBRWU7UUFBVSxJQUN6Q00sT0FBTyxDQUFDLGNBQWMsUUFDdEJDLEtBQUs7UUFDUixPQUFPLE9BQVEsSUFBSSxDQUFDWixtQkFBbUIsQ0FBQ00sUUFBUztJQUNuRDtBQWlDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvc2NoZW1hQ2hhbmdlUmVwb3NpdG9yeS50cz9jYThmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tICdrbmV4JztcbmltcG9ydCB7IEJhc2VSZXBvc2l0b3J5LCBJQmFzaWNSZXBvc2l0b3J5IH0gZnJvbSAnLi9iYXNlUmVwb3NpdG9yeSc7XG5pbXBvcnQge1xuICBjYW1lbENhc2UsXG4gIGlzUGxhaW5PYmplY3QsXG4gIG1hcEtleXMsXG4gIG1hcFZhbHVlcyxcbiAgc25ha2VDYXNlLFxufSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHtcbiAgRGF0YVNvdXJjZVNjaGVtYUNoYW5nZSxcbiAgRGF0YVNvdXJjZVNjaGVtYVJlc29sdmUsXG59IGZyb20gJ0BzZXJ2ZXIvbWFuYWdlcnMvZGF0YVNvdXJjZVNjaGVtYURldGVjdG9yJztcblxuZXhwb3J0IGludGVyZmFjZSBTY2hlbWFDaGFuZ2Uge1xuICBpZDogbnVtYmVyOyAvLyBJRFxuICBwcm9qZWN0SWQ6IG51bWJlcjsgLy8gUmVmZXJlbmNlIHRvIHByb2plY3QuaWRcbiAgY2hhbmdlOiBEYXRhU291cmNlU2NoZW1hQ2hhbmdlOyAvLyBTY2hlbWEgY2hhbmdlXG4gIHJlc29sdmU6IERhdGFTb3VyY2VTY2hlbWFSZXNvbHZlOyAvLyBTYXZlIHJlc29sdmVcbiAgY3JlYXRlZEF0OiBzdHJpbmc7IC8vIENyZWF0ZWQgYXRcbiAgdXBkYXRlQXQ6IHN0cmluZzsgLy8gVXBkYXRlZCBhdFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTY2hlbWFDaGFuZ2VSZXBvc2l0b3J5XG4gIGV4dGVuZHMgSUJhc2ljUmVwb3NpdG9yeTxTY2hlbWFDaGFuZ2U+IHtcbiAgZmluZExhc3RTY2hlbWFDaGFuZ2UocHJvamVjdElkOiBudW1iZXIpOiBQcm9taXNlPFNjaGVtYUNoYW5nZSB8IG51bGw+O1xufVxuXG5leHBvcnQgY2xhc3MgU2NoZW1hQ2hhbmdlUmVwb3NpdG9yeVxuICBleHRlbmRzIEJhc2VSZXBvc2l0b3J5PFNjaGVtYUNoYW5nZT5cbiAgaW1wbGVtZW50cyBJU2NoZW1hQ2hhbmdlUmVwb3NpdG9yeVxue1xuICBjb25zdHJ1Y3RvcihrbmV4UGc6IEtuZXgpIHtcbiAgICBzdXBlcih7IGtuZXhQZywgdGFibGVOYW1lOiAnc2NoZW1hX2NoYW5nZScgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZmluZExhc3RTY2hlbWFDaGFuZ2UocHJvamVjdElkOiBudW1iZXIpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmtuZXhcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmZyb20odGhpcy50YWJsZU5hbWUpXG4gICAgICAud2hlcmUodGhpcy50cmFuc2Zvcm1Ub0RCRGF0YSh7IHByb2plY3RJZCB9KSlcbiAgICAgIC5vcmRlckJ5KCdjcmVhdGVkX2F0JywgJ2Rlc2MnKVxuICAgICAgLmZpcnN0KCk7XG4gICAgcmV0dXJuIChyZXMgJiYgdGhpcy50cmFuc2Zvcm1Gcm9tREJEYXRhKHJlcykpIHx8IG51bGw7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdHJhbnNmb3JtVG9EQkRhdGEgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZGJkYXRhJyk7XG4gICAgfVxuICAgIGNvbnN0IHRyYW5zZm9ybWVkRGF0YSA9IG1hcFZhbHVlcyhkYXRhLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaWYgKFsnY2hhbmdlJywgJ3Jlc29sdmUnXS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA6IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hcEtleXModHJhbnNmb3JtZWREYXRhLCAoX3ZhbHVlLCBrZXkpID0+IHNuYWtlQ2FzZShrZXkpKTtcbiAgfTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdHJhbnNmb3JtRnJvbURCRGF0YSA9IChkYXRhOiBhbnkpOiBTY2hlbWFDaGFuZ2UgPT4ge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGRiZGF0YScpO1xuICAgIH1cbiAgICBjb25zdCBjYW1lbENhc2VEYXRhID0gbWFwS2V5cyhkYXRhLCAoX3ZhbHVlLCBrZXkpID0+IGNhbWVsQ2FzZShrZXkpKTtcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRhID0gbWFwVmFsdWVzKGNhbWVsQ2FzZURhdGEsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICBpZiAoWydjaGFuZ2UnLCAncmVzb2x2ZSddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgLy8gVGhlIHZhbHVlIGZyb20gU3FsaXRlIHdpbGwgYmUgc3RyaW5nIHR5cGUsIHdoaWxlIHRoZSB2YWx1ZSBmcm9tIFBHIGlzIEpTT04gb2JqZWN0XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KSBhcyBTY2hlbWFDaGFuZ2U7XG4gICAgcmV0dXJuIGZvcm1hdHRlZERhdGE7XG4gIH07XG59XG4iXSwibmFtZXMiOlsiQmFzZVJlcG9zaXRvcnkiLCJjYW1lbENhc2UiLCJpc1BsYWluT2JqZWN0IiwibWFwS2V5cyIsIm1hcFZhbHVlcyIsInNuYWtlQ2FzZSIsIlNjaGVtYUNoYW5nZVJlcG9zaXRvcnkiLCJjb25zdHJ1Y3RvciIsImtuZXhQZyIsInRhYmxlTmFtZSIsInRyYW5zZm9ybVRvREJEYXRhIiwiZGF0YSIsIkVycm9yIiwidHJhbnNmb3JtZWREYXRhIiwidmFsdWUiLCJrZXkiLCJpbmNsdWRlcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJfdmFsdWUiLCJ0cmFuc2Zvcm1Gcm9tREJEYXRhIiwiY2FtZWxDYXNlRGF0YSIsImZvcm1hdHRlZERhdGEiLCJwYXJzZSIsImZpbmRMYXN0U2NoZW1hQ2hhbmdlIiwicHJvamVjdElkIiwicmVzIiwia25leCIsInNlbGVjdCIsImZyb20iLCJ3aGVyZSIsIm9yZGVyQnkiLCJmaXJzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/schemaChangeRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/threadRepository.ts":
/*!************************************************************!*\
  !*** ./src/apollo/server/repositories/threadRepository.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ThreadRepository: () => (/* binding */ ThreadRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/mapValues */ \"lodash/mapValues\");\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nclass ThreadRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"thread\"\n        });\n        this.jsonbColumns = [\n            \"questions\",\n            \"questionsError\"\n        ];\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(data, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n            const transformData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(camelCaseData, (value, key)=>{\n                if (this.jsonbColumns.includes(key)) {\n                    if (typeof value === \"string\") {\n                        return value ? JSON.parse(value) : value;\n                    } else {\n                        return value;\n                    }\n                }\n                return value;\n            });\n            return transformData;\n        };\n        this.transformToDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const transformedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(data, (value, key)=>{\n                if (this.jsonbColumns.includes(key)) {\n                    return JSON.stringify(value);\n                } else {\n                    return value;\n                }\n            });\n            return lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(transformedData, (_value, key)=>lodash_snakeCase__WEBPACK_IMPORTED_MODULE_5___default()(key));\n        };\n    }\n    async listAllTimeDescOrder(projectId) {\n        const threads = await this.knex(this.tableName).where(this.transformToDBData({\n            projectId\n        })).orderBy(\"created_at\", \"desc\");\n        return threads.map((thread)=>this.transformFromDBData(thread));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvdGhyZWFkUmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFDb0U7QUFPcEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXdCVCxNQUFNTSx5QkFDSE4sMkRBQWNBO0lBS3RCTyxZQUFZQyxNQUFZLENBQUU7UUFDeEIsS0FBSyxDQUFDO1lBQUVBO1lBQVFDLFdBQVc7UUFBUzthQUhyQkMsZUFBZTtZQUFDO1lBQWE7U0FBaUI7YUFhNUNDLHNCQUFzQixDQUFDQztZQUN4QyxJQUFJLENBQUNWLDJEQUFhQSxDQUFDVSxPQUFPO2dCQUN4QixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFDQSxNQUFNQyxnQkFBZ0JYLHFEQUFPQSxDQUFDUyxNQUFNLENBQUNHLFFBQVFDLE1BQVFmLHVEQUFTQSxDQUFDZTtZQUMvRCxNQUFNQyxnQkFBZ0JiLHVEQUFTQSxDQUFDVSxlQUFlLENBQUNJLE9BQU9GO2dCQUNyRCxJQUFJLElBQUksQ0FBQ04sWUFBWSxDQUFDUyxRQUFRLENBQUNILE1BQU07b0JBQ25DLElBQUksT0FBT0UsVUFBVSxVQUFVO3dCQUM3QixPQUFPQSxRQUFRRSxLQUFLQyxLQUFLLENBQUNILFNBQVNBO29CQUNyQyxPQUFPO3dCQUNMLE9BQU9BO29CQUNUO2dCQUNGO2dCQUNBLE9BQU9BO1lBQ1Q7WUFDQSxPQUFPRDtRQUNUO2FBRW1CSyxvQkFBb0IsQ0FBQ1Y7WUFDdEMsSUFBSSxDQUFDViwyREFBYUEsQ0FBQ1UsT0FBTztnQkFDeEIsTUFBTSxJQUFJQyxNQUFNO1lBQ2xCO1lBQ0EsTUFBTVUsa0JBQWtCbkIsdURBQVNBLENBQUNRLE1BQU0sQ0FBQ00sT0FBT0Y7Z0JBQzlDLElBQUksSUFBSSxDQUFDTixZQUFZLENBQUNTLFFBQVEsQ0FBQ0gsTUFBTTtvQkFDbkMsT0FBT0ksS0FBS0ksU0FBUyxDQUFDTjtnQkFDeEIsT0FBTztvQkFDTCxPQUFPQTtnQkFDVDtZQUNGO1lBQ0EsT0FBT2YscURBQU9BLENBQUNvQixpQkFBaUIsQ0FBQ1IsUUFBUUMsTUFBUVgsdURBQVNBLENBQUNXO1FBQzdEO0lBdkNBO0lBRUEsTUFBYVMscUJBQXFCQyxTQUFpQixFQUFxQjtRQUN0RSxNQUFNQyxVQUFVLE1BQU0sSUFBSSxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDbkIsU0FBUyxFQUMzQ29CLEtBQUssQ0FBQyxJQUFJLENBQUNQLGlCQUFpQixDQUFDO1lBQUVJO1FBQVUsSUFDekNJLE9BQU8sQ0FBQyxjQUFjO1FBQ3pCLE9BQU9ILFFBQVFJLEdBQUcsQ0FBQyxDQUFDQyxTQUFXLElBQUksQ0FBQ3JCLG1CQUFtQixDQUFDcUI7SUFDMUQ7QUFpQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL3RocmVhZFJlcG9zaXRvcnkudHM/YzBiMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLbmV4IH0gZnJvbSAna25leCc7XG5pbXBvcnQgeyBCYXNlUmVwb3NpdG9yeSwgSUJhc2ljUmVwb3NpdG9yeSB9IGZyb20gJy4vYmFzZVJlcG9zaXRvcnknO1xuaW1wb3J0IHtcbiAgY2FtZWxDYXNlLFxuICBpc1BsYWluT2JqZWN0LFxuICBtYXBLZXlzLFxuICBtYXBWYWx1ZXMsXG4gIHNuYWtlQ2FzZSxcbn0gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGludGVyZmFjZSBUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9uUmVzdWx0IHtcbiAgcXVlc3Rpb246IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgc3FsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGhyZWFkIHtcbiAgaWQ6IG51bWJlcjsgLy8gSURcbiAgcHJvamVjdElkOiBudW1iZXI7IC8vIFJlZmVyZW5jZSB0byBwcm9qZWN0LmlkXG4gIHN1bW1hcnk6IHN0cmluZzsgLy8gVGhyZWFkIHN1bW1hcnlcblxuICAvLyByZWNvbW1lbmQgcXVlc3Rpb25cbiAgcXVlcnlJZD86IHN0cmluZzsgLy8gUXVlcnkgSURcbiAgcXVlc3Rpb25zPzogVGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvblJlc3VsdFtdOyAvLyBSZWNvbW1lbmRlZCBxdWVzdGlvbnNcbiAgcXVlc3Rpb25zU3RhdHVzPzogc3RyaW5nOyAvLyBTdGF0dXMgb2YgdGhlIHJlY29tbWVuZGVkIHF1ZXN0aW9uc1xuICBxdWVzdGlvbnNFcnJvcj86IG9iamVjdDsgLy8gRXJyb3Igb2YgdGhlIHJlY29tbWVuZGVkIHF1ZXN0aW9uc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUaHJlYWRSZXBvc2l0b3J5IGV4dGVuZHMgSUJhc2ljUmVwb3NpdG9yeTxUaHJlYWQ+IHtcbiAgbGlzdEFsbFRpbWVEZXNjT3JkZXIocHJvamVjdElkOiBudW1iZXIpOiBQcm9taXNlPFRocmVhZFtdPjtcbn1cblxuZXhwb3J0IGNsYXNzIFRocmVhZFJlcG9zaXRvcnlcbiAgZXh0ZW5kcyBCYXNlUmVwb3NpdG9yeTxUaHJlYWQ+XG4gIGltcGxlbWVudHMgSVRocmVhZFJlcG9zaXRvcnlcbntcbiAgcHJpdmF0ZSByZWFkb25seSBqc29uYkNvbHVtbnMgPSBbJ3F1ZXN0aW9ucycsICdxdWVzdGlvbnNFcnJvciddO1xuXG4gIGNvbnN0cnVjdG9yKGtuZXhQZzogS25leCkge1xuICAgIHN1cGVyKHsga25leFBnLCB0YWJsZU5hbWU6ICd0aHJlYWQnIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGxpc3RBbGxUaW1lRGVzY09yZGVyKHByb2plY3RJZDogbnVtYmVyKTogUHJvbWlzZTxUaHJlYWRbXT4ge1xuICAgIGNvbnN0IHRocmVhZHMgPSBhd2FpdCB0aGlzLmtuZXgodGhpcy50YWJsZU5hbWUpXG4gICAgICAud2hlcmUodGhpcy50cmFuc2Zvcm1Ub0RCRGF0YSh7IHByb2plY3RJZCB9KSlcbiAgICAgIC5vcmRlckJ5KCdjcmVhdGVkX2F0JywgJ2Rlc2MnKTtcbiAgICByZXR1cm4gdGhyZWFkcy5tYXAoKHRocmVhZCkgPT4gdGhpcy50cmFuc2Zvcm1Gcm9tREJEYXRhKHRocmVhZCkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIHRyYW5zZm9ybUZyb21EQkRhdGEgPSAoZGF0YTogYW55KTogVGhyZWFkID0+IHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBkYmRhdGEnKTtcbiAgICB9XG4gICAgY29uc3QgY2FtZWxDYXNlRGF0YSA9IG1hcEtleXMoZGF0YSwgKF92YWx1ZSwga2V5KSA9PiBjYW1lbENhc2Uoa2V5KSk7XG4gICAgY29uc3QgdHJhbnNmb3JtRGF0YSA9IG1hcFZhbHVlcyhjYW1lbENhc2VEYXRhLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaWYgKHRoaXMuanNvbmJDb2x1bW5zLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUgPyBKU09OLnBhcnNlKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0cmFuc2Zvcm1EYXRhIGFzIFRocmVhZDtcbiAgfTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdHJhbnNmb3JtVG9EQkRhdGEgPSAoZGF0YTogYW55KSA9PiB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZGJkYXRhJyk7XG4gICAgfVxuICAgIGNvbnN0IHRyYW5zZm9ybWVkRGF0YSA9IG1hcFZhbHVlcyhkYXRhLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaWYgKHRoaXMuanNvbmJDb2x1bW5zLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWFwS2V5cyh0cmFuc2Zvcm1lZERhdGEsIChfdmFsdWUsIGtleSkgPT4gc25ha2VDYXNlKGtleSkpO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbIkJhc2VSZXBvc2l0b3J5IiwiY2FtZWxDYXNlIiwiaXNQbGFpbk9iamVjdCIsIm1hcEtleXMiLCJtYXBWYWx1ZXMiLCJzbmFrZUNhc2UiLCJUaHJlYWRSZXBvc2l0b3J5IiwiY29uc3RydWN0b3IiLCJrbmV4UGciLCJ0YWJsZU5hbWUiLCJqc29uYkNvbHVtbnMiLCJ0cmFuc2Zvcm1Gcm9tREJEYXRhIiwiZGF0YSIsIkVycm9yIiwiY2FtZWxDYXNlRGF0YSIsIl92YWx1ZSIsImtleSIsInRyYW5zZm9ybURhdGEiLCJ2YWx1ZSIsImluY2x1ZGVzIiwiSlNPTiIsInBhcnNlIiwidHJhbnNmb3JtVG9EQkRhdGEiLCJ0cmFuc2Zvcm1lZERhdGEiLCJzdHJpbmdpZnkiLCJsaXN0QWxsVGltZURlc2NPcmRlciIsInByb2plY3RJZCIsInRocmVhZHMiLCJrbmV4Iiwid2hlcmUiLCJvcmRlckJ5IiwibWFwIiwidGhyZWFkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/threadRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/threadResponseRepository.ts":
/*!********************************************************************!*\
  !*** ./src/apollo/server/repositories/threadResponseRepository.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ThreadResponseRepository: () => (/* binding */ ThreadResponseRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/camelCase */ \"lodash/camelCase\");\n/* harmony import */ var lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_camelCase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isPlainObject */ \"lodash/isPlainObject\");\n/* harmony import */ var lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/mapKeys */ \"lodash/mapKeys\");\n/* harmony import */ var lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/mapValues */ \"lodash/mapValues\");\n/* harmony import */ var lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_mapValues__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nclass ThreadResponseRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"thread_response\"\n        });\n        this.jsonbColumns = [\n            \"answerDetail\",\n            \"breakdownDetail\",\n            \"chartDetail\"\n        ];\n        this.transformFromDBData = (data)=>{\n            if (!lodash_isPlainObject__WEBPACK_IMPORTED_MODULE_2___default()(data)) {\n                throw new Error(\"Unexpected dbdata\");\n            }\n            const camelCaseData = lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(data, (_value, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n            const formattedData = lodash_mapValues__WEBPACK_IMPORTED_MODULE_4___default()(camelCaseData, (value, key)=>{\n                if (this.jsonbColumns.includes(key)) {\n                    // The value from Sqlite will be string type, while the value from PG is JSON object\n                    if (typeof value === \"string\") {\n                        return value ? JSON.parse(value) : value;\n                    } else {\n                        return value;\n                    }\n                }\n                return value;\n            });\n            return formattedData;\n        };\n    }\n    async getResponsesWithThread(threadId, limit) {\n        const query = this.knex(this.tableName).select(\"thread_response.*\").where({\n            thread_id: threadId\n        }).leftJoin(\"thread\", \"thread.id\", \"thread_response.thread_id\");\n        if (limit) {\n            query.orderBy(\"created_at\", \"desc\").limit(limit);\n        }\n        return (await query).map((res)=>{\n            // turn object keys into camelCase\n            return lodash_mapKeys__WEBPACK_IMPORTED_MODULE_3___default()(res, (_, key)=>lodash_camelCase__WEBPACK_IMPORTED_MODULE_1___default()(key));\n        }).map((res)=>{\n            // JSON.parse detail and error\n            const answerDetail = res.answerDetail && typeof res.answerDetail === \"string\" ? JSON.parse(res.answerDetail) : res.answerDetail;\n            const breakdownDetail = res.breakdownDetail && typeof res.breakdownDetail === \"string\" ? JSON.parse(res.breakdownDetail) : res.breakdownDetail;\n            const chartDetail = res.chartDetail && typeof res.chartDetail === \"string\" ? JSON.parse(res.chartDetail) : res.chartDetail;\n            return {\n                ...res,\n                answerDetail: answerDetail || null,\n                breakdownDetail: breakdownDetail || null,\n                chartDetail: chartDetail || null\n            };\n        });\n    }\n    async updateOne(id, data, queryOptions) {\n        const transformedData = {\n            status: data.status ? data.status : undefined,\n            answerDetail: data.answerDetail ? JSON.stringify(data.answerDetail) : undefined,\n            breakdownDetail: data.breakdownDetail ? JSON.stringify(data.breakdownDetail) : undefined,\n            chartDetail: data.chartDetail ? JSON.stringify(data.chartDetail) : undefined\n        };\n        const executer = queryOptions?.tx ? queryOptions.tx : this.knex;\n        const [result] = await executer(this.tableName).where({\n            id\n        }).update(this.transformToDBData(transformedData)).returning(\"*\");\n        return this.transformFromDBData(result);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFLMEI7QUFDNEM7QUFBQTtBQUFBO0FBQUE7QUFzRC9ELE1BQU1LLGlDQUNITCwyREFBY0E7SUFTdEJNLFlBQVlDLE1BQVksQ0FBRTtRQUN4QixLQUFLLENBQUM7WUFBRUE7WUFBUUMsV0FBVztRQUFrQjthQVA5QkMsZUFBZTtZQUM5QjtZQUNBO1lBQ0E7U0FDRDthQTBFa0JDLHNCQUFzQixDQUFDQztZQUN4QyxJQUFJLENBQUNULDJEQUFhQSxDQUFDUyxPQUFPO2dCQUN4QixNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFDQSxNQUFNQyxnQkFBZ0JWLHFEQUFPQSxDQUFDUSxNQUFNLENBQUNHLFFBQVFDLE1BQVFkLHVEQUFTQSxDQUFDYztZQUMvRCxNQUFNQyxnQkFBZ0JaLHVEQUFTQSxDQUFDUyxlQUFlLENBQUNJLE9BQU9GO2dCQUNyRCxJQUFJLElBQUksQ0FBQ04sWUFBWSxDQUFDUyxRQUFRLENBQUNILE1BQU07b0JBQ25DLG9GQUFvRjtvQkFDcEYsSUFBSSxPQUFPRSxVQUFVLFVBQVU7d0JBQzdCLE9BQU9BLFFBQVFFLEtBQUtDLEtBQUssQ0FBQ0gsU0FBU0E7b0JBQ3JDLE9BQU87d0JBQ0wsT0FBT0E7b0JBQ1Q7Z0JBQ0Y7Z0JBQ0EsT0FBT0E7WUFDVDtZQUNBLE9BQU9EO1FBQ1Q7SUF2RkE7SUFFQSxNQUFhSyx1QkFBdUJDLFFBQWdCLEVBQUVDLEtBQWMsRUFBRTtRQUNwRSxNQUFNQyxRQUFRLElBQUksQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQ2pCLFNBQVMsRUFDbkNrQixNQUFNLENBQUMscUJBQ1BDLEtBQUssQ0FBQztZQUFFQyxXQUFXTjtRQUFTLEdBQzVCTyxRQUFRLENBQUMsVUFBVSxhQUFhO1FBRW5DLElBQUlOLE9BQU87WUFDVEMsTUFBTU0sT0FBTyxDQUFDLGNBQWMsUUFBUVAsS0FBSyxDQUFDQTtRQUM1QztRQUVBLE9BQU8sQ0FBQyxNQUFNQyxLQUFJLEVBQ2ZPLEdBQUcsQ0FBQyxDQUFDQztZQUNKLGtDQUFrQztZQUNsQyxPQUFPN0IscURBQU9BLENBQUM2QixLQUFLLENBQUNDLEdBQUdsQixNQUFRZCx1REFBU0EsQ0FBQ2M7UUFDNUMsR0FDQ2dCLEdBQUcsQ0FBQyxDQUFDQztZQUNKLDhCQUE4QjtZQUM5QixNQUFNRSxlQUNKRixJQUFJRSxZQUFZLElBQUksT0FBT0YsSUFBSUUsWUFBWSxLQUFLLFdBQzVDZixLQUFLQyxLQUFLLENBQUNZLElBQUlFLFlBQVksSUFDM0JGLElBQUlFLFlBQVk7WUFDdEIsTUFBTUMsa0JBQ0pILElBQUlHLGVBQWUsSUFBSSxPQUFPSCxJQUFJRyxlQUFlLEtBQUssV0FDbERoQixLQUFLQyxLQUFLLENBQUNZLElBQUlHLGVBQWUsSUFDOUJILElBQUlHLGVBQWU7WUFDekIsTUFBTUMsY0FDSkosSUFBSUksV0FBVyxJQUFJLE9BQU9KLElBQUlJLFdBQVcsS0FBSyxXQUMxQ2pCLEtBQUtDLEtBQUssQ0FBQ1ksSUFBSUksV0FBVyxJQUMxQkosSUFBSUksV0FBVztZQUNyQixPQUFPO2dCQUNMLEdBQUdKLEdBQUc7Z0JBQ05FLGNBQWNBLGdCQUFnQjtnQkFDOUJDLGlCQUFpQkEsbUJBQW1CO2dCQUNwQ0MsYUFBYUEsZUFBZTtZQUM5QjtRQUNGO0lBQ0o7SUFFQSxNQUFhQyxVQUNYQyxFQUFtQixFQUNuQjNCLElBS0UsRUFDRjRCLFlBQTRCLEVBQzVCO1FBQ0EsTUFBTUMsa0JBQWtCO1lBQ3RCQyxRQUFROUIsS0FBSzhCLE1BQU0sR0FBRzlCLEtBQUs4QixNQUFNLEdBQUdDO1lBQ3BDUixjQUFjdkIsS0FBS3VCLFlBQVksR0FDM0JmLEtBQUt3QixTQUFTLENBQUNoQyxLQUFLdUIsWUFBWSxJQUNoQ1E7WUFDSlAsaUJBQWlCeEIsS0FBS3dCLGVBQWUsR0FDakNoQixLQUFLd0IsU0FBUyxDQUFDaEMsS0FBS3dCLGVBQWUsSUFDbkNPO1lBQ0pOLGFBQWF6QixLQUFLeUIsV0FBVyxHQUN6QmpCLEtBQUt3QixTQUFTLENBQUNoQyxLQUFLeUIsV0FBVyxJQUMvQk07UUFDTjtRQUNBLE1BQU1FLFdBQVdMLGNBQWNNLEtBQUtOLGFBQWFNLEVBQUUsR0FBRyxJQUFJLENBQUNwQixJQUFJO1FBQy9ELE1BQU0sQ0FBQ3FCLE9BQU8sR0FBRyxNQUFNRixTQUFTLElBQUksQ0FBQ3BDLFNBQVMsRUFDM0NtQixLQUFLLENBQUM7WUFBRVc7UUFBRyxHQUNYUyxNQUFNLENBQUMsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQ1Isa0JBQzlCUyxTQUFTLENBQUM7UUFDYixPQUFPLElBQUksQ0FBQ3ZDLG1CQUFtQixDQUFDb0M7SUFDbEM7QUFvQkYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVwb3NpdG9yaWVzL3RocmVhZFJlc3BvbnNlUmVwb3NpdG9yeS50cz9hNzI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtuZXggfSBmcm9tICdrbmV4JztcbmltcG9ydCB7XG4gIEJhc2VSZXBvc2l0b3J5LFxuICBJQmFzaWNSZXBvc2l0b3J5LFxuICBJUXVlcnlPcHRpb25zLFxufSBmcm9tICcuL2Jhc2VSZXBvc2l0b3J5JztcbmltcG9ydCB7IGNhbWVsQ2FzZSwgaXNQbGFpbk9iamVjdCwgbWFwS2V5cywgbWFwVmFsdWVzIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IEFza1Jlc3VsdFN0YXR1cyB9IGZyb20gJ0BzZXJ2ZXIvbW9kZWxzL2FkYXB0b3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIERldGFpbFN0ZXAge1xuICBzdW1tYXJ5OiBzdHJpbmc7XG4gIHNxbDogc3RyaW5nO1xuICBjdGVOYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGhyZWFkUmVzcG9uc2VCcmVha2Rvd25EZXRhaWwge1xuICBxdWVyeUlkOiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nO1xuICBlcnJvcj86IG9iamVjdDtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHN0ZXBzPzogQXJyYXk8RGV0YWlsU3RlcD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGhyZWFkUmVzcG9uc2VBbnN3ZXJEZXRhaWwge1xuICBxdWVyeUlkPzogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgZXJyb3I/OiBvYmplY3Q7XG4gIG51bVJvd3NVc2VkSW5MTE0/OiBudW1iZXI7XG4gIGNvbnRlbnQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGhyZWFkUmVzcG9uc2VDaGFydERldGFpbCB7XG4gIHF1ZXJ5SWQ/OiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nO1xuICBlcnJvcj86IG9iamVjdDtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGNoYXJ0VHlwZT86IHN0cmluZztcbiAgY2hhcnRTY2hlbWE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBhZGp1c3RtZW50PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaHJlYWRSZXNwb25zZSB7XG4gIGlkOiBudW1iZXI7IC8vIElEXG4gIHZpZXdJZD86IG51bWJlcjsgLy8gVmlldyBJRCwgaWYgdGhlIHJlc3BvbnNlIGlzIGZyb20gYSB2aWV3XG4gIHRocmVhZElkOiBudW1iZXI7IC8vIFJlZmVyZW5jZSB0byB0aHJlYWQuaWRcbiAgcXVlc3Rpb246IHN0cmluZzsgLy8gVGhyZWFkIHJlc3BvbnNlIHF1ZXN0aW9uXG4gIHNxbDogc3RyaW5nOyAvLyBTUUwgcXVlcnkgZ2VuZXJhdGVkIGJ5IEFJIHNlcnZpY2VcbiAgYW5zd2VyRGV0YWlsPzogVGhyZWFkUmVzcG9uc2VBbnN3ZXJEZXRhaWw7IC8vIEFJIGdlbmVyYXRlZCB0ZXh0LWJhc2VkIGFuc3dlciBkZXRhaWxcbiAgYnJlYWtkb3duRGV0YWlsPzogVGhyZWFkUmVzcG9uc2VCcmVha2Rvd25EZXRhaWw7IC8vIFRocmVhZCByZXNwb25zZSBicmVha2Rvd24gZGV0YWlsXG4gIGNoYXJ0RGV0YWlsPzogVGhyZWFkUmVzcG9uc2VDaGFydERldGFpbDsgLy8gVGhyZWFkIHJlc3BvbnNlIGNoYXJ0IGRldGFpbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUaHJlYWRSZXNwb25zZVJlcG9zaXRvcnlcbiAgZXh0ZW5kcyBJQmFzaWNSZXBvc2l0b3J5PFRocmVhZFJlc3BvbnNlPiB7XG4gIGdldFJlc3BvbnNlc1dpdGhUaHJlYWQoXG4gICAgdGhyZWFkSWQ6IG51bWJlcixcbiAgICBsaW1pdD86IG51bWJlcixcbiAgKTogUHJvbWlzZTxUaHJlYWRSZXNwb25zZVtdPjtcbn1cblxuZXhwb3J0IGNsYXNzIFRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeVxuICBleHRlbmRzIEJhc2VSZXBvc2l0b3J5PFRocmVhZFJlc3BvbnNlPlxuICBpbXBsZW1lbnRzIElUaHJlYWRSZXNwb25zZVJlcG9zaXRvcnlcbntcbiAgcHJpdmF0ZSByZWFkb25seSBqc29uYkNvbHVtbnMgPSBbXG4gICAgJ2Fuc3dlckRldGFpbCcsXG4gICAgJ2JyZWFrZG93bkRldGFpbCcsXG4gICAgJ2NoYXJ0RGV0YWlsJyxcbiAgXTtcblxuICBjb25zdHJ1Y3RvcihrbmV4UGc6IEtuZXgpIHtcbiAgICBzdXBlcih7IGtuZXhQZywgdGFibGVOYW1lOiAndGhyZWFkX3Jlc3BvbnNlJyB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZXNwb25zZXNXaXRoVGhyZWFkKHRocmVhZElkOiBudW1iZXIsIGxpbWl0PzogbnVtYmVyKSB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLmtuZXgodGhpcy50YWJsZU5hbWUpXG4gICAgICAuc2VsZWN0KCd0aHJlYWRfcmVzcG9uc2UuKicpXG4gICAgICAud2hlcmUoeyB0aHJlYWRfaWQ6IHRocmVhZElkIH0pXG4gICAgICAubGVmdEpvaW4oJ3RocmVhZCcsICd0aHJlYWQuaWQnLCAndGhyZWFkX3Jlc3BvbnNlLnRocmVhZF9pZCcpO1xuXG4gICAgaWYgKGxpbWl0KSB7XG4gICAgICBxdWVyeS5vcmRlckJ5KCdjcmVhdGVkX2F0JywgJ2Rlc2MnKS5saW1pdChsaW1pdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChhd2FpdCBxdWVyeSlcbiAgICAgIC5tYXAoKHJlcykgPT4ge1xuICAgICAgICAvLyB0dXJuIG9iamVjdCBrZXlzIGludG8gY2FtZWxDYXNlXG4gICAgICAgIHJldHVybiBtYXBLZXlzKHJlcywgKF8sIGtleSkgPT4gY2FtZWxDYXNlKGtleSkpO1xuICAgICAgfSlcbiAgICAgIC5tYXAoKHJlcykgPT4ge1xuICAgICAgICAvLyBKU09OLnBhcnNlIGRldGFpbCBhbmQgZXJyb3JcbiAgICAgICAgY29uc3QgYW5zd2VyRGV0YWlsID1cbiAgICAgICAgICByZXMuYW5zd2VyRGV0YWlsICYmIHR5cGVvZiByZXMuYW5zd2VyRGV0YWlsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBKU09OLnBhcnNlKHJlcy5hbnN3ZXJEZXRhaWwpXG4gICAgICAgICAgICA6IHJlcy5hbnN3ZXJEZXRhaWw7XG4gICAgICAgIGNvbnN0IGJyZWFrZG93bkRldGFpbCA9XG4gICAgICAgICAgcmVzLmJyZWFrZG93bkRldGFpbCAmJiB0eXBlb2YgcmVzLmJyZWFrZG93bkRldGFpbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gSlNPTi5wYXJzZShyZXMuYnJlYWtkb3duRGV0YWlsKVxuICAgICAgICAgICAgOiByZXMuYnJlYWtkb3duRGV0YWlsO1xuICAgICAgICBjb25zdCBjaGFydERldGFpbCA9XG4gICAgICAgICAgcmVzLmNoYXJ0RGV0YWlsICYmIHR5cGVvZiByZXMuY2hhcnREZXRhaWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IEpTT04ucGFyc2UocmVzLmNoYXJ0RGV0YWlsKVxuICAgICAgICAgICAgOiByZXMuY2hhcnREZXRhaWw7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVzLFxuICAgICAgICAgIGFuc3dlckRldGFpbDogYW5zd2VyRGV0YWlsIHx8IG51bGwsXG4gICAgICAgICAgYnJlYWtkb3duRGV0YWlsOiBicmVha2Rvd25EZXRhaWwgfHwgbnVsbCxcbiAgICAgICAgICBjaGFydERldGFpbDogY2hhcnREZXRhaWwgfHwgbnVsbCxcbiAgICAgICAgfTtcbiAgICAgIH0pIGFzIFRocmVhZFJlc3BvbnNlW107XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBkYXRlT25lKFxuICAgIGlkOiBzdHJpbmcgfCBudW1iZXIsXG4gICAgZGF0YTogUGFydGlhbDx7XG4gICAgICBzdGF0dXM6IEFza1Jlc3VsdFN0YXR1cztcbiAgICAgIGFuc3dlckRldGFpbDogVGhyZWFkUmVzcG9uc2VBbnN3ZXJEZXRhaWw7XG4gICAgICBicmVha2Rvd25EZXRhaWw6IFRocmVhZFJlc3BvbnNlQnJlYWtkb3duRGV0YWlsO1xuICAgICAgY2hhcnREZXRhaWw6IFRocmVhZFJlc3BvbnNlQ2hhcnREZXRhaWw7XG4gICAgfT4sXG4gICAgcXVlcnlPcHRpb25zPzogSVF1ZXJ5T3B0aW9ucyxcbiAgKSB7XG4gICAgY29uc3QgdHJhbnNmb3JtZWREYXRhID0ge1xuICAgICAgc3RhdHVzOiBkYXRhLnN0YXR1cyA/IGRhdGEuc3RhdHVzIDogdW5kZWZpbmVkLFxuICAgICAgYW5zd2VyRGV0YWlsOiBkYXRhLmFuc3dlckRldGFpbFxuICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGRhdGEuYW5zd2VyRGV0YWlsKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIGJyZWFrZG93bkRldGFpbDogZGF0YS5icmVha2Rvd25EZXRhaWxcbiAgICAgICAgPyBKU09OLnN0cmluZ2lmeShkYXRhLmJyZWFrZG93bkRldGFpbClcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBjaGFydERldGFpbDogZGF0YS5jaGFydERldGFpbFxuICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGRhdGEuY2hhcnREZXRhaWwpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgY29uc3QgZXhlY3V0ZXIgPSBxdWVyeU9wdGlvbnM/LnR4ID8gcXVlcnlPcHRpb25zLnR4IDogdGhpcy5rbmV4O1xuICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZXhlY3V0ZXIodGhpcy50YWJsZU5hbWUpXG4gICAgICAud2hlcmUoeyBpZCB9KVxuICAgICAgLnVwZGF0ZSh0aGlzLnRyYW5zZm9ybVRvREJEYXRhKHRyYW5zZm9ybWVkRGF0YSBhcyBhbnkpKVxuICAgICAgLnJldHVybmluZygnKicpO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUZyb21EQkRhdGEocmVzdWx0KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSB0cmFuc2Zvcm1Gcm9tREJEYXRhID0gKGRhdGE6IGFueSk6IFRocmVhZFJlc3BvbnNlID0+IHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBkYmRhdGEnKTtcbiAgICB9XG4gICAgY29uc3QgY2FtZWxDYXNlRGF0YSA9IG1hcEtleXMoZGF0YSwgKF92YWx1ZSwga2V5KSA9PiBjYW1lbENhc2Uoa2V5KSk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0YSA9IG1hcFZhbHVlcyhjYW1lbENhc2VEYXRhLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgaWYgKHRoaXMuanNvbmJDb2x1bW5zLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgLy8gVGhlIHZhbHVlIGZyb20gU3FsaXRlIHdpbGwgYmUgc3RyaW5nIHR5cGUsIHdoaWxlIHRoZSB2YWx1ZSBmcm9tIFBHIGlzIEpTT04gb2JqZWN0XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KSBhcyBUaHJlYWRSZXNwb25zZTtcbiAgICByZXR1cm4gZm9ybWF0dGVkRGF0YTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmVwb3NpdG9yeSIsImNhbWVsQ2FzZSIsImlzUGxhaW5PYmplY3QiLCJtYXBLZXlzIiwibWFwVmFsdWVzIiwiVGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5IiwiY29uc3RydWN0b3IiLCJrbmV4UGciLCJ0YWJsZU5hbWUiLCJqc29uYkNvbHVtbnMiLCJ0cmFuc2Zvcm1Gcm9tREJEYXRhIiwiZGF0YSIsIkVycm9yIiwiY2FtZWxDYXNlRGF0YSIsIl92YWx1ZSIsImtleSIsImZvcm1hdHRlZERhdGEiLCJ2YWx1ZSIsImluY2x1ZGVzIiwiSlNPTiIsInBhcnNlIiwiZ2V0UmVzcG9uc2VzV2l0aFRocmVhZCIsInRocmVhZElkIiwibGltaXQiLCJxdWVyeSIsImtuZXgiLCJzZWxlY3QiLCJ3aGVyZSIsInRocmVhZF9pZCIsImxlZnRKb2luIiwib3JkZXJCeSIsIm1hcCIsInJlcyIsIl8iLCJhbnN3ZXJEZXRhaWwiLCJicmVha2Rvd25EZXRhaWwiLCJjaGFydERldGFpbCIsInVwZGF0ZU9uZSIsImlkIiwicXVlcnlPcHRpb25zIiwidHJhbnNmb3JtZWREYXRhIiwic3RhdHVzIiwidW5kZWZpbmVkIiwic3RyaW5naWZ5IiwiZXhlY3V0ZXIiLCJ0eCIsInJlc3VsdCIsInVwZGF0ZSIsInRyYW5zZm9ybVRvREJEYXRhIiwicmV0dXJuaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/threadResponseRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/repositories/viewRepository.ts":
/*!**********************************************************!*\
  !*** ./src/apollo/server/repositories/viewRepository.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ViewRepository: () => (/* binding */ ViewRepository)\n/* harmony export */ });\n/* harmony import */ var _baseRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseRepository */ \"(api)/./src/apollo/server/repositories/baseRepository.ts\");\n\nclass ViewRepository extends _baseRepository__WEBPACK_IMPORTED_MODULE_0__.BaseRepository {\n    constructor(knexPg){\n        super({\n            knexPg,\n            tableName: \"view\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvdmlld1JlcG9zaXRvcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDb0U7QUFjN0QsTUFBTUMsdUJBQ0hELDJEQUFjQTtJQUd0QkUsWUFBWUMsTUFBWSxDQUFFO1FBQ3hCLEtBQUssQ0FBQztZQUFFQTtZQUFRQyxXQUFXO1FBQU87SUFDcEM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXBvc2l0b3JpZXMvdmlld1JlcG9zaXRvcnkudHM/Yzk4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLbmV4IH0gZnJvbSAna25leCc7XG5pbXBvcnQgeyBCYXNlUmVwb3NpdG9yeSwgSUJhc2ljUmVwb3NpdG9yeSB9IGZyb20gJy4vYmFzZVJlcG9zaXRvcnknO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZpZXcge1xuICBpZDogbnVtYmVyOyAvLyBJRFxuICBwcm9qZWN0SWQ6IG51bWJlcjsgLy8gUmVmZXJlbmNlIHRvIHByb2plY3QuaWRcbiAgbmFtZTogc3RyaW5nOyAvLyBUaGUgdmlldyBuYW1lXG4gIHN0YXRlbWVudDogc3RyaW5nOyAvLyBUaGUgU1FMIHN0YXRlbWVudCBvZiB0aGlzIHZpZXdcbiAgY2FjaGVkOiBib29sZWFuOyAvLyBWaWV3IGlzIGNhY2hlZCBvciBub3RcbiAgcmVmcmVzaFRpbWU/OiBzdHJpbmc7IC8vIENvbnRhaW4gYSBudW1iZXIgZm9sbG93ZWQgYnkgYSB0aW1lIHVuaXQgKG5zLCB1cywgbXMsIHMsIG0sIGgsIGQpLiBGb3IgZXhhbXBsZSwgXCIyaFwiXG4gIHByb3BlcnRpZXM/OiBzdHJpbmc7IC8vIFZpZXcgcHJvcGVydGllcywgYSBqc29uIHN0cmluZywgdGhlIGRlc2NyaXB0aW9uIGFuZCBkaXNwbGF5TmFtZSBzaG91bGQgYmUgc3RvcmVkIGhlcmVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVmlld1JlcG9zaXRvcnkgZXh0ZW5kcyBJQmFzaWNSZXBvc2l0b3J5PFZpZXc+IHt9XG5cbmV4cG9ydCBjbGFzcyBWaWV3UmVwb3NpdG9yeVxuICBleHRlbmRzIEJhc2VSZXBvc2l0b3J5PFZpZXc+XG4gIGltcGxlbWVudHMgSVZpZXdSZXBvc2l0b3J5XG57XG4gIGNvbnN0cnVjdG9yKGtuZXhQZzogS25leCkge1xuICAgIHN1cGVyKHsga25leFBnLCB0YWJsZU5hbWU6ICd2aWV3JyB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VSZXBvc2l0b3J5IiwiVmlld1JlcG9zaXRvcnkiLCJjb25zdHJ1Y3RvciIsImtuZXhQZyIsInRhYmxlTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/repositories/viewRepository.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/resolvers.ts":
/*!****************************************!*\
  !*** ./src/apollo/server/resolvers.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var graphql_type_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! graphql-type-json */ \"graphql-type-json\");\n/* harmony import */ var graphql_type_json__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(graphql_type_json__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _resolvers_projectResolver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resolvers/projectResolver */ \"(api)/./src/apollo/server/resolvers/projectResolver.ts\");\n/* harmony import */ var _resolvers_modelResolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resolvers/modelResolver */ \"(api)/./src/apollo/server/resolvers/modelResolver.ts\");\n/* harmony import */ var _resolvers_askingResolver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resolvers/askingResolver */ \"(api)/./src/apollo/server/resolvers/askingResolver.ts\");\n/* harmony import */ var _resolvers_diagramResolver__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resolvers/diagramResolver */ \"(api)/./src/apollo/server/resolvers/diagramResolver.ts\");\n/* harmony import */ var _resolvers_learningResolver__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resolvers/learningResolver */ \"(api)/./src/apollo/server/resolvers/learningResolver.ts\");\n/* harmony import */ var _resolvers_dashboardResolver__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resolvers/dashboardResolver */ \"(api)/./src/apollo/server/resolvers/dashboardResolver.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_resolvers_projectResolver__WEBPACK_IMPORTED_MODULE_1__, _resolvers_modelResolver__WEBPACK_IMPORTED_MODULE_2__, _resolvers_askingResolver__WEBPACK_IMPORTED_MODULE_3__, _resolvers_diagramResolver__WEBPACK_IMPORTED_MODULE_4__, _resolvers_dashboardResolver__WEBPACK_IMPORTED_MODULE_6__]);\n([_resolvers_projectResolver__WEBPACK_IMPORTED_MODULE_1__, _resolvers_modelResolver__WEBPACK_IMPORTED_MODULE_2__, _resolvers_askingResolver__WEBPACK_IMPORTED_MODULE_3__, _resolvers_diagramResolver__WEBPACK_IMPORTED_MODULE_4__, _resolvers_dashboardResolver__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst projectResolver = new _resolvers_projectResolver__WEBPACK_IMPORTED_MODULE_1__.ProjectResolver();\nconst modelResolver = new _resolvers_modelResolver__WEBPACK_IMPORTED_MODULE_2__.ModelResolver();\nconst askingResolver = new _resolvers_askingResolver__WEBPACK_IMPORTED_MODULE_3__.AskingResolver();\nconst diagramResolver = new _resolvers_diagramResolver__WEBPACK_IMPORTED_MODULE_4__.DiagramResolver();\nconst learningResolver = new _resolvers_learningResolver__WEBPACK_IMPORTED_MODULE_5__.LearningResolver();\nconst dashboardResolver = new _resolvers_dashboardResolver__WEBPACK_IMPORTED_MODULE_6__.DashboardResolver();\nconst resolvers = {\n    JSON: (graphql_type_json__WEBPACK_IMPORTED_MODULE_0___default()),\n    Query: {\n        listDataSourceTables: projectResolver.listDataSourceTables,\n        autoGenerateRelation: projectResolver.autoGenerateRelation,\n        listModels: modelResolver.listModels,\n        model: modelResolver.getModel,\n        onboardingStatus: projectResolver.getOnboardingStatus,\n        modelSync: modelResolver.checkModelSync,\n        diagram: diagramResolver.getDiagram,\n        schemaChange: projectResolver.getSchemaChange,\n        // Ask\n        askingTask: askingResolver.getAskingTask,\n        suggestedQuestions: askingResolver.getSuggestedQuestions,\n        instantRecommendedQuestions: askingResolver.getInstantRecommendedQuestions,\n        // Thread\n        thread: askingResolver.getThread,\n        threads: askingResolver.listThreads,\n        threadResponse: askingResolver.getResponse,\n        nativeSql: modelResolver.getNativeSql,\n        // Views\n        listViews: modelResolver.listViews,\n        view: modelResolver.getView,\n        // Settings\n        settings: projectResolver.getSettings,\n        getMDL: modelResolver.getMDL,\n        // Learning\n        learningRecord: learningResolver.getLearningRecord,\n        // Recommendation questions\n        getThreadRecommendationQuestions: askingResolver.getThreadRecommendationQuestions,\n        getProjectRecommendationQuestions: projectResolver.getProjectRecommendationQuestions,\n        // Dashboard\n        dashboardItems: dashboardResolver.getDashboardItems\n    },\n    Mutation: {\n        deploy: modelResolver.deploy,\n        saveDataSource: projectResolver.saveDataSource,\n        startSampleDataset: projectResolver.startSampleDataset,\n        saveTables: projectResolver.saveTables,\n        saveRelations: projectResolver.saveRelations,\n        createModel: modelResolver.createModel,\n        updateModel: modelResolver.updateModel,\n        deleteModel: modelResolver.deleteModel,\n        previewModelData: modelResolver.previewModelData,\n        updateModelMetadata: modelResolver.updateModelMetadata,\n        triggerDataSourceDetection: projectResolver.triggerDataSourceDetection,\n        resolveSchemaChange: projectResolver.resolveSchemaChange,\n        // calculated field\n        createCalculatedField: modelResolver.createCalculatedField,\n        validateCalculatedField: modelResolver.validateCalculatedField,\n        updateCalculatedField: modelResolver.updateCalculatedField,\n        deleteCalculatedField: modelResolver.deleteCalculatedField,\n        // relation\n        createRelation: modelResolver.createRelation,\n        updateRelation: modelResolver.updateRelation,\n        deleteRelation: modelResolver.deleteRelation,\n        // Ask\n        createAskingTask: askingResolver.createAskingTask,\n        cancelAskingTask: askingResolver.cancelAskingTask,\n        createInstantRecommendedQuestions: askingResolver.createInstantRecommendedQuestions,\n        // Thread\n        createThread: askingResolver.createThread,\n        updateThread: askingResolver.updateThread,\n        deleteThread: askingResolver.deleteThread,\n        createThreadResponse: askingResolver.createThreadResponse,\n        previewData: askingResolver.previewData,\n        previewBreakdownData: askingResolver.previewBreakdownData,\n        // Generate Thread Response Breakdown\n        generateThreadResponseBreakdown: askingResolver.generateThreadResponseBreakdown,\n        // Generate Thread Response Answer\n        generateThreadResponseAnswer: askingResolver.generateThreadResponseAnswer,\n        // Generate Thread Response Chart\n        generateThreadResponseChart: askingResolver.generateThreadResponseChart,\n        // Adjust Thread Response Chart\n        adjustThreadResponseChart: askingResolver.adjustThreadResponseChart,\n        // Views\n        createView: modelResolver.createView,\n        deleteView: modelResolver.deleteView,\n        previewViewData: modelResolver.previewViewData,\n        validateView: modelResolver.validateView,\n        updateViewMetadata: modelResolver.updateViewMetadata,\n        // Settings\n        resetCurrentProject: projectResolver.resetCurrentProject,\n        updateCurrentProject: projectResolver.updateCurrentProject,\n        updateDataSource: projectResolver.updateDataSource,\n        // preview\n        previewSql: modelResolver.previewSql,\n        // Learning\n        saveLearningRecord: learningResolver.saveLearningRecord,\n        // Recommendation questions\n        generateThreadRecommendationQuestions: askingResolver.generateThreadRecommendationQuestions,\n        generateProjectRecommendationQuestions: askingResolver.generateProjectRecommendationQuestions,\n        // Dashboard\n        updateDashboardItemLayouts: dashboardResolver.updateDashboardItemLayouts,\n        createDashboardItem: dashboardResolver.createDashboardItem,\n        deleteDashboardItem: dashboardResolver.deleteDashboardItem,\n        previewItemSQL: dashboardResolver.previewItemSQL\n    },\n    ThreadResponse: askingResolver.getThreadResponseNestedResolver(),\n    DetailStep: askingResolver.getDetailStepNestedResolver(),\n    ResultCandidate: askingResolver.getResultCandidateNestedResolver(),\n    // Handle struct type to record for UI\n    DiagramModelField: {\n        type: _server_utils__WEBPACK_IMPORTED_MODULE_7__.convertColumnType\n    },\n    DiagramModelNestedField: {\n        type: _server_utils__WEBPACK_IMPORTED_MODULE_7__.convertColumnType\n    },\n    CompactColumn: {\n        type: _server_utils__WEBPACK_IMPORTED_MODULE_7__.convertColumnType\n    },\n    FieldInfo: {\n        type: _server_utils__WEBPACK_IMPORTED_MODULE_7__.convertColumnType\n    },\n    DetailedColumn: {\n        type: _server_utils__WEBPACK_IMPORTED_MODULE_7__.convertColumnType\n    },\n    DetailedNestedColumn: {\n        type: _server_utils__WEBPACK_IMPORTED_MODULE_7__.convertColumnType\n    },\n    DetailedChangeColumn: {\n        type: _server_utils__WEBPACK_IMPORTED_MODULE_7__.convertColumnType\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (resolvers);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUE0QztBQUNrQjtBQUNKO0FBQ0U7QUFDRTtBQUNFO0FBQ0U7QUFDaEI7QUFFbEQsTUFBTVEsa0JBQWtCLElBQUlQLHVFQUFlQTtBQUMzQyxNQUFNUSxnQkFBZ0IsSUFBSVAsbUVBQWFBO0FBQ3ZDLE1BQU1RLGlCQUFpQixJQUFJUCxxRUFBY0E7QUFDekMsTUFBTVEsa0JBQWtCLElBQUlQLHVFQUFlQTtBQUMzQyxNQUFNUSxtQkFBbUIsSUFBSVAseUVBQWdCQTtBQUM3QyxNQUFNUSxvQkFBb0IsSUFBSVAsMkVBQWlCQTtBQUMvQyxNQUFNUSxZQUFZO0lBQ2hCQyxNQUFNZiwwREFBV0E7SUFDakJnQixPQUFPO1FBQ0xDLHNCQUFzQlQsZ0JBQWdCUyxvQkFBb0I7UUFDMURDLHNCQUFzQlYsZ0JBQWdCVSxvQkFBb0I7UUFDMURDLFlBQVlWLGNBQWNVLFVBQVU7UUFDcENDLE9BQU9YLGNBQWNZLFFBQVE7UUFDN0JDLGtCQUFrQmQsZ0JBQWdCZSxtQkFBbUI7UUFDckRDLFdBQVdmLGNBQWNnQixjQUFjO1FBQ3ZDQyxTQUFTZixnQkFBZ0JnQixVQUFVO1FBQ25DQyxjQUFjcEIsZ0JBQWdCcUIsZUFBZTtRQUU3QyxNQUFNO1FBQ05DLFlBQVlwQixlQUFlcUIsYUFBYTtRQUN4Q0Msb0JBQW9CdEIsZUFBZXVCLHFCQUFxQjtRQUN4REMsNkJBQTZCeEIsZUFBZXlCLDhCQUE4QjtRQUUxRSxTQUFTO1FBQ1RDLFFBQVExQixlQUFlMkIsU0FBUztRQUNoQ0MsU0FBUzVCLGVBQWU2QixXQUFXO1FBQ25DQyxnQkFBZ0I5QixlQUFlK0IsV0FBVztRQUMxQ0MsV0FBV2pDLGNBQWNrQyxZQUFZO1FBRXJDLFFBQVE7UUFDUkMsV0FBV25DLGNBQWNtQyxTQUFTO1FBQ2xDQyxNQUFNcEMsY0FBY3FDLE9BQU87UUFFM0IsV0FBVztRQUNYQyxVQUFVdkMsZ0JBQWdCd0MsV0FBVztRQUNyQ0MsUUFBUXhDLGNBQWN3QyxNQUFNO1FBRTVCLFdBQVc7UUFDWEMsZ0JBQWdCdEMsaUJBQWlCdUMsaUJBQWlCO1FBRWxELDJCQUEyQjtRQUMzQkMsa0NBQ0UxQyxlQUFlMEMsZ0NBQWdDO1FBQ2pEQyxtQ0FDRTdDLGdCQUFnQjZDLGlDQUFpQztRQUVuRCxZQUFZO1FBQ1pDLGdCQUFnQnpDLGtCQUFrQjBDLGlCQUFpQjtJQUNyRDtJQUNBQyxVQUFVO1FBQ1JDLFFBQVFoRCxjQUFjZ0QsTUFBTTtRQUM1QkMsZ0JBQWdCbEQsZ0JBQWdCa0QsY0FBYztRQUM5Q0Msb0JBQW9CbkQsZ0JBQWdCbUQsa0JBQWtCO1FBQ3REQyxZQUFZcEQsZ0JBQWdCb0QsVUFBVTtRQUN0Q0MsZUFBZXJELGdCQUFnQnFELGFBQWE7UUFDNUNDLGFBQWFyRCxjQUFjcUQsV0FBVztRQUN0Q0MsYUFBYXRELGNBQWNzRCxXQUFXO1FBQ3RDQyxhQUFhdkQsY0FBY3VELFdBQVc7UUFDdENDLGtCQUFrQnhELGNBQWN3RCxnQkFBZ0I7UUFDaERDLHFCQUFxQnpELGNBQWN5RCxtQkFBbUI7UUFDdERDLDRCQUE0QjNELGdCQUFnQjJELDBCQUEwQjtRQUN0RUMscUJBQXFCNUQsZ0JBQWdCNEQsbUJBQW1CO1FBRXhELG1CQUFtQjtRQUNuQkMsdUJBQXVCNUQsY0FBYzRELHFCQUFxQjtRQUMxREMseUJBQXlCN0QsY0FBYzZELHVCQUF1QjtRQUM5REMsdUJBQXVCOUQsY0FBYzhELHFCQUFxQjtRQUMxREMsdUJBQXVCL0QsY0FBYytELHFCQUFxQjtRQUUxRCxXQUFXO1FBQ1hDLGdCQUFnQmhFLGNBQWNnRSxjQUFjO1FBQzVDQyxnQkFBZ0JqRSxjQUFjaUUsY0FBYztRQUM1Q0MsZ0JBQWdCbEUsY0FBY2tFLGNBQWM7UUFFNUMsTUFBTTtRQUNOQyxrQkFBa0JsRSxlQUFla0UsZ0JBQWdCO1FBQ2pEQyxrQkFBa0JuRSxlQUFlbUUsZ0JBQWdCO1FBQ2pEQyxtQ0FDRXBFLGVBQWVvRSxpQ0FBaUM7UUFFbEQsU0FBUztRQUNUQyxjQUFjckUsZUFBZXFFLFlBQVk7UUFDekNDLGNBQWN0RSxlQUFlc0UsWUFBWTtRQUN6Q0MsY0FBY3ZFLGVBQWV1RSxZQUFZO1FBQ3pDQyxzQkFBc0J4RSxlQUFld0Usb0JBQW9CO1FBQ3pEQyxhQUFhekUsZUFBZXlFLFdBQVc7UUFDdkNDLHNCQUFzQjFFLGVBQWUwRSxvQkFBb0I7UUFFekQscUNBQXFDO1FBQ3JDQyxpQ0FDRTNFLGVBQWUyRSwrQkFBK0I7UUFFaEQsa0NBQWtDO1FBQ2xDQyw4QkFBOEI1RSxlQUFlNEUsNEJBQTRCO1FBRXpFLGlDQUFpQztRQUNqQ0MsNkJBQTZCN0UsZUFBZTZFLDJCQUEyQjtRQUV2RSwrQkFBK0I7UUFDL0JDLDJCQUEyQjlFLGVBQWU4RSx5QkFBeUI7UUFFbkUsUUFBUTtRQUNSQyxZQUFZaEYsY0FBY2dGLFVBQVU7UUFDcENDLFlBQVlqRixjQUFjaUYsVUFBVTtRQUNwQ0MsaUJBQWlCbEYsY0FBY2tGLGVBQWU7UUFDOUNDLGNBQWNuRixjQUFjbUYsWUFBWTtRQUN4Q0Msb0JBQW9CcEYsY0FBY29GLGtCQUFrQjtRQUVwRCxXQUFXO1FBQ1hDLHFCQUFxQnRGLGdCQUFnQnNGLG1CQUFtQjtRQUN4REMsc0JBQXNCdkYsZ0JBQWdCdUYsb0JBQW9CO1FBQzFEQyxrQkFBa0J4RixnQkFBZ0J3RixnQkFBZ0I7UUFFbEQsVUFBVTtRQUNWQyxZQUFZeEYsY0FBY3dGLFVBQVU7UUFFcEMsV0FBVztRQUNYQyxvQkFBb0J0RixpQkFBaUJzRixrQkFBa0I7UUFFdkQsMkJBQTJCO1FBQzNCQyx1Q0FDRXpGLGVBQWV5RixxQ0FBcUM7UUFDdERDLHdDQUNFMUYsZUFBZTBGLHNDQUFzQztRQUV2RCxZQUFZO1FBQ1pDLDRCQUE0QnhGLGtCQUFrQndGLDBCQUEwQjtRQUN4RUMscUJBQXFCekYsa0JBQWtCeUYsbUJBQW1CO1FBQzFEQyxxQkFBcUIxRixrQkFBa0IwRixtQkFBbUI7UUFDMURDLGdCQUFnQjNGLGtCQUFrQjJGLGNBQWM7SUFDbEQ7SUFDQUMsZ0JBQWdCL0YsZUFBZWdHLCtCQUErQjtJQUM5REMsWUFBWWpHLGVBQWVrRywyQkFBMkI7SUFDdERDLGlCQUFpQm5HLGVBQWVvRyxnQ0FBZ0M7SUFFaEUsc0NBQXNDO0lBQ3RDQyxtQkFBbUI7UUFBRUMsTUFBTXpHLDREQUFpQkE7SUFBQztJQUM3QzBHLHlCQUF5QjtRQUFFRCxNQUFNekcsNERBQWlCQTtJQUFDO0lBQ25EMkcsZUFBZTtRQUFFRixNQUFNekcsNERBQWlCQTtJQUFDO0lBQ3pDNEcsV0FBVztRQUFFSCxNQUFNekcsNERBQWlCQTtJQUFDO0lBQ3JDNkcsZ0JBQWdCO1FBQUVKLE1BQU16Ryw0REFBaUJBO0lBQUM7SUFDMUM4RyxzQkFBc0I7UUFBRUwsTUFBTXpHLDREQUFpQkE7SUFBQztJQUNoRCtHLHNCQUFzQjtRQUFFTixNQUFNekcsNERBQWlCQTtJQUFDO0FBQ2xEO0FBRUEsaUVBQWVPLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVzb2x2ZXJzLnRzPzU1YTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdyYXBoUUxKU09OIGZyb20gJ2dyYXBocWwtdHlwZS1qc29uJztcbmltcG9ydCB7IFByb2plY3RSZXNvbHZlciB9IGZyb20gJy4vcmVzb2x2ZXJzL3Byb2plY3RSZXNvbHZlcic7XG5pbXBvcnQgeyBNb2RlbFJlc29sdmVyIH0gZnJvbSAnLi9yZXNvbHZlcnMvbW9kZWxSZXNvbHZlcic7XG5pbXBvcnQgeyBBc2tpbmdSZXNvbHZlciB9IGZyb20gJy4vcmVzb2x2ZXJzL2Fza2luZ1Jlc29sdmVyJztcbmltcG9ydCB7IERpYWdyYW1SZXNvbHZlciB9IGZyb20gJy4vcmVzb2x2ZXJzL2RpYWdyYW1SZXNvbHZlcic7XG5pbXBvcnQgeyBMZWFybmluZ1Jlc29sdmVyIH0gZnJvbSAnLi9yZXNvbHZlcnMvbGVhcm5pbmdSZXNvbHZlcic7XG5pbXBvcnQgeyBEYXNoYm9hcmRSZXNvbHZlciB9IGZyb20gJy4vcmVzb2x2ZXJzL2Rhc2hib2FyZFJlc29sdmVyJztcbmltcG9ydCB7IGNvbnZlcnRDb2x1bW5UeXBlIH0gZnJvbSAnQHNlcnZlci91dGlscyc7XG5cbmNvbnN0IHByb2plY3RSZXNvbHZlciA9IG5ldyBQcm9qZWN0UmVzb2x2ZXIoKTtcbmNvbnN0IG1vZGVsUmVzb2x2ZXIgPSBuZXcgTW9kZWxSZXNvbHZlcigpO1xuY29uc3QgYXNraW5nUmVzb2x2ZXIgPSBuZXcgQXNraW5nUmVzb2x2ZXIoKTtcbmNvbnN0IGRpYWdyYW1SZXNvbHZlciA9IG5ldyBEaWFncmFtUmVzb2x2ZXIoKTtcbmNvbnN0IGxlYXJuaW5nUmVzb2x2ZXIgPSBuZXcgTGVhcm5pbmdSZXNvbHZlcigpO1xuY29uc3QgZGFzaGJvYXJkUmVzb2x2ZXIgPSBuZXcgRGFzaGJvYXJkUmVzb2x2ZXIoKTtcbmNvbnN0IHJlc29sdmVycyA9IHtcbiAgSlNPTjogR3JhcGhRTEpTT04sXG4gIFF1ZXJ5OiB7XG4gICAgbGlzdERhdGFTb3VyY2VUYWJsZXM6IHByb2plY3RSZXNvbHZlci5saXN0RGF0YVNvdXJjZVRhYmxlcyxcbiAgICBhdXRvR2VuZXJhdGVSZWxhdGlvbjogcHJvamVjdFJlc29sdmVyLmF1dG9HZW5lcmF0ZVJlbGF0aW9uLFxuICAgIGxpc3RNb2RlbHM6IG1vZGVsUmVzb2x2ZXIubGlzdE1vZGVscyxcbiAgICBtb2RlbDogbW9kZWxSZXNvbHZlci5nZXRNb2RlbCxcbiAgICBvbmJvYXJkaW5nU3RhdHVzOiBwcm9qZWN0UmVzb2x2ZXIuZ2V0T25ib2FyZGluZ1N0YXR1cyxcbiAgICBtb2RlbFN5bmM6IG1vZGVsUmVzb2x2ZXIuY2hlY2tNb2RlbFN5bmMsXG4gICAgZGlhZ3JhbTogZGlhZ3JhbVJlc29sdmVyLmdldERpYWdyYW0sXG4gICAgc2NoZW1hQ2hhbmdlOiBwcm9qZWN0UmVzb2x2ZXIuZ2V0U2NoZW1hQ2hhbmdlLFxuXG4gICAgLy8gQXNrXG4gICAgYXNraW5nVGFzazogYXNraW5nUmVzb2x2ZXIuZ2V0QXNraW5nVGFzayxcbiAgICBzdWdnZXN0ZWRRdWVzdGlvbnM6IGFza2luZ1Jlc29sdmVyLmdldFN1Z2dlc3RlZFF1ZXN0aW9ucyxcbiAgICBpbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnM6IGFza2luZ1Jlc29sdmVyLmdldEluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9ucyxcblxuICAgIC8vIFRocmVhZFxuICAgIHRocmVhZDogYXNraW5nUmVzb2x2ZXIuZ2V0VGhyZWFkLFxuICAgIHRocmVhZHM6IGFza2luZ1Jlc29sdmVyLmxpc3RUaHJlYWRzLFxuICAgIHRocmVhZFJlc3BvbnNlOiBhc2tpbmdSZXNvbHZlci5nZXRSZXNwb25zZSxcbiAgICBuYXRpdmVTcWw6IG1vZGVsUmVzb2x2ZXIuZ2V0TmF0aXZlU3FsLFxuXG4gICAgLy8gVmlld3NcbiAgICBsaXN0Vmlld3M6IG1vZGVsUmVzb2x2ZXIubGlzdFZpZXdzLFxuICAgIHZpZXc6IG1vZGVsUmVzb2x2ZXIuZ2V0VmlldyxcblxuICAgIC8vIFNldHRpbmdzXG4gICAgc2V0dGluZ3M6IHByb2plY3RSZXNvbHZlci5nZXRTZXR0aW5ncyxcbiAgICBnZXRNREw6IG1vZGVsUmVzb2x2ZXIuZ2V0TURMLFxuXG4gICAgLy8gTGVhcm5pbmdcbiAgICBsZWFybmluZ1JlY29yZDogbGVhcm5pbmdSZXNvbHZlci5nZXRMZWFybmluZ1JlY29yZCxcblxuICAgIC8vIFJlY29tbWVuZGF0aW9uIHF1ZXN0aW9uc1xuICAgIGdldFRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zOlxuICAgICAgYXNraW5nUmVzb2x2ZXIuZ2V0VGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbnMsXG4gICAgZ2V0UHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zOlxuICAgICAgcHJvamVjdFJlc29sdmVyLmdldFByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyxcblxuICAgIC8vIERhc2hib2FyZFxuICAgIGRhc2hib2FyZEl0ZW1zOiBkYXNoYm9hcmRSZXNvbHZlci5nZXREYXNoYm9hcmRJdGVtcyxcbiAgfSxcbiAgTXV0YXRpb246IHtcbiAgICBkZXBsb3k6IG1vZGVsUmVzb2x2ZXIuZGVwbG95LFxuICAgIHNhdmVEYXRhU291cmNlOiBwcm9qZWN0UmVzb2x2ZXIuc2F2ZURhdGFTb3VyY2UsXG4gICAgc3RhcnRTYW1wbGVEYXRhc2V0OiBwcm9qZWN0UmVzb2x2ZXIuc3RhcnRTYW1wbGVEYXRhc2V0LFxuICAgIHNhdmVUYWJsZXM6IHByb2plY3RSZXNvbHZlci5zYXZlVGFibGVzLFxuICAgIHNhdmVSZWxhdGlvbnM6IHByb2plY3RSZXNvbHZlci5zYXZlUmVsYXRpb25zLFxuICAgIGNyZWF0ZU1vZGVsOiBtb2RlbFJlc29sdmVyLmNyZWF0ZU1vZGVsLFxuICAgIHVwZGF0ZU1vZGVsOiBtb2RlbFJlc29sdmVyLnVwZGF0ZU1vZGVsLFxuICAgIGRlbGV0ZU1vZGVsOiBtb2RlbFJlc29sdmVyLmRlbGV0ZU1vZGVsLFxuICAgIHByZXZpZXdNb2RlbERhdGE6IG1vZGVsUmVzb2x2ZXIucHJldmlld01vZGVsRGF0YSxcbiAgICB1cGRhdGVNb2RlbE1ldGFkYXRhOiBtb2RlbFJlc29sdmVyLnVwZGF0ZU1vZGVsTWV0YWRhdGEsXG4gICAgdHJpZ2dlckRhdGFTb3VyY2VEZXRlY3Rpb246IHByb2plY3RSZXNvbHZlci50cmlnZ2VyRGF0YVNvdXJjZURldGVjdGlvbixcbiAgICByZXNvbHZlU2NoZW1hQ2hhbmdlOiBwcm9qZWN0UmVzb2x2ZXIucmVzb2x2ZVNjaGVtYUNoYW5nZSxcblxuICAgIC8vIGNhbGN1bGF0ZWQgZmllbGRcbiAgICBjcmVhdGVDYWxjdWxhdGVkRmllbGQ6IG1vZGVsUmVzb2x2ZXIuY3JlYXRlQ2FsY3VsYXRlZEZpZWxkLFxuICAgIHZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkOiBtb2RlbFJlc29sdmVyLnZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkLFxuICAgIHVwZGF0ZUNhbGN1bGF0ZWRGaWVsZDogbW9kZWxSZXNvbHZlci51cGRhdGVDYWxjdWxhdGVkRmllbGQsXG4gICAgZGVsZXRlQ2FsY3VsYXRlZEZpZWxkOiBtb2RlbFJlc29sdmVyLmRlbGV0ZUNhbGN1bGF0ZWRGaWVsZCxcblxuICAgIC8vIHJlbGF0aW9uXG4gICAgY3JlYXRlUmVsYXRpb246IG1vZGVsUmVzb2x2ZXIuY3JlYXRlUmVsYXRpb24sXG4gICAgdXBkYXRlUmVsYXRpb246IG1vZGVsUmVzb2x2ZXIudXBkYXRlUmVsYXRpb24sXG4gICAgZGVsZXRlUmVsYXRpb246IG1vZGVsUmVzb2x2ZXIuZGVsZXRlUmVsYXRpb24sXG5cbiAgICAvLyBBc2tcbiAgICBjcmVhdGVBc2tpbmdUYXNrOiBhc2tpbmdSZXNvbHZlci5jcmVhdGVBc2tpbmdUYXNrLFxuICAgIGNhbmNlbEFza2luZ1Rhc2s6IGFza2luZ1Jlc29sdmVyLmNhbmNlbEFza2luZ1Rhc2ssXG4gICAgY3JlYXRlSW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zOlxuICAgICAgYXNraW5nUmVzb2x2ZXIuY3JlYXRlSW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zLFxuXG4gICAgLy8gVGhyZWFkXG4gICAgY3JlYXRlVGhyZWFkOiBhc2tpbmdSZXNvbHZlci5jcmVhdGVUaHJlYWQsXG4gICAgdXBkYXRlVGhyZWFkOiBhc2tpbmdSZXNvbHZlci51cGRhdGVUaHJlYWQsXG4gICAgZGVsZXRlVGhyZWFkOiBhc2tpbmdSZXNvbHZlci5kZWxldGVUaHJlYWQsXG4gICAgY3JlYXRlVGhyZWFkUmVzcG9uc2U6IGFza2luZ1Jlc29sdmVyLmNyZWF0ZVRocmVhZFJlc3BvbnNlLFxuICAgIHByZXZpZXdEYXRhOiBhc2tpbmdSZXNvbHZlci5wcmV2aWV3RGF0YSxcbiAgICBwcmV2aWV3QnJlYWtkb3duRGF0YTogYXNraW5nUmVzb2x2ZXIucHJldmlld0JyZWFrZG93bkRhdGEsXG5cbiAgICAvLyBHZW5lcmF0ZSBUaHJlYWQgUmVzcG9uc2UgQnJlYWtkb3duXG4gICAgZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUJyZWFrZG93bjpcbiAgICAgIGFza2luZ1Jlc29sdmVyLmdlbmVyYXRlVGhyZWFkUmVzcG9uc2VCcmVha2Rvd24sXG5cbiAgICAvLyBHZW5lcmF0ZSBUaHJlYWQgUmVzcG9uc2UgQW5zd2VyXG4gICAgZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUFuc3dlcjogYXNraW5nUmVzb2x2ZXIuZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUFuc3dlcixcblxuICAgIC8vIEdlbmVyYXRlIFRocmVhZCBSZXNwb25zZSBDaGFydFxuICAgIGdlbmVyYXRlVGhyZWFkUmVzcG9uc2VDaGFydDogYXNraW5nUmVzb2x2ZXIuZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUNoYXJ0LFxuXG4gICAgLy8gQWRqdXN0IFRocmVhZCBSZXNwb25zZSBDaGFydFxuICAgIGFkanVzdFRocmVhZFJlc3BvbnNlQ2hhcnQ6IGFza2luZ1Jlc29sdmVyLmFkanVzdFRocmVhZFJlc3BvbnNlQ2hhcnQsXG5cbiAgICAvLyBWaWV3c1xuICAgIGNyZWF0ZVZpZXc6IG1vZGVsUmVzb2x2ZXIuY3JlYXRlVmlldyxcbiAgICBkZWxldGVWaWV3OiBtb2RlbFJlc29sdmVyLmRlbGV0ZVZpZXcsXG4gICAgcHJldmlld1ZpZXdEYXRhOiBtb2RlbFJlc29sdmVyLnByZXZpZXdWaWV3RGF0YSxcbiAgICB2YWxpZGF0ZVZpZXc6IG1vZGVsUmVzb2x2ZXIudmFsaWRhdGVWaWV3LFxuICAgIHVwZGF0ZVZpZXdNZXRhZGF0YTogbW9kZWxSZXNvbHZlci51cGRhdGVWaWV3TWV0YWRhdGEsXG5cbiAgICAvLyBTZXR0aW5nc1xuICAgIHJlc2V0Q3VycmVudFByb2plY3Q6IHByb2plY3RSZXNvbHZlci5yZXNldEN1cnJlbnRQcm9qZWN0LFxuICAgIHVwZGF0ZUN1cnJlbnRQcm9qZWN0OiBwcm9qZWN0UmVzb2x2ZXIudXBkYXRlQ3VycmVudFByb2plY3QsXG4gICAgdXBkYXRlRGF0YVNvdXJjZTogcHJvamVjdFJlc29sdmVyLnVwZGF0ZURhdGFTb3VyY2UsXG5cbiAgICAvLyBwcmV2aWV3XG4gICAgcHJldmlld1NxbDogbW9kZWxSZXNvbHZlci5wcmV2aWV3U3FsLFxuXG4gICAgLy8gTGVhcm5pbmdcbiAgICBzYXZlTGVhcm5pbmdSZWNvcmQ6IGxlYXJuaW5nUmVzb2x2ZXIuc2F2ZUxlYXJuaW5nUmVjb3JkLFxuXG4gICAgLy8gUmVjb21tZW5kYXRpb24gcXVlc3Rpb25zXG4gICAgZ2VuZXJhdGVUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9uczpcbiAgICAgIGFza2luZ1Jlc29sdmVyLmdlbmVyYXRlVGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbnMsXG4gICAgZ2VuZXJhdGVQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnM6XG4gICAgICBhc2tpbmdSZXNvbHZlci5nZW5lcmF0ZVByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyxcblxuICAgIC8vIERhc2hib2FyZFxuICAgIHVwZGF0ZURhc2hib2FyZEl0ZW1MYXlvdXRzOiBkYXNoYm9hcmRSZXNvbHZlci51cGRhdGVEYXNoYm9hcmRJdGVtTGF5b3V0cyxcbiAgICBjcmVhdGVEYXNoYm9hcmRJdGVtOiBkYXNoYm9hcmRSZXNvbHZlci5jcmVhdGVEYXNoYm9hcmRJdGVtLFxuICAgIGRlbGV0ZURhc2hib2FyZEl0ZW06IGRhc2hib2FyZFJlc29sdmVyLmRlbGV0ZURhc2hib2FyZEl0ZW0sXG4gICAgcHJldmlld0l0ZW1TUUw6IGRhc2hib2FyZFJlc29sdmVyLnByZXZpZXdJdGVtU1FMLFxuICB9LFxuICBUaHJlYWRSZXNwb25zZTogYXNraW5nUmVzb2x2ZXIuZ2V0VGhyZWFkUmVzcG9uc2VOZXN0ZWRSZXNvbHZlcigpLFxuICBEZXRhaWxTdGVwOiBhc2tpbmdSZXNvbHZlci5nZXREZXRhaWxTdGVwTmVzdGVkUmVzb2x2ZXIoKSxcbiAgUmVzdWx0Q2FuZGlkYXRlOiBhc2tpbmdSZXNvbHZlci5nZXRSZXN1bHRDYW5kaWRhdGVOZXN0ZWRSZXNvbHZlcigpLFxuXG4gIC8vIEhhbmRsZSBzdHJ1Y3QgdHlwZSB0byByZWNvcmQgZm9yIFVJXG4gIERpYWdyYW1Nb2RlbEZpZWxkOiB7IHR5cGU6IGNvbnZlcnRDb2x1bW5UeXBlIH0sXG4gIERpYWdyYW1Nb2RlbE5lc3RlZEZpZWxkOiB7IHR5cGU6IGNvbnZlcnRDb2x1bW5UeXBlIH0sXG4gIENvbXBhY3RDb2x1bW46IHsgdHlwZTogY29udmVydENvbHVtblR5cGUgfSxcbiAgRmllbGRJbmZvOiB7IHR5cGU6IGNvbnZlcnRDb2x1bW5UeXBlIH0sXG4gIERldGFpbGVkQ29sdW1uOiB7IHR5cGU6IGNvbnZlcnRDb2x1bW5UeXBlIH0sXG4gIERldGFpbGVkTmVzdGVkQ29sdW1uOiB7IHR5cGU6IGNvbnZlcnRDb2x1bW5UeXBlIH0sXG4gIERldGFpbGVkQ2hhbmdlQ29sdW1uOiB7IHR5cGU6IGNvbnZlcnRDb2x1bW5UeXBlIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCByZXNvbHZlcnM7XG4iXSwibmFtZXMiOlsiR3JhcGhRTEpTT04iLCJQcm9qZWN0UmVzb2x2ZXIiLCJNb2RlbFJlc29sdmVyIiwiQXNraW5nUmVzb2x2ZXIiLCJEaWFncmFtUmVzb2x2ZXIiLCJMZWFybmluZ1Jlc29sdmVyIiwiRGFzaGJvYXJkUmVzb2x2ZXIiLCJjb252ZXJ0Q29sdW1uVHlwZSIsInByb2plY3RSZXNvbHZlciIsIm1vZGVsUmVzb2x2ZXIiLCJhc2tpbmdSZXNvbHZlciIsImRpYWdyYW1SZXNvbHZlciIsImxlYXJuaW5nUmVzb2x2ZXIiLCJkYXNoYm9hcmRSZXNvbHZlciIsInJlc29sdmVycyIsIkpTT04iLCJRdWVyeSIsImxpc3REYXRhU291cmNlVGFibGVzIiwiYXV0b0dlbmVyYXRlUmVsYXRpb24iLCJsaXN0TW9kZWxzIiwibW9kZWwiLCJnZXRNb2RlbCIsIm9uYm9hcmRpbmdTdGF0dXMiLCJnZXRPbmJvYXJkaW5nU3RhdHVzIiwibW9kZWxTeW5jIiwiY2hlY2tNb2RlbFN5bmMiLCJkaWFncmFtIiwiZ2V0RGlhZ3JhbSIsInNjaGVtYUNoYW5nZSIsImdldFNjaGVtYUNoYW5nZSIsImFza2luZ1Rhc2siLCJnZXRBc2tpbmdUYXNrIiwic3VnZ2VzdGVkUXVlc3Rpb25zIiwiZ2V0U3VnZ2VzdGVkUXVlc3Rpb25zIiwiaW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zIiwiZ2V0SW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zIiwidGhyZWFkIiwiZ2V0VGhyZWFkIiwidGhyZWFkcyIsImxpc3RUaHJlYWRzIiwidGhyZWFkUmVzcG9uc2UiLCJnZXRSZXNwb25zZSIsIm5hdGl2ZVNxbCIsImdldE5hdGl2ZVNxbCIsImxpc3RWaWV3cyIsInZpZXciLCJnZXRWaWV3Iiwic2V0dGluZ3MiLCJnZXRTZXR0aW5ncyIsImdldE1ETCIsImxlYXJuaW5nUmVjb3JkIiwiZ2V0TGVhcm5pbmdSZWNvcmQiLCJnZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyIsImdldFByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyIsImRhc2hib2FyZEl0ZW1zIiwiZ2V0RGFzaGJvYXJkSXRlbXMiLCJNdXRhdGlvbiIsImRlcGxveSIsInNhdmVEYXRhU291cmNlIiwic3RhcnRTYW1wbGVEYXRhc2V0Iiwic2F2ZVRhYmxlcyIsInNhdmVSZWxhdGlvbnMiLCJjcmVhdGVNb2RlbCIsInVwZGF0ZU1vZGVsIiwiZGVsZXRlTW9kZWwiLCJwcmV2aWV3TW9kZWxEYXRhIiwidXBkYXRlTW9kZWxNZXRhZGF0YSIsInRyaWdnZXJEYXRhU291cmNlRGV0ZWN0aW9uIiwicmVzb2x2ZVNjaGVtYUNoYW5nZSIsImNyZWF0ZUNhbGN1bGF0ZWRGaWVsZCIsInZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkIiwidXBkYXRlQ2FsY3VsYXRlZEZpZWxkIiwiZGVsZXRlQ2FsY3VsYXRlZEZpZWxkIiwiY3JlYXRlUmVsYXRpb24iLCJ1cGRhdGVSZWxhdGlvbiIsImRlbGV0ZVJlbGF0aW9uIiwiY3JlYXRlQXNraW5nVGFzayIsImNhbmNlbEFza2luZ1Rhc2siLCJjcmVhdGVJbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnMiLCJjcmVhdGVUaHJlYWQiLCJ1cGRhdGVUaHJlYWQiLCJkZWxldGVUaHJlYWQiLCJjcmVhdGVUaHJlYWRSZXNwb25zZSIsInByZXZpZXdEYXRhIiwicHJldmlld0JyZWFrZG93bkRhdGEiLCJnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQnJlYWtkb3duIiwiZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUFuc3dlciIsImdlbmVyYXRlVGhyZWFkUmVzcG9uc2VDaGFydCIsImFkanVzdFRocmVhZFJlc3BvbnNlQ2hhcnQiLCJjcmVhdGVWaWV3IiwiZGVsZXRlVmlldyIsInByZXZpZXdWaWV3RGF0YSIsInZhbGlkYXRlVmlldyIsInVwZGF0ZVZpZXdNZXRhZGF0YSIsInJlc2V0Q3VycmVudFByb2plY3QiLCJ1cGRhdGVDdXJyZW50UHJvamVjdCIsInVwZGF0ZURhdGFTb3VyY2UiLCJwcmV2aWV3U3FsIiwic2F2ZUxlYXJuaW5nUmVjb3JkIiwiZ2VuZXJhdGVUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyIsImdlbmVyYXRlUHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zIiwidXBkYXRlRGFzaGJvYXJkSXRlbUxheW91dHMiLCJjcmVhdGVEYXNoYm9hcmRJdGVtIiwiZGVsZXRlRGFzaGJvYXJkSXRlbSIsInByZXZpZXdJdGVtU1FMIiwiVGhyZWFkUmVzcG9uc2UiLCJnZXRUaHJlYWRSZXNwb25zZU5lc3RlZFJlc29sdmVyIiwiRGV0YWlsU3RlcCIsImdldERldGFpbFN0ZXBOZXN0ZWRSZXNvbHZlciIsIlJlc3VsdENhbmRpZGF0ZSIsImdldFJlc3VsdENhbmRpZGF0ZU5lc3RlZFJlc29sdmVyIiwiRGlhZ3JhbU1vZGVsRmllbGQiLCJ0eXBlIiwiRGlhZ3JhbU1vZGVsTmVzdGVkRmllbGQiLCJDb21wYWN0Q29sdW1uIiwiRmllbGRJbmZvIiwiRGV0YWlsZWRDb2x1bW4iLCJEZXRhaWxlZE5lc3RlZENvbHVtbiIsIkRldGFpbGVkQ2hhbmdlQ29sdW1uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/resolvers.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/resolvers/askingResolver.ts":
/*!*******************************************************!*\
  !*** ./src/apollo/server/resolvers/askingResolver.ts ***!
  \*******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AskingResolver: () => (/* binding */ AskingResolver)\n/* harmony export */ });\n/* harmony import */ var _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var lodash_reduce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash/reduce */ \"lodash/reduce\");\n/* harmony import */ var lodash_reduce__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash_reduce__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var sql_formatter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sql-formatter */ \"sql-formatter\");\n/* harmony import */ var _services_askingService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/askingService */ \"(api)/./src/apollo/server/services/askingService.ts\");\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data */ \"(api)/./src/apollo/server/data/index.ts\");\n/* harmony import */ var _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sql_formatter__WEBPACK_IMPORTED_MODULE_3__, _services_askingService__WEBPACK_IMPORTED_MODULE_4__, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__]);\n([sql_formatter__WEBPACK_IMPORTED_MODULE_3__, _services_askingService__WEBPACK_IMPORTED_MODULE_4__, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_2__.getLogger)(\"AskingResolver\");\nlogger.level = \"debug\";\nclass AskingResolver {\n    constructor(){\n        /**\n   * Nested resolvers\n   */ this.getThreadResponseNestedResolver = ()=>({\n                view: async (parent, _args, ctx)=>{\n                    const viewId = parent.viewId;\n                    if (!viewId) return null;\n                    const view = await ctx.viewRepository.findOneBy({\n                        id: viewId\n                    });\n                    const displayName = view.properties ? JSON.parse(view.properties)?.displayName : view.name;\n                    return {\n                        ...view,\n                        displayName\n                    };\n                },\n                answerDetail: (parent, _args, _ctx)=>{\n                    if (!parent?.answerDetail) return null;\n                    const { content, ...rest } = parent.answerDetail;\n                    if (!content) return parent.answerDetail;\n                    const formattedContent = content// replace the \\\\n to \\n\n                    .replace(/\\\\n/g, \"\\n\")// replace the \\\\\\\" to \\\",\n                    .replace(/\\\\\"/g, '\"');\n                    return {\n                        ...rest,\n                        content: formattedContent\n                    };\n                },\n                sql: (parent, _args, _ctx)=>{\n                    if (parent.breakdownDetail && parent.breakdownDetail.steps) {\n                        // construct sql from breakdownDetail\n                        return (0,sql_formatter__WEBPACK_IMPORTED_MODULE_3__.format)((0,_services_askingService__WEBPACK_IMPORTED_MODULE_4__.constructCteSql)(parent.breakdownDetail.steps));\n                    }\n                    return (0,sql_formatter__WEBPACK_IMPORTED_MODULE_3__.format)(parent.sql);\n                }\n            });\n        this.getDetailStepNestedResolver = ()=>({\n                sql: (parent, _args, _ctx)=>{\n                    return (0,sql_formatter__WEBPACK_IMPORTED_MODULE_3__.format)(parent.sql);\n                }\n            });\n        this.getResultCandidateNestedResolver = ()=>({\n                sql: (parent, _args, _ctx)=>{\n                    return (0,sql_formatter__WEBPACK_IMPORTED_MODULE_3__.format)(parent.sql);\n                },\n                view: async (parent, _args, ctx)=>{\n                    const viewId = parent.view?.id;\n                    if (!viewId) return parent.view;\n                    const view = await ctx.viewRepository.findOneBy({\n                        id: viewId\n                    });\n                    const displayName = view.properties ? JSON.parse(view.properties).displayName : view.name;\n                    return {\n                        ...parent.view,\n                        displayName\n                    };\n                }\n            });\n        this.createAskingTask = this.createAskingTask.bind(this);\n        this.cancelAskingTask = this.cancelAskingTask.bind(this);\n        this.getAskingTask = this.getAskingTask.bind(this);\n        this.createThread = this.createThread.bind(this);\n        this.getThread = this.getThread.bind(this);\n        this.updateThread = this.updateThread.bind(this);\n        this.deleteThread = this.deleteThread.bind(this);\n        this.listThreads = this.listThreads.bind(this);\n        this.createThreadResponse = this.createThreadResponse.bind(this);\n        this.getResponse = this.getResponse.bind(this);\n        this.previewData = this.previewData.bind(this);\n        this.previewBreakdownData = this.previewBreakdownData.bind(this);\n        this.getSuggestedQuestions = this.getSuggestedQuestions.bind(this);\n        this.createInstantRecommendedQuestions = this.createInstantRecommendedQuestions.bind(this);\n        this.getInstantRecommendedQuestions = this.getInstantRecommendedQuestions.bind(this);\n        this.generateThreadRecommendationQuestions = this.generateThreadRecommendationQuestions.bind(this);\n        this.generateProjectRecommendationQuestions = this.generateProjectRecommendationQuestions.bind(this);\n        this.getThreadRecommendationQuestions = this.getThreadRecommendationQuestions.bind(this);\n        this.generateThreadResponseBreakdown = this.generateThreadResponseBreakdown.bind(this);\n        this.generateThreadResponseAnswer = this.generateThreadResponseAnswer.bind(this);\n        this.generateThreadResponseChart = this.generateThreadResponseChart.bind(this);\n        this.adjustThreadResponseChart = this.adjustThreadResponseChart.bind(this);\n    }\n    async generateProjectRecommendationQuestions(_root, _args, ctx) {\n        await ctx.projectService.generateProjectRecommendationQuestions();\n        return true;\n    }\n    async generateThreadRecommendationQuestions(_root, args, ctx) {\n        const { threadId } = args;\n        const askingService = ctx.askingService;\n        await askingService.generateThreadRecommendationQuestions(threadId);\n        return true;\n    }\n    async getThreadRecommendationQuestions(_root, args, ctx) {\n        const { threadId } = args;\n        const askingService = ctx.askingService;\n        return askingService.getThreadRecommendationQuestions(threadId);\n    }\n    async getSuggestedQuestions(_root, _args, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const { sampleDataset } = project;\n        if (!sampleDataset) {\n            return {\n                questions: []\n            };\n        }\n        const questions = (0,_data__WEBPACK_IMPORTED_MODULE_5__.getSampleAskQuestions)(sampleDataset);\n        return {\n            questions\n        };\n    }\n    async createAskingTask(_root, args, ctx) {\n        const { question, threadId } = args.data;\n        const project = await ctx.projectService.getCurrentProject();\n        const askingService = ctx.askingService;\n        const data = {\n            question\n        };\n        const task = await askingService.createAskingTask(data, {\n            threadId,\n            language: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage[project.language] || _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage.EN\n        });\n        ctx.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.HOME_ASK_CANDIDATE, {\n            question,\n            taskId: task.id\n        });\n        return task;\n    }\n    async cancelAskingTask(_root, args, ctx) {\n        const { taskId } = args;\n        const askingService = ctx.askingService;\n        await askingService.cancelAskingTask(taskId);\n        return true;\n    }\n    async getAskingTask(_root, args, ctx) {\n        const { taskId } = args;\n        const askingService = ctx.askingService;\n        const askResult = await askingService.getAskingTask(taskId);\n        // telemetry\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.HOME_ASK_CANDIDATE;\n        if (askResult.status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.AskResultStatus.FINISHED) {\n            ctx.telemetry.sendEvent(eventName, {\n                taskId,\n                status: askResult.status,\n                candidates: askResult.response\n            });\n        }\n        if (askResult.status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.AskResultStatus.FAILED) {\n            ctx.telemetry.sendEvent(eventName, {\n                taskId,\n                status: askResult.status,\n                error: askResult.error\n            }, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.WrenService.AI, false);\n        }\n        // construct candidates from response\n        const candidates = await Promise.all((askResult.response || []).map(async (response)=>{\n            const view = response.viewId ? await ctx.viewRepository.findOneBy({\n                id: response.viewId\n            }) : null;\n            return {\n                type: response.type,\n                sql: response.sql,\n                view\n            };\n        }));\n        return {\n            type: askResult.type,\n            status: askResult.status,\n            error: askResult.error,\n            candidates,\n            intentReasoning: askResult.intentReasoning\n        };\n    }\n    async createThread(_root, args, ctx) {\n        const { data } = args;\n        const askingService = ctx.askingService;\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.HOME_CREATE_THREAD;\n        try {\n            const thread = await askingService.createThread(data);\n            ctx.telemetry.sendEvent(eventName, {});\n            return thread;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    // telemetry\n    }\n    async getThread(_root, args, ctx) {\n        const { threadId } = args;\n        const askingService = ctx.askingService;\n        const responses = await askingService.getResponsesWithThread(threadId);\n        // reduce responses to group by thread id\n        const thread = lodash_reduce__WEBPACK_IMPORTED_MODULE_1___default()(responses, (acc, response)=>{\n            if (!acc.id) {\n                acc.id = response.threadId;\n                acc.sql = response.sql;\n                acc.responses = [];\n            }\n            acc.responses.push({\n                id: response.id,\n                viewId: response.viewId,\n                threadId: response.threadId,\n                question: response.question,\n                sql: response.sql,\n                breakdownDetail: response.breakdownDetail,\n                answerDetail: response.answerDetail,\n                chartDetail: response.chartDetail\n            });\n            return acc;\n        }, {});\n        return thread;\n    }\n    async updateThread(_root, args, ctx) {\n        const { where, data } = args;\n        const askingService = ctx.askingService;\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.HOME_UPDATE_THREAD_SUMMARY;\n        const newSummary = data.summary;\n        try {\n            const thread = await askingService.updateThread(where.id, data);\n            // telemetry\n            ctx.telemetry.sendEvent(eventName, {\n                new_summary: newSummary\n            });\n            return thread;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                new_summary: newSummary\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async deleteThread(_root, args, ctx) {\n        const { where } = args;\n        const askingService = ctx.askingService;\n        await askingService.deleteThread(where.id);\n        return true;\n    }\n    async listThreads(_root, _args, ctx) {\n        const threads = await ctx.askingService.listThreads();\n        return threads;\n    }\n    async createThreadResponse(_root, args, ctx) {\n        const { threadId, data } = args;\n        const askingService = ctx.askingService;\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.HOME_ASK_FOLLOWUP_QUESTION;\n        try {\n            const response = await askingService.createThreadResponse(data, threadId);\n            ctx.telemetry.sendEvent(eventName, {\n                data\n            });\n            return response;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                data,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async generateThreadResponseBreakdown(_root, args, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const { responseId } = args;\n        const askingService = ctx.askingService;\n        const breakdownDetail = await askingService.generateThreadResponseBreakdown(responseId, {\n            language: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage[project.language] || _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage.EN\n        });\n        return breakdownDetail;\n    }\n    async generateThreadResponseAnswer(_root, args, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const { responseId } = args;\n        const askingService = ctx.askingService;\n        return askingService.generateThreadResponseAnswer(responseId, {\n            language: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage[project.language] || _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage.EN\n        });\n    }\n    async generateThreadResponseChart(_root, args, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const { responseId } = args;\n        const askingService = ctx.askingService;\n        return askingService.generateThreadResponseChart(responseId, {\n            language: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage[project.language] || _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage.EN\n        });\n    }\n    async adjustThreadResponseChart(_root, args, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const { responseId, data } = args;\n        const askingService = ctx.askingService;\n        return askingService.adjustThreadResponseChart(responseId, data, {\n            language: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage[project.language] || _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage.EN\n        });\n    }\n    async getResponse(_root, args, ctx) {\n        const { responseId } = args;\n        const askingService = ctx.askingService;\n        const response = await askingService.getResponse(responseId);\n        return response;\n    }\n    async previewData(_root, args, ctx) {\n        const { responseId, limit } = args.where;\n        const askingService = ctx.askingService;\n        const data = await askingService.previewData(responseId, limit);\n        return data;\n    }\n    async previewBreakdownData(_root, args, ctx) {\n        const { responseId, stepIndex, limit } = args.where;\n        const askingService = ctx.askingService;\n        const data = await askingService.previewBreakdownData(responseId, stepIndex, limit);\n        return data;\n    }\n    async createInstantRecommendedQuestions(_root, args, ctx) {\n        const { data } = args;\n        const askingService = ctx.askingService;\n        return askingService.createInstantRecommendedQuestions(data);\n    }\n    async getInstantRecommendedQuestions(_root, args, ctx) {\n        const { taskId } = args;\n        const askingService = ctx.askingService;\n        const result = await askingService.getInstantRecommendedQuestions(taskId);\n        return {\n            questions: result.response?.questions || [],\n            status: result.status,\n            error: result.error\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMvYXNraW5nUmVzb2x2ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBT2dDO0FBTUE7QUFFVTtBQUNIO0FBSUo7QUFLbEI7QUFDb0Q7QUFFckUsTUFBTVMsU0FBU04sd0RBQVNBLENBQUM7QUFDekJNLE9BQU9DLEtBQUssR0FBRztBQXFDUixNQUFNQztJQUNYQyxhQUFjO1FBZ2JkOztHQUVDLFFBQ01DLGtDQUFrQyxJQUFPO2dCQUM5Q0MsTUFBTSxPQUFPQyxRQUF3QkMsT0FBWUM7b0JBQy9DLE1BQU1DLFNBQVNILE9BQU9HLE1BQU07b0JBQzVCLElBQUksQ0FBQ0EsUUFBUSxPQUFPO29CQUNwQixNQUFNSixPQUFPLE1BQU1HLElBQUlFLGNBQWMsQ0FBQ0MsU0FBUyxDQUFDO3dCQUFFQyxJQUFJSDtvQkFBTztvQkFDN0QsTUFBTUksY0FBY1IsS0FBS1MsVUFBVSxHQUMvQkMsS0FBS0MsS0FBSyxDQUFDWCxLQUFLUyxVQUFVLEdBQUdELGNBQzdCUixLQUFLWSxJQUFJO29CQUNiLE9BQU87d0JBQUUsR0FBR1osSUFBSTt3QkFBRVE7b0JBQVk7Z0JBQ2hDO2dCQUNBSyxjQUFjLENBQUNaLFFBQXdCQyxPQUFZWTtvQkFDakQsSUFBSSxDQUFDYixRQUFRWSxjQUFjLE9BQU87b0JBRWxDLE1BQU0sRUFBRUUsT0FBTyxFQUFFLEdBQUdDLE1BQU0sR0FBR2YsT0FBT1ksWUFBWTtvQkFFaEQsSUFBSSxDQUFDRSxTQUFTLE9BQU9kLE9BQU9ZLFlBQVk7b0JBRXhDLE1BQU1JLG1CQUFtQkYsT0FDdkIsd0JBQXdCO3FCQUN2QkcsT0FBTyxDQUFDLFFBQVEsS0FDakIsMEJBQTBCO3FCQUN6QkEsT0FBTyxDQUFDLFFBQVE7b0JBRW5CLE9BQU87d0JBQ0wsR0FBR0YsSUFBSTt3QkFDUEQsU0FBU0U7b0JBQ1g7Z0JBQ0Y7Z0JBQ0FFLEtBQUssQ0FBQ2xCLFFBQXdCQyxPQUFZWTtvQkFDeEMsSUFBSWIsT0FB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Q3lCO1FBQ2xFLE9BQU87WUFDTFQsV0FBVzZDLE9BQU85QixRQUFRLEVBQUVmLGFBQWEsRUFBRTtZQUMzQ1ksUUFBUWlDLE9BQU9qQyxNQUFNO1lBQ3JCSyxPQUFPNEIsT0FBTzVCLEtBQUs7UUFDckI7SUFDRjtBQWtFRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMvYXNraW5nUmVzb2x2ZXIudHM/YTUyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBXcmVuQUlFcnJvcixcbiAgV3JlbkFJTGFuZ3VhZ2UsXG4gIEFza1Jlc3VsdFN0YXR1cyxcbiAgQXNrUmVzdWx0VHlwZSxcbiAgUmVjb21tZW5kYXRpb25RdWVzdGlvblN0YXR1cyxcbiAgQ2hhcnRBZGp1c3RtZW50T3B0aW9uLFxufSBmcm9tICdAc2VydmVyL21vZGVscy9hZGFwdG9yJztcbmltcG9ydCB7IFRocmVhZCB9IGZyb20gJy4uL3JlcG9zaXRvcmllcy90aHJlYWRSZXBvc2l0b3J5JztcbmltcG9ydCB7XG4gIERldGFpbFN0ZXAsXG4gIFRocmVhZFJlc3BvbnNlLFxufSBmcm9tICcuLi9yZXBvc2l0b3JpZXMvdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5JztcbmltcG9ydCB7IHJlZHVjZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBJQ29udGV4dCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BzZXJ2ZXIvdXRpbHMnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnc3FsLWZvcm1hdHRlcic7XG5pbXBvcnQge1xuICBjb25zdHJ1Y3RDdGVTcWwsXG4gIFRocmVhZFJlY29tbWVuZFF1ZXN0aW9uUmVzdWx0LFxufSBmcm9tICcuLi9zZXJ2aWNlcy9hc2tpbmdTZXJ2aWNlJztcbmltcG9ydCB7XG4gIFN1Z2dlc3RlZFF1ZXN0aW9uLFxuICBTYW1wbGVEYXRhc2V0TmFtZSxcbiAgZ2V0U2FtcGxlQXNrUXVlc3Rpb25zLFxufSBmcm9tICcuLi9kYXRhJztcbmltcG9ydCB7IFRlbGVtZXRyeUV2ZW50LCBXcmVuU2VydmljZSB9IGZyb20gJy4uL3RlbGVtZXRyeS90ZWxlbWV0cnknO1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ0Fza2luZ1Jlc29sdmVyJyk7XG5sb2dnZXIubGV2ZWwgPSAnZGVidWcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN1Z2dlc3RlZFF1ZXN0aW9uUmVzcG9uc2Uge1xuICBxdWVzdGlvbnM6IFN1Z2dlc3RlZFF1ZXN0aW9uW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFzayB7XG4gIGlkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXNraW5nVGFzayB7XG4gIHR5cGU6IEFza1Jlc3VsdFR5cGUgfCBudWxsO1xuICBzdGF0dXM6IEFza1Jlc3VsdFN0YXR1cztcbiAgY2FuZGlkYXRlczogQXJyYXk8e1xuICAgIHNxbDogc3RyaW5nO1xuICB9PjtcbiAgZXJyb3I6IFdyZW5BSUVycm9yIHwgbnVsbDtcbiAgaW50ZW50UmVhc29uaW5nPzogc3RyaW5nO1xufVxuXG4vLyBEZXRhaWxlZFRocmVhZCBpcyBhIHR5cGUgdGhhdCByZXByZXNlbnRzIGEgZGV0YWlsZWQgdGhyZWFkLCB3aGljaCBpcyBhIHRocmVhZCB3aXRoIHJlc3BvbnNlcy5cbmV4cG9ydCBpbnRlcmZhY2UgRGV0YWlsZWRUaHJlYWQge1xuICBpZDogbnVtYmVyOyAvLyBJRFxuICBzcWw6IHN0cmluZzsgLy8gU1FMXG4gIHJlc3BvbnNlczogVGhyZWFkUmVzcG9uc2VbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWNvbW1lbmRlZFF1ZXN0aW9uc1Rhc2sge1xuICBxdWVzdGlvbnM6IHtcbiAgICBxdWVzdGlvbjogc3RyaW5nO1xuICAgIGNhdGVnb3J5OiBzdHJpbmc7XG4gICAgc3FsOiBzdHJpbmc7XG4gIH1bXTtcbiAgc3RhdHVzOiBSZWNvbW1lbmRhdGlvblF1ZXN0aW9uU3RhdHVzO1xuICBlcnJvcjogV3JlbkFJRXJyb3IgfCBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgQXNraW5nUmVzb2x2ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNyZWF0ZUFza2luZ1Rhc2sgPSB0aGlzLmNyZWF0ZUFza2luZ1Rhc2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbmNlbEFza2luZ1Rhc2sgPSB0aGlzLmNhbmNlbEFza2luZ1Rhc2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldEFza2luZ1Rhc2sgPSB0aGlzLmdldEFza2luZ1Rhc2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmNyZWF0ZVRocmVhZCA9IHRoaXMuY3JlYXRlVGhyZWFkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRUaHJlYWQgPSB0aGlzLmdldFRocmVhZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlVGhyZWFkID0gdGhpcy51cGRhdGVUaHJlYWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZVRocmVhZCA9IHRoaXMuZGVsZXRlVGhyZWFkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5saXN0VGhyZWFkcyA9IHRoaXMubGlzdFRocmVhZHMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNyZWF0ZVRocmVhZFJlc3BvbnNlID0gdGhpcy5jcmVhdGVUaHJlYWRSZXNwb25zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0UmVzcG9uc2UgPSB0aGlzLmdldFJlc3BvbnNlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5wcmV2aWV3RGF0YSA9IHRoaXMucHJldmlld0RhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnByZXZpZXdCcmVha2Rvd25EYXRhID0gdGhpcy5wcmV2aWV3QnJlYWtkb3duRGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0U3VnZ2VzdGVkUXVlc3Rpb25zID0gdGhpcy5nZXRTdWdnZXN0ZWRRdWVzdGlvbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNyZWF0ZUluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9ucyA9XG4gICAgICB0aGlzLmNyZWF0ZUluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0SW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zID1cbiAgICAgIHRoaXMuZ2V0SW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZW5lcmF0ZVRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zID1cbiAgICAgIHRoaXMuZ2VuZXJhdGVUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2VuZXJhdGVQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnMgPVxuICAgICAgdGhpcy5nZW5lcmF0ZVByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5nZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyA9XG4gICAgICB0aGlzLmdldFRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZW5lcmF0ZVRocmVhZFJlc3BvbnNlQnJlYWtkb3duID1cbiAgICAgIHRoaXMuZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUJyZWFrZG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUFuc3dlciA9XG4gICAgICB0aGlzLmdlbmVyYXRlVGhyZWFkUmVzcG9uc2VBbnN3ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdlbmVyYXRlVGhyZWFkUmVzcG9uc2VDaGFydCA9XG4gICAgICB0aGlzLmdlbmVyYXRlVGhyZWFkUmVzcG9uc2VDaGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWRqdXN0VGhyZWFkUmVzcG9uc2VDaGFydCA9IHRoaXMuYWRqdXN0VGhyZWFkUmVzcG9uc2VDaGFydC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdlbmVyYXRlUHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKFxuICAgIF9yb290OiBhbnksXG4gICAgX2FyZ3M6IGFueSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2VuZXJhdGVQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnMoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZW5lcmF0ZVRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogeyB0aHJlYWRJZDogbnVtYmVyIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgeyB0aHJlYWRJZCB9ID0gYXJncztcbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgYXdhaXQgYXNraW5nU2VydmljZS5nZW5lcmF0ZVRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKHRocmVhZElkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyhcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgdGhyZWFkSWQ6IG51bWJlciB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8VGhyZWFkUmVjb21tZW5kUXVlc3Rpb25SZXN1bHQ+IHtcbiAgICBjb25zdCB7IHRocmVhZElkIH0gPSBhcmdzO1xuICAgIGNvbnN0IGFza2luZ1NlcnZpY2UgPSBjdHguYXNraW5nU2VydmljZTtcbiAgICByZXR1cm4gYXNraW5nU2VydmljZS5nZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyh0aHJlYWRJZCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0U3VnZ2VzdGVkUXVlc3Rpb25zKFxuICAgIF9yb290OiBhbnksXG4gICAgX2FyZ3M6IGFueSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPFN1Z2dlc3RlZFF1ZXN0aW9uUmVzcG9uc2U+IHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgeyBzYW1wbGVEYXRhc2V0IH0gPSBwcm9qZWN0O1xuICAgIGlmICghc2FtcGxlRGF0YXNldCkge1xuICAgICAgcmV0dXJuIHsgcXVlc3Rpb25zOiBbXSB9O1xuICAgIH1cbiAgICBjb25zdCBxdWVzdGlvbnMgPSBnZXRTYW1wbGVBc2tRdWVzdGlvbnMoc2FtcGxlRGF0YXNldCBhcyBTYW1wbGVEYXRhc2V0TmFtZSk7XG4gICAgcmV0dXJuIHsgcXVlc3Rpb25zIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlQXNraW5nVGFzayhcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgZGF0YTogeyBxdWVzdGlvbjogc3RyaW5nOyB0aHJlYWRJZD86IG51bWJlciB9IH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxUYXNrPiB7XG4gICAgY29uc3QgeyBxdWVzdGlvbiwgdGhyZWFkSWQgfSA9IGFyZ3MuZGF0YTtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG5cbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgY29uc3QgZGF0YSA9IHsgcXVlc3Rpb24gfTtcbiAgICBjb25zdCB0YXNrID0gYXdhaXQgYXNraW5nU2VydmljZS5jcmVhdGVBc2tpbmdUYXNrKGRhdGEsIHtcbiAgICAgIHRocmVhZElkLFxuICAgICAgbGFuZ3VhZ2U6IFdyZW5BSUxhbmd1YWdlW3Byb2plY3QubGFuZ3VhZ2VdIHx8IFdyZW5BSUxhbmd1YWdlLkVOLFxuICAgIH0pO1xuICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFRlbGVtZXRyeUV2ZW50LkhPTUVfQVNLX0NBTkRJREFURSwge1xuICAgICAgcXVlc3Rpb24sXG4gICAgICB0YXNrSWQ6IHRhc2suaWQsXG4gICAgfSk7XG4gICAgcmV0dXJuIHRhc2s7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY2FuY2VsQXNraW5nVGFzayhcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgdGFza0lkOiBzdHJpbmcgfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCB7IHRhc2tJZCB9ID0gYXJncztcbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgYXdhaXQgYXNraW5nU2VydmljZS5jYW5jZWxBc2tpbmdUYXNrKHRhc2tJZCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0QXNraW5nVGFzayhcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgdGFza0lkOiBzdHJpbmcgfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPEFza2luZ1Rhc2s+IHtcbiAgICBjb25zdCB7IHRhc2tJZCB9ID0gYXJncztcbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgY29uc3QgYXNrUmVzdWx0ID0gYXdhaXQgYXNraW5nU2VydmljZS5nZXRBc2tpbmdUYXNrKHRhc2tJZCk7XG5cbiAgICAvLyB0ZWxlbWV0cnlcbiAgICBjb25zdCBldmVudE5hbWUgPSBUZWxlbWV0cnlFdmVudC5IT01FX0FTS19DQU5ESURBVEU7XG4gICAgaWYgKGFza1Jlc3VsdC5zdGF0dXMgPT09IEFza1Jlc3VsdFN0YXR1cy5GSU5JU0hFRCkge1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7XG4gICAgICAgIHRhc2tJZCxcbiAgICAgICAgc3RhdHVzOiBhc2tSZXN1bHQuc3RhdHVzLFxuICAgICAgICBjYW5kaWRhdGVzOiBhc2tSZXN1bHQucmVzcG9uc2UsXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGFza1Jlc3VsdC5zdGF0dXMgPT09IEFza1Jlc3VsdFN0YXR1cy5GQUlMRUQpIHtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHtcbiAgICAgICAgICB0YXNrSWQsXG4gICAgICAgICAgc3RhdHVzOiBhc2tSZXN1bHQuc3RhdHVzLFxuICAgICAgICAgIGVycm9yOiBhc2tSZXN1bHQuZXJyb3IsXG4gICAgICAgIH0sXG4gICAgICAgIFdyZW5TZXJ2aWNlLkFJLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gY29uc3RydWN0IGNhbmRpZGF0ZXMgZnJvbSByZXNwb25zZVxuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIChhc2tSZXN1bHQucmVzcG9uc2UgfHwgW10pLm1hcChhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc3QgdmlldyA9IHJlc3BvbnNlLnZpZXdJZFxuICAgICAgICAgID8gYXdhaXQgY3R4LnZpZXdSZXBvc2l0b3J5LmZpbmRPbmVCeSh7IGlkOiByZXNwb25zZS52aWV3SWQgfSlcbiAgICAgICAgICA6IG51bGw7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogcmVzcG9uc2UudHlwZSxcbiAgICAgICAgICBzcWw6IHJlc3BvbnNlLnNxbCxcbiAgICAgICAgICB2aWV3LFxuICAgICAgICB9O1xuICAgICAgfSksXG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBhc2tSZXN1bHQudHlwZSxcbiAgICAgIHN0YXR1czogYXNrUmVzdWx0LnN0YXR1cyxcbiAgICAgIGVycm9yOiBhc2tSZXN1bHQuZXJyb3IsXG4gICAgICBjYW5kaWRhdGVzLFxuICAgICAgaW50ZW50UmVhc29uaW5nOiBhc2tSZXN1bHQuaW50ZW50UmVhc29uaW5nLFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlVGhyZWFkKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczoge1xuICAgICAgZGF0YToge1xuICAgICAgICBxdWVzdGlvbj86IHN0cmluZztcbiAgICAgICAgc3FsPzogc3RyaW5nO1xuICAgICAgICB2aWV3SWQ/OiBudW1iZXI7XG4gICAgICB9O1xuICAgIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxUaHJlYWQ+IHtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGFyZ3M7XG5cbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgY29uc3QgZXZlbnROYW1lID0gVGVsZW1ldHJ5RXZlbnQuSE9NRV9DUkVBVEVfVEhSRUFEO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aHJlYWQgPSBhd2FpdCBhc2tpbmdTZXJ2aWNlLmNyZWF0ZVRocmVhZChkYXRhKTtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50TmFtZSwge30pO1xuICAgICAgcmV0dXJuIHRocmVhZDtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSxcbiAgICAgICAgZXJyLmV4dGVuc2lvbnM/LnNlcnZpY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgLy8gdGVsZW1ldHJ5XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0VGhyZWFkKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogeyB0aHJlYWRJZDogbnVtYmVyIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxEZXRhaWxlZFRocmVhZD4ge1xuICAgIGNvbnN0IHsgdGhyZWFkSWQgfSA9IGFyZ3M7XG5cbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgYXNraW5nU2VydmljZS5nZXRSZXNwb25zZXNXaXRoVGhyZWFkKHRocmVhZElkKTtcbiAgICAvLyByZWR1Y2UgcmVzcG9uc2VzIHRvIGdyb3VwIGJ5IHRocmVhZCBpZFxuICAgIGNvbnN0IHRocmVhZCA9IHJlZHVjZShcbiAgICAgIHJlc3BvbnNlcyxcbiAgICAgIChhY2MsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmICghYWNjLmlkKSB7XG4gICAgICAgICAgYWNjLmlkID0gcmVzcG9uc2UudGhyZWFkSWQ7XG4gICAgICAgICAgYWNjLnNxbCA9IHJlc3BvbnNlLnNxbDtcbiAgICAgICAgICBhY2MucmVzcG9uc2VzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBhY2MucmVzcG9uc2VzLnB1c2goe1xuICAgICAgICAgIGlkOiByZXNwb25zZS5pZCxcbiAgICAgICAgICB2aWV3SWQ6IHJlc3BvbnNlLnZpZXdJZCxcbiAgICAgICAgICB0aHJlYWRJZDogcmVzcG9uc2UudGhyZWFkSWQsXG4gICAgICAgICAgcXVlc3Rpb246IHJlc3BvbnNlLnF1ZXN0aW9uLFxuICAgICAgICAgIHNxbDogcmVzcG9uc2Uuc3FsLFxuICAgICAgICAgIGJyZWFrZG93bkRldGFpbDogcmVzcG9uc2UuYnJlYWtkb3duRGV0YWlsLFxuICAgICAgICAgIGFuc3dlckRldGFpbDogcmVzcG9uc2UuYW5zd2VyRGV0YWlsLFxuICAgICAgICAgIGNoYXJ0RGV0YWlsOiByZXNwb25zZS5jaGFydERldGFpbCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sXG4gICAgICB7fSBhcyBhbnksXG4gICAgKTtcblxuICAgIHJldHVybiB0aHJlYWQ7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBkYXRlVGhyZWFkKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogeyB3aGVyZTogeyBpZDogbnVtYmVyIH07IGRhdGE6IHsgc3VtbWFyeTogc3RyaW5nIH0gfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPFRocmVhZD4ge1xuICAgIGNvbnN0IHsgd2hlcmUsIGRhdGEgfSA9IGFyZ3M7XG5cbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgY29uc3QgZXZlbnROYW1lID0gVGVsZW1ldHJ5RXZlbnQuSE9NRV9VUERBVEVfVEhSRUFEX1NVTU1BUlk7XG4gICAgY29uc3QgbmV3U3VtbWFyeSA9IGRhdGEuc3VtbWFyeTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGhyZWFkID0gYXdhaXQgYXNraW5nU2VydmljZS51cGRhdGVUaHJlYWQod2hlcmUuaWQsIGRhdGEpO1xuICAgICAgLy8gdGVsZW1ldHJ5XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChldmVudE5hbWUsIHtcbiAgICAgICAgbmV3X3N1bW1hcnk6IG5ld1N1bW1hcnksXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aHJlYWQ7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHtcbiAgICAgICAgICBuZXdfc3VtbWFyeTogbmV3U3VtbWFyeSxcbiAgICAgICAgfSxcbiAgICAgICAgZXJyLmV4dGVuc2lvbnM/LnNlcnZpY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVsZXRlVGhyZWFkKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogeyB3aGVyZTogeyBpZDogbnVtYmVyIH0gfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCB7IHdoZXJlIH0gPSBhcmdzO1xuXG4gICAgY29uc3QgYXNraW5nU2VydmljZSA9IGN0eC5hc2tpbmdTZXJ2aWNlO1xuICAgIGF3YWl0IGFza2luZ1NlcnZpY2UuZGVsZXRlVGhyZWFkKHdoZXJlLmlkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBsaXN0VGhyZWFkcyhcbiAgICBfcm9vdDogYW55LFxuICAgIF9hcmdzOiBhbnksXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxUaHJlYWRbXT4ge1xuICAgIGNvbnN0IHRocmVhZHMgPSBhd2FpdCBjdHguYXNraW5nU2VydmljZS5saXN0VGhyZWFkcygpO1xuICAgIHJldHVybiB0aHJlYWRzO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNyZWF0ZVRocmVhZFJlc3BvbnNlKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczoge1xuICAgICAgdGhyZWFkSWQ6IG51bWJlcjtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcXVlc3Rpb24/OiBzdHJpbmc7XG4gICAgICAgIHNxbD86IHN0cmluZztcbiAgICAgICAgdmlld0lkPzogbnVtYmVyO1xuICAgICAgfTtcbiAgICB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IHRocmVhZElkLCBkYXRhIH0gPSBhcmdzO1xuXG4gICAgY29uc3QgYXNraW5nU2VydmljZSA9IGN0eC5hc2tpbmdTZXJ2aWNlO1xuICAgIGNvbnN0IGV2ZW50TmFtZSA9IFRlbGVtZXRyeUV2ZW50LkhPTUVfQVNLX0ZPTExPV1VQX1FVRVNUSU9OO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFza2luZ1NlcnZpY2UuY3JlYXRlVGhyZWFkUmVzcG9uc2UoZGF0YSwgdGhyZWFkSWQpO1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7IGRhdGEgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHsgZGF0YSwgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGdlbmVyYXRlVGhyZWFkUmVzcG9uc2VCcmVha2Rvd24oXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmdzOiB7IHJlc3BvbnNlSWQ6IG51bWJlciB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+IHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgeyByZXNwb25zZUlkIH0gPSBhcmdzO1xuICAgIGNvbnN0IGFza2luZ1NlcnZpY2UgPSBjdHguYXNraW5nU2VydmljZTtcbiAgICBjb25zdCBicmVha2Rvd25EZXRhaWwgPSBhd2FpdCBhc2tpbmdTZXJ2aWNlLmdlbmVyYXRlVGhyZWFkUmVzcG9uc2VCcmVha2Rvd24oXG4gICAgICByZXNwb25zZUlkLFxuICAgICAgeyBsYW5ndWFnZTogV3JlbkFJTGFuZ3VhZ2VbcHJvamVjdC5sYW5ndWFnZV0gfHwgV3JlbkFJTGFuZ3VhZ2UuRU4gfSxcbiAgICApO1xuICAgIHJldHVybiBicmVha2Rvd25EZXRhaWw7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUFuc3dlcihcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgcmVzcG9uc2VJZDogbnVtYmVyIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxUaHJlYWRSZXNwb25zZT4ge1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCB7IHJlc3BvbnNlSWQgfSA9IGFyZ3M7XG4gICAgY29uc3QgYXNraW5nU2VydmljZSA9IGN0eC5hc2tpbmdTZXJ2aWNlO1xuICAgIHJldHVybiBhc2tpbmdTZXJ2aWNlLmdlbmVyYXRlVGhyZWFkUmVzcG9uc2VBbnN3ZXIocmVzcG9uc2VJZCwge1xuICAgICAgbGFuZ3VhZ2U6IFdyZW5BSUxhbmd1YWdlW3Byb2plY3QubGFuZ3VhZ2VdIHx8IFdyZW5BSUxhbmd1YWdlLkVOLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdlbmVyYXRlVGhyZWFkUmVzcG9uc2VDaGFydChcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgcmVzcG9uc2VJZDogbnVtYmVyIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxUaHJlYWRSZXNwb25zZT4ge1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCB7IHJlc3BvbnNlSWQgfSA9IGFyZ3M7XG4gICAgY29uc3QgYXNraW5nU2VydmljZSA9IGN0eC5hc2tpbmdTZXJ2aWNlO1xuICAgIHJldHVybiBhc2tpbmdTZXJ2aWNlLmdlbmVyYXRlVGhyZWFkUmVzcG9uc2VDaGFydChyZXNwb25zZUlkLCB7XG4gICAgICBsYW5ndWFnZTogV3JlbkFJTGFuZ3VhZ2VbcHJvamVjdC5sYW5ndWFnZV0gfHwgV3JlbkFJTGFuZ3VhZ2UuRU4sXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYWRqdXN0VGhyZWFkUmVzcG9uc2VDaGFydChcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgcmVzcG9uc2VJZDogbnVtYmVyOyBkYXRhOiBDaGFydEFkanVzdG1lbnRPcHRpb24gfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPFRocmVhZFJlc3BvbnNlPiB7XG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IHsgcmVzcG9uc2VJZCwgZGF0YSB9ID0gYXJncztcbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgcmV0dXJuIGFza2luZ1NlcnZpY2UuYWRqdXN0VGhyZWFkUmVzcG9uc2VDaGFydChyZXNwb25zZUlkLCBkYXRhLCB7XG4gICAgICBsYW5ndWFnZTogV3JlbkFJTGFuZ3VhZ2VbcHJvamVjdC5sYW5ndWFnZV0gfHwgV3JlbkFJTGFuZ3VhZ2UuRU4sXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVzcG9uc2UoXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmdzOiB7IHJlc3BvbnNlSWQ6IG51bWJlciB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IHJlc3BvbnNlSWQgfSA9IGFyZ3M7XG4gICAgY29uc3QgYXNraW5nU2VydmljZSA9IGN0eC5hc2tpbmdTZXJ2aWNlO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXNraW5nU2VydmljZS5nZXRSZXNwb25zZShyZXNwb25zZUlkKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBwcmV2aWV3RGF0YShcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgd2hlcmU6IHsgcmVzcG9uc2VJZDogbnVtYmVyOyBzdGVwSW5kZXg/OiBudW1iZXI7IGxpbWl0PzogbnVtYmVyIH0gfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHsgcmVzcG9uc2VJZCwgbGltaXQgfSA9IGFyZ3Mud2hlcmU7XG4gICAgY29uc3QgYXNraW5nU2VydmljZSA9IGN0eC5hc2tpbmdTZXJ2aWNlO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhc2tpbmdTZXJ2aWNlLnByZXZpZXdEYXRhKHJlc3BvbnNlSWQsIGxpbWl0KTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBwcmV2aWV3QnJlYWtkb3duRGF0YShcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgd2hlcmU6IHsgcmVzcG9uc2VJZDogbnVtYmVyOyBzdGVwSW5kZXg/OiBudW1iZXI7IGxpbWl0PzogbnVtYmVyIH0gfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHsgcmVzcG9uc2VJZCwgc3RlcEluZGV4LCBsaW1pdCB9ID0gYXJncy53aGVyZTtcbiAgICBjb25zdCBhc2tpbmdTZXJ2aWNlID0gY3R4LmFza2luZ1NlcnZpY2U7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGFza2luZ1NlcnZpY2UucHJldmlld0JyZWFrZG93bkRhdGEoXG4gICAgICByZXNwb25zZUlkLFxuICAgICAgc3RlcEluZGV4LFxuICAgICAgbGltaXQsXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjcmVhdGVJbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnMoXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmdzOiB7IGRhdGE6IHsgcHJldmlvdXNRdWVzdGlvbnM/OiBzdHJpbmdbXSB9IH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxUYXNrPiB7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBhcmdzO1xuICAgIGNvbnN0IGFza2luZ1NlcnZpY2UgPSBjdHguYXNraW5nU2VydmljZTtcbiAgICByZXR1cm4gYXNraW5nU2VydmljZS5jcmVhdGVJbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnMoZGF0YSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0SW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogeyB0YXNrSWQ6IHN0cmluZyB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8UmVjb21tZW5kZWRRdWVzdGlvbnNUYXNrPiB7XG4gICAgY29uc3QgeyB0YXNrSWQgfSA9IGFyZ3M7XG4gICAgY29uc3QgYXNraW5nU2VydmljZSA9IGN0eC5hc2tpbmdTZXJ2aWNlO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFza2luZ1NlcnZpY2UuZ2V0SW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zKHRhc2tJZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHF1ZXN0aW9uczogcmVzdWx0LnJlc3BvbnNlPy5xdWVzdGlvbnMgfHwgW10sXG4gICAgICBzdGF0dXM6IHJlc3VsdC5zdGF0dXMsXG4gICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTmVzdGVkIHJlc29sdmVyc1xuICAgKi9cbiAgcHVibGljIGdldFRocmVhZFJlc3BvbnNlTmVzdGVkUmVzb2x2ZXIgPSAoKSA9PiAoe1xuICAgIHZpZXc6IGFzeW5jIChwYXJlbnQ6IFRocmVhZFJlc3BvbnNlLCBfYXJnczogYW55LCBjdHg6IElDb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB2aWV3SWQgPSBwYXJlbnQudmlld0lkO1xuICAgICAgaWYgKCF2aWV3SWQpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgdmlldyA9IGF3YWl0IGN0eC52aWV3UmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogdmlld0lkIH0pO1xuICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSB2aWV3LnByb3BlcnRpZXNcbiAgICAgICAgPyBKU09OLnBhcnNlKHZpZXcucHJvcGVydGllcyk/LmRpc3BsYXlOYW1lXG4gICAgICAgIDogdmlldy5uYW1lO1xuICAgICAgcmV0dXJuIHsgLi4udmlldywgZGlzcGxheU5hbWUgfTtcbiAgICB9LFxuICAgIGFuc3dlckRldGFpbDogKHBhcmVudDogVGhyZWFkUmVzcG9uc2UsIF9hcmdzOiBhbnksIF9jdHg6IElDb250ZXh0KSA9PiB7XG4gICAgICBpZiAoIXBhcmVudD8uYW5zd2VyRGV0YWlsKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgeyBjb250ZW50LCAuLi5yZXN0IH0gPSBwYXJlbnQuYW5zd2VyRGV0YWlsO1xuXG4gICAgICBpZiAoIWNvbnRlbnQpIHJldHVybiBwYXJlbnQuYW5zd2VyRGV0YWlsO1xuXG4gICAgICBjb25zdCBmb3JtYXR0ZWRDb250ZW50ID0gY29udGVudFxuICAgICAgICAvLyByZXBsYWNlIHRoZSBcXFxcbiB0byBcXG5cbiAgICAgICAgLnJlcGxhY2UoL1xcXFxuL2csICdcXG4nKVxuICAgICAgICAvLyByZXBsYWNlIHRoZSBcXFxcXFxcIiB0byBcXFwiLFxuICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN0LFxuICAgICAgICBjb250ZW50OiBmb3JtYXR0ZWRDb250ZW50LFxuICAgICAgfTtcbiAgICB9LFxuICAgIHNxbDogKHBhcmVudDogVGhyZWFkUmVzcG9uc2UsIF9hcmdzOiBhbnksIF9jdHg6IElDb250ZXh0KSA9PiB7XG4gICAgICBpZiAocGFyZW50LmJyZWFrZG93bkRldGFpbCAmJiBwYXJlbnQuYnJlYWtkb3duRGV0YWlsLnN0ZXBzKSB7XG4gICAgICAgIC8vIGNvbnN0cnVjdCBzcWwgZnJvbSBicmVha2Rvd25EZXRhaWxcbiAgICAgICAgcmV0dXJuIGZvcm1hdChjb25zdHJ1Y3RDdGVTcWwocGFyZW50LmJyZWFrZG93bkRldGFpbC5zdGVwcykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZvcm1hdChwYXJlbnQuc3FsKTtcbiAgICB9LFxuICB9KTtcblxuICBwdWJsaWMgZ2V0RGV0YWlsU3RlcE5lc3RlZFJlc29sdmVyID0gKCkgPT4gKHtcbiAgICBzcWw6IChwYXJlbnQ6IERldGFpbFN0ZXAsIF9hcmdzOiBhbnksIF9jdHg6IElDb250ZXh0KSA9PiB7XG4gICAgICByZXR1cm4gZm9ybWF0KHBhcmVudC5zcWwpO1xuICAgIH0sXG4gIH0pO1xuXG4gIHB1YmxpYyBnZXRSZXN1bHRDYW5kaWRhdGVOZXN0ZWRSZXNvbHZlciA9ICgpID0+ICh7XG4gICAgc3FsOiAocGFyZW50OiBhbnksIF9hcmdzOiBhbnksIF9jdHg6IElDb250ZXh0KSA9PiB7XG4gICAgICByZXR1cm4gZm9ybWF0KHBhcmVudC5zcWwpO1xuICAgIH0sXG4gICAgdmlldzogYXN5bmMgKHBhcmVudDogYW55LCBfYXJnczogYW55LCBjdHg6IElDb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB2aWV3SWQgPSBwYXJlbnQudmlldz8uaWQ7XG4gICAgICBpZiAoIXZpZXdJZCkgcmV0dXJuIHBhcmVudC52aWV3O1xuICAgICAgY29uc3QgdmlldyA9IGF3YWl0IGN0eC52aWV3UmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogdmlld0lkIH0pO1xuXG4gICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IHZpZXcucHJvcGVydGllc1xuICAgICAgICA/IEpTT04ucGFyc2Uodmlldy5wcm9wZXJ0aWVzKS5kaXNwbGF5TmFtZVxuICAgICAgICA6IHZpZXcubmFtZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnBhcmVudC52aWV3LFxuICAgICAgICBkaXNwbGF5TmFtZSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiV3JlbkFJTGFuZ3VhZ2UiLCJBc2tSZXN1bHRTdGF0dXMiLCJyZWR1Y2UiLCJnZXRMb2dnZXIiLCJmb3JtYXQiLCJjb25zdHJ1Y3RDdGVTcWwiLCJnZXRTYW1wbGVBc2tRdWVzdGlvbnMiLCJUZWxlbWV0cnlFdmVudCIsIldyZW5TZXJ2aWNlIiwibG9nZ2VyIiwibGV2ZWwiLCJBc2tpbmdSZXNvbHZlciIsImNvbnN0cnVjdG9yIiwiZ2V0VGhyZWFkUmVzcG9uc2VOZXN0ZWRSZXNvbHZlciIsInZpZXciLCJwYXJlbnQiLCJfYXJncyIsImN0eCIsInZpZXdJZCIsInZpZXdSZXBvc2l0b3J5IiwiZmluZE9uZUJ5IiwiaWQiLCJkaXNwbGF5TmFtZSIsInByb3BlcnRpZXMiLCJKU09OIiwicGFyc2UiLCJuYW1lIiwiYW5zd2VyRGV0YWlsIiwiX2N0eCIsImNvbnRlbnQiLCJyZXN0IiwiZm9ybWF0dGVkQ29udGVudCIsInJlcGxhY2UiLCJzcWwiLCJicmVha2Rvd25EZXRhaWwiLCJzdGVwcyIsImdldERldGFpbFN0ZXBOZXN0ZWRSZXNvbHZlciIsImdldFJlc3VsdENhbmRpZGF0ZU5lc3RlZFJlc29sdmVyIiwiY3JlYXRlQXNraW5nVGFzayIsImJpbmQiLCJjYW5jZWxBc2tpbmdUYXNrIiwiZ2V0QXNraW5nVGFzayIsImNyZWF0ZVRocmVhZCIsImdldFRocmVhZCIsInVwZGF0ZVRocmVhZCIsImRlbGV0ZVRocmVhZCIsImxpc3RUaHJlYWRzIiwiY3JlYXRlVGhyZWFkUmVzcG9uc2UiLCJnZXRSZXNwb25zZSIsInByZXZpZXdEYXRhIiwicHJldmlld0JyZWFrZG93bkRhdGEiLCJnZXRTdWdnZXN0ZWRRdWVzdGlvbnMiLCJjcmVhdGVJbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnMiLCJnZXRJbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnMiLCJnZW5lcmF0ZVRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zIiwiZ2VuZXJhdGVQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnMiLCJnZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyIsImdlbmVyYXRlVGhyZWFkUmVzcG9uc2VCcmVha2Rvd24iLCJnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQW5zd2VyIiwiZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUNoYXJ0IiwiYWRqdXN0VGhyZWFkUmVzcG9uc2VDaGFydCIsIl9yb290IiwicHJvamVjdFNlcnZpY2UiLCJhcmdzIiwidGhyZWFkSWQiLCJhc2tpbmdTZXJ2aWNlIiwicHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0Iiwic2FtcGxlRGF0YXNldCIsInF1ZXN0aW9ucyIsInF1ZXN0aW9uIiwiZGF0YSIsInRhc2siLCJsYW5ndWFnZSIsIkVOIiwidGVsZW1ldHJ5Iiwic2VuZEV2ZW50IiwiSE9NRV9BU0tfQ0FORElEQVRFIiwidGFza0lkIiwiYXNrUmVzdWx0IiwiZXZlbnROYW1lIiwic3RhdHVzIiwiRklOSVNIRUQiLCJjYW5kaWRhdGVzIiwicmVzcG9uc2UiLCJGQUlMRUQiLCJlcnJvciIsIkFJIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInR5cGUiLCJpbnRlbnRSZWFzb25pbmciLCJIT01FX0NSRUFURV9USFJFQUQiLCJ0aHJlYWQiLCJlcnIiLCJtZXNzYWdlIiwiZXh0ZW5zaW9ucyIsInNlcnZpY2UiLCJyZXNwb25zZXMiLCJnZXRSZXNwb25zZXNXaXRoVGhyZWFkIiwiYWNjIiwicHVzaCIsImNoYXJ0RGV0YWlsIiwid2hlcmUiLCJIT01FX1VQREFURV9USFJFQURfU1VNTUFSWSIsIm5ld1N1bW1hcnkiLCJzdW1tYXJ5IiwibmV3X3N1bW1hcnkiLCJ0aHJlYWRzIiwiSE9NRV9BU0tfRk9MTE9XVVBfUVVFU1RJT04iLCJyZXNwb25zZUlkIiwibGltaXQiLCJzdGVwSW5kZXgiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/resolvers/askingResolver.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/resolvers/dashboardResolver.ts":
/*!**********************************************************!*\
  !*** ./src/apollo/server/resolvers/dashboardResolver.ts ***!
  \**********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashboardResolver: () => (/* binding */ DashboardResolver)\n/* harmony export */ });\n/* harmony import */ var _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var _server_services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/services */ \"(api)/./src/apollo/server/services/index.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_services__WEBPACK_IMPORTED_MODULE_1__]);\n_server_services__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_2__.getLogger)(\"DashboardResolver\");\nlogger.level = \"debug\";\nclass DashboardResolver {\n    constructor(){\n        this.getDashboardItems = this.getDashboardItems.bind(this);\n        this.createDashboardItem = this.createDashboardItem.bind(this);\n        this.deleteDashboardItem = this.deleteDashboardItem.bind(this);\n        this.updateDashboardItemLayouts = this.updateDashboardItemLayouts.bind(this);\n        this.previewItemSQL = this.previewItemSQL.bind(this);\n    }\n    async getDashboardItems(_root, _args, ctx) {\n        const dashboard = await ctx.dashboardService.getCurrentDashboard();\n        if (!dashboard) {\n            throw new Error(\"Dashboard not found.\");\n        }\n        return await ctx.dashboardService.getDashboardItems(dashboard.id);\n    }\n    async createDashboardItem(_root, args, ctx) {\n        const { responseId, itemType } = args.data;\n        const dashboard = await ctx.dashboardService.getCurrentDashboard();\n        const response = await ctx.askingService.getResponse(responseId);\n        if (!response) {\n            throw new Error(`Thread response not found. responseId: ${responseId}`);\n        }\n        if (!Object.keys(_server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.ChartType).includes(itemType)) {\n            throw new Error(`Chart type not supported. responseId: ${responseId}`);\n        }\n        if (!response.chartDetail?.chartSchema) {\n            throw new Error(`Chart schema not found in thread response. responseId: ${responseId}`);\n        }\n        return await ctx.dashboardService.createDashboardItem({\n            dashboardId: dashboard.id,\n            type: itemType,\n            sql: response.sql,\n            chartSchema: response.chartDetail?.chartSchema\n        });\n    }\n    async deleteDashboardItem(_root, args, ctx) {\n        const { id } = args.where;\n        const item = await ctx.dashboardService.getDashboardItem(id);\n        if (!item) {\n            throw new Error(`Dashboard item not found. id: ${id}`);\n        }\n        return await ctx.dashboardService.deleteDashboardItem(id);\n    }\n    async updateDashboardItemLayouts(_root, args, ctx) {\n        const { layouts } = args.data;\n        if (layouts.length === 0) {\n            throw new Error(\"Layouts are required.\");\n        }\n        return await ctx.dashboardService.updateDashboardItemLayouts(layouts);\n    }\n    async previewItemSQL(_root, args, ctx) {\n        const { itemId, limit } = args.data;\n        try {\n            const item = await ctx.dashboardService.getDashboardItem(itemId);\n            const project = await ctx.projectService.getCurrentProject();\n            const deployment = await ctx.deployService.getLastDeployment(project.id);\n            const mdl = deployment.manifest;\n            const data = await ctx.queryService.preview(item.detail.sql, {\n                project,\n                manifest: mdl,\n                limit: limit || _server_services__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_PREVIEW_LIMIT\n            });\n            // handle data to [{ column1: value1, column2: value2, ... }]\n            const values = data.data.map((val)=>{\n                return data.columns.reduce((acc, col, index)=>{\n                    acc[col.name] = val[index];\n                    return acc;\n                }, {});\n            });\n            return values;\n        } catch (error) {\n            logger.error(`Error previewing SQL item ${itemId}: ${error}`);\n            throw error;\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMvZGFzaGJvYXJkUmVzb2x2ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNtRDtBQUt6QjtBQUVnQjtBQUUxQyxNQUFNRyxTQUFTRCx3REFBU0EsQ0FBQztBQUN6QkMsT0FBT0MsS0FBSyxHQUFHO0FBRVIsTUFBTUM7SUFDWEMsYUFBYztRQUNaLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUcsSUFBSSxDQUFDQSxpQkFBaUIsQ0FBQ0MsSUFBSSxDQUFDLElBQUk7UUFDekQsSUFBSSxDQUFDQyxtQkFBbUIsR0FBRyxJQUFJLENBQUNBLG1CQUFtQixDQUFDRCxJQUFJLENBQUMsSUFBSTtRQUM3RCxJQUFJLENBQUNFLG1CQUFtQixHQUFHLElBQUksQ0FBQ0EsbUJBQW1CLENBQUNGLElBQUksQ0FBQyxJQUFJO1FBQzdELElBQUksQ0FBQ0csMEJBQTBCLEdBQzdCLElBQUksQ0FBQ0EsMEJBQTBCLENBQUNILElBQUksQ0FBQyxJQUFJO1FBQzNDLElBQUksQ0FBQ0ksY0FBYyxHQUFHLElBQUksQ0FBQ0EsY0FBYyxDQUFDSixJQUFJLENBQUMsSUFBSTtJQUNyRDtJQUVBLE1BQWFELGtCQUNYTSxLQUFVLEVBQ1ZDLEtBQVUsRUFDVkMsR0FBYSxFQUNhO1FBQzFCLE1BQU1DLFlBQVksTUFBTUQsSUFBSUUsZ0JBQWdCLENBQUNDLG1CQUFtQjtRQUNoRSxJQUFJLENBQUNGLFdBQVc7WUFDZCxNQUFNLElBQUlHLE1BQU07UUFDbEI7UUFDQSxPQUFPLE1BQU1KLElBQUlFLGdCQUFnQixDQUFDVixpQkFBaUIsQ0FBQ1MsVUFBVUksRUFBRTtJQUNsRTtJQUVBLE1BQWFYLG9CQUNYSSxLQUFVLEVBQ1ZRLElBQW1FLEVBQ25FTixHQUFhLEVBQ1c7UUFDeEIsTUFBTSxFQUFFTyxVQUFVLEVBQUVDLFFBQVEsRUFBRSxHQUFHRixLQUFLRyxJQUFJO1FBQzFDLE1BQU1SLFlBQVksTUFBTUQsSUFBSUUsZ0JBQWdCLENBQUNDLG1C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O0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVzb2x2ZXJzL2Rhc2hib2FyZFJlc29sdmVyLnRzP2VhMDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUNvbnRleHQgfSBmcm9tICdAc2VydmVyL3R5cGVzJztcbmltcG9ydCB7IENoYXJ0VHlwZSB9IGZyb20gJ0BzZXJ2ZXIvbW9kZWxzL2FkYXB0b3InO1xuaW1wb3J0IHtcbiAgVXBkYXRlRGFzaGJvYXJkSXRlbUxheW91dHMsXG4gIFByZXZpZXdEYXRhUmVzcG9uc2UsXG4gIERFRkFVTFRfUFJFVklFV19MSU1JVCxcbn0gZnJvbSAnQHNlcnZlci9zZXJ2aWNlcyc7XG5pbXBvcnQgeyBEYXNoYm9hcmRJdGVtLCBEYXNoYm9hcmRJdGVtVHlwZSB9IGZyb20gJ0BzZXJ2ZXIvcmVwb3NpdG9yaWVzJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BzZXJ2ZXIvdXRpbHMnO1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ0Rhc2hib2FyZFJlc29sdmVyJyk7XG5sb2dnZXIubGV2ZWwgPSAnZGVidWcnO1xuXG5leHBvcnQgY2xhc3MgRGFzaGJvYXJkUmVzb2x2ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmdldERhc2hib2FyZEl0ZW1zID0gdGhpcy5nZXREYXNoYm9hcmRJdGVtcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY3JlYXRlRGFzaGJvYXJkSXRlbSA9IHRoaXMuY3JlYXRlRGFzaGJvYXJkSXRlbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlRGFzaGJvYXJkSXRlbSA9IHRoaXMuZGVsZXRlRGFzaGJvYXJkSXRlbS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlRGFzaGJvYXJkSXRlbUxheW91dHMgPVxuICAgICAgdGhpcy51cGRhdGVEYXNoYm9hcmRJdGVtTGF5b3V0cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMucHJldmlld0l0ZW1TUUwgPSB0aGlzLnByZXZpZXdJdGVtU1FMLmJpbmQodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0RGFzaGJvYXJkSXRlbXMoXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBfYXJnczogYW55LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8RGFzaGJvYXJkSXRlbVtdPiB7XG4gICAgY29uc3QgZGFzaGJvYXJkID0gYXdhaXQgY3R4LmRhc2hib2FyZFNlcnZpY2UuZ2V0Q3VycmVudERhc2hib2FyZCgpO1xuICAgIGlmICghZGFzaGJvYXJkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Rhc2hib2FyZCBub3QgZm91bmQuJyk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBjdHguZGFzaGJvYXJkU2VydmljZS5nZXREYXNoYm9hcmRJdGVtcyhkYXNoYm9hcmQuaWQpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNyZWF0ZURhc2hib2FyZEl0ZW0oXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmdzOiB7IGRhdGE6IHsgaXRlbVR5cGU6IERhc2hib2FyZEl0ZW1UeXBlOyByZXNwb25zZUlkOiBudW1iZXIgfSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8RGFzaGJvYXJkSXRlbT4ge1xuICAgIGNvbnN0IHsgcmVzcG9uc2VJZCwgaXRlbVR5cGUgfSA9IGFyZ3MuZGF0YTtcbiAgICBjb25zdCBkYXNoYm9hcmQgPSBhd2FpdCBjdHguZGFzaGJvYXJkU2VydmljZS5nZXRDdXJyZW50RGFzaGJvYXJkKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjdHguYXNraW5nU2VydmljZS5nZXRSZXNwb25zZShyZXNwb25zZUlkKTtcblxuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhyZWFkIHJlc3BvbnNlIG5vdCBmb3VuZC4gcmVzcG9uc2VJZDogJHtyZXNwb25zZUlkfWApO1xuICAgIH1cbiAgICBpZiAoIU9iamVjdC5rZXlzKENoYXJ0VHlwZSkuaW5jbHVkZXMoaXRlbVR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYXJ0IHR5cGUgbm90IHN1cHBvcnRlZC4gcmVzcG9uc2VJZDogJHtyZXNwb25zZUlkfWApO1xuICAgIH1cbiAgICBpZiAoIXJlc3BvbnNlLmNoYXJ0RGV0YWlsPy5jaGFydFNjaGVtYSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2hhcnQgc2NoZW1hIG5vdCBmb3VuZCBpbiB0aHJlYWQgcmVzcG9uc2UuIHJlc3BvbnNlSWQ6ICR7cmVzcG9uc2VJZH1gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgY3R4LmRhc2hib2FyZFNlcnZpY2UuY3JlYXRlRGFzaGJvYXJkSXRlbSh7XG4gICAgICBkYXNoYm9hcmRJZDogZGFzaGJvYXJkLmlkLFxuICAgICAgdHlwZTogaXRlbVR5cGUsXG4gICAgICBzcWw6IHJlc3BvbnNlLnNxbCxcbiAgICAgIGNoYXJ0U2NoZW1hOiByZXNwb25zZS5jaGFydERldGFpbD8uY2hhcnRTY2hlbWEsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVsZXRlRGFzaGJvYXJkSXRlbShcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgd2hlcmU6IHsgaWQ6IG51bWJlciB9IH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgeyBpZCB9ID0gYXJncy53aGVyZTtcbiAgICBjb25zdCBpdGVtID0gYXdhaXQgY3R4LmRhc2hib2FyZFNlcnZpY2UuZ2V0RGFzaGJvYXJkSXRlbShpZCk7XG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERhc2hib2FyZCBpdGVtIG5vdCBmb3VuZC4gaWQ6ICR7aWR9YCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBjdHguZGFzaGJvYXJkU2VydmljZS5kZWxldGVEYXNoYm9hcmRJdGVtKGlkKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVEYXNoYm9hcmRJdGVtTGF5b3V0cyhcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgZGF0YTogeyBsYXlvdXRzOiBVcGRhdGVEYXNoYm9hcmRJdGVtTGF5b3V0cyB9IH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxEYXNoYm9hcmRJdGVtW10+IHtcbiAgICBjb25zdCB7IGxheW91dHMgfSA9IGFyZ3MuZGF0YTtcbiAgICBpZiAobGF5b3V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTGF5b3V0cyBhcmUgcmVxdWlyZWQuJyk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBjdHguZGFzaGJvYXJkU2VydmljZS51cGRhdGVEYXNoYm9hcmRJdGVtTGF5b3V0cyhsYXlvdXRzKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBwcmV2aWV3SXRlbVNRTChcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgZGF0YTogeyBpdGVtSWQ6IG51bWJlcjsgbGltaXQ/OiBudW1iZXIgfSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgYW55PltdPiB7XG4gICAgY29uc3QgeyBpdGVtSWQsIGxpbWl0IH0gPSBhcmdzLmRhdGE7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBjdHguZGFzaGJvYXJkU2VydmljZS5nZXREYXNoYm9hcmRJdGVtKGl0ZW1JZCk7XG4gICAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgICBjb25zdCBkZXBsb3ltZW50ID0gYXdhaXQgY3R4LmRlcGxveVNlcnZpY2UuZ2V0TGFzdERlcGxveW1lbnQocHJvamVjdC5pZCk7XG4gICAgICBjb25zdCBtZGwgPSBkZXBsb3ltZW50Lm1hbmlmZXN0O1xuICAgICAgY29uc3QgZGF0YSA9IChhd2FpdCBjdHgucXVlcnlTZXJ2aWNlLnByZXZpZXcoaXRlbS5kZXRhaWwuc3FsLCB7XG4gICAgICAgIHByb2plY3QsXG4gICAgICAgIG1hbmlmZXN0OiBtZGwsXG4gICAgICAgIGxpbWl0OiBsaW1pdCB8fCBERUZBVUxUX1BSRVZJRVdfTElNSVQsXG4gICAgICB9KSkgYXMgUHJldmlld0RhdGFSZXNwb25zZTtcblxuICAgICAgLy8gaGFuZGxlIGRhdGEgdG8gW3sgY29sdW1uMTogdmFsdWUxLCBjb2x1bW4yOiB2YWx1ZTIsIC4uLiB9XVxuICAgICAgY29uc3QgdmFsdWVzID0gZGF0YS5kYXRhLm1hcCgodmFsKSA9PiB7XG4gICAgICAgIHJldHVybiBkYXRhLmNvbHVtbnMucmVkdWNlKChhY2MsIGNvbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBhY2NbY29sLm5hbWVdID0gdmFsW2luZGV4XTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgcHJldmlld2luZyBTUUwgaXRlbSAke2l0ZW1JZH06ICR7ZXJyb3J9YCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDaGFydFR5cGUiLCJERUZBVUxUX1BSRVZJRVdfTElNSVQiLCJnZXRMb2dnZXIiLCJsb2dnZXIiLCJsZXZlbCIsIkRhc2hib2FyZFJlc29sdmVyIiwiY29uc3RydWN0b3IiLCJnZXREYXNoYm9hcmRJdGVtcyIsImJpbmQiLCJjcmVhdGVEYXNoYm9hcmRJdGVtIiwiZGVsZXRlRGFzaGJvYXJkSXRlbSIsInVwZGF0ZURhc2hib2FyZEl0ZW1MYXlvdXRzIiwicHJldmlld0l0ZW1TUUwiLCJfcm9vdCIsIl9hcmdzIiwiY3R4IiwiZGFzaGJvYXJkIiwiZGFzaGJvYXJkU2VydmljZSIsImdldEN1cnJlbnREYXNoYm9hcmQiLCJFcnJvciIsImlkIiwiYXJncyIsInJlc3BvbnNlSWQiLCJpdGVtVHlwZSIsImRhdGEiLCJyZXNwb25zZSIsImFza2luZ1NlcnZpY2UiLCJnZXRSZXNwb25zZSIsIk9iamVjdCIsImtleXMiLCJpbmNsdWRlcyIsImNoYXJ0RGV0YWlsIiwiY2hhcnRTY2hlbWEiLCJkYXNoYm9hcmRJZCIsInR5cGUiLCJzcWwiLCJ3aGVyZSIsIml0ZW0iLCJnZXREYXNoYm9hcmRJdGVtIiwibGF5b3V0cyIsImxlbmd0aCIsIml0ZW1JZCIsImxpbWl0IiwicHJvamVjdCIsInByb2plY3RTZXJ2aWNlIiwiZ2V0Q3VycmVudFByb2plY3QiLCJkZXBsb3ltZW50IiwiZGVwbG95U2VydmljZSIsImdldExhc3REZXBsb3ltZW50IiwibWRsIiwibWFuaWZlc3QiLCJxdWVyeVNlcnZpY2UiLCJwcmV2aWV3IiwiZGV0YWlsIiwidmFsdWVzIiwibWFwIiwidmFsIiwiY29sdW1ucyIsInJlZHVjZSIsImFjYyIsImNvbCIsImluZGV4IiwibmFtZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/resolvers/dashboardResolver.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/resolvers/diagramResolver.ts":
/*!********************************************************!*\
  !*** ./src/apollo/server/resolvers/diagramResolver.ts ***!
  \********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DiagramResolver: () => (/* binding */ DiagramResolver)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var _server_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/types */ \"(api)/./src/apollo/server/types/index.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _mdl_mdlBuilder__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mdl/mdlBuilder */ \"(api)/./src/apollo/server/mdl/mdlBuilder.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_0__]);\nuuid__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_2__.getLogger)(\"DiagramResolver\");\nlogger.level = \"debug\";\nclass DiagramResolver {\n    constructor(){\n        this.getDiagram = this.getDiagram.bind(this);\n    }\n    async getDiagram(_root, _args, ctx) {\n        const project = await ctx.projectRepository.getCurrentProject();\n        const models = await ctx.modelRepository.findAllBy({\n            projectId: project.id\n        });\n        const modelIds = models.map((model)=>model.id);\n        const modelColumns = await ctx.modelColumnRepository.findColumnsByModelIds(modelIds);\n        const modelNestedColumns = await ctx.modelNestedColumnRepository.findNestedColumnsByModelIds(modelIds);\n        const modelRelations = await ctx.relationRepository.findRelationInfoBy({\n            columnIds: modelColumns.map((column)=>column.id)\n        });\n        const views = await ctx.viewRepository.findAllBy({\n            projectId: project.id\n        });\n        const builder = new _mdl_mdlBuilder__WEBPACK_IMPORTED_MODULE_3__.MDLBuilder({\n            project,\n            models,\n            columns: modelColumns,\n            nestedColumns: modelNestedColumns,\n            relations: modelRelations,\n            views,\n            relatedModels: models,\n            relatedColumns: modelColumns,\n            relatedRelations: modelRelations\n        });\n        const manifest = builder.build();\n        return this.buildDiagram(models, modelColumns, modelNestedColumns, modelRelations, views, manifest);\n    }\n    buildDiagram(models, modelColumns, modelNestedColumns, relations, views, manifest) {\n        const diagramModels = models.map((model)=>{\n            const transformedModel = this.transformModel(model);\n            const allColumns = modelColumns.filter((column)=>column.modelId === model.id);\n            const modelMDL = manifest.models.find((modelMDL)=>modelMDL.name === model.referenceName);\n            allColumns.forEach((column)=>{\n                const columnRelations = relations.map((relation)=>[\n                        relation.fromColumnId,\n                        relation.toColumnId\n                    ].includes(column.id) ? relation : null).filter((relation)=>!!relation);\n                if (columnRelations.length > 0) {\n                    columnRelations.forEach((relation)=>{\n                        const transformedRelationField = this.transformModelRelationField({\n                            relation,\n                            currentModel: model,\n                            models\n                        });\n                        transformedModel.relationFields.push(transformedRelationField);\n                    });\n                }\n                if (column.isCalculated) {\n                    transformedModel.calculatedFields.push(this.transformCalculatedField(column, modelMDL.columns));\n                } else {\n                    const nestedColumns = modelNestedColumns.filter((nestedColumn)=>nestedColumn.columnId === column.id);\n                    transformedModel.fields.push(this.transformNormalField(column, nestedColumns));\n                }\n            });\n            return transformedModel;\n        });\n        const diagramViews = views.map(this.transformView);\n        return {\n            models: diagramModels,\n            views: diagramViews\n        };\n    }\n    transformModel(model) {\n        const properties = JSON.parse(model.properties);\n        return {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n            modelId: model.id,\n            nodeType: _server_types__WEBPACK_IMPORTED_MODULE_1__.NodeType.MODEL,\n            displayName: model.displayName,\n            referenceName: model.referenceName,\n            sourceTableName: model.sourceTableName,\n            refSql: model.refSql,\n            refreshTime: model.refreshTime,\n            cached: model.cached,\n            description: properties?.description,\n            fields: [],\n            calculatedFields: [],\n            relationFields: []\n        };\n    }\n    transformNormalField(column, nestedColumns) {\n        const properties = JSON.parse(column.properties);\n        return {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n            columnId: column.id,\n            nodeType: column.isCalculated ? _server_types__WEBPACK_IMPORTED_MODULE_1__.NodeType.CALCULATED_FIELD : _server_types__WEBPACK_IMPORTED_MODULE_1__.NodeType.FIELD,\n            type: column.type,\n            displayName: column.displayName,\n            referenceName: column.referenceName,\n            description: properties?.description,\n            isPrimaryKey: column.isPk,\n            expression: column.aggregation,\n            nestedFields: nestedColumns.length ? nestedColumns.map((nestedColumn)=>({\n                    id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n                    nestedColumnId: nestedColumn.id,\n                    columnPath: nestedColumn.columnPath,\n                    type: nestedColumn.type,\n                    displayName: nestedColumn.displayName,\n                    referenceName: nestedColumn.referenceName,\n                    description: nestedColumn.properties?.description\n                })) : null\n        };\n    }\n    transformCalculatedField(column, columnsMDL) {\n        const properties = JSON.parse(column.properties);\n        const lineage = JSON.parse(column.lineage);\n        const columnMDL = columnsMDL.find(({ name })=>name === column.referenceName);\n        return {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n            columnId: column.id,\n            nodeType: _server_types__WEBPACK_IMPORTED_MODULE_1__.NodeType.CALCULATED_FIELD,\n            aggregation: column.aggregation,\n            lineage,\n            type: column.type,\n            displayName: column.displayName,\n            referenceName: column.referenceName,\n            description: properties?.description,\n            isPrimaryKey: column.isPk,\n            expression: columnMDL.expression\n        };\n    }\n    transformModelRelationField({ relation, currentModel, models }) {\n        const referenceName = currentModel.referenceName === relation.fromModelName ? relation.toModelName : relation.fromModelName;\n        const displayName = models.find((model)=>model.referenceName === referenceName)?.displayName;\n        const properties = relation.properties ? JSON.parse(relation.properties) : null;\n        return {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n            relationId: relation.id,\n            nodeType: _server_types__WEBPACK_IMPORTED_MODULE_1__.NodeType.RELATION,\n            displayName,\n            referenceName,\n            type: relation.joinType,\n            fromModelId: relation.fromModelId,\n            fromModelName: relation.fromModelName,\n            fromModelDisplayName: relation.fromModelDisplayName,\n            fromColumnId: relation.fromColumnId,\n            fromColumnName: relation.fromColumnName,\n            fromColumnDisplayName: relation.fromColumnDisplayName,\n            toModelId: relation.toModelId,\n            toModelName: relation.toModelName,\n            toModelDisplayName: relation.toModelDisplayName,\n            toColumnId: relation.toColumnId,\n            toColumnName: relation.toColumnName,\n            toColumnDisplayName: relation.toColumnDisplayName,\n            description: properties?.description\n        };\n    }\n    transformView(view) {\n        const properties = JSON.parse(view.properties);\n        const fields = (properties?.columns || []).map((column)=>({\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n                nodeType: _server_types__WEBPACK_IMPORTED_MODULE_1__.NodeType.FIELD,\n                type: column.type,\n                displayName: column.name,\n                referenceName: column.name,\n                description: column?.properties?.description\n            }));\n        return {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n            viewId: view.id,\n            nodeType: _server_types__WEBPACK_IMPORTED_MODULE_1__.NodeType.VIEW,\n            statement: view.statement,\n            referenceName: view.name,\n            displayName: properties?.displayName || view.name,\n            fields,\n            description: properties?.description\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMvZGlhZ3JhbVJlc29sdmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQW9DO0FBaUJiO0FBRW1CO0FBQ0s7QUFFL0MsTUFBTUssU0FBU0Ysd0RBQVNBLENBQUM7QUFDekJFLE9BQU9DLEtBQUssR0FBRztBQUVSLE1BQU1DO0lBQ1hDLGFBQWM7UUFDWixJQUFJLENBQUNDLFVBQVUsR0FBRyxJQUFJLENBQUNBLFVBQVUsQ0FBQ0MsSUFBSSxDQUFDLElBQUk7SUFDN0M7SUFFQSxNQUFhRCxXQUNYRSxLQUFVLEVBQ1ZDLEtBQVUsRUFDVkMsR0FBYSxFQUNLO1FBQ2xCLE1BQU1DLFVBQVUsTUFBTUQsSUFBSUUsaUJBQWlCLENBQUNDLGlCQUFpQjtRQUM3RCxNQUFNQyxTQUFTLE1BQU1KLElBQUlLLGVBQWUsQ0FBQ0MsU0FBUyxDQUFDO1lBQ2pEQyxXQUFXTixRQUFRTyxFQUFFO1FBQ3ZCO1FBRUEsTUFBTUMsV0FBV0wsT0FBT00sR0FBRyxDQUFDLENBQUNDLFFBQVVBLE1BQU1ILEVBQUU7UUFDL0MsTUFBTUksZUFDSixNQUFNWixJQUFJYSxxQkFBcUIsQ0FBQ0MscUJBQXFCLENBQUNMO1FBQ3hELE1BQU1NLHFCQUNKLE1BQU1mLElBQUlnQiwyQkFBMkIsQ0FBQ0MsMkJBQTJCLENBQy9EUjtRQUVKLE1BQU1TLGlCQUFpQixNQUFNbEIsSUFBSW1CLGtCQUFrQixDQUFDQyxrQkFBa0IsQ0FBQztZQUNyRUMsV0FBV1QsYUFBYUYsR0FBRyxDQUFDLENBQUNZLFNBQVdBLE9BQU9kLEVBQUU7UUFDbkQ7UUFDQSxNQUFNZSxRQUFRLE1BQU12QixJQUFJd0IsY0FBYyxDQUFDbEIsU0FBUyxDQUFDO1lBQy9DQyxXQUFXTixRQUFRTyxFQUFFO1FBQ3ZCO1FBRUEsTUFBTWlCLFVBQVUsSUFBSWxDLHVEQUFVQSxDQUFDO1lBQzdCVTtZQUNBRztZQUNBc0IsU0FBU2Q7WUFDVGUsZUFBZVo7WUFDZmEsV0FBV1Y7WUFD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RCxTQUFTc0QsWUFBWTtZQUNuQ0MscUJBQXFCdkQsU0FBU3VELG1CQUFtQjtZQUNqRDFCLGFBQWFWLFlBQVlVO1FBQzNCO0lBQ0Y7SUFFUVgsY0FBY3NDLElBQVUsRUFBZTtRQUM3QyxNQUFNckMsYUFBYUMsS0FBS0MsS0FBSyxDQUFDbUMsS0FBS3JDLFVBQVU7UUFDN0MsTUFBTUosU0FBUyxDQUFDSSxZQUFZeEMsV0FBVyxFQUFFLEVBQUVoQixHQUFHLENBQUMsQ0FBQ1ksU0FBaUI7Z0JBQy9EZCxJQUFJcEIsd0NBQU1BO2dCQUNWaUYsVUFBVWhGLG1EQUFRQSxDQUFDeUYsS0FBSztnQkFDeEJDLE1BQU16RCxPQUFPeUQsSUFBSTtnQkFDakJSLGFBQWFqRCxPQUFPcUIsSUFBSTtnQkFDeEJDLGVBQWV0QixPQUFPcUIsSUFBSTtnQkFDMUJpQyxhQUFhdEQsUUFBUTRDLFlBQVlVO1lBQ25DO1FBRUEsT0FBTztZQUNMcEUsSUFBSXBCLHdDQUFNQTtZQUNWb0gsUUFBUUQsS0FBSy9GLEVBQUU7WUFDZjZELFVBQVVoRixtREFBUUEsQ0FBQ29ILElBQUk7WUFDdkJDLFdBQVdILEtBQUtHLFNBQVM7WUFDekI5RCxlQUFlMkQsS0FBSzVELElBQUk7WUFDeEI0QixhQUFhTCxZQUFZSyxlQUFlZ0MsS0FBSzVELElBQUk7WUFDakRtQjtZQUNBYyxhQUFhVixZQUFZVTtRQUMzQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVzb2x2ZXJzL2RpYWdyYW1SZXNvbHZlci50cz9lMzJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHtcbiAgTW9kZWwsXG4gIE1vZGVsQ29sdW1uLFxuICBNb2RlbE5lc3RlZENvbHVtbixcbiAgUmVsYXRpb25JbmZvLFxuICBWaWV3LFxufSBmcm9tICdAc2VydmVyL3JlcG9zaXRvcmllcyc7XG5pbXBvcnQge1xuICBEaWFncmFtLFxuICBEaWFncmFtTW9kZWwsXG4gIERpYWdyYW1Nb2RlbEZpZWxkLFxuICBEaWFncmFtTW9kZWxSZWxhdGlvbkZpZWxkLFxuICBOb2RlVHlwZSxcbiAgSUNvbnRleHQsXG4gIFJlbGF0aW9uVHlwZSxcbiAgRGlhZ3JhbVZpZXcsXG59IGZyb20gJ0BzZXJ2ZXIvdHlwZXMnO1xuaW1wb3J0IHsgQ29sdW1uTURMLCBNYW5pZmVzdCB9IGZyb20gJ0BzZXJ2ZXIvbWRsL3R5cGUnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnQHNlcnZlci91dGlscyc7XG5pbXBvcnQgeyBNRExCdWlsZGVyIH0gZnJvbSAnLi4vbWRsL21kbEJ1aWxkZXInO1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ0RpYWdyYW1SZXNvbHZlcicpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuZXhwb3J0IGNsYXNzIERpYWdyYW1SZXNvbHZlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZ2V0RGlhZ3JhbSA9IHRoaXMuZ2V0RGlhZ3JhbS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldERpYWdyYW0oXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBfYXJnczogYW55LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8RGlhZ3JhbT4ge1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFJlcG9zaXRvcnkuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCBjdHgubW9kZWxSZXBvc2l0b3J5LmZpbmRBbGxCeSh7XG4gICAgICBwcm9qZWN0SWQ6IHByb2plY3QuaWQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2RlbElkcyA9IG1vZGVscy5tYXAoKG1vZGVsKSA9PiBtb2RlbC5pZCk7XG4gICAgY29uc3QgbW9kZWxDb2x1bW5zID1cbiAgICAgIGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeU1vZGVsSWRzKG1vZGVsSWRzKTtcbiAgICBjb25zdCBtb2RlbE5lc3RlZENvbHVtbnMgPVxuICAgICAgYXdhaXQgY3R4Lm1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeS5maW5kTmVzdGVkQ29sdW1uc0J5TW9kZWxJZHMoXG4gICAgICAgIG1vZGVsSWRzLFxuICAgICAgKTtcbiAgICBjb25zdCBtb2RlbFJlbGF0aW9ucyA9IGF3YWl0IGN0eC5yZWxhdGlvblJlcG9zaXRvcnkuZmluZFJlbGF0aW9uSW5mb0J5KHtcbiAgICAgIGNvbHVtbklkczogbW9kZWxDb2x1bW5zLm1hcCgoY29sdW1uKSA9PiBjb2x1bW4uaWQpLFxuICAgIH0pO1xuICAgIGNvbnN0IHZpZXdzID0gYXdhaXQgY3R4LnZpZXdSZXBvc2l0b3J5LmZpbmRBbGxCeSh7XG4gICAgICBwcm9qZWN0SWQ6IHByb2plY3QuaWQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBidWlsZGVyID0gbmV3IE1ETEJ1aWxkZXIoe1xuICAgICAgcHJvamVjdCxcbiAgICAgIG1vZGVscyxcbiAgICAgIGNvbHVtbnM6IG1vZGVsQ29sdW1ucyxcbiAgICAgIG5lc3RlZENvbHVtbnM6IG1vZGVsTmVzdGVkQ29sdW1ucyxcbiAgICAgIHJlbGF0aW9uczogbW9kZWxSZWxhdGlvbnMsXG4gICAgICB2aWV3cyxcbiAgICAgIHJlbGF0ZWRNb2RlbHM6IG1vZGVscyxcbiAgICAgIHJlbGF0ZWRDb2x1bW5zOiBtb2RlbENvbHVtbnMsXG4gICAgICByZWxhdGVkUmVsYXRpb25zOiBtb2RlbFJlbGF0aW9ucyxcbiAgICB9KTtcblxuICAgIGNvbnN0IG1hbmlmZXN0ID0gYnVpbGRlci5idWlsZCgpO1xuXG4gICAgcmV0dXJuIHRoaXMuYnVpbGREaWFncmFtKFxuICAgICAgbW9kZWxzLFxuICAgICAgbW9kZWxDb2x1bW5zLFxuICAgICAgbW9kZWxOZXN0ZWRDb2x1bW5zLFxuICAgICAgbW9kZWxSZWxhdGlvbnMsXG4gICAgICB2aWV3cyxcbiAgICAgIG1hbmlmZXN0LFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkRGlhZ3JhbShcbiAgICBtb2RlbHM6IE1vZGVsW10sXG4gICAgbW9kZWxDb2x1bW5zOiBNb2RlbENvbHVtbltdLFxuICAgIG1vZGVsTmVzdGVkQ29sdW1uczogTW9kZWxOZXN0ZWRDb2x1bW5bXSxcbiAgICByZWxhdGlvbnM6IFJlbGF0aW9uSW5mb1tdLFxuICAgIHZpZXdzOiBWaWV3W10sXG4gICAgbWFuaWZlc3Q6IE1hbmlmZXN0LFxuICApOiBEaWFncmFtIHtcbiAgICBjb25zdCBkaWFncmFtTW9kZWxzID0gbW9kZWxzLm1hcCgobW9kZWwpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkTW9kZWwgPSB0aGlzLnRyYW5zZm9ybU1vZGVsKG1vZGVsKTtcbiAgICAgIGNvbnN0IGFsbENvbHVtbnMgPSBtb2RlbENvbHVtbnMuZmlsdGVyKFxuICAgICAgICAoY29sdW1uKSA9PiBjb2x1bW4ubW9kZWxJZCA9PT0gbW9kZWwuaWQsXG4gICAgICApO1xuICAgICAgY29uc3QgbW9kZWxNREwgPSBtYW5pZmVzdC5tb2RlbHMuZmluZChcbiAgICAgICAgKG1vZGVsTURMKSA9PiBtb2RlbE1ETC5uYW1lID09PSBtb2RlbC5yZWZlcmVuY2VOYW1lLFxuICAgICAgKTtcbiAgICAgIGFsbENvbHVtbnMuZm9yRWFjaCgoY29sdW1uKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbHVtblJlbGF0aW9ucyA9IHJlbGF0aW9uc1xuICAgICAgICAgIC5tYXAoKHJlbGF0aW9uKSA9PlxuICAgICAgICAgICAgW3JlbGF0aW9uLmZyb21Db2x1bW5JZCwgcmVsYXRpb24udG9Db2x1bW5JZF0uaW5jbHVkZXMoY29sdW1uLmlkKVxuICAgICAgICAgICAgICA/IHJlbGF0aW9uXG4gICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICApXG4gICAgICAgICAgLmZpbHRlcigocmVsYXRpb24pID0+ICEhcmVsYXRpb24pO1xuXG4gICAgICAgIGlmIChjb2x1bW5SZWxhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbHVtblJlbGF0aW9ucy5mb3JFYWNoKChyZWxhdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRSZWxhdGlvbkZpZWxkID0gdGhpcy50cmFuc2Zvcm1Nb2RlbFJlbGF0aW9uRmllbGQoe1xuICAgICAgICAgICAgICByZWxhdGlvbixcbiAgICAgICAgICAgICAgY3VycmVudE1vZGVsOiBtb2RlbCxcbiAgICAgICAgICAgICAgbW9kZWxzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZE1vZGVsLnJlbGF0aW9uRmllbGRzLnB1c2godHJhbnNmb3JtZWRSZWxhdGlvbkZpZWxkKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb2x1bW4uaXNDYWxjdWxhdGVkKSB7XG4gICAgICAgICAgdHJhbnNmb3JtZWRNb2RlbC5jYWxjdWxhdGVkRmllbGRzLnB1c2goXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybUNhbGN1bGF0ZWRGaWVsZChjb2x1bW4sIG1vZGVsTURMLmNvbHVtbnMpLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbmVzdGVkQ29sdW1ucyA9IG1vZGVsTmVzdGVkQ29sdW1ucy5maWx0ZXIoXG4gICAgICAgICAgICAobmVzdGVkQ29sdW1uKSA9PiBuZXN0ZWRDb2x1bW4uY29sdW1uSWQgPT09IGNvbHVtbi5pZCxcbiAgICAgICAgICApO1xuICAgICAgICAgIHRyYW5zZm9ybWVkTW9kZWwuZmllbGRzLnB1c2goXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybU5vcm1hbEZpZWxkKGNvbHVtbiwgbmVzdGVkQ29sdW1ucyksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWRNb2RlbDtcbiAgICB9KTtcblxuICAgIGNvbnN0IGRpYWdyYW1WaWV3cyA9IHZpZXdzLm1hcCh0aGlzLnRyYW5zZm9ybVZpZXcpO1xuICAgIHJldHVybiB7IG1vZGVsczogZGlhZ3JhbU1vZGVscywgdmlld3M6IGRpYWdyYW1WaWV3cyB9O1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFuc2Zvcm1Nb2RlbChtb2RlbDogTW9kZWwpOiBEaWFncmFtTW9kZWwge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBKU09OLnBhcnNlKG1vZGVsLnByb3BlcnRpZXMpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdXVpZHY0KCksXG4gICAgICBtb2RlbElkOiBtb2RlbC5pZCxcbiAgICAgIG5vZGVUeXBlOiBOb2RlVHlwZS5NT0RFTCxcbiAgICAgIGRpc3BsYXlOYW1lOiBtb2RlbC5kaXNwbGF5TmFtZSxcbiAgICAgIHJlZmVyZW5jZU5hbWU6IG1vZGVsLnJlZmVyZW5jZU5hbWUsXG4gICAgICBzb3VyY2VUYWJsZU5hbWU6IG1vZGVsLnNvdXJjZVRhYmxlTmFtZSxcbiAgICAgIHJlZlNxbDogbW9kZWwucmVmU3FsLFxuICAgICAgcmVmcmVzaFRpbWU6IG1vZGVsLnJlZnJlc2hUaW1lLFxuICAgICAgY2FjaGVkOiBtb2RlbC5jYWNoZWQsXG4gICAgICBkZXNjcmlwdGlvbjogcHJvcGVydGllcz8uZGVzY3JpcHRpb24sXG4gICAgICBmaWVsZHM6IFtdLFxuICAgICAgY2FsY3VsYXRlZEZpZWxkczogW10sXG4gICAgICByZWxhdGlvbkZpZWxkczogW10sXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNmb3JtTm9ybWFsRmllbGQoXG4gICAgY29sdW1uOiBNb2RlbENvbHVtbixcbiAgICBuZXN0ZWRDb2x1bW5zOiBNb2RlbE5lc3RlZENvbHVtbltdLFxuICApOiBEaWFncmFtTW9kZWxGaWVsZCB7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IEpTT04ucGFyc2UoY29sdW1uLnByb3BlcnRpZXMpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdXVpZHY0KCksXG4gICAgICBjb2x1bW5JZDogY29sdW1uLmlkLFxuICAgICAgbm9kZVR5cGU6IGNvbHVtbi5pc0NhbGN1bGF0ZWRcbiAgICAgICAgPyBOb2RlVHlwZS5DQUxDVUxBVEVEX0ZJRUxEXG4gICAgICAgIDogTm9kZVR5cGUuRklFTEQsXG4gICAgICB0eXBlOiBjb2x1bW4udHlwZSxcbiAgICAgIGRpc3BsYXlOYW1lOiBjb2x1bW4uZGlzcGxheU5hbWUsXG4gICAgICByZWZlcmVuY2VOYW1lOiBjb2x1bW4ucmVmZXJlbmNlTmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBwcm9wZXJ0aWVzPy5kZXNjcmlwdGlvbixcbiAgICAgIGlzUHJpbWFyeUtleTogY29sdW1uLmlzUGssXG4gICAgICBleHByZXNzaW9uOiBjb2x1bW4uYWdncmVnYXRpb24sXG4gICAgICBuZXN0ZWRGaWVsZHM6IG5lc3RlZENvbHVtbnMubGVuZ3RoXG4gICAgICAgID8gbmVzdGVkQ29sdW1ucy5tYXAoKG5lc3RlZENvbHVtbikgPT4gKHtcbiAgICAgICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgIG5lc3RlZENvbHVtbklkOiBuZXN0ZWRDb2x1bW4uaWQsXG4gICAgICAgICAgICBjb2x1bW5QYXRoOiBuZXN0ZWRDb2x1bW4uY29sdW1uUGF0aCxcbiAgICAgICAgICAgIHR5cGU6IG5lc3RlZENvbHVtbi50eXBlLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IG5lc3RlZENvbHVtbi5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHJlZmVyZW5jZU5hbWU6IG5lc3RlZENvbHVtbi5yZWZlcmVuY2VOYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IG5lc3RlZENvbHVtbi5wcm9wZXJ0aWVzPy5kZXNjcmlwdGlvbixcbiAgICAgICAgICB9KSlcbiAgICAgICAgOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybUNhbGN1bGF0ZWRGaWVsZChcbiAgICBjb2x1bW46IE1vZGVsQ29sdW1uLFxuICAgIGNvbHVtbnNNREw6IENvbHVtbk1ETFtdLFxuICApOiBEaWFncmFtTW9kZWxGaWVsZCB7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IEpTT04ucGFyc2UoY29sdW1uLnByb3BlcnRpZXMpO1xuICAgIGNvbnN0IGxpbmVhZ2UgPSBKU09OLnBhcnNlKGNvbHVtbi5saW5lYWdlKTtcbiAgICBjb25zdCBjb2x1bW5NREwgPSBjb2x1bW5zTURMLmZpbmQoXG4gICAgICAoeyBuYW1lIH0pID0+IG5hbWUgPT09IGNvbHVtbi5yZWZlcmVuY2VOYW1lLFxuICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIGNvbHVtbklkOiBjb2x1bW4uaWQsXG4gICAgICBub2RlVHlwZTogTm9kZVR5cGUuQ0FMQ1VMQVRFRF9GSUVMRCxcbiAgICAgIGFnZ3JlZ2F0aW9uOiBjb2x1bW4uYWdncmVnYXRpb24sXG4gICAgICBsaW5lYWdlLFxuICAgICAgdHlwZTogY29sdW1uLnR5cGUsXG4gICAgICBkaXNwbGF5TmFtZTogY29sdW1uLmRpc3BsYXlOYW1lLFxuICAgICAgcmVmZXJlbmNlTmFtZTogY29sdW1uLnJlZmVyZW5jZU5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogcHJvcGVydGllcz8uZGVzY3JpcHRpb24sXG4gICAgICBpc1ByaW1hcnlLZXk6IGNvbHVtbi5pc1BrLFxuICAgICAgZXhwcmVzc2lvbjogY29sdW1uTURMLmV4cHJlc3Npb24sXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNmb3JtTW9kZWxSZWxhdGlvbkZpZWxkKHtcbiAgICByZWxhdGlvbixcbiAgICBjdXJyZW50TW9kZWwsXG4gICAgbW9kZWxzLFxuICB9OiB7XG4gICAgcmVsYXRpb246IFJlbGF0aW9uSW5mbztcbiAgICBjdXJyZW50TW9kZWw6IE1vZGVsO1xuICAgIG1vZGVsczogTW9kZWxbXTtcbiAgfSk6IERpYWdyYW1Nb2RlbFJlbGF0aW9uRmllbGQge1xuICAgIGNvbnN0IHJlZmVyZW5jZU5hbWUgPVxuICAgICAgY3VycmVudE1vZGVsLnJlZmVyZW5jZU5hbWUgPT09IHJlbGF0aW9uLmZyb21Nb2RlbE5hbWVcbiAgICAgICAgPyByZWxhdGlvbi50b01vZGVsTmFtZVxuICAgICAgICA6IHJlbGF0aW9uLmZyb21Nb2RlbE5hbWU7XG4gICAgY29uc3QgZGlzcGxheU5hbWUgPSBtb2RlbHMuZmluZChcbiAgICAgIChtb2RlbCkgPT4gbW9kZWwucmVmZXJlbmNlTmFtZSA9PT0gcmVmZXJlbmNlTmFtZSxcbiAgICApPy5kaXNwbGF5TmFtZTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gcmVsYXRpb24ucHJvcGVydGllc1xuICAgICAgPyBKU09OLnBhcnNlKHJlbGF0aW9uLnByb3BlcnRpZXMpXG4gICAgICA6IG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIHJlbGF0aW9uSWQ6IHJlbGF0aW9uLmlkLFxuICAgICAgbm9kZVR5cGU6IE5vZGVUeXBlLlJFTEFUSU9OLFxuICAgICAgZGlzcGxheU5hbWUsXG4gICAgICByZWZlcmVuY2VOYW1lLFxuICAgICAgdHlwZTogcmVsYXRpb24uam9pblR5cGUgYXMgUmVsYXRpb25UeXBlLFxuICAgICAgZnJvbU1vZGVsSWQ6IHJlbGF0aW9uLmZyb21Nb2RlbElkLFxuICAgICAgZnJvbU1vZGVsTmFtZTogcmVsYXRpb24uZnJvbU1vZGVsTmFtZSxcbiAgICAgIGZyb21Nb2RlbERpc3BsYXlOYW1lOiByZWxhdGlvbi5mcm9tTW9kZWxEaXNwbGF5TmFtZSxcbiAgICAgIGZyb21Db2x1bW5JZDogcmVsYXRpb24uZnJvbUNvbHVtbklkLFxuICAgICAgZnJvbUNvbHVtbk5hbWU6IHJlbGF0aW9uLmZyb21Db2x1bW5OYW1lLFxuICAgICAgZnJvbUNvbHVtbkRpc3BsYXlOYW1lOiByZWxhdGlvbi5mcm9tQ29sdW1uRGlzcGxheU5hbWUsXG4gICAgICB0b01vZGVsSWQ6IHJlbGF0aW9uLnRvTW9kZWxJZCxcbiAgICAgIHRvTW9kZWxOYW1lOiByZWxhdGlvbi50b01vZGVsTmFtZSxcbiAgICAgIHRvTW9kZWxEaXNwbGF5TmFtZTogcmVsYXRpb24udG9Nb2RlbERpc3BsYXlOYW1lLFxuICAgICAgdG9Db2x1bW5JZDogcmVsYXRpb24udG9Db2x1bW5JZCxcbiAgICAgIHRvQ29sdW1uTmFtZTogcmVsYXRpb24udG9Db2x1bW5OYW1lLFxuICAgICAgdG9Db2x1bW5EaXNwbGF5TmFtZTogcmVsYXRpb24udG9Db2x1bW5EaXNwbGF5TmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBwcm9wZXJ0aWVzPy5kZXNjcmlwdGlvbixcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFuc2Zvcm1WaWV3KHZpZXc6IFZpZXcpOiBEaWFncmFtVmlldyB7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IEpTT04ucGFyc2Uodmlldy5wcm9wZXJ0aWVzKTtcbiAgICBjb25zdCBmaWVsZHMgPSAocHJvcGVydGllcz8uY29sdW1ucyB8fCBbXSkubWFwKChjb2x1bW46IGFueSkgPT4gKHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIG5vZGVUeXBlOiBOb2RlVHlwZS5GSUVMRCxcbiAgICAgIHR5cGU6IGNvbHVtbi50eXBlLFxuICAgICAgZGlzcGxheU5hbWU6IGNvbHVtbi5uYW1lLFxuICAgICAgcmVmZXJlbmNlTmFtZTogY29sdW1uLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogY29sdW1uPy5wcm9wZXJ0aWVzPy5kZXNjcmlwdGlvbixcbiAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgdmlld0lkOiB2aWV3LmlkLFxuICAgICAgbm9kZVR5cGU6IE5vZGVUeXBlLlZJRVcsXG4gICAgICBzdGF0ZW1lbnQ6IHZpZXcuc3RhdGVtZW50LFxuICAgICAgcmVmZXJlbmNlTmFtZTogdmlldy5uYW1lLFxuICAgICAgZGlzcGxheU5hbWU6IHByb3BlcnRpZXM/LmRpc3BsYXlOYW1lIHx8IHZpZXcubmFtZSxcbiAgICAgIGZpZWxkcyxcbiAgICAgIGRlc2NyaXB0aW9uOiBwcm9wZXJ0aWVzPy5kZXNjcmlwdGlvbixcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJOb2RlVHlwZSIsImdldExvZ2dlciIsIk1ETEJ1aWxkZXIiLCJsb2dnZXIiLCJsZXZlbCIsIkRpYWdyYW1SZXNvbHZlciIsImNvbnN0cnVjdG9yIiwiZ2V0RGlhZ3JhbSIsImJpbmQiLCJfcm9vdCIsIl9hcmdzIiwiY3R4IiwicHJvamVjdCIsInByb2plY3RSZXBvc2l0b3J5IiwiZ2V0Q3VycmVudFByb2plY3QiLCJtb2RlbHMiLCJtb2RlbFJlcG9zaXRvcnkiLCJmaW5kQWxsQnkiLCJwcm9qZWN0SWQiLCJpZCIsIm1vZGVsSWRzIiwibWFwIiwibW9kZWwiLCJtb2RlbENvbHVtbnMiLCJtb2RlbENvbHVtblJlcG9zaXRvcnkiLCJmaW5kQ29sdW1uc0J5TW9kZWxJZHMiLCJtb2RlbE5lc3RlZENvbHVtbnMiLCJtb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnkiLCJmaW5kTmVzdGVkQ29sdW1uc0J5TW9kZWxJZHMiLCJtb2RlbFJlbGF0aW9ucyIsInJlbGF0aW9uUmVwb3NpdG9yeSIsImZpbmRSZWxhdGlvbkluZm9CeSIsImNvbHVtbklkcyIsImNvbHVtbiIsInZpZXdzIiwidmlld1JlcG9zaXRvcnkiLCJidWlsZGVyIiwiY29sdW1ucyIsIm5lc3RlZENvbHVtbnMiLCJyZWxhdGlvbnMiLCJyZWxhdGVkTW9kZWxzIiwicmVsYXRlZENvbHVtbnMiLCJyZWxhdGVkUmVsYXRpb25zIiwibWFuaWZlc3QiLCJidWlsZCIsImJ1aWxkRGlhZ3JhbSIsImRpYWdyYW1Nb2RlbHMiLCJ0cmFuc2Zvcm1lZE1vZGVsIiwidHJhbnNmb3JtTW9kZWwiLCJhbGxDb2x1bW5zIiwiZmlsdGVyIiwibW9kZWxJZCIsIm1vZGVsTURMIiwiZmluZCIsIm5hbWUiLCJyZWZlcmVuY2VOYW1lIiwiZm9yRWFjaCIsImNvbHVtblJlbGF0aW9ucyIsInJlbGF0aW9uIiwiZnJvbUNvbHVtbklkIiwidG9Db2x1bW5JZCIsImluY2x1ZGVzIiwibGVuZ3RoIiwidHJhbnNmb3JtZWRSZWxhdGlvbkZpZWxkIiwidHJhbnNmb3JtTW9kZWxSZWxhdGlvbkZpZWxkIiwiY3VycmVudE1vZGVsIiwicmVsYXRpb25GaWVsZHMiLCJwdXNoIiwiaXNDYWxjdWxhdGVkIiwiY2FsY3VsYXRlZEZpZWxkcyIsInRyYW5zZm9ybUNhbGN1bGF0ZWRGaWVsZCIsIm5lc3RlZENvbHVtbiIsImNvbHVtbklkIiwiZmllbGRzIiwidHJhbnNmb3JtTm9ybWFsRmllbGQiLCJkaWFncmFtVmlld3MiLCJ0cmFuc2Zvcm1WaWV3IiwicHJvcGVydGllcyIsIkpTT04iLCJwYXJzZSIsIm5vZGVUeXBlIiwiTU9ERUwiLCJkaXNwbGF5TmFtZSIsInNvdXJjZVRhYmxlTmFtZSIsInJlZlNxbCIsInJlZnJlc2hUaW1lIiwiY2FjaGVkIiwiZGVzY3JpcHRpb24iLCJDQUxDVUxBVEVEX0ZJRUxEIiwiRklFTEQiLCJ0eXBlIiwiaXNQcmltYXJ5S2V5IiwiaXNQayIsImV4cHJlc3Npb24iLCJhZ2dyZWdhdGlvbiIsIm5lc3RlZEZpZWxkcyIsIm5lc3RlZENvbHVtbklkIiwiY29sdW1uUGF0aCIsImNvbHVtbnNNREwiLCJsaW5lYWdlIiwiY29sdW1uTURMIiwiZnJvbU1vZGVsTmFtZSIsInRvTW9kZWxOYW1lIiwicmVsYXRpb25JZCIsIlJFTEFUSU9OIiwiam9pblR5cGUiLCJmcm9tTW9kZWxJZCIsImZyb21Nb2RlbERpc3BsYXlOYW1lIiwiZnJvbUNvbHVtbk5hbWUiLCJmcm9tQ29sdW1uRGlzcGxheU5hbWUiLCJ0b01vZGVsSWQiLCJ0b01vZGVsRGlzcGxheU5hbWUiLCJ0b0NvbHVtbk5hbWUiLCJ0b0NvbHVtbkRpc3BsYXlOYW1lIiwidmlldyIsInZpZXdJZCIsIlZJRVciLCJzdGF0ZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/resolvers/diagramResolver.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/resolvers/learningResolver.ts":
/*!*********************************************************!*\
  !*** ./src/apollo/server/resolvers/learningResolver.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LearningResolver: () => (/* binding */ LearningResolver)\n/* harmony export */ });\n/* harmony import */ var _server_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/config */ \"(api)/./src/apollo/server/config.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var lodash_uniq__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/uniq */ \"lodash/uniq\");\n/* harmony import */ var lodash_uniq__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_uniq__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst config = (0,_server_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)();\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.getLogger)(\"LearingResolver\");\nlogger.level = \"debug\";\nclass LearningResolver {\n    constructor(){\n        this.getLearningRecord = this.getLearningRecord.bind(this);\n        this.saveLearningRecord = this.saveLearningRecord.bind(this);\n    }\n    async getLearningRecord(_root, _args, ctx) {\n        const result = await ctx.learningRepository.findAll();\n        return {\n            paths: result[0]?.paths || []\n        };\n    }\n    async saveLearningRecord(_root, args, ctx) {\n        const { path } = args.data;\n        const result = await ctx.learningRepository.findAll();\n        if (!result.length) {\n            return await ctx.learningRepository.createOne({\n                userId: config?.userUUID,\n                paths: [\n                    path\n                ]\n            });\n        }\n        const [record] = result;\n        return await ctx.learningRepository.updateOne(record.id, {\n            userId: config?.userUUID,\n            paths: lodash_uniq__WEBPACK_IMPORTED_MODULE_2___default()([\n                ...record.paths,\n                path\n            ])\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMvbGVhcm5pbmdSZXNvbHZlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUMyQztBQUVEO0FBQ1o7QUFFOUIsTUFBTUcsU0FBU0gseURBQVNBO0FBRXhCLE1BQU1JLFNBQVNILHdEQUFTQSxDQUFDO0FBQ3pCRyxPQUFPQyxLQUFLLEdBQUc7QUFFUixNQUFNQztJQUNYQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxJQUFJLENBQUNBLGlCQUFpQixDQUFDQyxJQUFJLENBQUMsSUFBSTtRQUN6RCxJQUFJLENBQUNDLGtCQUFrQixHQUFHLElBQUksQ0FBQ0Esa0JBQWtCLENBQUNELElBQUksQ0FBQyxJQUFJO0lBQzdEO0lBRUEsTUFBYUQsa0JBQ1hHLEtBQVUsRUFDVkMsS0FBVSxFQUNWQyxHQUFhLEVBQ0M7UUFDZCxNQUFNQyxTQUFTLE1BQU1ELElBQUlFLGtCQUFrQixDQUFDQyxPQUFPO1FBQ25ELE9BQU87WUFBRUMsT0FBT0gsTUFBTSxDQUFDLEVBQUUsRUFBRUcsU0FBUyxFQUFFO1FBQUM7SUFDekM7SUFFQSxNQUFhUCxtQkFDWEMsS0FBVSxFQUNWTyxJQUFTLEVBQ1RMLEdBQWEsRUFDQztRQUNkLE1BQU0sRUFBRU0sSUFBSSxFQUFFLEdBQUdELEtBQUtFLElBQUk7UUFDMUIsTUFBTU4sU0FBUyxNQUFNRCxJQUFJRSxrQkFBa0IsQ0FBQ0MsT0FBTztRQUVuRCxJQUFJLENBQUNGLE9BQU9PLE1BQU0sRUFBRTtZQUNsQixPQUFPLE1BQU1SLElBQUlFLGtCQUFrQixDQUFDTyxTQUFTLENBQUM7Z0JBQzVDQyxRQUFRcEIsUUFBUXFCO2dCQUNoQlAsT0FBTztvQkFBQ0U7aUJBQUs7WUFDZjtRQUNGO1FBRUEsTUFBTSxDQUFDTSxPQUFPLEdBQUdYO1FBQ2pCLE9BQU8sTUFBTUQsSUFBSUUsa0JBQWtCLENBQUNXLFNBQVMsQ0FBQ0QsT0FBT0UsRUFBRSxFQUFFO1lBQ3ZESixRQUFRcEIsUUFBUXFCO1lBQ2hCUCxPQUFPZixrREFBSUEsQ0FBQzttQkFBSXVCLE9BQU9SLEtBQUs7Z0JBQUVFO2FBQUs7UUFDckM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3Jlc29sdmVycy9sZWFybmluZ1Jlc29sdmVyLnRzP2IzYWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSUNvbnRleHQgfSBmcm9tICdAc2VydmVyL3R5cGVzJztcbmltcG9ydCB7IGdldENvbmZpZyB9IGZyb20gJ0BzZXJ2ZXIvY29uZmlnJztcblxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnQHNlcnZlci91dGlscyc7XG5pbXBvcnQgeyB1bmlxIH0gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKCk7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignTGVhcmluZ1Jlc29sdmVyJyk7XG5sb2dnZXIubGV2ZWwgPSAnZGVidWcnO1xuXG5leHBvcnQgY2xhc3MgTGVhcm5pbmdSZXNvbHZlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZ2V0TGVhcm5pbmdSZWNvcmQgPSB0aGlzLmdldExlYXJuaW5nUmVjb3JkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zYXZlTGVhcm5pbmdSZWNvcmQgPSB0aGlzLnNhdmVMZWFybmluZ1JlY29yZC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldExlYXJuaW5nUmVjb3JkKFxuICAgIF9yb290OiBhbnksXG4gICAgX2FyZ3M6IGFueSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGN0eC5sZWFybmluZ1JlcG9zaXRvcnkuZmluZEFsbCgpO1xuICAgIHJldHVybiB7IHBhdGhzOiByZXN1bHRbMF0/LnBhdGhzIHx8IFtdIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2F2ZUxlYXJuaW5nUmVjb3JkKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogYW55LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgeyBwYXRoIH0gPSBhcmdzLmRhdGE7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3R4LmxlYXJuaW5nUmVwb3NpdG9yeS5maW5kQWxsKCk7XG5cbiAgICBpZiAoIXJlc3VsdC5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBhd2FpdCBjdHgubGVhcm5pbmdSZXBvc2l0b3J5LmNyZWF0ZU9uZSh7XG4gICAgICAgIHVzZXJJZDogY29uZmlnPy51c2VyVVVJRCxcbiAgICAgICAgcGF0aHM6IFtwYXRoXSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IFtyZWNvcmRdID0gcmVzdWx0O1xuICAgIHJldHVybiBhd2FpdCBjdHgubGVhcm5pbmdSZXBvc2l0b3J5LnVwZGF0ZU9uZShyZWNvcmQuaWQsIHtcbiAgICAgIHVzZXJJZDogY29uZmlnPy51c2VyVVVJRCxcbiAgICAgIHBhdGhzOiB1bmlxKFsuLi5yZWNvcmQucGF0aHMsIHBhdGhdKSxcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdldENvbmZpZyIsImdldExvZ2dlciIsInVuaXEiLCJjb25maWciLCJsb2dnZXIiLCJsZXZlbCIsIkxlYXJuaW5nUmVzb2x2ZXIiLCJjb25zdHJ1Y3RvciIsImdldExlYXJuaW5nUmVjb3JkIiwiYmluZCIsInNhdmVMZWFybmluZ1JlY29yZCIsIl9yb290IiwiX2FyZ3MiLCJjdHgiLCJyZXN1bHQiLCJsZWFybmluZ1JlcG9zaXRvcnkiLCJmaW5kQWxsIiwicGF0aHMiLCJhcmdzIiwicGF0aCIsImRhdGEiLCJsZW5ndGgiLCJjcmVhdGVPbmUiLCJ1c2VySWQiLCJ1c2VyVVVJRCIsInJlY29yZCIsInVwZGF0ZU9uZSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/resolvers/learningResolver.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/resolvers/modelResolver.ts":
/*!******************************************************!*\
  !*** ./src/apollo/server/resolvers/modelResolver.ts ***!
  \******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelResolver: () => (/* binding */ ModelResolver),\n/* harmony export */   SyncStatusEnum: () => (/* binding */ SyncStatusEnum)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ \"(api)/./src/apollo/server/types/index.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var sql_formatter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sql-formatter */ \"sql-formatter\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isEmpty */ \"lodash/isEmpty\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/isNil */ \"lodash/isNil\");\n/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_isNil__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _utils_regex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/regex */ \"(api)/./src/apollo/server/utils/regex.ts\");\n/* harmony import */ var _utils_model__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/model */ \"(api)/./src/apollo/server/utils/model.ts\");\n/* harmony import */ var _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sql_formatter__WEBPACK_IMPORTED_MODULE_2__, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__]);\n([sql_formatter__WEBPACK_IMPORTED_MODULE_2__, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.getLogger)(\"ModelResolver\");\nlogger.level = \"debug\";\nvar SyncStatusEnum;\n(function(SyncStatusEnum) {\n    SyncStatusEnum[\"IN_PROGRESS\"] = \"IN_PROGRESS\";\n    SyncStatusEnum[\"SYNCRONIZED\"] = \"SYNCRONIZED\";\n    SyncStatusEnum[\"UNSYNCRONIZED\"] = \"UNSYNCRONIZED\";\n})(SyncStatusEnum || (SyncStatusEnum = {}));\nclass ModelResolver {\n    constructor(){\n        // model & model column\n        this.listModels = this.listModels.bind(this);\n        this.getModel = this.getModel.bind(this);\n        this.createModel = this.createModel.bind(this);\n        this.updateModel = this.updateModel.bind(this);\n        this.deleteModel = this.deleteModel.bind(this);\n        this.updateModelMetadata = this.updateModelMetadata.bind(this);\n        this.deploy = this.deploy.bind(this);\n        this.getMDL = this.getMDL.bind(this);\n        this.checkModelSync = this.checkModelSync.bind(this);\n        // view\n        this.listViews = this.listViews.bind(this);\n        this.getView = this.getView.bind(this);\n        this.validateView = this.validateView.bind(this);\n        this.createView = this.createView.bind(this);\n        this.deleteView = this.deleteView.bind(this);\n        this.updateViewMetadata = this.updateViewMetadata.bind(this);\n        // preview\n        this.previewModelData = this.previewModelData.bind(this);\n        this.previewViewData = this.previewViewData.bind(this);\n        this.previewSql = this.previewSql.bind(this);\n        this.getNativeSql = this.getNativeSql.bind(this);\n        // calculated field\n        this.createCalculatedField = this.createCalculatedField.bind(this);\n        this.validateCalculatedField = this.validateCalculatedField.bind(this);\n        this.updateCalculatedField = this.updateCalculatedField.bind(this);\n        this.deleteCalculatedField = this.deleteCalculatedField.bind(this);\n        // relation\n        this.createRelation = this.createRelation.bind(this);\n        this.updateRelation = this.updateRelation.bind(this);\n        this.deleteRelation = this.deleteRelation.bind(this);\n    }\n    async createRelation(_root, args, ctx) {\n        const { data } = args;\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_CREATE_RELATION;\n        try {\n            const relation = await ctx.modelService.createRelation(data);\n            ctx.telemetry.sendEvent(eventName, {\n                data\n            });\n            return relation;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                data: data,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async updateRelation(_root, args, ctx) {\n        const { data, where } = args;\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_UPDATE_RELATION;\n        try {\n            const relation = await ctx.modelService.updateRelation(data, where.id);\n            ctx.telemetry.sendEvent(eventName, {\n                data\n            });\n            return relation;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                data: data,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async deleteRelation(_root, args, ctx) {\n        const relationId = args.where.id;\n        await ctx.modelService.deleteRelation(relationId);\n        return true;\n    }\n    async createCalculatedField(_root, _args, ctx) {\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_CREATE_CF;\n        try {\n            const column = await ctx.modelService.createCalculatedField(_args.data);\n            ctx.telemetry.sendEvent(eventName, {\n                data: _args.data\n            });\n            return column;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                data: _args.data,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async validateCalculatedField(_root, args, ctx) {\n        const { name, modelId, columnId } = args.data;\n        return await ctx.modelService.validateCalculatedFieldNaming(name, modelId, columnId);\n    }\n    async updateCalculatedField(_root, _args, ctx) {\n        const { data, where } = _args;\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_UPDATE_CF;\n        try {\n            const column = await ctx.modelService.updateCalculatedField(data, where.id);\n            ctx.telemetry.sendEvent(eventName, {\n                data\n            });\n            return column;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                data: data,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async deleteCalculatedField(_root, args, ctx) {\n        const columnId = args.where.id;\n        // check column exist and is calculated field\n        const column = await ctx.modelColumnRepository.findOneBy({\n            id: columnId\n        });\n        if (!column || !column.isCalculated) {\n            throw new Error(\"Calculated field not found\");\n        }\n        await ctx.modelColumnRepository.deleteOne(columnId);\n        return true;\n    }\n    async checkModelSync(_root, _args, ctx) {\n        const { id } = await ctx.projectService.getCurrentProject();\n        const { manifest } = await ctx.mdlService.makeCurrentModelMDL();\n        const currentHash = ctx.deployService.createMDLHash(manifest, id);\n        const lastDeploy = await ctx.deployService.getLastDeployment(id);\n        const lastDeployHash = lastDeploy?.hash;\n        const inProgressDeployment = await ctx.deployService.getInProgressDeployment(id);\n        if (inProgressDeployment) {\n            return {\n                status: \"IN_PROGRESS\"\n            };\n        }\n        return currentHash == lastDeployHash ? {\n            status: \"SYNCRONIZED\"\n        } : {\n            status: \"UNSYNCRONIZED\"\n        };\n    }\n    async deploy(_root, args, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const { manifest } = await ctx.mdlService.makeCurrentModelMDL();\n        const deployRes = await ctx.deployService.deploy(manifest, project.id, args.force);\n        // only generating for user's data source\n        if (project.sampleDataset === null) {\n            await ctx.projectService.generateProjectRecommendationQuestions();\n        }\n        return deployRes;\n    }\n    async getMDL(_root, args, ctx) {\n        const mdl = await ctx.deployService.getMDLByHash(args.hash);\n        return {\n            hash: args.hash,\n            mdl\n        };\n    }\n    async listModels(_root, _args, ctx) {\n        const { id: projectId } = await ctx.projectService.getCurrentProject();\n        const models = await ctx.modelRepository.findAllBy({\n            projectId\n        });\n        const modelIds = models.map((m)=>m.id);\n        const modelColumnList = await ctx.modelColumnRepository.findColumnsByModelIds(modelIds);\n        const modelNestedColumnList = await ctx.modelNestedColumnRepository.findNestedColumnsByModelIds(modelIds);\n        const result = [];\n        for (const model of models){\n            const modelFields = modelColumnList.filter((c)=>c.modelId === model.id).map((c)=>({\n                    ...c,\n                    properties: JSON.parse(c.properties),\n                    nestedColumns: c.type.includes(\"STRUCT\") ? modelNestedColumnList.filter((nc)=>nc.columnId === c.id) : undefined\n                }));\n            const fields = modelFields.filter((c)=>!c.isCalculated);\n            const calculatedFields = modelFields.filter((c)=>c.isCalculated);\n            result.push({\n                ...model,\n                fields,\n                calculatedFields,\n                properties: {\n                    ...JSON.parse(model.properties)\n                }\n            });\n        }\n        return result;\n    }\n    async getModel(_root, args, ctx) {\n        const modelId = args.where.id;\n        const model = await ctx.modelRepository.findOneBy({\n            id: modelId\n        });\n        if (!model) {\n            throw new Error(\"Model not found\");\n        }\n        const modelColumns = await ctx.modelColumnRepository.findColumnsByModelIds([\n            model.id\n        ]);\n        const modelNestedColumns = await ctx.modelNestedColumnRepository.findAllBy({\n            modelId: model.id\n        });\n        const columns = modelColumns.map((c)=>({\n                ...c,\n                properties: JSON.parse(c.properties),\n                nestedColumns: c.type.includes(\"STRUCT\") ? modelNestedColumns.filter((nc)=>nc.columnId === c.id) : undefined\n            }));\n        const relations = (await ctx.relationRepository.findRelationsBy({\n            columnIds: modelColumns.map((c)=>c.id)\n        })).map((r)=>({\n                ...r,\n                type: r.joinType,\n                properties: r.properties ? JSON.parse(r.properties) : {}\n            }));\n        return {\n            ...model,\n            fields: columns.filter((c)=>!c.isCalculated),\n            calculatedFields: columns.filter((c)=>c.isCalculated),\n            relations,\n            properties: {\n                ...JSON.parse(model.properties)\n            }\n        };\n    }\n    async createModel(_root, args, ctx) {\n        const { sourceTableName, fields, primaryKey } = args.data;\n        try {\n            const model = await this.handleCreateModel(ctx, sourceTableName, fields, primaryKey);\n            ctx.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_CREATE_MODEL, {\n                data: args.data\n            });\n            return model;\n        } catch (error) {\n            ctx.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_CREATE_MODEL, {\n                data: args.data,\n                error\n            }, error.extensions?.service, false);\n            throw error;\n        }\n    }\n    async handleCreateModel(ctx, sourceTableName, fields, primaryKey) {\n        const project = await ctx.projectService.getCurrentProject();\n        const dataSourceTables = await ctx.projectService.getProjectDataSourceTables(project);\n        this.validateTableExist(sourceTableName, dataSourceTables);\n        this.validateColumnsExist(sourceTableName, fields, dataSourceTables);\n        // create model\n        const dataSourceTable = dataSourceTables.find((table)=>table.name === sourceTableName);\n        if (!dataSourceTable) {\n            throw new Error(\"Table not found in the data source\");\n        }\n        const properties = dataSourceTable?.properties;\n        const modelValue = {\n            projectId: project.id,\n            displayName: sourceTableName,\n            referenceName: (0,_utils_model__WEBPACK_IMPORTED_MODULE_6__.replaceInvalidReferenceName)(sourceTableName),\n            sourceTableName: sourceTableName,\n            cached: false,\n            refreshTime: null,\n            properties: properties ? JSON.stringify(properties) : null\n        };\n        const model = await ctx.modelRepository.createOne(modelValue);\n        // create columns\n        const compactColumns = dataSourceTable.columns.filter((c)=>fields.includes(c.name));\n        const columnValues = compactColumns.map((column)=>({\n                modelId: model.id,\n                isCalculated: false,\n                displayName: column.name,\n                referenceName: (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.transformInvalidColumnName)(column.name),\n                sourceColumnName: column.name,\n                type: column.type || \"string\",\n                notNull: column.notNull || false,\n                isPk: primaryKey === column.name,\n                properties: column.properties ? JSON.stringify(column.properties) : null\n            }));\n        const columns = await ctx.modelColumnRepository.createMany(columnValues);\n        // create nested columns\n        const nestedColumnValues = compactColumns.flatMap((compactColumn)=>{\n            const column = columns.find((c)=>c.sourceColumnName === compactColumn.name);\n            if (!column) return [];\n            return (0,_utils_model__WEBPACK_IMPORTED_MODULE_6__.handleNestedColumns)(compactColumn, {\n                modelId: column.modelId,\n                columnId: column.id,\n                sourceColumnName: column.sourceColumnName\n            });\n        });\n        await ctx.modelNestedColumnRepository.createMany(nestedColumnValues);\n        logger.info(`Model created: ${JSON.stringify(model)}`);\n        return model;\n    }\n    async updateModel(_root, args, ctx) {\n        const { fields, primaryKey } = args.data;\n        try {\n            const model = await this.handleUpdateModel(ctx, args, fields, primaryKey);\n            ctx.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_UPDATE_MODEL, {\n                data: args.data\n            });\n            return model;\n        } catch (err) {\n            ctx.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_UPDATE_MODEL, {\n                data: args.data,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async handleUpdateModel(ctx, args, fields, primaryKey) {\n        const project = await ctx.projectService.getCurrentProject();\n        const dataSourceTables = await ctx.projectService.getProjectDataSourceTables(project);\n        const model = await ctx.modelRepository.findOneBy({\n            id: args.where.id\n        });\n        const existingColumns = await ctx.modelColumnRepository.findAllBy({\n            modelId: model.id,\n            isCalculated: false\n        });\n        const { sourceTableName } = model;\n        this.validateTableExist(sourceTableName, dataSourceTables);\n        this.validateColumnsExist(sourceTableName, fields, dataSourceTables);\n        const sourceTableColumns = dataSourceTables.find((table)=>table.name === sourceTableName)?.columns;\n        const { toDeleteColumnIds, toCreateColumns, toUpdateColumns } = (0,_utils_model__WEBPACK_IMPORTED_MODULE_6__.findColumnsToUpdate)(fields, existingColumns, sourceTableColumns);\n        await (0,_utils_model__WEBPACK_IMPORTED_MODULE_6__.updateModelPrimaryKey)(ctx.modelColumnRepository, model.id, primaryKey);\n        // delete columns\n        if (toDeleteColumnIds.length) {\n            await ctx.modelColumnRepository.deleteMany(toDeleteColumnIds);\n        }\n        // create columns\n        if (toCreateColumns.length) {\n            const compactColumns = sourceTableColumns.filter((sourceColumn)=>toCreateColumns.includes(sourceColumn.name));\n            const columnValues = compactColumns.map((column)=>{\n                const columnValue = {\n                    modelId: model.id,\n                    isCalculated: false,\n                    displayName: column.name,\n                    sourceColumnName: column.name,\n                    referenceName: (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.transformInvalidColumnName)(column.name),\n                    type: column.type || \"string\",\n                    notNull: column.notNull,\n                    isPk: primaryKey === column.name,\n                    properties: column.properties ? JSON.stringify(column.properties) : null\n                };\n                return columnValue;\n            });\n            const columns = await ctx.modelColumnRepository.createMany(columnValues);\n            // create nested columns\n            const nestedColumnValues = compactColumns.flatMap((compactColumn)=>{\n                const column = columns.find((c)=>c.sourceColumnName === compactColumn.name);\n                return (0,_utils_model__WEBPACK_IMPORTED_MODULE_6__.handleNestedColumns)(compactColumn, {\n                    modelId: column.modelId,\n                    columnId: column.id,\n                    sourceColumnName: column.sourceColumnName\n                });\n            });\n            await ctx.modelNestedColumnRepository.createMany(nestedColumnValues);\n        }\n        // update columns\n        if (toUpdateColumns.length) {\n            for (const { id, sourceColumnName, type } of toUpdateColumns){\n                const column = await ctx.modelColumnRepository.updateOne(id, {\n                    type\n                });\n                // if the struct type is changed, need to re-create nested columns\n                if (type.includes(\"STRUCT\")) {\n                    const sourceColumn = sourceTableColumns.find((sourceColumn)=>sourceColumn.name === sourceColumnName);\n                    await ctx.modelNestedColumnRepository.deleteAllBy({\n                        columnId: column.id\n                    });\n                    await ctx.modelNestedColumnRepository.createMany((0,_utils_model__WEBPACK_IMPORTED_MODULE_6__.handleNestedColumns)(sourceColumn, {\n                        modelId: column.modelId,\n                        columnId: column.id,\n                        sourceColumnName: sourceColumnName\n                    }));\n                }\n            }\n        }\n        logger.info(`Model updated: ${JSON.stringify(model)}`);\n        return model;\n    }\n    // delete model\n    async deleteModel(_root, args, ctx) {\n        const modelId = args.where.id;\n        const model = await ctx.modelRepository.findOneBy({\n            id: modelId\n        });\n        if (!model) {\n            throw new Error(\"Model not found\");\n        }\n        // related columns and relationships will be deleted in cascade\n        await ctx.modelRepository.deleteOne(modelId);\n        return true;\n    }\n    // update model metadata\n    async updateModelMetadata(_root, args, ctx) {\n        const modelId = args.where.id;\n        const data = args.data;\n        // check if model exists\n        const model = await ctx.modelRepository.findOneBy({\n            id: modelId\n        });\n        if (!model) {\n            throw new Error(\"Model not found\");\n        }\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.MODELING_UPDATE_MODEL_METADATA;\n        try {\n            // update model metadata\n            await this.handleUpdateModelMetadata(data, model, ctx, modelId);\n            // todo: considering using update ... from statement to do a batch update\n            // update column metadata\n            if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(data.columns)) {\n                // find the columns that match the user requested columns\n                await this.handleUpdateColumnMetadata(data, ctx);\n            }\n            // update nested column metadata\n            if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(data.nestedColumns)) {\n                await this.handleUpdateNestedColumnMetadata(data, ctx);\n            }\n            // update calculated field metadata\n            if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(data.calculatedFields)) {\n                await this.handleUpdateCFMetadata(data, ctx);\n            }\n            // update relationship metadata\n            if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(data.relationships)) {\n                await this.handleUpdateRelationshipMetadata(data, ctx);\n            }\n            ctx.telemetry.sendEvent(eventName, {\n                data\n            });\n            return true;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                data: data,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async handleUpdateModelMetadata(data, model, ctx, modelId) {\n        const modelMetadata = {};\n        // if displayName is not null, or undefined, update the displayName\n        if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(data.displayName)) {\n            modelMetadata.displayName = this.determineMetadataValue(data.displayName);\n        }\n        // if description is not null, or undefined, update the description in properties\n        if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(data.description)) {\n            const properties = lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(model.properties) ? {} : JSON.parse(model.properties);\n            properties.description = this.determineMetadataValue(data.description);\n            modelMetadata.properties = JSON.stringify(properties);\n        }\n        if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(modelMetadata)) {\n            await ctx.modelRepository.updateOne(modelId, modelMetadata);\n        }\n    }\n    async handleUpdateRelationshipMetadata(data, ctx) {\n        const relationshipIds = data.relationships.map((r)=>r.id);\n        const relationships = await ctx.relationRepository.findRelationsByIds(relationshipIds);\n        for (const rel of relationships){\n            const requestedMetadata = data.relationships.find((r)=>r.id === rel.id);\n            const relationMetadata = {};\n            if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(requestedMetadata.description)) {\n                const properties = rel.properties ? JSON.parse(rel.properties) : {};\n                properties.description = this.determineMetadataValue(requestedMetadata.description);\n                relationMetadata.properties = JSON.stringify(properties);\n            }\n            if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(relationMetadata)) {\n                await ctx.relationRepository.updateOne(rel.id, relationMetadata);\n            }\n        }\n    }\n    async handleUpdateCFMetadata(data, ctx) {\n        const calculatedFieldIds = data.calculatedFields.map((c)=>c.id);\n        const modelColumns = await ctx.modelColumnRepository.findColumnsByIds(calculatedFieldIds);\n        for (const col of modelColumns){\n            const requestedMetadata = data.calculatedFields.find((c)=>c.id === col.id);\n            const columnMetadata = {};\n            // check if description is empty\n            // if description is empty, skip the update\n            // if description is not empty, update the description in properties\n            if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(requestedMetadata.description)) {\n                const properties = col.properties ? JSON.parse(col.properties) : {};\n                properties.description = this.determineMetadataValue(requestedMetadata.description);\n                columnMetadata.properties = JSON.stringify(properties);\n            }\n            if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(columnMetadata)) {\n                await ctx.modelColumnRepository.updateOne(col.id, columnMetadata);\n            }\n        }\n    }\n    async handleUpdateColumnMetadata(data, ctx) {\n        const columnIds = data.columns.map((c)=>c.id);\n        const modelColumns = await ctx.modelColumnRepository.findColumnsByIds(columnIds);\n        for (const col of modelColumns){\n            const requestedMetadata = data.columns.find((c)=>c.id === col.id);\n            // update metadata\n            const columnMetadata = {};\n            if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(requestedMetadata.displayName)) {\n                columnMetadata.displayName = this.determineMetadataValue(requestedMetadata.displayName);\n            }\n            if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(requestedMetadata.description)) {\n                const properties = col.properties ? JSON.parse(col.properties) : {};\n                properties.description = this.determineMetadataValue(requestedMetadata.description);\n                columnMetadata.properties = JSON.stringify(properties);\n            }\n            if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(columnMetadata)) {\n                await ctx.modelColumnRepository.updateOne(col.id, columnMetadata);\n            }\n        }\n    }\n    async handleUpdateNestedColumnMetadata(data, ctx) {\n        const nestedColumnIds = data.nestedColumns.map((nc)=>nc.id);\n        const modelNestedColumns = await ctx.modelNestedColumnRepository.findNestedColumnsByIds(nestedColumnIds);\n        for (const col of modelNestedColumns){\n            const requestedMetadata = data.nestedColumns.find((c)=>c.id === col.id);\n            const nestedColumnMetadata = {};\n            if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(requestedMetadata.displayName)) {\n                nestedColumnMetadata.displayName = this.determineMetadataValue(requestedMetadata.displayName);\n            }\n            if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(requestedMetadata.description)) {\n                nestedColumnMetadata.properties = {\n                    ...col.properties,\n                    description: this.determineMetadataValue(requestedMetadata.description)\n                };\n            }\n            if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(nestedColumnMetadata)) {\n                await ctx.modelNestedColumnRepository.updateOne(col.id, nestedColumnMetadata);\n            }\n        }\n    }\n    // list views\n    async listViews(_root, _args, ctx) {\n        const { id } = await ctx.projectService.getCurrentProject();\n        const views = await ctx.viewRepository.findAllBy({\n            projectId: id\n        });\n        return views.map((view)=>({\n                ...view,\n                displayName: view.properties ? JSON.parse(view.properties)?.displayName : view.name\n            }));\n    }\n    async getView(_root, args, ctx) {\n        const viewId = args.where.id;\n        const view = await ctx.viewRepository.findOneBy({\n            id: viewId\n        });\n        if (!view) {\n            throw new Error(\"View not found\");\n        }\n        const displayName = view.properties ? JSON.parse(view.properties)?.displayName : view.name;\n        return {\n            ...view,\n            displayName\n        };\n    }\n    // validate a view name\n    async validateView(_root, args, ctx) {\n        const { name } = args.data;\n        return this.validateViewName(name, ctx);\n    }\n    // create view from sql of a response\n    async createView(_root, args, ctx) {\n        const { name: displayName, responseId } = args.data;\n        // validate view name\n        const validateResult = await this.validateViewName(displayName, ctx);\n        if (!validateResult.valid) {\n            throw new Error(validateResult.message);\n        }\n        // create view\n        const project = await ctx.projectService.getCurrentProject();\n        const { manifest } = await ctx.deployService.getLastDeployment(project.id);\n        // get sql statement of a response\n        const response = await ctx.askingService.getResponse(responseId);\n        if (!response) {\n            throw new Error(`Thread response ${responseId} not found`);\n        }\n        // construct cte sql and format it\n        const statement = (0,sql_formatter__WEBPACK_IMPORTED_MODULE_2__.format)(response.sql);\n        // describe columns\n        const { columns } = await ctx.queryService.describeStatement(statement, {\n            project,\n            limit: 1,\n            modelingOnly: false,\n            manifest\n        });\n        if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(columns)) {\n            throw new Error(\"Failed to describe statement\");\n        }\n        // properties\n        const properties = {\n            displayName,\n            columns,\n            // properties from the thread response\n            responseId,\n            question: response.question\n        };\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_7__.TelemetryEvent.HOME_CREATE_VIEW;\n        const eventProperties = {\n            statement,\n            displayName\n        };\n        // create view\n        try {\n            const name = (0,_utils_regex__WEBPACK_IMPORTED_MODULE_5__.replaceAllowableSyntax)(displayName);\n            const view = await ctx.viewRepository.createOne({\n                projectId: project.id,\n                name,\n                statement,\n                properties: JSON.stringify(properties)\n            });\n            // telemetry\n            ctx.telemetry.sendEvent(eventName, eventProperties);\n            return {\n                ...view,\n                displayName\n            };\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                ...eventProperties,\n                error: err\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    // delete view\n    async deleteView(_root, args, ctx) {\n        const viewId = args.where.id;\n        const view = await ctx.viewRepository.findOneBy({\n            id: viewId\n        });\n        if (!view) {\n            throw new Error(\"View not found\");\n        }\n        await ctx.viewRepository.deleteOne(viewId);\n        return true;\n    }\n    async previewModelData(_root, args, ctx) {\n        const modelId = args.where.id;\n        const model = await ctx.modelRepository.findOneBy({\n            id: modelId\n        });\n        if (!model) {\n            throw new Error(\"Model not found\");\n        }\n        const project = await ctx.projectService.getCurrentProject();\n        const { manifest } = await ctx.mdlService.makeCurrentModelMDL();\n        const modelColumns = await ctx.modelColumnRepository.findColumnsByModelIds([\n            model.id\n        ]);\n        const sql = `select ${(0,_utils_model__WEBPACK_IMPORTED_MODULE_6__.getPreviewColumnsStr)(modelColumns)} from \"${model.referenceName}\"`;\n        const data = await ctx.queryService.preview(sql, {\n            project,\n            modelingOnly: false,\n            manifest\n        });\n        return data;\n    }\n    async previewViewData(_root, args, ctx) {\n        const { id: viewId, limit } = args.where;\n        const view = await ctx.viewRepository.findOneBy({\n            id: viewId\n        });\n        if (!view) {\n            throw new Error(\"View not found\");\n        }\n        const { manifest } = await ctx.mdlService.makeCurrentModelMDL();\n        const project = await ctx.projectService.getCurrentProject();\n        const data = await ctx.queryService.preview(view.statement, {\n            project,\n            limit,\n            manifest,\n            modelingOnly: false\n        });\n        return data;\n    }\n    // Notice: this is used by AI service.\n    // any change to this resolver should be synced with AI service.\n    async previewSql(_root, args, ctx) {\n        const { sql, projectId, limit, dryRun } = args.data;\n        const project = projectId ? await ctx.projectService.getProjectById(projectId) : await ctx.projectService.getCurrentProject();\n        const { manifest } = await ctx.deployService.getLastDeployment(project.id);\n        return await ctx.queryService.preview(sql, {\n            project,\n            limit: limit,\n            modelingOnly: false,\n            manifest,\n            dryRun\n        });\n    }\n    async getNativeSql(_root, args, ctx) {\n        const { responseId } = args;\n        // If using a sample dataset, native SQL is not supported\n        const project = await ctx.projectService.getCurrentProject();\n        if (project.sampleDataset) {\n            throw new Error(`Doesn't support Native SQL`);\n        }\n        const { manifest } = await ctx.mdlService.makeCurrentModelMDL();\n        // get sql statement of a response\n        const response = await ctx.askingService.getResponse(responseId);\n        if (!response) {\n            throw new Error(`Thread response ${responseId} not found`);\n        }\n        // construct cte sql and format it\n        let nativeSql;\n        if (project.type === _types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.DUCKDB) {\n            logger.info(`Getting native sql from wren engine`);\n            nativeSql = await ctx.wrenEngineAdaptor.getNativeSQL(response.sql, {\n                manifest,\n                modelingOnly: false\n            });\n        } else {\n            logger.info(`Getting native sql from ibis server`);\n            nativeSql = await ctx.ibisServerAdaptor.getNativeSql({\n                dataSource: project.type,\n                sql: response.sql,\n                mdl: manifest\n            });\n        }\n        return (0,sql_formatter__WEBPACK_IMPORTED_MODULE_2__.format)(nativeSql);\n    }\n    async updateViewMetadata(_root, args, ctx) {\n        const viewId = args.where.id;\n        const data = args.data;\n        // check if view exists\n        const view = await ctx.viewRepository.findOneBy({\n            id: viewId\n        });\n        if (!view) {\n            throw new Error(\"View not found\");\n        }\n        // update view metadata\n        const properties = JSON.parse(view.properties);\n        let newName = view.name;\n        // if displayName is not null, or undefined, update the displayName\n        if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(data.displayName)) {\n            await this.validateViewName(data.displayName, ctx, viewId);\n            newName = (0,_utils_regex__WEBPACK_IMPORTED_MODULE_5__.replaceAllowableSyntax)(data.displayName);\n            properties.displayName = this.determineMetadataValue(data.displayName);\n        }\n        // if description is not null, or undefined, update the description in properties\n        if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(data.description)) {\n            properties.description = this.determineMetadataValue(data.description);\n        }\n        // view column metadata\n        if (!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(data.columns)) {\n            const viewColumns = properties.columns;\n            for (const col of viewColumns){\n                const requestedMetadata = data.columns.find((c)=>c.referenceName === col.name);\n                if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_4___default()(requestedMetadata.description)) {\n                    col.properties = col.properties || {};\n                    col.properties.description = this.determineMetadataValue(requestedMetadata.description);\n                }\n            }\n            properties.columns = viewColumns;\n        }\n        await ctx.viewRepository.updateOne(viewId, {\n            name: newName,\n            properties: JSON.stringify(properties)\n        });\n        return true;\n    }\n    determineMetadataValue(value) {\n        // if it's empty string, meaning users want to remove the value\n        // so we return null\n        if (value === \"\") {\n            return null;\n        }\n        // otherwise, return the value\n        return value;\n    }\n    // validate view name\n    async validateViewName(viewDisplayName, ctx, selfView) {\n        // check if view name is valid\n        // a-z, A-Z, 0-9, _, - are allowed and cannot start with number\n        const { valid, message } = (0,_utils_regex__WEBPACK_IMPORTED_MODULE_5__.validateDisplayName)(viewDisplayName);\n        if (!valid) {\n            return {\n                valid: false,\n                message\n            };\n        }\n        const referenceName = (0,_utils_regex__WEBPACK_IMPORTED_MODULE_5__.replaceAllowableSyntax)(viewDisplayName);\n        // check if view name is duplicated\n        const { id } = await ctx.projectService.getCurrentProject();\n        const views = await ctx.viewRepository.findAllBy({\n            projectId: id\n        });\n        if (views.find((v)=>v.name === referenceName && v.id !== selfView)) {\n            return {\n                valid: false,\n                message: `Generated view name \"${referenceName}\" is duplicated`\n            };\n        }\n        return {\n            valid: true\n        };\n    }\n    validateTableExist(tableName, dataSourceTables) {\n        if (!dataSourceTables.find((c)=>c.name === tableName)) {\n            throw new Error(`Table ${tableName} not found in the data Source`);\n        }\n    }\n    validateColumnsExist(tableName, fields, dataSourceTables) {\n        const tableColumns = dataSourceTables.find((c)=>c.name === tableName)?.columns;\n        for (const field of fields){\n            if (!tableColumns.find((c)=>c.name === field)) {\n                throw new Error(`Column \"${field}\" not found in table \"${tableName}\" in the data Source`);\n            }\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMvbW9kZWxSZXNvbHZlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFja0I7QUFDb0Q7QUFFL0I7QUFDQztBQUFBO0FBQ3FDO0FBUXJEO0FBRWdDO0FBRXhELE1BQU1jLFNBQVNiLHdEQUFTQSxDQUFDO0FBQ3pCYSxPQUFPQyxLQUFLLEdBQUc7O1VBRUhDOzs7O0dBQUFBLG1CQUFBQTtBQU1MLE1BQU1DO0lBQ1hDLGFBQWM7UUFDWix1QkFBdUI7UUFDdkIsSUFBSSxDQUFDQyxVQUFVLEdBQUcsSUFBSSxDQUFDQSxVQUFVLENBQUNDLElBQUksQ0FBQyxJQUFJO1FBQzNDLElBQUksQ0FBQ0MsUUFBUSxHQUFHLElBQUksQ0FBQ0EsUUFBUSxDQUFDRCxJQUFJLENBQUMsSUFBSTtRQUN2QyxJQUFJLENBQUNFLFdBQVcsR0FBRyxJQUFJLENBQUNBLFdBQVcsQ0FBQ0YsSUFBSSxDQUFDLElBQUk7UUFDN0MsSUFBSSxDQUFDRyxXQUFXLEdBQUcsSUFBSSxDQUFDQSxXQUFXLENBQUNILElBQUksQ0FBQyxJQUFJO1FBQzdDLElBQUksQ0FBQ0ksV0FBVyxHQUFHLElBQUksQ0FBQ0EsV0FBVyxDQUFDSixJQUFJLENBQUMsSUFBSTtRQUM3QyxJQUFJLENBQUNLLG1CQUFtQixHQUFHLElBQUksQ0FBQ0EsbUJBQW1CLENBQUNMLElBQUksQ0FBQyxJQUFJO1FBQzdELElBQUksQ0FBQ00sTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFDTixJQUFJLENBQUMsSUFBSTtRQUNuQyxJQUFJLENBQUNPLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQ1AsSUFBSSxDQUFDLElBQUk7UUFDbkMsSUFBSSxDQUFDUSxjQUFjLEdBQUcsSUFBSSxDQUFDQSxjQUFjLENBQUNSLElBQUksQ0FBQyxJQUFJO1FBRW5ELE9BQU87UUFDUCxJQUFJLENBQUNTLFNBQVMsR0FBRyxJQUFJLENBQUNBLFNBQVMsQ0FBQ1Qs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Q0x5RCxPQUFPO1FBQ1Q7SUFDRjtJQUVRaEUsbUJBQ040RixTQUFpQixFQUNqQjlGLGdCQUFnQyxFQUNoQztRQUNBLElBQUksQ0FBQ0EsaUJBQWlCSyxJQUFJLENBQUMsQ0FBQzlCLElBQU1BLEVBQUVoRCxJQUFJLEtBQUt1SyxZQUFZO1lBQ3ZELE1BQU0sSUFBSS9KLE1BQU0sQ0FBQyxNQUFNLEVBQUUrSixVQUFVLDZCQUE2QixDQUFDO1FBQ25FO0lBQ0Y7SUFFUTNGLHFCQUNOMkYsU0FBaUIsRUFDakI5RyxNQUFnQixFQUNoQmdCLGdCQUFnQyxFQUNoQztRQUNBLE1BQU0rRixlQUFlL0YsaUJBQWlCSyxJQUFJLENBQ3hDLENBQUM5QixJQUFNQSxFQUFFaEQsSUFBSSxLQUFLdUssWUFDakJ6RztRQUNILEtBQUssTUFBTTJHLFNBQVNoSCxPQUFRO1lBQzFCLElBQUksQ0FBQytHLGFBQWExRixJQUFJLENBQUMsQ0FBQzlCLElBQU1BLEVBQUVoRCxJQUFJLEtBQUt5SyxRQUFRO2dCQUMvQyxNQUFNLElBQUlqSyxNQUNSLENBQUMsUUFBUSxFQUFFaUssTUFBTSxzQkFBc0IsRUFBRUYsVUFBVSxvQkFBb0IsQ0FBQztZQUU1RTtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMvbW9kZWxSZXNvbHZlci50cz9kNThlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENyZWF0ZU1vZGVsRGF0YSxcbiAgVXBkYXRlTW9kZWxEYXRhLFxuICBVcGRhdGVNb2RlbE1ldGFkYXRhSW5wdXQsXG4gIENyZWF0ZUNhbGN1bGF0ZWRGaWVsZERhdGEsXG4gIFVwZGF0ZUNhbGN1bGF0ZWRGaWVsZERhdGEsXG4gIFVwZGF0ZVZpZXdNZXRhZGF0YUlucHV0LFxuICBQcmV2aWV3U1FMRGF0YSxcbn0gZnJvbSAnLi4vbW9kZWxzJztcbmltcG9ydCB7XG4gIERhdGFTb3VyY2VOYW1lLFxuICBJQ29udGV4dCxcbiAgUmVsYXRpb25EYXRhLFxuICBVcGRhdGVSZWxhdGlvbkRhdGEsXG59IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGdldExvZ2dlciwgdHJhbnNmb3JtSW52YWxpZENvbHVtbk5hbWUgfSBmcm9tICdAc2VydmVyL3V0aWxzJztcbmltcG9ydCB7IERlcGxveVJlc3BvbnNlIH0gZnJvbSAnLi4vc2VydmljZXMvZGVwbG95U2VydmljZSc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdzcWwtZm9ybWF0dGVyJztcbmltcG9ydCB7IGlzRW1wdHksIGlzTmlsIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHJlcGxhY2VBbGxvd2FibGVTeW50YXgsIHZhbGlkYXRlRGlzcGxheU5hbWUgfSBmcm9tICcuLi91dGlscy9yZWdleCc7XG5pbXBvcnQgeyBNb2RlbCwgTW9kZWxDb2x1bW4gfSBmcm9tICcuLi9yZXBvc2l0b3JpZXMnO1xuaW1wb3J0IHtcbiAgZmluZENvbHVtbnNUb1VwZGF0ZSxcbiAgZ2V0UHJldmlld0NvbHVtbnNTdHIsXG4gIGhhbmRsZU5lc3RlZENvbHVtbnMsXG4gIHJlcGxhY2VJbnZhbGlkUmVmZXJlbmNlTmFtZSxcbiAgdXBkYXRlTW9kZWxQcmltYXJ5S2V5LFxufSBmcm9tICcuLi91dGlscy9tb2RlbCc7XG5pbXBvcnQgeyBDb21wYWN0VGFibGUsIFByZXZpZXdEYXRhUmVzcG9uc2UgfSBmcm9tICdAc2VydmVyL3NlcnZpY2VzJztcbmltcG9ydCB7IFRlbGVtZXRyeUV2ZW50IH0gZnJvbSAnLi4vdGVsZW1ldHJ5L3RlbGVtZXRyeSc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignTW9kZWxSZXNvbHZlcicpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuZXhwb3J0IGVudW0gU3luY1N0YXR1c0VudW0ge1xuICBJTl9QUk9HUkVTUyA9ICdJTl9QUk9HUkVTUycsXG4gIFNZTkNST05JWkVEID0gJ1NZTkNST05JWkVEJyxcbiAgVU5TWU5DUk9OSVpFRCA9ICdVTlNZTkNST05JWkVEJyxcbn1cblxuZXhwb3J0IGNsYXNzIE1vZGVsUmVzb2x2ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBtb2RlbCAmIG1vZGVsIGNvbHVtblxuICAgIHRoaXMubGlzdE1vZGVscyA9IHRoaXMubGlzdE1vZGVscy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0TW9kZWwgPSB0aGlzLmdldE1vZGVsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jcmVhdGVNb2RlbCA9IHRoaXMuY3JlYXRlTW9kZWwuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZU1vZGVsID0gdGhpcy51cGRhdGVNb2RlbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlTW9kZWwgPSB0aGlzLmRlbGV0ZU1vZGVsLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVNb2RlbE1ldGFkYXRhID0gdGhpcy51cGRhdGVNb2RlbE1ldGFkYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZXBsb3kgPSB0aGlzLmRlcGxveS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0TURMID0gdGhpcy5nZXRNREwuYmluZCh0aGlzKTtcbiAgICB0aGlzLmNoZWNrTW9kZWxTeW5jID0gdGhpcy5jaGVja01vZGVsU3luYy5iaW5kKHRoaXMpO1xuXG4gICAgLy8gdmlld1xuICAgIHRoaXMubGlzdFZpZXdzID0gdGhpcy5saXN0Vmlld3MuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldFZpZXcgPSB0aGlzLmdldFZpZXcuYmluZCh0aGlzKTtcbiAgICB0aGlzLnZhbGlkYXRlVmlldyA9IHRoaXMudmFsaWRhdGVWaWV3LmJpbmQodGhpcyk7XG4gICAgdGhpcy5jcmVhdGVWaWV3ID0gdGhpcy5jcmVhdGVWaWV3LmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZWxldGVWaWV3ID0gdGhpcy5kZWxldGVWaWV3LmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVWaWV3TWV0YWRhdGEgPSB0aGlzLnVwZGF0ZVZpZXdNZXRhZGF0YS5iaW5kKHRoaXMpO1xuXG4gICAgLy8gcHJldmlld1xuICAgIHRoaXMucHJldmlld01vZGVsRGF0YSA9IHRoaXMucHJldmlld01vZGVsRGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucHJldmlld1ZpZXdEYXRhID0gdGhpcy5wcmV2aWV3Vmlld0RhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnByZXZpZXdTcWwgPSB0aGlzLnByZXZpZXdTcWwuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldE5hdGl2ZVNxbCA9IHRoaXMuZ2V0TmF0aXZlU3FsLmJpbmQodGhpcyk7XG5cbiAgICAvLyBjYWxjdWxhdGVkIGZpZWxkXG4gICAgdGhpcy5jcmVhdGVDYWxjdWxhdGVkRmllbGQgPSB0aGlzLmNyZWF0ZUNhbGN1bGF0ZWRGaWVsZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudmFsaWRhdGVDYWxjdWxhdGVkRmllbGQgPSB0aGlzLnZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVDYWxjdWxhdGVkRmllbGQgPSB0aGlzLnVwZGF0ZUNhbGN1bGF0ZWRGaWVsZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlQ2FsY3VsYXRlZEZpZWxkID0gdGhpcy5kZWxldGVDYWxjdWxhdGVkRmllbGQuYmluZCh0aGlzKTtcblxuICAgIC8vIHJlbGF0aW9uXG4gICAgdGhpcy5jcmVhdGVSZWxhdGlvbiA9IHRoaXMuY3JlYXRlUmVsYXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZVJlbGF0aW9uID0gdGhpcy51cGRhdGVSZWxhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVsZXRlUmVsYXRpb24gPSB0aGlzLmRlbGV0ZVJlbGF0aW9uLmJpbmQodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlUmVsYXRpb24oXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmdzOiB7IGRhdGE6IFJlbGF0aW9uRGF0YSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXJncztcblxuICAgIGNvbnN0IGV2ZW50TmFtZSA9IFRlbGVtZXRyeUV2ZW50Lk1PREVMSU5HX0NSRUFURV9SRUxBVElPTjtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVsYXRpb24gPSBhd2FpdCBjdHgubW9kZWxTZXJ2aWNlLmNyZWF0ZVJlbGF0aW9uKGRhdGEpO1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7IGRhdGEgfSk7XG4gICAgICByZXR1cm4gcmVsYXRpb247XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHsgZGF0YTogZGF0YSwgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHVwZGF0ZVJlbGF0aW9uKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogeyBkYXRhOiBVcGRhdGVSZWxhdGlvbkRhdGE7IHdoZXJlOiB7IGlkOiBudW1iZXIgfSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IHsgZGF0YSwgd2hlcmUgfSA9IGFyZ3M7XG4gICAgY29uc3QgZXZlbnROYW1lID0gVGVsZW1ldHJ5RXZlbnQuTU9ERUxJTkdfVVBEQVRFX1JFTEFUSU9OO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWxhdGlvbiA9IGF3YWl0IGN0eC5tb2RlbFNlcnZpY2UudXBkYXRlUmVsYXRpb24oZGF0YSwgd2hlcmUuaWQpO1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7IGRhdGEgfSk7XG4gICAgICByZXR1cm4gcmVsYXRpb247XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHsgZGF0YTogZGF0YSwgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlbGV0ZVJlbGF0aW9uKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogeyB3aGVyZTogeyBpZDogbnVtYmVyIH0gfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApIHtcbiAgICBjb25zdCByZWxhdGlvbklkID0gYXJncy53aGVyZS5pZDtcbiAgICBhd2FpdCBjdHgubW9kZWxTZXJ2aWNlLmRlbGV0ZVJlbGF0aW9uKHJlbGF0aW9uSWQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNyZWF0ZUNhbGN1bGF0ZWRGaWVsZChcbiAgICBfcm9vdDogYW55LFxuICAgIF9hcmdzOiB7IGRhdGE6IENyZWF0ZUNhbGN1bGF0ZWRGaWVsZERhdGEgfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApIHtcbiAgICBjb25zdCBldmVudE5hbWUgPSBUZWxlbWV0cnlFdmVudC5NT0RFTElOR19DUkVBVEVfQ0Y7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbHVtbiA9IGF3YWl0IGN0eC5tb2RlbFNlcnZpY2UuY3JlYXRlQ2FsY3VsYXRlZEZpZWxkKF9hcmdzLmRhdGEpO1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7IGRhdGE6IF9hcmdzLmRhdGEgfSk7XG4gICAgICByZXR1cm4gY29sdW1uO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICB7IGRhdGE6IF9hcmdzLmRhdGEsIGVycm9yOiBlcnIubWVzc2FnZSB9LFxuICAgICAgICBlcnIuZXh0ZW5zaW9ucz8uc2VydmljZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZUNhbGN1bGF0ZWRGaWVsZChfcm9vdDogYW55LCBhcmdzOiBhbnksIGN0eDogSUNvbnRleHQpIHtcbiAgICBjb25zdCB7IG5hbWUsIG1vZGVsSWQsIGNvbHVtbklkIH0gPSBhcmdzLmRhdGE7XG4gICAgcmV0dXJuIGF3YWl0IGN0eC5tb2RlbFNlcnZpY2UudmFsaWRhdGVDYWxjdWxhdGVkRmllbGROYW1pbmcoXG4gICAgICBuYW1lLFxuICAgICAgbW9kZWxJZCxcbiAgICAgIGNvbHVtbklkLFxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBkYXRlQ2FsY3VsYXRlZEZpZWxkKFxuICAgIF9yb290OiBhbnksXG4gICAgX2FyZ3M6IHsgZGF0YTogVXBkYXRlQ2FsY3VsYXRlZEZpZWxkRGF0YTsgd2hlcmU6IHsgaWQ6IG51bWJlciB9IH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKSB7XG4gICAgY29uc3QgeyBkYXRhLCB3aGVyZSB9ID0gX2FyZ3M7XG5cbiAgICBjb25zdCBldmVudE5hbWUgPSBUZWxlbWV0cnlFdmVudC5NT0RFTElOR19VUERBVEVfQ0Y7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbHVtbiA9IGF3YWl0IGN0eC5tb2RlbFNlcnZpY2UudXBkYXRlQ2FsY3VsYXRlZEZpZWxkKFxuICAgICAgICBkYXRhLFxuICAgICAgICB3aGVyZS5pZCxcbiAgICAgICk7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChldmVudE5hbWUsIHsgZGF0YSB9KTtcbiAgICAgIHJldHVybiBjb2x1bW47XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHsgZGF0YTogZGF0YSwgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlbGV0ZUNhbGN1bGF0ZWRGaWVsZChfcm9vdDogYW55LCBhcmdzOiBhbnksIGN0eDogSUNvbnRleHQpIHtcbiAgICBjb25zdCBjb2x1bW5JZCA9IGFyZ3Mud2hlcmUuaWQ7XG4gICAgLy8gY2hlY2sgY29sdW1uIGV4aXN0IGFuZCBpcyBjYWxjdWxhdGVkIGZpZWxkXG4gICAgY29uc3QgY29sdW1uID0gYXdhaXQgY3R4Lm1vZGVsQ29sdW1uUmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogY29sdW1uSWQgfSk7XG4gICAgaWYgKCFjb2x1bW4gfHwgIWNvbHVtbi5pc0NhbGN1bGF0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2FsY3VsYXRlZCBmaWVsZCBub3QgZm91bmQnKTtcbiAgICB9XG4gICAgYXdhaXQgY3R4Lm1vZGVsQ29sdW1uUmVwb3NpdG9yeS5kZWxldGVPbmUoY29sdW1uSWQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNoZWNrTW9kZWxTeW5jKF9yb290OiBhbnksIF9hcmdzOiBhbnksIGN0eDogSUNvbnRleHQpIHtcbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCB7IG1hbmlmZXN0IH0gPSBhd2FpdCBjdHgubWRsU2VydmljZS5tYWtlQ3VycmVudE1vZGVsTURMKCk7XG4gICAgY29uc3QgY3VycmVudEhhc2ggPSBjdHguZGVwbG95U2VydmljZS5jcmVhdGVNRExIYXNoKG1hbmlmZXN0LCBpZCk7XG4gICAgY29uc3QgbGFzdERlcGxveSA9IGF3YWl0IGN0eC5kZXBsb3lTZXJ2aWNlLmdldExhc3REZXBsb3ltZW50KGlkKTtcbiAgICBjb25zdCBsYXN0RGVwbG95SGFzaCA9IGxhc3REZXBsb3k/Lmhhc2g7XG4gICAgY29uc3QgaW5Qcm9ncmVzc0RlcGxveW1lbnQgPVxuICAgICAgYXdhaXQgY3R4LmRlcGxveVNlcnZpY2UuZ2V0SW5Qcm9ncmVzc0RlcGxveW1lbnQoaWQpO1xuICAgIGlmIChpblByb2dyZXNzRGVwbG95bWVudCkge1xuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBTeW5jU3RhdHVzRW51bS5JTl9QUk9HUkVTUyB9O1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudEhhc2ggPT0gbGFzdERlcGxveUhhc2hcbiAgICAgID8geyBzdGF0dXM6IFN5bmNTdGF0dXNFbnVtLlNZTkNST05JWkVEIH1cbiAgICAgIDogeyBzdGF0dXM6IFN5bmNTdGF0dXNFbnVtLlVOU1lOQ1JPTklaRUQgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZXBsb3koXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmdzOiB7IGZvcmNlOiBib29sZWFuIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxEZXBsb3lSZXNwb25zZT4ge1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCB7IG1hbmlmZXN0IH0gPSBhd2FpdCBjdHgubWRsU2VydmljZS5tYWtlQ3VycmVudE1vZGVsTURMKCk7XG4gICAgY29uc3QgZGVwbG95UmVzID0gYXdhaXQgY3R4LmRlcGxveVNlcnZpY2UuZGVwbG95KFxuICAgICAgbWFuaWZlc3QsXG4gICAgICBwcm9qZWN0LmlkLFxuICAgICAgYXJncy5mb3JjZSxcbiAgICApO1xuXG4gICAgLy8gb25seSBnZW5lcmF0aW5nIGZvciB1c2VyJ3MgZGF0YSBzb3VyY2VcbiAgICBpZiAocHJvamVjdC5zYW1wbGVEYXRhc2V0ID09PSBudWxsKSB7XG4gICAgICBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2VuZXJhdGVQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnMoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlcGxveVJlcztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRNREwoX3Jvb3Q6IGFueSwgYXJnczogeyBoYXNoOiBzdHJpbmcgfSwgY3R4OiBJQ29udGV4dCkge1xuICAgIGNvbnN0IG1kbCA9IGF3YWl0IGN0eC5kZXBsb3lTZXJ2aWNlLmdldE1ETEJ5SGFzaChhcmdzLmhhc2gpO1xuICAgIHJldHVybiB7XG4gICAgICBoYXNoOiBhcmdzLmhhc2gsXG4gICAgICBtZGwsXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBsaXN0TW9kZWxzKF9yb290OiBhbnksIF9hcmdzOiBhbnksIGN0eDogSUNvbnRleHQpIHtcbiAgICBjb25zdCB7IGlkOiBwcm9qZWN0SWQgfSA9IGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IGN0eC5tb2RlbFJlcG9zaXRvcnkuZmluZEFsbEJ5KHsgcHJvamVjdElkIH0pO1xuICAgIGNvbnN0IG1vZGVsSWRzID0gbW9kZWxzLm1hcCgobSkgPT4gbS5pZCk7XG4gICAgY29uc3QgbW9kZWxDb2x1bW5MaXN0ID1cbiAgICAgIGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeU1vZGVsSWRzKG1vZGVsSWRzKTtcbiAgICBjb25zdCBtb2RlbE5lc3RlZENvbHVtbkxpc3QgPVxuICAgICAgYXdhaXQgY3R4Lm1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeS5maW5kTmVzdGVkQ29sdW1uc0J5TW9kZWxJZHMoXG4gICAgICAgIG1vZGVsSWRzLFxuICAgICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIG1vZGVscykge1xuICAgICAgY29uc3QgbW9kZWxGaWVsZHMgPSBtb2RlbENvbHVtbkxpc3RcbiAgICAgICAgLmZpbHRlcigoYykgPT4gYy5tb2RlbElkID09PSBtb2RlbC5pZClcbiAgICAgICAgLm1hcCgoYykgPT4gKHtcbiAgICAgICAgICAuLi5jLFxuICAgICAgICAgIHByb3BlcnRpZXM6IEpTT04ucGFyc2UoYy5wcm9wZXJ0aWVzKSxcbiAgICAgICAgICBuZXN0ZWRDb2x1bW5zOiBjLnR5cGUuaW5jbHVkZXMoJ1NUUlVDVCcpXG4gICAgICAgICAgICA/IG1vZGVsTmVzdGVkQ29sdW1uTGlzdC5maWx0ZXIoKG5jKSA9PiBuYy5jb2x1bW5JZCA9PT0gYy5pZClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9KSk7XG4gICAgICBjb25zdCBmaWVsZHMgPSBtb2RlbEZpZWxkcy5maWx0ZXIoKGMpID0+ICFjLmlzQ2FsY3VsYXRlZCk7XG4gICAgICBjb25zdCBjYWxjdWxhdGVkRmllbGRzID0gbW9kZWxGaWVsZHMuZmlsdGVyKChjKSA9PiBjLmlzQ2FsY3VsYXRlZCk7XG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIC4uLm1vZGVsLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIGNhbGN1bGF0ZWRGaWVsZHMsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAuLi5KU09OLnBhcnNlKG1vZGVsLnByb3BlcnRpZXMpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0TW9kZWwoX3Jvb3Q6IGFueSwgYXJnczogYW55LCBjdHg6IElDb250ZXh0KSB7XG4gICAgY29uc3QgbW9kZWxJZCA9IGFyZ3Mud2hlcmUuaWQ7XG4gICAgY29uc3QgbW9kZWwgPSBhd2FpdCBjdHgubW9kZWxSZXBvc2l0b3J5LmZpbmRPbmVCeSh7IGlkOiBtb2RlbElkIH0pO1xuICAgIGlmICghbW9kZWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTW9kZWwgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWxDb2x1bW5zID0gYXdhaXQgY3R4Lm1vZGVsQ29sdW1uUmVwb3NpdG9yeS5maW5kQ29sdW1uc0J5TW9kZWxJZHMoW1xuICAgICAgbW9kZWwuaWQsXG4gICAgXSk7XG4gICAgY29uc3QgbW9kZWxOZXN0ZWRDb2x1bW5zID0gYXdhaXQgY3R4Lm1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeS5maW5kQWxsQnkoe1xuICAgICAgbW9kZWxJZDogbW9kZWwuaWQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb2x1bW5zID0gbW9kZWxDb2x1bW5zLm1hcCgoYykgPT4gKHtcbiAgICAgIC4uLmMsXG4gICAgICBwcm9wZXJ0aWVzOiBKU09OLnBhcnNlKGMucHJvcGVydGllcyksXG4gICAgICBuZXN0ZWRDb2x1bW5zOiBjLnR5cGUuaW5jbHVkZXMoJ1NUUlVDVCcpXG4gICAgICAgID8gbW9kZWxOZXN0ZWRDb2x1bW5zLmZpbHRlcigobmMpID0+IG5jLmNvbHVtbklkID09PSBjLmlkKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICB9KSk7XG4gICAgY29uc3QgcmVsYXRpb25zID0gKFxuICAgICAgYXdhaXQgY3R4LnJlbGF0aW9uUmVwb3NpdG9yeS5maW5kUmVsYXRpb25zQnkoe1xuICAgICAgICBjb2x1bW5JZHM6IG1vZGVsQ29sdW1ucy5tYXAoKGMpID0+IGMuaWQpLFxuICAgICAgfSlcbiAgICApLm1hcCgocikgPT4gKHtcbiAgICAgIC4uLnIsXG4gICAgICB0eXBlOiByLmpvaW5UeXBlLFxuICAgICAgcHJvcGVydGllczogci5wcm9wZXJ0aWVzID8gSlNPTi5wYXJzZShyLnByb3BlcnRpZXMpIDoge30sXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm1vZGVsLFxuICAgICAgZmllbGRzOiBjb2x1bW5zLmZpbHRlcigoYykgPT4gIWMuaXNDYWxjdWxhdGVkKSxcbiAgICAgIGNhbGN1bGF0ZWRGaWVsZHM6IGNvbHVtbnMuZmlsdGVyKChjKSA9PiBjLmlzQ2FsY3VsYXRlZCksXG4gICAgICByZWxhdGlvbnMsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIC4uLkpTT04ucGFyc2UobW9kZWwucHJvcGVydGllcyksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlTW9kZWwoXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmdzOiB7IGRhdGE6IENyZWF0ZU1vZGVsRGF0YSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IHsgc291cmNlVGFibGVOYW1lLCBmaWVsZHMsIHByaW1hcnlLZXkgfSA9IGFyZ3MuZGF0YTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbW9kZWwgPSBhd2FpdCB0aGlzLmhhbmRsZUNyZWF0ZU1vZGVsKFxuICAgICAgICBjdHgsXG4gICAgICAgIHNvdXJjZVRhYmxlTmFtZSxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBwcmltYXJ5S2V5LFxuICAgICAgKTtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFRlbGVtZXRyeUV2ZW50Lk1PREVMSU5HX0NSRUFURV9NT0RFTCwge1xuICAgICAgICBkYXRhOiBhcmdzLmRhdGEsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgVGVsZW1ldHJ5RXZlbnQuTU9ERUxJTkdfQ1JFQVRFX01PREVMLFxuICAgICAgICB7IGRhdGE6IGFyZ3MuZGF0YSwgZXJyb3IgfSxcbiAgICAgICAgZXJyb3IuZXh0ZW5zaW9ucz8uc2VydmljZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDcmVhdGVNb2RlbChcbiAgICBjdHg6IElDb250ZXh0LFxuICAgIHNvdXJjZVRhYmxlTmFtZTogc3RyaW5nLFxuICAgIGZpZWxkczogW3N0cmluZ10sXG4gICAgcHJpbWFyeUtleTogc3RyaW5nLFxuICApIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgZGF0YVNvdXJjZVRhYmxlcyA9XG4gICAgICBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0UHJvamVjdERhdGFTb3VyY2VUYWJsZXMocHJvamVjdCk7XG4gICAgdGhpcy52YWxpZGF0ZVRhYmxlRXhpc3Qoc291cmNlVGFibGVOYW1lLCBkYXRhU291cmNlVGFibGVzKTtcbiAgICB0aGlzLnZhbGlkYXRlQ29sdW1uc0V4aXN0KHNvdXJjZVRhYmxlTmFtZSwgZmllbGRzLCBkYXRhU291cmNlVGFibGVzKTtcblxuICAgIC8vIGNyZWF0ZSBtb2RlbFxuICAgIGNvbnN0IGRhdGFTb3VyY2VUYWJsZSA9IGRhdGFTb3VyY2VUYWJsZXMuZmluZChcbiAgICAgICh0YWJsZSkgPT4gdGFibGUubmFtZSA9PT0gc291cmNlVGFibGVOYW1lLFxuICAgICk7XG4gICAgaWYgKCFkYXRhU291cmNlVGFibGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGFibGUgbm90IGZvdW5kIGluIHRoZSBkYXRhIHNvdXJjZScpO1xuICAgIH1cbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gZGF0YVNvdXJjZVRhYmxlPy5wcm9wZXJ0aWVzO1xuICAgIGNvbnN0IG1vZGVsVmFsdWUgPSB7XG4gICAgICBwcm9qZWN0SWQ6IHByb2plY3QuaWQsXG4gICAgICBkaXNwbGF5TmFtZTogc291cmNlVGFibGVOYW1lLCAvL3VzZSB0YWJsZSBuYW1lIGFzIGRpc3BsYXlOYW1lLCByZWZlcmVuY2VOYW1lIGFuZCB0YWJsZU5hbWVcbiAgICAgIHJlZmVyZW5jZU5hbWU6IHJlcGxhY2VJbnZhbGlkUmVmZXJlbmNlTmFtZShzb3VyY2VUYWJsZU5hbWUpLFxuICAgICAgc291cmNlVGFibGVOYW1lOiBzb3VyY2VUYWJsZU5hbWUsXG4gICAgICBjYWNoZWQ6IGZhbHNlLFxuICAgICAgcmVmcmVzaFRpbWU6IG51bGwsXG4gICAgICBwcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzID8gSlNPTi5zdHJpbmdpZnkocHJvcGVydGllcykgOiBudWxsLFxuICAgIH0gYXMgUGFydGlhbDxNb2RlbD47XG4gICAgY29uc3QgbW9kZWwgPSBhd2FpdCBjdHgubW9kZWxSZXBvc2l0b3J5LmNyZWF0ZU9uZShtb2RlbFZhbHVlKTtcblxuICAgIC8vIGNyZWF0ZSBjb2x1bW5zXG4gICAgY29uc3QgY29tcGFjdENvbHVtbnMgPSBkYXRhU291cmNlVGFibGUuY29sdW1ucy5maWx0ZXIoKGMpID0+XG4gICAgICBmaWVsZHMuaW5jbHVkZXMoYy5uYW1lKSxcbiAgICApO1xuICAgIGNvbnN0IGNvbHVtblZhbHVlcyA9IGNvbXBhY3RDb2x1bW5zLm1hcChcbiAgICAgIChjb2x1bW4pID0+XG4gICAgICAgICh7XG4gICAgICAgICAgbW9kZWxJZDogbW9kZWwuaWQsXG4gICAgICAgICAgaXNDYWxjdWxhdGVkOiBmYWxzZSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogY29sdW1uLm5hbWUsXG4gICAgICAgICAgcmVmZXJlbmNlTmFtZTogdHJhbnNmb3JtSW52YWxpZENvbHVtbk5hbWUoY29sdW1uLm5hbWUpLFxuICAgICAgICAgIHNvdXJjZUNvbHVtbk5hbWU6IGNvbHVtbi5uYW1lLFxuICAgICAgICAgIHR5cGU6IGNvbHVtbi50eXBlIHx8ICdzdHJpbmcnLFxuICAgICAgICAgIG5vdE51bGw6IGNvbHVtbi5ub3ROdWxsIHx8IGZhbHNlLFxuICAgICAgICAgIGlzUGs6IHByaW1hcnlLZXkgPT09IGNvbHVtbi5uYW1lLFxuICAgICAgICAgIHByb3BlcnRpZXM6IGNvbHVtbi5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGNvbHVtbi5wcm9wZXJ0aWVzKVxuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB9KSBhcyBQYXJ0aWFsPE1vZGVsQ29sdW1uPixcbiAgICApO1xuICAgIGNvbnN0IGNvbHVtbnMgPSBhd2FpdCBjdHgubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmNyZWF0ZU1hbnkoY29sdW1uVmFsdWVzKTtcblxuICAgIC8vIGNyZWF0ZSBuZXN0ZWQgY29sdW1uc1xuICAgIGNvbnN0IG5lc3RlZENvbHVtblZhbHVlcyA9IGNvbXBhY3RDb2x1bW5zLmZsYXRNYXAoKGNvbXBhY3RDb2x1bW4pID0+IHtcbiAgICAgIGNvbnN0IGNvbHVtbiA9IGNvbHVtbnMuZmluZChcbiAgICAgICAgKGMpID0+IGMuc291cmNlQ29sdW1uTmFtZSA9PT0gY29tcGFjdENvbHVtbi5uYW1lLFxuICAgICAgKTtcbiAgICAgIGlmICghY29sdW1uKSByZXR1cm4gW107XG4gICAgICByZXR1cm4gaGFuZGxlTmVzdGVkQ29sdW1ucyhjb21wYWN0Q29sdW1uLCB7XG4gICAgICAgIG1vZGVsSWQ6IGNvbHVtbi5tb2RlbElkLFxuICAgICAgICBjb2x1bW5JZDogY29sdW1uLmlkLFxuICAgICAgICBzb3VyY2VDb2x1bW5OYW1lOiBjb2x1bW4uc291cmNlQ29sdW1uTmFtZSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGF3YWl0IGN0eC5tb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnkuY3JlYXRlTWFueShuZXN0ZWRDb2x1bW5WYWx1ZXMpO1xuICAgIGxvZ2dlci5pbmZvKGBNb2RlbCBjcmVhdGVkOiAke0pTT04uc3RyaW5naWZ5KG1vZGVsKX1gKTtcblxuICAgIHJldHVybiBtb2RlbDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVNb2RlbChcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgZGF0YTogVXBkYXRlTW9kZWxEYXRhOyB3aGVyZTogeyBpZDogbnVtYmVyIH0gfSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApIHtcbiAgICBjb25zdCB7IGZpZWxkcywgcHJpbWFyeUtleSB9ID0gYXJncy5kYXRhO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtb2RlbCA9IGF3YWl0IHRoaXMuaGFuZGxlVXBkYXRlTW9kZWwoY3R4LCBhcmdzLCBmaWVsZHMsIHByaW1hcnlLZXkpO1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoVGVsZW1ldHJ5RXZlbnQuTU9ERUxJTkdfVVBEQVRFX01PREVMLCB7XG4gICAgICAgIGRhdGE6IGFyZ3MuZGF0YSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgVGVsZW1ldHJ5RXZlbnQuTU9ERUxJTkdfVVBEQVRFX01PREVMLFxuICAgICAgICB7IGRhdGE6IGFyZ3MuZGF0YSwgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVVcGRhdGVNb2RlbChcbiAgICBjdHg6IElDb250ZXh0LFxuICAgIGFyZ3M6IHsgZGF0YTogVXBkYXRlTW9kZWxEYXRhOyB3aGVyZTogeyBpZDogbnVtYmVyIH0gfSxcbiAgICBmaWVsZHM6IFtzdHJpbmddLFxuICAgIHByaW1hcnlLZXk6IHN0cmluZyxcbiAgKSB7XG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IGRhdGFTb3VyY2VUYWJsZXMgPVxuICAgICAgYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldFByb2plY3REYXRhU291cmNlVGFibGVzKHByb2plY3QpO1xuICAgIGNvbnN0IG1vZGVsID0gYXdhaXQgY3R4Lm1vZGVsUmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogYXJncy53aGVyZS5pZCB9KTtcbiAgICBjb25zdCBleGlzdGluZ0NvbHVtbnMgPSBhd2FpdCBjdHgubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmZpbmRBbGxCeSh7XG4gICAgICBtb2RlbElkOiBtb2RlbC5pZCxcbiAgICAgIGlzQ2FsY3VsYXRlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgY29uc3QgeyBzb3VyY2VUYWJsZU5hbWUgfSA9IG1vZGVsO1xuICAgIHRoaXMudmFsaWRhdGVUYWJsZUV4aXN0KHNvdXJjZVRhYmxlTmFtZSwgZGF0YVNvdXJjZVRhYmxlcyk7XG4gICAgdGhpcy52YWxpZGF0ZUNvbHVtbnNFeGlzdChzb3VyY2VUYWJsZU5hbWUsIGZpZWxkcywgZGF0YVNvdXJjZVRhYmxlcyk7XG5cbiAgICBjb25zdCBzb3VyY2VUYWJsZUNvbHVtbnMgPSBkYXRhU291cmNlVGFibGVzLmZpbmQoXG4gICAgICAodGFibGUpID0+IHRhYmxlLm5hbWUgPT09IHNvdXJjZVRhYmxlTmFtZSxcbiAgICApPy5jb2x1bW5zO1xuICAgIGNvbnN0IHsgdG9EZWxldGVDb2x1bW5JZHMsIHRvQ3JlYXRlQ29sdW1ucywgdG9VcGRhdGVDb2x1bW5zIH0gPVxuICAgICAgZmluZENvbHVtbnNUb1VwZGF0ZShmaWVsZHMsIGV4aXN0aW5nQ29sdW1ucywgc291cmNlVGFibGVDb2x1bW5zKTtcbiAgICBhd2FpdCB1cGRhdGVNb2RlbFByaW1hcnlLZXkoXG4gICAgICBjdHgubW9kZWxDb2x1bW5SZXBvc2l0b3J5LFxuICAgICAgbW9kZWwuaWQsXG4gICAgICBwcmltYXJ5S2V5LFxuICAgICk7XG5cbiAgICAvLyBkZWxldGUgY29sdW1uc1xuICAgIGlmICh0b0RlbGV0ZUNvbHVtbklkcy5sZW5ndGgpIHtcbiAgICAgIGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZGVsZXRlTWFueSh0b0RlbGV0ZUNvbHVtbklkcyk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIGNvbHVtbnNcbiAgICBpZiAodG9DcmVhdGVDb2x1bW5zLmxlbmd0aCkge1xuICAgICAgY29uc3QgY29tcGFjdENvbHVtbnMgPSBzb3VyY2VUYWJsZUNvbHVtbnMuZmlsdGVyKChzb3VyY2VDb2x1bW4pID0+XG4gICAgICAgIHRvQ3JlYXRlQ29sdW1ucy5pbmNsdWRlcyhzb3VyY2VDb2x1bW4ubmFtZSksXG4gICAgICApO1xuICAgICAgY29uc3QgY29sdW1uVmFsdWVzID0gY29tcGFjdENvbHVtbnMubWFwKChjb2x1bW4pID0+IHtcbiAgICAgICAgY29uc3QgY29sdW1uVmFsdWUgPSB7XG4gICAgICAgICAgbW9kZWxJZDogbW9kZWwuaWQsXG4gICAgICAgICAgaXNDYWxjdWxhdGVkOiBmYWxzZSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogY29sdW1uLm5hbWUsXG4gICAgICAgICAgc291cmNlQ29sdW1uTmFtZTogY29sdW1uLm5hbWUsXG4gICAgICAgICAgcmVmZXJlbmNlTmFtZTogdHJhbnNmb3JtSW52YWxpZENvbHVtbk5hbWUoY29sdW1uLm5hbWUpLFxuICAgICAgICAgIHR5cGU6IGNvbHVtbi50eXBlIHx8ICdzdHJpbmcnLFxuICAgICAgICAgIG5vdE51bGw6IGNvbHVtbi5ub3ROdWxsLFxuICAgICAgICAgIGlzUGs6IHByaW1hcnlLZXkgPT09IGNvbHVtbi5uYW1lLFxuICAgICAgICAgIHByb3BlcnRpZXM6IGNvbHVtbi5wcm9wZXJ0aWVzXG4gICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGNvbHVtbi5wcm9wZXJ0aWVzKVxuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB9IGFzIFBhcnRpYWw8TW9kZWxDb2x1bW4+O1xuICAgICAgICByZXR1cm4gY29sdW1uVmFsdWU7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGNvbHVtbnMgPSBhd2FpdCBjdHgubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmNyZWF0ZU1hbnkoY29sdW1uVmFsdWVzKTtcblxuICAgICAgLy8gY3JlYXRlIG5lc3RlZCBjb2x1bW5zXG4gICAgICBjb25zdCBuZXN0ZWRDb2x1bW5WYWx1ZXMgPSBjb21wYWN0Q29sdW1ucy5mbGF0TWFwKChjb21wYWN0Q29sdW1uKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbHVtbiA9IGNvbHVtbnMuZmluZChcbiAgICAgICAgICAoYykgPT4gYy5zb3VyY2VDb2x1bW5OYW1lID09PSBjb21wYWN0Q29sdW1uLm5hbWUsXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBoYW5kbGVOZXN0ZWRDb2x1bW5zKGNvbXBhY3RDb2x1bW4sIHtcbiAgICAgICAgICBtb2RlbElkOiBjb2x1bW4ubW9kZWxJZCxcbiAgICAgICAgICBjb2x1bW5JZDogY29sdW1uLmlkLFxuICAgICAgICAgIHNvdXJjZUNvbHVtbk5hbWU6IGNvbHVtbi5zb3VyY2VDb2x1bW5OYW1lLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgY3R4Lm1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeS5jcmVhdGVNYW55KG5lc3RlZENvbHVtblZhbHVlcyk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGNvbHVtbnNcbiAgICBpZiAodG9VcGRhdGVDb2x1bW5zLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB7IGlkLCBzb3VyY2VDb2x1bW5OYW1lLCB0eXBlIH0gb2YgdG9VcGRhdGVDb2x1bW5zKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbiA9IGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkudXBkYXRlT25lKGlkLCB7IHR5cGUgfSk7XG5cbiAgICAgICAgLy8gaWYgdGhlIHN0cnVjdCB0eXBlIGlzIGNoYW5nZWQsIG5lZWQgdG8gcmUtY3JlYXRlIG5lc3RlZCBjb2x1bW5zXG4gICAgICAgIGlmICh0eXBlLmluY2x1ZGVzKCdTVFJVQ1QnKSkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZUNvbHVtbiA9IHNvdXJjZVRhYmxlQ29sdW1ucy5maW5kKFxuICAgICAgICAgICAgKHNvdXJjZUNvbHVtbikgPT4gc291cmNlQ29sdW1uLm5hbWUgPT09IHNvdXJjZUNvbHVtbk5hbWUsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBhd2FpdCBjdHgubW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5LmRlbGV0ZUFsbEJ5KHtcbiAgICAgICAgICAgIGNvbHVtbklkOiBjb2x1bW4uaWQsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYXdhaXQgY3R4Lm1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeS5jcmVhdGVNYW55KFxuICAgICAgICAgICAgaGFuZGxlTmVzdGVkQ29sdW1ucyhzb3VyY2VDb2x1bW4sIHtcbiAgICAgICAgICAgICAgbW9kZWxJZDogY29sdW1uLm1vZGVsSWQsXG4gICAgICAgICAgICAgIGNvbHVtbklkOiBjb2x1bW4uaWQsXG4gICAgICAgICAgICAgIHNvdXJjZUNvbHVtbk5hbWU6IHNvdXJjZUNvbHVtbk5hbWUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbG9nZ2VyLmluZm8oYE1vZGVsIHVwZGF0ZWQ6ICR7SlNPTi5zdHJpbmdpZnkobW9kZWwpfWApO1xuICAgIHJldHVybiBtb2RlbDtcbiAgfVxuXG4gIC8vIGRlbGV0ZSBtb2RlbFxuICBwdWJsaWMgYXN5bmMgZGVsZXRlTW9kZWwoX3Jvb3Q6IGFueSwgYXJnczogYW55LCBjdHg6IElDb250ZXh0KSB7XG4gICAgY29uc3QgbW9kZWxJZCA9IGFyZ3Mud2hlcmUuaWQ7XG4gICAgY29uc3QgbW9kZWwgPSBhd2FpdCBjdHgubW9kZWxSZXBvc2l0b3J5LmZpbmRPbmVCeSh7IGlkOiBtb2RlbElkIH0pO1xuICAgIGlmICghbW9kZWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTW9kZWwgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgLy8gcmVsYXRlZCBjb2x1bW5zIGFuZCByZWxhdGlvbnNoaXBzIHdpbGwgYmUgZGVsZXRlZCBpbiBjYXNjYWRlXG4gICAgYXdhaXQgY3R4Lm1vZGVsUmVwb3NpdG9yeS5kZWxldGVPbmUobW9kZWxJZCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyB1cGRhdGUgbW9kZWwgbWV0YWRhdGFcbiAgcHVibGljIGFzeW5jIHVwZGF0ZU1vZGVsTWV0YWRhdGEoXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmdzOiB7IHdoZXJlOiB7IGlkOiBudW1iZXIgfTsgZGF0YTogVXBkYXRlTW9kZWxNZXRhZGF0YUlucHV0IH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgbW9kZWxJZCA9IGFyZ3Mud2hlcmUuaWQ7XG4gICAgY29uc3QgZGF0YSA9IGFyZ3MuZGF0YTtcblxuICAgIC8vIGNoZWNrIGlmIG1vZGVsIGV4aXN0c1xuICAgIGNvbnN0IG1vZGVsID0gYXdhaXQgY3R4Lm1vZGVsUmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogbW9kZWxJZCB9KTtcbiAgICBpZiAoIW1vZGVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZGVsIG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICBjb25zdCBldmVudE5hbWUgPSBUZWxlbWV0cnlFdmVudC5NT0RFTElOR19VUERBVEVfTU9ERUxfTUVUQURBVEE7XG4gICAgdHJ5IHtcbiAgICAgIC8vIHVwZGF0ZSBtb2RlbCBtZXRhZGF0YVxuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVcGRhdGVNb2RlbE1ldGFkYXRhKGRhdGEsIG1vZGVsLCBjdHgsIG1vZGVsSWQpO1xuXG4gICAgICAvLyB0b2RvOiBjb25zaWRlcmluZyB1c2luZyB1cGRhdGUgLi4uIGZyb20gc3RhdGVtZW50IHRvIGRvIGEgYmF0Y2ggdXBkYXRlXG4gICAgICAvLyB1cGRhdGUgY29sdW1uIG1ldGFkYXRhXG4gICAgICBpZiAoIWlzRW1wdHkoZGF0YS5jb2x1bW5zKSkge1xuICAgICAgICAvLyBmaW5kIHRoZSBjb2x1bW5zIHRoYXQgbWF0Y2ggdGhlIHVzZXIgcmVxdWVzdGVkIGNvbHVtbnNcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVcGRhdGVDb2x1bW5NZXRhZGF0YShkYXRhLCBjdHgpO1xuICAgICAgfVxuXG4gICAgICAvLyB1cGRhdGUgbmVzdGVkIGNvbHVtbiBtZXRhZGF0YVxuICAgICAgaWYgKCFpc0VtcHR5KGRhdGEubmVzdGVkQ29sdW1ucykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVcGRhdGVOZXN0ZWRDb2x1bW5NZXRhZGF0YShkYXRhLCBjdHgpO1xuICAgICAgfVxuXG4gICAgICAvLyB1cGRhdGUgY2FsY3VsYXRlZCBmaWVsZCBtZXRhZGF0YVxuICAgICAgaWYgKCFpc0VtcHR5KGRhdGEuY2FsY3VsYXRlZEZpZWxkcykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVcGRhdGVDRk1ldGFkYXRhKGRhdGEsIGN0eCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHVwZGF0ZSByZWxhdGlvbnNoaXAgbWV0YWRhdGFcbiAgICAgIGlmICghaXNFbXB0eShkYXRhLnJlbGF0aW9uc2hpcHMpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVXBkYXRlUmVsYXRpb25zaGlwTWV0YWRhdGEoZGF0YSwgY3R4KTtcbiAgICAgIH1cblxuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7IGRhdGEgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgeyBkYXRhOiBkYXRhLCBlcnJvcjogZXJyLm1lc3NhZ2UgfSxcbiAgICAgICAgZXJyLmV4dGVuc2lvbnM/LnNlcnZpY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVVwZGF0ZU1vZGVsTWV0YWRhdGEoXG4gICAgZGF0YTogVXBkYXRlTW9kZWxNZXRhZGF0YUlucHV0LFxuICAgIG1vZGVsOiBNb2RlbCxcbiAgICBjdHg6IElDb250ZXh0LFxuICAgIG1vZGVsSWQ6IG51bWJlcixcbiAgKSB7XG4gICAgY29uc3QgbW9kZWxNZXRhZGF0YTogYW55ID0ge307XG5cbiAgICAvLyBpZiBkaXNwbGF5TmFtZSBpcyBub3QgbnVsbCwgb3IgdW5kZWZpbmVkLCB1cGRhdGUgdGhlIGRpc3BsYXlOYW1lXG4gICAgaWYgKCFpc05pbChkYXRhLmRpc3BsYXlOYW1lKSkge1xuICAgICAgbW9kZWxNZXRhZGF0YS5kaXNwbGF5TmFtZSA9IHRoaXMuZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZShkYXRhLmRpc3BsYXlOYW1lKTtcbiAgICB9XG5cbiAgICAvLyBpZiBkZXNjcmlwdGlvbiBpcyBub3QgbnVsbCwgb3IgdW5kZWZpbmVkLCB1cGRhdGUgdGhlIGRlc2NyaXB0aW9uIGluIHByb3BlcnRpZXNcbiAgICBpZiAoIWlzTmlsKGRhdGEuZGVzY3JpcHRpb24pKSB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gaXNOaWwobW9kZWwucHJvcGVydGllcylcbiAgICAgICAgPyB7fVxuICAgICAgICA6IEpTT04ucGFyc2UobW9kZWwucHJvcGVydGllcyk7XG5cbiAgICAgIHByb3BlcnRpZXMuZGVzY3JpcHRpb24gPSB0aGlzLmRldGVybWluZU1ldGFkYXRhVmFsdWUoZGF0YS5kZXNjcmlwdGlvbik7XG4gICAgICBtb2RlbE1ldGFkYXRhLnByb3BlcnRpZXMgPSBKU09OLnN0cmluZ2lmeShwcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzRW1wdHkobW9kZWxNZXRhZGF0YSkpIHtcbiAgICAgIGF3YWl0IGN0eC5tb2RlbFJlcG9zaXRvcnkudXBkYXRlT25lKG1vZGVsSWQsIG1vZGVsTWV0YWRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlVXBkYXRlUmVsYXRpb25zaGlwTWV0YWRhdGEoXG4gICAgZGF0YTogVXBkYXRlTW9kZWxNZXRhZGF0YUlucHV0LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IHJlbGF0aW9uc2hpcElkcyA9IGRhdGEucmVsYXRpb25zaGlwcy5tYXAoKHIpID0+IHIuaWQpO1xuICAgIGNvbnN0IHJlbGF0aW9uc2hpcHMgPVxuICAgICAgYXdhaXQgY3R4LnJlbGF0aW9uUmVwb3NpdG9yeS5maW5kUmVsYXRpb25zQnlJZHMocmVsYXRpb25zaGlwSWRzKTtcbiAgICBmb3IgKGNvbnN0IHJlbCBvZiByZWxhdGlvbnNoaXBzKSB7XG4gICAgICBjb25zdCByZXF1ZXN0ZWRNZXRhZGF0YSA9IGRhdGEucmVsYXRpb25zaGlwcy5maW5kKChyKSA9PiByLmlkID09PSByZWwuaWQpO1xuXG4gICAgICBjb25zdCByZWxhdGlvbk1ldGFkYXRhOiBhbnkgPSB7fTtcblxuICAgICAgaWYgKCFpc05pbChyZXF1ZXN0ZWRNZXRhZGF0YS5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHJlbC5wcm9wZXJ0aWVzID8gSlNPTi5wYXJzZShyZWwucHJvcGVydGllcykgOiB7fTtcbiAgICAgICAgcHJvcGVydGllcy5kZXNjcmlwdGlvbiA9IHRoaXMuZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZShcbiAgICAgICAgICByZXF1ZXN0ZWRNZXRhZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgKTtcbiAgICAgICAgcmVsYXRpb25NZXRhZGF0YS5wcm9wZXJ0aWVzID0gSlNPTi5zdHJpbmdpZnkocHJvcGVydGllcyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNFbXB0eShyZWxhdGlvbk1ldGFkYXRhKSkge1xuICAgICAgICBhd2FpdCBjdHgucmVsYXRpb25SZXBvc2l0b3J5LnVwZGF0ZU9uZShyZWwuaWQsIHJlbGF0aW9uTWV0YWRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlVXBkYXRlQ0ZNZXRhZGF0YShcbiAgICBkYXRhOiBVcGRhdGVNb2RlbE1ldGFkYXRhSW5wdXQsXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKSB7XG4gICAgY29uc3QgY2FsY3VsYXRlZEZpZWxkSWRzID0gZGF0YS5jYWxjdWxhdGVkRmllbGRzLm1hcCgoYykgPT4gYy5pZCk7XG4gICAgY29uc3QgbW9kZWxDb2x1bW5zID1cbiAgICAgIGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeUlkcyhjYWxjdWxhdGVkRmllbGRJZHMpO1xuICAgIGZvciAoY29uc3QgY29sIG9mIG1vZGVsQ29sdW1ucykge1xuICAgICAgY29uc3QgcmVxdWVzdGVkTWV0YWRhdGEgPSBkYXRhLmNhbGN1bGF0ZWRGaWVsZHMuZmluZChcbiAgICAgICAgKGMpID0+IGMuaWQgPT09IGNvbC5pZCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNvbHVtbk1ldGFkYXRhOiBhbnkgPSB7fTtcbiAgICAgIC8vIGNoZWNrIGlmIGRlc2NyaXB0aW9uIGlzIGVtcHR5XG4gICAgICAvLyBpZiBkZXNjcmlwdGlvbiBpcyBlbXB0eSwgc2tpcCB0aGUgdXBkYXRlXG4gICAgICAvLyBpZiBkZXNjcmlwdGlvbiBpcyBub3QgZW1wdHksIHVwZGF0ZSB0aGUgZGVzY3JpcHRpb24gaW4gcHJvcGVydGllc1xuICAgICAgaWYgKCFpc05pbChyZXF1ZXN0ZWRNZXRhZGF0YS5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGNvbC5wcm9wZXJ0aWVzID8gSlNPTi5wYXJzZShjb2wucHJvcGVydGllcykgOiB7fTtcbiAgICAgICAgcHJvcGVydGllcy5kZXNjcmlwdGlvbiA9IHRoaXMuZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZShcbiAgICAgICAgICByZXF1ZXN0ZWRNZXRhZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgKTtcbiAgICAgICAgY29sdW1uTWV0YWRhdGEucHJvcGVydGllcyA9IEpTT04uc3RyaW5naWZ5KHByb3BlcnRpZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzRW1wdHkoY29sdW1uTWV0YWRhdGEpKSB7XG4gICAgICAgIGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkudXBkYXRlT25lKGNvbC5pZCwgY29sdW1uTWV0YWRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlVXBkYXRlQ29sdW1uTWV0YWRhdGEoXG4gICAgZGF0YTogVXBkYXRlTW9kZWxNZXRhZGF0YUlucHV0LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IGNvbHVtbklkcyA9IGRhdGEuY29sdW1ucy5tYXAoKGMpID0+IGMuaWQpO1xuICAgIGNvbnN0IG1vZGVsQ29sdW1ucyA9XG4gICAgICBhd2FpdCBjdHgubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmZpbmRDb2x1bW5zQnlJZHMoY29sdW1uSWRzKTtcbiAgICBmb3IgKGNvbnN0IGNvbCBvZiBtb2RlbENvbHVtbnMpIHtcbiAgICAgIGNvbnN0IHJlcXVlc3RlZE1ldGFkYXRhID0gZGF0YS5jb2x1bW5zLmZpbmQoKGMpID0+IGMuaWQgPT09IGNvbC5pZCk7XG5cbiAgICAgIC8vIHVwZGF0ZSBtZXRhZGF0YVxuICAgICAgY29uc3QgY29sdW1uTWV0YWRhdGE6IGFueSA9IHt9O1xuXG4gICAgICBpZiAoIWlzTmlsKHJlcXVlc3RlZE1ldGFkYXRhLmRpc3BsYXlOYW1lKSkge1xuICAgICAgICBjb2x1bW5NZXRhZGF0YS5kaXNwbGF5TmFtZSA9IHRoaXMuZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZShcbiAgICAgICAgICByZXF1ZXN0ZWRNZXRhZGF0YS5kaXNwbGF5TmFtZSxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05pbChyZXF1ZXN0ZWRNZXRhZGF0YS5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IGNvbC5wcm9wZXJ0aWVzID8gSlNPTi5wYXJzZShjb2wucHJvcGVydGllcykgOiB7fTtcbiAgICAgICAgcHJvcGVydGllcy5kZXNjcmlwdGlvbiA9IHRoaXMuZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZShcbiAgICAgICAgICByZXF1ZXN0ZWRNZXRhZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgKTtcbiAgICAgICAgY29sdW1uTWV0YWRhdGEucHJvcGVydGllcyA9IEpTT04uc3RyaW5naWZ5KHByb3BlcnRpZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzRW1wdHkoY29sdW1uTWV0YWRhdGEpKSB7XG4gICAgICAgIGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkudXBkYXRlT25lKGNvbC5pZCwgY29sdW1uTWV0YWRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlVXBkYXRlTmVzdGVkQ29sdW1uTWV0YWRhdGEoXG4gICAgZGF0YTogVXBkYXRlTW9kZWxNZXRhZGF0YUlucHV0LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IG5lc3RlZENvbHVtbklkcyA9IGRhdGEubmVzdGVkQ29sdW1ucy5tYXAoKG5jKSA9PiBuYy5pZCk7XG4gICAgY29uc3QgbW9kZWxOZXN0ZWRDb2x1bW5zID1cbiAgICAgIGF3YWl0IGN0eC5tb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnkuZmluZE5lc3RlZENvbHVtbnNCeUlkcyhcbiAgICAgICAgbmVzdGVkQ29sdW1uSWRzLFxuICAgICAgKTtcbiAgICBmb3IgKGNvbnN0IGNvbCBvZiBtb2RlbE5lc3RlZENvbHVtbnMpIHtcbiAgICAgIGNvbnN0IHJlcXVlc3RlZE1ldGFkYXRhID0gZGF0YS5uZXN0ZWRDb2x1bW5zLmZpbmQoKGMpID0+IGMuaWQgPT09IGNvbC5pZCk7XG5cbiAgICAgIGNvbnN0IG5lc3RlZENvbHVtbk1ldGFkYXRhOiBhbnkgPSB7fTtcblxuICAgICAgaWYgKCFpc05pbChyZXF1ZXN0ZWRNZXRhZGF0YS5kaXNwbGF5TmFtZSkpIHtcbiAgICAgICAgbmVzdGVkQ29sdW1uTWV0YWRhdGEuZGlzcGxheU5hbWUgPSB0aGlzLmRldGVybWluZU1ldGFkYXRhVmFsdWUoXG4gICAgICAgICAgcmVxdWVzdGVkTWV0YWRhdGEuZGlzcGxheU5hbWUsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOaWwocmVxdWVzdGVkTWV0YWRhdGEuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIG5lc3RlZENvbHVtbk1ldGFkYXRhLnByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgLi4uY29sLnByb3BlcnRpZXMsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZShcbiAgICAgICAgICAgIHJlcXVlc3RlZE1ldGFkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICksXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNFbXB0eShuZXN0ZWRDb2x1bW5NZXRhZGF0YSkpIHtcbiAgICAgICAgYXdhaXQgY3R4Lm1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeS51cGRhdGVPbmUoXG4gICAgICAgICAgY29sLmlkLFxuICAgICAgICAgIG5lc3RlZENvbHVtbk1ldGFkYXRhLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIGxpc3Qgdmlld3NcbiAgcHVibGljIGFzeW5jIGxpc3RWaWV3cyhfcm9vdDogYW55LCBfYXJnczogYW55LCBjdHg6IElDb250ZXh0KSB7XG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3Qgdmlld3MgPSBhd2FpdCBjdHgudmlld1JlcG9zaXRvcnkuZmluZEFsbEJ5KHsgcHJvamVjdElkOiBpZCB9KTtcbiAgICByZXR1cm4gdmlld3MubWFwKCh2aWV3KSA9PiAoe1xuICAgICAgLi4udmlldyxcbiAgICAgIGRpc3BsYXlOYW1lOiB2aWV3LnByb3BlcnRpZXNcbiAgICAgICAgPyBKU09OLnBhcnNlKHZpZXcucHJvcGVydGllcyk/LmRpc3BsYXlOYW1lXG4gICAgICAgIDogdmlldy5uYW1lLFxuICAgIH0pKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRWaWV3KF9yb290OiBhbnksIGFyZ3M6IGFueSwgY3R4OiBJQ29udGV4dCkge1xuICAgIGNvbnN0IHZpZXdJZCA9IGFyZ3Mud2hlcmUuaWQ7XG4gICAgY29uc3QgdmlldyA9IGF3YWl0IGN0eC52aWV3UmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogdmlld0lkIH0pO1xuICAgIGlmICghdmlldykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdWaWV3IG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICBjb25zdCBkaXNwbGF5TmFtZSA9IHZpZXcucHJvcGVydGllc1xuICAgICAgPyBKU09OLnBhcnNlKHZpZXcucHJvcGVydGllcyk/LmRpc3BsYXlOYW1lXG4gICAgICA6IHZpZXcubmFtZTtcbiAgICByZXR1cm4geyAuLi52aWV3LCBkaXNwbGF5TmFtZSB9O1xuICB9XG5cbiAgLy8gdmFsaWRhdGUgYSB2aWV3IG5hbWVcbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlVmlldyhfcm9vdDogYW55LCBhcmdzOiBhbnksIGN0eDogSUNvbnRleHQpIHtcbiAgICBjb25zdCB7IG5hbWUgfSA9IGFyZ3MuZGF0YTtcbiAgICByZXR1cm4gdGhpcy52YWxpZGF0ZVZpZXdOYW1lKG5hbWUsIGN0eCk7XG4gIH1cblxuICAvLyBjcmVhdGUgdmlldyBmcm9tIHNxbCBvZiBhIHJlc3BvbnNlXG4gIHB1YmxpYyBhc3luYyBjcmVhdGVWaWV3KF9yb290OiBhbnksIGFyZ3M6IGFueSwgY3R4OiBJQ29udGV4dCkge1xuICAgIGNvbnN0IHsgbmFtZTogZGlzcGxheU5hbWUsIHJlc3BvbnNlSWQgfSA9IGFyZ3MuZGF0YTtcblxuICAgIC8vIHZhbGlkYXRlIHZpZXcgbmFtZVxuICAgIGNvbnN0IHZhbGlkYXRlUmVzdWx0ID0gYXdhaXQgdGhpcy52YWxpZGF0ZVZpZXdOYW1lKGRpc3BsYXlOYW1lLCBjdHgpO1xuICAgIGlmICghdmFsaWRhdGVSZXN1bHQudmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcih2YWxpZGF0ZVJlc3VsdC5tZXNzYWdlKTtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgdmlld1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCB7IG1hbmlmZXN0IH0gPSBhd2FpdCBjdHguZGVwbG95U2VydmljZS5nZXRMYXN0RGVwbG95bWVudChwcm9qZWN0LmlkKTtcblxuICAgIC8vIGdldCBzcWwgc3RhdGVtZW50IG9mIGEgcmVzcG9uc2VcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGN0eC5hc2tpbmdTZXJ2aWNlLmdldFJlc3BvbnNlKHJlc3BvbnNlSWQpO1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhyZWFkIHJlc3BvbnNlICR7cmVzcG9uc2VJZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgLy8gY29uc3RydWN0IGN0ZSBzcWwgYW5kIGZvcm1hdCBpdFxuICAgIGNvbnN0IHN0YXRlbWVudCA9IGZvcm1hdChyZXNwb25zZS5zcWwpO1xuXG4gICAgLy8gZGVzY3JpYmUgY29sdW1uc1xuICAgIGNvbnN0IHsgY29sdW1ucyB9ID0gYXdhaXQgY3R4LnF1ZXJ5U2VydmljZS5kZXNjcmliZVN0YXRlbWVudChzdGF0ZW1lbnQsIHtcbiAgICAgIHByb2plY3QsXG4gICAgICBsaW1pdDogMSxcbiAgICAgIG1vZGVsaW5nT25seTogZmFsc2UsXG4gICAgICBtYW5pZmVzdCxcbiAgICB9KTtcblxuICAgIGlmIChpc0VtcHR5KGNvbHVtbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBkZXNjcmliZSBzdGF0ZW1lbnQnKTtcbiAgICB9XG5cbiAgICAvLyBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcHJvcGVydGllcyA9IHtcbiAgICAgIGRpc3BsYXlOYW1lLFxuICAgICAgY29sdW1ucyxcblxuICAgICAgLy8gcHJvcGVydGllcyBmcm9tIHRoZSB0aHJlYWQgcmVzcG9uc2VcbiAgICAgIHJlc3BvbnNlSWQsIC8vIGhlbHBmdWwgZm9yIG1hcHBpbmcgYmFjayB0byB0aGUgdGhyZWFkIHJlc3BvbnNlXG4gICAgICBxdWVzdGlvbjogcmVzcG9uc2UucXVlc3Rpb24sXG4gICAgfTtcblxuICAgIGNvbnN0IGV2ZW50TmFtZSA9IFRlbGVtZXRyeUV2ZW50LkhPTUVfQ1JFQVRFX1ZJRVc7XG4gICAgY29uc3QgZXZlbnRQcm9wZXJ0aWVzID0ge1xuICAgICAgc3RhdGVtZW50LFxuICAgICAgZGlzcGxheU5hbWUsXG4gICAgfTtcbiAgICAvLyBjcmVhdGUgdmlld1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBuYW1lID0gcmVwbGFjZUFsbG93YWJsZVN5bnRheChkaXNwbGF5TmFtZSk7XG4gICAgICBjb25zdCB2aWV3ID0gYXdhaXQgY3R4LnZpZXdSZXBvc2l0b3J5LmNyZWF0ZU9uZSh7XG4gICAgICAgIHByb2plY3RJZDogcHJvamVjdC5pZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgc3RhdGVtZW50LFxuICAgICAgICBwcm9wZXJ0aWVzOiBKU09OLnN0cmluZ2lmeShwcm9wZXJ0aWVzKSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyB0ZWxlbWV0cnlcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50TmFtZSwgZXZlbnRQcm9wZXJ0aWVzKTtcblxuICAgICAgcmV0dXJuIHsgLi4udmlldywgZGlzcGxheU5hbWUgfTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAge1xuICAgICAgICAgIC4uLmV2ZW50UHJvcGVydGllcyxcbiAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICB9LFxuICAgICAgICBlcnIuZXh0ZW5zaW9ucz8uc2VydmljZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICApO1xuXG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLy8gZGVsZXRlIHZpZXdcbiAgcHVibGljIGFzeW5jIGRlbGV0ZVZpZXcoX3Jvb3Q6IGFueSwgYXJnczogYW55LCBjdHg6IElDb250ZXh0KSB7XG4gICAgY29uc3Qgdmlld0lkID0gYXJncy53aGVyZS5pZDtcbiAgICBjb25zdCB2aWV3ID0gYXdhaXQgY3R4LnZpZXdSZXBvc2l0b3J5LmZpbmRPbmVCeSh7IGlkOiB2aWV3SWQgfSk7XG4gICAgaWYgKCF2aWV3KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZpZXcgbm90IGZvdW5kJyk7XG4gICAgfVxuICAgIGF3YWl0IGN0eC52aWV3UmVwb3NpdG9yeS5kZWxldGVPbmUodmlld0lkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBwcmV2aWV3TW9kZWxEYXRhKF9yb290OiBhbnksIGFyZ3M6IGFueSwgY3R4OiBJQ29udGV4dCkge1xuICAgIGNvbnN0IG1vZGVsSWQgPSBhcmdzLndoZXJlLmlkO1xuICAgIGNvbnN0IG1vZGVsID0gYXdhaXQgY3R4Lm1vZGVsUmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogbW9kZWxJZCB9KTtcbiAgICBpZiAoIW1vZGVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZGVsIG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgeyBtYW5pZmVzdCB9ID0gYXdhaXQgY3R4Lm1kbFNlcnZpY2UubWFrZUN1cnJlbnRNb2RlbE1ETCgpO1xuICAgIGNvbnN0IG1vZGVsQ29sdW1ucyA9IGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeU1vZGVsSWRzKFtcbiAgICAgIG1vZGVsLmlkLFxuICAgIF0pO1xuICAgIGNvbnN0IHNxbCA9IGBzZWxlY3QgJHtnZXRQcmV2aWV3Q29sdW1uc1N0cihtb2RlbENvbHVtbnMpfSBmcm9tIFwiJHttb2RlbC5yZWZlcmVuY2VOYW1lfVwiYDtcblxuICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgY3R4LnF1ZXJ5U2VydmljZS5wcmV2aWV3KHNxbCwge1xuICAgICAgcHJvamVjdCxcbiAgICAgIG1vZGVsaW5nT25seTogZmFsc2UsXG4gICAgICBtYW5pZmVzdCxcbiAgICB9KSkgYXMgUHJldmlld0RhdGFSZXNwb25zZTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHByZXZpZXdWaWV3RGF0YShfcm9vdDogYW55LCBhcmdzOiBhbnksIGN0eDogSUNvbnRleHQpIHtcbiAgICBjb25zdCB7IGlkOiB2aWV3SWQsIGxpbWl0IH0gPSBhcmdzLndoZXJlO1xuICAgIGNvbnN0IHZpZXcgPSBhd2FpdCBjdHgudmlld1JlcG9zaXRvcnkuZmluZE9uZUJ5KHsgaWQ6IHZpZXdJZCB9KTtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVmlldyBub3QgZm91bmQnKTtcbiAgICB9XG4gICAgY29uc3QgeyBtYW5pZmVzdCB9ID0gYXdhaXQgY3R4Lm1kbFNlcnZpY2UubWFrZUN1cnJlbnRNb2RlbE1ETCgpO1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcblxuICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgY3R4LnF1ZXJ5U2VydmljZS5wcmV2aWV3KHZpZXcuc3RhdGVtZW50LCB7XG4gICAgICBwcm9qZWN0LFxuICAgICAgbGltaXQsXG4gICAgICBtYW5pZmVzdCxcbiAgICAgIG1vZGVsaW5nT25seTogZmFsc2UsXG4gICAgfSkpIGFzIFByZXZpZXdEYXRhUmVzcG9uc2U7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICAvLyBOb3RpY2U6IHRoaXMgaXMgdXNlZCBieSBBSSBzZXJ2aWNlLlxuICAvLyBhbnkgY2hhbmdlIHRvIHRoaXMgcmVzb2x2ZXIgc2hvdWxkIGJlIHN5bmNlZCB3aXRoIEFJIHNlcnZpY2UuXG4gIHB1YmxpYyBhc3luYyBwcmV2aWV3U3FsKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczogeyBkYXRhOiBQcmV2aWV3U1FMRGF0YSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IHsgc3FsLCBwcm9qZWN0SWQsIGxpbWl0LCBkcnlSdW4gfSA9IGFyZ3MuZGF0YTtcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkXG4gICAgICA/IGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRQcm9qZWN0QnlJZChwcm9qZWN0SWQpXG4gICAgICA6IGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IHsgbWFuaWZlc3QgfSA9IGF3YWl0IGN0eC5kZXBsb3lTZXJ2aWNlLmdldExhc3REZXBsb3ltZW50KHByb2plY3QuaWQpO1xuICAgIHJldHVybiBhd2FpdCBjdHgucXVlcnlTZXJ2aWNlLnByZXZpZXcoc3FsLCB7XG4gICAgICBwcm9qZWN0LFxuICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgbW9kZWxpbmdPbmx5OiBmYWxzZSxcbiAgICAgIG1hbmlmZXN0LFxuICAgICAgZHJ5UnVuLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldE5hdGl2ZVNxbChcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgcmVzcG9uc2VJZDogbnVtYmVyIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB7IHJlc3BvbnNlSWQgfSA9IGFyZ3M7XG5cbiAgICAvLyBJZiB1c2luZyBhIHNhbXBsZSBkYXRhc2V0LCBuYXRpdmUgU1FMIGlzIG5vdCBzdXBwb3J0ZWRcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgaWYgKHByb2plY3Quc2FtcGxlRGF0YXNldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb2Vzbid0IHN1cHBvcnQgTmF0aXZlIFNRTGApO1xuICAgIH1cbiAgICBjb25zdCB7IG1hbmlmZXN0IH0gPSBhd2FpdCBjdHgubWRsU2VydmljZS5tYWtlQ3VycmVudE1vZGVsTURMKCk7XG5cbiAgICAvLyBnZXQgc3FsIHN0YXRlbWVudCBvZiBhIHJlc3BvbnNlXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjdHguYXNraW5nU2VydmljZS5nZXRSZXNwb25zZShyZXNwb25zZUlkKTtcbiAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRocmVhZCByZXNwb25zZSAke3Jlc3BvbnNlSWR9IG5vdCBmb3VuZGApO1xuICAgIH1cblxuICAgIC8vIGNvbnN0cnVjdCBjdGUgc3FsIGFuZCBmb3JtYXQgaXRcbiAgICBsZXQgbmF0aXZlU3FsOiBzdHJpbmc7XG4gICAgaWYgKHByb2plY3QudHlwZSA9PT0gRGF0YVNvdXJjZU5hbWUuRFVDS0RCKSB7XG4gICAgICBsb2dnZXIuaW5mbyhgR2V0dGluZyBuYXRpdmUgc3FsIGZyb20gd3JlbiBlbmdpbmVgKTtcbiAgICAgIG5hdGl2ZVNxbCA9IGF3YWl0IGN0eC53cmVuRW5naW5lQWRhcHRvci5nZXROYXRpdmVTUUwocmVzcG9uc2Uuc3FsLCB7XG4gICAgICAgIG1hbmlmZXN0LFxuICAgICAgICBtb2RlbGluZ09ubHk6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci5pbmZvKGBHZXR0aW5nIG5hdGl2ZSBzcWwgZnJvbSBpYmlzIHNlcnZlcmApO1xuICAgICAgbmF0aXZlU3FsID0gYXdhaXQgY3R4LmliaXNTZXJ2ZXJBZGFwdG9yLmdldE5hdGl2ZVNxbCh7XG4gICAgICAgIGRhdGFTb3VyY2U6IHByb2plY3QudHlwZSxcbiAgICAgICAgc3FsOiByZXNwb25zZS5zcWwsXG4gICAgICAgIG1kbDogbWFuaWZlc3QsXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdChuYXRpdmVTcWwpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHVwZGF0ZVZpZXdNZXRhZGF0YShcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgd2hlcmU6IHsgaWQ6IG51bWJlciB9OyBkYXRhOiBVcGRhdGVWaWV3TWV0YWRhdGFJbnB1dCB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IHZpZXdJZCA9IGFyZ3Mud2hlcmUuaWQ7XG4gICAgY29uc3QgZGF0YSA9IGFyZ3MuZGF0YTtcblxuICAgIC8vIGNoZWNrIGlmIHZpZXcgZXhpc3RzXG4gICAgY29uc3QgdmlldyA9IGF3YWl0IGN0eC52aWV3UmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogdmlld0lkIH0pO1xuICAgIGlmICghdmlldykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdWaWV3IG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSB2aWV3IG1ldGFkYXRhXG4gICAgY29uc3QgcHJvcGVydGllcyA9IEpTT04ucGFyc2Uodmlldy5wcm9wZXJ0aWVzKTtcbiAgICBsZXQgbmV3TmFtZSA9IHZpZXcubmFtZTtcbiAgICAvLyBpZiBkaXNwbGF5TmFtZSBpcyBub3QgbnVsbCwgb3IgdW5kZWZpbmVkLCB1cGRhdGUgdGhlIGRpc3BsYXlOYW1lXG4gICAgaWYgKCFpc05pbChkYXRhLmRpc3BsYXlOYW1lKSkge1xuICAgICAgYXdhaXQgdGhpcy52YWxpZGF0ZVZpZXdOYW1lKGRhdGEuZGlzcGxheU5hbWUsIGN0eCwgdmlld0lkKTtcbiAgICAgIG5ld05hbWUgPSByZXBsYWNlQWxsb3dhYmxlU3ludGF4KGRhdGEuZGlzcGxheU5hbWUpO1xuICAgICAgcHJvcGVydGllcy5kaXNwbGF5TmFtZSA9IHRoaXMuZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZShkYXRhLmRpc3BsYXlOYW1lKTtcbiAgICB9XG5cbiAgICAvLyBpZiBkZXNjcmlwdGlvbiBpcyBub3QgbnVsbCwgb3IgdW5kZWZpbmVkLCB1cGRhdGUgdGhlIGRlc2NyaXB0aW9uIGluIHByb3BlcnRpZXNcbiAgICBpZiAoIWlzTmlsKGRhdGEuZGVzY3JpcHRpb24pKSB7XG4gICAgICBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uID0gdGhpcy5kZXRlcm1pbmVNZXRhZGF0YVZhbHVlKGRhdGEuZGVzY3JpcHRpb24pO1xuICAgIH1cblxuICAgIC8vIHZpZXcgY29sdW1uIG1ldGFkYXRhXG4gICAgaWYgKCFpc0VtcHR5KGRhdGEuY29sdW1ucykpIHtcbiAgICAgIGNvbnN0IHZpZXdDb2x1bW5zID0gcHJvcGVydGllcy5jb2x1bW5zO1xuICAgICAgZm9yIChjb25zdCBjb2wgb2Ygdmlld0NvbHVtbnMpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdGVkTWV0YWRhdGEgPSBkYXRhLmNvbHVtbnMuZmluZChcbiAgICAgICAgICAoYykgPT4gYy5yZWZlcmVuY2VOYW1lID09PSBjb2wubmFtZSxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIWlzTmlsKHJlcXVlc3RlZE1ldGFkYXRhLmRlc2NyaXB0aW9uKSkge1xuICAgICAgICAgIGNvbC5wcm9wZXJ0aWVzID0gY29sLnByb3BlcnRpZXMgfHwge307XG4gICAgICAgICAgY29sLnByb3BlcnRpZXMuZGVzY3JpcHRpb24gPSB0aGlzLmRldGVybWluZU1ldGFkYXRhVmFsdWUoXG4gICAgICAgICAgICByZXF1ZXN0ZWRNZXRhZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHByb3BlcnRpZXMuY29sdW1ucyA9IHZpZXdDb2x1bW5zO1xuICAgIH1cblxuICAgIGF3YWl0IGN0eC52aWV3UmVwb3NpdG9yeS51cGRhdGVPbmUodmlld0lkLCB7XG4gICAgICBuYW1lOiBuZXdOYW1lLFxuICAgICAgcHJvcGVydGllczogSlNPTi5zdHJpbmdpZnkocHJvcGVydGllcyksXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgLy8gaWYgaXQncyBlbXB0eSBzdHJpbmcsIG1lYW5pbmcgdXNlcnMgd2FudCB0byByZW1vdmUgdGhlIHZhbHVlXG4gICAgLy8gc28gd2UgcmV0dXJuIG51bGxcbiAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBvdGhlcndpc2UsIHJldHVybiB0aGUgdmFsdWVcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvLyB2YWxpZGF0ZSB2aWV3IG5hbWVcbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZVZpZXdOYW1lKFxuICAgIHZpZXdEaXNwbGF5TmFtZTogc3RyaW5nLFxuICAgIGN0eDogSUNvbnRleHQsXG4gICAgc2VsZlZpZXc/OiBudW1iZXIsXG4gICk6IFByb21pc2U8eyB2YWxpZDogYm9vbGVhbjsgbWVzc2FnZT86IHN0cmluZyB9PiB7XG4gICAgLy8gY2hlY2sgaWYgdmlldyBuYW1lIGlzIHZhbGlkXG4gICAgLy8gYS16LCBBLVosIDAtOSwgXywgLSBhcmUgYWxsb3dlZCBhbmQgY2Fubm90IHN0YXJ0IHdpdGggbnVtYmVyXG4gICAgY29uc3QgeyB2YWxpZCwgbWVzc2FnZSB9ID0gdmFsaWRhdGVEaXNwbGF5TmFtZSh2aWV3RGlzcGxheU5hbWUpO1xuICAgIGlmICghdmFsaWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHJlZmVyZW5jZU5hbWUgPSByZXBsYWNlQWxsb3dhYmxlU3ludGF4KHZpZXdEaXNwbGF5TmFtZSk7XG4gICAgLy8gY2hlY2sgaWYgdmlldyBuYW1lIGlzIGR1cGxpY2F0ZWRcbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCB2aWV3cyA9IGF3YWl0IGN0eC52aWV3UmVwb3NpdG9yeS5maW5kQWxsQnkoeyBwcm9qZWN0SWQ6IGlkIH0pO1xuICAgIGlmICh2aWV3cy5maW5kKCh2KSA9PiB2Lm5hbWUgPT09IHJlZmVyZW5jZU5hbWUgJiYgdi5pZCAhPT0gc2VsZlZpZXcpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBHZW5lcmF0ZWQgdmlldyBuYW1lIFwiJHtyZWZlcmVuY2VOYW1lfVwiIGlzIGR1cGxpY2F0ZWRgLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWQ6IHRydWUsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVUYWJsZUV4aXN0KFxuICAgIHRhYmxlTmFtZTogc3RyaW5nLFxuICAgIGRhdGFTb3VyY2VUYWJsZXM6IENvbXBhY3RUYWJsZVtdLFxuICApIHtcbiAgICBpZiAoIWRhdGFTb3VyY2VUYWJsZXMuZmluZCgoYykgPT4gYy5uYW1lID09PSB0YWJsZU5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhYmxlICR7dGFibGVOYW1lfSBub3QgZm91bmQgaW4gdGhlIGRhdGEgU291cmNlYCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZUNvbHVtbnNFeGlzdChcbiAgICB0YWJsZU5hbWU6IHN0cmluZyxcbiAgICBmaWVsZHM6IHN0cmluZ1tdLFxuICAgIGRhdGFTb3VyY2VUYWJsZXM6IENvbXBhY3RUYWJsZVtdLFxuICApIHtcbiAgICBjb25zdCB0YWJsZUNvbHVtbnMgPSBkYXRhU291cmNlVGFibGVzLmZpbmQoXG4gICAgICAoYykgPT4gYy5uYW1lID09PSB0YWJsZU5hbWUsXG4gICAgKT8uY29sdW1ucztcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgaWYgKCF0YWJsZUNvbHVtbnMuZmluZCgoYykgPT4gYy5uYW1lID09PSBmaWVsZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDb2x1bW4gXCIke2ZpZWxkfVwiIG5vdCBmb3VuZCBpbiB0YWJsZSBcIiR7dGFibGVOYW1lfVwiIGluIHRoZSBkYXRhIFNvdXJjZWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiRGF0YVNvdXJjZU5hbWUiLCJnZXRMb2dnZXIiLCJ0cmFuc2Zvcm1JbnZhbGlkQ29sdW1uTmFtZSIsImZvcm1hdCIsImlzRW1wdHkiLCJpc05pbCIsInJlcGxhY2VBbGxvd2FibGVTeW50YXgiLCJ2YWxpZGF0ZURpc3BsYXlOYW1lIiwiZmluZENvbHVtbnNUb1VwZGF0ZSIsImdldFByZXZpZXdDb2x1bW5zU3RyIiwiaGFuZGxlTmVzdGVkQ29sdW1ucyIsInJlcGxhY2VJbnZhbGlkUmVmZXJlbmNlTmFtZSIsInVwZGF0ZU1vZGVsUHJpbWFyeUtleSIsIlRlbGVtZXRyeUV2ZW50IiwibG9nZ2VyIiwibGV2ZWwiLCJTeW5jU3RhdHVzRW51bSIsIk1vZGVsUmVzb2x2ZXIiLCJjb25zdHJ1Y3RvciIsImxpc3RNb2RlbHMiLCJiaW5kIiwiZ2V0TW9kZWwiLCJjcmVhdGVNb2RlbCIsInVwZGF0ZU1vZGVsIiwiZGVsZXRlTW9kZWwiLCJ1cGRhdGVNb2RlbE1ldGFkYXRhIiwiZGVwbG95IiwiZ2V0TURMIiwiY2hlY2tNb2RlbFN5bmMiLCJsaXN0Vmlld3MiLCJnZXRWaWV3IiwidmFsaWRhdGVWaWV3IiwiY3JlYXRlVmlldyIsImRlbGV0ZVZpZXciLCJ1cGRhdGVWaWV3TWV0YWRhdGEiLCJwcmV2aWV3TW9kZWxEYXRhIiwicHJldmlld1ZpZXdEYXRhIiwicHJldmlld1NxbCIsImdldE5hdGl2ZVNxbCIsImNyZWF0ZUNhbGN1bGF0ZWRGaWVsZCIsInZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkIiwidXBkYXRlQ2FsY3VsYXRlZEZpZWxkIiwiZGVsZXRlQ2FsY3VsYXRlZEZpZWxkIiwiY3JlYXRlUmVsYXRpb24iLCJ1cGRhdGVSZWxhdGlvbiIsImRlbGV0ZVJlbGF0aW9uIiwiX3Jvb3QiLCJhcmdzIiwiY3R4IiwiZGF0YSIsImV2ZW50TmFtZSIsIk1PREVMSU5HX0NSRUFURV9SRUxBVElPTiIsInJlbGF0aW9uIiwibW9kZWxTZXJ2aWNlIiwidGVsZW1ldHJ5Iiwic2VuZEV2ZW50IiwiZXJyIiwiZXJyb3IiLCJtZXNzYWdlIiwiZXh0ZW5zaW9ucyIsInNlcnZpY2UiLCJ3aGVyZSIsIk1PREVMSU5HX1VQREFURV9SRUxBVElPTiIsImlkIiwicmVsYXRpb25JZCIsIl9hcmdzIiwiTU9ERUxJTkdfQ1JFQVRFX0NGIiwiY29sdW1uIiwibmFtZSIsIm1vZGVsSWQiLCJjb2x1bW5JZCIsInZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkTmFtaW5nIiwiTU9ERUxJTkdfVVBEQVRFX0NGIiwibW9kZWxDb2x1bW5SZXBvc2l0b3J5IiwiZmluZE9uZUJ5IiwiaXNDYWxjdWxhdGVkIiwiRXJyb3IiLCJkZWxldGVPbmUiLCJwcm9qZWN0U2VydmljZSIsImdldEN1cnJlbnRQcm9qZWN0IiwibWFuaWZlc3QiLCJtZGxTZXJ2aWNlIiwibWFrZUN1cnJlbnRNb2RlbE1ETCIsImN1cnJlbnRIYXNoIiwiZGVwbG95U2VydmljZSIsImNyZWF0ZU1ETEhhc2giLCJsYXN0RGVwbG95IiwiZ2V0TGFzdERlcGxveW1lbnQiLCJsYXN0RGVwbG95SGFzaCIsImhhc2giLCJpblByb2dyZXNzRGVwbG95bWVudCIsImdldEluUHJvZ3Jlc3NEZXBsb3ltZW50Iiwic3RhdHVzIiwicHJvamVjdCIsImRlcGxveVJlcyIsImZvcmNlIiwic2FtcGxlRGF0YXNldCIsImdlbmVyYXRlUHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zIiwibWRsIiwiZ2V0TURMQnlIYXNoIiwicHJvamVjdElkIiwibW9kZWxzIiwibW9kZWxSZXBvc2l0b3J5IiwiZmluZEFsbEJ5IiwibW9kZWxJZHMiLCJtYXAiLCJtIiwibW9kZWxDb2x1bW5MaXN0IiwiZmluZENvbHVtbnNCeU1vZGVsSWRzIiwibW9kZWxOZXN0ZWRDb2x1bW5MaXN0IiwibW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5IiwiZmluZE5lc3RlZENvbHVtbnNCeU1vZGVsSWRzIiwicmVzdWx0IiwibW9kZWwiLCJtb2RlbEZpZWxkcyIsImZpbHRlciIsImMiLCJwcm9wZXJ0aWVzIiwiSlNPTiIsInBhcnNlIiwibmVzdGVkQ29sdW1ucyIsInR5cGUiLCJpbmNsdWRlcyIsIm5jIiwidW5kZWZpbmVkIiwiZmllbGRzIiwiY2FsY3VsYXRlZEZpZWxkcyIsInB1c2giLCJtb2RlbENvbHVtbnMiLCJtb2RlbE5lc3RlZENvbHVtbnMiLCJjb2x1bW5zIiwicmVsYXRpb25zIiwicmVsYXRpb25SZXBvc2l0b3J5IiwiZmluZFJlbGF0aW9uc0J5IiwiY29sdW1uSWRzIiwiciIsImpvaW5UeXBlIiwic291cmNlVGFibGVOYW1lIiwicHJpbWFyeUtleSIsImhhbmRsZUNyZWF0ZU1vZGVsIiwiTU9ERUxJTkdfQ1JFQVRFX01PREVMIiwiZGF0YVNvdXJjZVRhYmxlcyIsImdldFByb2plY3REYXRhU291cmNlVGFibGVzIiwidmFsaWRhdGVUYWJsZUV4aXN0IiwidmFsaWRhdGVDb2x1bW5zRXhpc3QiLCJkYXRhU291cmNlVGFibGUiLCJmaW5kIiwidGFibGUiLCJtb2RlbFZhbHVlIiwiZGlzcGxheU5hbWUiLCJyZWZlcmVuY2VOYW1lIiwiY2FjaGVkIiwicmVmcmVzaFRpbWUiLCJzdHJpbmdpZnkiLCJjcmVhdGVPbmUiLCJjb21wYWN0Q29sdW1ucyIsImNvbHVtblZhbHVlcyIsInNvdXJjZUNvbHVtbk5hbWUiLCJub3ROdWxsIiwiaXNQayIsImNyZWF0ZU1hbnkiLCJuZXN0ZWRDb2x1bW5WYWx1ZXMiLCJmbGF0TWFwIiwiY29tcGFjdENvbHVtbiIsImluZm8iLCJoYW5kbGVVcGRhdGVNb2RlbCIsIk1PREVMSU5HX1VQREFURV9NT0RFTCIsImV4aXN0aW5nQ29sdW1ucyIsInNvdXJjZVRhYmxlQ29sdW1ucyIsInRvRGVsZXRlQ29sdW1uSWRzIiwidG9DcmVhdGVDb2x1bW5zIiwidG9VcGRhdGVDb2x1bW5zIiwibGVuZ3RoIiwiZGVsZXRlTWFueSIsInNvdXJjZUNvbHVtbiIsImNvbHVtblZhbHVlIiwidXBkYXRlT25lIiwiZGVsZXRlQWxsQnkiLCJNT0RFTElOR19VUERBVEVfTU9ERUxfTUVUQURBVEEiLCJoYW5kbGVVcGRhdGVNb2RlbE1ldGFkYXRhIiwiaGFuZGxlVXBkYXRlQ29sdW1uTWV0YWRhdGEiLCJoYW5kbGVVcGRhdGVOZXN0ZWRDb2x1bW5NZXRhZGF0YSIsImhhbmRsZVVwZGF0ZUNGTWV0YWRhdGEiLCJyZWxhdGlvbnNoaXBzIiwiaGFuZGxlVXBkYXRlUmVsYXRpb25zaGlwTWV0YWRhdGEiLCJtb2RlbE1ldGFkYXRhIiwiZGV0ZXJtaW5lTWV0YWRhdGFWYWx1ZSIsImRlc2NyaXB0aW9uIiwicmVsYXRpb25zaGlwSWRzIiwiZmluZFJlbGF0aW9uc0J5SWRzIiwicmVsIiwicmVxdWVzdGVkTWV0YWRhdGEiLCJyZWxhdGlvbk1ldGFkYXRhIiwiY2FsY3VsYXRlZEZpZWxkSWRzIiwiZmluZENvbHVtbnNCeUlkcyIsImNvbCIsImNvbHVtbk1ldGFkYXRhIiwibmVzdGVkQ29sdW1uSWRzIiwiZmluZE5lc3RlZENvbHVtbnNCeUlkcyIsIm5lc3RlZENvbHVtbk1ldGFkYXRhIiwidmlld3MiLCJ2aWV3UmVwb3NpdG9yeSIsInZpZXciLCJ2aWV3SWQiLCJ2YWxpZGF0ZVZpZXdOYW1lIiwicmVzcG9uc2VJZCIsInZhbGlkYXRlUmVzdWx0IiwidmFsaWQiLCJyZXNwb25zZSIsImFza2luZ1NlcnZpY2UiLCJnZXRSZXNwb25zZSIsInN0YXRlbWVudCIsInNxbCIsInF1ZXJ5U2VydmljZSIsImRlc2NyaWJlU3RhdGVtZW50IiwibGltaXQiLCJtb2RlbGluZ09ubHkiLCJxdWVzdGlvbiIsIkhPTUVfQ1JFQVRFX1ZJRVciLCJldmVudFByb3BlcnRpZXMiLCJwcmV2aWV3IiwiZHJ5UnVuIiwiZ2V0UHJvamVjdEJ5SWQiLCJuYXRpdmVTcWwiLCJEVUNLREIiLCJ3cmVuRW5naW5lQWRhcHRvciIsImdldE5hdGl2ZVNRTCIsImliaXNTZXJ2ZXJBZGFwdG9yIiwiZGF0YVNvdXJjZSIsIm5ld05hbWUiLCJ2aWV3Q29sdW1ucyIsInZhbHVlIiwidmlld0Rpc3BsYXlOYW1lIiwic2VsZlZpZXciLCJ2IiwidGFibGVOYW1lIiwidGFibGVDb2x1bW5zIiwiZmllbGQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/resolvers/modelResolver.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/resolvers/projectResolver.ts":
/*!********************************************************!*\
  !*** ./src/apollo/server/resolvers/projectResolver.ts ***!
  \********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OnboardingStatusEnum: () => (/* binding */ OnboardingStatusEnum),\n/* harmony export */   ProjectResolver: () => (/* binding */ ProjectResolver)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ \"(api)/./src/apollo/server/types/index.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _server_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/data */ \"(api)/./src/apollo/server/data/index.ts\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/snakeCase */ \"lodash/snakeCase\");\n/* harmony import */ var lodash_snakeCase__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_snakeCase__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _server_managers_dataSourceSchemaDetector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @server/managers/dataSourceSchemaDetector */ \"(api)/./src/apollo/server/managers/dataSourceSchemaDetector.ts\");\n/* harmony import */ var _dataSource__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dataSource */ \"(api)/./src/apollo/server/dataSource.ts\");\n/* harmony import */ var _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__]);\n_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.getLogger)(\"DataSourceResolver\");\nlogger.level = \"debug\";\nvar OnboardingStatusEnum;\n(function(OnboardingStatusEnum) {\n    OnboardingStatusEnum[\"NOT_STARTED\"] = \"NOT_STARTED\";\n    OnboardingStatusEnum[\"DATASOURCE_SAVED\"] = \"DATASOURCE_SAVED\";\n    OnboardingStatusEnum[\"ONBOARDING_FINISHED\"] = \"ONBOARDING_FINISHED\";\n    OnboardingStatusEnum[\"WITH_SAMPLE_DATASET\"] = \"WITH_SAMPLE_DATASET\";\n})(OnboardingStatusEnum || (OnboardingStatusEnum = {}));\nclass ProjectResolver {\n    constructor(){\n        this.getSettings = this.getSettings.bind(this);\n        this.updateCurrentProject = this.updateCurrentProject.bind(this);\n        this.resetCurrentProject = this.resetCurrentProject.bind(this);\n        this.saveDataSource = this.saveDataSource.bind(this);\n        this.updateDataSource = this.updateDataSource.bind(this);\n        this.listDataSourceTables = this.listDataSourceTables.bind(this);\n        this.saveTables = this.saveTables.bind(this);\n        this.autoGenerateRelation = this.autoGenerateRelation.bind(this);\n        this.saveRelations = this.saveRelations.bind(this);\n        this.getOnboardingStatus = this.getOnboardingStatus.bind(this);\n        this.startSampleDataset = this.startSampleDataset.bind(this);\n        this.triggerDataSourceDetection = this.triggerDataSourceDetection.bind(this);\n        this.getSchemaChange = this.getSchemaChange.bind(this);\n        this.getProjectRecommendationQuestions = this.getProjectRecommendationQuestions.bind(this);\n    }\n    async getSettings(_root, _arg, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const generalConnectionInfo = ctx.projectService.getGeneralConnectionInfo(project);\n        const dataSourceType = project.type;\n        return {\n            productVersion: ctx.config.wrenProductVersion || \"\",\n            dataSource: {\n                type: dataSourceType,\n                properties: {\n                    displayName: project.displayName,\n                    ...generalConnectionInfo\n                },\n                sampleDataset: project.sampleDataset\n            },\n            language: project.language\n        };\n    }\n    async getProjectRecommendationQuestions(_root, _arg, ctx) {\n        return ctx.projectService.getProjectRecommendationQuestions();\n    }\n    async updateCurrentProject(_root, arg, ctx) {\n        const { language } = arg.data;\n        const project = await ctx.projectService.getCurrentProject();\n        await ctx.projectRepository.updateOne(project.id, {\n            language\n        });\n        // only generating for user's data source\n        if (project.sampleDataset === null) {\n            await ctx.projectService.generateProjectRecommendationQuestions();\n        }\n        return true;\n    }\n    async resetCurrentProject(_root, _arg, ctx) {\n        let project;\n        try {\n            project = await ctx.projectService.getCurrentProject();\n        } catch  {\n            // no project found\n            return true;\n        }\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.SETTING_RESET_PROJECT;\n        try {\n            const id = project.id;\n            await ctx.schemaChangeRepository.deleteAllBy({\n                projectId: id\n            });\n            await ctx.deployService.deleteAllByProjectId(id);\n            await ctx.askingService.deleteAllByProjectId(id);\n            await ctx.modelService.deleteAllViewsByProjectId(id);\n            await ctx.modelService.deleteAllModelsByProjectId(id);\n            await ctx.projectService.deleteProject(id);\n            // telemetry\n            ctx.telemetry.sendEvent(eventName, {\n                projectId: id,\n                dataSourceType: project.type\n            });\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                dataSourceType: project.type,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n        return true;\n    }\n    async startSampleDataset(_root, _arg, ctx) {\n        const { name } = _arg.data;\n        const dataset = _server_data__WEBPACK_IMPORTED_MODULE_2__.sampleDatasets[lodash_snakeCase__WEBPACK_IMPORTED_MODULE_3___default()(name)];\n        if (!dataset) {\n            throw new Error(\"Sample dataset not found\");\n        }\n        if (!(name in _server_data__WEBPACK_IMPORTED_MODULE_2__.SampleDatasetName)) {\n            throw new Error(\"Invalid sample dataset name\");\n        }\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.CONNECTION_START_SAMPLE_DATASET;\n        const eventProperties = {\n            datasetName: name\n        };\n        try {\n            // create duckdb datasource\n            const initSql = (0,_server_data__WEBPACK_IMPORTED_MODULE_2__.buildInitSql)(name);\n            const duckdbDatasourceProperties = {\n                initSql,\n                extensions: [],\n                configurations: {}\n            };\n            await this.saveDataSource(_root, {\n                data: {\n                    type: _types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.DUCKDB,\n                    properties: duckdbDatasourceProperties\n                }\n            }, ctx);\n            const project = await ctx.projectService.getCurrentProject();\n            // list all the tables in the data source\n            const tables = await this.listDataSourceTables(_root, _arg, ctx);\n            const tableNames = tables.map((table)=>table.name);\n            // save tables as model and modelColumns\n            await this.overwriteModelsAndColumns(tableNames, ctx, project);\n            await ctx.modelService.updatePrimaryKeys(dataset.tables);\n            await ctx.modelService.batchUpdateModelProperties(dataset.tables);\n            await ctx.modelService.batchUpdateColumnProperties(dataset.tables);\n            // save relations\n            const relations = (0,_server_data__WEBPACK_IMPORTED_MODULE_2__.getRelations)(name);\n            const models = await ctx.modelRepository.findAll();\n            const columns = await ctx.modelColumnRepository.findAll();\n            const mappedRelations = this.buildRelationInput(relations, models, columns);\n            await ctx.modelService.saveRelations(mappedRelations);\n            // mark current project as using sample dataset\n            await ctx.projectRepository.updateOne(project.id, {\n                sampleDataset: name\n            });\n            await this.deploy(ctx);\n            // telemetry\n            ctx.telemetry.sendEvent(eventName, eventProperties);\n            return {\n                name\n            };\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                ...eventProperties,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async getOnboardingStatus(_root, _arg, ctx) {\n        let project;\n        try {\n            project = await ctx.projectRepository.getCurrentProject();\n        } catch (_err) {\n            return {\n                status: \"NOT_STARTED\"\n            };\n        }\n        const { id, sampleDataset } = project;\n        if (sampleDataset) {\n            return {\n                status: \"WITH_SAMPLE_DATASET\"\n            };\n        }\n        const models = await ctx.modelRepository.findAllBy({\n            projectId: id\n        });\n        if (!models.length) {\n            return {\n                status: \"DATASOURCE_SAVED\"\n            };\n        } else {\n            return {\n                status: \"ONBOARDING_FINISHED\"\n            };\n        }\n    }\n    async saveDataSource(_root, args, ctx) {\n        const { type, properties } = args.data;\n        // Currently only can create one project\n        await this.resetCurrentProject(_root, args, ctx);\n        const { displayName, ...connectionInfo } = properties;\n        const project = await ctx.projectService.createProject({\n            displayName,\n            type,\n            connectionInfo\n        });\n        logger.debug(`Project created.`);\n        // init dashboard\n        logger.debug(\"Dashboard init...\");\n        await ctx.dashboardService.initDashboard();\n        logger.debug(\"Dashboard created.\");\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.CONNECTION_SAVE_DATA_SOURCE;\n        const eventProperties = {\n            dataSourceType: type\n        };\n        // try to connect to the data source\n        try {\n            // handle duckdb connection\n            if (type === _types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.DUCKDB) {\n                connectionInfo;\n                await this.buildDuckDbEnvironment(ctx, {\n                    initSql: connectionInfo.initSql,\n                    extensions: connectionInfo.extensions,\n                    configurations: connectionInfo.configurations\n                });\n            } else {\n                // handle other data source\n                await ctx.projectService.getProjectDataSourceTables(project);\n                logger.debug(`Data source tables fetched`);\n            }\n            // telemetry\n            ctx.telemetry.sendEvent(eventName, eventProperties);\n        } catch (err) {\n            logger.error(\"Failed to get project tables\", JSON.stringify(err, null, 2));\n            await ctx.projectRepository.deleteOne(project.id);\n            ctx.telemetry.sendEvent(eventName, {\n                eventProperties,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n        return {\n            type: project.type,\n            properties: {\n                displayName: project.displayName,\n                ...ctx.projectService.getGeneralConnectionInfo(project)\n            }\n        };\n    }\n    async updateDataSource(_root, args, ctx) {\n        const { properties } = args.data;\n        const { displayName, ...connectionInfo } = properties;\n        const project = await ctx.projectService.getCurrentProject();\n        const dataSourceType = project.type;\n        // only new connection info needed to encrypt\n        const toUpdateConnectionInfo = (0,_dataSource__WEBPACK_IMPORTED_MODULE_5__.encryptConnectionInfo)(dataSourceType, connectionInfo);\n        if (dataSourceType === _types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.DUCKDB) {\n            // prepare duckdb environment in wren-engine\n            const { initSql, extensions, configurations } = toUpdateConnectionInfo;\n            await this.buildDuckDbEnvironment(ctx, {\n                initSql,\n                extensions,\n                configurations\n            });\n        } else {\n            const updatedProject = {\n                ...project,\n                displayName,\n                connectionInfo: {\n                    ...project.connectionInfo,\n                    ...toUpdateConnectionInfo\n                }\n            };\n            await ctx.projectService.getProjectDataSourceTables(updatedProject);\n            logger.debug(`Data source tables fetched`);\n        }\n        const updatedProject = await ctx.projectRepository.updateOne(project.id, {\n            displayName,\n            connectionInfo: {\n                ...project.connectionInfo,\n                ...toUpdateConnectionInfo\n            }\n        });\n        return {\n            type: updatedProject.type,\n            properties: {\n                displayName: updatedProject.displayName,\n                ...ctx.projectService.getGeneralConnectionInfo(updatedProject)\n            }\n        };\n    }\n    async listDataSourceTables(_root, _arg, ctx) {\n        return await ctx.projectService.getProjectDataSourceTables();\n    }\n    async saveTables(_root, arg, ctx) {\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.CONNECTION_SAVE_TABLES;\n        // get current project\n        const project = await ctx.projectService.getCurrentProject();\n        try {\n            // delete existing models and columns\n            const { models, columns } = await this.overwriteModelsAndColumns(arg.data.tables, ctx, project);\n            // telemetry\n            ctx.telemetry.sendEvent(eventName, {\n                dataSourceType: project.type,\n                tablesCount: models.length,\n                columnsCount: columns.length\n            });\n            // async deploy to wren-engine and ai service\n            this.deploy(ctx);\n            return {\n                models: models,\n                columns\n            };\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                dataSourceType: project.type,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async autoGenerateRelation(_root, _arg, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        // get models and columns\n        const models = await ctx.modelRepository.findAllBy({\n            projectId: project.id\n        });\n        const modelIds = models.map((m)=>m.id);\n        const columns = await ctx.modelColumnRepository.findColumnsByModelIds(modelIds);\n        const constraints = await ctx.projectService.getProjectSuggestedConstraint(project);\n        // generate relation\n        const relations = [];\n        for (const constraint of constraints){\n            const { constraintTable, constraintColumn, constraintedTable, constraintedColumn } = constraint;\n            // validate tables and columns exists in our models and model columns\n            const fromModel = models.find((m)=>m.sourceTableName === constraintTable);\n            const toModel = models.find((m)=>m.sourceTableName === constraintedTable);\n            if (!fromModel || !toModel) {\n                continue;\n            }\n            const fromColumn = columns.find((c)=>c.modelId === fromModel.id && c.sourceColumnName === constraintColumn);\n            const toColumn = columns.find((c)=>c.modelId === toModel.id && c.sourceColumnName === constraintedColumn);\n            if (!fromColumn || !toColumn) {\n                continue;\n            }\n            // create relation\n            const relation = {\n                // upper case the first letter of the sourceTableName\n                name: constraint.constraintName,\n                fromModelId: fromModel.id,\n                fromModelReferenceName: fromModel.referenceName,\n                fromColumnId: fromColumn.id,\n                fromColumnReferenceName: fromColumn.referenceName,\n                toModelId: toModel.id,\n                toModelReferenceName: toModel.referenceName,\n                toColumnId: toColumn.id,\n                toColumnReferenceName: toColumn.referenceName,\n                // TODO: add join type\n                type: _types__WEBPACK_IMPORTED_MODULE_0__.RelationType.ONE_TO_MANY\n            };\n            relations.push(relation);\n        }\n        // group by model\n        return models.map(({ id, displayName, referenceName })=>({\n                id,\n                displayName,\n                referenceName,\n                relations: relations.filter((relation)=>relation.fromModelId === id && // exclude self-referential relationship\n                    relation.toModelId !== relation.fromModelId)\n            }));\n    }\n    async saveRelations(_root, arg, ctx) {\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.CONNECTION_SAVE_RELATION;\n        try {\n            const savedRelations = await ctx.modelService.saveRelations(arg.data.relations);\n            // async deploy\n            this.deploy(ctx);\n            ctx.telemetry.sendEvent(eventName, {\n                relationCount: savedRelations.length\n            });\n            return savedRelations;\n        } catch (err) {\n            ctx.telemetry.sendEvent(eventName, {\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async getSchemaChange(_root, _arg, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const lastSchemaChange = await ctx.schemaChangeRepository.findLastSchemaChange(project.id);\n        if (!lastSchemaChange) {\n            return {\n                deletedTables: null,\n                deletedColumns: null,\n                modifiedColumns: null,\n                lastSchemaChangeTime: null\n            };\n        }\n        const models = await ctx.modelRepository.findAllBy({\n            projectId: project.id\n        });\n        const modelIds = models.map((model)=>model.id);\n        const modelColumns = await ctx.modelColumnRepository.findColumnsByModelIds(modelIds);\n        const modelRelationships = await ctx.relationRepository.findRelationInfoBy({\n            modelIds\n        });\n        const schemaDetector = new _server_managers_dataSourceSchemaDetector__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n            ctx,\n            projectId: project.id\n        });\n        const resolves = lastSchemaChange.resolve;\n        const unresolvedChanges = Object.keys(resolves).reduce((result, key)=>{\n            const isResolved = resolves[key];\n            const changes = lastSchemaChange.change[key];\n            // return if resolved or no changes\n            if (isResolved || !changes) return result;\n            // Mapping with affected models and columns and affected calculated fields and relationships data into schema change\n            const affecteds = schemaDetector.getAffectedResources(changes, {\n                models,\n                modelColumns,\n                modelRelationships\n            });\n            const affectedChanges = affecteds.length ? affecteds : null;\n            return {\n                ...result,\n                [key]: affectedChanges\n            };\n        }, {});\n        return {\n            ...unresolvedChanges,\n            lastSchemaChangeTime: lastSchemaChange.createdAt\n        };\n    }\n    async triggerDataSourceDetection(_root, _arg, ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const schemaDetector = new _server_managers_dataSourceSchemaDetector__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n            ctx,\n            projectId: project.id\n        });\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.MODELING_DETECT_SCHEMA_CHANGE;\n        try {\n            const hasSchemaChange = await schemaDetector.detectSchemaChange();\n            ctx.telemetry.sendEvent(eventName, {\n                hasSchemaChange\n            });\n            return hasSchemaChange;\n        } catch (error) {\n            ctx.telemetry.sendEvent(eventName, {\n                error\n            }, error.extensions?.service, false);\n            throw error;\n        }\n    }\n    async resolveSchemaChange(_root, arg, ctx) {\n        const { type } = arg.where;\n        const project = await ctx.projectService.getCurrentProject();\n        const schemaDetector = new _server_managers_dataSourceSchemaDetector__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n            ctx,\n            projectId: project.id\n        });\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_6__.TelemetryEvent.MODELING_RESOLVE_SCHEMA_CHANGE;\n        try {\n            await schemaDetector.resolveSchemaChange(type);\n            ctx.telemetry.sendEvent(eventName, {\n                type\n            });\n        } catch (error) {\n            ctx.telemetry.sendEvent(eventName, {\n                type,\n                error\n            }, error.extensions?.service, false);\n            throw error;\n        }\n        return true;\n    }\n    async deploy(ctx) {\n        const project = await ctx.projectService.getCurrentProject();\n        const { manifest } = await ctx.mdlService.makeCurrentModelMDL();\n        const deployRes = await ctx.deployService.deploy(manifest, project.id);\n        // only generating for user's data source\n        if (project.sampleDataset === null) {\n            await ctx.projectService.generateProjectRecommendationQuestions();\n        }\n        return deployRes;\n    }\n    buildRelationInput(relations, models, columns) {\n        const relationInput = relations.map((relation)=>{\n            const { fromModelName, fromColumnName, toModelName, toColumnName, type } = relation;\n            const fromModelId = models.find((model)=>model.sourceTableName === fromModelName)?.id;\n            const toModelId = models.find((model)=>model.sourceTableName === toModelName)?.id;\n            if (!fromModelId || !toModelId) {\n                throw new Error(`Model not found, fromModelName \"${fromModelName}\" to toModelName: \"${toModelName}\"`);\n            }\n            const fromColumnId = columns.find((column)=>column.referenceName === fromColumnName && column.modelId === fromModelId)?.id;\n            const toColumnId = columns.find((column)=>column.referenceName === toColumnName && column.modelId === toModelId)?.id;\n            if (!fromColumnId || !toColumnId) {\n                throw new Error(`Column not found fromColumnName: ${fromColumnName} toColumnName: ${toColumnName}`);\n            }\n            return {\n                fromModelId,\n                fromColumnId,\n                toModelId,\n                toColumnId,\n                type,\n                description: relation.description\n            };\n        });\n        return relationInput;\n    }\n    async overwriteModelsAndColumns(tables, ctx, project) {\n        // delete existing models and columns\n        await ctx.modelService.deleteAllModelsByProjectId(project.id);\n        const compactTables = await ctx.projectService.getProjectDataSourceTables(project);\n        const selectedTables = compactTables.filter((table)=>tables.includes(table.name));\n        // create models\n        const modelValues = selectedTables.map((table)=>{\n            const properties = table?.properties;\n            // compactTable contain schema and catalog, these information are for building tableReference in mdl\n            const model = {\n                projectId: project.id,\n                displayName: table.name,\n                referenceName: (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.replaceInvalidReferenceName)(table.name),\n                sourceTableName: table.name,\n                cached: false,\n                refreshTime: null,\n                properties: properties ? JSON.stringify(properties) : null\n            };\n            return model;\n        });\n        const models = await ctx.modelRepository.createMany(modelValues);\n        // create columns\n        const columnValues = selectedTables.flatMap((table)=>{\n            const compactColumns = table.columns;\n            const primaryKey = table.primaryKey;\n            const model = models.find((m)=>m.sourceTableName === table.name);\n            return compactColumns.map((column)=>({\n                    modelId: model.id,\n                    isCalculated: false,\n                    displayName: column.name,\n                    referenceName: (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.transformInvalidColumnName)(column.name),\n                    sourceColumnName: column.name,\n                    type: column.type || \"string\",\n                    notNull: column.notNull || false,\n                    isPk: primaryKey === column.name,\n                    properties: column.properties ? JSON.stringify(column.properties) : null\n                }));\n        });\n        const columns = await ctx.modelColumnRepository.createMany(columnValues);\n        // create nested columns\n        const compactColumns = selectedTables.flatMap((table)=>table.columns);\n        const nestedColumnValues = compactColumns.flatMap((compactColumn)=>{\n            const column = columns.find((c)=>c.sourceColumnName === compactColumn.name);\n            return (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.handleNestedColumns)(compactColumn, {\n                modelId: column.modelId,\n                columnId: column.id,\n                sourceColumnName: column.sourceColumnName\n            });\n        });\n        await ctx.modelNestedColumnRepository.createMany(nestedColumnValues);\n        return {\n            models,\n            columns\n        };\n    }\n    concatInitSql(initSql, extensions) {\n        const installExtensions = extensions.map((ext)=>`INSTALL ${ext};`).join(\"\\n\");\n        return (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.trim)(`${installExtensions}\\n${initSql}`);\n    }\n    async buildDuckDbEnvironment(ctx, options) {\n        const { initSql, extensions, configurations } = options;\n        const initSqlWithExtensions = this.concatInitSql(initSql, extensions);\n        await ctx.wrenEngineAdaptor.prepareDuckDB({\n            sessionProps: configurations,\n            initSql: initSqlWithExtensions\n        });\n        // check can list dataset table\n        await ctx.wrenEngineAdaptor.listTables();\n        // patch wren-engine config\n        const config = {\n            \"wren.datasource.type\": \"duckdb\"\n        };\n        await ctx.wrenEngineAdaptor.patchConfig(config);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9yZXNvbHZlcnMvcHJvamVjdFJlc29sdmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTa0I7QUFPSztBQWFEO0FBQ2E7QUFLZ0I7QUFDRztBQUNFO0FBRXhELE1BQU1lLFNBQVNaLHdEQUFTQSxDQUFDO0FBQ3pCWSxPQUFPQyxLQUFLLEdBQUc7O1VBRUhDOzs7OztHQUFBQSx5QkFBQUE7QUFPTCxNQUFNQztJQUNYQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSSxDQUFDQSxXQUFXLENBQUNDLElBQUksQ0FBQyxJQUFJO1FBQzdDLElBQUksQ0FBQ0Msb0JBQW9CLEdBQUcsSUFBSSxDQUFDQSxvQkFBb0IsQ0FBQ0QsSUFBSSxDQUFDLElBQUk7UUFDL0QsSUFBSSxDQUFDRSxtQkFBbUIsR0FBRyxJQUFJLENBQUNBLG1CQUFtQixDQUFDRixJQUFJLENBQUMsSUFBSTtRQUM3RCxJQUFJLENBQUNHLGNBQWMsR0FBRyxJQUFJLENBQUNBLGNBQWMsQ0FBQ0gsSUFBSSxDQUFDLElBQUk7UUFDbkQsSUFBSSxDQUFDSSxnQkFBZ0IsR0FBRyxJQUFJLENBQUNBLGdCQUFnQixDQUFDSixJQUFJLENBQUMsSUFBSTtRQUN2RCxJQUFJLENBQUNLLG9CQUFvQixHQUFHLElBQUksQ0FBQ0Esb0JBQW9CLENBQUNMLElBQUksQ0FBQyxJQUFJO1FBQy9ELElBQUksQ0FBQ00sVUFBVSxHQUFHLElBQUksQ0FBQ0EsVUFBVSxDQUFDTixJQUFJLENBQUMsSUFBSTtRQUMzQyxJQUFJLENBQUNPLG9CQUFvQixHQUFHLElBQUksQ0FBQ0Esb0JBQW9CLENBQUNQLElBQUksQ0FBQyxJQUFJO1FBQy9ELElBQUksQ0FBQ1EsYUFBYSxHQUFHLElBQUksQ0FBQ0EsYUFBYSxDQUFDUixJQUFJLENBQUMsSUFBSTtRQUNqRCxJQUFJLENBQUNTLG1CQUFtQixHQUFHLElBQUksQ0FBQ0EsbUJBQW1CLENBQUNULElBQUksQ0FBQyxJ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TWhNLElBQUlpTSxpQkFBaUIsQ0FBQ0csVUFBVTtRQUV0QywyQkFBMkI7UUFDM0IsTUFBTTNMLFNBQVM7WUFDYix3QkFBd0I7UUFDMUI7UUFDQSxNQUFNVCxJQUFJaU0saUJBQWlCLENBQUNJLFdBQVcsQ0FBQzVMO0lBQzFDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvcmVzb2x2ZXJzL3Byb2plY3RSZXNvbHZlci50cz84NzNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFuYWx5c2lzUmVsYXRpb25JbmZvLFxuICBEYXRhU291cmNlLFxuICBEYXRhU291cmNlTmFtZSxcbiAgRGF0YVNvdXJjZVByb3BlcnRpZXMsXG4gIElDb250ZXh0LFxuICBSZWxhdGlvbkRhdGEsXG4gIFJlbGF0aW9uVHlwZSxcbiAgU2FtcGxlRGF0YXNldERhdGEsXG59IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7XG4gIHRyaW0sXG4gIGdldExvZ2dlcixcbiAgcmVwbGFjZUludmFsaWRSZWZlcmVuY2VOYW1lLFxuICB0cmFuc2Zvcm1JbnZhbGlkQ29sdW1uTmFtZSxcbiAgaGFuZGxlTmVzdGVkQ29sdW1ucyxcbn0gZnJvbSAnQHNlcnZlci91dGlscyc7XG5pbXBvcnQge1xuICBEVUNLREJfQ09OTkVDVElPTl9JTkZPLFxuICBNb2RlbCxcbiAgTW9kZWxDb2x1bW4sXG4gIFByb2plY3QsXG59IGZyb20gJy4uL3JlcG9zaXRvcmllcyc7XG5pbXBvcnQge1xuICBTYW1wbGVEYXRhc2V0TmFtZSxcbiAgU2FtcGxlRGF0YXNldFJlbGF0aW9uc2hpcCxcbiAgYnVpbGRJbml0U3FsLFxuICBnZXRSZWxhdGlvbnMsXG4gIHNhbXBsZURhdGFzZXRzLFxufSBmcm9tICdAc2VydmVyL2RhdGEnO1xuaW1wb3J0IHsgc25ha2VDYXNlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IENvbXBhY3RUYWJsZSwgUHJvamVjdERhdGEgfSBmcm9tICcuLi9zZXJ2aWNlcyc7XG5pbXBvcnQgeyBEdWNrREJQcmVwYXJlT3B0aW9ucyB9IGZyb20gJ0BzZXJ2ZXIvYWRhcHRvcnMvd3JlbkVuZ2luZUFkYXB0b3InO1xuaW1wb3J0IERhdGFTb3VyY2VTY2hlbWFEZXRlY3Rvciwge1xuICBTY2hlbWFDaGFuZ2VUeXBlLFxufSBmcm9tICdAc2VydmVyL21hbmFnZXJzL2RhdGFTb3VyY2VTY2hlbWFEZXRlY3Rvcic7XG5pbXBvcnQgeyBlbmNyeXB0Q29ubmVjdGlvbkluZm8gfSBmcm9tICcuLi9kYXRhU291cmNlJztcbmltcG9ydCB7IFRlbGVtZXRyeUV2ZW50IH0gZnJvbSAnLi4vdGVsZW1ldHJ5L3RlbGVtZXRyeSc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignRGF0YVNvdXJjZVJlc29sdmVyJyk7XG5sb2dnZXIubGV2ZWwgPSAnZGVidWcnO1xuXG5leHBvcnQgZW51bSBPbmJvYXJkaW5nU3RhdHVzRW51bSB7XG4gIE5PVF9TVEFSVEVEID0gJ05PVF9TVEFSVEVEJyxcbiAgREFUQVNPVVJDRV9TQVZFRCA9ICdEQVRBU09VUkNFX1NBVkVEJyxcbiAgT05CT0FSRElOR19GSU5JU0hFRCA9ICdPTkJPQVJESU5HX0ZJTklTSEVEJyxcbiAgV0lUSF9TQU1QTEVfREFUQVNFVCA9ICdXSVRIX1NBTVBMRV9EQVRBU0VUJyxcbn1cblxuZXhwb3J0IGNsYXNzIFByb2plY3RSZXNvbHZlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZ2V0U2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzLmJpbmQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVDdXJyZW50UHJvamVjdCA9IHRoaXMudXBkYXRlQ3VycmVudFByb2plY3QuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlc2V0Q3VycmVudFByb2plY3QgPSB0aGlzLnJlc2V0Q3VycmVudFByb2plY3QuYmluZCh0aGlzKTtcbiAgICB0aGlzLnNhdmVEYXRhU291cmNlID0gdGhpcy5zYXZlRGF0YVNvdXJjZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlRGF0YVNvdXJjZSA9IHRoaXMudXBkYXRlRGF0YVNvdXJjZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMubGlzdERhdGFTb3VyY2VUYWJsZXMgPSB0aGlzLmxpc3REYXRhU291cmNlVGFibGVzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zYXZlVGFibGVzID0gdGhpcy5zYXZlVGFibGVzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hdXRvR2VuZXJhdGVSZWxhdGlvbiA9IHRoaXMuYXV0b0dlbmVyYXRlUmVsYXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLnNhdmVSZWxhdGlvbnMgPSB0aGlzLnNhdmVSZWxhdGlvbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldE9uYm9hcmRpbmdTdGF0dXMgPSB0aGlzLmdldE9uYm9hcmRpbmdTdGF0dXMuYmluZCh0aGlzKTtcbiAgICB0aGlzLnN0YXJ0U2FtcGxlRGF0YXNldCA9IHRoaXMuc3RhcnRTYW1wbGVEYXRhc2V0LmJpbmQodGhpcyk7XG4gICAgdGhpcy50cmlnZ2VyRGF0YVNvdXJjZURldGVjdGlvbiA9XG4gICAgICB0aGlzLnRyaWdnZXJEYXRhU291cmNlRGV0ZWN0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5nZXRTY2hlbWFDaGFuZ2UgPSB0aGlzLmdldFNjaGVtYUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZ2V0UHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zID1cbiAgICAgIHRoaXMuZ2V0UHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zLmJpbmQodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0U2V0dGluZ3MoX3Jvb3Q6IGFueSwgX2FyZzogYW55LCBjdHg6IElDb250ZXh0KSB7XG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IGdlbmVyYWxDb25uZWN0aW9uSW5mbyA9XG4gICAgICBjdHgucHJvamVjdFNlcnZpY2UuZ2V0R2VuZXJhbENvbm5lY3Rpb25JbmZvKHByb2plY3QpO1xuICAgIGNvbnN0IGRhdGFTb3VyY2VUeXBlID0gcHJvamVjdC50eXBlO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2R1Y3RWZXJzaW9uOiBjdHguY29uZmlnLndyZW5Qcm9kdWN0VmVyc2lvbiB8fCAnJyxcbiAgICAgIGRhdGFTb3VyY2U6IHtcbiAgICAgICAgdHlwZTogZGF0YVNvdXJjZVR5cGUsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBkaXNwbGF5TmFtZTogcHJvamVjdC5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAuLi5nZW5lcmFsQ29ubmVjdGlvbkluZm8sXG4gICAgICAgIH0gYXMgRGF0YVNvdXJjZVByb3BlcnRpZXMsXG4gICAgICAgIHNhbXBsZURhdGFzZXQ6IHByb2plY3Quc2FtcGxlRGF0YXNldCxcbiAgICAgIH0sXG4gICAgICBsYW5ndWFnZTogcHJvamVjdC5sYW5ndWFnZSxcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyhcbiAgICBfcm9vdDogYW55LFxuICAgIF9hcmc6IGFueSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApIHtcbiAgICByZXR1cm4gY3R4LnByb2plY3RTZXJ2aWNlLmdldFByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucygpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHVwZGF0ZUN1cnJlbnRQcm9qZWN0KFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnOiB7IGRhdGE6IHsgbGFuZ3VhZ2U6IHN0cmluZyB9IH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKSB7XG4gICAgY29uc3QgeyBsYW5ndWFnZSB9ID0gYXJnLmRhdGE7XG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGF3YWl0IGN0eC5wcm9qZWN0UmVwb3NpdG9yeS51cGRhdGVPbmUocHJvamVjdC5pZCwge1xuICAgICAgbGFuZ3VhZ2UsXG4gICAgfSk7XG5cbiAgICAvLyBvbmx5IGdlbmVyYXRpbmcgZm9yIHVzZXIncyBkYXRhIHNvdXJjZVxuICAgIGlmIChwcm9qZWN0LnNhbXBsZURhdGFzZXQgPT09IG51bGwpIHtcbiAgICAgIGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZW5lcmF0ZVByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucygpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZXNldEN1cnJlbnRQcm9qZWN0KF9yb290OiBhbnksIF9hcmc6IGFueSwgY3R4OiBJQ29udGV4dCkge1xuICAgIGxldCBwcm9qZWN0O1xuICAgIHRyeSB7XG4gICAgICBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBubyBwcm9qZWN0IGZvdW5kXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgZXZlbnROYW1lID0gVGVsZW1ldHJ5RXZlbnQuU0VUVElOR19SRVNFVF9QUk9KRUNUO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpZCA9IHByb2plY3QuaWQ7XG4gICAgICBhd2FpdCBjdHguc2NoZW1hQ2hhbmdlUmVwb3NpdG9yeS5kZWxldGVBbGxCeSh7IHByb2plY3RJZDogaWQgfSk7XG4gICAgICBhd2FpdCBjdHguZGVwbG95U2VydmljZS5kZWxldGVBbGxCeVByb2plY3RJZChpZCk7XG4gICAgICBhd2FpdCBjdHguYXNraW5nU2VydmljZS5kZWxldGVBbGxCeVByb2plY3RJZChpZCk7XG4gICAgICBhd2FpdCBjdHgubW9kZWxTZXJ2aWNlLmRlbGV0ZUFsbFZpZXdzQnlQcm9qZWN0SWQoaWQpO1xuICAgICAgYXdhaXQgY3R4Lm1vZGVsU2VydmljZS5kZWxldGVBbGxNb2RlbHNCeVByb2plY3RJZChpZCk7XG4gICAgICBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZGVsZXRlUHJvamVjdChpZCk7XG5cbiAgICAgIC8vIHRlbGVtZXRyeVxuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7XG4gICAgICAgIHByb2plY3RJZDogaWQsXG4gICAgICAgIGRhdGFTb3VyY2VUeXBlOiBwcm9qZWN0LnR5cGUsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgeyBkYXRhU291cmNlVHlwZTogcHJvamVjdC50eXBlLCBlcnJvcjogZXJyLm1lc3NhZ2UgfSxcbiAgICAgICAgZXJyLmV4dGVuc2lvbnM/LnNlcnZpY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdGFydFNhbXBsZURhdGFzZXQoXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBfYXJnOiB7IGRhdGE6IFNhbXBsZURhdGFzZXREYXRhIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKSB7XG4gICAgY29uc3QgeyBuYW1lIH0gPSBfYXJnLmRhdGE7XG4gICAgY29uc3QgZGF0YXNldCA9IHNhbXBsZURhdGFzZXRzW3NuYWtlQ2FzZShuYW1lKV07XG4gICAgaWYgKCFkYXRhc2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NhbXBsZSBkYXRhc2V0IG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICBpZiAoIShuYW1lIGluIFNhbXBsZURhdGFzZXROYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNhbXBsZSBkYXRhc2V0IG5hbWUnKTtcbiAgICB9XG4gICAgY29uc3QgZXZlbnROYW1lID0gVGVsZW1ldHJ5RXZlbnQuQ09OTkVDVElPTl9TVEFSVF9TQU1QTEVfREFUQVNFVDtcbiAgICBjb25zdCBldmVudFByb3BlcnRpZXMgPSB7XG4gICAgICBkYXRhc2V0TmFtZTogbmFtZSxcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICAvLyBjcmVhdGUgZHVja2RiIGRhdGFzb3VyY2VcbiAgICAgIGNvbnN0IGluaXRTcWwgPSBidWlsZEluaXRTcWwobmFtZSBhcyBTYW1wbGVEYXRhc2V0TmFtZSk7XG4gICAgICBjb25zdCBkdWNrZGJEYXRhc291cmNlUHJvcGVydGllcyA9IHtcbiAgICAgICAgaW5pdFNxbCxcbiAgICAgICAgZXh0ZW5zaW9uczogW10sXG4gICAgICAgIGNvbmZpZ3VyYXRpb25zOiB7fSxcbiAgICAgIH07XG4gICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhU291cmNlKFxuICAgICAgICBfcm9vdCxcbiAgICAgICAge1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6IERhdGFTb3VyY2VOYW1lLkRVQ0tEQixcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGR1Y2tkYkRhdGFzb3VyY2VQcm9wZXJ0aWVzLFxuICAgICAgICAgIH0gYXMgRGF0YVNvdXJjZSxcbiAgICAgICAgfSxcbiAgICAgICAgY3R4LFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcblxuICAgICAgLy8gbGlzdCBhbGwgdGhlIHRhYmxlcyBpbiB0aGUgZGF0YSBzb3VyY2VcbiAgICAgIGNvbnN0IHRhYmxlcyA9IGF3YWl0IHRoaXMubGlzdERhdGFTb3VyY2VUYWJsZXMoX3Jvb3QsIF9hcmcsIGN0eCk7XG4gICAgICBjb25zdCB0YWJsZU5hbWVzID0gdGFibGVzLm1hcCgodGFibGUpID0+IHRhYmxlLm5hbWUpO1xuXG4gICAgICAvLyBzYXZlIHRhYmxlcyBhcyBtb2RlbCBhbmQgbW9kZWxDb2x1bW5zXG4gICAgICBhd2FpdCB0aGlzLm92ZXJ3cml0ZU1vZGVsc0FuZENvbHVtbnModGFibGVOYW1lcywgY3R4LCBwcm9qZWN0KTtcblxuICAgICAgYXdhaXQgY3R4Lm1vZGVsU2VydmljZS51cGRhdGVQcmltYXJ5S2V5cyhkYXRhc2V0LnRhYmxlcyk7XG4gICAgICBhd2FpdCBjdHgubW9kZWxTZXJ2aWNlLmJhdGNoVXBkYXRlTW9kZWxQcm9wZXJ0aWVzKGRhdGFzZXQudGFibGVzKTtcbiAgICAgIGF3YWl0IGN0eC5tb2RlbFNlcnZpY2UuYmF0Y2hVcGRhdGVDb2x1bW5Qcm9wZXJ0aWVzKGRhdGFzZXQudGFibGVzKTtcblxuICAgICAgLy8gc2F2ZSByZWxhdGlvbnNcbiAgICAgIGNvbnN0IHJlbGF0aW9ucyA9IGdldFJlbGF0aW9ucyhuYW1lIGFzIFNhbXBsZURhdGFzZXROYW1lKTtcbiAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IGN0eC5tb2RlbFJlcG9zaXRvcnkuZmluZEFsbCgpO1xuICAgICAgY29uc3QgY29sdW1ucyA9IGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZEFsbCgpO1xuICAgICAgY29uc3QgbWFwcGVkUmVsYXRpb25zID0gdGhpcy5idWlsZFJlbGF0aW9uSW5wdXQoXG4gICAgICAgIHJlbGF0aW9ucyxcbiAgICAgICAgbW9kZWxzLFxuICAgICAgICBjb2x1bW5zLFxuICAgICAgKTtcbiAgICAgIGF3YWl0IGN0eC5tb2RlbFNlcnZpY2Uuc2F2ZVJlbGF0aW9ucyhtYXBwZWRSZWxhdGlvbnMpO1xuXG4gICAgICAvLyBtYXJrIGN1cnJlbnQgcHJvamVjdCBhcyB1c2luZyBzYW1wbGUgZGF0YXNldFxuICAgICAgYXdhaXQgY3R4LnByb2plY3RSZXBvc2l0b3J5LnVwZGF0ZU9uZShwcm9qZWN0LmlkLCB7XG4gICAgICAgIHNhbXBsZURhdGFzZXQ6IG5hbWUsXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHRoaXMuZGVwbG95KGN0eCk7XG4gICAgICAvLyB0ZWxlbWV0cnlcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50TmFtZSwgZXZlbnRQcm9wZXJ0aWVzKTtcbiAgICAgIHJldHVybiB7IG5hbWUgfTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgeyAuLi5ldmVudFByb3BlcnRpZXMsIGVycm9yOiBlcnIubWVzc2FnZSB9LFxuICAgICAgICBlcnIuZXh0ZW5zaW9ucz8uc2VydmljZSxcbiAgICAgICAgZmFsc2UsXG4gICAgICApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRPbmJvYXJkaW5nU3RhdHVzKF9yb290OiBhbnksIF9hcmc6IGFueSwgY3R4OiBJQ29udGV4dCkge1xuICAgIGxldCBwcm9qZWN0OiBQcm9qZWN0IHwgbnVsbDtcbiAgICB0cnkge1xuICAgICAgcHJvamVjdCA9IGF3YWl0IGN0eC5wcm9qZWN0UmVwb3NpdG9yeS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIH0gY2F0Y2ggKF9lcnI6IGFueSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiBPbmJvYXJkaW5nU3RhdHVzRW51bS5OT1RfU1RBUlRFRCxcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHsgaWQsIHNhbXBsZURhdGFzZXQgfSA9IHByb2plY3Q7XG4gICAgaWYgKHNhbXBsZURhdGFzZXQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogT25ib2FyZGluZ1N0YXR1c0VudW0uV0lUSF9TQU1QTEVfREFUQVNFVCxcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IGN0eC5tb2RlbFJlcG9zaXRvcnkuZmluZEFsbEJ5KHsgcHJvamVjdElkOiBpZCB9KTtcbiAgICBpZiAoIW1vZGVscy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogT25ib2FyZGluZ1N0YXR1c0VudW0uREFUQVNPVVJDRV9TQVZFRCxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogT25ib2FyZGluZ1N0YXR1c0VudW0uT05CT0FSRElOR19GSU5JU0hFRCxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIHNhdmVEYXRhU291cmNlKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnczoge1xuICAgICAgZGF0YTogRGF0YVNvdXJjZTtcbiAgICB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IHsgdHlwZSwgcHJvcGVydGllcyB9ID0gYXJncy5kYXRhO1xuICAgIC8vIEN1cnJlbnRseSBvbmx5IGNhbiBjcmVhdGUgb25lIHByb2plY3RcbiAgICBhd2FpdCB0aGlzLnJlc2V0Q3VycmVudFByb2plY3QoX3Jvb3QsIGFyZ3MsIGN0eCk7XG5cbiAgICBjb25zdCB7IGRpc3BsYXlOYW1lLCAuLi5jb25uZWN0aW9uSW5mbyB9ID0gcHJvcGVydGllcztcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmNyZWF0ZVByb2plY3Qoe1xuICAgICAgZGlzcGxheU5hbWUsXG4gICAgICB0eXBlLFxuICAgICAgY29ubmVjdGlvbkluZm8sXG4gICAgfSBhcyBQcm9qZWN0RGF0YSk7XG4gICAgbG9nZ2VyLmRlYnVnKGBQcm9qZWN0IGNyZWF0ZWQuYCk7XG5cbiAgICAvLyBpbml0IGRhc2hib2FyZFxuICAgIGxvZ2dlci5kZWJ1ZygnRGFzaGJvYXJkIGluaXQuLi4nKTtcbiAgICBhd2FpdCBjdHguZGFzaGJvYXJkU2VydmljZS5pbml0RGFzaGJvYXJkKCk7XG4gICAgbG9nZ2VyLmRlYnVnKCdEYXNoYm9hcmQgY3JlYXRlZC4nKTtcblxuICAgIGNvbnN0IGV2ZW50TmFtZSA9IFRlbGVtZXRyeUV2ZW50LkNPTk5FQ1RJT05fU0FWRV9EQVRBX1NPVVJDRTtcbiAgICBjb25zdCBldmVudFByb3BlcnRpZXMgPSB7XG4gICAgICBkYXRhU291cmNlVHlwZTogdHlwZSxcbiAgICB9O1xuXG4gICAgLy8gdHJ5IHRvIGNvbm5lY3QgdG8gdGhlIGRhdGEgc291cmNlXG4gICAgdHJ5IHtcbiAgICAgIC8vIGhhbmRsZSBkdWNrZGIgY29ubmVjdGlvblxuICAgICAgaWYgKHR5cGUgPT09IERhdGFTb3VyY2VOYW1lLkRVQ0tEQikge1xuICAgICAgICBjb25uZWN0aW9uSW5mbyBhcyBEVUNLREJfQ09OTkVDVElPTl9JTkZPO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkRHVja0RiRW52aXJvbm1lbnQoY3R4LCB7XG4gICAgICAgICAgaW5pdFNxbDogY29ubmVjdGlvbkluZm8uaW5pdFNxbCxcbiAgICAgICAgICBleHRlbnNpb25zOiBjb25uZWN0aW9uSW5mby5leHRlbnNpb25zLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb25zOiBjb25uZWN0aW9uSW5mby5jb25maWd1cmF0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBoYW5kbGUgb3RoZXIgZGF0YSBzb3VyY2VcbiAgICAgICAgYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldFByb2plY3REYXRhU291cmNlVGFibGVzKHByb2plY3QpO1xuICAgICAgICBsb2dnZXIuZGVidWcoYERhdGEgc291cmNlIHRhYmxlcyBmZXRjaGVkYCk7XG4gICAgICB9XG4gICAgICAvLyB0ZWxlbWV0cnlcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50TmFtZSwgZXZlbnRQcm9wZXJ0aWVzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgJ0ZhaWxlZCB0byBnZXQgcHJvamVjdCB0YWJsZXMnLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShlcnIsIG51bGwsIDIpLFxuICAgICAgKTtcbiAgICAgIGF3YWl0IGN0eC5wcm9qZWN0UmVwb3NpdG9yeS5kZWxldGVPbmUocHJvamVjdC5pZCk7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICB7IGV2ZW50UHJvcGVydGllcywgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHByb2plY3QudHlwZSxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6IHByb2plY3QuZGlzcGxheU5hbWUsXG4gICAgICAgIC4uLmN0eC5wcm9qZWN0U2VydmljZS5nZXRHZW5lcmFsQ29ubmVjdGlvbkluZm8ocHJvamVjdCksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBkYXRlRGF0YVNvdXJjZShcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZ3M6IHsgZGF0YTogRGF0YVNvdXJjZSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IHsgcHJvcGVydGllcyB9ID0gYXJncy5kYXRhO1xuICAgIGNvbnN0IHsgZGlzcGxheU5hbWUsIC4uLmNvbm5lY3Rpb25JbmZvIH0gPSBwcm9wZXJ0aWVzO1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCBkYXRhU291cmNlVHlwZSA9IHByb2plY3QudHlwZTtcblxuICAgIC8vIG9ubHkgbmV3IGNvbm5lY3Rpb24gaW5mbyBuZWVkZWQgdG8gZW5jcnlwdFxuICAgIGNvbnN0IHRvVXBkYXRlQ29ubmVjdGlvbkluZm8gPSBlbmNyeXB0Q29ubmVjdGlvbkluZm8oXG4gICAgICBkYXRhU291cmNlVHlwZSxcbiAgICAgIGNvbm5lY3Rpb25JbmZvIGFzIGFueSxcbiAgICApO1xuXG4gICAgaWYgKGRhdGFTb3VyY2VUeXBlID09PSBEYXRhU291cmNlTmFtZS5EVUNLREIpIHtcbiAgICAgIC8vIHByZXBhcmUgZHVja2RiIGVudmlyb25tZW50IGluIHdyZW4tZW5naW5lXG4gICAgICBjb25zdCB7IGluaXRTcWwsIGV4dGVuc2lvbnMsIGNvbmZpZ3VyYXRpb25zIH0gPVxuICAgICAgICB0b1VwZGF0ZUNvbm5lY3Rpb25JbmZvIGFzIERVQ0tEQl9DT05ORUNUSU9OX0lORk87XG4gICAgICBhd2FpdCB0aGlzLmJ1aWxkRHVja0RiRW52aXJvbm1lbnQoY3R4LCB7XG4gICAgICAgIGluaXRTcWwsXG4gICAgICAgIGV4dGVuc2lvbnMsXG4gICAgICAgIGNvbmZpZ3VyYXRpb25zLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9qZWN0ID0ge1xuICAgICAgICAuLi5wcm9qZWN0LFxuICAgICAgICBkaXNwbGF5TmFtZSxcbiAgICAgICAgY29ubmVjdGlvbkluZm86IHtcbiAgICAgICAgICAuLi5wcm9qZWN0LmNvbm5lY3Rpb25JbmZvLFxuICAgICAgICAgIC4uLnRvVXBkYXRlQ29ubmVjdGlvbkluZm8sXG4gICAgICAgIH0sXG4gICAgICB9IGFzIFByb2plY3Q7XG5cbiAgICAgIGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRQcm9qZWN0RGF0YVNvdXJjZVRhYmxlcyh1cGRhdGVkUHJvamVjdCk7XG4gICAgICBsb2dnZXIuZGVidWcoYERhdGEgc291cmNlIHRhYmxlcyBmZXRjaGVkYCk7XG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZWRQcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RSZXBvc2l0b3J5LnVwZGF0ZU9uZShwcm9qZWN0LmlkLCB7XG4gICAgICBkaXNwbGF5TmFtZSxcbiAgICAgIGNvbm5lY3Rpb25JbmZvOiB7IC4uLnByb2plY3QuY29ubmVjdGlvbkluZm8sIC4uLnRvVXBkYXRlQ29ubmVjdGlvbkluZm8gfSxcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogdXBkYXRlZFByb2plY3QudHlwZSxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6IHVwZGF0ZWRQcm9qZWN0LmRpc3BsYXlOYW1lLFxuICAgICAgICAuLi5jdHgucHJvamVjdFNlcnZpY2UuZ2V0R2VuZXJhbENvbm5lY3Rpb25JbmZvKHVwZGF0ZWRQcm9qZWN0KSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBsaXN0RGF0YVNvdXJjZVRhYmxlcyhfcm9vdDogYW55LCBfYXJnLCBjdHg6IElDb250ZXh0KSB7XG4gICAgcmV0dXJuIGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRQcm9qZWN0RGF0YVNvdXJjZVRhYmxlcygpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHNhdmVUYWJsZXMoXG4gICAgX3Jvb3Q6IGFueSxcbiAgICBhcmc6IHtcbiAgICAgIGRhdGE6IHsgdGFibGVzOiBzdHJpbmdbXSB9O1xuICAgIH0sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgKSB7XG4gICAgY29uc3QgZXZlbnROYW1lID0gVGVsZW1ldHJ5RXZlbnQuQ09OTkVDVElPTl9TQVZFX1RBQkxFUztcblxuICAgIC8vIGdldCBjdXJyZW50IHByb2plY3RcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGRlbGV0ZSBleGlzdGluZyBtb2RlbHMgYW5kIGNvbHVtbnNcbiAgICAgIGNvbnN0IHsgbW9kZWxzLCBjb2x1bW5zIH0gPSBhd2FpdCB0aGlzLm92ZXJ3cml0ZU1vZGVsc0FuZENvbHVtbnMoXG4gICAgICAgIGFyZy5kYXRhLnRhYmxlcyxcbiAgICAgICAgY3R4LFxuICAgICAgICBwcm9qZWN0LFxuICAgICAgKTtcbiAgICAgIC8vIHRlbGVtZXRyeVxuICAgICAgY3R4LnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7XG4gICAgICAgIGRhdGFTb3VyY2VUeXBlOiBwcm9qZWN0LnR5cGUsXG4gICAgICAgIHRhYmxlc0NvdW50OiBtb2RlbHMubGVuZ3RoLFxuICAgICAgICBjb2x1bW5zQ291bnQ6IGNvbHVtbnMubGVuZ3RoLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIGFzeW5jIGRlcGxveSB0byB3cmVuLWVuZ2luZSBhbmQgYWkgc2VydmljZVxuICAgICAgdGhpcy5kZXBsb3koY3R4KTtcbiAgICAgIHJldHVybiB7IG1vZGVsczogbW9kZWxzLCBjb2x1bW5zIH07XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHsgZGF0YVNvdXJjZVR5cGU6IHByb2plY3QudHlwZSwgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGF1dG9HZW5lcmF0ZVJlbGF0aW9uKF9yb290OiBhbnksIF9hcmc6IGFueSwgY3R4OiBJQ29udGV4dCkge1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcblxuICAgIC8vIGdldCBtb2RlbHMgYW5kIGNvbHVtbnNcbiAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCBjdHgubW9kZWxSZXBvc2l0b3J5LmZpbmRBbGxCeSh7XG4gICAgICBwcm9qZWN0SWQ6IHByb2plY3QuaWQsXG4gICAgfSk7XG4gICAgY29uc3QgbW9kZWxJZHMgPSBtb2RlbHMubWFwKChtKSA9PiBtLmlkKTtcbiAgICBjb25zdCBjb2x1bW5zID1cbiAgICAgIGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeU1vZGVsSWRzKG1vZGVsSWRzKTtcbiAgICBjb25zdCBjb25zdHJhaW50cyA9XG4gICAgICBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0UHJvamVjdFN1Z2dlc3RlZENvbnN0cmFpbnQocHJvamVjdCk7XG5cbiAgICAvLyBnZW5lcmF0ZSByZWxhdGlvblxuICAgIGNvbnN0IHJlbGF0aW9ucyA9IFtdO1xuICAgIGZvciAoY29uc3QgY29uc3RyYWludCBvZiBjb25zdHJhaW50cykge1xuICAgICAgY29uc3Qge1xuICAgICAgICBjb25zdHJhaW50VGFibGUsXG4gICAgICAgIGNvbnN0cmFpbnRDb2x1bW4sXG4gICAgICAgIGNvbnN0cmFpbnRlZFRhYmxlLFxuICAgICAgICBjb25zdHJhaW50ZWRDb2x1bW4sXG4gICAgICB9ID0gY29uc3RyYWludDtcbiAgICAgIC8vIHZhbGlkYXRlIHRhYmxlcyBhbmQgY29sdW1ucyBleGlzdHMgaW4gb3VyIG1vZGVscyBhbmQgbW9kZWwgY29sdW1uc1xuICAgICAgY29uc3QgZnJvbU1vZGVsID0gbW9kZWxzLmZpbmQoXG4gICAgICAgIChtKSA9PiBtLnNvdXJjZVRhYmxlTmFtZSA9PT0gY29uc3RyYWludFRhYmxlLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRvTW9kZWwgPSBtb2RlbHMuZmluZChcbiAgICAgICAgKG0pID0+IG0uc291cmNlVGFibGVOYW1lID09PSBjb25zdHJhaW50ZWRUYWJsZSxcbiAgICAgICk7XG4gICAgICBpZiAoIWZyb21Nb2RlbCB8fCAhdG9Nb2RlbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZyb21Db2x1bW4gPSBjb2x1bW5zLmZpbmQoXG4gICAgICAgIChjKSA9PlxuICAgICAgICAgIGMubW9kZWxJZCA9PT0gZnJvbU1vZGVsLmlkICYmIGMuc291cmNlQ29sdW1uTmFtZSA9PT0gY29uc3RyYWludENvbHVtbixcbiAgICAgICk7XG4gICAgICBjb25zdCB0b0NvbHVtbiA9IGNvbHVtbnMuZmluZChcbiAgICAgICAgKGMpID0+XG4gICAgICAgICAgYy5tb2RlbElkID09PSB0b01vZGVsLmlkICYmIGMuc291cmNlQ29sdW1uTmFtZSA9PT0gY29uc3RyYWludGVkQ29sdW1uLFxuICAgICAgKTtcbiAgICAgIGlmICghZnJvbUNvbHVtbiB8fCAhdG9Db2x1bW4pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyBjcmVhdGUgcmVsYXRpb25cbiAgICAgIGNvbnN0IHJlbGF0aW9uOiBBbmFseXNpc1JlbGF0aW9uSW5mbyA9IHtcbiAgICAgICAgLy8gdXBwZXIgY2FzZSB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSBzb3VyY2VUYWJsZU5hbWVcbiAgICAgICAgbmFtZTogY29uc3RyYWludC5jb25zdHJhaW50TmFtZSxcbiAgICAgICAgZnJvbU1vZGVsSWQ6IGZyb21Nb2RlbC5pZCxcbiAgICAgICAgZnJvbU1vZGVsUmVmZXJlbmNlTmFtZTogZnJvbU1vZGVsLnJlZmVyZW5jZU5hbWUsXG4gICAgICAgIGZyb21Db2x1bW5JZDogZnJvbUNvbHVtbi5pZCxcbiAgICAgICAgZnJvbUNvbHVtblJlZmVyZW5jZU5hbWU6IGZyb21Db2x1bW4ucmVmZXJlbmNlTmFtZSxcbiAgICAgICAgdG9Nb2RlbElkOiB0b01vZGVsLmlkLFxuICAgICAgICB0b01vZGVsUmVmZXJlbmNlTmFtZTogdG9Nb2RlbC5yZWZlcmVuY2VOYW1lLFxuICAgICAgICB0b0NvbHVtbklkOiB0b0NvbHVtbi5pZCxcbiAgICAgICAgdG9Db2x1bW5SZWZlcmVuY2VOYW1lOiB0b0NvbHVtbi5yZWZlcmVuY2VOYW1lLFxuICAgICAgICAvLyBUT0RPOiBhZGQgam9pbiB0eXBlXG4gICAgICAgIHR5cGU6IFJlbGF0aW9uVHlwZS5PTkVfVE9fTUFOWSxcbiAgICAgIH07XG4gICAgICByZWxhdGlvbnMucHVzaChyZWxhdGlvbik7XG4gICAgfVxuICAgIC8vIGdyb3VwIGJ5IG1vZGVsXG4gICAgcmV0dXJuIG1vZGVscy5tYXAoKHsgaWQsIGRpc3BsYXlOYW1lLCByZWZlcmVuY2VOYW1lIH0pID0+ICh7XG4gICAgICBpZCxcbiAgICAgIGRpc3BsYXlOYW1lLFxuICAgICAgcmVmZXJlbmNlTmFtZSxcbiAgICAgIHJlbGF0aW9uczogcmVsYXRpb25zLmZpbHRlcihcbiAgICAgICAgKHJlbGF0aW9uKSA9PlxuICAgICAgICAgIHJlbGF0aW9uLmZyb21Nb2RlbElkID09PSBpZCAmJlxuICAgICAgICAgIC8vIGV4Y2x1ZGUgc2VsZi1yZWZlcmVudGlhbCByZWxhdGlvbnNoaXBcbiAgICAgICAgICByZWxhdGlvbi50b01vZGVsSWQgIT09IHJlbGF0aW9uLmZyb21Nb2RlbElkLFxuICAgICAgKSxcbiAgICB9KSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2F2ZVJlbGF0aW9ucyhcbiAgICBfcm9vdDogYW55LFxuICAgIGFyZzogeyBkYXRhOiB7IHJlbGF0aW9uczogUmVsYXRpb25EYXRhW10gfSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IGV2ZW50TmFtZSA9IFRlbGVtZXRyeUV2ZW50LkNPTk5FQ1RJT05fU0FWRV9SRUxBVElPTjtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2F2ZWRSZWxhdGlvbnMgPSBhd2FpdCBjdHgubW9kZWxTZXJ2aWNlLnNhdmVSZWxhdGlvbnMoXG4gICAgICAgIGFyZy5kYXRhLnJlbGF0aW9ucyxcbiAgICAgICk7XG4gICAgICAvLyBhc3luYyBkZXBsb3lcbiAgICAgIHRoaXMuZGVwbG95KGN0eCk7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChldmVudE5hbWUsIHtcbiAgICAgICAgcmVsYXRpb25Db3VudDogc2F2ZWRSZWxhdGlvbnMubGVuZ3RoLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gc2F2ZWRSZWxhdGlvbnM7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHsgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFNjaGVtYUNoYW5nZShfcm9vdDogYW55LCBfYXJnOiBhbnksIGN0eDogSUNvbnRleHQpIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgbGFzdFNjaGVtYUNoYW5nZSA9XG4gICAgICBhd2FpdCBjdHguc2NoZW1hQ2hhbmdlUmVwb3NpdG9yeS5maW5kTGFzdFNjaGVtYUNoYW5nZShwcm9qZWN0LmlkKTtcblxuICAgIGlmICghbGFzdFNjaGVtYUNoYW5nZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGVsZXRlZFRhYmxlczogbnVsbCxcbiAgICAgICAgZGVsZXRlZENvbHVtbnM6IG51bGwsXG4gICAgICAgIG1vZGlmaWVkQ29sdW1uczogbnVsbCxcbiAgICAgICAgbGFzdFNjaGVtYUNoYW5nZVRpbWU6IG51bGwsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IGN0eC5tb2RlbFJlcG9zaXRvcnkuZmluZEFsbEJ5KHtcbiAgICAgIHByb2plY3RJZDogcHJvamVjdC5pZCxcbiAgICB9KTtcbiAgICBjb25zdCBtb2RlbElkcyA9IG1vZGVscy5tYXAoKG1vZGVsKSA9PiBtb2RlbC5pZCk7XG4gICAgY29uc3QgbW9kZWxDb2x1bW5zID1cbiAgICAgIGF3YWl0IGN0eC5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeU1vZGVsSWRzKG1vZGVsSWRzKTtcblxuICAgIGNvbnN0IG1vZGVsUmVsYXRpb25zaGlwcyA9IGF3YWl0IGN0eC5yZWxhdGlvblJlcG9zaXRvcnkuZmluZFJlbGF0aW9uSW5mb0J5KHtcbiAgICAgIG1vZGVsSWRzLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc2NoZW1hRGV0ZWN0b3IgPSBuZXcgRGF0YVNvdXJjZVNjaGVtYURldGVjdG9yKHtcbiAgICAgIGN0eCxcbiAgICAgIHByb2plY3RJZDogcHJvamVjdC5pZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc29sdmVzID0gbGFzdFNjaGVtYUNoYW5nZS5yZXNvbHZlO1xuICAgIGNvbnN0IHVucmVzb2x2ZWRDaGFuZ2VzID0gT2JqZWN0LmtleXMocmVzb2x2ZXMpLnJlZHVjZSgocmVzdWx0LCBrZXkpID0+IHtcbiAgICAgIGNvbnN0IGlzUmVzb2x2ZWQgPSByZXNvbHZlc1trZXldO1xuICAgICAgY29uc3QgY2hhbmdlcyA9IGxhc3RTY2hlbWFDaGFuZ2UuY2hhbmdlW2tleV07XG4gICAgICAvLyByZXR1cm4gaWYgcmVzb2x2ZWQgb3Igbm8gY2hhbmdlc1xuICAgICAgaWYgKGlzUmVzb2x2ZWQgfHwgIWNoYW5nZXMpIHJldHVybiByZXN1bHQ7XG5cbiAgICAgIC8vIE1hcHBpbmcgd2l0aCBhZmZlY3RlZCBtb2RlbHMgYW5kIGNvbHVtbnMgYW5kIGFmZmVjdGVkIGNhbGN1bGF0ZWQgZmllbGRzIGFuZCByZWxhdGlvbnNoaXBzIGRhdGEgaW50byBzY2hlbWEgY2hhbmdlXG4gICAgICBjb25zdCBhZmZlY3RlZHMgPSBzY2hlbWFEZXRlY3Rvci5nZXRBZmZlY3RlZFJlc291cmNlcyhjaGFuZ2VzLCB7XG4gICAgICAgIG1vZGVscyxcbiAgICAgICAgbW9kZWxDb2x1bW5zLFxuICAgICAgICBtb2RlbFJlbGF0aW9uc2hpcHMsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYWZmZWN0ZWRDaGFuZ2VzID0gYWZmZWN0ZWRzLmxlbmd0aCA/IGFmZmVjdGVkcyA6IG51bGw7XG4gICAgICByZXR1cm4geyAuLi5yZXN1bHQsIFtrZXldOiBhZmZlY3RlZENoYW5nZXMgfTtcbiAgICB9LCB7fSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4udW5yZXNvbHZlZENoYW5nZXMsXG4gICAgICBsYXN0U2NoZW1hQ2hhbmdlVGltZTogbGFzdFNjaGVtYUNoYW5nZS5jcmVhdGVkQXQsXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB0cmlnZ2VyRGF0YVNvdXJjZURldGVjdGlvbihcbiAgICBfcm9vdDogYW55LFxuICAgIF9hcmc6IGFueSxcbiAgICBjdHg6IElDb250ZXh0LFxuICApIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3Qgc2NoZW1hRGV0ZWN0b3IgPSBuZXcgRGF0YVNvdXJjZVNjaGVtYURldGVjdG9yKHtcbiAgICAgIGN0eCxcbiAgICAgIHByb2plY3RJZDogcHJvamVjdC5pZCxcbiAgICB9KTtcbiAgICBjb25zdCBldmVudE5hbWUgPSBUZWxlbWV0cnlFdmVudC5NT0RFTElOR19ERVRFQ1RfU0NIRU1BX0NIQU5HRTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaGFzU2NoZW1hQ2hhbmdlID0gYXdhaXQgc2NoZW1hRGV0ZWN0b3IuZGV0ZWN0U2NoZW1hQ2hhbmdlKCk7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChldmVudE5hbWUsIHsgaGFzU2NoZW1hQ2hhbmdlIH0pO1xuICAgICAgcmV0dXJuIGhhc1NjaGVtYUNoYW5nZTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICB7IGVycm9yIH0sXG4gICAgICAgIGVycm9yLmV4dGVuc2lvbnM/LnNlcnZpY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZXNvbHZlU2NoZW1hQ2hhbmdlKFxuICAgIF9yb290OiBhbnksXG4gICAgYXJnOiB7IHdoZXJlOiB7IHR5cGU6IFNjaGVtYUNoYW5nZVR5cGUgfSB9LFxuICAgIGN0eDogSUNvbnRleHQsXG4gICkge1xuICAgIGNvbnN0IHsgdHlwZSB9ID0gYXJnLndoZXJlO1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCBzY2hlbWFEZXRlY3RvciA9IG5ldyBEYXRhU291cmNlU2NoZW1hRGV0ZWN0b3Ioe1xuICAgICAgY3R4LFxuICAgICAgcHJvamVjdElkOiBwcm9qZWN0LmlkLFxuICAgIH0pO1xuICAgIGNvbnN0IGV2ZW50TmFtZSA9IFRlbGVtZXRyeUV2ZW50Lk1PREVMSU5HX1JFU09MVkVfU0NIRU1BX0NIQU5HRTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2NoZW1hRGV0ZWN0b3IucmVzb2x2ZVNjaGVtYUNoYW5nZSh0eXBlKTtcbiAgICAgIGN0eC50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50TmFtZSwgeyB0eXBlIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjdHgudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICB7IHR5cGUsIGVycm9yIH0sXG4gICAgICAgIGVycm9yLmV4dGVuc2lvbnM/LnNlcnZpY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVwbG95KGN0eDogSUNvbnRleHQpIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgeyBtYW5pZmVzdCB9ID0gYXdhaXQgY3R4Lm1kbFNlcnZpY2UubWFrZUN1cnJlbnRNb2RlbE1ETCgpO1xuICAgIGNvbnN0IGRlcGxveVJlcyA9IGF3YWl0IGN0eC5kZXBsb3lTZXJ2aWNlLmRlcGxveShtYW5pZmVzdCwgcHJvamVjdC5pZCk7XG5cbiAgICAvLyBvbmx5IGdlbmVyYXRpbmcgZm9yIHVzZXIncyBkYXRhIHNvdXJjZVxuICAgIGlmIChwcm9qZWN0LnNhbXBsZURhdGFzZXQgPT09IG51bGwpIHtcbiAgICAgIGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZW5lcmF0ZVByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucygpO1xuICAgIH1cbiAgICByZXR1cm4gZGVwbG95UmVzO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFJlbGF0aW9uSW5wdXQoXG4gICAgcmVsYXRpb25zOiBTYW1wbGVEYXRhc2V0UmVsYXRpb25zaGlwW10sXG4gICAgbW9kZWxzOiBNb2RlbFtdLFxuICAgIGNvbHVtbnM6IE1vZGVsQ29sdW1uW10sXG4gICkge1xuICAgIGNvbnN0IHJlbGF0aW9uSW5wdXQgPSByZWxhdGlvbnMubWFwKChyZWxhdGlvbikgPT4ge1xuICAgICAgY29uc3QgeyBmcm9tTW9kZWxOYW1lLCBmcm9tQ29sdW1uTmFtZSwgdG9Nb2RlbE5hbWUsIHRvQ29sdW1uTmFtZSwgdHlwZSB9ID1cbiAgICAgICAgcmVsYXRpb247XG4gICAgICBjb25zdCBmcm9tTW9kZWxJZCA9IG1vZGVscy5maW5kKFxuICAgICAgICAobW9kZWwpID0+IG1vZGVsLnNvdXJjZVRhYmxlTmFtZSA9PT0gZnJvbU1vZGVsTmFtZSxcbiAgICAgICk/LmlkO1xuICAgICAgY29uc3QgdG9Nb2RlbElkID0gbW9kZWxzLmZpbmQoXG4gICAgICAgIChtb2RlbCkgPT4gbW9kZWwuc291cmNlVGFibGVOYW1lID09PSB0b01vZGVsTmFtZSxcbiAgICAgICk/LmlkO1xuICAgICAgaWYgKCFmcm9tTW9kZWxJZCB8fCAhdG9Nb2RlbElkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgTW9kZWwgbm90IGZvdW5kLCBmcm9tTW9kZWxOYW1lIFwiJHtmcm9tTW9kZWxOYW1lfVwiIHRvIHRvTW9kZWxOYW1lOiBcIiR7dG9Nb2RlbE5hbWV9XCJgLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmcm9tQ29sdW1uSWQgPSBjb2x1bW5zLmZpbmQoXG4gICAgICAgIChjb2x1bW4pID0+XG4gICAgICAgICAgY29sdW1uLnJlZmVyZW5jZU5hbWUgPT09IGZyb21Db2x1bW5OYW1lICYmXG4gICAgICAgICAgY29sdW1uLm1vZGVsSWQgPT09IGZyb21Nb2RlbElkLFxuICAgICAgKT8uaWQ7XG4gICAgICBjb25zdCB0b0NvbHVtbklkID0gY29sdW1ucy5maW5kKFxuICAgICAgICAoY29sdW1uKSA9PlxuICAgICAgICAgIGNvbHVtbi5yZWZlcmVuY2VOYW1lID09PSB0b0NvbHVtbk5hbWUgJiYgY29sdW1uLm1vZGVsSWQgPT09IHRvTW9kZWxJZCxcbiAgICAgICk/LmlkO1xuICAgICAgaWYgKCFmcm9tQ29sdW1uSWQgfHwgIXRvQ29sdW1uSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDb2x1bW4gbm90IGZvdW5kIGZyb21Db2x1bW5OYW1lOiAke2Zyb21Db2x1bW5OYW1lfSB0b0NvbHVtbk5hbWU6ICR7dG9Db2x1bW5OYW1lfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBmcm9tTW9kZWxJZCxcbiAgICAgICAgZnJvbUNvbHVtbklkLFxuICAgICAgICB0b01vZGVsSWQsXG4gICAgICAgIHRvQ29sdW1uSWQsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiByZWxhdGlvbi5kZXNjcmlwdGlvbixcbiAgICAgIH0gYXMgUmVsYXRpb25EYXRhO1xuICAgIH0pO1xuICAgIHJldHVybiByZWxhdGlvbklucHV0O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBvdmVyd3JpdGVNb2RlbHNBbmRDb2x1bW5zKFxuICAgIHRhYmxlczogc3RyaW5nW10sXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgICBwcm9qZWN0OiBQcm9qZWN0LFxuICApIHtcbiAgICAvLyBkZWxldGUgZXhpc3RpbmcgbW9kZWxzIGFuZCBjb2x1bW5zXG4gICAgYXdhaXQgY3R4Lm1vZGVsU2VydmljZS5kZWxldGVBbGxNb2RlbHNCeVByb2plY3RJZChwcm9qZWN0LmlkKTtcblxuICAgIGNvbnN0IGNvbXBhY3RUYWJsZXM6IENvbXBhY3RUYWJsZVtdID1cbiAgICAgIGF3YWl0IGN0eC5wcm9qZWN0U2VydmljZS5nZXRQcm9qZWN0RGF0YVNvdXJjZVRhYmxlcyhwcm9qZWN0KTtcblxuICAgIGNvbnN0IHNlbGVjdGVkVGFibGVzID0gY29tcGFjdFRhYmxlcy5maWx0ZXIoKHRhYmxlKSA9PlxuICAgICAgdGFibGVzLmluY2x1ZGVzKHRhYmxlLm5hbWUpLFxuICAgICk7XG5cbiAgICAvLyBjcmVhdGUgbW9kZWxzXG4gICAgY29uc3QgbW9kZWxWYWx1ZXMgPSBzZWxlY3RlZFRhYmxlcy5tYXAoKHRhYmxlKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gdGFibGU/LnByb3BlcnRpZXM7XG4gICAgICAvLyBjb21wYWN0VGFibGUgY29udGFpbiBzY2hlbWEgYW5kIGNhdGFsb2csIHRoZXNlIGluZm9ybWF0aW9uIGFyZSBmb3IgYnVpbGRpbmcgdGFibGVSZWZlcmVuY2UgaW4gbWRsXG4gICAgICBjb25zdCBtb2RlbCA9IHtcbiAgICAgICAgcHJvamVjdElkOiBwcm9qZWN0LmlkLFxuICAgICAgICBkaXNwbGF5TmFtZTogdGFibGUubmFtZSwgLy8gdXNlIHRhYmxlIG5hbWUgYXMgZGlzcGxheU5hbWUsIHJlZmVyZW5jZU5hbWUgYW5kIHRhYmxlTmFtZVxuICAgICAgICByZWZlcmVuY2VOYW1lOiByZXBsYWNlSW52YWxpZFJlZmVyZW5jZU5hbWUodGFibGUubmFtZSksXG4gICAgICAgIHNvdXJjZVRhYmxlTmFtZTogdGFibGUubmFtZSxcbiAgICAgICAgY2FjaGVkOiBmYWxzZSxcbiAgICAgICAgcmVmcmVzaFRpbWU6IG51bGwsXG4gICAgICAgIHByb3BlcnRpZXM6IHByb3BlcnRpZXMgPyBKU09OLnN0cmluZ2lmeShwcm9wZXJ0aWVzKSA6IG51bGwsXG4gICAgICB9IGFzIFBhcnRpYWw8TW9kZWw+O1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0pO1xuICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IGN0eC5tb2RlbFJlcG9zaXRvcnkuY3JlYXRlTWFueShtb2RlbFZhbHVlcyk7XG5cbiAgICAvLyBjcmVhdGUgY29sdW1uc1xuICAgIGNvbnN0IGNvbHVtblZhbHVlcyA9IHNlbGVjdGVkVGFibGVzLmZsYXRNYXAoKHRhYmxlKSA9PiB7XG4gICAgICBjb25zdCBjb21wYWN0Q29sdW1ucyA9IHRhYmxlLmNvbHVtbnM7XG4gICAgICBjb25zdCBwcmltYXJ5S2V5ID0gdGFibGUucHJpbWFyeUtleTtcbiAgICAgIGNvbnN0IG1vZGVsID0gbW9kZWxzLmZpbmQoKG0pID0+IG0uc291cmNlVGFibGVOYW1lID09PSB0YWJsZS5uYW1lKTtcbiAgICAgIHJldHVybiBjb21wYWN0Q29sdW1ucy5tYXAoXG4gICAgICAgIChjb2x1bW4pID0+XG4gICAgICAgICAgKHtcbiAgICAgICAgICAgIG1vZGVsSWQ6IG1vZGVsLmlkLFxuICAgICAgICAgICAgaXNDYWxjdWxhdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBjb2x1bW4ubmFtZSxcbiAgICAgICAgICAgIHJlZmVyZW5jZU5hbWU6IHRyYW5zZm9ybUludmFsaWRDb2x1bW5OYW1lKGNvbHVtbi5uYW1lKSxcbiAgICAgICAgICAgIHNvdXJjZUNvbHVtbk5hbWU6IGNvbHVtbi5uYW1lLFxuICAgICAgICAgICAgdHlwZTogY29sdW1uLnR5cGUgfHwgJ3N0cmluZycsXG4gICAgICAgICAgICBub3ROdWxsOiBjb2x1bW4ubm90TnVsbCB8fCBmYWxzZSxcbiAgICAgICAgICAgIGlzUGs6IHByaW1hcnlLZXkgPT09IGNvbHVtbi5uYW1lLFxuICAgICAgICAgICAgcHJvcGVydGllczogY29sdW1uLnByb3BlcnRpZXNcbiAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShjb2x1bW4ucHJvcGVydGllcylcbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIH0pIGFzIFBhcnRpYWw8TW9kZWxDb2x1bW4+LFxuICAgICAgKTtcbiAgICB9KTtcbiAgICBjb25zdCBjb2x1bW5zID0gYXdhaXQgY3R4Lm1vZGVsQ29sdW1uUmVwb3NpdG9yeS5jcmVhdGVNYW55KGNvbHVtblZhbHVlcyk7XG5cbiAgICAvLyBjcmVhdGUgbmVzdGVkIGNvbHVtbnNcbiAgICBjb25zdCBjb21wYWN0Q29sdW1ucyA9IHNlbGVjdGVkVGFibGVzLmZsYXRNYXAoKHRhYmxlKSA9PiB0YWJsZS5jb2x1bW5zKTtcbiAgICBjb25zdCBuZXN0ZWRDb2x1bW5WYWx1ZXMgPSBjb21wYWN0Q29sdW1ucy5mbGF0TWFwKChjb21wYWN0Q29sdW1uKSA9PiB7XG4gICAgICBjb25zdCBjb2x1bW4gPSBjb2x1bW5zLmZpbmQoXG4gICAgICAgIChjKSA9PiBjLnNvdXJjZUNvbHVtbk5hbWUgPT09IGNvbXBhY3RDb2x1bW4ubmFtZSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gaGFuZGxlTmVzdGVkQ29sdW1ucyhjb21wYWN0Q29sdW1uLCB7XG4gICAgICAgIG1vZGVsSWQ6IGNvbHVtbi5tb2RlbElkLFxuICAgICAgICBjb2x1bW5JZDogY29sdW1uLmlkLFxuICAgICAgICBzb3VyY2VDb2x1bW5OYW1lOiBjb2x1bW4uc291cmNlQ29sdW1uTmFtZSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGF3YWl0IGN0eC5tb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnkuY3JlYXRlTWFueShuZXN0ZWRDb2x1bW5WYWx1ZXMpO1xuXG4gICAgcmV0dXJuIHsgbW9kZWxzLCBjb2x1bW5zIH07XG4gIH1cblxuICBwcml2YXRlIGNvbmNhdEluaXRTcWwoaW5pdFNxbDogc3RyaW5nLCBleHRlbnNpb25zOiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGluc3RhbGxFeHRlbnNpb25zID0gZXh0ZW5zaW9uc1xuICAgICAgLm1hcCgoZXh0KSA9PiBgSU5TVEFMTCAke2V4dH07YClcbiAgICAgIC5qb2luKCdcXG4nKTtcbiAgICByZXR1cm4gdHJpbShgJHtpbnN0YWxsRXh0ZW5zaW9uc31cXG4ke2luaXRTcWx9YCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGJ1aWxkRHVja0RiRW52aXJvbm1lbnQoXG4gICAgY3R4OiBJQ29udGV4dCxcbiAgICBvcHRpb25zOiB7XG4gICAgICBpbml0U3FsOiBzdHJpbmc7XG4gICAgICBleHRlbnNpb25zOiBzdHJpbmdbXTtcbiAgICAgIGNvbmZpZ3VyYXRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIH0sXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgaW5pdFNxbCwgZXh0ZW5zaW9ucywgY29uZmlndXJhdGlvbnMgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgaW5pdFNxbFdpdGhFeHRlbnNpb25zID0gdGhpcy5jb25jYXRJbml0U3FsKGluaXRTcWwsIGV4dGVuc2lvbnMpO1xuICAgIGF3YWl0IGN0eC53cmVuRW5naW5lQWRhcHRvci5wcmVwYXJlRHVja0RCKHtcbiAgICAgIHNlc3Npb25Qcm9wczogY29uZmlndXJhdGlvbnMsXG4gICAgICBpbml0U3FsOiBpbml0U3FsV2l0aEV4dGVuc2lvbnMsXG4gICAgfSBhcyBEdWNrREJQcmVwYXJlT3B0aW9ucyk7XG5cbiAgICAvLyBjaGVjayBjYW4gbGlzdCBkYXRhc2V0IHRhYmxlXG4gICAgYXdhaXQgY3R4LndyZW5FbmdpbmVBZGFwdG9yLmxpc3RUYWJsZXMoKTtcblxuICAgIC8vIHBhdGNoIHdyZW4tZW5naW5lIGNvbmZpZ1xuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICd3cmVuLmRhdGFzb3VyY2UudHlwZSc6ICdkdWNrZGInLFxuICAgIH07XG4gICAgYXdhaXQgY3R4LndyZW5FbmdpbmVBZGFwdG9yLnBhdGNoQ29uZmlnKGNvbmZpZyk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJEYXRhU291cmNlTmFtZSIsIlJlbGF0aW9uVHlwZSIsInRyaW0iLCJnZXRMb2dnZXIiLCJyZXBsYWNlSW52YWxpZFJlZmVyZW5jZU5hbWUiLCJ0cmFuc2Zvcm1JbnZhbGlkQ29sdW1uTmFtZSIsImhhbmRsZU5lc3RlZENvbHVtbnMiLCJTYW1wbGVEYXRhc2V0TmFtZSIsImJ1aWxkSW5pdFNxbCIsImdldFJlbGF0aW9ucyIsInNhbXBsZURhdGFzZXRzIiwic25ha2VDYXNlIiwiRGF0YVNvdXJjZVNjaGVtYURldGVjdG9yIiwiZW5jcnlwdENvbm5lY3Rpb25JbmZvIiwiVGVsZW1ldHJ5RXZlbnQiLCJsb2dnZXIiLCJsZXZlbCIsIk9uYm9hcmRpbmdTdGF0dXNFbnVtIiwiUHJvamVjdFJlc29sdmVyIiwiY29uc3RydWN0b3IiLCJnZXRTZXR0aW5ncyIsImJpbmQiLCJ1cGRhdGVDdXJyZW50UHJvamVjdCIsInJlc2V0Q3VycmVudFByb2plY3QiLCJzYXZlRGF0YVNvdXJjZSIsInVwZGF0ZURhdGFTb3VyY2UiLCJsaXN0RGF0YVNvdXJjZVRhYmxlcyIsInNhdmVUYWJsZXMiLCJhdXRvR2VuZXJhdGVSZWxhdGlvbiIsInNhdmVSZWxhdGlvbnMiLCJnZXRPbmJvYXJkaW5nU3RhdHVzIiwic3RhcnRTYW1wbGVEYXRhc2V0IiwidHJpZ2dlckRhdGFTb3VyY2VEZXRlY3Rpb24iLCJnZXRTY2hlbWFDaGFuZ2UiLCJnZXRQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnMiLCJfcm9vdCIsIl9hcmciLCJjdHgiLCJwcm9qZWN0IiwicHJvamVjdFNlcnZpY2UiLCJnZXRDdXJyZW50UHJvamVjdCIsImdlbmVyYWxDb25uZWN0aW9uSW5mbyIsImdldEdlbmVyYWxDb25uZWN0aW9uSW5mbyIsImRhdGFTb3VyY2VUeXBlIiwidHlwZSIsInByb2R1Y3RWZXJzaW9uIiwiY29uZmlnIiwid3JlblByb2R1Y3RWZXJzaW9uIiwiZGF0YVNvdXJjZSIsInByb3BlcnRpZXMiLCJkaXNwbGF5TmFtZSIsInNhbXBsZURhdGFzZXQiLCJsYW5ndWFnZSIsImFyZyIsImRhdGEiLCJwcm9qZWN0UmVwb3NpdG9yeSIsInVwZGF0ZU9uZSIsImlkIiwiZ2VuZXJhdGVQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnMiLCJldmVudE5hbWUiLCJTRVRUSU5HX1JFU0VUX1BST0pFQ1QiLCJzY2hlbWFDaGFuZ2VSZXBvc2l0b3J5IiwiZGVsZXRlQWxsQnkiLCJwcm9qZWN0SWQiLCJkZXBsb3lTZXJ2aWNlIiwiZGVsZXRlQWxsQnlQcm9qZWN0SWQiLCJhc2tpbmdTZXJ2aWNlIiwibW9kZWxTZXJ2aWNlIiwiZGVsZXRlQWxsVmlld3NCeVByb2plY3RJZCIsImRlbGV0ZUFsbE1vZGVsc0J5UHJvamVjdElkIiwiZGVsZXRlUHJvamVjdCIsInRlbGVtZXRyeSIsInNlbmRFdmVudCIsImVyciIsImVycm9yIiwibWVzc2FnZSIsImV4dGVuc2lvbnMiLCJzZXJ2aWNlIiwibmFtZSIsImRhdGFzZXQiLCJFcnJvciIsIkNPTk5FQ1RJT05fU1RBUlRfU0FNUExFX0RBVEFTRVQiLCJldmVudFByb3BlcnRpZXMiLCJkYXRhc2V0TmFtZSIsImluaXRTcWwiLCJkdWNrZGJEYXRhc291cmNlUHJvcGVydGllcyIsImNvbmZpZ3VyYXRpb25zIiwiRFVDS0RCIiwidGFibGVzIiwidGFibGVOYW1lcyIsIm1hcCIsInRhYmxlIiwib3ZlcndyaXRlTW9kZWxzQW5kQ29sdW1ucyIsInVwZGF0ZVByaW1hcnlLZXlzIiwiYmF0Y2hVcGRhdGVNb2RlbFByb3BlcnRpZXMiLCJiYXRjaFVwZGF0ZUNvbHVtblByb3BlcnRpZXMiLCJyZWxhdGlvbnMiLCJtb2RlbHMiLCJtb2RlbFJlcG9zaXRvcnkiLCJmaW5kQWxsIiwiY29sdW1ucyIsIm1vZGVsQ29sdW1uUmVwb3NpdG9yeSIsIm1hcHBlZFJlbGF0aW9ucyIsImJ1aWxkUmVsYXRpb25JbnB1dCIsImRlcGxveSIsIl9lcnIiLCJzdGF0dXMiLCJmaW5kQWxsQnkiLCJsZW5ndGgiLCJhcmdzIiwiY29ubmVjdGlvbkluZm8iLCJjcmVhdGVQcm9qZWN0IiwiZGVidWciLCJkYXNoYm9hcmRTZXJ2aWNlIiwiaW5pdERhc2hib2FyZCIsIkNPTk5FQ1RJT05fU0FWRV9EQVRBX1NPVVJDRSIsImJ1aWxkRHVja0RiRW52aXJvbm1lbnQiLCJnZXRQcm9qZWN0RGF0YVNvdXJjZVRhYmxlcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVPbmUiLCJ0b1VwZGF0ZUNvbm5lY3Rpb25JbmZvIiwidXBkYXRlZFByb2plY3QiLCJDT05ORUNUSU9OX1NBVkVfVEFCTEVTIiwidGFibGVzQ291bnQiLCJjb2x1bW5zQ291bnQiLCJtb2RlbElkcyIsIm0iLCJmaW5kQ29sdW1uc0J5TW9kZWxJZHMiLCJjb25zdHJhaW50cyIsImdldFByb2plY3RTdWdnZXN0ZWRDb25zdHJhaW50IiwiY29uc3RyYWludCIsImNvbnN0cmFpbnRUYWJsZSIsImNvbnN0cmFpbnRDb2x1bW4iLCJjb25zdHJhaW50ZWRUYWJsZSIsImNvbnN0cmFpbnRlZENvbHVtbiIsImZyb21Nb2RlbCIsImZpbmQiLCJzb3VyY2VUYWJsZU5hbWUiLCJ0b01vZGVsIiwiZnJvbUNvbHVtbiIsImMiLCJtb2RlbElkIiwic291cmNlQ29sdW1uTmFtZSIsInRvQ29sdW1uIiwicmVsYXRpb24iLCJjb25zdHJhaW50TmFtZSIsImZyb21Nb2RlbElkIiwiZnJvbU1vZGVsUmVmZXJlbmNlTmFtZSIsInJlZmVyZW5jZU5hbWUiLCJmcm9tQ29sdW1uSWQiLCJmcm9tQ29sdW1uUmVmZXJlbmNlTmFtZSIsInRvTW9kZWxJZCIsInRvTW9kZWxSZWZlcmVuY2VOYW1lIiwidG9Db2x1bW5JZCIsInRvQ29sdW1uUmVmZXJlbmNlTmFtZSIsIk9ORV9UT19NQU5ZIiwicHVzaCIsImZpbHRlciIsIkNPTk5FQ1RJT05fU0FWRV9SRUxBVElPTiIsInNhdmVkUmVsYXRpb25zIiwicmVsYXRpb25Db3VudCIsImxhc3RTY2hlbWFDaGFuZ2UiLCJmaW5kTGFzdFNjaGVtYUNoYW5nZSIsImRlbGV0ZWRUYWJsZXMiLCJkZWxldGVkQ29sdW1ucyIsIm1vZGlmaWVkQ29sdW1ucyIsImxhc3RTY2hlbWFDaGFuZ2VUaW1lIiwibW9kZWwiLCJtb2RlbENvbHVtbnMiLCJtb2RlbFJlbGF0aW9uc2hpcHMiLCJyZWxhdGlvblJlcG9zaXRvcnkiLCJmaW5kUmVsYXRpb25JbmZvQnkiLCJzY2hlbWFEZXRlY3RvciIsInJlc29sdmVzIiwicmVzb2x2ZSIsInVucmVzb2x2ZWRDaGFuZ2VzIiwiT2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsInJlc3VsdCIsImtleSIsImlzUmVzb2x2ZWQiLCJjaGFuZ2VzIiwiY2hhbmdlIiwiYWZmZWN0ZWRzIiwiZ2V0QWZmZWN0ZWRSZXNvdXJjZXMiLCJhZmZlY3RlZENoYW5nZXMiLCJjcmVhdGVkQXQiLCJNT0RFTElOR19ERVRFQ1RfU0NIRU1BX0NIQU5HRSIsImhhc1NjaGVtYUNoYW5nZSIsImRldGVjdFNjaGVtYUNoYW5nZSIsInJlc29sdmVTY2hlbWFDaGFuZ2UiLCJ3aGVyZSIsIk1PREVMSU5HX1JFU09MVkVfU0NIRU1BX0NIQU5HRSIsIm1hbmlmZXN0IiwibWRsU2VydmljZSIsIm1ha2VDdXJyZW50TW9kZWxNREwiLCJkZXBsb3lSZXMiLCJyZWxhdGlvbklucHV0IiwiZnJvbU1vZGVsTmFtZSIsImZyb21Db2x1bW5OYW1lIiwidG9Nb2RlbE5hbWUiLCJ0b0NvbHVtbk5hbWUiLCJjb2x1bW4iLCJkZXNjcmlwdGlvbiIsImNvbXBhY3RUYWJsZXMiLCJzZWxlY3RlZFRhYmxlcyIsImluY2x1ZGVzIiwibW9kZWxWYWx1ZXMiLCJjYWNoZWQiLCJyZWZyZXNoVGltZSIsImNyZWF0ZU1hbnkiLCJjb2x1bW5WYWx1ZXMiLCJmbGF0TWFwIiwiY29tcGFjdENvbHVtbnMiLCJwcmltYXJ5S2V5IiwiaXNDYWxjdWxhdGVkIiwibm90TnVsbCIsImlzUGsiLCJuZXN0ZWRDb2x1bW5WYWx1ZXMiLCJjb21wYWN0Q29sdW1uIiwiY29sdW1uSWQiLCJtb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnkiLCJjb25jYXRJbml0U3FsIiwiaW5zdGFsbEV4dGVuc2lvbnMiLCJleHQiLCJqb2luIiwib3B0aW9ucyIsImluaXRTcWxXaXRoRXh0ZW5zaW9ucyIsIndyZW5FbmdpbmVBZGFwdG9yIiwicHJlcGFyZUR1Y2tEQiIsInNlc3Npb25Qcm9wcyIsImxpc3RUYWJsZXMiLCJwYXRjaENvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/resolvers/projectResolver.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/schema.ts":
/*!*************************************!*\
  !*** ./src/apollo/server/schema.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   typeDefs: () => (/* binding */ typeDefs)\n/* harmony export */ });\n/* harmony import */ var apollo_server_micro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apollo-server-micro */ \"apollo-server-micro\");\n/* harmony import */ var apollo_server_micro__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apollo_server_micro__WEBPACK_IMPORTED_MODULE_0__);\n\nconst typeDefs = (0,apollo_server_micro__WEBPACK_IMPORTED_MODULE_0__.gql)`\n  scalar JSON\n\n  enum DataSourceName {\n    BIG_QUERY\n    DUCKDB\n    POSTGRES\n    MYSQL\n    MSSQL\n    CLICK_HOUSE\n    TRINO\n    SNOWFLAKE\n  }\n\n  enum ExpressionName {\n    ABS\n    AVG\n    COUNT\n    COUNT_IF\n    MAX\n    MIN\n    SUM\n    CBRT\n    CEIL\n    CEILING\n    EXP\n    FLOOR\n    LN\n    LOG10\n    ROUND\n    SIGN\n    LENGTH\n    REVERSE\n  }\n\n  enum SampleDatasetName {\n    HR\n    ECOMMERCE\n    NBA\n    MUSIC\n  }\n\n  enum SyncStatus {\n    IN_PROGRESS\n    SYNCRONIZED\n    UNSYNCRONIZED\n  }\n\n  enum SchemaChangeType {\n    DELETED_TABLES\n    DELETED_COLUMNS\n    MODIFIED_COLUMNS\n  }\n\n  enum ProjectLanguage {\n    EN\n    ES\n    FR\n    ZH_TW\n    ZH_CN\n    DE\n    PT\n    RU\n    JA\n    KO\n  }\n\n  type DataSource {\n    type: DataSourceName!\n    properties: JSON!\n    # Show the name if the data source setup comes from a sample\n    sampleDataset: SampleDatasetName\n  }\n\n  input WhereIdInput {\n    id: Int!\n  }\n\n  input DataSourceInput {\n    type: DataSourceName!\n    properties: JSON!\n  }\n\n  input SampleDatasetInput {\n    name: SampleDatasetName!\n  }\n\n  type CompactTable {\n    name: String!\n    columns: [CompactColumn!]!\n    properties: JSON\n  }\n\n  input MDLModelSubmitInput {\n    name: String!\n    columns: [String!]!\n  }\n\n  enum RelationType {\n    ONE_TO_ONE\n    ONE_TO_MANY\n    MANY_TO_ONE\n  }\n\n  enum OnboardingStatus {\n    NOT_STARTED\n    DATASOURCE_SAVED\n    ONBOARDING_FINISHED\n    WITH_SAMPLE_DATASET\n  }\n\n  enum NodeType {\n    MODEL\n    METRIC\n    VIEW\n    RELATION\n    FIELD\n    CALCULATED_FIELD\n  }\n\n  type Relation {\n    fromModelId: Int!\n    fromModelReferenceName: String!\n    fromColumnId: Int!\n    fromColumnReferenceName: String!\n    toModelId: Int!\n    toModelReferenceName: String!\n    toColumnId: Int!\n    toColumnReferenceName: String!\n    type: RelationType!\n    name: String!\n  }\n\n  type RecommendRelations {\n    id: Int!\n    displayName: String!\n    referenceName: String!\n    relations: [Relation]!\n  }\n\n  input RelationInput {\n    fromModelId: Int!\n    fromColumnId: Int!\n    toModelId: Int!\n    toColumnId: Int!\n    type: RelationType!\n  }\n\n  input UpdateRelationInput {\n    type: RelationType!\n  }\n\n  input SaveRelationInput {\n    relations: [RelationInput]!\n  }\n\n  input SaveTablesInput {\n    tables: [String!]!\n  }\n\n  type CompactColumn {\n    name: String!\n    type: String!\n    properties: JSON\n  }\n\n  input CustomFieldInput {\n    name: String!\n    expression: String!\n  }\n\n  input CalculatedFieldInput {\n    name: String!\n    expression: String!\n    lineage: [Int!]!\n    diagram: JSON\n  }\n\n  input CreateModelInput {\n    sourceTableName: String!\n    fields: [String!]!\n    primaryKey: String\n  }\n\n  input CreateCalculatedFieldInput {\n    modelId: Int!\n    name: String!\n    expression: ExpressionName!\n    lineage: [Int!]!\n  }\n\n  input UpdateCalculatedFieldInput {\n    name: String!\n    expression: ExpressionName!\n    lineage: [Int!]!\n  }\n\n  input UpdateCalculatedFieldWhere {\n    id: Int!\n  }\n\n  input ValidateCalculatedFieldInput {\n    name: String!\n    modelId: Int!\n    columnId: Int\n  }\n\n  type CalculatedFieldValidationResponse {\n    valid: Boolean!\n    message: String\n  }\n\n  input ModelWhereInput {\n    id: Int!\n  }\n\n  input UpdateModelInput {\n    fields: [String!]!\n    primaryKey: String\n  }\n\n  # Metadata related\n  input UpdateNestedColumnMetadataInput {\n    id: Int!\n    displayName: String\n    description: String\n  }\n\n  input UpdateColumnMetadataInput {\n    id: Int!\n    displayName: String\n    description: String\n  }\n\n  input UpdateCalculatedFieldMetadataInput {\n    id: Int!\n    description: String\n  }\n\n  input UpdateRelationshipMetadataInput {\n    id: Int!\n    description: String\n  }\n\n  input UpdateViewColumnMetadataInput {\n    referenceName: String!\n    description: String\n  }\n\n  input UpdateModelMetadataInput {\n    displayName: String # Model display name, i,e, the alias of the model\n    description: String # Model description\n    columns: [UpdateColumnMetadataInput!] # Update column metadata\n    nestedColumns: [UpdateNestedColumnMetadataInput!] # Update nested column metadata\n    calculatedFields: [UpdateCalculatedFieldMetadataInput!] # Update calculated field metadata\n    relationships: [UpdateRelationshipMetadataInput!] # Update relationship metadata\n  }\n\n  input UpdateViewMetadataInput {\n    displayName: String # View display name, i,e, the alias of the view\n    description: String # View description\n    columns: [UpdateViewColumnMetadataInput!]\n  }\n\n  type NestedFieldInfo {\n    id: Int!\n    displayName: String!\n    referenceName: String!\n    sourceColumnName: String!\n    columnPath: [String!]!\n    type: String!\n    properties: JSON!\n  }\n\n  type FieldInfo {\n    id: Int!\n    displayName: String!\n    referenceName: String!\n    sourceColumnName: String!\n    type: String\n    isCalculated: Boolean!\n    notNull: Boolean!\n    expression: String\n    properties: JSON\n    nestedColumns: [NestedFieldInfo!]\n  }\n\n  type ModelInfo {\n    id: Int!\n    displayName: String!\n    referenceName: String!\n    sourceTableName: String!\n    refSql: String\n    primaryKey: String\n    cached: Boolean!\n    refreshTime: String\n    description: String\n    fields: [FieldInfo]!\n    calculatedFields: [FieldInfo]!\n    properties: JSON\n  }\n\n  type DetailedNestedColumn {\n    id: Int!\n    displayName: String!\n    referenceName: String!\n    sourceColumnName: String!\n    columnPath: [String!]!\n    type: String\n    properties: JSON\n  }\n\n  type DetailedColumn {\n    displayName: String!\n    referenceName: String!\n    sourceColumnName: String!\n    type: String\n    isCalculated: Boolean!\n    notNull: Boolean!\n    properties: JSON!\n    nestedColumns: [DetailedNestedColumn!]\n  }\n\n  type DetailedRelation {\n    fromModelId: Int!\n    fromColumnId: Int!\n    toModelId: Int!\n    toColumnId: Int!\n    type: RelationType!\n    name: String!\n    properties: JSON!\n  }\n\n  type DetailedModel {\n    displayName: String!\n    referenceName: String!\n    sourceTableName: String!\n    refSql: String!\n    primaryKey: String\n    cached: Boolean!\n    refreshTime: String\n    description: String\n    fields: [DetailedColumn]\n    calculatedFields: [DetailedColumn]\n    relations: [DetailedRelation]\n    properties: JSON!\n  }\n\n  # View\n  type ViewInfo {\n    id: Int!\n    name: String!\n    statement: String!\n    displayName: String!\n  }\n\n  input ViewWhereUniqueInput {\n    id: Int!\n  }\n\n  input PreviewViewDataInput {\n    id: Int!\n    # It will return default 500 rows if not specified limit\n    # refer: DEFAULT_PREVIEW_LIMIT\n    limit: Int\n  }\n\n  input CreateViewInput {\n    name: String!\n    responseId: Int!\n  }\n\n  input ValidateViewInput {\n    name: String!\n  }\n\n  type ViewValidationResponse {\n    valid: Boolean!\n    message: String\n  }\n\n  # onboarding\n  type OnboardingStatusResponse {\n    status: OnboardingStatus\n  }\n\n  type ModelSyncResponse {\n    status: SyncStatus!\n  }\n\n  type Diagram {\n    models: [DiagramModel]!\n    views: [DiagramView]!\n  }\n\n  type DiagramView {\n    id: String!\n    viewId: Int!\n    nodeType: NodeType!\n    statement: String!\n    displayName: String!\n    referenceName: String!\n    fields: [DiagramViewField]!\n    description: String\n  }\n\n  type DiagramViewField {\n    id: String!\n    displayName: String!\n    referenceName: String!\n    type: String!\n    nodeType: NodeType!\n    description: String\n  }\n\n  type DiagramModel {\n    id: String!\n    modelId: Int!\n    nodeType: NodeType!\n    displayName: String!\n    referenceName: String!\n    sourceTableName: String!\n    refSql: String\n    cached: Boolean!\n    refreshTime: String\n    description: String\n    fields: [DiagramModelField]!\n    calculatedFields: [DiagramModelField]!\n    relationFields: [DiagramModelRelationField]!\n  }\n\n  type DiagramModelNestedField {\n    id: String!\n    nestedColumnId: Int!\n    displayName: String!\n    referenceName: String!\n    columnPath: [String!]!\n    type: String!\n    description: String\n  }\n\n  type DiagramModelField {\n    id: String!\n    columnId: Int!\n    nodeType: NodeType!\n    type: String!\n    displayName: String!\n    referenceName: String!\n    description: String\n    isPrimaryKey: Boolean!\n    expression: String\n    aggregation: String\n    lineage: [Int!]\n    nestedFields: [DiagramModelNestedField!]\n  }\n\n  type DiagramModelRelationField {\n    id: String!\n    relationId: Int!\n    nodeType: NodeType!\n    type: RelationType!\n    displayName: String!\n    referenceName: String!\n    description: String\n    fromModelId: Int!\n    fromModelName: String!\n    fromModelDisplayName: String!\n    fromColumnId: Int!\n    fromColumnName: String!\n    fromColumnDisplayName: String!\n    toModelId: Int!\n    toModelName: String!\n    toModelDisplayName: String!\n    toColumnId: Int!\n    toColumnName: String!\n    toColumnDisplayName: String!\n  }\n\n  input SimpleMeasureInput {\n    name: String!\n    type: String!\n    isCalculated: Boolean!\n    notNull: Boolean!\n    properties: JSON!\n  }\n\n  input DimensionInput {\n    name: String!\n    type: String!\n    isCalculated: Boolean!\n    notNull: Boolean!\n    properties: JSON!\n  }\n\n  input TimeGrainInput {\n    name: String!\n    refColumn: String!\n    dateParts: [String!]!\n  }\n\n  input CreateSimpleMetricInput {\n    name: String!\n    displayName: String!\n    description: String\n    cached: Boolean!\n    refreshTime: String\n    model: String!\n    properties: JSON!\n    measure: [SimpleMeasureInput!]!\n    dimension: [DimensionInput!]!\n    timeGrain: [TimeGrainInput!]!\n  }\n\n  # Task\n  type Task {\n    id: String!\n  }\n\n  # Error\n  type Error {\n    code: String\n    shortMessage: String\n    message: String\n    stacktrace: [String]\n  }\n\n  # Asking Task\n  input AskingTaskInput {\n    question: String!\n    # Used for follow-up questions\n    threadId: Int\n  }\n\n  enum AskingTaskStatus {\n    UNDERSTANDING\n    SEARCHING\n    PLANNING\n    GENERATING\n    CORRECTING\n    FINISHED\n    FAILED\n    STOPPED\n  }\n\n  enum AskingTaskType {\n    GENERAL\n    TEXT_TO_SQL\n    MISLEADING_QUERY\n  }\n\n  enum ChartTaskStatus {\n    FETCHING\n    GENERATING\n    FINISHED\n    FAILED\n    STOPPED\n  }\n\n  enum ChartType {\n    BAR\n    PIE\n    LINE\n    MULTI_LINE\n    AREA\n    GROUPED_BAR\n    STACKED_BAR\n  }\n\n  enum ResultCandidateType {\n    VIEW # View type candidate is provided basd on a saved view\n    LLM # LLM type candidate is created by LLM\n  }\n\n  type ResultCandidate {\n    type: ResultCandidateType!\n    sql: String!\n    view: ViewInfo\n  }\n\n  type AskingTask {\n    status: AskingTaskStatus!\n    type: AskingTaskType\n    error: Error\n    candidates: [ResultCandidate!]!\n    intentReasoning: String\n  }\n\n  input InstantRecommendedQuestionsInput {\n    previousQuestions: [String!]\n  }\n\n  enum RecommendedQuestionsTaskStatus {\n    NOT_STARTED\n    GENERATING\n    FINISHED\n    FAILED\n  }\n\n  type ResultQuestion {\n    question: String!\n    category: String!\n    sql: String!\n  }\n\n  type RecommendedQuestionsTask {\n    status: RecommendedQuestionsTaskStatus!\n    questions: [ResultQuestion!]!\n    error: Error\n  }\n\n  # Thread\n  input CreateThreadInput {\n    question: String\n    sql: String\n    viewId: Int\n  }\n\n  input CreateThreadResponseInput {\n    question: String\n    sql: String\n    viewId: Int\n  }\n\n  input ThreadUniqueWhereInput {\n    id: Int!\n  }\n\n  input UpdateThreadInput {\n    summary: String\n  }\n\n  input AdjustThreadResponseChartInput {\n    chartType: ChartType!\n    xAxis: String\n    yAxis: String\n    xOffset: String\n    color: String\n    theta: String\n  }\n\n  input PreviewDataInput {\n    responseId: Int!\n    # Optional, only used for preview data of a single step\n    stepIndex: Int\n    # It will return default 500 rows if not specified limit\n    # refer: DEFAULT_PREVIEW_LIMIT\n    limit: Int\n  }\n\n  type DetailStep {\n    summary: String!\n    sql: String!\n    cteName: String\n  }\n\n  enum ThreadResponseAnswerStatus {\n    NOT_STARTED\n    FETCHING_DATA\n    PREPROCESSING\n    STREAMING\n    FINISHED\n    FAILED\n    INTERRUPTED\n  }\n\n  type ThreadResponseAnswerDetail {\n    queryId: String\n    status: ThreadResponseAnswerStatus\n    error: Error\n    numRowsUsedInLLM: Int\n    content: String\n  }\n\n  type ThreadResponseBreakdownDetail {\n    queryId: String\n    status: AskingTaskStatus!\n    error: Error\n    description: String\n    steps: [DetailStep!]\n  }\n\n  type ThreadResponseChartDetail {\n    queryId: String\n    status: ChartTaskStatus!\n    error: Error\n    description: String\n    chartType: ChartType\n    chartSchema: JSON\n    adjustment: Boolean\n  }\n\n  type ThreadResponse {\n    id: Int!\n    threadId: Int!\n    question: String!\n    sql: String!\n    view: ViewInfo\n    breakdownDetail: ThreadResponseBreakdownDetail\n    answerDetail: ThreadResponseAnswerDetail\n    chartDetail: ThreadResponseChartDetail\n  }\n\n  # Thread only consists of basic information of a thread\n  type Thread {\n    id: Int!\n    summary: String!\n  }\n\n  # Detailed thread consists of thread and thread responses\n  type DetailedThread {\n    id: Int!\n    responses: [ThreadResponse!]!\n  }\n\n  type SuggestedQuestion {\n    question: String!\n    label: String!\n  }\n  # Ask Questions Responses\n  type SuggestedQuestionResponse {\n    questions: [SuggestedQuestion]!\n  }\n\n  # Settings\n  input UpdateDataSourceInput {\n    properties: JSON!\n  }\n\n  input UpdateCurrentProjectInput {\n    language: ProjectLanguage!\n  }\n\n  type Settings {\n    productVersion: String!\n    dataSource: DataSource!\n    language: ProjectLanguage!\n  }\n\n  type GetMDLResult {\n    hash: String!\n    mdl: String\n  }\n\n  input PreviewSQLDataInput {\n    sql: String!\n    projectId: Int\n    limit: Int\n    dryRun: Boolean\n  }\n\n  # Schema Change\n  type SchemaChange {\n    deletedTables: [DetailedChangeTable!]\n    deletedColumns: [DetailedChangeTable!]\n    modifiedColumns: [DetailedChangeTable!]\n    lastSchemaChangeTime: String\n  }\n\n  type DetailedChangeTable {\n    sourceTableName: String!\n    displayName: String!\n    columns: [DetailedChangeColumn!]!\n    calculatedFields: [DetailedAffectedCalculatedFields!]!\n    relationships: [DetailedAffectedRelationships!]!\n  }\n\n  type DetailedChangeColumn {\n    sourceColumnName: String!\n    displayName: String!\n    type: String!\n  }\n\n  type DetailedAffectedCalculatedFields {\n    displayName: String!\n    referenceName: String!\n    type: String!\n  }\n\n  type DetailedAffectedRelationships {\n    displayName: String!\n    referenceName: String!\n  }\n\n  input ResolveSchemaChangeWhereInput {\n    type: SchemaChangeType!\n  }\n\n  # Learning\n  type LearningRecord {\n    paths: [String!]!\n  }\n\n  input SaveLearningRecordInput {\n    path: String!\n  }\n\n  # Dashboard\n  enum DashboardItemType {\n    BAR\n    PIE\n    LINE\n    MULTI_LINE\n    AREA\n    GROUPED_BAR\n    STACKED_BAR\n    TABLE\n    NUMBER\n  }\n\n  input DashboardItemWhereInput {\n    id: Int!\n  }\n\n  input CreateDashboardItemInput {\n    itemType: DashboardItemType!\n    responseId: Int!\n  }\n\n  input ItemLayoutInput {\n    itemId: Int!\n    x: Int!\n    y: Int!\n    w: Int!\n    h: Int!\n  }\n\n  input UpdateDashboardItemLayoutsInput {\n    layouts: [ItemLayoutInput!]!\n  }\n\n  input DeleteDashboardItemInput {\n    itemId: Int!\n  }\n\n  input PreviewItemSQLInput {\n    itemId: Int!\n    limit: Int\n  }\n\n  type DashboardItemLayout {\n    x: Int!\n    y: Int!\n    w: Int!\n    h: Int!\n  }\n\n  type DashboardItemDetail {\n    sql: String!\n    chartSchema: JSON\n  }\n\n  type DashboardItem {\n    id: Int!\n    dashboardId: Int!\n    type: DashboardItemType!\n    layout: DashboardItemLayout!\n    detail: DashboardItemDetail!\n  }\n\n  # Query and Mutation\n  type Query {\n    # On Boarding Steps\n    listDataSourceTables: [CompactTable!]!\n    autoGenerateRelation: [RecommendRelations!]!\n    onboardingStatus: OnboardingStatusResponse!\n\n    # Modeling Page\n    listModels: [ModelInfo!]!\n    model(where: ModelWhereInput!): DetailedModel!\n    modelSync: ModelSyncResponse!\n    diagram: Diagram!\n    schemaChange: SchemaChange!\n\n    # View\n    listViews: [ViewInfo!]!\n    view(where: ViewWhereUniqueInput!): ViewInfo!\n\n    # Ask\n    askingTask(taskId: String!): AskingTask!\n    suggestedQuestions: SuggestedQuestionResponse!\n    threads: [Thread!]!\n    thread(threadId: Int!): DetailedThread!\n    threadResponse(responseId: Int!): ThreadResponse!\n    nativeSql(responseId: Int!): String!\n\n    # Settings\n    settings: Settings!\n\n    # System\n    getMDL(hash: String!): GetMDLResult!\n\n    # Learning\n    learningRecord: LearningRecord!\n\n    # Recommendation questions\n    getThreadRecommendationQuestions(threadId: Int!): RecommendedQuestionsTask!\n    getProjectRecommendationQuestions: RecommendedQuestionsTask!\n    instantRecommendedQuestions(taskId: String!): RecommendedQuestionsTask!\n\n    # Dashboard\n    dashboardItems: [DashboardItem!]!\n  }\n\n  type Mutation {\n    # On Boarding Steps\n    saveDataSource(data: DataSourceInput!): DataSource!\n    startSampleDataset(data: SampleDatasetInput!): JSON!\n    saveTables(data: SaveTablesInput!): JSON!\n    saveRelations(data: SaveRelationInput!): JSON!\n    deploy(force: Boolean): JSON!\n\n    # Modeling Page\n    createModel(data: CreateModelInput!): JSON!\n    updateModel(where: ModelWhereInput!, data: UpdateModelInput!): JSON!\n    deleteModel(where: ModelWhereInput!): Boolean!\n    previewModelData(where: WhereIdInput!): JSON!\n    triggerDataSourceDetection: Boolean!\n    resolveSchemaChange(where: ResolveSchemaChangeWhereInput!): Boolean!\n\n    # Metadata\n    updateModelMetadata(\n      where: ModelWhereInput!\n      data: UpdateModelMetadataInput!\n    ): Boolean!\n    updateViewMetadata(\n      where: ViewWhereUniqueInput!\n      data: UpdateViewMetadataInput!\n    ): Boolean!\n\n    # Relation\n    createRelation(data: RelationInput!): JSON!\n    updateRelation(data: UpdateRelationInput!, where: WhereIdInput!): JSON!\n    deleteRelation(where: WhereIdInput!): Boolean!\n\n    # Calculated field\n    createCalculatedField(data: CreateCalculatedFieldInput!): JSON!\n    updateCalculatedField(\n      where: UpdateCalculatedFieldWhere!\n      data: UpdateCalculatedFieldInput!\n    ): JSON!\n    deleteCalculatedField(where: UpdateCalculatedFieldWhere): Boolean!\n    validateCalculatedField(\n      data: ValidateCalculatedFieldInput!\n    ): CalculatedFieldValidationResponse!\n\n    # View\n    createView(data: CreateViewInput!): ViewInfo!\n    deleteView(where: ViewWhereUniqueInput!): Boolean!\n    previewViewData(where: PreviewViewDataInput!): JSON!\n    validateView(data: ValidateViewInput!): ViewValidationResponse!\n\n    # Ask\n    createAskingTask(data: AskingTaskInput!): Task!\n    cancelAskingTask(taskId: String!): Boolean!\n\n    # Thread\n    createThread(data: CreateThreadInput!): Thread!\n    updateThread(\n      where: ThreadUniqueWhereInput!\n      data: UpdateThreadInput!\n    ): Thread!\n    deleteThread(where: ThreadUniqueWhereInput!): Boolean!\n\n    # Thread Response\n    createThreadResponse(\n      threadId: Int!\n      data: CreateThreadResponseInput!\n    ): ThreadResponse!\n    previewData(where: PreviewDataInput!): JSON!\n    previewBreakdownData(where: PreviewDataInput!): JSON!\n\n    # Generate Thread Response Breakdown\n    generateThreadResponseBreakdown(responseId: Int!): ThreadResponse!\n\n    # Generate Thread Response Answer\n    generateThreadResponseAnswer(responseId: Int!): ThreadResponse!\n\n    # Generate Thread Response Chart\n    generateThreadResponseChart(responseId: Int!): ThreadResponse!\n\n    # Adjust Thread Response Chart\n    adjustThreadResponseChart(\n      responseId: Int!\n      data: AdjustThreadResponseChartInput!\n    ): ThreadResponse!\n\n    # Settings\n    resetCurrentProject: Boolean!\n    updateCurrentProject(data: UpdateCurrentProjectInput!): Boolean!\n    updateDataSource(data: UpdateDataSourceInput!): DataSource!\n\n    # preview\n    previewSql(data: PreviewSQLDataInput): JSON!\n\n    # Learning\n    saveLearningRecord(data: SaveLearningRecordInput!): LearningRecord!\n\n    # Recommendation questions\n    generateThreadRecommendationQuestions(threadId: Int!): Boolean!\n    generateProjectRecommendationQuestions: Boolean!\n    createInstantRecommendedQuestions(\n      data: InstantRecommendedQuestionsInput!\n    ): Task!\n\n    # Dashboard\n    updateDashboardItemLayouts(\n      data: UpdateDashboardItemLayoutsInput!\n    ): [DashboardItem!]!\n    createDashboardItem(data: CreateDashboardItemInput!): DashboardItem!\n    deleteDashboardItem(where: DashboardItemWhereInput!): Boolean!\n    previewItemSQL(data: PreviewItemSQLInput!): JSON!\n  }\n`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zY2hlbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBDO0FBRW5DLE1BQU1DLFdBQVdELHdEQUFHLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvL0I1QixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvc2NoZW1hLnRzP2Y1M2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ3FsIH0gZnJvbSAnYXBvbGxvLXNlcnZlci1taWNybyc7XG5cbmV4cG9ydCBjb25zdCB0eXBlRGVmcyA9IGdxbGBcbiAgc2NhbGFyIEpTT05cblxuICBlbnVtIERhdGFTb3VyY2VOYW1lIHtcbiAgICBCSUdfUVVFUllcbiAgICBEVUNLREJcbiAgICBQT1NUR1JFU1xuICAgIE1ZU1FMXG4gICAgTVNTUUxcbiAgICBDTElDS19IT1VTRVxuICAgIFRSSU5PXG4gICAgU05PV0ZMQUtFXG4gIH1cblxuICBlbnVtIEV4cHJlc3Npb25OYW1lIHtcbiAgICBBQlNcbiAgICBBVkdcbiAgICBDT1VOVFxuICAgIENPVU5UX0lGXG4gICAgTUFYXG4gICAgTUlOXG4gICAgU1VNXG4gICAgQ0JSVFxuICAgIENFSUxcbiAgICBDRUlMSU5HXG4gICAgRVhQXG4gICAgRkxPT1JcbiAgICBMTlxuICAgIExPRzEwXG4gICAgUk9VTkRcbiAgICBTSUdOXG4gICAgTEVOR1RIXG4gICAgUkVWRVJTRVxuICB9XG5cbiAgZW51bSBTYW1wbGVEYXRhc2V0TmFtZSB7XG4gICAgSFJcbiAgICBFQ09NTUVSQ0VcbiAgICBOQkFcbiAgICBNVVNJQ1xuICB9XG5cbiAgZW51bSBTeW5jU3RhdHVzIHtcbiAgICBJTl9QUk9HUkVTU1xuICAgIFNZTkNST05JWkVEXG4gICAgVU5TWU5DUk9OSVpFRFxuICB9XG5cbiAgZW51bSBTY2hlbWFDaGFuZ2VUeXBlIHtcbiAgICBERUxFVEVEX1RBQkxFU1xuICAgIERFTEVURURfQ09MVU1OU1xuICAgIE1PRElGSUVEX0NPTFVNTlNcbiAgfVxuXG4gIGVudW0gUHJvamVjdExhbmd1YWdlIHtcbiAgICBFTlxuICAgIEVTXG4gICAgRlJcbiAgICBaSF9UV1xuICAgIFpIX0NOXG4gICAgREVcbiAgICBQVFxuICAgIFJVXG4gICAgSkFcbiAgICBLT1xuICB9XG5cbiAgdHlwZSBEYXRhU291cmNlIHtcbiAgICB0eXBlOiBEYXRhU291cmNlTmFtZSFcbiAgICBwcm9wZXJ0aWVzOiBKU09OIVxuICAgICMgU2hvdyB0aGUgbmFtZSBpZiB0aGUgZGF0YSBzb3VyY2Ugc2V0dXAgY29tZXMgZnJvbSBhIHNhbXBsZVxuICAgIHNhbXBsZURhdGFzZXQ6IFNhbXBsZURhdGFzZXROYW1lXG4gIH1cblxuICBpbnB1dCBXaGVyZUlkSW5wdXQge1xuICAgIGlkOiBJbnQhXG4gIH1cblxuICBpbnB1dCBEYXRhU291cmNlSW5wdXQge1xuICAgIHR5cGU6IERhdGFTb3VyY2VOYW1lIVxuICAgIHByb3BlcnRpZXM6IEpTT04hXG4gIH1cblxuICBpbnB1dCBTYW1wbGVEYXRhc2V0SW5wdXQge1xuICAgIG5hbWU6IFNhbXBsZURhdGFzZXROYW1lIVxuICB9XG5cbiAgdHlwZSBDb21wYWN0VGFibGUge1xuICAgIG5hbWU6IFN0cmluZyFcbiAgICBjb2x1bW5zOiBbQ29tcGFjdENvbHVtbiFdIVxuICAgIHByb3BlcnRpZXM6IEpTT05cbiAgfVxuXG4gIGlucHV0IE1ETE1vZGVsU3VibWl0SW5wdXQge1xuICAgIG5hbWU6IFN0cmluZyFcbiAgICBjb2x1bW5zOiBbU3RyaW5nIV0hXG4gIH1cblxuICBlbnVtIFJlbGF0aW9uVHlwZSB7XG4gICAgT05FX1RPX09ORVxuICAgIE9ORV9UT19NQU5ZXG4gICAgTUFOWV9UT19PTkVcbiAgfVxuXG4gIGVudW0gT25ib2FyZGluZ1N0YXR1cyB7XG4gICAgTk9UX1NUQVJURURcbiAgICBEQVRBU09VUkNFX1NBVkVEXG4gICAgT05CT0FSRElOR19GSU5JU0hFRFxuICAgIFdJVEhfU0FNUExFX0RBVEFTRVRcbiAgfVxuXG4gIGVudW0gTm9kZVR5cGUge1xuICAgIE1PREVMXG4gICAgTUVUUklDXG4gICAgVklFV1xuICAgIFJFTEFUSU9OXG4gICAgRklFTERcbiAgICBDQUxDVUxBVEVEX0ZJRUxEXG4gIH1cblxuICB0eXBlIFJlbGF0aW9uIHtcbiAgICBmcm9tTW9kZWxJZDogSW50IVxuICAgIGZyb21Nb2RlbFJlZmVyZW5jZU5hbWU6IFN0cmluZyFcbiAgICBmcm9tQ29sdW1uSWQ6IEludCFcbiAgICBmcm9tQ29sdW1uUmVmZXJlbmNlTmFtZTogU3RyaW5nIVxuICAgIHRvTW9kZWxJZDogSW50IVxuICAgIHRvTW9kZWxSZWZlcmVuY2VOYW1lOiBTdHJpbmchXG4gICAgdG9Db2x1bW5JZDogSW50IVxuICAgIHRvQ29sdW1uUmVmZXJlbmNlTmFtZTogU3RyaW5nIVxuICAgIHR5cGU6IFJlbGF0aW9uVHlwZSFcbiAgICBuYW1lOiBTdHJpbmchXG4gIH1cblxuICB0eXBlIFJlY29tbWVuZFJlbGF0aW9ucyB7XG4gICAgaWQ6IEludCFcbiAgICBkaXNwbGF5TmFtZTogU3RyaW5nIVxuICAgIHJlZmVyZW5jZU5hbWU6IFN0cmluZyFcbiAgICByZWxhdGlvbnM6IFtSZWxhdGlvbl0hXG4gIH1cblxuICBpbnB1dCBSZWxhdGlvbklucHV0IHtcbiAgICBmcm9tTW9kZWxJZDogSW50IVxuICAgIGZyb21Db2x1bW5JZDogSW50IVxuICAgIHRvTW9kZWxJZDogSW50IVxuICAgIHRvQ29sdW1uSWQ6IEludCFcbiAgICB0eXBlOiBSZWxhdGlvblR5cGUhXG4gIH1cblxuICBpbnB1dCBVcGRhdGVSZWxhdGlvbklucHV0IHtcbiAgICB0eXBlOiBSZWxhdGlvblR5cGUhXG4gIH1cblxuICBpbnB1dCBTYXZlUmVsYXRpb25JbnB1dCB7XG4gICAgcmVsYXRpb25zOiBbUmVsYXRpb25JbnB1dF0hXG4gIH1cblxuICBpbnB1dCBTYXZlVGFibGVzSW5wdXQge1xuICAgIHRhYmxlczogW1N0cmluZyFdIVxuICB9XG5cbiAgdHlwZSBDb21wYWN0Q29sdW1uIHtcbiAgICBuYW1lOiBTdHJpbmchXG4gICAgdHlwZTogU3RyaW5nIVxuICAgIHByb3BlcnRpZXM6IEpTT05cbiAgfVxuXG4gIGlucHV0IEN1c3RvbUZpZWxkSW5wdXQge1xuICAgIG5hbWU6IFN0cmluZyFcbiAgICBleHByZXNzaW9uOiBTdHJpbmchXG4gIH1cblxuICBpbnB1dCBDYWxjdWxhdGVkRmllbGRJbnB1dCB7XG4gICAgbmFtZTogU3RyaW5nIVxuICAgIGV4cHJlc3Npb246IFN0cmluZyFcbiAgICBsaW5lYWdlOiBbSW50IV0hXG4gICAgZGlhZ3JhbTogSlNPTlxuICB9XG5cbiAgaW5wdXQgQ3JlYXRlTW9kZWxJbnB1dCB7XG4gICAgc291cmNlVGFibGVOYW1lOiBTdHJpbmchXG4gICAgZmllbGRzOiBbU3RyaW5nIV0hXG4gICAgcHJpbWFyeUtleTogU3RyaW5nXG4gIH1cblxuICBpbnB1dCBDcmVhdGVDYWxjdWxhdGVkRmllbGRJbnB1dCB7XG4gICAgbW9kZWxJZDogSW50IVxuICAgIG5hbWU6IFN0cmluZyFcbiAgICBleHByZXNzaW9uOiBFeHByZXNzaW9uTmFtZSFcbiAgICBsaW5lYWdlOiBbSW50IV0hXG4gIH1cblxuICBpbnB1dCBVcGRhdGVDYWxjdWxhdGVkRmllbGRJbnB1dCB7XG4gICAgbmFtZTogU3RyaW5nIVxuICAgIGV4cHJlc3Npb246IEV4cHJlc3Npb25OYW1lIVxuICAgIGxpbmVhZ2U6IFtJbnQhXSFcbiAgfVxuXG4gIGlucHV0IFVwZGF0ZUNhbGN1bGF0ZWRGaWVsZFdoZXJlIHtcbiAgICBpZDogSW50IVxuICB9XG5cbiAgaW5wdXQgVmFsaWRhdGVDYWxjdWxhdGVkRmllbGRJbnB1dCB7XG4gICAgbmFtZTogU3RyaW5nIVxuICAgIG1vZGVsSWQ6IEludCFcbiAgICBjb2x1bW5JZDogSW50XG4gIH1cblxuICB0eXBlIENhbGN1bGF0ZWRGaWVsZFZhbGlkYXRpb25SZXNwb25zZSB7XG4gICAgdmFsaWQ6IEJvb2xlYW4hXG4gICAgbWVzc2FnZTogU3RyaW5nXG4gIH1cblxuICBpbnB1dCBNb2RlbFdoZXJlSW5wdXQge1xuICAgIGlkOiBJbnQhXG4gIH1cblxuICBpbnB1dCBVcGRhdGVNb2RlbElucHV0IHtcbiAgICBmaWVsZHM6IFtTdHJpbmchXSFcbiAgICBwcmltYXJ5S2V5OiBTdHJpbmdcbiAgfVxuXG4gICMgTWV0YWRhdGEgcmVsYXRlZFxuICBpbnB1dCBVcGRhdGVOZXN0ZWRDb2x1bW5NZXRhZGF0YUlucHV0IHtcbiAgICBpZDogSW50IVxuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmdcbiAgICBkZXNjcmlwdGlvbjogU3RyaW5nXG4gIH1cblxuICBpbnB1dCBVcGRhdGVDb2x1bW5NZXRhZGF0YUlucHV0IHtcbiAgICBpZDogSW50IVxuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmdcbiAgICBkZXNjcmlwdGlvbjogU3RyaW5nXG4gIH1cblxuICBpbnB1dCBVcGRhdGVDYWxjdWxhdGVkRmllbGRNZXRhZGF0YUlucHV0IHtcbiAgICBpZDogSW50IVxuICAgIGRlc2NyaXB0aW9uOiBTdHJpbmdcbiAgfVxuXG4gIGlucHV0IFVwZGF0ZVJlbGF0aW9uc2hpcE1ldGFkYXRhSW5wdXQge1xuICAgIGlkOiBJbnQhXG4gICAgZGVzY3JpcHRpb246IFN0cmluZ1xuICB9XG5cbiAgaW5wdXQgVXBkYXRlVmlld0NvbHVtbk1ldGFkYXRhSW5wdXQge1xuICAgIHJlZmVyZW5jZU5hbWU6IFN0cmluZyFcbiAgICBkZXNjcmlwdGlvbjogU3RyaW5nXG4gIH1cblxuICBpbnB1dCBVcGRhdGVNb2RlbE1ldGFkYXRhSW5wdXQge1xuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmcgIyBNb2RlbCBkaXNwbGF5IG5hbWUsIGksZSwgdGhlIGFsaWFzIG9mIHRoZSBtb2RlbFxuICAgIGRlc2NyaXB0aW9uOiBTdHJpbmcgIyBNb2RlbCBkZXNjcmlwdGlvblxuICAgIGNvbHVtbnM6IFtVcGRhdGVDb2x1bW5NZXRhZGF0YUlucHV0IV0gIyBVcGRhdGUgY29sdW1uIG1ldGFkYXRhXG4gICAgbmVzdGVkQ29sdW1uczogW1VwZGF0ZU5lc3RlZENvbHVtbk1ldGFkYXRhSW5wdXQhXSAjIFVwZGF0ZSBuZXN0ZWQgY29sdW1uIG1ldGFkYXRhXG4gICAgY2FsY3VsYXRlZEZpZWxkczogW1VwZGF0ZUNhbGN1bGF0ZWRGaWVsZE1ldGFkYXRhSW5wdXQhXSAjIFVwZGF0ZSBjYWxjdWxhdGVkIGZpZWxkIG1ldGFkYXRhXG4gICAgcmVsYXRpb25zaGlwczogW1VwZGF0ZVJlbGF0aW9uc2hpcE1ldGFkYXRhSW5wdXQhXSAjIFVwZGF0ZSByZWxhdGlvbnNoaXAgbWV0YWRhdGFcbiAgfVxuXG4gIGlucHV0IFVwZGF0ZVZpZXdNZXRhZGF0YUlucHV0IHtcbiAgICBkaXNwbGF5TmFtZTogU3RyaW5nICMgVmlldyBkaXNwbGF5IG5hbWUsIGksZSwgdGhlIGFsaWFzIG9mIHRoZSB2aWV3XG4gICAgZGVzY3JpcHRpb246IFN0cmluZyAjIFZpZXcgZGVzY3JpcHRpb25cbiAgICBjb2x1bW5zOiBbVXBkYXRlVmlld0NvbHVtbk1ldGFkYXRhSW5wdXQhXVxuICB9XG5cbiAgdHlwZSBOZXN0ZWRGaWVsZEluZm8ge1xuICAgIGlkOiBJbnQhXG4gICAgZGlzcGxheU5hbWU6IFN0cmluZyFcbiAgICByZWZlcmVuY2VOYW1lOiBTdHJpbmchXG4gICAgc291cmNlQ29sdW1uTmFtZTogU3RyaW5nIVxuICAgIGNvbHVtblBhdGg6IFtTdHJpbmchXSFcbiAgICB0eXBlOiBTdHJpbmchXG4gICAgcHJvcGVydGllczogSlNPTiFcbiAgfVxuXG4gIHR5cGUgRmllbGRJbmZvIHtcbiAgICBpZDogSW50IVxuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmchXG4gICAgcmVmZXJlbmNlTmFtZTogU3RyaW5nIVxuICAgIHNvdXJjZUNvbHVtbk5hbWU6IFN0cmluZyFcbiAgICB0eXBlOiBTdHJpbmdcbiAgICBpc0NhbGN1bGF0ZWQ6IEJvb2xlYW4hXG4gICAgbm90TnVsbDogQm9vbGVhbiFcbiAgICBleHByZXNzaW9uOiBTdHJpbmdcbiAgICBwcm9wZXJ0aWVzOiBKU09OXG4gICAgbmVzdGVkQ29sdW1uczogW05lc3RlZEZpZWxkSW5mbyFdXG4gIH1cblxuICB0eXBlIE1vZGVsSW5mbyB7XG4gICAgaWQ6IEludCFcbiAgICBkaXNwbGF5TmFtZTogU3RyaW5nIVxuICAgIHJlZmVyZW5jZU5hbWU6IFN0cmluZyFcbiAgICBzb3VyY2VUYWJsZU5hbWU6IFN0cmluZyFcbiAgICByZWZTcWw6IFN0cmluZ1xuICAgIHByaW1hcnlLZXk6IFN0cmluZ1xuICAgIGNhY2hlZDogQm9vbGVhbiFcbiAgICByZWZyZXNoVGltZTogU3RyaW5nXG4gICAgZGVzY3JpcHRpb246IFN0cmluZ1xuICAgIGZpZWxkczogW0ZpZWxkSW5mb10hXG4gICAgY2FsY3VsYXRlZEZpZWxkczogW0ZpZWxkSW5mb10hXG4gICAgcHJvcGVydGllczogSlNPTlxuICB9XG5cbiAgdHlwZSBEZXRhaWxlZE5lc3RlZENvbHVtbiB7XG4gICAgaWQ6IEludCFcbiAgICBkaXNwbGF5TmFtZTogU3RyaW5nIVxuICAgIHJlZmVyZW5jZU5hbWU6IFN0cmluZyFcbiAgICBzb3VyY2VDb2x1bW5OYW1lOiBTdHJpbmchXG4gICAgY29sdW1uUGF0aDogW1N0cmluZyFdIVxuICAgIHR5cGU6IFN0cmluZ1xuICAgIHByb3BlcnRpZXM6IEpTT05cbiAgfVxuXG4gIHR5cGUgRGV0YWlsZWRDb2x1bW4ge1xuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmchXG4gICAgcmVmZXJlbmNlTmFtZTogU3RyaW5nIVxuICAgIHNvdXJjZUNvbHVtbk5hbWU6IFN0cmluZyFcbiAgICB0eXBlOiBTdHJpbmdcbiAgICBpc0NhbGN1bGF0ZWQ6IEJvb2xlYW4hXG4gICAgbm90TnVsbDogQm9vbGVhbiFcbiAgICBwcm9wZXJ0aWVzOiBKU09OIVxuICAgIG5lc3RlZENvbHVtbnM6IFtEZXRhaWxlZE5lc3RlZENvbHVtbiFdXG4gIH1cblxuICB0eXBlIERldGFpbGVkUmVsYXRpb24ge1xuICAgIGZyb21Nb2RlbElkOiBJbnQhXG4gICAgZnJvbUNvbHVtbklkOiBJbnQhXG4gICAgdG9Nb2RlbElkOiBJbnQhXG4gICAgdG9Db2x1bW5JZDogSW50IVxuICAgIHR5cGU6IFJlbGF0aW9uVHlwZSFcbiAgICBuYW1lOiBTdHJpbmchXG4gICAgcHJvcGVydGllczogSlNPTiFcbiAgfVxuXG4gIHR5cGUgRGV0YWlsZWRNb2RlbCB7XG4gICAgZGlzcGxheU5hbWU6IFN0cmluZyFcbiAgICByZWZlcmVuY2VOYW1lOiBTdHJpbmchXG4gICAgc291cmNlVGFibGVOYW1lOiBTdHJpbmchXG4gICAgcmVmU3FsOiBTdHJpbmchXG4gICAgcHJpbWFyeUtleTogU3RyaW5nXG4gICAgY2FjaGVkOiBCb29sZWFuIVxuICAgIHJlZnJlc2hUaW1lOiBTdHJpbmdcbiAgICBkZXNjcmlwdGlvbjogU3RyaW5nXG4gICAgZmllbGRzOiBbRGV0YWlsZWRDb2x1bW5dXG4gICAgY2FsY3VsYXRlZEZpZWxkczogW0RldGFpbGVkQ29sdW1uXVxuICAgIHJlbGF0aW9uczogW0RldGFpbGVkUmVsYXRpb25dXG4gICAgcHJvcGVydGllczogSlNPTiFcbiAgfVxuXG4gICMgVmlld1xuICB0eXBlIFZpZXdJbmZvIHtcbiAgICBpZDogSW50IVxuICAgIG5hbWU6IFN0cmluZyFcbiAgICBzdGF0ZW1lbnQ6IFN0cmluZyFcbiAgICBkaXNwbGF5TmFtZTogU3RyaW5nIVxuICB9XG5cbiAgaW5wdXQgVmlld1doZXJlVW5pcXVlSW5wdXQge1xuICAgIGlkOiBJbnQhXG4gIH1cblxuICBpbnB1dCBQcmV2aWV3Vmlld0RhdGFJbnB1dCB7XG4gICAgaWQ6IEludCFcbiAgICAjIEl0IHdpbGwgcmV0dXJuIGRlZmF1bHQgNTAwIHJvd3MgaWYgbm90IHNwZWNpZmllZCBsaW1pdFxuICAgICMgcmVmZXI6IERFRkFVTFRfUFJFVklFV19MSU1JVFxuICAgIGxpbWl0OiBJbnRcbiAgfVxuXG4gIGlucHV0IENyZWF0ZVZpZXdJbnB1dCB7XG4gICAgbmFtZTogU3RyaW5nIVxuICAgIHJlc3BvbnNlSWQ6IEludCFcbiAgfVxuXG4gIGlucHV0IFZhbGlkYXRlVmlld0lucHV0IHtcbiAgICBuYW1lOiBTdHJpbmchXG4gIH1cblxuICB0eXBlIFZpZXdWYWxpZGF0aW9uUmVzcG9uc2Uge1xuICAgIHZhbGlkOiBCb29sZWFuIVxuICAgIG1lc3NhZ2U6IFN0cmluZ1xuICB9XG5cbiAgIyBvbmJvYXJkaW5nXG4gIHR5cGUgT25ib2FyZGluZ1N0YXR1c1Jlc3BvbnNlIHtcbiAgICBzdGF0dXM6IE9uYm9hcmRpbmdTdGF0dXNcbiAgfVxuXG4gIHR5cGUgTW9kZWxTeW5jUmVzcG9uc2Uge1xuICAgIHN0YXR1czogU3luY1N0YXR1cyFcbiAgfVxuXG4gIHR5cGUgRGlhZ3JhbSB7XG4gICAgbW9kZWxzOiBbRGlhZ3JhbU1vZGVsXSFcbiAgICB2aWV3czogW0RpYWdyYW1WaWV3XSFcbiAgfVxuXG4gIHR5cGUgRGlhZ3JhbVZpZXcge1xuICAgIGlkOiBTdHJpbmchXG4gICAgdmlld0lkOiBJbnQhXG4gICAgbm9kZVR5cGU6IE5vZGVUeXBlIVxuICAgIHN0YXRlbWVudDogU3RyaW5nIVxuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmchXG4gICAgcmVmZXJlbmNlTmFtZTogU3RyaW5nIVxuICAgIGZpZWxkczogW0RpYWdyYW1WaWV3RmllbGRdIVxuICAgIGRlc2NyaXB0aW9uOiBTdHJpbmdcbiAgfVxuXG4gIHR5cGUgRGlhZ3JhbVZpZXdGaWVsZCB7XG4gICAgaWQ6IFN0cmluZyFcbiAgICBkaXNwbGF5TmFtZTogU3RyaW5nIVxuICAgIHJlZmVyZW5jZU5hbWU6IFN0cmluZyFcbiAgICB0eXBlOiBTdHJpbmchXG4gICAgbm9kZVR5cGU6IE5vZGVUeXBlIVxuICAgIGRlc2NyaXB0aW9uOiBTdHJpbmdcbiAgfVxuXG4gIHR5cGUgRGlhZ3JhbU1vZGVsIHtcbiAgICBpZDogU3RyaW5nIVxuICAgIG1vZGVsSWQ6IEludCFcbiAgICBub2RlVHlwZTogTm9kZVR5cGUhXG4gICAgZGlzcGxheU5hbWU6IFN0cmluZyFcbiAgICByZWZlcmVuY2VOYW1lOiBTdHJpbmchXG4gICAgc291cmNlVGFibGVOYW1lOiBTdHJpbmchXG4gICAgcmVmU3FsOiBTdHJpbmdcbiAgICBjYWNoZWQ6IEJvb2xlYW4hXG4gICAgcmVmcmVzaFRpbWU6IFN0cmluZ1xuICAgIGRlc2NyaXB0aW9uOiBTdHJpbmdcbiAgICBmaWVsZHM6IFtEaWFncmFtTW9kZWxGaWVsZF0hXG4gICAgY2FsY3VsYXRlZEZpZWxkczogW0RpYWdyYW1Nb2RlbEZpZWxkXSFcbiAgICByZWxhdGlvbkZpZWxkczogW0RpYWdyYW1Nb2RlbFJlbGF0aW9uRmllbGRdIVxuICB9XG5cbiAgdHlwZSBEaWFncmFtTW9kZWxOZXN0ZWRGaWVsZCB7XG4gICAgaWQ6IFN0cmluZyFcbiAgICBuZXN0ZWRDb2x1bW5JZDogSW50IVxuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmchXG4gICAgcmVmZXJlbmNlTmFtZTogU3RyaW5nIVxuICAgIGNvbHVtblBhdGg6IFtTdHJpbmchXSFcbiAgICB0eXBlOiBTdHJpbmchXG4gICAgZGVzY3JpcHRpb246IFN0cmluZ1xuICB9XG5cbiAgdHlwZSBEaWFncmFtTW9kZWxGaWVsZCB7XG4gICAgaWQ6IFN0cmluZyFcbiAgICBjb2x1bW5JZDogSW50IVxuICAgIG5vZGVUeXBlOiBOb2RlVHlwZSFcbiAgICB0eXBlOiBTdHJpbmchXG4gICAgZGlzcGxheU5hbWU6IFN0cmluZyFcbiAgICByZWZlcmVuY2VOYW1lOiBTdHJpbmchXG4gICAgZGVzY3JpcHRpb246IFN0cmluZ1xuICAgIGlzUHJpbWFyeUtleTogQm9vbGVhbiFcbiAgICBleHByZXNzaW9uOiBTdHJpbmdcbiAgICBhZ2dyZWdhdGlvbjogU3RyaW5nXG4gICAgbGluZWFnZTogW0ludCFdXG4gICAgbmVzdGVkRmllbGRzOiBbRGlhZ3JhbU1vZGVsTmVzdGVkRmllbGQhXVxuICB9XG5cbiAgdHlwZSBEaWFncmFtTW9kZWxSZWxhdGlvbkZpZWxkIHtcbiAgICBpZDogU3RyaW5nIVxuICAgIHJlbGF0aW9uSWQ6IEludCFcbiAgICBub2RlVHlwZTogTm9kZVR5cGUhXG4gICAgdHlwZTogUmVsYXRpb25UeXBlIVxuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmchXG4gICAgcmVmZXJlbmNlTmFtZTogU3RyaW5nIVxuICAgIGRlc2NyaXB0aW9uOiBTdHJpbmdcbiAgICBmcm9tTW9kZWxJZDogSW50IVxuICAgIGZyb21Nb2RlbE5hbWU6IFN0cmluZyFcbiAgICBmcm9tTW9kZWxEaXNwbGF5TmFtZTogU3RyaW5nIVxuICAgIGZyb21Db2x1bW5JZDogSW50IVxuICAgIGZyb21Db2x1bW5OYW1lOiBTdHJpbmchXG4gICAgZnJvbUNvbHVtbkRpc3BsYXlOYW1lOiBTdHJpbmchXG4gICAgdG9Nb2RlbElkOiBJbnQhXG4gICAgdG9Nb2RlbE5hbWU6IFN0cmluZyFcbiAgICB0b01vZGVsRGlzcGxheU5hbWU6IFN0cmluZyFcbiAgICB0b0NvbHVtbklkOiBJbnQhXG4gICAgdG9Db2x1bW5OYW1lOiBTdHJpbmchXG4gICAgdG9Db2x1bW5EaXNwbGF5TmFtZTogU3RyaW5nIVxuICB9XG5cbiAgaW5wdXQgU2ltcGxlTWVhc3VyZUlucHV0IHtcbiAgICBuYW1lOiBTdHJpbmchXG4gICAgdHlwZTogU3RyaW5nIVxuICAgIGlzQ2FsY3VsYXRlZDogQm9vbGVhbiFcbiAgICBub3ROdWxsOiBCb29sZWFuIVxuICAgIHByb3BlcnRpZXM6IEpTT04hXG4gIH1cblxuICBpbnB1dCBEaW1lbnNpb25JbnB1dCB7XG4gICAgbmFtZTogU3RyaW5nIVxuICAgIHR5cGU6IFN0cmluZyFcbiAgICBpc0NhbGN1bGF0ZWQ6IEJvb2xlYW4hXG4gICAgbm90TnVsbDogQm9vbGVhbiFcbiAgICBwcm9wZXJ0aWVzOiBKU09OIVxuICB9XG5cbiAgaW5wdXQgVGltZUdyYWluSW5wdXQge1xuICAgIG5hbWU6IFN0cmluZyFcbiAgICByZWZDb2x1bW46IFN0cmluZyFcbiAgICBkYXRlUGFydHM6IFtTdHJpbmchXSFcbiAgfVxuXG4gIGlucHV0IENyZWF0ZVNpbXBsZU1ldHJpY0lucHV0IHtcbiAgICBuYW1lOiBTdHJpbmchXG4gICAgZGlzcGxheU5hbWU6IFN0cmluZyFcbiAgICBkZXNjcmlwdGlvbjogU3RyaW5nXG4gICAgY2FjaGVkOiBCb29sZWFuIVxuICAgIHJlZnJlc2hUaW1lOiBTdHJpbmdcbiAgICBtb2RlbDogU3RyaW5nIVxuICAgIHByb3BlcnRpZXM6IEpTT04hXG4gICAgbWVhc3VyZTogW1NpbXBsZU1lYXN1cmVJbnB1dCFdIVxuICAgIGRpbWVuc2lvbjogW0RpbWVuc2lvbklucHV0IV0hXG4gICAgdGltZUdyYWluOiBbVGltZUdyYWluSW5wdXQhXSFcbiAgfVxuXG4gICMgVGFza1xuICB0eXBlIFRhc2sge1xuICAgIGlkOiBTdHJpbmchXG4gIH1cblxuICAjIEVycm9yXG4gIHR5cGUgRXJyb3Ige1xuICAgIGNvZGU6IFN0cmluZ1xuICAgIHNob3J0TWVzc2FnZTogU3RyaW5nXG4gICAgbWVzc2FnZTogU3RyaW5nXG4gICAgc3RhY2t0cmFjZTogW1N0cmluZ11cbiAgfVxuXG4gICMgQXNraW5nIFRhc2tcbiAgaW5wdXQgQXNraW5nVGFza0lucHV0IHtcbiAgICBxdWVzdGlvbjogU3RyaW5nIVxuICAgICMgVXNlZCBmb3IgZm9sbG93LXVwIHF1ZXN0aW9uc1xuICAgIHRocmVhZElkOiBJbnRcbiAgfVxuXG4gIGVudW0gQXNraW5nVGFza1N0YXR1cyB7XG4gICAgVU5ERVJTVEFORElOR1xuICAgIFNFQVJDSElOR1xuICAgIFBMQU5OSU5HXG4gICAgR0VORVJBVElOR1xuICAgIENPUlJFQ1RJTkdcbiAgICBGSU5JU0hFRFxuICAgIEZBSUxFRFxuICAgIFNUT1BQRURcbiAgfVxuXG4gIGVudW0gQXNraW5nVGFza1R5cGUge1xuICAgIEdFTkVSQUxcbiAgICBURVhUX1RPX1NRTFxuICAgIE1JU0xFQURJTkdfUVVFUllcbiAgfVxuXG4gIGVudW0gQ2hhcnRUYXNrU3RhdHVzIHtcbiAgICBGRVRDSElOR1xuICAgIEdFTkVSQVRJTkdcbiAgICBGSU5JU0hFRFxuICAgIEZBSUxFRFxuICAgIFNUT1BQRURcbiAgfVxuXG4gIGVudW0gQ2hhcnRUeXBlIHtcbiAgICBCQVJcbiAgICBQSUVcbiAgICBMSU5FXG4gICAgTVVMVElfTElORVxuICAgIEFSRUFcbiAgICBHUk9VUEVEX0JBUlxuICAgIFNUQUNLRURfQkFSXG4gIH1cblxuICBlbnVtIFJlc3VsdENhbmRpZGF0ZVR5cGUge1xuICAgIFZJRVcgIyBWaWV3IHR5cGUgY2FuZGlkYXRlIGlzIHByb3ZpZGVkIGJhc2Qgb24gYSBzYXZlZCB2aWV3XG4gICAgTExNICMgTExNIHR5cGUgY2FuZGlkYXRlIGlzIGNyZWF0ZWQgYnkgTExNXG4gIH1cblxuICB0eXBlIFJlc3VsdENhbmRpZGF0ZSB7XG4gICAgdHlwZTogUmVzdWx0Q2FuZGlkYXRlVHlwZSFcbiAgICBzcWw6IFN0cmluZyFcbiAgICB2aWV3OiBWaWV3SW5mb1xuICB9XG5cbiAgdHlwZSBBc2tpbmdUYXNrIHtcbiAgICBzdGF0dXM6IEFza2luZ1Rhc2tTdGF0dXMhXG4gICAgdHlwZTogQXNraW5nVGFza1R5cGVcbiAgICBlcnJvcjogRXJyb3JcbiAgICBjYW5kaWRhdGVzOiBbUmVzdWx0Q2FuZGlkYXRlIV0hXG4gICAgaW50ZW50UmVhc29uaW5nOiBTdHJpbmdcbiAgfVxuXG4gIGlucHV0IEluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9uc0lucHV0IHtcbiAgICBwcmV2aW91c1F1ZXN0aW9uczogW1N0cmluZyFdXG4gIH1cblxuICBlbnVtIFJlY29tbWVuZGVkUXVlc3Rpb25zVGFza1N0YXR1cyB7XG4gICAgTk9UX1NUQVJURURcbiAgICBHRU5FUkFUSU5HXG4gICAgRklOSVNIRURcbiAgICBGQUlMRURcbiAgfVxuXG4gIHR5cGUgUmVzdWx0UXVlc3Rpb24ge1xuICAgIHF1ZXN0aW9uOiBTdHJpbmchXG4gICAgY2F0ZWdvcnk6IFN0cmluZyFcbiAgICBzcWw6IFN0cmluZyFcbiAgfVxuXG4gIHR5cGUgUmVjb21tZW5kZWRRdWVzdGlvbnNUYXNrIHtcbiAgICBzdGF0dXM6IFJlY29tbWVuZGVkUXVlc3Rpb25zVGFza1N0YXR1cyFcbiAgICBxdWVzdGlvbnM6IFtSZXN1bHRRdWVzdGlvbiFdIVxuICAgIGVycm9yOiBFcnJvclxuICB9XG5cbiAgIyBUaHJlYWRcbiAgaW5wdXQgQ3JlYXRlVGhyZWFkSW5wdXQge1xuICAgIHF1ZXN0aW9uOiBTdHJpbmdcbiAgICBzcWw6IFN0cmluZ1xuICAgIHZpZXdJZDogSW50XG4gIH1cblxuICBpbnB1dCBDcmVhdGVUaHJlYWRSZXNwb25zZUlucHV0IHtcbiAgICBxdWVzdGlvbjogU3RyaW5nXG4gICAgc3FsOiBTdHJpbmdcbiAgICB2aWV3SWQ6IEludFxuICB9XG5cbiAgaW5wdXQgVGhyZWFkVW5pcXVlV2hlcmVJbnB1dCB7XG4gICAgaWQ6IEludCFcbiAgfVxuXG4gIGlucHV0IFVwZGF0ZVRocmVhZElucHV0IHtcbiAgICBzdW1tYXJ5OiBTdHJpbmdcbiAgfVxuXG4gIGlucHV0IEFkanVzdFRocmVhZFJlc3BvbnNlQ2hhcnRJbnB1dCB7XG4gICAgY2hhcnRUeXBlOiBDaGFydFR5cGUhXG4gICAgeEF4aXM6IFN0cmluZ1xuICAgIHlBeGlzOiBTdHJpbmdcbiAgICB4T2Zmc2V0OiBTdHJpbmdcbiAgICBjb2xvcjogU3RyaW5nXG4gICAgdGhldGE6IFN0cmluZ1xuICB9XG5cbiAgaW5wdXQgUHJldmlld0RhdGFJbnB1dCB7XG4gICAgcmVzcG9uc2VJZDogSW50IVxuICAgICMgT3B0aW9uYWwsIG9ubHkgdXNlZCBmb3IgcHJldmlldyBkYXRhIG9mIGEgc2luZ2xlIHN0ZXBcbiAgICBzdGVwSW5kZXg6IEludFxuICAgICMgSXQgd2lsbCByZXR1cm4gZGVmYXVsdCA1MDAgcm93cyBpZiBub3Qgc3BlY2lmaWVkIGxpbWl0XG4gICAgIyByZWZlcjogREVGQVVMVF9QUkVWSUVXX0xJTUlUXG4gICAgbGltaXQ6IEludFxuICB9XG5cbiAgdHlwZSBEZXRhaWxTdGVwIHtcbiAgICBzdW1tYXJ5OiBTdHJpbmchXG4gICAgc3FsOiBTdHJpbmchXG4gICAgY3RlTmFtZTogU3RyaW5nXG4gIH1cblxuICBlbnVtIFRocmVhZFJlc3BvbnNlQW5zd2VyU3RhdHVzIHtcbiAgICBOT1RfU1RBUlRFRFxuICAgIEZFVENISU5HX0RBVEFcbiAgICBQUkVQUk9DRVNTSU5HXG4gICAgU1RSRUFNSU5HXG4gICAgRklOSVNIRURcbiAgICBGQUlMRURcbiAgICBJTlRFUlJVUFRFRFxuICB9XG5cbiAgdHlwZSBUaHJlYWRSZXNwb25zZUFuc3dlckRldGFpbCB7XG4gICAgcXVlcnlJZDogU3RyaW5nXG4gICAgc3RhdHVzOiBUaHJlYWRSZXNwb25zZUFuc3dlclN0YXR1c1xuICAgIGVycm9yOiBFcnJvclxuICAgIG51bVJvd3NVc2VkSW5MTE06IEludFxuICAgIGNvbnRlbnQ6IFN0cmluZ1xuICB9XG5cbiAgdHlwZSBUaHJlYWRSZXNwb25zZUJyZWFrZG93bkRldGFpbCB7XG4gICAgcXVlcnlJZDogU3RyaW5nXG4gICAgc3RhdHVzOiBBc2tpbmdUYXNrU3RhdHVzIVxuICAgIGVycm9yOiBFcnJvclxuICAgIGRlc2NyaXB0aW9uOiBTdHJpbmdcbiAgICBzdGVwczogW0RldGFpbFN0ZXAhXVxuICB9XG5cbiAgdHlwZSBUaHJlYWRSZXNwb25zZUNoYXJ0RGV0YWlsIHtcbiAgICBxdWVyeUlkOiBTdHJpbmdcbiAgICBzdGF0dXM6IENoYXJ0VGFza1N0YXR1cyFcbiAgICBlcnJvcjogRXJyb3JcbiAgICBkZXNjcmlwdGlvbjogU3RyaW5nXG4gICAgY2hhcnRUeXBlOiBDaGFydFR5cGVcbiAgICBjaGFydFNjaGVtYTogSlNPTlxuICAgIGFkanVzdG1lbnQ6IEJvb2xlYW5cbiAgfVxuXG4gIHR5cGUgVGhyZWFkUmVzcG9uc2Uge1xuICAgIGlkOiBJbnQhXG4gICAgdGhyZWFkSWQ6IEludCFcbiAgICBxdWVzdGlvbjogU3RyaW5nIVxuICAgIHNxbDogU3RyaW5nIVxuICAgIHZpZXc6IFZpZXdJbmZvXG4gICAgYnJlYWtkb3duRGV0YWlsOiBUaHJlYWRSZXNwb25zZUJyZWFrZG93bkRldGFpbFxuICAgIGFuc3dlckRldGFpbDogVGhyZWFkUmVzcG9uc2VBbnN3ZXJEZXRhaWxcbiAgICBjaGFydERldGFpbDogVGhyZWFkUmVzcG9uc2VDaGFydERldGFpbFxuICB9XG5cbiAgIyBUaHJlYWQgb25seSBjb25zaXN0cyBvZiBiYXNpYyBpbmZvcm1hdGlvbiBvZiBhIHRocmVhZFxuICB0eXBlIFRocmVhZCB7XG4gICAgaWQ6IEludCFcbiAgICBzdW1tYXJ5OiBTdHJpbmchXG4gIH1cblxuICAjIERldGFpbGVkIHRocmVhZCBjb25zaXN0cyBvZiB0aHJlYWQgYW5kIHRocmVhZCByZXNwb25zZXNcbiAgdHlwZSBEZXRhaWxlZFRocmVhZCB7XG4gICAgaWQ6IEludCFcbiAgICByZXNwb25zZXM6IFtUaHJlYWRSZXNwb25zZSFdIVxuICB9XG5cbiAgdHlwZSBTdWdnZXN0ZWRRdWVzdGlvbiB7XG4gICAgcXVlc3Rpb246IFN0cmluZyFcbiAgICBsYWJlbDogU3RyaW5nIVxuICB9XG4gICMgQXNrIFF1ZXN0aW9ucyBSZXNwb25zZXNcbiAgdHlwZSBTdWdnZXN0ZWRRdWVzdGlvblJlc3BvbnNlIHtcbiAgICBxdWVzdGlvbnM6IFtTdWdnZXN0ZWRRdWVzdGlvbl0hXG4gIH1cblxuICAjIFNldHRpbmdzXG4gIGlucHV0IFVwZGF0ZURhdGFTb3VyY2VJbnB1dCB7XG4gICAgcHJvcGVydGllczogSlNPTiFcbiAgfVxuXG4gIGlucHV0IFVwZGF0ZUN1cnJlbnRQcm9qZWN0SW5wdXQge1xuICAgIGxhbmd1YWdlOiBQcm9qZWN0TGFuZ3VhZ2UhXG4gIH1cblxuICB0eXBlIFNldHRpbmdzIHtcbiAgICBwcm9kdWN0VmVyc2lvbjogU3RyaW5nIVxuICAgIGRhdGFTb3VyY2U6IERhdGFTb3VyY2UhXG4gICAgbGFuZ3VhZ2U6IFByb2plY3RMYW5ndWFnZSFcbiAgfVxuXG4gIHR5cGUgR2V0TURMUmVzdWx0IHtcbiAgICBoYXNoOiBTdHJpbmchXG4gICAgbWRsOiBTdHJpbmdcbiAgfVxuXG4gIGlucHV0IFByZXZpZXdTUUxEYXRhSW5wdXQge1xuICAgIHNxbDogU3RyaW5nIVxuICAgIHByb2plY3RJZDogSW50XG4gICAgbGltaXQ6IEludFxuICAgIGRyeVJ1bjogQm9vbGVhblxuICB9XG5cbiAgIyBTY2hlbWEgQ2hhbmdlXG4gIHR5cGUgU2NoZW1hQ2hhbmdlIHtcbiAgICBkZWxldGVkVGFibGVzOiBbRGV0YWlsZWRDaGFuZ2VUYWJsZSFdXG4gICAgZGVsZXRlZENvbHVtbnM6IFtEZXRhaWxlZENoYW5nZVRhYmxlIV1cbiAgICBtb2RpZmllZENvbHVtbnM6IFtEZXRhaWxlZENoYW5nZVRhYmxlIV1cbiAgICBsYXN0U2NoZW1hQ2hhbmdlVGltZTogU3RyaW5nXG4gIH1cblxuICB0eXBlIERldGFpbGVkQ2hhbmdlVGFibGUge1xuICAgIHNvdXJjZVRhYmxlTmFtZTogU3RyaW5nIVxuICAgIGRpc3BsYXlOYW1lOiBTdHJpbmchXG4gICAgY29sdW1uczogW0RldGFpbGVkQ2hhbmdlQ29sdW1uIV0hXG4gICAgY2FsY3VsYXRlZEZpZWxkczogW0RldGFpbGVkQWZmZWN0ZWRDYWxjdWxhdGVkRmllbGRzIV0hXG4gICAgcmVsYXRpb25zaGlwczogW0RldGFpbGVkQWZmZWN0ZWRSZWxhdGlvbnNoaXBzIV0hXG4gIH1cblxuICB0eXBlIERldGFpbGVkQ2hhbmdlQ29sdW1uIHtcbiAgICBzb3VyY2VDb2x1bW5OYW1lOiBTdHJpbmchXG4gICAgZGlzcGxheU5hbWU6IFN0cmluZyFcbiAgICB0eXBlOiBTdHJpbmchXG4gIH1cblxuICB0eXBlIERldGFpbGVkQWZmZWN0ZWRDYWxjdWxhdGVkRmllbGRzIHtcbiAgICBkaXNwbGF5TmFtZTogU3RyaW5nIVxuICAgIHJlZmVyZW5jZU5hbWU6IFN0cmluZyFcbiAgICB0eXBlOiBTdHJpbmchXG4gIH1cblxuICB0eXBlIERldGFpbGVkQWZmZWN0ZWRSZWxhdGlvbnNoaXBzIHtcbiAgICBkaXNwbGF5TmFtZTogU3RyaW5nIVxuICAgIHJlZmVyZW5jZU5hbWU6IFN0cmluZyFcbiAgfVxuXG4gIGlucHV0IFJlc29sdmVTY2hlbWFDaGFuZ2VXaGVyZUlucHV0IHtcbiAgICB0eXBlOiBTY2hlbWFDaGFuZ2VUeXBlIVxuICB9XG5cbiAgIyBMZWFybmluZ1xuICB0eXBlIExlYXJuaW5nUmVjb3JkIHtcbiAgICBwYXRoczogW1N0cmluZyFdIVxuICB9XG5cbiAgaW5wdXQgU2F2ZUxlYXJuaW5nUmVjb3JkSW5wdXQge1xuICAgIHBhdGg6IFN0cmluZyFcbiAgfVxuXG4gICMgRGFzaGJvYXJkXG4gIGVudW0gRGFzaGJvYXJkSXRlbVR5cGUge1xuICAgIEJBUlxuICAgIFBJRVxuICAgIExJTkVcbiAgICBNVUxUSV9MSU5FXG4gICAgQVJFQVxuICAgIEdST1VQRURfQkFSXG4gICAgU1RBQ0tFRF9CQVJcbiAgICBUQUJMRVxuICAgIE5VTUJFUlxuICB9XG5cbiAgaW5wdXQgRGFzaGJvYXJkSXRlbVdoZXJlSW5wdXQge1xuICAgIGlkOiBJbnQhXG4gIH1cblxuICBpbnB1dCBDcmVhdGVEYXNoYm9hcmRJdGVtSW5wdXQge1xuICAgIGl0ZW1UeXBlOiBEYXNoYm9hcmRJdGVtVHlwZSFcbiAgICByZXNwb25zZUlkOiBJbnQhXG4gIH1cblxuICBpbnB1dCBJdGVtTGF5b3V0SW5wdXQge1xuICAgIGl0ZW1JZDogSW50IVxuICAgIHg6IEludCFcbiAgICB5OiBJbnQhXG4gICAgdzogSW50IVxuICAgIGg6IEludCFcbiAgfVxuXG4gIGlucHV0IFVwZGF0ZURhc2hib2FyZEl0ZW1MYXlvdXRzSW5wdXQge1xuICAgIGxheW91dHM6IFtJdGVtTGF5b3V0SW5wdXQhXSFcbiAgfVxuXG4gIGlucHV0IERlbGV0ZURhc2hib2FyZEl0ZW1JbnB1dCB7XG4gICAgaXRlbUlkOiBJbnQhXG4gIH1cblxuICBpbnB1dCBQcmV2aWV3SXRlbVNRTElucHV0IHtcbiAgICBpdGVtSWQ6IEludCFcbiAgICBsaW1pdDogSW50XG4gIH1cblxuICB0eXBlIERhc2hib2FyZEl0ZW1MYXlvdXQge1xuICAgIHg6IEludCFcbiAgICB5OiBJbnQhXG4gICAgdzogSW50IVxuICAgIGg6IEludCFcbiAgfVxuXG4gIHR5cGUgRGFzaGJvYXJkSXRlbURldGFpbCB7XG4gICAgc3FsOiBTdHJpbmchXG4gICAgY2hhcnRTY2hlbWE6IEpTT05cbiAgfVxuXG4gIHR5cGUgRGFzaGJvYXJkSXRlbSB7XG4gICAgaWQ6IEludCFcbiAgICBkYXNoYm9hcmRJZDogSW50IVxuICAgIHR5cGU6IERhc2hib2FyZEl0ZW1UeXBlIVxuICAgIGxheW91dDogRGFzaGJvYXJkSXRlbUxheW91dCFcbiAgICBkZXRhaWw6IERhc2hib2FyZEl0ZW1EZXRhaWwhXG4gIH1cblxuICAjIFF1ZXJ5IGFuZCBNdXRhdGlvblxuICB0eXBlIFF1ZXJ5IHtcbiAgICAjIE9uIEJvYXJkaW5nIFN0ZXBzXG4gICAgbGlzdERhdGFTb3VyY2VUYWJsZXM6IFtDb21wYWN0VGFibGUhXSFcbiAgICBhdXRvR2VuZXJhdGVSZWxhdGlvbjogW1JlY29tbWVuZFJlbGF0aW9ucyFdIVxuICAgIG9uYm9hcmRpbmdTdGF0dXM6IE9uYm9hcmRpbmdTdGF0dXNSZXNwb25zZSFcblxuICAgICMgTW9kZWxpbmcgUGFnZVxuICAgIGxpc3RNb2RlbHM6IFtNb2RlbEluZm8hXSFcbiAgICBtb2RlbCh3aGVyZTogTW9kZWxXaGVyZUlucHV0ISk6IERldGFpbGVkTW9kZWwhXG4gICAgbW9kZWxTeW5jOiBNb2RlbFN5bmNSZXNwb25zZSFcbiAgICBkaWFncmFtOiBEaWFncmFtIVxuICAgIHNjaGVtYUNoYW5nZTogU2NoZW1hQ2hhbmdlIVxuXG4gICAgIyBWaWV3XG4gICAgbGlzdFZpZXdzOiBbVmlld0luZm8hXSFcbiAgICB2aWV3KHdoZXJlOiBWaWV3V2hlcmVVbmlxdWVJbnB1dCEpOiBWaWV3SW5mbyFcblxuICAgICMgQXNrXG4gICAgYXNraW5nVGFzayh0YXNrSWQ6IFN0cmluZyEpOiBBc2tpbmdUYXNrIVxuICAgIHN1Z2dlc3RlZFF1ZXN0aW9uczogU3VnZ2VzdGVkUXVlc3Rpb25SZXNwb25zZSFcbiAgICB0aHJlYWRzOiBbVGhyZWFkIV0hXG4gICAgdGhyZWFkKHRocmVhZElkOiBJbnQhKTogRGV0YWlsZWRUaHJlYWQhXG4gICAgdGhyZWFkUmVzcG9uc2UocmVzcG9uc2VJZDogSW50ISk6IFRocmVhZFJlc3BvbnNlIVxuICAgIG5hdGl2ZVNxbChyZXNwb25zZUlkOiBJbnQhKTogU3RyaW5nIVxuXG4gICAgIyBTZXR0aW5nc1xuICAgIHNldHRpbmdzOiBTZXR0aW5ncyFcblxuICAgICMgU3lzdGVtXG4gICAgZ2V0TURMKGhhc2g6IFN0cmluZyEpOiBHZXRNRExSZXN1bHQhXG5cbiAgICAjIExlYXJuaW5nXG4gICAgbGVhcm5pbmdSZWNvcmQ6IExlYXJuaW5nUmVjb3JkIVxuXG4gICAgIyBSZWNvbW1lbmRhdGlvbiBxdWVzdGlvbnNcbiAgICBnZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyh0aHJlYWRJZDogSW50ISk6IFJlY29tbWVuZGVkUXVlc3Rpb25zVGFzayFcbiAgICBnZXRQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnM6IFJlY29tbWVuZGVkUXVlc3Rpb25zVGFzayFcbiAgICBpbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnModGFza0lkOiBTdHJpbmchKTogUmVjb21tZW5kZWRRdWVzdGlvbnNUYXNrIVxuXG4gICAgIyBEYXNoYm9hcmRcbiAgICBkYXNoYm9hcmRJdGVtczogW0Rhc2hib2FyZEl0ZW0hXSFcbiAgfVxuXG4gIHR5cGUgTXV0YXRpb24ge1xuICAgICMgT24gQm9hcmRpbmcgU3RlcHNcbiAgICBzYXZlRGF0YVNvdXJjZShkYXRhOiBEYXRhU291cmNlSW5wdXQhKTogRGF0YVNvdXJjZSFcbiAgICBzdGFydFNhbXBsZURhdGFzZXQoZGF0YTogU2FtcGxlRGF0YXNldElucHV0ISk6IEpTT04hXG4gICAgc2F2ZVRhYmxlcyhkYXRhOiBTYXZlVGFibGVzSW5wdXQhKTogSlNPTiFcbiAgICBzYXZlUmVsYXRpb25zKGRhdGE6IFNhdmVSZWxhdGlvbklucHV0ISk6IEpTT04hXG4gICAgZGVwbG95KGZvcmNlOiBCb29sZWFuKTogSlNPTiFcblxuICAgICMgTW9kZWxpbmcgUGFnZVxuICAgIGNyZWF0ZU1vZGVsKGRhdGE6IENyZWF0ZU1vZGVsSW5wdXQhKTogSlNPTiFcbiAgICB1cGRhdGVNb2RlbCh3aGVyZTogTW9kZWxXaGVyZUlucHV0ISwgZGF0YTogVXBkYXRlTW9kZWxJbnB1dCEpOiBKU09OIVxuICAgIGRlbGV0ZU1vZGVsKHdoZXJlOiBNb2RlbFdoZXJlSW5wdXQhKTogQm9vbGVhbiFcbiAgICBwcmV2aWV3TW9kZWxEYXRhKHdoZXJlOiBXaGVyZUlkSW5wdXQhKTogSlNPTiFcbiAgICB0cmlnZ2VyRGF0YVNvdXJjZURldGVjdGlvbjogQm9vbGVhbiFcbiAgICByZXNvbHZlU2NoZW1hQ2hhbmdlKHdoZXJlOiBSZXNvbHZlU2NoZW1hQ2hhbmdlV2hlcmVJbnB1dCEpOiBCb29sZWFuIVxuXG4gICAgIyBNZXRhZGF0YVxuICAgIHVwZGF0ZU1vZGVsTWV0YWRhdGEoXG4gICAgICB3aGVyZTogTW9kZWxXaGVyZUlucHV0IVxuICAgICAgZGF0YTogVXBkYXRlTW9kZWxNZXRhZGF0YUlucHV0IVxuICAgICk6IEJvb2xlYW4hXG4gICAgdXBkYXRlVmlld01ldGFkYXRhKFxuICAgICAgd2hlcmU6IFZpZXdXaGVyZVVuaXF1ZUlucHV0IVxuICAgICAgZGF0YTogVXBkYXRlVmlld01ldGFkYXRhSW5wdXQhXG4gICAgKTogQm9vbGVhbiFcblxuICAgICMgUmVsYXRpb25cbiAgICBjcmVhdGVSZWxhdGlvbihkYXRhOiBSZWxhdGlvbklucHV0ISk6IEpTT04hXG4gICAgdXBkYXRlUmVsYXRpb24oZGF0YTogVXBkYXRlUmVsYXRpb25JbnB1dCEsIHdoZXJlOiBXaGVyZUlkSW5wdXQhKTogSlNPTiFcbiAgICBkZWxldGVSZWxhdGlvbih3aGVyZTogV2hlcmVJZElucHV0ISk6IEJvb2xlYW4hXG5cbiAgICAjIENhbGN1bGF0ZWQgZmllbGRcbiAgICBjcmVhdGVDYWxjdWxhdGVkRmllbGQoZGF0YTogQ3JlYXRlQ2FsY3VsYXRlZEZpZWxkSW5wdXQhKTogSlNPTiFcbiAgICB1cGRhdGVDYWxjdWxhdGVkRmllbGQoXG4gICAgICB3aGVyZTogVXBkYXRlQ2FsY3VsYXRlZEZpZWxkV2hlcmUhXG4gICAgICBkYXRhOiBVcGRhdGVDYWxjdWxhdGVkRmllbGRJbnB1dCFcbiAgICApOiBKU09OIVxuICAgIGRlbGV0ZUNhbGN1bGF0ZWRGaWVsZCh3aGVyZTogVXBkYXRlQ2FsY3VsYXRlZEZpZWxkV2hlcmUpOiBCb29sZWFuIVxuICAgIHZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkKFxuICAgICAgZGF0YTogVmFsaWRhdGVDYWxjdWxhdGVkRmllbGRJbnB1dCFcbiAgICApOiBDYWxjdWxhdGVkRmllbGRWYWxpZGF0aW9uUmVzcG9uc2UhXG5cbiAgICAjIFZpZXdcbiAgICBjcmVhdGVWaWV3KGRhdGE6IENyZWF0ZVZpZXdJbnB1dCEpOiBWaWV3SW5mbyFcbiAgICBkZWxldGVWaWV3KHdoZXJlOiBWaWV3V2hlcmVVbmlxdWVJbnB1dCEpOiBCb29sZWFuIVxuICAgIHByZXZpZXdWaWV3RGF0YSh3aGVyZTogUHJldmlld1ZpZXdEYXRhSW5wdXQhKTogSlNPTiFcbiAgICB2YWxpZGF0ZVZpZXcoZGF0YTogVmFsaWRhdGVWaWV3SW5wdXQhKTogVmlld1ZhbGlkYXRpb25SZXNwb25zZSFcblxuICAgICMgQXNrXG4gICAgY3JlYXRlQXNraW5nVGFzayhkYXRhOiBBc2tpbmdUYXNrSW5wdXQhKTogVGFzayFcbiAgICBjYW5jZWxBc2tpbmdUYXNrKHRhc2tJZDogU3RyaW5nISk6IEJvb2xlYW4hXG5cbiAgICAjIFRocmVhZFxuICAgIGNyZWF0ZVRocmVhZChkYXRhOiBDcmVhdGVUaHJlYWRJbnB1dCEpOiBUaHJlYWQhXG4gICAgdXBkYXRlVGhyZWFkKFxuICAgICAgd2hlcmU6IFRocmVhZFVuaXF1ZVdoZXJlSW5wdXQhXG4gICAgICBkYXRhOiBVcGRhdGVUaHJlYWRJbnB1dCFcbiAgICApOiBUaHJlYWQhXG4gICAgZGVsZXRlVGhyZWFkKHdoZXJlOiBUaHJlYWRVbmlxdWVXaGVyZUlucHV0ISk6IEJvb2xlYW4hXG5cbiAgICAjIFRocmVhZCBSZXNwb25zZVxuICAgIGNyZWF0ZVRocmVhZFJlc3BvbnNlKFxuICAgICAgdGhyZWFkSWQ6IEludCFcbiAgICAgIGRhdGE6IENyZWF0ZVRocmVhZFJlc3BvbnNlSW5wdXQhXG4gICAgKTogVGhyZWFkUmVzcG9uc2UhXG4gICAgcHJldmlld0RhdGEod2hlcmU6IFByZXZpZXdEYXRhSW5wdXQhKTogSlNPTiFcbiAgICBwcmV2aWV3QnJlYWtkb3duRGF0YSh3aGVyZTogUHJldmlld0RhdGFJbnB1dCEpOiBKU09OIVxuXG4gICAgIyBHZW5lcmF0ZSBUaHJlYWQgUmVzcG9uc2UgQnJlYWtkb3duXG4gICAgZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUJyZWFrZG93bihyZXNwb25zZUlkOiBJbnQhKTogVGhyZWFkUmVzcG9uc2UhXG5cbiAgICAjIEdlbmVyYXRlIFRocmVhZCBSZXNwb25zZSBBbnN3ZXJcbiAgICBnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQW5zd2VyKHJlc3BvbnNlSWQ6IEludCEpOiBUaHJlYWRSZXNwb25zZSFcblxuICAgICMgR2VuZXJhdGUgVGhyZWFkIFJlc3BvbnNlIENoYXJ0XG4gICAgZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUNoYXJ0KHJlc3BvbnNlSWQ6IEludCEpOiBUaHJlYWRSZXNwb25zZSFcblxuICAgICMgQWRqdXN0IFRocmVhZCBSZXNwb25zZSBDaGFydFxuICAgIGFkanVzdFRocmVhZFJlc3BvbnNlQ2hhcnQoXG4gICAgICByZXNwb25zZUlkOiBJbnQhXG4gICAgICBkYXRhOiBBZGp1c3RUaHJlYWRSZXNwb25zZUNoYXJ0SW5wdXQhXG4gICAgKTogVGhyZWFkUmVzcG9uc2UhXG5cbiAgICAjIFNldHRpbmdzXG4gICAgcmVzZXRDdXJyZW50UHJvamVjdDogQm9vbGVhbiFcbiAgICB1cGRhdGVDdXJyZW50UHJvamVjdChkYXRhOiBVcGRhdGVDdXJyZW50UHJvamVjdElucHV0ISk6IEJvb2xlYW4hXG4gICAgdXBkYXRlRGF0YVNvdXJjZShkYXRhOiBVcGRhdGVEYXRhU291cmNlSW5wdXQhKTogRGF0YVNvdXJjZSFcblxuICAgICMgcHJldmlld1xuICAgIHByZXZpZXdTcWwoZGF0YTogUHJldmlld1NRTERhdGFJbnB1dCk6IEpTT04hXG5cbiAgICAjIExlYXJuaW5nXG4gICAgc2F2ZUxlYXJuaW5nUmVjb3JkKGRhdGE6IFNhdmVMZWFybmluZ1JlY29yZElucHV0ISk6IExlYXJuaW5nUmVjb3JkIVxuXG4gICAgIyBSZWNvbW1lbmRhdGlvbiBxdWVzdGlvbnNcbiAgICBnZW5lcmF0ZVRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKHRocmVhZElkOiBJbnQhKTogQm9vbGVhbiFcbiAgICBnZW5lcmF0ZVByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9uczogQm9vbGVhbiFcbiAgICBjcmVhdGVJbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnMoXG4gICAgICBkYXRhOiBJbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnNJbnB1dCFcbiAgICApOiBUYXNrIVxuXG4gICAgIyBEYXNoYm9hcmRcbiAgICB1cGRhdGVEYXNoYm9hcmRJdGVtTGF5b3V0cyhcbiAgICAgIGRhdGE6IFVwZGF0ZURhc2hib2FyZEl0ZW1MYXlvdXRzSW5wdXQhXG4gICAgKTogW0Rhc2hib2FyZEl0ZW0hXSFcbiAgICBjcmVhdGVEYXNoYm9hcmRJdGVtKGRhdGE6IENyZWF0ZURhc2hib2FyZEl0ZW1JbnB1dCEpOiBEYXNoYm9hcmRJdGVtIVxuICAgIGRlbGV0ZURhc2hib2FyZEl0ZW0od2hlcmU6IERhc2hib2FyZEl0ZW1XaGVyZUlucHV0ISk6IEJvb2xlYW4hXG4gICAgcHJldmlld0l0ZW1TUUwoZGF0YTogUHJldmlld0l0ZW1TUUxJbnB1dCEpOiBKU09OIVxuICB9XG5gO1xuIl0sIm5hbWVzIjpbImdxbCIsInR5cGVEZWZzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/schema.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/askingService.ts":
/*!*****************************************************!*\
  !*** ./src/apollo/server/services/askingService.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AskingService: () => (/* binding */ AskingService),\n/* harmony export */   RecommendQuestionResultStatus: () => (/* binding */ RecommendQuestionResultStatus),\n/* harmony export */   ThreadResponseAnswerStatus: () => (/* binding */ ThreadResponseAnswerStatus),\n/* harmony export */   constructCteSql: () => (/* binding */ constructCteSql)\n/* harmony export */ });\n/* harmony import */ var _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash/isEmpty */ \"lodash/isEmpty\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isNil */ \"lodash/isNil\");\n/* harmony import */ var lodash_isNil__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isNil__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var sql_formatter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sql-formatter */ \"sql-formatter\");\n/* harmony import */ var _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\n/* harmony import */ var _backgrounds__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../backgrounds */ \"(api)/./src/apollo/server/backgrounds/index.ts\");\n/* harmony import */ var _server_config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @server/config */ \"(api)/./src/apollo/server/config.ts\");\n/* harmony import */ var _backgrounds_textBasedAnswerBackgroundTracker__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../backgrounds/textBasedAnswerBackgroundTracker */ \"(api)/./src/apollo/server/backgrounds/textBasedAnswerBackgroundTracker.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sql_formatter__WEBPACK_IMPORTED_MODULE_4__, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__, _backgrounds__WEBPACK_IMPORTED_MODULE_6__, _backgrounds_textBasedAnswerBackgroundTracker__WEBPACK_IMPORTED_MODULE_8__]);\n([sql_formatter__WEBPACK_IMPORTED_MODULE_4__, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__, _backgrounds__WEBPACK_IMPORTED_MODULE_6__, _backgrounds_textBasedAnswerBackgroundTracker__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\nconst config = (0,_server_config__WEBPACK_IMPORTED_MODULE_7__.getConfig)();\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.getLogger)(\"AskingService\");\nlogger.level = \"debug\";\nvar RecommendQuestionResultStatus;\n(function(RecommendQuestionResultStatus) {\n    RecommendQuestionResultStatus[\"NOT_STARTED\"] = \"NOT_STARTED\";\n    RecommendQuestionResultStatus[\"GENERATING\"] = \"GENERATING\";\n    RecommendQuestionResultStatus[\"FINISHED\"] = \"FINISHED\";\n    RecommendQuestionResultStatus[\"FAILED\"] = \"FAILED\";\n})(RecommendQuestionResultStatus || (RecommendQuestionResultStatus = {}));\nvar ThreadResponseAnswerStatus;\n(function(ThreadResponseAnswerStatus) {\n    ThreadResponseAnswerStatus[\"NOT_STARTED\"] = \"NOT_STARTED\";\n    ThreadResponseAnswerStatus[\"FETCHING_DATA\"] = \"FETCHING_DATA\";\n    ThreadResponseAnswerStatus[\"PREPROCESSING\"] = \"PREPROCESSING\";\n    ThreadResponseAnswerStatus[\"STREAMING\"] = \"STREAMING\";\n    ThreadResponseAnswerStatus[\"FINISHED\"] = \"FINISHED\";\n    ThreadResponseAnswerStatus[\"FAILED\"] = \"FAILED\";\n    ThreadResponseAnswerStatus[\"INTERRUPTED\"] = \"INTERRUPTED\";\n})(ThreadResponseAnswerStatus || (ThreadResponseAnswerStatus = {}));\n/**\n * utility function to check if the status is finalized\n */ const isFinalized = (status)=>{\n    return status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.AskResultStatus.FAILED || status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.AskResultStatus.FINISHED || status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.AskResultStatus.STOPPED;\n};\n/**\n * Given a list of steps, construct the SQL statement with CTEs\n * If stepIndex is provided, only construct the SQL from top to that step\n * @param steps\n * @param stepIndex\n * @returns string\n */ const constructCteSql = (steps, stepIndex)=>{\n    // validate stepIndex\n    if (!lodash_isNil__WEBPACK_IMPORTED_MODULE_3___default()(stepIndex) && (stepIndex < 0 || stepIndex >= steps.length)) {\n        throw new Error(`Invalid stepIndex: ${stepIndex}`);\n    }\n    const slicedSteps = lodash_isNil__WEBPACK_IMPORTED_MODULE_3___default()(stepIndex) ? steps : steps.slice(0, stepIndex + 1);\n    // if there's only one step, return the sql directly\n    if (slicedSteps.length === 1) {\n        return `-- ${slicedSteps[0].summary}\\n${slicedSteps[0].sql}`;\n    }\n    let sql = \"WITH \";\n    slicedSteps.forEach((step, index)=>{\n        if (index === slicedSteps.length - 1) {\n            // if it's the last step, remove the trailing comma.\n            // no need to wrap with WITH\n            sql += `\\n-- ${step.summary}\\n`;\n            sql += `${step.sql}`;\n        } else if (index === slicedSteps.length - 2) {\n            // if it's the last two steps, remove the trailing comma.\n            // wrap with CTE\n            sql += `${step.cteName} AS`;\n            sql += `\\n-- ${step.summary}\\n`;\n            sql += `(${step.sql})`;\n        } else {\n            // if it's not the last step, wrap with CTE\n            sql += `${step.cteName} AS`;\n            sql += `\\n-- ${step.summary}\\n`;\n            sql += `(${step.sql}),`;\n        }\n    });\n    return sql;\n};\n/**\n * Background tracker to track the status of the asking breakdown task\n */ class BreakdownBackgroundTracker {\n    constructor({ telemetry, wrenAIAdaptor, threadResponseRepository }){\n        // tasks is a kv pair of task id and thread response\n        this.tasks = {};\n        this.runningJobs = new Set();\n        this.telemetry = telemetry;\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.threadResponseRepository = threadResponseRepository;\n        this.intervalTime = 1000;\n        this.start();\n    }\n    start() {\n        logger.info(\"Background tracker started\");\n        setInterval(()=>{\n            const jobs = Object.values(this.tasks).map((threadResponse)=>async ()=>{\n                    // check if same job is running\n                    if (this.runningJobs.has(threadResponse.id)) {\n                        return;\n                    }\n                    // mark the job as running\n                    this.runningJobs.add(threadResponse.id);\n                    // get the answer detail\n                    const breakdownDetail = threadResponse.breakdownDetail;\n                    // get the latest result from AI service\n                    const result = await this.wrenAIAdaptor.getAskDetailResult(breakdownDetail.queryId);\n                    // check if status change\n                    if (breakdownDetail.status === result.status) {\n                        // mark the job as finished\n                        logger.debug(`Job ${threadResponse.id} status not changed, finished`);\n                        this.runningJobs.delete(threadResponse.id);\n                        return;\n                    }\n                    // update database\n                    const updatedBreakdownDetail = {\n                        queryId: breakdownDetail.queryId,\n                        status: result?.status,\n                        error: result?.error,\n                        description: result?.response?.description,\n                        steps: result?.response?.steps\n                    };\n                    logger.debug(`Job ${threadResponse.id} status changed, updating`);\n                    await this.threadResponseRepository.updateOne(threadResponse.id, {\n                        breakdownDetail: updatedBreakdownDetail\n                    });\n                    // remove the task from tracker if it is finalized\n                    if (isFinalized(result.status)) {\n                        const eventProperties = {\n                            question: threadResponse.question,\n                            error: result.error\n                        };\n                        if (result.status === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.AskResultStatus.FINISHED) {\n                            this.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__.TelemetryEvent.HOME_ANSWER_BREAKDOWN, eventProperties);\n                        } else {\n                            this.telemetry.sendEvent(_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__.TelemetryEvent.HOME_ANSWER_BREAKDOWN, eventProperties, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__.WrenService.AI, false);\n                        }\n                        logger.debug(`Job ${threadResponse.id} is finalized, removing`);\n                        delete this.tasks[threadResponse.id];\n                    }\n                    // mark the job as finished\n                    this.runningJobs.delete(threadResponse.id);\n                });\n            // run the jobs\n            Promise.allSettled(jobs.map((job)=>job())).then((results)=>{\n                // show reason of rejection\n                results.forEach((result, index)=>{\n                    if (result.status === \"rejected\") {\n                        logger.error(`Job ${index} failed: ${result.reason}`);\n                    }\n                });\n            });\n        }, this.intervalTime);\n    }\n    addTask(threadResponse) {\n        this.tasks[threadResponse.id] = threadResponse;\n    }\n    getTasks() {\n        return this.tasks;\n    }\n}\nclass AskingService {\n    constructor({ telemetry, wrenAIAdaptor, deployService, projectService, viewRepository, threadRepository, threadResponseRepository, queryService, mdlService }){\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.deployService = deployService;\n        this.projectService = projectService;\n        this.viewRepository = viewRepository;\n        this.threadRepository = threadRepository;\n        this.threadResponseRepository = threadResponseRepository;\n        this.telemetry = telemetry;\n        this.queryService = queryService;\n        this.breakdownBackgroundTracker = new BreakdownBackgroundTracker({\n            telemetry,\n            wrenAIAdaptor,\n            threadResponseRepository\n        });\n        this.textBasedAnswerBackgroundTracker = new _backgrounds_textBasedAnswerBackgroundTracker__WEBPACK_IMPORTED_MODULE_8__.TextBasedAnswerBackgroundTracker({\n            wrenAIAdaptor,\n            threadResponseRepository,\n            projectService,\n            deployService,\n            queryService\n        });\n        this.chartBackgroundTracker = new _backgrounds__WEBPACK_IMPORTED_MODULE_6__.ChartBackgroundTracker({\n            telemetry,\n            wrenAIAdaptor,\n            threadResponseRepository\n        });\n        this.chartAdjustmentBackgroundTracker = new _backgrounds__WEBPACK_IMPORTED_MODULE_6__.ChartAdjustmentBackgroundTracker({\n            telemetry,\n            wrenAIAdaptor,\n            threadResponseRepository\n        });\n        this.threadRecommendQuestionBackgroundTracker = new _backgrounds__WEBPACK_IMPORTED_MODULE_6__.ThreadRecommendQuestionBackgroundTracker({\n            telemetry,\n            wrenAIAdaptor,\n            threadRepository\n        });\n        this.mdlService = mdlService;\n    }\n    async getThreadRecommendationQuestions(threadId) {\n        const thread = await this.threadRepository.findOneBy({\n            id: threadId\n        });\n        if (!thread) {\n            throw new Error(`Thread ${threadId} not found`);\n        }\n        // handle not started\n        const res = {\n            status: \"NOT_STARTED\",\n            questions: [],\n            error: null\n        };\n        if (thread.queryId && thread.questionsStatus) {\n            res.status = RecommendQuestionResultStatus[thread.questionsStatus] ? RecommendQuestionResultStatus[thread.questionsStatus] : res.status;\n            res.questions = thread.questions || [];\n            res.error = thread.questionsError;\n        }\n        return res;\n    }\n    async generateThreadRecommendationQuestions(threadId) {\n        const thread = await this.threadRepository.findOneBy({\n            id: threadId\n        });\n        if (!thread) {\n            throw new Error(`Thread ${threadId} not found`);\n        }\n        if (this.threadRecommendQuestionBackgroundTracker.isExist(thread)) {\n            logger.debug(`thread \"${threadId}\" recommended questions are generating, skip the current request`);\n            return;\n        }\n        const project = await this.projectService.getCurrentProject();\n        const { manifest } = await this.mdlService.makeCurrentModelMDL();\n        const threadResponses = await this.threadResponseRepository.findAllBy({\n            threadId\n        });\n        // descending order and get the latest 5\n        const slicedThreadResponses = threadResponses.sort((a, b)=>b.id - a.id).slice(0, 5);\n        const questions = slicedThreadResponses.map(({ question })=>question);\n        const recommendQuestionData = {\n            manifest,\n            previousQuestions: questions,\n            ...this.getThreadRecommendationQuestionsConfig(project)\n        };\n        const result = await this.wrenAIAdaptor.generateRecommendationQuestions(recommendQuestionData);\n        // reset thread recommended questions\n        const updatedThread = await this.threadRepository.updateOne(threadId, {\n            queryId: result.queryId,\n            questionsStatus: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.RecommendationQuestionStatus.GENERATING,\n            questions: [],\n            questionsError: null\n        });\n        this.threadRecommendQuestionBackgroundTracker.addTask(updatedThread);\n        return;\n    }\n    async initialize() {\n        // list thread responses from database\n        // filter status not finalized and put them into background tracker\n        const threadResponses = await this.threadResponseRepository.findAll();\n        const unfininshedBreakdownThreadResponses = threadResponses.filter((threadResponse)=>threadResponse?.breakdownDetail?.status && !isFinalized(threadResponse?.breakdownDetail?.status));\n        logger.info(`Initialization: adding unfininshed breakdown thread responses (total: ${unfininshedBreakdownThreadResponses.length}) to background tracker`);\n        for (const threadResponse of unfininshedBreakdownThreadResponses){\n            this.breakdownBackgroundTracker.addTask(threadResponse);\n        }\n    }\n    /**\n   * Asking task.\n   */ async createAskingTask(input, payload) {\n        const { threadId, language } = payload;\n        const deployId = await this.getDeployId();\n        // if it's a follow-up question, then the input will have a threadId\n        // then use the threadId to get the sql and get the steps of last thread response\n        // construct it into AskHistory and pass to ask\n        const history = threadId ? await this.getHistory(threadId) : null;\n        const response = await this.wrenAIAdaptor.ask({\n            query: input.question,\n            history,\n            deployId,\n            configurations: {\n                language\n            }\n        });\n        return {\n            id: response.queryId\n        };\n    }\n    async cancelAskingTask(taskId) {\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__.TelemetryEvent.HOME_CANCEL_ASK;\n        try {\n            await this.wrenAIAdaptor.cancelAsk(taskId);\n            this.telemetry.sendEvent(eventName, {});\n        } catch (err) {\n            this.telemetry.sendEvent(eventName, {}, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async getAskingTask(taskId) {\n        return this.wrenAIAdaptor.getAskResult(taskId);\n    }\n    /**\n   * Asking detail task.\n   * The process of creating a thread is as follows:\n   * If input contains a viewId, simply create a thread from saved properties of the view.\n   * Otherwise, create a task on AI service to generate the detail.\n   * 1. create a task on AI service to generate the detail\n   * 2. create a thread and the first thread response with question and sql\n   */ async createThread(input) {\n        // if input contains a viewId, simply create a thread from saved properties of the view\n        if (input.viewId) {\n            return this.createThreadFromView(input);\n        }\n        // 1. create a thread and the first thread response\n        const { id } = await this.projectService.getCurrentProject();\n        const thread = await this.threadRepository.createOne({\n            projectId: id,\n            summary: input.question\n        });\n        await this.threadResponseRepository.createOne({\n            threadId: thread.id,\n            question: input.question,\n            sql: input.sql\n        });\n        // return the task id\n        return thread;\n    }\n    async listThreads() {\n        const { id } = await this.projectService.getCurrentProject();\n        return await this.threadRepository.listAllTimeDescOrder(id);\n    }\n    async updateThread(threadId, input) {\n        // if input is empty, throw error\n        if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_2___default()(input)) {\n            throw new Error(\"Update thread input is empty\");\n        }\n        return this.threadRepository.updateOne(threadId, {\n            summary: input.summary\n        });\n    }\n    async deleteThread(threadId) {\n        await this.threadRepository.deleteOne(threadId);\n    }\n    async createThreadResponse(input, threadId) {\n        const thread = await this.threadRepository.findOneBy({\n            id: threadId\n        });\n        if (!thread) {\n            throw new Error(`Thread ${threadId} not found`);\n        }\n        // if input contains a viewId, simply create a thread from saved properties of the view\n        if (input.viewId) {\n            const view = await this.viewRepository.findOneBy({\n                id: input.viewId\n            });\n            if (!view) {\n                throw new Error(`View ${input.viewId} not found`);\n            }\n            const res = await this.createThreadResponseFromView(input.question, view.statement, view, thread);\n            return res;\n        }\n        const threadResponse = await this.threadResponseRepository.createOne({\n            threadId: thread.id,\n            question: input.question,\n            sql: input.sql\n        });\n        return threadResponse;\n    }\n    async generateThreadResponseBreakdown(threadResponseId, configurations) {\n        const { language } = configurations;\n        const threadResponse = await this.threadResponseRepository.findOneBy({\n            id: threadResponseId\n        });\n        if (!threadResponse) {\n            throw new Error(`Thread response ${threadResponseId} not found`);\n        }\n        // 1. create a task on AI service to generate the detail\n        const response = await this.wrenAIAdaptor.generateAskDetail({\n            query: threadResponse.question,\n            sql: threadResponse.sql,\n            configurations: {\n                language\n            }\n        });\n        // 2. update the thread response with breakdown detail\n        const updatedThreadResponse = await this.threadResponseRepository.updateOne(threadResponse.id, {\n            breakdownDetail: {\n                queryId: response.queryId,\n                status: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.AskResultStatus.UNDERSTANDING\n            }\n        });\n        // 3. put the task into background tracker\n        this.breakdownBackgroundTracker.addTask(updatedThreadResponse);\n        // return the task id\n        return updatedThreadResponse;\n    }\n    async generateThreadResponseAnswer(threadResponseId) {\n        const threadResponse = await this.threadResponseRepository.findOneBy({\n            id: threadResponseId\n        });\n        if (!threadResponse) {\n            throw new Error(`Thread response ${threadResponseId} not found`);\n        }\n        // update with initial status\n        const updatedThreadResponse = await this.threadResponseRepository.updateOne(threadResponse.id, {\n            answerDetail: {\n                status: \"NOT_STARTED\"\n            }\n        });\n        // put the task into background tracker\n        this.textBasedAnswerBackgroundTracker.addTask(updatedThreadResponse);\n        return updatedThreadResponse;\n    }\n    async generateThreadResponseChart(threadResponseId, configurations) {\n        const threadResponse = await this.threadResponseRepository.findOneBy({\n            id: threadResponseId\n        });\n        if (!threadResponse) {\n            throw new Error(`Thread response ${threadResponseId} not found`);\n        }\n        // 1. create a task on AI service to generate the chart\n        const response = await this.wrenAIAdaptor.generateChart({\n            query: threadResponse.question,\n            sql: threadResponse.sql,\n            configurations\n        });\n        // 2. update the thread response with chart detail\n        const updatedThreadResponse = await this.threadResponseRepository.updateOne(threadResponse.id, {\n            chartDetail: {\n                queryId: response.queryId,\n                status: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.ChartStatus.FETCHING\n            }\n        });\n        // 3. put the task into background tracker\n        this.chartBackgroundTracker.addTask(updatedThreadResponse);\n        return updatedThreadResponse;\n    }\n    async adjustThreadResponseChart(threadResponseId, input, configurations) {\n        const threadResponse = await this.threadResponseRepository.findOneBy({\n            id: threadResponseId\n        });\n        if (!threadResponse) {\n            throw new Error(`Thread response ${threadResponseId} not found`);\n        }\n        // 1. create a task on AI service to adjust the chart\n        const response = await this.wrenAIAdaptor.adjustChart({\n            query: threadResponse.question,\n            sql: threadResponse.sql,\n            adjustmentOption: input,\n            chartSchema: threadResponse.chartDetail?.chartSchema,\n            configurations\n        });\n        // 2. update the thread response with chart detail\n        const updatedThreadResponse = await this.threadResponseRepository.updateOne(threadResponse.id, {\n            chartDetail: {\n                queryId: response.queryId,\n                status: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.ChartStatus.FETCHING,\n                adjustment: true\n            }\n        });\n        // 3. put the task into background tracker\n        this.chartAdjustmentBackgroundTracker.addTask(updatedThreadResponse);\n        return updatedThreadResponse;\n    }\n    async getResponsesWithThread(threadId) {\n        return this.threadResponseRepository.getResponsesWithThread(threadId);\n    }\n    async getResponse(responseId) {\n        return this.threadResponseRepository.findOneBy({\n            id: responseId\n        });\n    }\n    async previewData(responseId, limit) {\n        const response = await this.getResponse(responseId);\n        if (!response) {\n            throw new Error(`Thread response ${responseId} not found`);\n        }\n        const project = await this.projectService.getCurrentProject();\n        const deployment = await this.deployService.getLastDeployment(project.id);\n        const mdl = deployment.manifest;\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__.TelemetryEvent.HOME_PREVIEW_ANSWER;\n        try {\n            const data = await this.queryService.preview(response.sql, {\n                project,\n                manifest: mdl,\n                limit\n            });\n            this.telemetry.sendEvent(eventName, {\n                sql: response.sql\n            });\n            return data;\n        } catch (err) {\n            this.telemetry.sendEvent(eventName, {\n                sql: response.sql,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    /**\n   * this function is used to preview the data of a thread response\n   * get the target thread response and get the steps\n   * construct the CTEs and get the data\n   * @param responseId: the id of the thread response\n   * @param stepIndex: the step in the response detail\n   * @returns Promise<QueryResponse>\n   */ async previewBreakdownData(responseId, stepIndex, limit) {\n        const response = await this.getResponse(responseId);\n        if (!response) {\n            throw new Error(`Thread response ${responseId} not found`);\n        }\n        const project = await this.projectService.getCurrentProject();\n        const deployment = await this.deployService.getLastDeployment(project.id);\n        const mdl = deployment.manifest;\n        const steps = response?.breakdownDetail?.steps;\n        const sql = (0,sql_formatter__WEBPACK_IMPORTED_MODULE_4__.format)(constructCteSql(steps, stepIndex));\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__.TelemetryEvent.HOME_PREVIEW_ANSWER;\n        try {\n            const data = await this.queryService.preview(sql, {\n                project,\n                manifest: mdl,\n                limit\n            });\n            this.telemetry.sendEvent(eventName, {\n                sql\n            });\n            return data;\n        } catch (err) {\n            this.telemetry.sendEvent(eventName, {\n                sql,\n                error: err.message\n            }, err.extensions?.service, false);\n            throw err;\n        }\n    }\n    async createInstantRecommendedQuestions(input) {\n        const project = await this.projectService.getCurrentProject();\n        const { manifest } = await this.deployService.getLastDeployment(project.id);\n        const response = await this.wrenAIAdaptor.generateRecommendationQuestions({\n            manifest,\n            previousQuestions: input.previousQuestions,\n            ...this.getThreadRecommendationQuestionsConfig(project)\n        });\n        return {\n            id: response.queryId\n        };\n    }\n    async getInstantRecommendedQuestions(queryId) {\n        const response = await this.wrenAIAdaptor.getRecommendationQuestionsResult(queryId);\n        return response;\n    }\n    async deleteAllByProjectId(projectId) {\n        // delete all threads\n        await this.threadRepository.deleteAllBy({\n            projectId\n        });\n    }\n    async changeThreadResponseAnswerDetailStatus(responseId, status, content) {\n        const response = await this.threadResponseRepository.findOneBy({\n            id: responseId\n        });\n        if (!response) {\n            throw new Error(`Thread response ${responseId} not found`);\n        }\n        if (response.answerDetail?.status === status) {\n            return;\n        }\n        const updatedResponse = await this.threadResponseRepository.updateOne(responseId, {\n            answerDetail: {\n                ...response.answerDetail,\n                status,\n                content\n            }\n        });\n        return updatedResponse;\n    }\n    async getDeployId() {\n        const { id } = await this.projectService.getCurrentProject();\n        const lastDeploy = await this.deployService.getLastDeployment(id);\n        return lastDeploy.hash;\n    }\n    /**\n   * Get the thread with threadId & latest thread response of a thread\n   * transform the response into AskHistory\n   * @param threadId\n   * @returns Promise<AskHistory>\n   */ async getHistory(threadId) {\n        const responses = await this.threadResponseRepository.getResponsesWithThread(threadId, 1);\n        if (!responses.length) {\n            return null;\n        }\n        const latestResponse = responses[0];\n        // steps is only available in breakdown detail\n        // if we haven't generated the breakdown detail, fallback to use the question & sql\n        const steps = latestResponse.breakdownDetail?.steps || [\n            {\n                summary: latestResponse.question,\n                cteName: \"\",\n                sql: latestResponse.sql\n            }\n        ];\n        return {\n            sql: latestResponse.sql,\n            steps\n        };\n    }\n    async createThreadFromView(input) {\n        const view = await this.viewRepository.findOneBy({\n            id: input.viewId\n        });\n        if (!view) {\n            throw new Error(`View ${input.viewId} not found`);\n        }\n        const { id } = await this.projectService.getCurrentProject();\n        const thread = await this.threadRepository.createOne({\n            projectId: id,\n            summary: input.question\n        });\n        await this.createThreadResponseFromView(input.question, view.statement, view, thread);\n        return thread;\n    }\n    async createThreadResponseFromView(question, sql, view, thread) {\n        return this.threadResponseRepository.createOne({\n            threadId: thread.id,\n            viewId: view.id,\n            question,\n            sql\n        });\n    }\n    getThreadRecommendationQuestionsConfig(project) {\n        return {\n            maxCategories: config.threadRecommendationQuestionMaxCategories,\n            maxQuestions: config.threadRecommendationQuestionsMaxQuestions,\n            configuration: {\n                language: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage[project.language] || _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAILanguage.EN\n            }\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9hc2tpbmdTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWFnQztBQVFVO0FBQ0Y7QUFBQTtBQUNEO0FBS1A7QUFRUjtBQUNtQjtBQUN3RDtBQUVuRyxNQUFNZSxTQUFTRix5REFBU0E7QUFFeEIsTUFBTUcsU0FBU1osd0RBQVNBLENBQUM7QUFDekJZLE9BQU9DLEtBQUssR0FBRzs7VUEyQkhDOzs7OztHQUFBQSxrQ0FBQUE7O1VBaUJBQzs7Ozs7Ozs7R0FBQUEsK0JBQUFBO0FBbUZaOztDQUVDLEdBQ0QsTUFBTUMsY0FBYyxDQUFDQztJQUNuQixPQUNFQSxXQUFXckIsbUVBQWVBLENBQUNzQixNQUFNLElBQ2pDRCxXQUFXckIsbUVBQWVBLENBQUN1QixRQUFRLElBQ25DRixXQUFXckIsbUVBQWVBLENBQUN3QixPQUFPO0FBRXRDO0FBRUE7Ozs7OztDQU1DLEdBQ00sTUFBTUMsa0JBQWtCLENBQzdCQyxPQUNBQztJQUVBLHFCQUFxQjtJQUNyQixJQUFJLENBQUNyQixtREFBS0EsQ0FBQ3FCLGNBQWVBLENBQUFBLFlBQVksS0FBS0EsYUFBYUQsTUFBTUUsTUFBTSxHQUFHO1FBQ3JFLE1BQU0sSUFBSUMsTUFBTSxDQUFDLG1CQUFtQixFQUFFRixVQUFVLENBQUM7SUFDbkQ7SUFFQSxNQUFNRyxjQUFjeEIsbURBQUtBLENBQUNxQixhQUFhRCxRQUFRQSxNQUFNSyxLQUFLLENBQUMsR0FBR0osWUFBWTtJQUUxRSxvREFBb0Q7SUFDcEQsSUFBSUcsWUFBWUYsTUFBTSxLQUFLLEdBQUc7UUFDNUIsT0FBTyxDQUFDLEdBQUcsRUFBRUUsV0FBVyxDQUFDLEVBQUUsQ0FBQ0UsT0FBTyxDQUFDLEVBQUUsRUFBRUYsV0FBVyxDQUFDLEVBQUUsQ0FBQ0csR0FBRyxDQUFDLENBQUM7SUFDOUQ7SUFFQSxJQUFJQSxNQUFNO0lBQ1ZILFlBQVlJLE9BQU8sQ0FBQyxDQUFDQyxNQUFNQztR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TCxPQUFPNEwseUNBQXlDO1lBQzlEQyxlQUFlO2dCQUNiN0UsVUFBVTVILGtFQUFjLENBQUNxRyxRQUFRdUIsUUFBUSxDQUFDLElBQUk1SCxrRUFBY0EsQ0FBQzBNLEVBQUU7WUFDakU7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvc2VydmljZXMvYXNraW5nU2VydmljZS50cz9iZTYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElXcmVuQUlBZGFwdG9yIH0gZnJvbSAnQHNlcnZlci9hZGFwdG9ycy93cmVuQUlBZGFwdG9yJztcbmltcG9ydCB7XG4gIEFza1Jlc3VsdCxcbiAgQXNrUmVzdWx0U3RhdHVzLFxuICBBc2tIaXN0b3J5LFxuICBSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc1Jlc3VsdCxcbiAgUmVjb21tZW5kYXRpb25RdWVzdGlvbnNJbnB1dCxcbiAgUmVjb21tZW5kYXRpb25RdWVzdGlvbixcbiAgV3JlbkFJRXJyb3IsXG4gIFJlY29tbWVuZGF0aW9uUXVlc3Rpb25TdGF0dXMsXG4gIENoYXJ0U3RhdHVzLFxuICBDaGFydEFkanVzdG1lbnRPcHRpb24sXG4gIFdyZW5BSUxhbmd1YWdlLFxufSBmcm9tICdAc2VydmVyL21vZGVscy9hZGFwdG9yJztcbmltcG9ydCB7IElEZXBsb3lTZXJ2aWNlIH0gZnJvbSAnLi9kZXBsb3lTZXJ2aWNlJztcbmltcG9ydCB7IElQcm9qZWN0U2VydmljZSB9IGZyb20gJy4vcHJvamVjdFNlcnZpY2UnO1xuaW1wb3J0IHsgSVRocmVhZFJlcG9zaXRvcnksIFRocmVhZCB9IGZyb20gJy4uL3JlcG9zaXRvcmllcy90aHJlYWRSZXBvc2l0b3J5JztcbmltcG9ydCB7XG4gIElUaHJlYWRSZXNwb25zZVJlcG9zaXRvcnksXG4gIFRocmVhZFJlc3BvbnNlLFxufSBmcm9tICcuLi9yZXBvc2l0b3JpZXMvdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5JztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BzZXJ2ZXIvdXRpbHMnO1xuaW1wb3J0IHsgaXNFbXB0eSwgaXNOaWwgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnc3FsLWZvcm1hdHRlcic7XG5pbXBvcnQge1xuICBQb3N0SG9nVGVsZW1ldHJ5LFxuICBUZWxlbWV0cnlFdmVudCxcbiAgV3JlblNlcnZpY2UsXG59IGZyb20gJy4uL3RlbGVtZXRyeS90ZWxlbWV0cnknO1xuaW1wb3J0IHsgSVZpZXdSZXBvc2l0b3J5LCBQcm9qZWN0LCBWaWV3IH0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzJztcbmltcG9ydCB7IElRdWVyeVNlcnZpY2UsIFByZXZpZXdEYXRhUmVzcG9uc2UgfSBmcm9tICcuL3F1ZXJ5U2VydmljZSc7XG5pbXBvcnQgeyBJTURMU2VydmljZSB9IGZyb20gJy4vbWRsU2VydmljZSc7XG5pbXBvcnQge1xuICBUaHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLFxuICBDaGFydEJhY2tncm91bmRUcmFja2VyLFxuICBDaGFydEFkanVzdG1lbnRCYWNrZ3JvdW5kVHJhY2tlcixcbn0gZnJvbSAnLi4vYmFja2dyb3VuZHMnO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnQHNlcnZlci9jb25maWcnO1xuaW1wb3J0IHsgVGV4dEJhc2VkQW5zd2VyQmFja2dyb3VuZFRyYWNrZXIgfSBmcm9tICcuLi9iYWNrZ3JvdW5kcy90ZXh0QmFzZWRBbnN3ZXJCYWNrZ3JvdW5kVHJhY2tlcic7XG5cbmNvbnN0IGNvbmZpZyA9IGdldENvbmZpZygpO1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ0Fza2luZ1NlcnZpY2UnKTtcbmxvZ2dlci5sZXZlbCA9ICdkZWJ1Zyc7XG5cbi8vIGNvbnN0IFFVRVJZX0lEX1BMQUNFSE9MREVSID0gJzAnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhc2sge1xuICBpZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFza2luZ1BheWxvYWQge1xuICB0aHJlYWRJZD86IG51bWJlcjtcbiAgbGFuZ3VhZ2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBc2tpbmdUYXNrSW5wdXQge1xuICBxdWVzdGlvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFza2luZ0RldGFpbFRhc2tJbnB1dCB7XG4gIHF1ZXN0aW9uPzogc3RyaW5nO1xuICBzcWw/OiBzdHJpbmc7XG4gIHZpZXdJZD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBc2tpbmdEZXRhaWxUYXNrVXBkYXRlSW5wdXQge1xuICBzdW1tYXJ5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBSZWNvbW1lbmRRdWVzdGlvblJlc3VsdFN0YXR1cyB7XG4gIE5PVF9TVEFSVEVEID0gJ05PVF9TVEFSVEVEJyxcbiAgR0VORVJBVElORyA9ICdHRU5FUkFUSU5HJyxcbiAgRklOSVNIRUQgPSAnRklOSVNIRUQnLFxuICBGQUlMRUQgPSAnRkFJTEVEJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaHJlYWRSZWNvbW1lbmRRdWVzdGlvblJlc3VsdCB7XG4gIHN0YXR1czogUmVjb21tZW5kUXVlc3Rpb25SZXN1bHRTdGF0dXM7XG4gIHF1ZXN0aW9uczogUmVjb21tZW5kYXRpb25RdWVzdGlvbltdO1xuICBlcnJvcj86IFdyZW5BSUVycm9yO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9uc0lucHV0IHtcbiAgcHJldmlvdXNRdWVzdGlvbnM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGVudW0gVGhyZWFkUmVzcG9uc2VBbnN3ZXJTdGF0dXMge1xuICBOT1RfU1RBUlRFRCA9ICdOT1RfU1RBUlRFRCcsXG4gIEZFVENISU5HX0RBVEEgPSAnRkVUQ0hJTkdfREFUQScsXG4gIFBSRVBST0NFU1NJTkcgPSAnUFJFUFJPQ0VTU0lORycsXG4gIFNUUkVBTUlORyA9ICdTVFJFQU1JTkcnLFxuICBGSU5JU0hFRCA9ICdGSU5JU0hFRCcsXG4gIEZBSUxFRCA9ICdGQUlMRUQnLFxuICBJTlRFUlJVUFRFRCA9ICdJTlRFUlJVUFRFRCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFza2luZ1NlcnZpY2Uge1xuICAvKipcbiAgICogQXNraW5nIHRhc2suXG4gICAqL1xuICBjcmVhdGVBc2tpbmdUYXNrKFxuICAgIGlucHV0OiBBc2tpbmdUYXNrSW5wdXQsXG4gICAgcGF5bG9hZDogQXNraW5nUGF5bG9hZCxcbiAgKTogUHJvbWlzZTxUYXNrPjtcbiAgY2FuY2VsQXNraW5nVGFzayh0YXNrSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIGdldEFza2luZ1Rhc2sodGFza0lkOiBzdHJpbmcpOiBQcm9taXNlPEFza1Jlc3VsdD47XG5cbiAgLyoqXG4gICAqIEFza2luZyBkZXRhaWwgdGFzay5cbiAgICovXG4gIGNyZWF0ZVRocmVhZChpbnB1dDogQXNraW5nRGV0YWlsVGFza0lucHV0KTogUHJvbWlzZTxUaHJlYWQ+O1xuICB1cGRhdGVUaHJlYWQoXG4gICAgdGhyZWFkSWQ6IG51bWJlcixcbiAgICBpbnB1dDogUGFydGlhbDxBc2tpbmdEZXRhaWxUYXNrVXBkYXRlSW5wdXQ+LFxuICApOiBQcm9taXNlPFRocmVhZD47XG4gIGRlbGV0ZVRocmVhZCh0aHJlYWRJZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPjtcbiAgbGlzdFRocmVhZHMoKTogUHJvbWlzZTxUaHJlYWRbXT47XG4gIGNyZWF0ZVRocmVhZFJlc3BvbnNlKFxuICAgIGlucHV0OiBBc2tpbmdEZXRhaWxUYXNrSW5wdXQsXG4gICAgdGhyZWFkSWQ6IG51bWJlcixcbiAgKTogUHJvbWlzZTxUaHJlYWRSZXNwb25zZT47XG4gIGdldFJlc3BvbnNlc1dpdGhUaHJlYWQodGhyZWFkSWQ6IG51bWJlcik6IFByb21pc2U8VGhyZWFkUmVzcG9uc2VbXT47XG4gIGdldFJlc3BvbnNlKHJlc3BvbnNlSWQ6IG51bWJlcik6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+O1xuICBnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQnJlYWtkb3duKFxuICAgIHRocmVhZFJlc3BvbnNlSWQ6IG51bWJlcixcbiAgICBjb25maWd1cmF0aW9uczogeyBsYW5ndWFnZTogc3RyaW5nIH0sXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+O1xuICBnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQW5zd2VyKFxuICAgIHRocmVhZFJlc3BvbnNlSWQ6IG51bWJlcixcbiAgICBjb25maWd1cmF0aW9uczogeyBsYW5ndWFnZTogc3RyaW5nIH0sXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+O1xuICBnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQ2hhcnQoXG4gICAgdGhyZWFkUmVzcG9uc2VJZDogbnVtYmVyLFxuICAgIGNvbmZpZ3VyYXRpb25zOiB7IGxhbmd1YWdlOiBzdHJpbmcgfSxcbiAgKTogUHJvbWlzZTxUaHJlYWRSZXNwb25zZT47XG4gIGFkanVzdFRocmVhZFJlc3BvbnNlQ2hhcnQoXG4gICAgdGhyZWFkUmVzcG9uc2VJZDogbnVtYmVyLFxuICAgIGlucHV0OiBDaGFydEFkanVzdG1lbnRPcHRpb24sXG4gICAgY29uZmlndXJhdGlvbnM6IHsgbGFuZ3VhZ2U6IHN0cmluZyB9LFxuICApOiBQcm9taXNlPFRocmVhZFJlc3BvbnNlPjtcbiAgY2hhbmdlVGhyZWFkUmVzcG9uc2VBbnN3ZXJEZXRhaWxTdGF0dXMoXG4gICAgcmVzcG9uc2VJZDogbnVtYmVyLFxuICAgIHN0YXR1czogVGhyZWFkUmVzcG9uc2VBbnN3ZXJTdGF0dXMsXG4gICAgY29udGVudD86IHN0cmluZyxcbiAgKTogUHJvbWlzZTxUaHJlYWRSZXNwb25zZT47XG4gIHByZXZpZXdEYXRhKHJlc3BvbnNlSWQ6IG51bWJlciwgbGltaXQ/OiBudW1iZXIpOiBQcm9taXNlPFByZXZpZXdEYXRhUmVzcG9uc2U+O1xuICBwcmV2aWV3QnJlYWtkb3duRGF0YShcbiAgICByZXNwb25zZUlkOiBudW1iZXIsXG4gICAgc3RlcEluZGV4PzogbnVtYmVyLFxuICAgIGxpbWl0PzogbnVtYmVyLFxuICApOiBQcm9taXNlPFByZXZpZXdEYXRhUmVzcG9uc2U+O1xuXG4gIC8qKlxuICAgKiBSZWNvbW1lbmRhdGlvbiBxdWVzdGlvbnNcbiAgICovXG4gIGNyZWF0ZUluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9ucyhcbiAgICBpbnB1dDogSW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zSW5wdXQsXG4gICk6IFByb21pc2U8VGFzaz47XG4gIGdldEluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9ucyhcbiAgICBxdWVyeUlkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8UmVjb21tZW5kYXRpb25RdWVzdGlvbnNSZXN1bHQ+O1xuICBnZW5lcmF0ZVRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKHRocmVhZElkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+O1xuICBnZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyhcbiAgICB0aHJlYWRJZDogbnVtYmVyLFxuICApOiBQcm9taXNlPFRocmVhZFJlY29tbWVuZFF1ZXN0aW9uUmVzdWx0PjtcblxuICBkZWxldGVBbGxCeVByb2plY3RJZChwcm9qZWN0SWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD47XG59XG5cbi8qKlxuICogdXRpbGl0eSBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgc3RhdHVzIGlzIGZpbmFsaXplZFxuICovXG5jb25zdCBpc0ZpbmFsaXplZCA9IChzdGF0dXM6IEFza1Jlc3VsdFN0YXR1cykgPT4ge1xuICByZXR1cm4gKFxuICAgIHN0YXR1cyA9PT0gQXNrUmVzdWx0U3RhdHVzLkZBSUxFRCB8fFxuICAgIHN0YXR1cyA9PT0gQXNrUmVzdWx0U3RhdHVzLkZJTklTSEVEIHx8XG4gICAgc3RhdHVzID09PSBBc2tSZXN1bHRTdGF0dXMuU1RPUFBFRFxuICApO1xufTtcblxuLyoqXG4gKiBHaXZlbiBhIGxpc3Qgb2Ygc3RlcHMsIGNvbnN0cnVjdCB0aGUgU1FMIHN0YXRlbWVudCB3aXRoIENURXNcbiAqIElmIHN0ZXBJbmRleCBpcyBwcm92aWRlZCwgb25seSBjb25zdHJ1Y3QgdGhlIFNRTCBmcm9tIHRvcCB0byB0aGF0IHN0ZXBcbiAqIEBwYXJhbSBzdGVwc1xuICogQHBhcmFtIHN0ZXBJbmRleFxuICogQHJldHVybnMgc3RyaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBjb25zdHJ1Y3RDdGVTcWwgPSAoXG4gIHN0ZXBzOiBBcnJheTx7IGN0ZU5hbWU6IHN0cmluZzsgc3VtbWFyeTogc3RyaW5nOyBzcWw6IHN0cmluZyB9PixcbiAgc3RlcEluZGV4PzogbnVtYmVyLFxuKTogc3RyaW5nID0+IHtcbiAgLy8gdmFsaWRhdGUgc3RlcEluZGV4XG4gIGlmICghaXNOaWwoc3RlcEluZGV4KSAmJiAoc3RlcEluZGV4IDwgMCB8fCBzdGVwSW5kZXggPj0gc3RlcHMubGVuZ3RoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBzdGVwSW5kZXg6ICR7c3RlcEluZGV4fWApO1xuICB9XG5cbiAgY29uc3Qgc2xpY2VkU3RlcHMgPSBpc05pbChzdGVwSW5kZXgpID8gc3RlcHMgOiBzdGVwcy5zbGljZSgwLCBzdGVwSW5kZXggKyAxKTtcblxuICAvLyBpZiB0aGVyZSdzIG9ubHkgb25lIHN0ZXAsIHJldHVybiB0aGUgc3FsIGRpcmVjdGx5XG4gIGlmIChzbGljZWRTdGVwcy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gYC0tICR7c2xpY2VkU3RlcHNbMF0uc3VtbWFyeX1cXG4ke3NsaWNlZFN0ZXBzWzBdLnNxbH1gO1xuICB9XG5cbiAgbGV0IHNxbCA9ICdXSVRIICc7XG4gIHNsaWNlZFN0ZXBzLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7XG4gICAgaWYgKGluZGV4ID09PSBzbGljZWRTdGVwcy5sZW5ndGggLSAxKSB7XG4gICAgICAvLyBpZiBpdCdzIHRoZSBsYXN0IHN0ZXAsIHJlbW92ZSB0aGUgdHJhaWxpbmcgY29tbWEuXG4gICAgICAvLyBubyBuZWVkIHRvIHdyYXAgd2l0aCBXSVRIXG4gICAgICBzcWwgKz0gYFxcbi0tICR7c3RlcC5zdW1tYXJ5fVxcbmA7XG4gICAgICBzcWwgKz0gYCR7c3RlcC5zcWx9YDtcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBzbGljZWRTdGVwcy5sZW5ndGggLSAyKSB7XG4gICAgICAvLyBpZiBpdCdzIHRoZSBsYXN0IHR3byBzdGVwcywgcmVtb3ZlIHRoZSB0cmFpbGluZyBjb21tYS5cbiAgICAgIC8vIHdyYXAgd2l0aCBDVEVcbiAgICAgIHNxbCArPSBgJHtzdGVwLmN0ZU5hbWV9IEFTYDtcbiAgICAgIHNxbCArPSBgXFxuLS0gJHtzdGVwLnN1bW1hcnl9XFxuYDtcbiAgICAgIHNxbCArPSBgKCR7c3RlcC5zcWx9KWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGlmIGl0J3Mgbm90IHRoZSBsYXN0IHN0ZXAsIHdyYXAgd2l0aCBDVEVcbiAgICAgIHNxbCArPSBgJHtzdGVwLmN0ZU5hbWV9IEFTYDtcbiAgICAgIHNxbCArPSBgXFxuLS0gJHtzdGVwLnN1bW1hcnl9XFxuYDtcbiAgICAgIHNxbCArPSBgKCR7c3RlcC5zcWx9KSxgO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHNxbDtcbn07XG5cbi8qKlxuICogQmFja2dyb3VuZCB0cmFja2VyIHRvIHRyYWNrIHRoZSBzdGF0dXMgb2YgdGhlIGFza2luZyBicmVha2Rvd24gdGFza1xuICovXG5jbGFzcyBCcmVha2Rvd25CYWNrZ3JvdW5kVHJhY2tlciB7XG4gIC8vIHRhc2tzIGlzIGEga3YgcGFpciBvZiB0YXNrIGlkIGFuZCB0aHJlYWQgcmVzcG9uc2VcbiAgcHJpdmF0ZSB0YXNrczogUmVjb3JkPG51bWJlciwgVGhyZWFkUmVzcG9uc2U+ID0ge307XG4gIHByaXZhdGUgaW50ZXJ2YWxUaW1lOiBudW1iZXI7XG4gIHByaXZhdGUgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gIHByaXZhdGUgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5OiBJVGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5O1xuICBwcml2YXRlIHJ1bm5pbmdKb2JzID0gbmV3IFNldCgpO1xuICBwcml2YXRlIHRlbGVtZXRyeTogUG9zdEhvZ1RlbGVtZXRyeTtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgdGVsZW1ldHJ5LFxuICAgIHdyZW5BSUFkYXB0b3IsXG4gICAgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LFxuICB9OiB7XG4gICAgdGVsZW1ldHJ5OiBQb3N0SG9nVGVsZW1ldHJ5O1xuICAgIHdyZW5BSUFkYXB0b3I6IElXcmVuQUlBZGFwdG9yO1xuICAgIHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeTogSVRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeTtcbiAgfSkge1xuICAgIHRoaXMudGVsZW1ldHJ5ID0gdGVsZW1ldHJ5O1xuICAgIHRoaXMud3JlbkFJQWRhcHRvciA9IHdyZW5BSUFkYXB0b3I7XG4gICAgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkgPSB0aHJlYWRSZXNwb25zZVJlcG9zaXRvcnk7XG4gICAgdGhpcy5pbnRlcnZhbFRpbWUgPSAxMDAwO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGFydCgpIHtcbiAgICBsb2dnZXIuaW5mbygnQmFja2dyb3VuZCB0cmFja2VyIHN0YXJ0ZWQnKTtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBjb25zdCBqb2JzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnRhc2tzKS5tYXAoXG4gICAgICAgICh0aHJlYWRSZXNwb25zZSkgPT4gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIC8vIGNoZWNrIGlmIHNhbWUgam9iIGlzIHJ1bm5pbmdcbiAgICAgICAgICBpZiAodGhpcy5ydW5uaW5nSm9icy5oYXModGhyZWFkUmVzcG9uc2UuaWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWFyayB0aGUgam9iIGFzIHJ1bm5pbmdcbiAgICAgICAgICB0aGlzLnJ1bm5pbmdKb2JzLmFkZCh0aHJlYWRSZXNwb25zZS5pZCk7XG5cbiAgICAgICAgICAvLyBnZXQgdGhlIGFuc3dlciBkZXRhaWxcbiAgICAgICAgICBjb25zdCBicmVha2Rvd25EZXRhaWwgPSB0aHJlYWRSZXNwb25zZS5icmVha2Rvd25EZXRhaWw7XG5cbiAgICAgICAgICAvLyBnZXQgdGhlIGxhdGVzdCByZXN1bHQgZnJvbSBBSSBzZXJ2aWNlXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy53cmVuQUlBZGFwdG9yLmdldEFza0RldGFpbFJlc3VsdChcbiAgICAgICAgICAgIGJyZWFrZG93bkRldGFpbC5xdWVyeUlkLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBjaGVjayBpZiBzdGF0dXMgY2hhbmdlXG4gICAgICAgICAgaWYgKGJyZWFrZG93bkRldGFpbC5zdGF0dXMgPT09IHJlc3VsdC5zdGF0dXMpIHtcbiAgICAgICAgICAgIC8vIG1hcmsgdGhlIGpvYiBhcyBmaW5pc2hlZFxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICAgICAgICBgSm9iICR7dGhyZWFkUmVzcG9uc2UuaWR9IHN0YXR1cyBub3QgY2hhbmdlZCwgZmluaXNoZWRgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMucnVubmluZ0pvYnMuZGVsZXRlKHRocmVhZFJlc3BvbnNlLmlkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB1cGRhdGUgZGF0YWJhc2VcbiAgICAgICAgICBjb25zdCB1cGRhdGVkQnJlYWtkb3duRGV0YWlsID0ge1xuICAgICAgICAgICAgcXVlcnlJZDogYnJlYWtkb3duRGV0YWlsLnF1ZXJ5SWQsXG4gICAgICAgICAgICBzdGF0dXM6IHJlc3VsdD8uc3RhdHVzLFxuICAgICAgICAgICAgZXJyb3I6IHJlc3VsdD8uZXJyb3IsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzdWx0Py5yZXNwb25zZT8uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBzdGVwczogcmVzdWx0Py5yZXNwb25zZT8uc3RlcHMsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoYEpvYiAke3RocmVhZFJlc3BvbnNlLmlkfSBzdGF0dXMgY2hhbmdlZCwgdXBkYXRpbmdgKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeS51cGRhdGVPbmUodGhyZWFkUmVzcG9uc2UuaWQsIHtcbiAgICAgICAgICAgIGJyZWFrZG93bkRldGFpbDogdXBkYXRlZEJyZWFrZG93bkRldGFpbCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIHJlbW92ZSB0aGUgdGFzayBmcm9tIHRyYWNrZXIgaWYgaXQgaXMgZmluYWxpemVkXG4gICAgICAgICAgaWYgKGlzRmluYWxpemVkKHJlc3VsdC5zdGF0dXMpKSB7XG4gICAgICAgICAgICBjb25zdCBldmVudFByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAgIHF1ZXN0aW9uOiB0aHJlYWRSZXNwb25zZS5xdWVzdGlvbixcbiAgICAgICAgICAgICAgZXJyb3I6IHJlc3VsdC5lcnJvcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gQXNrUmVzdWx0U3RhdHVzLkZJTklTSEVEKSB7XG4gICAgICAgICAgICAgIHRoaXMudGVsZW1ldHJ5LnNlbmRFdmVudChcbiAgICAgICAgICAgICAgICBUZWxlbWV0cnlFdmVudC5IT01FX0FOU1dFUl9CUkVBS0RPV04sXG4gICAgICAgICAgICAgICAgZXZlbnRQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICAgICAgICAgIFRlbGVtZXRyeUV2ZW50LkhPTUVfQU5TV0VSX0JSRUFLRE9XTixcbiAgICAgICAgICAgICAgICBldmVudFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgV3JlblNlcnZpY2UuQUksXG4gICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEpvYiAke3RocmVhZFJlc3BvbnNlLmlkfSBpcyBmaW5hbGl6ZWQsIHJlbW92aW5nYCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50YXNrc1t0aHJlYWRSZXNwb25zZS5pZF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWFyayB0aGUgam9iIGFzIGZpbmlzaGVkXG4gICAgICAgICAgdGhpcy5ydW5uaW5nSm9icy5kZWxldGUodGhyZWFkUmVzcG9uc2UuaWQpO1xuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgLy8gcnVuIHRoZSBqb2JzXG4gICAgICBQcm9taXNlLmFsbFNldHRsZWQoam9icy5tYXAoKGpvYikgPT4gam9iKCkpKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIC8vIHNob3cgcmVhc29uIG9mIHJlamVjdGlvblxuICAgICAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ3JlamVjdGVkJykge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBKb2IgJHtpbmRleH0gZmFpbGVkOiAke3Jlc3VsdC5yZWFzb259YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sIHRoaXMuaW50ZXJ2YWxUaW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRUYXNrKHRocmVhZFJlc3BvbnNlOiBUaHJlYWRSZXNwb25zZSkge1xuICAgIHRoaXMudGFza3NbdGhyZWFkUmVzcG9uc2UuaWRdID0gdGhyZWFkUmVzcG9uc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0VGFza3MoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFza3M7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFza2luZ1NlcnZpY2UgaW1wbGVtZW50cyBJQXNraW5nU2VydmljZSB7XG4gIHByaXZhdGUgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gIHByaXZhdGUgZGVwbG95U2VydmljZTogSURlcGxveVNlcnZpY2U7XG4gIHByaXZhdGUgcHJvamVjdFNlcnZpY2U6IElQcm9qZWN0U2VydmljZTtcbiAgcHJpdmF0ZSB2aWV3UmVwb3NpdG9yeTogSVZpZXdSZXBvc2l0b3J5O1xuICBwcml2YXRlIHRocmVhZFJlcG9zaXRvcnk6IElUaHJlYWRSZXBvc2l0b3J5O1xuICBwcml2YXRlIHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeTogSVRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeTtcbiAgcHJpdmF0ZSBicmVha2Rvd25CYWNrZ3JvdW5kVHJhY2tlcjogQnJlYWtkb3duQmFja2dyb3VuZFRyYWNrZXI7XG4gIHByaXZhdGUgdGV4dEJhc2VkQW5zd2VyQmFja2dyb3VuZFRyYWNrZXI6IFRleHRCYXNlZEFuc3dlckJhY2tncm91bmRUcmFja2VyO1xuICBwcml2YXRlIGNoYXJ0QmFja2dyb3VuZFRyYWNrZXI6IENoYXJ0QmFja2dyb3VuZFRyYWNrZXI7XG4gIHByaXZhdGUgY2hhcnRBZGp1c3RtZW50QmFja2dyb3VuZFRyYWNrZXI6IENoYXJ0QWRqdXN0bWVudEJhY2tncm91bmRUcmFja2VyO1xuICBwcml2YXRlIHRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXI6IFRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXI7XG4gIHByaXZhdGUgcXVlcnlTZXJ2aWNlOiBJUXVlcnlTZXJ2aWNlO1xuICBwcml2YXRlIHRlbGVtZXRyeTogUG9zdEhvZ1RlbGVtZXRyeTtcbiAgcHJpdmF0ZSBtZGxTZXJ2aWNlOiBJTURMU2VydmljZTtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgdGVsZW1ldHJ5LFxuICAgIHdyZW5BSUFkYXB0b3IsXG4gICAgZGVwbG95U2VydmljZSxcbiAgICBwcm9qZWN0U2VydmljZSxcbiAgICB2aWV3UmVwb3NpdG9yeSxcbiAgICB0aHJlYWRSZXBvc2l0b3J5LFxuICAgIHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSxcbiAgICBxdWVyeVNlcnZpY2UsXG4gICAgbWRsU2VydmljZSxcbiAgfToge1xuICAgIHRlbGVtZXRyeTogUG9zdEhvZ1RlbGVtZXRyeTtcbiAgICB3cmVuQUlBZGFwdG9yOiBJV3JlbkFJQWRhcHRvcjtcbiAgICBkZXBsb3lTZXJ2aWNlOiBJRGVwbG95U2VydmljZTtcbiAgICBwcm9qZWN0U2VydmljZTogSVByb2plY3RTZXJ2aWNlO1xuICAgIHZpZXdSZXBvc2l0b3J5OiBJVmlld1JlcG9zaXRvcnk7XG4gICAgdGhyZWFkUmVwb3NpdG9yeTogSVRocmVhZFJlcG9zaXRvcnk7XG4gICAgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5OiBJVGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5O1xuICAgIHF1ZXJ5U2VydmljZTogSVF1ZXJ5U2VydmljZTtcbiAgICBtZGxTZXJ2aWNlOiBJTURMU2VydmljZTtcbiAgfSkge1xuICAgIHRoaXMud3JlbkFJQWRhcHRvciA9IHdyZW5BSUFkYXB0b3I7XG4gICAgdGhpcy5kZXBsb3lTZXJ2aWNlID0gZGVwbG95U2VydmljZTtcbiAgICB0aGlzLnByb2plY3RTZXJ2aWNlID0gcHJvamVjdFNlcnZpY2U7XG4gICAgdGhpcy52aWV3UmVwb3NpdG9yeSA9IHZpZXdSZXBvc2l0b3J5O1xuICAgIHRoaXMudGhyZWFkUmVwb3NpdG9yeSA9IHRocmVhZFJlcG9zaXRvcnk7XG4gICAgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkgPSB0aHJlYWRSZXNwb25zZVJlcG9zaXRvcnk7XG4gICAgdGhpcy50ZWxlbWV0cnkgPSB0ZWxlbWV0cnk7XG4gICAgdGhpcy5xdWVyeVNlcnZpY2UgPSBxdWVyeVNlcnZpY2U7XG4gICAgdGhpcy5icmVha2Rvd25CYWNrZ3JvdW5kVHJhY2tlciA9IG5ldyBCcmVha2Rvd25CYWNrZ3JvdW5kVHJhY2tlcih7XG4gICAgICB0ZWxlbWV0cnksXG4gICAgICB3cmVuQUlBZGFwdG9yLFxuICAgICAgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LFxuICAgIH0pO1xuICAgIHRoaXMudGV4dEJhc2VkQW5zd2VyQmFja2dyb3VuZFRyYWNrZXIgPVxuICAgICAgbmV3IFRleHRCYXNlZEFuc3dlckJhY2tncm91bmRUcmFja2VyKHtcbiAgICAgICAgd3JlbkFJQWRhcHRvcixcbiAgICAgICAgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LFxuICAgICAgICBwcm9qZWN0U2VydmljZSxcbiAgICAgICAgZGVwbG95U2VydmljZSxcbiAgICAgICAgcXVlcnlTZXJ2aWNlLFxuICAgICAgfSk7XG4gICAgdGhpcy5jaGFydEJhY2tncm91bmRUcmFja2VyID0gbmV3IENoYXJ0QmFja2dyb3VuZFRyYWNrZXIoe1xuICAgICAgdGVsZW1ldHJ5LFxuICAgICAgd3JlbkFJQWRhcHRvcixcbiAgICAgIHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSxcbiAgICB9KTtcbiAgICB0aGlzLmNoYXJ0QWRqdXN0bWVudEJhY2tncm91bmRUcmFja2VyID1cbiAgICAgIG5ldyBDaGFydEFkanVzdG1lbnRCYWNrZ3JvdW5kVHJhY2tlcih7XG4gICAgICAgIHRlbGVtZXRyeSxcbiAgICAgICAgd3JlbkFJQWRhcHRvcixcbiAgICAgICAgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LFxuICAgICAgfSk7XG4gICAgdGhpcy50aHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyID1cbiAgICAgIG5ldyBUaHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyKHtcbiAgICAgICAgdGVsZW1ldHJ5LFxuICAgICAgICB3cmVuQUlBZGFwdG9yLFxuICAgICAgICB0aHJlYWRSZXBvc2l0b3J5LFxuICAgICAgfSk7XG5cbiAgICB0aGlzLm1kbFNlcnZpY2UgPSBtZGxTZXJ2aWNlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKFxuICAgIHRocmVhZElkOiBudW1iZXIsXG4gICk6IFByb21pc2U8VGhyZWFkUmVjb21tZW5kUXVlc3Rpb25SZXN1bHQ+IHtcbiAgICBjb25zdCB0aHJlYWQgPSBhd2FpdCB0aGlzLnRocmVhZFJlcG9zaXRvcnkuZmluZE9uZUJ5KHsgaWQ6IHRocmVhZElkIH0pO1xuICAgIGlmICghdGhyZWFkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRocmVhZCAke3RocmVhZElkfSBub3QgZm91bmRgKTtcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgbm90IHN0YXJ0ZWRcbiAgICBjb25zdCByZXM6IFRocmVhZFJlY29tbWVuZFF1ZXN0aW9uUmVzdWx0ID0ge1xuICAgICAgc3RhdHVzOiBSZWNvbW1lbmRRdWVzdGlvblJlc3VsdFN0YXR1cy5OT1RfU1RBUlRFRCxcbiAgICAgIHF1ZXN0aW9uczogW10sXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICB9O1xuICAgIGlmICh0aHJlYWQucXVlcnlJZCAmJiB0aHJlYWQucXVlc3Rpb25zU3RhdHVzKSB7XG4gICAgICByZXMuc3RhdHVzID0gUmVjb21tZW5kUXVlc3Rpb25SZXN1bHRTdGF0dXNbdGhyZWFkLnF1ZXN0aW9uc1N0YXR1c11cbiAgICAgICAgPyBSZWNvbW1lbmRRdWVzdGlvblJlc3VsdFN0YXR1c1t0aHJlYWQucXVlc3Rpb25zU3RhdHVzXVxuICAgICAgICA6IHJlcy5zdGF0dXM7XG4gICAgICByZXMucXVlc3Rpb25zID0gdGhyZWFkLnF1ZXN0aW9ucyB8fCBbXTtcbiAgICAgIHJlcy5lcnJvciA9IHRocmVhZC5xdWVzdGlvbnNFcnJvciBhcyBXcmVuQUlFcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZW5lcmF0ZVRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKFxuICAgIHRocmVhZElkOiBudW1iZXIsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHRocmVhZCA9IGF3YWl0IHRoaXMudGhyZWFkUmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogdGhyZWFkSWQgfSk7XG4gICAgaWYgKCF0aHJlYWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhyZWFkICR7dGhyZWFkSWR9IG5vdCBmb3VuZGApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIuaXNFeGlzdCh0aHJlYWQpKSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGB0aHJlYWQgXCIke3RocmVhZElkfVwiIHJlY29tbWVuZGVkIHF1ZXN0aW9ucyBhcmUgZ2VuZXJhdGluZywgc2tpcCB0aGUgY3VycmVudCByZXF1ZXN0YCxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IHRoaXMucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCB7IG1hbmlmZXN0IH0gPSBhd2FpdCB0aGlzLm1kbFNlcnZpY2UubWFrZUN1cnJlbnRNb2RlbE1ETCgpO1xuXG4gICAgY29uc3QgdGhyZWFkUmVzcG9uc2VzID0gYXdhaXQgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkuZmluZEFsbEJ5KHtcbiAgICAgIHRocmVhZElkLFxuICAgIH0pO1xuICAgIC8vIGRlc2NlbmRpbmcgb3JkZXIgYW5kIGdldCB0aGUgbGF0ZXN0IDVcbiAgICBjb25zdCBzbGljZWRUaHJlYWRSZXNwb25zZXMgPSB0aHJlYWRSZXNwb25zZXNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmlkIC0gYS5pZClcbiAgICAgIC5zbGljZSgwLCA1KTtcbiAgICBjb25zdCBxdWVzdGlvbnMgPSBzbGljZWRUaHJlYWRSZXNwb25zZXMubWFwKCh7IHF1ZXN0aW9uIH0pID0+IHF1ZXN0aW9uKTtcbiAgICBjb25zdCByZWNvbW1lbmRRdWVzdGlvbkRhdGE6IFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zSW5wdXQgPSB7XG4gICAgICBtYW5pZmVzdCxcbiAgICAgIHByZXZpb3VzUXVlc3Rpb25zOiBxdWVzdGlvbnMsXG4gICAgICAuLi50aGlzLmdldFRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zQ29uZmlnKHByb2plY3QpLFxuICAgIH07XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLndyZW5BSUFkYXB0b3IuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucyhcbiAgICAgIHJlY29tbWVuZFF1ZXN0aW9uRGF0YSxcbiAgICApO1xuICAgIC8vIHJlc2V0IHRocmVhZCByZWNvbW1lbmRlZCBxdWVzdGlvbnNcbiAgICBjb25zdCB1cGRhdGVkVGhyZWFkID0gYXdhaXQgdGhpcy50aHJlYWRSZXBvc2l0b3J5LnVwZGF0ZU9uZSh0aHJlYWRJZCwge1xuICAgICAgcXVlcnlJZDogcmVzdWx0LnF1ZXJ5SWQsXG4gICAgICBxdWVzdGlvbnNTdGF0dXM6IFJlY29tbWVuZGF0aW9uUXVlc3Rpb25TdGF0dXMuR0VORVJBVElORyxcbiAgICAgIHF1ZXN0aW9uczogW10sXG4gICAgICBxdWVzdGlvbnNFcnJvcjogbnVsbCxcbiAgICB9KTtcbiAgICB0aGlzLnRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIuYWRkVGFzayh1cGRhdGVkVGhyZWFkKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICAvLyBsaXN0IHRocmVhZCByZXNwb25zZXMgZnJvbSBkYXRhYmFzZVxuICAgIC8vIGZpbHRlciBzdGF0dXMgbm90IGZpbmFsaXplZCBhbmQgcHV0IHRoZW0gaW50byBiYWNrZ3JvdW5kIHRyYWNrZXJcbiAgICBjb25zdCB0aHJlYWRSZXNwb25zZXMgPSBhd2FpdCB0aGlzLnRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeS5maW5kQWxsKCk7XG4gICAgY29uc3QgdW5maW5pbnNoZWRCcmVha2Rvd25UaHJlYWRSZXNwb25zZXMgPSB0aHJlYWRSZXNwb25zZXMuZmlsdGVyKFxuICAgICAgKHRocmVhZFJlc3BvbnNlKSA9PlxuICAgICAgICB0aHJlYWRSZXNwb25zZT8uYnJlYWtkb3duRGV0YWlsPy5zdGF0dXMgJiZcbiAgICAgICAgIWlzRmluYWxpemVkKFxuICAgICAgICAgIHRocmVhZFJlc3BvbnNlPy5icmVha2Rvd25EZXRhaWw/LnN0YXR1cyBhcyBBc2tSZXN1bHRTdGF0dXMsXG4gICAgICAgICksXG4gICAgKTtcbiAgICBsb2dnZXIuaW5mbyhcbiAgICAgIGBJbml0aWFsaXphdGlvbjogYWRkaW5nIHVuZmluaW5zaGVkIGJyZWFrZG93biB0aHJlYWQgcmVzcG9uc2VzICh0b3RhbDogJHt1bmZpbmluc2hlZEJyZWFrZG93blRocmVhZFJlc3BvbnNlcy5sZW5ndGh9KSB0byBiYWNrZ3JvdW5kIHRyYWNrZXJgLFxuICAgICk7XG4gICAgZm9yIChjb25zdCB0aHJlYWRSZXNwb25zZSBvZiB1bmZpbmluc2hlZEJyZWFrZG93blRocmVhZFJlc3BvbnNlcykge1xuICAgICAgdGhpcy5icmVha2Rvd25CYWNrZ3JvdW5kVHJhY2tlci5hZGRUYXNrKHRocmVhZFJlc3BvbnNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXNraW5nIHRhc2suXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgY3JlYXRlQXNraW5nVGFzayhcbiAgICBpbnB1dDogQXNraW5nVGFza0lucHV0LFxuICAgIHBheWxvYWQ6IEFza2luZ1BheWxvYWQsXG4gICk6IFByb21pc2U8VGFzaz4ge1xuICAgIGNvbnN0IHsgdGhyZWFkSWQsIGxhbmd1YWdlIH0gPSBwYXlsb2FkO1xuICAgIGNvbnN0IGRlcGxveUlkID0gYXdhaXQgdGhpcy5nZXREZXBsb3lJZCgpO1xuXG4gICAgLy8gaWYgaXQncyBhIGZvbGxvdy11cCBxdWVzdGlvbiwgdGhlbiB0aGUgaW5wdXQgd2lsbCBoYXZlIGEgdGhyZWFkSWRcbiAgICAvLyB0aGVuIHVzZSB0aGUgdGhyZWFkSWQgdG8gZ2V0IHRoZSBzcWwgYW5kIGdldCB0aGUgc3RlcHMgb2YgbGFzdCB0aHJlYWQgcmVzcG9uc2VcbiAgICAvLyBjb25zdHJ1Y3QgaXQgaW50byBBc2tIaXN0b3J5IGFuZCBwYXNzIHRvIGFza1xuICAgIGNvbnN0IGhpc3Rvcnk6IEFza0hpc3RvcnkgPSB0aHJlYWRJZFxuICAgICAgPyBhd2FpdCB0aGlzLmdldEhpc3RvcnkodGhyZWFkSWQpXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLndyZW5BSUFkYXB0b3IuYXNrKHtcbiAgICAgIHF1ZXJ5OiBpbnB1dC5xdWVzdGlvbixcbiAgICAgIGhpc3RvcnksXG4gICAgICBkZXBsb3lJZCxcbiAgICAgIGNvbmZpZ3VyYXRpb25zOiB7IGxhbmd1YWdlIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiByZXNwb25zZS5xdWVyeUlkLFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY2FuY2VsQXNraW5nVGFzayh0YXNrSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGV2ZW50TmFtZSA9IFRlbGVtZXRyeUV2ZW50LkhPTUVfQ0FOQ0VMX0FTSztcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy53cmVuQUlBZGFwdG9yLmNhbmNlbEFzayh0YXNrSWQpO1xuICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50TmFtZSwge30pO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICB0aGlzLnRlbGVtZXRyeS5zZW5kRXZlbnQoZXZlbnROYW1lLCB7fSwgZXJyLmV4dGVuc2lvbnM/LnNlcnZpY2UsIGZhbHNlKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0QXNraW5nVGFzayh0YXNrSWQ6IHN0cmluZyk6IFByb21pc2U8QXNrUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMud3JlbkFJQWRhcHRvci5nZXRBc2tSZXN1bHQodGFza0lkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc2tpbmcgZGV0YWlsIHRhc2suXG4gICAqIFRoZSBwcm9jZXNzIG9mIGNyZWF0aW5nIGEgdGhyZWFkIGlzIGFzIGZvbGxvd3M6XG4gICAqIElmIGlucHV0IGNvbnRhaW5zIGEgdmlld0lkLCBzaW1wbHkgY3JlYXRlIGEgdGhyZWFkIGZyb20gc2F2ZWQgcHJvcGVydGllcyBvZiB0aGUgdmlldy5cbiAgICogT3RoZXJ3aXNlLCBjcmVhdGUgYSB0YXNrIG9uIEFJIHNlcnZpY2UgdG8gZ2VuZXJhdGUgdGhlIGRldGFpbC5cbiAgICogMS4gY3JlYXRlIGEgdGFzayBvbiBBSSBzZXJ2aWNlIHRvIGdlbmVyYXRlIHRoZSBkZXRhaWxcbiAgICogMi4gY3JlYXRlIGEgdGhyZWFkIGFuZCB0aGUgZmlyc3QgdGhyZWFkIHJlc3BvbnNlIHdpdGggcXVlc3Rpb24gYW5kIHNxbFxuICAgKi9cbiAgcHVibGljIGFzeW5jIGNyZWF0ZVRocmVhZChpbnB1dDogQXNraW5nRGV0YWlsVGFza0lucHV0KTogUHJvbWlzZTxUaHJlYWQ+IHtcbiAgICAvLyBpZiBpbnB1dCBjb250YWlucyBhIHZpZXdJZCwgc2ltcGx5IGNyZWF0ZSBhIHRocmVhZCBmcm9tIHNhdmVkIHByb3BlcnRpZXMgb2YgdGhlIHZpZXdcbiAgICBpZiAoaW5wdXQudmlld0lkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaHJlYWRGcm9tVmlldyhpbnB1dCk7XG4gICAgfVxuXG4gICAgLy8gMS4gY3JlYXRlIGEgdGhyZWFkIGFuZCB0aGUgZmlyc3QgdGhyZWFkIHJlc3BvbnNlXG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgdGhpcy5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IHRocmVhZCA9IGF3YWl0IHRoaXMudGhyZWFkUmVwb3NpdG9yeS5jcmVhdGVPbmUoe1xuICAgICAgcHJvamVjdElkOiBpZCxcbiAgICAgIHN1bW1hcnk6IGlucHV0LnF1ZXN0aW9uLFxuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkuY3JlYXRlT25lKHtcbiAgICAgIHRocmVhZElkOiB0aHJlYWQuaWQsXG4gICAgICBxdWVzdGlvbjogaW5wdXQucXVlc3Rpb24sXG4gICAgICBzcWw6IGlucHV0LnNxbCxcbiAgICB9KTtcblxuICAgIC8vIHJldHVybiB0aGUgdGFzayBpZFxuICAgIHJldHVybiB0aHJlYWQ7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgbGlzdFRocmVhZHMoKTogUHJvbWlzZTxUaHJlYWRbXT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IHRoaXMucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy50aHJlYWRSZXBvc2l0b3J5Lmxpc3RBbGxUaW1lRGVzY09yZGVyKGlkKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVUaHJlYWQoXG4gICAgdGhyZWFkSWQ6IG51bWJlcixcbiAgICBpbnB1dDogUGFydGlhbDxBc2tpbmdEZXRhaWxUYXNrVXBkYXRlSW5wdXQ+LFxuICApOiBQcm9taXNlPFRocmVhZD4ge1xuICAgIC8vIGlmIGlucHV0IGlzIGVtcHR5LCB0aHJvdyBlcnJvclxuICAgIGlmIChpc0VtcHR5KGlucHV0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVcGRhdGUgdGhyZWFkIGlucHV0IGlzIGVtcHR5Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudGhyZWFkUmVwb3NpdG9yeS51cGRhdGVPbmUodGhyZWFkSWQsIHtcbiAgICAgIHN1bW1hcnk6IGlucHV0LnN1bW1hcnksXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVsZXRlVGhyZWFkKHRocmVhZElkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnRocmVhZFJlcG9zaXRvcnkuZGVsZXRlT25lKHRocmVhZElkKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjcmVhdGVUaHJlYWRSZXNwb25zZShcbiAgICBpbnB1dDogQXNraW5nRGV0YWlsVGFza0lucHV0LFxuICAgIHRocmVhZElkOiBudW1iZXIsXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+IHtcbiAgICBjb25zdCB0aHJlYWQgPSBhd2FpdCB0aGlzLnRocmVhZFJlcG9zaXRvcnkuZmluZE9uZUJ5KHtcbiAgICAgIGlkOiB0aHJlYWRJZCxcbiAgICB9KTtcblxuICAgIGlmICghdGhyZWFkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRocmVhZCAke3RocmVhZElkfSBub3QgZm91bmRgKTtcbiAgICB9XG5cbiAgICAvLyBpZiBpbnB1dCBjb250YWlucyBhIHZpZXdJZCwgc2ltcGx5IGNyZWF0ZSBhIHRocmVhZCBmcm9tIHNhdmVkIHByb3BlcnRpZXMgb2YgdGhlIHZpZXdcbiAgICBpZiAoaW5wdXQudmlld0lkKSB7XG4gICAgICBjb25zdCB2aWV3ID0gYXdhaXQgdGhpcy52aWV3UmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogaW5wdXQudmlld0lkIH0pO1xuXG4gICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWaWV3ICR7aW5wdXQudmlld0lkfSBub3QgZm91bmRgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jcmVhdGVUaHJlYWRSZXNwb25zZUZyb21WaWV3KFxuICAgICAgICBpbnB1dC5xdWVzdGlvbixcbiAgICAgICAgdmlldy5zdGF0ZW1lbnQsXG4gICAgICAgIHZpZXcsXG4gICAgICAgIHRocmVhZCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGNvbnN0IHRocmVhZFJlc3BvbnNlID0gYXdhaXQgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkuY3JlYXRlT25lKHtcbiAgICAgIHRocmVhZElkOiB0aHJlYWQuaWQsXG4gICAgICBxdWVzdGlvbjogaW5wdXQucXVlc3Rpb24sXG4gICAgICBzcWw6IGlucHV0LnNxbCxcbiAgICB9KTtcblxuICAgIHJldHVybiB0aHJlYWRSZXNwb25zZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQnJlYWtkb3duKFxuICAgIHRocmVhZFJlc3BvbnNlSWQ6IG51bWJlcixcbiAgICBjb25maWd1cmF0aW9uczogeyBsYW5ndWFnZTogc3RyaW5nIH0sXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IGxhbmd1YWdlIH0gPSBjb25maWd1cmF0aW9ucztcbiAgICBjb25zdCB0aHJlYWRSZXNwb25zZSA9IGF3YWl0IHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LmZpbmRPbmVCeSh7XG4gICAgICBpZDogdGhyZWFkUmVzcG9uc2VJZCxcbiAgICB9KTtcblxuICAgIGlmICghdGhyZWFkUmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhyZWFkIHJlc3BvbnNlICR7dGhyZWFkUmVzcG9uc2VJZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgLy8gMS4gY3JlYXRlIGEgdGFzayBvbiBBSSBzZXJ2aWNlIHRvIGdlbmVyYXRlIHRoZSBkZXRhaWxcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMud3JlbkFJQWRhcHRvci5nZW5lcmF0ZUFza0RldGFpbCh7XG4gICAgICBxdWVyeTogdGhyZWFkUmVzcG9uc2UucXVlc3Rpb24sXG4gICAgICBzcWw6IHRocmVhZFJlc3BvbnNlLnNxbCxcbiAgICAgIGNvbmZpZ3VyYXRpb25zOiB7IGxhbmd1YWdlIH0sXG4gICAgfSk7XG5cbiAgICAvLyAyLiB1cGRhdGUgdGhlIHRocmVhZCByZXNwb25zZSB3aXRoIGJyZWFrZG93biBkZXRhaWxcbiAgICBjb25zdCB1cGRhdGVkVGhyZWFkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeS51cGRhdGVPbmUoXG4gICAgICB0aHJlYWRSZXNwb25zZS5pZCxcbiAgICAgIHtcbiAgICAgICAgYnJlYWtkb3duRGV0YWlsOiB7XG4gICAgICAgICAgcXVlcnlJZDogcmVzcG9uc2UucXVlcnlJZCxcbiAgICAgICAgICBzdGF0dXM6IEFza1Jlc3VsdFN0YXR1cy5VTkRFUlNUQU5ESU5HLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8gMy4gcHV0IHRoZSB0YXNrIGludG8gYmFja2dyb3VuZCB0cmFja2VyXG4gICAgdGhpcy5icmVha2Rvd25CYWNrZ3JvdW5kVHJhY2tlci5hZGRUYXNrKHVwZGF0ZWRUaHJlYWRSZXNwb25zZSk7XG5cbiAgICAvLyByZXR1cm4gdGhlIHRhc2sgaWRcbiAgICByZXR1cm4gdXBkYXRlZFRocmVhZFJlc3BvbnNlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdlbmVyYXRlVGhyZWFkUmVzcG9uc2VBbnN3ZXIoXG4gICAgdGhyZWFkUmVzcG9uc2VJZDogbnVtYmVyLFxuICApOiBQcm9taXNlPFRocmVhZFJlc3BvbnNlPiB7XG4gICAgY29uc3QgdGhyZWFkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeS5maW5kT25lQnkoe1xuICAgICAgaWQ6IHRocmVhZFJlc3BvbnNlSWQsXG4gICAgfSk7XG5cbiAgICBpZiAoIXRocmVhZFJlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRocmVhZCByZXNwb25zZSAke3RocmVhZFJlc3BvbnNlSWR9IG5vdCBmb3VuZGApO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSB3aXRoIGluaXRpYWwgc3RhdHVzXG4gICAgY29uc3QgdXBkYXRlZFRocmVhZFJlc3BvbnNlID0gYXdhaXQgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkudXBkYXRlT25lKFxuICAgICAgdGhyZWFkUmVzcG9uc2UuaWQsXG4gICAgICB7XG4gICAgICAgIGFuc3dlckRldGFpbDoge1xuICAgICAgICAgIHN0YXR1czogVGhyZWFkUmVzcG9uc2VBbnN3ZXJTdGF0dXMuTk9UX1NUQVJURUQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICk7XG5cbiAgICAvLyBwdXQgdGhlIHRhc2sgaW50byBiYWNrZ3JvdW5kIHRyYWNrZXJcbiAgICB0aGlzLnRleHRCYXNlZEFuc3dlckJhY2tncm91bmRUcmFja2VyLmFkZFRhc2sodXBkYXRlZFRocmVhZFJlc3BvbnNlKTtcblxuICAgIHJldHVybiB1cGRhdGVkVGhyZWFkUmVzcG9uc2U7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVUaHJlYWRSZXNwb25zZUNoYXJ0KFxuICAgIHRocmVhZFJlc3BvbnNlSWQ6IG51bWJlcixcbiAgICBjb25maWd1cmF0aW9uczogeyBsYW5ndWFnZTogc3RyaW5nIH0sXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+IHtcbiAgICBjb25zdCB0aHJlYWRSZXNwb25zZSA9IGF3YWl0IHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LmZpbmRPbmVCeSh7XG4gICAgICBpZDogdGhyZWFkUmVzcG9uc2VJZCxcbiAgICB9KTtcblxuICAgIGlmICghdGhyZWFkUmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhyZWFkIHJlc3BvbnNlICR7dGhyZWFkUmVzcG9uc2VJZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgLy8gMS4gY3JlYXRlIGEgdGFzayBvbiBBSSBzZXJ2aWNlIHRvIGdlbmVyYXRlIHRoZSBjaGFydFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy53cmVuQUlBZGFwdG9yLmdlbmVyYXRlQ2hhcnQoe1xuICAgICAgcXVlcnk6IHRocmVhZFJlc3BvbnNlLnF1ZXN0aW9uLFxuICAgICAgc3FsOiB0aHJlYWRSZXNwb25zZS5zcWwsXG4gICAgICBjb25maWd1cmF0aW9ucyxcbiAgICB9KTtcblxuICAgIC8vIDIuIHVwZGF0ZSB0aGUgdGhyZWFkIHJlc3BvbnNlIHdpdGggY2hhcnQgZGV0YWlsXG4gICAgY29uc3QgdXBkYXRlZFRocmVhZFJlc3BvbnNlID0gYXdhaXQgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkudXBkYXRlT25lKFxuICAgICAgdGhyZWFkUmVzcG9uc2UuaWQsXG4gICAgICB7XG4gICAgICAgIGNoYXJ0RGV0YWlsOiB7XG4gICAgICAgICAgcXVlcnlJZDogcmVzcG9uc2UucXVlcnlJZCxcbiAgICAgICAgICBzdGF0dXM6IENoYXJ0U3RhdHVzLkZFVENISU5HLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8gMy4gcHV0IHRoZSB0YXNrIGludG8gYmFja2dyb3VuZCB0cmFja2VyXG4gICAgdGhpcy5jaGFydEJhY2tncm91bmRUcmFja2VyLmFkZFRhc2sodXBkYXRlZFRocmVhZFJlc3BvbnNlKTtcblxuICAgIHJldHVybiB1cGRhdGVkVGhyZWFkUmVzcG9uc2U7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgYWRqdXN0VGhyZWFkUmVzcG9uc2VDaGFydChcbiAgICB0aHJlYWRSZXNwb25zZUlkOiBudW1iZXIsXG4gICAgaW5wdXQ6IENoYXJ0QWRqdXN0bWVudE9wdGlvbixcbiAgICBjb25maWd1cmF0aW9uczogeyBsYW5ndWFnZTogc3RyaW5nIH0sXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+IHtcbiAgICBjb25zdCB0aHJlYWRSZXNwb25zZSA9IGF3YWl0IHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LmZpbmRPbmVCeSh7XG4gICAgICBpZDogdGhyZWFkUmVzcG9uc2VJZCxcbiAgICB9KTtcblxuICAgIGlmICghdGhyZWFkUmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhyZWFkIHJlc3BvbnNlICR7dGhyZWFkUmVzcG9uc2VJZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgLy8gMS4gY3JlYXRlIGEgdGFzayBvbiBBSSBzZXJ2aWNlIHRvIGFkanVzdCB0aGUgY2hhcnRcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMud3JlbkFJQWRhcHRvci5hZGp1c3RDaGFydCh7XG4gICAgICBxdWVyeTogdGhyZWFkUmVzcG9uc2UucXVlc3Rpb24sXG4gICAgICBzcWw6IHRocmVhZFJlc3BvbnNlLnNxbCxcbiAgICAgIGFkanVzdG1lbnRPcHRpb246IGlucHV0LFxuICAgICAgY2hhcnRTY2hlbWE6IHRocmVhZFJlc3BvbnNlLmNoYXJ0RGV0YWlsPy5jaGFydFNjaGVtYSxcbiAgICAgIGNvbmZpZ3VyYXRpb25zLFxuICAgIH0pO1xuXG4gICAgLy8gMi4gdXBkYXRlIHRoZSB0aHJlYWQgcmVzcG9uc2Ugd2l0aCBjaGFydCBkZXRhaWxcbiAgICBjb25zdCB1cGRhdGVkVGhyZWFkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeS51cGRhdGVPbmUoXG4gICAgICB0aHJlYWRSZXNwb25zZS5pZCxcbiAgICAgIHtcbiAgICAgICAgY2hhcnREZXRhaWw6IHtcbiAgICAgICAgICBxdWVyeUlkOiByZXNwb25zZS5xdWVyeUlkLFxuICAgICAgICAgIHN0YXR1czogQ2hhcnRTdGF0dXMuRkVUQ0hJTkcsXG4gICAgICAgICAgYWRqdXN0bWVudDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIC8vIDMuIHB1dCB0aGUgdGFzayBpbnRvIGJhY2tncm91bmQgdHJhY2tlclxuICAgIHRoaXMuY2hhcnRBZGp1c3RtZW50QmFja2dyb3VuZFRyYWNrZXIuYWRkVGFzayh1cGRhdGVkVGhyZWFkUmVzcG9uc2UpO1xuXG4gICAgcmV0dXJuIHVwZGF0ZWRUaHJlYWRSZXNwb25zZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZXNwb25zZXNXaXRoVGhyZWFkKHRocmVhZElkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkuZ2V0UmVzcG9uc2VzV2l0aFRocmVhZCh0aHJlYWRJZCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UmVzcG9uc2UocmVzcG9uc2VJZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LmZpbmRPbmVCeSh7IGlkOiByZXNwb25zZUlkIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHByZXZpZXdEYXRhKHJlc3BvbnNlSWQ6IG51bWJlciwgbGltaXQ/OiBudW1iZXIpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0UmVzcG9uc2UocmVzcG9uc2VJZCk7XG4gICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaHJlYWQgcmVzcG9uc2UgJHtyZXNwb25zZUlkfSBub3QgZm91bmRgKTtcbiAgICB9XG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IHRoaXMucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCBkZXBsb3ltZW50ID0gYXdhaXQgdGhpcy5kZXBsb3lTZXJ2aWNlLmdldExhc3REZXBsb3ltZW50KHByb2plY3QuaWQpO1xuICAgIGNvbnN0IG1kbCA9IGRlcGxveW1lbnQubWFuaWZlc3Q7XG4gICAgY29uc3QgZXZlbnROYW1lID0gVGVsZW1ldHJ5RXZlbnQuSE9NRV9QUkVWSUVXX0FOU1dFUjtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLnF1ZXJ5U2VydmljZS5wcmV2aWV3KHJlc3BvbnNlLnNxbCwge1xuICAgICAgICBwcm9qZWN0LFxuICAgICAgICBtYW5pZmVzdDogbWRsLFxuICAgICAgICBsaW1pdCxcbiAgICAgIH0pKSBhcyBQcmV2aWV3RGF0YVJlc3BvbnNlO1xuICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50TmFtZSwgeyBzcWw6IHJlc3BvbnNlLnNxbCB9KTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICB0aGlzLnRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgeyBzcWw6IHJlc3BvbnNlLnNxbCwgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBwcmV2aWV3IHRoZSBkYXRhIG9mIGEgdGhyZWFkIHJlc3BvbnNlXG4gICAqIGdldCB0aGUgdGFyZ2V0IHRocmVhZCByZXNwb25zZSBhbmQgZ2V0IHRoZSBzdGVwc1xuICAgKiBjb25zdHJ1Y3QgdGhlIENURXMgYW5kIGdldCB0aGUgZGF0YVxuICAgKiBAcGFyYW0gcmVzcG9uc2VJZDogdGhlIGlkIG9mIHRoZSB0aHJlYWQgcmVzcG9uc2VcbiAgICogQHBhcmFtIHN0ZXBJbmRleDogdGhlIHN0ZXAgaW4gdGhlIHJlc3BvbnNlIGRldGFpbFxuICAgKiBAcmV0dXJucyBQcm9taXNlPFF1ZXJ5UmVzcG9uc2U+XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcHJldmlld0JyZWFrZG93bkRhdGEoXG4gICAgcmVzcG9uc2VJZDogbnVtYmVyLFxuICAgIHN0ZXBJbmRleD86IG51bWJlcixcbiAgICBsaW1pdD86IG51bWJlcixcbiAgKTogUHJvbWlzZTxQcmV2aWV3RGF0YVJlc3BvbnNlPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldFJlc3BvbnNlKHJlc3BvbnNlSWQpO1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhyZWFkIHJlc3BvbnNlICR7cmVzcG9uc2VJZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCB0aGlzLnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgZGVwbG95bWVudCA9IGF3YWl0IHRoaXMuZGVwbG95U2VydmljZS5nZXRMYXN0RGVwbG95bWVudChwcm9qZWN0LmlkKTtcbiAgICBjb25zdCBtZGwgPSBkZXBsb3ltZW50Lm1hbmlmZXN0O1xuICAgIGNvbnN0IHN0ZXBzID0gcmVzcG9uc2U/LmJyZWFrZG93bkRldGFpbD8uc3RlcHM7XG4gICAgY29uc3Qgc3FsID0gZm9ybWF0KGNvbnN0cnVjdEN0ZVNxbChzdGVwcywgc3RlcEluZGV4KSk7XG4gICAgY29uc3QgZXZlbnROYW1lID0gVGVsZW1ldHJ5RXZlbnQuSE9NRV9QUkVWSUVXX0FOU1dFUjtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLnF1ZXJ5U2VydmljZS5wcmV2aWV3KHNxbCwge1xuICAgICAgICBwcm9qZWN0LFxuICAgICAgICBtYW5pZmVzdDogbWRsLFxuICAgICAgICBsaW1pdCxcbiAgICAgIH0pKSBhcyBQcmV2aWV3RGF0YVJlc3BvbnNlO1xuICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50TmFtZSwgeyBzcWwgfSk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHsgc3FsLCBlcnJvcjogZXJyLm1lc3NhZ2UgfSxcbiAgICAgICAgZXJyLmV4dGVuc2lvbnM/LnNlcnZpY2UsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlSW5zdGFudFJlY29tbWVuZGVkUXVlc3Rpb25zKFxuICAgIGlucHV0OiBJbnN0YW50UmVjb21tZW5kZWRRdWVzdGlvbnNJbnB1dCxcbiAgKTogUHJvbWlzZTxUYXNrPiB7XG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IHRoaXMucHJvamVjdFNlcnZpY2UuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBjb25zdCB7IG1hbmlmZXN0IH0gPSBhd2FpdCB0aGlzLmRlcGxveVNlcnZpY2UuZ2V0TGFzdERlcGxveW1lbnQocHJvamVjdC5pZCk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMud3JlbkFJQWRhcHRvci5nZW5lcmF0ZVJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKHtcbiAgICAgIG1hbmlmZXN0LFxuICAgICAgcHJldmlvdXNRdWVzdGlvbnM6IGlucHV0LnByZXZpb3VzUXVlc3Rpb25zLFxuICAgICAgLi4udGhpcy5nZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc0NvbmZpZyhwcm9qZWN0KSxcbiAgICB9KTtcbiAgICByZXR1cm4geyBpZDogcmVzcG9uc2UucXVlcnlJZCB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldEluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9ucyhcbiAgICBxdWVyeUlkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8UmVjb21tZW5kYXRpb25RdWVzdGlvbnNSZXN1bHQ+IHtcbiAgICBjb25zdCByZXNwb25zZSA9XG4gICAgICBhd2FpdCB0aGlzLndyZW5BSUFkYXB0b3IuZ2V0UmVjb21tZW5kYXRpb25RdWVzdGlvbnNSZXN1bHQocXVlcnlJZCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlbGV0ZUFsbEJ5UHJvamVjdElkKHByb2plY3RJZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gZGVsZXRlIGFsbCB0aHJlYWRzXG4gICAgYXdhaXQgdGhpcy50aHJlYWRSZXBvc2l0b3J5LmRlbGV0ZUFsbEJ5KHsgcHJvamVjdElkIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNoYW5nZVRocmVhZFJlc3BvbnNlQW5zd2VyRGV0YWlsU3RhdHVzKFxuICAgIHJlc3BvbnNlSWQ6IG51bWJlcixcbiAgICBzdGF0dXM6IFRocmVhZFJlc3BvbnNlQW5zd2VyU3RhdHVzLFxuICAgIGNvbnRlbnQ/OiBzdHJpbmcsXG4gICk6IFByb21pc2U8VGhyZWFkUmVzcG9uc2U+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LmZpbmRPbmVCeSh7XG4gICAgICBpZDogcmVzcG9uc2VJZCxcbiAgICB9KTtcbiAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRocmVhZCByZXNwb25zZSAke3Jlc3BvbnNlSWR9IG5vdCBmb3VuZGApO1xuICAgIH1cblxuICAgIGlmIChyZXNwb25zZS5hbnN3ZXJEZXRhaWw/LnN0YXR1cyA9PT0gc3RhdHVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlZFJlc3BvbnNlID0gYXdhaXQgdGhpcy50aHJlYWRSZXNwb25zZVJlcG9zaXRvcnkudXBkYXRlT25lKFxuICAgICAgcmVzcG9uc2VJZCxcbiAgICAgIHtcbiAgICAgICAgYW5zd2VyRGV0YWlsOiB7XG4gICAgICAgICAgLi4ucmVzcG9uc2UuYW5zd2VyRGV0YWlsLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICBjb250ZW50LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHVwZGF0ZWRSZXNwb25zZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0RGVwbG95SWQoKSB7XG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgdGhpcy5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IGxhc3REZXBsb3kgPSBhd2FpdCB0aGlzLmRlcGxveVNlcnZpY2UuZ2V0TGFzdERlcGxveW1lbnQoaWQpO1xuICAgIHJldHVybiBsYXN0RGVwbG95Lmhhc2g7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0aHJlYWQgd2l0aCB0aHJlYWRJZCAmIGxhdGVzdCB0aHJlYWQgcmVzcG9uc2Ugb2YgYSB0aHJlYWRcbiAgICogdHJhbnNmb3JtIHRoZSByZXNwb25zZSBpbnRvIEFza0hpc3RvcnlcbiAgICogQHBhcmFtIHRocmVhZElkXG4gICAqIEByZXR1cm5zIFByb21pc2U8QXNrSGlzdG9yeT5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0SGlzdG9yeSh0aHJlYWRJZDogbnVtYmVyKTogUHJvbWlzZTxBc2tIaXN0b3J5PiB7XG4gICAgY29uc3QgcmVzcG9uc2VzID1cbiAgICAgIGF3YWl0IHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LmdldFJlc3BvbnNlc1dpdGhUaHJlYWQodGhyZWFkSWQsIDEpO1xuICAgIGlmICghcmVzcG9uc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgbGF0ZXN0UmVzcG9uc2UgPSByZXNwb25zZXNbMF07XG4gICAgLy8gc3RlcHMgaXMgb25seSBhdmFpbGFibGUgaW4gYnJlYWtkb3duIGRldGFpbFxuICAgIC8vIGlmIHdlIGhhdmVuJ3QgZ2VuZXJhdGVkIHRoZSBicmVha2Rvd24gZGV0YWlsLCBmYWxsYmFjayB0byB1c2UgdGhlIHF1ZXN0aW9uICYgc3FsXG4gICAgY29uc3Qgc3RlcHMgPSBsYXRlc3RSZXNwb25zZS5icmVha2Rvd25EZXRhaWw/LnN0ZXBzIHx8IFtcbiAgICAgIHtcbiAgICAgICAgc3VtbWFyeTogbGF0ZXN0UmVzcG9uc2UucXVlc3Rpb24sXG4gICAgICAgIGN0ZU5hbWU6ICcnLFxuICAgICAgICBzcWw6IGxhdGVzdFJlc3BvbnNlLnNxbCxcbiAgICAgIH0sXG4gICAgXTtcbiAgICByZXR1cm4ge1xuICAgICAgc3FsOiBsYXRlc3RSZXNwb25zZS5zcWwsXG4gICAgICBzdGVwcyxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUaHJlYWRGcm9tVmlldyhpbnB1dDogQXNraW5nRGV0YWlsVGFza0lucHV0KSB7XG4gICAgY29uc3QgdmlldyA9IGF3YWl0IHRoaXMudmlld1JlcG9zaXRvcnkuZmluZE9uZUJ5KHsgaWQ6IGlucHV0LnZpZXdJZCB9KTtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVmlldyAke2lucHV0LnZpZXdJZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgdGhpcy5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IHRocmVhZCA9IGF3YWl0IHRoaXMudGhyZWFkUmVwb3NpdG9yeS5jcmVhdGVPbmUoe1xuICAgICAgcHJvamVjdElkOiBpZCxcbiAgICAgIHN1bW1hcnk6IGlucHV0LnF1ZXN0aW9uLFxuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVUaHJlYWRSZXNwb25zZUZyb21WaWV3KFxuICAgICAgaW5wdXQucXVlc3Rpb24sXG4gICAgICB2aWV3LnN0YXRlbWVudCxcbiAgICAgIHZpZXcsXG4gICAgICB0aHJlYWQsXG4gICAgKTtcbiAgICByZXR1cm4gdGhyZWFkO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUaHJlYWRSZXNwb25zZUZyb21WaWV3KFxuICAgIHF1ZXN0aW9uOiBzdHJpbmcsXG4gICAgc3FsOiBzdHJpbmcsXG4gICAgdmlldzogVmlldyxcbiAgICB0aHJlYWQ6IFRocmVhZCxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMudGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LmNyZWF0ZU9uZSh7XG4gICAgICB0aHJlYWRJZDogdGhyZWFkLmlkLFxuICAgICAgdmlld0lkOiB2aWV3LmlkLFxuICAgICAgcXVlc3Rpb24sXG4gICAgICBzcWwsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGdldFRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zQ29uZmlnKHByb2plY3Q6IFByb2plY3QpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWF4Q2F0ZWdvcmllczogY29uZmlnLnRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25NYXhDYXRlZ29yaWVzLFxuICAgICAgbWF4UXVlc3Rpb25zOiBjb25maWcudGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbnNNYXhRdWVzdGlvbnMsXG4gICAgICBjb25maWd1cmF0aW9uOiB7XG4gICAgICAgIGxhbmd1YWdlOiBXcmVuQUlMYW5ndWFnZVtwcm9qZWN0Lmxhbmd1YWdlXSB8fCBXcmVuQUlMYW5ndWFnZS5FTixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkFza1Jlc3VsdFN0YXR1cyIsIlJlY29tbWVuZGF0aW9uUXVlc3Rpb25TdGF0dXMiLCJDaGFydFN0YXR1cyIsIldyZW5BSUxhbmd1YWdlIiwiZ2V0TG9nZ2VyIiwiaXNFbXB0eSIsImlzTmlsIiwiZm9ybWF0IiwiVGVsZW1ldHJ5RXZlbnQiLCJXcmVuU2VydmljZSIsIlRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIiLCJDaGFydEJhY2tncm91bmRUcmFja2VyIiwiQ2hhcnRBZGp1c3RtZW50QmFja2dyb3VuZFRyYWNrZXIiLCJnZXRDb25maWciLCJUZXh0QmFzZWRBbnN3ZXJCYWNrZ3JvdW5kVHJhY2tlciIsImNvbmZpZyIsImxvZ2dlciIsImxldmVsIiwiUmVjb21tZW5kUXVlc3Rpb25SZXN1bHRTdGF0dXMiLCJUaHJlYWRSZXNwb25zZUFuc3dlclN0YXR1cyIsImlzRmluYWxpemVkIiwic3RhdHVzIiwiRkFJTEVEIiwiRklOSVNIRUQiLCJTVE9QUEVEIiwiY29uc3RydWN0Q3RlU3FsIiwic3RlcHMiLCJzdGVwSW5kZXgiLCJsZW5ndGgiLCJFcnJvciIsInNsaWNlZFN0ZXBzIiwic2xpY2UiLCJzdW1tYXJ5Iiwic3FsIiwiZm9yRWFjaCIsInN0ZXAiLCJpbmRleCIsImN0ZU5hbWUiLCJCcmVha2Rvd25CYWNrZ3JvdW5kVHJhY2tlciIsImNvbnN0cnVjdG9yIiwidGVsZW1ldHJ5Iiwid3JlbkFJQWRhcHRvciIsInRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSIsInRhc2tzIiwicnVubmluZ0pvYnMiLCJTZXQiLCJpbnRlcnZhbFRpbWUiLCJzdGFydCIsImluZm8iLCJzZXRJbnRlcnZhbCIsImpvYnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJ0aHJlYWRSZXNwb25zZSIsImhhcyIsImlkIiwiYWRkIiwiYnJlYWtkb3duRGV0YWlsIiwicmVzdWx0IiwiZ2V0QXNrRGV0YWlsUmVzdWx0IiwicXVlcnlJZCIsImRlYnVnIiwiZGVsZXRlIiwidXBkYXRlZEJyZWFrZG93bkRldGFpbCIsImVycm9yIiwiZGVzY3JpcHRpb24iLCJyZXNwb25zZSIsInVwZGF0ZU9uZSIsImV2ZW50UHJvcGVydGllcyIsInF1ZXN0aW9uIiwic2VuZEV2ZW50IiwiSE9NRV9BTlNXRVJfQlJFQUtET1dOIiwiQUkiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsImpvYiIsInRoZW4iLCJyZXN1bHRzIiwicmVhc29uIiwiYWRkVGFzayIsImdldFRhc2tzIiwiQXNraW5nU2VydmljZSIsImRlcGxveVNlcnZpY2UiLCJwcm9qZWN0U2VydmljZSIsInZpZXdSZXBvc2l0b3J5IiwidGhyZWFkUmVwb3NpdG9yeSIsInF1ZXJ5U2VydmljZSIsIm1kbFNlcnZpY2UiLCJicmVha2Rvd25CYWNrZ3JvdW5kVHJhY2tlciIsInRleHRCYXNlZEFuc3dlckJhY2tncm91bmRUcmFja2VyIiwiY2hhcnRCYWNrZ3JvdW5kVHJhY2tlciIsImNoYXJ0QWRqdXN0bWVudEJhY2tncm91bmRUcmFja2VyIiwidGhyZWFkUmVjb21tZW5kUXVlc3Rpb25CYWNrZ3JvdW5kVHJhY2tlciIsImdldFRocmVhZFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zIiwidGhyZWFkSWQiLCJ0aHJlYWQiLCJmaW5kT25lQnkiLCJyZXMiLCJxdWVzdGlvbnMiLCJxdWVzdGlvbnNTdGF0dXMiLCJxdWVzdGlvbnNFcnJvciIsImdlbmVyYXRlVGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbnMiLCJpc0V4aXN0IiwicHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0IiwibWFuaWZlc3QiLCJtYWtlQ3VycmVudE1vZGVsTURMIiwidGhyZWFkUmVzcG9uc2VzIiwiZmluZEFsbEJ5Iiwic2xpY2VkVGhyZWFkUmVzcG9uc2VzIiwic29ydCIsImEiLCJiIiwicmVjb21tZW5kUXVlc3Rpb25EYXRhIiwicHJldmlvdXNRdWVzdGlvbnMiLCJnZXRUaHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc0NvbmZpZyIsImdlbmVyYXRlUmVjb21tZW5kYXRpb25RdWVzdGlvbnMiLCJ1cGRhdGVkVGhyZWFkIiwiR0VORVJBVElORyIsImluaXRpYWxpemUiLCJmaW5kQWxsIiwidW5maW5pbnNoZWRCcmVha2Rvd25UaHJlYWRSZXNwb25zZXMiLCJmaWx0ZXIiLCJjcmVhdGVBc2tpbmdUYXNrIiwiaW5wdXQiLCJwYXlsb2FkIiwibGFuZ3VhZ2UiLCJkZXBsb3lJZCIsImdldERlcGxveUlkIiwiaGlzdG9yeSIsImdldEhpc3RvcnkiLCJhc2siLCJxdWVyeSIsImNvbmZpZ3VyYXRpb25zIiwiY2FuY2VsQXNraW5nVGFzayIsInRhc2tJZCIsImV2ZW50TmFtZSIsIkhPTUVfQ0FOQ0VMX0FTSyIsImNhbmNlbEFzayIsImVyciIsImV4dGVuc2lvbnMiLCJzZXJ2aWNlIiwiZ2V0QXNraW5nVGFzayIsImdldEFza1Jlc3VsdCIsImNyZWF0ZVRocmVhZCIsInZpZXdJZCIsImNyZWF0ZVRocmVhZEZyb21WaWV3IiwiY3JlYXRlT25lIiwicHJvamVjdElkIiwibGlzdFRocmVhZHMiLCJsaXN0QWxsVGltZURlc2NPcmRlciIsInVwZGF0ZVRocmVhZCIsImRlbGV0ZVRocmVhZCIsImRlbGV0ZU9uZSIsImNyZWF0ZVRocmVhZFJlc3BvbnNlIiwidmlldyIsImNyZWF0ZVRocmVhZFJlc3BvbnNlRnJvbVZpZXciLCJzdGF0ZW1lbnQiLCJnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQnJlYWtkb3duIiwidGhyZWFkUmVzcG9uc2VJZCIsImdlbmVyYXRlQXNrRGV0YWlsIiwidXBkYXRlZFRocmVhZFJlc3BvbnNlIiwiVU5ERVJTVEFORElORyIsImdlbmVyYXRlVGhyZWFkUmVzcG9uc2VBbnN3ZXIiLCJhbnN3ZXJEZXRhaWwiLCJnZW5lcmF0ZVRocmVhZFJlc3BvbnNlQ2hhcnQiLCJnZW5lcmF0ZUNoYXJ0IiwiY2hhcnREZXRhaWwiLCJGRVRDSElORyIsImFkanVzdFRocmVhZFJlc3BvbnNlQ2hhcnQiLCJhZGp1c3RDaGFydCIsImFkanVzdG1lbnRPcHRpb24iLCJjaGFydFNjaGVtYSIsImFkanVzdG1lbnQiLCJnZXRSZXNwb25zZXNXaXRoVGhyZWFkIiwiZ2V0UmVzcG9uc2UiLCJyZXNwb25zZUlkIiwicHJldmlld0RhdGEiLCJsaW1pdCIsImRlcGxveW1lbnQiLCJnZXRMYXN0RGVwbG95bWVudCIsIm1kbCIsIkhPTUVfUFJFVklFV19BTlNXRVIiLCJkYXRhIiwicHJldmlldyIsIm1lc3NhZ2UiLCJwcmV2aWV3QnJlYWtkb3duRGF0YSIsImNyZWF0ZUluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9ucyIsImdldEluc3RhbnRSZWNvbW1lbmRlZFF1ZXN0aW9ucyIsImdldFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zUmVzdWx0IiwiZGVsZXRlQWxsQnlQcm9qZWN0SWQiLCJkZWxldGVBbGxCeSIsImNoYW5nZVRocmVhZFJlc3BvbnNlQW5zd2VyRGV0YWlsU3RhdHVzIiwiY29udGVudCIsInVwZGF0ZWRSZXNwb25zZSIsImxhc3REZXBsb3kiLCJoYXNoIiwicmVzcG9uc2VzIiwibGF0ZXN0UmVzcG9uc2UiLCJtYXhDYXRlZ29yaWVzIiwidGhyZWFkUmVjb21tZW5kYXRpb25RdWVzdGlvbk1heENhdGVnb3JpZXMiLCJtYXhRdWVzdGlvbnMiLCJ0aHJlYWRSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc01heFF1ZXN0aW9ucyIsImNvbmZpZ3VyYXRpb24iLCJFTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/askingService.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/dashboardService.ts":
/*!********************************************************!*\
  !*** ./src/apollo/server/services/dashboardService.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DashboardService: () => (/* binding */ DashboardService)\n/* harmony export */ });\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.getLogger)(\"DashboardService\");\nlogger.level = \"debug\";\nclass DashboardService {\n    constructor({ projectService, dashboardItemRepository, dashboardRepository }){\n        this.projectService = projectService;\n        this.dashboardItemRepository = dashboardItemRepository;\n        this.dashboardRepository = dashboardRepository;\n    }\n    async initDashboard() {\n        const project = await this.projectService.getCurrentProject();\n        const existingDashboard = await this.dashboardRepository.findOneBy({\n            projectId: project.id\n        });\n        if (existingDashboard) return existingDashboard;\n        // only support one dashboard for oss\n        return await this.dashboardRepository.createOne({\n            name: \"Dashboard\",\n            projectId: project.id\n        });\n    }\n    async getCurrentDashboard() {\n        const project = await this.projectService.getCurrentProject();\n        const dashboard = await this.dashboardRepository.findOneBy({\n            projectId: project.id\n        });\n        if (!dashboard) {\n            throw new Error(\"Dashboard not found.\");\n        }\n        return dashboard;\n    }\n    async getDashboardItem(dashboardItemId) {\n        const item = await this.dashboardItemRepository.findOneBy({\n            id: dashboardItemId\n        });\n        if (!item) {\n            throw new Error(\"Dashboard item not found.\");\n        }\n        return item;\n    }\n    async getDashboardItems(dashboardId) {\n        return await this.dashboardItemRepository.findAllBy({\n            dashboardId\n        });\n    }\n    async createDashboardItem(input) {\n        const layout = await this.calculateNewLayout(input.dashboardId);\n        return await this.dashboardItemRepository.createOne({\n            dashboardId: input.dashboardId,\n            type: input.type,\n            detail: {\n                sql: input.sql,\n                chartSchema: input.chartSchema\n            },\n            layout\n        });\n    }\n    async updateDashboardItemLayouts(layouts) {\n        const updatedItems = [];\n        const isValidLayouts = layouts.every((layout)=>layout.itemId && layout.x >= 0 && layout.y >= 0 && layout.w > 0 && layout.h > 0);\n        if (!isValidLayouts) {\n            throw new Error(\"Invalid layouts boundaries.\");\n        }\n        await Promise.all(layouts.map(async (layout)=>{\n            const updatedItem = await this.dashboardItemRepository.updateOne(layout.itemId, {\n                layout: {\n                    x: layout.x,\n                    y: layout.y,\n                    w: layout.w,\n                    h: layout.h\n                }\n            });\n            updatedItems.push(updatedItem);\n        }));\n        return updatedItems;\n    }\n    async deleteDashboardItem(dashboardItemId) {\n        await this.dashboardItemRepository.deleteOne(dashboardItemId);\n        return true;\n    }\n    async calculateNewLayout(dashboardId) {\n        const dashboardItems = await this.dashboardItemRepository.findAllBy({\n            dashboardId\n        });\n        const allLayouts = dashboardItems.map((item)=>item.layout);\n        if (allLayouts.length === 0) return {\n            x: 0,\n            y: 0,\n            w: 3,\n            h: 2\n        };\n        const columnCount = 6;\n        const halfLayoutX = columnCount / 2;\n        // the current max y is the current row\n        const maxY = Math.max(...allLayouts.map((layout)=>layout.y));\n        const latestLayout = allLayouts.filter((layout)=>layout.y === maxY);\n        const isNextRow = latestLayout.reduce((acc, layout)=>acc + layout.x + layout.w, 0) > halfLayoutX;\n        const x = isNextRow ? 0 : halfLayoutX;\n        const y = isNextRow ? maxY + 2 : maxY;\n        return {\n            x,\n            y,\n            w: 3,\n            h: 2\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9kYXNoYm9hcmRTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBUzBDO0FBRzFDLE1BQU1DLFNBQVNELHdEQUFTQSxDQUFDO0FBQ3pCQyxPQUFPQyxLQUFLLEdBQUc7QUF5QlIsTUFBTUM7SUFLWEMsWUFBWSxFQUNWQyxjQUFjLEVBQ2RDLHVCQUF1QixFQUN2QkMsbUJBQW1CLEVBS3BCLENBQUU7UUFDRCxJQUFJLENBQUNGLGNBQWMsR0FBR0E7UUFDdEIsSUFBSSxDQUFDQyx1QkFBdUIsR0FBR0E7UUFDL0IsSUFBSSxDQUFDQyxtQkFBbUIsR0FBR0E7SUFDN0I7SUFFQSxNQUFhQyxnQkFBb0M7UUFDL0MsTUFBTUMsVUFBVSxNQUFNLElBQUksQ0FBQ0osY0FBYyxDQUFDSyxpQkFBaUI7UUFDM0QsTUFBTUMsb0JBQW9CLE1BQU0sSUFBSSxDQUFDSixtQkFBbUIsQ0FBQ0ssU0FBUyxDQUFDO1lBQ2pFQyxXQUFXSixRQUFRSyxFQUFFO1FBQ3ZCO1FBQ0EsSUFBSUgsbUJBQW1CLE9BQU9BO1FBQzlCLHFDQUFxQztRQUNyQyxPQUFPLE1BQU0sSUFBSSxDQUFDSixtQkFBbUIsQ0FBQ1EsU0FBUyxDQUFDO1lBQzlDQyxNQUFNO1lBQ05ILFdBQVdKLFFBQVFLLEVBQUU7UUFDdkI7SUFDRjtJQUVBLE1BQWFHLHNCQUEwQztRQUNyRCxNQUFNUixVQUFVLE1BQU0sSUFBSSxDQUFDSixjQUFjLENBQUNLLGlCQUFpQjtRQUMzRCxNQUFNUSxZQUFZLE1BQU0sSUFBSSxDQUFDWCxtQkFBbUIsQ0FBQ0ssU0FBUyxDQUFDO1lBQ3pEQyxXQUFXSixRQUFRSyxFQUFFO1FBQ3ZCO1FBQ0EsSUFBSSxDQUFDSSxXQUFXO1lBQ2QsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBQ0EsT0FBT0Q7SUFDVDtJQUVBLE1BQWFFLGlCQUNYQyxlQUF1QixFQUNDO1FBQ3hCLE1BQU1DLE9BQU8sTUFBTSxJQUFJLENBQUNoQix1QkFBdUIsQ0FB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LXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvc2VydmljZXMvZGFzaGJvYXJkU2VydmljZS50cz9iNGM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIElEYXNoYm9hcmRSZXBvc2l0b3J5LFxuICBJRGFzaGJvYXJkSXRlbVJlcG9zaXRvcnksXG4gIERhc2hib2FyZCxcbiAgRGFzaGJvYXJkSXRlbSxcbiAgRGFzaGJvYXJkSXRlbVR5cGUsXG4gIERhc2hib2FyZEl0ZW1EZXRhaWwsXG4gIERhc2hib2FyZEl0ZW1MYXlvdXQsXG59IGZyb20gJ0BzZXJ2ZXIvcmVwb3NpdG9yaWVzJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BzZXJ2ZXIvdXRpbHMnO1xuaW1wb3J0IHsgSVByb2plY3RTZXJ2aWNlIH0gZnJvbSAnLi9wcm9qZWN0U2VydmljZSc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignRGFzaGJvYXJkU2VydmljZScpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVEYXNoYm9hcmRJdGVtSW5wdXQge1xuICBkYXNoYm9hcmRJZDogbnVtYmVyO1xuICB0eXBlOiBEYXNoYm9hcmRJdGVtVHlwZTtcbiAgc3FsOiBzdHJpbmc7XG4gIGNoYXJ0U2NoZW1hOiBEYXNoYm9hcmRJdGVtRGV0YWlsWydjaGFydFNjaGVtYSddO1xufVxuXG5leHBvcnQgdHlwZSBVcGRhdGVEYXNoYm9hcmRJdGVtTGF5b3V0cyA9IChEYXNoYm9hcmRJdGVtTGF5b3V0ICYge1xuICBpdGVtSWQ6IG51bWJlcjtcbn0pW107XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURhc2hib2FyZFNlcnZpY2Uge1xuICBpbml0RGFzaGJvYXJkKCk6IFByb21pc2U8RGFzaGJvYXJkPjtcbiAgZ2V0Q3VycmVudERhc2hib2FyZCgpOiBQcm9taXNlPERhc2hib2FyZD47XG4gIGdldERhc2hib2FyZEl0ZW0oZGFzaGJvYXJkSXRlbUlkOiBudW1iZXIpOiBQcm9taXNlPERhc2hib2FyZEl0ZW0+O1xuICBnZXREYXNoYm9hcmRJdGVtcyhkYXNoYm9hcmRJZDogbnVtYmVyKTogUHJvbWlzZTxEYXNoYm9hcmRJdGVtW10+O1xuICBjcmVhdGVEYXNoYm9hcmRJdGVtKGlucHV0OiBDcmVhdGVEYXNoYm9hcmRJdGVtSW5wdXQpOiBQcm9taXNlPERhc2hib2FyZEl0ZW0+O1xuICBkZWxldGVEYXNoYm9hcmRJdGVtKGRhc2hib2FyZEl0ZW1JZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPjtcbiAgdXBkYXRlRGFzaGJvYXJkSXRlbUxheW91dHMoXG4gICAgbGF5b3V0czogVXBkYXRlRGFzaGJvYXJkSXRlbUxheW91dHMsXG4gICk6IFByb21pc2U8RGFzaGJvYXJkSXRlbVtdPjtcbn1cblxuZXhwb3J0IGNsYXNzIERhc2hib2FyZFNlcnZpY2UgaW1wbGVtZW50cyBJRGFzaGJvYXJkU2VydmljZSB7XG4gIHByaXZhdGUgcHJvamVjdFNlcnZpY2U6IElQcm9qZWN0U2VydmljZTtcbiAgcHJpdmF0ZSBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeTogSURhc2hib2FyZEl0ZW1SZXBvc2l0b3J5O1xuICBwcml2YXRlIGRhc2hib2FyZFJlcG9zaXRvcnk6IElEYXNoYm9hcmRSZXBvc2l0b3J5O1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBwcm9qZWN0U2VydmljZSxcbiAgICBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeSxcbiAgICBkYXNoYm9hcmRSZXBvc2l0b3J5LFxuICB9OiB7XG4gICAgcHJvamVjdFNlcnZpY2U6IElQcm9qZWN0U2VydmljZTtcbiAgICBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeTogSURhc2hib2FyZEl0ZW1SZXBvc2l0b3J5O1xuICAgIGRhc2hib2FyZFJlcG9zaXRvcnk6IElEYXNoYm9hcmRSZXBvc2l0b3J5O1xuICB9KSB7XG4gICAgdGhpcy5wcm9qZWN0U2VydmljZSA9IHByb2plY3RTZXJ2aWNlO1xuICAgIHRoaXMuZGFzaGJvYXJkSXRlbVJlcG9zaXRvcnkgPSBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeTtcbiAgICB0aGlzLmRhc2hib2FyZFJlcG9zaXRvcnkgPSBkYXNoYm9hcmRSZXBvc2l0b3J5O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGluaXREYXNoYm9hcmQoKTogUHJvbWlzZTxEYXNoYm9hcmQ+IHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgdGhpcy5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IGV4aXN0aW5nRGFzaGJvYXJkID0gYXdhaXQgdGhpcy5kYXNoYm9hcmRSZXBvc2l0b3J5LmZpbmRPbmVCeSh7XG4gICAgICBwcm9qZWN0SWQ6IHByb2plY3QuaWQsXG4gICAgfSk7XG4gICAgaWYgKGV4aXN0aW5nRGFzaGJvYXJkKSByZXR1cm4gZXhpc3RpbmdEYXNoYm9hcmQ7XG4gICAgLy8gb25seSBzdXBwb3J0IG9uZSBkYXNoYm9hcmQgZm9yIG9zc1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmRhc2hib2FyZFJlcG9zaXRvcnkuY3JlYXRlT25lKHtcbiAgICAgIG5hbWU6ICdEYXNoYm9hcmQnLFxuICAgICAgcHJvamVjdElkOiBwcm9qZWN0LmlkLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldEN1cnJlbnREYXNoYm9hcmQoKTogUHJvbWlzZTxEYXNoYm9hcmQ+IHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgdGhpcy5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IGRhc2hib2FyZCA9IGF3YWl0IHRoaXMuZGFzaGJvYXJkUmVwb3NpdG9yeS5maW5kT25lQnkoe1xuICAgICAgcHJvamVjdElkOiBwcm9qZWN0LmlkLFxuICAgIH0pO1xuICAgIGlmICghZGFzaGJvYXJkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Rhc2hib2FyZCBub3QgZm91bmQuJyk7XG4gICAgfVxuICAgIHJldHVybiBkYXNoYm9hcmQ7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0RGFzaGJvYXJkSXRlbShcbiAgICBkYXNoYm9hcmRJdGVtSWQ6IG51bWJlcixcbiAgKTogUHJvbWlzZTxEYXNoYm9hcmRJdGVtPiB7XG4gICAgY29uc3QgaXRlbSA9IGF3YWl0IHRoaXMuZGFzaGJvYXJkSXRlbVJlcG9zaXRvcnkuZmluZE9uZUJ5KHtcbiAgICAgIGlkOiBkYXNoYm9hcmRJdGVtSWQsXG4gICAgfSk7XG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Rhc2hib2FyZCBpdGVtIG5vdCBmb3VuZC4nKTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0RGFzaGJvYXJkSXRlbXMoXG4gICAgZGFzaGJvYXJkSWQ6IG51bWJlcixcbiAgKTogUHJvbWlzZTxEYXNoYm9hcmRJdGVtW10+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5kYXNoYm9hcmRJdGVtUmVwb3NpdG9yeS5maW5kQWxsQnkoe1xuICAgICAgZGFzaGJvYXJkSWQsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlRGFzaGJvYXJkSXRlbShcbiAgICBpbnB1dDogQ3JlYXRlRGFzaGJvYXJkSXRlbUlucHV0LFxuICApOiBQcm9taXNlPERhc2hib2FyZEl0ZW0+IHtcbiAgICBjb25zdCBsYXlvdXQgPSBhd2FpdCB0aGlzLmNhbGN1bGF0ZU5ld0xheW91dChpbnB1dC5kYXNoYm9hcmRJZCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZGFzaGJvYXJkSXRlbVJlcG9zaXRvcnkuY3JlYXRlT25lKHtcbiAgICAgIGRhc2hib2FyZElkOiBpbnB1dC5kYXNoYm9hcmRJZCxcbiAgICAgIHR5cGU6IGlucHV0LnR5cGUsXG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgc3FsOiBpbnB1dC5zcWwsXG4gICAgICAgIGNoYXJ0U2NoZW1hOiBpbnB1dC5jaGFydFNjaGVtYSxcbiAgICAgIH0sXG4gICAgICBsYXlvdXQsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBkYXRlRGFzaGJvYXJkSXRlbUxheW91dHMoXG4gICAgbGF5b3V0czogVXBkYXRlRGFzaGJvYXJkSXRlbUxheW91dHMsXG4gICk6IFByb21pc2U8RGFzaGJvYXJkSXRlbVtdPiB7XG4gICAgY29uc3QgdXBkYXRlZEl0ZW1zOiBEYXNoYm9hcmRJdGVtW10gPSBbXTtcbiAgICBjb25zdCBpc1ZhbGlkTGF5b3V0cyA9IGxheW91dHMuZXZlcnkoXG4gICAgICAobGF5b3V0KSA9PlxuICAgICAgICBsYXlvdXQuaXRlbUlkICYmXG4gICAgICAgIGxheW91dC54ID49IDAgJiZcbiAgICAgICAgbGF5b3V0LnkgPj0gMCAmJlxuICAgICAgICBsYXlvdXQudyA+IDAgJiZcbiAgICAgICAgbGF5b3V0LmggPiAwLFxuICAgICk7XG4gICAgaWYgKCFpc1ZhbGlkTGF5b3V0cykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGxheW91dHMgYm91bmRhcmllcy4nKTtcbiAgICB9XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBsYXlvdXRzLm1hcChhc3luYyAobGF5b3V0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtID0gYXdhaXQgdGhpcy5kYXNoYm9hcmRJdGVtUmVwb3NpdG9yeS51cGRhdGVPbmUoXG4gICAgICAgICAgbGF5b3V0Lml0ZW1JZCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYXlvdXQ6IHtcbiAgICAgICAgICAgICAgeDogbGF5b3V0LngsXG4gICAgICAgICAgICAgIHk6IGxheW91dC55LFxuICAgICAgICAgICAgICB3OiBsYXlvdXQudyxcbiAgICAgICAgICAgICAgaDogbGF5b3V0LmgsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgICAgIHVwZGF0ZWRJdGVtcy5wdXNoKHVwZGF0ZWRJdGVtKTtcbiAgICAgIH0pLFxuICAgICk7XG4gICAgcmV0dXJuIHVwZGF0ZWRJdGVtcztcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVEYXNoYm9hcmRJdGVtKGRhc2hib2FyZEl0ZW1JZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgYXdhaXQgdGhpcy5kYXNoYm9hcmRJdGVtUmVwb3NpdG9yeS5kZWxldGVPbmUoZGFzaGJvYXJkSXRlbUlkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FsY3VsYXRlTmV3TGF5b3V0KFxuICAgIGRhc2hib2FyZElkOiBudW1iZXIsXG4gICk6IFByb21pc2U8RGFzaGJvYXJkSXRlbUxheW91dD4ge1xuICAgIGNvbnN0IGRhc2hib2FyZEl0ZW1zID0gYXdhaXQgdGhpcy5kYXNoYm9hcmRJdGVtUmVwb3NpdG9yeS5maW5kQWxsQnkoe1xuICAgICAgZGFzaGJvYXJkSWQsXG4gICAgfSk7XG4gICAgY29uc3QgYWxsTGF5b3V0cyA9IGRhc2hib2FyZEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5sYXlvdXQpO1xuICAgIGlmIChhbGxMYXlvdXRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgeDogMCwgeTogMCwgdzogMywgaDogMiB9O1xuXG4gICAgY29uc3QgY29sdW1uQ291bnQgPSA2O1xuICAgIGNvbnN0IGhhbGZMYXlvdXRYID0gY29sdW1uQ291bnQgLyAyO1xuICAgIC8vIHRoZSBjdXJyZW50IG1heCB5IGlzIHRoZSBjdXJyZW50IHJvd1xuICAgIGNvbnN0IG1heFkgPSBNYXRoLm1heCguLi5hbGxMYXlvdXRzLm1hcCgobGF5b3V0KSA9PiBsYXlvdXQueSkpO1xuXG4gICAgY29uc3QgbGF0ZXN0TGF5b3V0ID0gYWxsTGF5b3V0cy5maWx0ZXIoKGxheW91dCkgPT4gbGF5b3V0LnkgPT09IG1heFkpO1xuICAgIGNvbnN0IGlzTmV4dFJvdyA9XG4gICAgICBsYXRlc3RMYXlvdXQucmVkdWNlKChhY2MsIGxheW91dCkgPT4gYWNjICsgbGF5b3V0LnggKyBsYXlvdXQudywgMCkgPlxuICAgICAgaGFsZkxheW91dFg7XG5cbiAgICBjb25zdCB4ID0gaXNOZXh0Um93ID8gMCA6IGhhbGZMYXlvdXRYO1xuICAgIGNvbnN0IHkgPSBpc05leHRSb3cgPyBtYXhZICsgMiA6IG1heFk7XG4gICAgcmV0dXJuIHsgeCwgeSwgdzogMywgaDogMiB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwibGV2ZWwiLCJEYXNoYm9hcmRTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJwcm9qZWN0U2VydmljZSIsImRhc2hib2FyZEl0ZW1SZXBvc2l0b3J5IiwiZGFzaGJvYXJkUmVwb3NpdG9yeSIsImluaXREYXNoYm9hcmQiLCJwcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJleGlzdGluZ0Rhc2hib2FyZCIsImZpbmRPbmVCeSIsInByb2plY3RJZCIsImlkIiwiY3JlYXRlT25lIiwibmFtZSIsImdldEN1cnJlbnREYXNoYm9hcmQiLCJkYXNoYm9hcmQiLCJFcnJvciIsImdldERhc2hib2FyZEl0ZW0iLCJkYXNoYm9hcmRJdGVtSWQiLCJpdGVtIiwiZ2V0RGFzaGJvYXJkSXRlbXMiLCJkYXNoYm9hcmRJZCIsImZpbmRBbGxCeSIsImNyZWF0ZURhc2hib2FyZEl0ZW0iLCJpbnB1dCIsImxheW91dCIsImNhbGN1bGF0ZU5ld0xheW91dCIsInR5cGUiLCJkZXRhaWwiLCJzcWwiLCJjaGFydFNjaGVtYSIsInVwZGF0ZURhc2hib2FyZEl0ZW1MYXlvdXRzIiwibGF5b3V0cyIsInVwZGF0ZWRJdGVtcyIsImlzVmFsaWRMYXlvdXRzIiwiZXZlcnkiLCJpdGVtSWQiLCJ4IiwieSIsInciLCJoIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInVwZGF0ZWRJdGVtIiwidXBkYXRlT25lIiwicHVzaCIsImRlbGV0ZURhc2hib2FyZEl0ZW0iLCJkZWxldGVPbmUiLCJkYXNoYm9hcmRJdGVtcyIsImFsbExheW91dHMiLCJsZW5ndGgiLCJjb2x1bW5Db3VudCIsImhhbGZMYXlvdXRYIiwibWF4WSIsIk1hdGgiLCJtYXgiLCJsYXRlc3RMYXlvdXQiLCJmaWx0ZXIiLCJpc05leHRSb3ciLCJyZWR1Y2UiLCJhY2MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/dashboardService.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/deployService.ts":
/*!*****************************************************!*\
  !*** ./src/apollo/server/services/deployService.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DeployService: () => (/* binding */ DeployService)\n/* harmony export */ });\n/* harmony import */ var _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var _repositories_deployLogRepository__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../repositories/deployLogRepository */ \"(api)/./src/apollo/server/repositories/deployLogRepository.ts\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_4__]);\n_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.getLogger)(\"DeployService\");\nlogger.level = \"debug\";\nclass DeployService {\n    constructor({ wrenAIAdaptor, deployLogRepository, telemetry }){\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.deployLogRepository = deployLogRepository;\n        this.telemetry = telemetry;\n    }\n    async getLastDeployment(projectId) {\n        const lastDeploy = await this.deployLogRepository.findLastProjectDeployLog(projectId);\n        if (!lastDeploy) {\n            return null;\n        }\n        return lastDeploy;\n    }\n    async getInProgressDeployment(projectId) {\n        return await this.deployLogRepository.findInProgressProjectDeployLog(projectId);\n    }\n    async deploy(manifest, projectId, force = false) {\n        const eventName = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_4__.TelemetryEvent.MODELING_DEPLOY_MDL;\n        try {\n            // generate hash of manifest\n            const hash = this.createMDLHash(manifest, projectId);\n            logger.debug(`Deploying model, hash: ${hash}`);\n            if (!force) {\n                // check if the model current deployment\n                const lastDeploy = await this.deployLogRepository.findLastProjectDeployLog(projectId);\n                if (lastDeploy && lastDeploy.hash === hash) {\n                    logger.log(`Model has been deployed, hash: ${hash}`);\n                    return {\n                        status: _repositories_deployLogRepository__WEBPACK_IMPORTED_MODULE_1__.DeployStatusEnum.SUCCESS\n                    };\n                }\n            }\n            const deployData = {\n                manifest,\n                hash,\n                projectId,\n                status: _repositories_deployLogRepository__WEBPACK_IMPORTED_MODULE_1__.DeployStatusEnum.IN_PROGRESS\n            };\n            const deploy = await this.deployLogRepository.createOne(deployData);\n            // deploy to AI-service\n            const { status: aiStatus, error: aiError } = await this.wrenAIAdaptor.deploy({\n                manifest,\n                hash\n            });\n            // update deploy status\n            const status = aiStatus === _server_models_adaptor__WEBPACK_IMPORTED_MODULE_0__.WrenAIDeployStatusEnum.SUCCESS ? _repositories_deployLogRepository__WEBPACK_IMPORTED_MODULE_1__.DeployStatusEnum.SUCCESS : _repositories_deployLogRepository__WEBPACK_IMPORTED_MODULE_1__.DeployStatusEnum.FAILED;\n            await this.deployLogRepository.updateOne(deploy.id, {\n                status,\n                error: aiError\n            });\n            // telemetry\n            if (status === _repositories_deployLogRepository__WEBPACK_IMPORTED_MODULE_1__.DeployStatusEnum.SUCCESS) {\n                this.telemetry.sendEvent(eventName);\n            } else {\n                this.telemetry.sendEvent(eventName, {\n                    mdl: manifest,\n                    error: aiError\n                }, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_4__.WrenService.AI, false);\n            }\n            return {\n                status,\n                error: aiError\n            };\n        } catch (err) {\n            logger.error(`Error deploying model: ${err.message}`);\n            this.telemetry.sendEvent(eventName, {\n                mdl: manifest,\n                error: err.message\n            }, err.extensions?.service, false);\n            return {\n                status: _repositories_deployLogRepository__WEBPACK_IMPORTED_MODULE_1__.DeployStatusEnum.FAILED,\n                error: err.message\n            };\n        }\n    }\n    createMDLHash(manifest, projectId) {\n        const manifestStr = JSON.stringify(manifest);\n        const content = `${projectId} ${manifestStr}`;\n        const hash = (0,node_crypto__WEBPACK_IMPORTED_MODULE_2__.createHash)(\"sha1\").update(content).digest(\"hex\");\n        return hash;\n    }\n    async getMDLByHash(hash) {\n        const deploy = await this.deployLogRepository.findOneBy({\n            hash\n        });\n        if (!deploy) {\n            return null;\n        }\n        // return base64 encoded manifest\n        return Buffer.from(JSON.stringify(deploy.manifest)).toString(\"base64\");\n    }\n    async deleteAllByProjectId(projectId) {\n        // delete all deploy logs\n        await this.deployLogRepository.deleteAllBy({\n            projectId\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9kZXBsb3lTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBZ0U7QUFNbkI7QUFFSjtBQUNDO0FBS1Y7QUFFaEMsTUFBTU0sU0FBU0gsd0RBQVNBLENBQUM7QUFDekJHLE9BQU9DLEtBQUssR0FBRztBQXdCUixNQUFNQztJQUtYQyxZQUFZLEVBQ1ZDLGFBQWEsRUFDYkMsbUJBQW1CLEVBQ25CQyxTQUFTLEVBS1YsQ0FBRTtRQUNELElBQUksQ0FBQ0YsYUFBYSxHQUFHQTtRQUNyQixJQUFJLENBQUNDLG1CQUFtQixHQUFHQTtRQUMzQixJQUFJLENBQUNDLFNBQVMsR0FBR0E7SUFDbkI7SUFFQSxNQUFhQyxrQkFBa0JDLFNBQVMsRUFBRTtRQUN4QyxNQUFNQyxhQUNKLE1BQU0sSUFBSSxDQUFDSixtQkFBbUIsQ0FBQ0ssd0JBQXdCLENBQUNGO1FBQzFELElBQUksQ0FBQ0MsWUFBWTtZQUNmLE9BQU87UUFDVDtRQUNBLE9BQU9BO0lBQ1Q7SUFFQSxNQUFhRSx3QkFBd0JILFNBQVMsRUFBRTtRQUM5QyxPQUFPLE1BQU0sSUFBSSxDQUFDSCxtQkFBbUIsQ0FBQ08sOEJBQThCLENBQ2xFSjtJQUVKO0lBRUEsTUFBYUssT0FBT0MsUUFBUSxFQUFFTixTQUFTLEVBQUVPLFFBQVEsS0FBSyxFQUFFO1FBQ3RELE1BQU1DLFlBQVlsQixnRUFBY0EsQ0FBQ21CLG1CQUFtQjtRQUNwRCxJQUFJO1lBQ0YsNEJBQTRCO1lBQzVCLE1BQU1DLE9BQU8sSUFBSSxDQUFDQyxhQUFhLENBQUNMLFVBQVVOO1lBQzFDUixPQUFPb0IsS0FBSyxDQUFDLENBQUMsdUJBQXVCLEVBQUVGLEtBQUssQ0FBQztZQUU3QyxJQUFJLENBQUNILE9BQU87Z0JBQ1Ysd0NBQXdDO2dCQUN4QyxNQUFNTixhQUNKLE1BQU0sSUFBSSxDQUFDSixtQkFBbUIsQ0FBQ0ssd0JBQXdCLENBQUNGO2dCQUMxRCxJQUFJQyxjQUFjQSxXQUFXUyxJQUFJLEtBQUtBLE1BQU07b0JBQzFDbEIsT0FBT3FCLEdBQUcsQ0FBQyxDQUFDLCtCQUErQixFQUFFSCxLQUFLLENBQUM7b0JBQ25ELE9BQU87d0JBQUVJLFFBQVEzQiwrRUFBZ0JBLENBQUM0QixPQUFPO29CQUFDO2dCQUM1QztZQUNGO1lBQ0EsTUFBTUMsYUFBYTtnQkFDakJWO2dCQUNBSTtnQkFDQVY7Z0JBQ0FjLFFBQVEzQiwrRUFBZ0JBLENBQUM4QixXQUFXO1lBQ3RDO1lBQ0EsTUFBTVosU0FBUyxNQUFNLElBQUksQ0FBQ1IsbUJBQW1CLENBQUNxQixTQUFTLENBQUNGO1lBRXhELHVCQUF1QjtZQUN2QixNQUFNLEVBQUVGLFFBQVFLLFFBQVEsRUFBRUMsT0FBT0MsT0FBTyxFQUFFLEdBQ3hDLE1BQU0sSUFBSSxDQUFDekIsYUFBYSxDQUFDUyxNQUFNLENBQUM7Z0JBQzlCQztnQkFDQUk7WUFDRjtZQUVGLHVCQUF1QjtZQUN2QixNQUFNSSxTQUNKSyxhQUFhakMsMEVBQXNCQSxDQUFDNkIsT0FBTyxHQUN2QzVCLCtFQUFnQkEsQ0FBQzRCLE9BQU8sR0FDeEI1QiwrRUFBZ0JBLENBQUNtQyxNQUFNO1lBQzdCLE1BQU0sSUFBSSxDQUFDekIsbUJBQW1CLENBQUMwQixTQUFTLENBQUNsQixPQUFPbUIsRUFBRSxFQUFFO2dCQUNsRFY7Z0JBQ0FNLE9BQU9DO1lBQ1Q7WUFFQSxZQUFZO1lBQ1osSUFBSVAsV0FBVzNCLCtFQUFnQkEsQ0FBQzRCLE9BQU8sRUFBRTtnQkFDdkMsSUFBSSxDQUFDakIsU0FBUyxDQUFDMkIsU0FBUyxDQUFDakI7WUFDM0IsT0FBTztnQkFDTCxJQUFJLENBQUNWLFNBQVMsQ0FBQzJCLFNBQVMsQ0FDdEJqQixXQUNBO29CQUFFa0IsS0FBS3BCO29CQUFVYyxPQUFPQztnQkFBUSxHQUNoQzlCLDZEQUFXQSxDQUFDb0MsRUFBRSxFQUNkO1lBRUo7WUFDQSxPQUFPO2dCQUFFYjtnQkFBUU0sT0FBT0M7WUFBUTtRQUNsQyxFQUFFLE9BQU9PLEtBQVU7WUFDakJwQyxPQUFPNEIsS0FBSyxDQUFDLENBQUMsdUJBQXVCLEVBQUVRLElBQUlDLE9BQU8sQ0FBQyxDQUFDO1lBQ3BELElBQUksQ0FBQy9CLFNBQVMsQ0FBQzJCLFNBQVMsQ0FDdEJqQixXQUNBO2dCQUFFa0IsS0FBS3BCO2dCQUFVYyxPQUFPUSxJQUFJQyxPQUFPO1lBQUMsR0FDcENELElBQUlFLFVBQVUsRUFBRUMsU0FDaEI7WUFFRixPQUFPO2dCQUFFakIsUUFBUTNCLCtFQUFnQkEsQ0FBQ21DLE1BQU07Z0JBQUVGLE9BQU9RLElBQUlDLE9BQU87WUFBQztRQUMvRDtJQUNGO0lBRU9sQixjQUFjTCxRQUFrQixFQUFFTixTQUFpQixFQUFFO1FBQzFELE1BQU1nQyxjQUFjQyxLQUFLQyxTQUFTLENBQUM1QjtRQUNuQyxNQUFNNkIsVUFBVSxDQUFDLEVBQUVuQyxVQUFVLENBQUMsRUFBRWdDLFlBQVksQ0FBQztRQUM3QyxNQUFNdEIsT0FBT3RCLHVEQUFVQSxDQUFDLFFBQVFnRCxNQUFNLENBQUNELFNBQVNFLE1BQU0sQ0FBQztRQUN2RCxPQUFPM0I7SUFDVDtJQUVBLE1BQWE0QixhQUFhNUIsSUFBWSxFQUFFO1FBQ3RDLE1BQU1MLFNBQVMsTUFBTSxJQUFJLENBQUNSLG1CQUFtQixDQUFDMEMsU0FBUyxDQUFDO1lBQUU3QjtRQUFLO1FBQy9ELElBQUksQ0FBQ0wsUUFBUTtZQUNYLE9BQU87UUFDVDtRQUNBLGlDQUFpQztRQUNqQyxPQUFPbUMsT0FBT0MsSUFBSSxDQUFDUixLQUFLQyxTQUFTLENBQUM3QixPQUFPQyxRQUFRLEdBQUdvQyxRQUFRLENBQUM7SUFDL0Q7SUFFQSxNQUFhQyxxQkFBcUIzQyxTQUFpQixFQUFpQjtRQUNsRSx5QkFBeUI7UUFDekIsTUFBTSxJQUFJLENBQUNILG1CQUFtQixDQUFDK0MsV0FBVyxDQUFDO1lBQUU1QztRQUFVO0lBQ3pEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvc2VydmljZXMvZGVwbG95U2VydmljZS50cz9hNDI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFdyZW5BSURlcGxveVN0YXR1c0VudW0gfSBmcm9tICdAc2VydmVyL21vZGVscy9hZGFwdG9yJztcbmltcG9ydCB7IElXcmVuQUlBZGFwdG9yIH0gZnJvbSAnLi4vYWRhcHRvcnMvd3JlbkFJQWRhcHRvcic7XG5pbXBvcnQge1xuICBEZXBsb3ksXG4gIERlcGxveVN0YXR1c0VudW0sXG4gIElEZXBsb3lMb2dSZXBvc2l0b3J5LFxufSBmcm9tICcuLi9yZXBvc2l0b3JpZXMvZGVwbG95TG9nUmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBNYW5pZmVzdCB9IGZyb20gJy4uL21kbC90eXBlJztcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdub2RlOmNyeXB0byc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2VydmVyL3V0aWxzJztcbmltcG9ydCB7XG4gIFBvc3RIb2dUZWxlbWV0cnksXG4gIFRlbGVtZXRyeUV2ZW50LFxuICBXcmVuU2VydmljZSxcbn0gZnJvbSAnLi4vdGVsZW1ldHJ5L3RlbGVtZXRyeSc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignRGVwbG95U2VydmljZScpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuZXhwb3J0IGludGVyZmFjZSBEZXBsb3lSZXNwb25zZSB7XG4gIHN0YXR1czogRGVwbG95U3RhdHVzRW51bTtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTURMU3luY1Jlc3BvbnNlIHtcbiAgaXNTeW5jcm9uaXplZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGVwbG95U2VydmljZSB7XG4gIGRlcGxveShcbiAgICBtYW5pZmVzdDogTWFuaWZlc3QsXG4gICAgcHJvamVjdElkOiBudW1iZXIsXG4gICAgZm9yY2U/OiBib29sZWFuLFxuICApOiBQcm9taXNlPERlcGxveVJlc3BvbnNlPjtcbiAgZ2V0TGFzdERlcGxveW1lbnQocHJvamVjdElkOiBudW1iZXIpOiBQcm9taXNlPERlcGxveT47XG4gIGdldEluUHJvZ3Jlc3NEZXBsb3ltZW50KHByb2plY3RJZDogbnVtYmVyKTogUHJvbWlzZTxEZXBsb3k+O1xuICBjcmVhdGVNRExIYXNoKG1hbmlmZXN0OiBNYW5pZmVzdCwgcHJvamVjdElkOiBudW1iZXIpOiBzdHJpbmc7XG4gIGdldE1ETEJ5SGFzaChoYXNoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz47XG4gIGRlbGV0ZUFsbEJ5UHJvamVjdElkKHByb2plY3RJZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGNsYXNzIERlcGxveVNlcnZpY2UgaW1wbGVtZW50cyBJRGVwbG95U2VydmljZSB7XG4gIHByaXZhdGUgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gIHByaXZhdGUgZGVwbG95TG9nUmVwb3NpdG9yeTogSURlcGxveUxvZ1JlcG9zaXRvcnk7XG4gIHByaXZhdGUgdGVsZW1ldHJ5OiBQb3N0SG9nVGVsZW1ldHJ5O1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICB3cmVuQUlBZGFwdG9yLFxuICAgIGRlcGxveUxvZ1JlcG9zaXRvcnksXG4gICAgdGVsZW1ldHJ5LFxuICB9OiB7XG4gICAgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gICAgZGVwbG95TG9nUmVwb3NpdG9yeTogSURlcGxveUxvZ1JlcG9zaXRvcnk7XG4gICAgdGVsZW1ldHJ5OiBQb3N0SG9nVGVsZW1ldHJ5O1xuICB9KSB7XG4gICAgdGhpcy53cmVuQUlBZGFwdG9yID0gd3JlbkFJQWRhcHRvcjtcbiAgICB0aGlzLmRlcGxveUxvZ1JlcG9zaXRvcnkgPSBkZXBsb3lMb2dSZXBvc2l0b3J5O1xuICAgIHRoaXMudGVsZW1ldHJ5ID0gdGVsZW1ldHJ5O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldExhc3REZXBsb3ltZW50KHByb2plY3RJZCkge1xuICAgIGNvbnN0IGxhc3REZXBsb3kgPVxuICAgICAgYXdhaXQgdGhpcy5kZXBsb3lMb2dSZXBvc2l0b3J5LmZpbmRMYXN0UHJvamVjdERlcGxveUxvZyhwcm9qZWN0SWQpO1xuICAgIGlmICghbGFzdERlcGxveSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBsYXN0RGVwbG95O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldEluUHJvZ3Jlc3NEZXBsb3ltZW50KHByb2plY3RJZCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmRlcGxveUxvZ1JlcG9zaXRvcnkuZmluZEluUHJvZ3Jlc3NQcm9qZWN0RGVwbG95TG9nKFxuICAgICAgcHJvamVjdElkLFxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVwbG95KG1hbmlmZXN0LCBwcm9qZWN0SWQsIGZvcmNlID0gZmFsc2UpIHtcbiAgICBjb25zdCBldmVudE5hbWUgPSBUZWxlbWV0cnlFdmVudC5NT0RFTElOR19ERVBMT1lfTURMO1xuICAgIHRyeSB7XG4gICAgICAvLyBnZW5lcmF0ZSBoYXNoIG9mIG1hbmlmZXN0XG4gICAgICBjb25zdCBoYXNoID0gdGhpcy5jcmVhdGVNRExIYXNoKG1hbmlmZXN0LCBwcm9qZWN0SWQpO1xuICAgICAgbG9nZ2VyLmRlYnVnKGBEZXBsb3lpbmcgbW9kZWwsIGhhc2g6ICR7aGFzaH1gKTtcblxuICAgICAgaWYgKCFmb3JjZSkge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgbW9kZWwgY3VycmVudCBkZXBsb3ltZW50XG4gICAgICAgIGNvbnN0IGxhc3REZXBsb3kgPVxuICAgICAgICAgIGF3YWl0IHRoaXMuZGVwbG95TG9nUmVwb3NpdG9yeS5maW5kTGFzdFByb2plY3REZXBsb3lMb2cocHJvamVjdElkKTtcbiAgICAgICAgaWYgKGxhc3REZXBsb3kgJiYgbGFzdERlcGxveS5oYXNoID09PSBoYXNoKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgTW9kZWwgaGFzIGJlZW4gZGVwbG95ZWQsIGhhc2g6ICR7aGFzaH1gKTtcbiAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IERlcGxveVN0YXR1c0VudW0uU1VDQ0VTUyB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBkZXBsb3lEYXRhID0ge1xuICAgICAgICBtYW5pZmVzdCxcbiAgICAgICAgaGFzaCxcbiAgICAgICAgcHJvamVjdElkLFxuICAgICAgICBzdGF0dXM6IERlcGxveVN0YXR1c0VudW0uSU5fUFJPR1JFU1MsXG4gICAgICB9IGFzIERlcGxveTtcbiAgICAgIGNvbnN0IGRlcGxveSA9IGF3YWl0IHRoaXMuZGVwbG95TG9nUmVwb3NpdG9yeS5jcmVhdGVPbmUoZGVwbG95RGF0YSk7XG5cbiAgICAgIC8vIGRlcGxveSB0byBBSS1zZXJ2aWNlXG4gICAgICBjb25zdCB7IHN0YXR1czogYWlTdGF0dXMsIGVycm9yOiBhaUVycm9yIH0gPVxuICAgICAgICBhd2FpdCB0aGlzLndyZW5BSUFkYXB0b3IuZGVwbG95KHtcbiAgICAgICAgICBtYW5pZmVzdCxcbiAgICAgICAgICBoYXNoLFxuICAgICAgICB9KTtcblxuICAgICAgLy8gdXBkYXRlIGRlcGxveSBzdGF0dXNcbiAgICAgIGNvbnN0IHN0YXR1cyA9XG4gICAgICAgIGFpU3RhdHVzID09PSBXcmVuQUlEZXBsb3lTdGF0dXNFbnVtLlNVQ0NFU1NcbiAgICAgICAgICA/IERlcGxveVN0YXR1c0VudW0uU1VDQ0VTU1xuICAgICAgICAgIDogRGVwbG95U3RhdHVzRW51bS5GQUlMRUQ7XG4gICAgICBhd2FpdCB0aGlzLmRlcGxveUxvZ1JlcG9zaXRvcnkudXBkYXRlT25lKGRlcGxveS5pZCwge1xuICAgICAgICBzdGF0dXMsXG4gICAgICAgIGVycm9yOiBhaUVycm9yLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIHRlbGVtZXRyeVxuICAgICAgaWYgKHN0YXR1cyA9PT0gRGVwbG95U3RhdHVzRW51bS5TVUNDRVNTKSB7XG4gICAgICAgIHRoaXMudGVsZW1ldHJ5LnNlbmRFdmVudChldmVudE5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgICB7IG1kbDogbWFuaWZlc3QsIGVycm9yOiBhaUVycm9yIH0sXG4gICAgICAgICAgV3JlblNlcnZpY2UuQUksXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4geyBzdGF0dXMsIGVycm9yOiBhaUVycm9yIH07XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgZGVwbG95aW5nIG1vZGVsOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIHsgbWRsOiBtYW5pZmVzdCwgZXJyb3I6IGVyci5tZXNzYWdlIH0sXG4gICAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IERlcGxveVN0YXR1c0VudW0uRkFJTEVELCBlcnJvcjogZXJyLm1lc3NhZ2UgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlTURMSGFzaChtYW5pZmVzdDogTWFuaWZlc3QsIHByb2plY3RJZDogbnVtYmVyKSB7XG4gICAgY29uc3QgbWFuaWZlc3RTdHIgPSBKU09OLnN0cmluZ2lmeShtYW5pZmVzdCk7XG4gICAgY29uc3QgY29udGVudCA9IGAke3Byb2plY3RJZH0gJHttYW5pZmVzdFN0cn1gO1xuICAgIGNvbnN0IGhhc2ggPSBjcmVhdGVIYXNoKCdzaGExJykudXBkYXRlKGNvbnRlbnQpLmRpZ2VzdCgnaGV4Jyk7XG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0TURMQnlIYXNoKGhhc2g6IHN0cmluZykge1xuICAgIGNvbnN0IGRlcGxveSA9IGF3YWl0IHRoaXMuZGVwbG95TG9nUmVwb3NpdG9yeS5maW5kT25lQnkoeyBoYXNoIH0pO1xuICAgIGlmICghZGVwbG95KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gcmV0dXJuIGJhc2U2NCBlbmNvZGVkIG1hbmlmZXN0XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KGRlcGxveS5tYW5pZmVzdCkpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVBbGxCeVByb2plY3RJZChwcm9qZWN0SWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIGRlbGV0ZSBhbGwgZGVwbG95IGxvZ3NcbiAgICBhd2FpdCB0aGlzLmRlcGxveUxvZ1JlcG9zaXRvcnkuZGVsZXRlQWxsQnkoeyBwcm9qZWN0SWQgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJXcmVuQUlEZXBsb3lTdGF0dXNFbnVtIiwiRGVwbG95U3RhdHVzRW51bSIsImNyZWF0ZUhhc2giLCJnZXRMb2dnZXIiLCJUZWxlbWV0cnlFdmVudCIsIldyZW5TZXJ2aWNlIiwibG9nZ2VyIiwibGV2ZWwiLCJEZXBsb3lTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJ3cmVuQUlBZGFwdG9yIiwiZGVwbG95TG9nUmVwb3NpdG9yeSIsInRlbGVtZXRyeSIsImdldExhc3REZXBsb3ltZW50IiwicHJvamVjdElkIiwibGFzdERlcGxveSIsImZpbmRMYXN0UHJvamVjdERlcGxveUxvZyIsImdldEluUHJvZ3Jlc3NEZXBsb3ltZW50IiwiZmluZEluUHJvZ3Jlc3NQcm9qZWN0RGVwbG95TG9nIiwiZGVwbG95IiwibWFuaWZlc3QiLCJmb3JjZSIsImV2ZW50TmFtZSIsIk1PREVMSU5HX0RFUExPWV9NREwiLCJoYXNoIiwiY3JlYXRlTURMSGFzaCIsImRlYnVnIiwibG9nIiwic3RhdHVzIiwiU1VDQ0VTUyIsImRlcGxveURhdGEiLCJJTl9QUk9HUkVTUyIsImNyZWF0ZU9uZSIsImFpU3RhdHVzIiwiZXJyb3IiLCJhaUVycm9yIiwiRkFJTEVEIiwidXBkYXRlT25lIiwiaWQiLCJzZW5kRXZlbnQiLCJtZGwiLCJBSSIsImVyciIsIm1lc3NhZ2UiLCJleHRlbnNpb25zIiwic2VydmljZSIsIm1hbmlmZXN0U3RyIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnRlbnQiLCJ1cGRhdGUiLCJkaWdlc3QiLCJnZXRNRExCeUhhc2giLCJmaW5kT25lQnkiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJkZWxldGVBbGxCeVByb2plY3RJZCIsImRlbGV0ZUFsbEJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/deployService.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/index.ts":
/*!*********************************************!*\
  !*** ./src/apollo/server/services/index.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _askingService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./askingService */ \"(api)/./src/apollo/server/services/askingService.ts\");\n/* harmony import */ var _deployService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./deployService */ \"(api)/./src/apollo/server/services/deployService.ts\");\n/* harmony import */ var _mdlService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mdlService */ \"(api)/./src/apollo/server/services/mdlService.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _mdlService__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _mdlService__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _modelService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modelService */ \"(api)/./src/apollo/server/services/modelService.ts\");\n/* harmony import */ var _projectService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./projectService */ \"(api)/./src/apollo/server/services/projectService.ts\");\n/* harmony import */ var _queryService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queryService */ \"(api)/./src/apollo/server/services/queryService.ts\");\n/* harmony import */ var _metadataService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./metadataService */ \"(api)/./src/apollo/server/services/metadataService.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _metadataService__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _metadataService__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _dashboardService__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./dashboardService */ \"(api)/./src/apollo/server/services/dashboardService.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _dashboardService__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _dashboardService__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_askingService__WEBPACK_IMPORTED_MODULE_0__, _deployService__WEBPACK_IMPORTED_MODULE_1__, _modelService__WEBPACK_IMPORTED_MODULE_3__, _projectService__WEBPACK_IMPORTED_MODULE_4__, _queryService__WEBPACK_IMPORTED_MODULE_5__]);\n([_askingService__WEBPACK_IMPORTED_MODULE_0__, _deployService__WEBPACK_IMPORTED_MODULE_1__, _modelService__WEBPACK_IMPORTED_MODULE_3__, _projectService__WEBPACK_IMPORTED_MODULE_4__, _queryService__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _askingService__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _askingService__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _deployService__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _deployService__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _modelService__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _modelService__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _projectService__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _projectService__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _queryService__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _queryService__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0M7QUFDQTtBQUNIO0FBQ0U7QUFDRTtBQUNGO0FBQ0c7QUFDQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9pbmRleC50cz8wMGRmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vYXNraW5nU2VydmljZSc7XG5leHBvcnQgKiBmcm9tICcuL2RlcGxveVNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9tZGxTZXJ2aWNlJztcbmV4cG9ydCAqIGZyb20gJy4vbW9kZWxTZXJ2aWNlJztcbmV4cG9ydCAqIGZyb20gJy4vcHJvamVjdFNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9xdWVyeVNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9tZXRhZGF0YVNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9kYXNoYm9hcmRTZXJ2aWNlJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/mdlService.ts":
/*!**************************************************!*\
  !*** ./src/apollo/server/services/mdlService.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MDLService: () => (/* binding */ MDLService)\n/* harmony export */ });\n/* harmony import */ var _mdl_mdlBuilder__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mdl/mdlBuilder */ \"(api)/./src/apollo/server/mdl/mdlBuilder.ts\");\n\nclass MDLService {\n    constructor({ projectRepository, modelRepository, modelColumnRepository, modelNestedColumnRepository, relationRepository, viewRepository }){\n        this.projectRepository = projectRepository;\n        this.modelRepository = modelRepository;\n        this.modelColumnRepository = modelColumnRepository;\n        this.modelNestedColumnRepository = modelNestedColumnRepository;\n        this.relationRepository = relationRepository;\n        this.viewRepository = viewRepository;\n    }\n    async makeCurrentModelMDL() {\n        const project = await this.projectRepository.getCurrentProject();\n        const projectId = project.id;\n        const models = await this.modelRepository.findAllBy({\n            projectId\n        });\n        const modelIds = models.map((m)=>m.id);\n        const columns = await this.modelColumnRepository.findColumnsByModelIds(modelIds);\n        const modelNestedColumns = await this.modelNestedColumnRepository.findNestedColumnsByModelIds(modelIds);\n        const relations = await this.relationRepository.findRelationInfoBy({\n            projectId\n        });\n        const views = await this.viewRepository.findAllBy({\n            projectId\n        });\n        const relatedModels = models;\n        const relatedColumns = columns;\n        const relatedRelations = relations;\n        const mdlBuilder = new _mdl_mdlBuilder__WEBPACK_IMPORTED_MODULE_0__.MDLBuilder({\n            project,\n            models,\n            columns,\n            nestedColumns: modelNestedColumns,\n            relations,\n            views,\n            relatedModels,\n            relatedColumns,\n            relatedRelations\n        });\n        return {\n            manifest: mdlBuilder.build(),\n            mdlBuilder\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9tZGxTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStDO0FBbUJ4QyxNQUFNQztJQVFYQyxZQUFZLEVBQ1ZDLGlCQUFpQixFQUNqQkMsZUFBZSxFQUNmQyxxQkFBcUIsRUFDckJDLDJCQUEyQixFQUMzQkMsa0JBQWtCLEVBQ2xCQyxjQUFjLEVBUWYsQ0FBRTtRQUNELElBQUksQ0FBQ0wsaUJBQWlCLEdBQUdBO1FBQ3pCLElBQUksQ0FBQ0MsZUFBZSxHQUFHQTtRQUN2QixJQUFJLENBQUNDLHFCQUFxQixHQUFHQTtRQUM3QixJQUFJLENBQUNDLDJCQUEyQixHQUFHQTtRQUNuQyxJQUFJLENBQUNDLGtCQUFrQixHQUFHQTtRQUMxQixJQUFJLENBQUNDLGNBQWMsR0FBR0E7SUFDeEI7SUFFQSxNQUFhQyxzQkFBc0I7UUFDakMsTUFBTUMsVUFBVSxNQUFNLElBQUksQ0FBQ1AsaUJBQWlCLENBQUNRLGlCQUFpQjtRQUM5RCxNQUFNQyxZQUFZRixRQUFRRyxFQUFFO1FBQzVCLE1BQU1DLFNBQVMsTUFBTSxJQUFJLENBQUNWLGVBQWUsQ0FBQ1csU0FBUyxDQUFDO1lBQUVIO1FBQVU7UUFDaEUsTUFBTUksV0FBV0YsT0FBT0csR0FBRyxDQUFDLENBQUNDLElBQU1BLEVBQUVMLEVBQUU7UUFDdkMsTUFBTU0sVUFDSixNQUFNLElBQUksQ0FBQ2QscUJBQXFCLENBQUNlLHFCQUFxQixDQUFDSjtRQUN6RCxNQUFNSyxxQkFDSixNQUFNLElBQUksQ0FBQ2YsMkJBQTJCLENBQUNnQiwyQkFBMkIsQ0FDaEVOO1FBRUosTUFBTU8sWUFBWSxNQUFNLElBQUksQ0FBQ2hCLGtCQUFrQixDQUFDaUIsa0JBQWtCLENBQUM7WUFDakVaO1FBQ0Y7UUFDQSxNQUFNYSxRQUFRLE1BQU0sSUFBSSxDQUFDakIsY0FBYyxDQUFDTyxTQUFTLENBQUM7WUFBRUg7UUFBVTtRQUM5RCxNQUFNYyxnQkFBZ0JaO1FBQ3RCLE1BQU1hLGlCQUFpQlI7UUFDdkIsTUFBTVMsbUJBQW1CTDtRQUN6QixNQUFNTSxhQUFhLElBQUk3Qix1REFBVUEsQ0FBQztZQUNoQ1U7WUFDQUk7WUFDQUs7WUFDQVcsZUFBZVQ7WUFDZkU7WUFDQUU7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtRQUNBLE9BQU87WUFBRUcsVUFBVUYsV0FBV0csS0FBSztZQUFJSDtRQUFXO0lBQ3BEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvc2VydmljZXMvbWRsU2VydmljZS50cz9lNjk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1ETEJ1aWxkZXIgfSBmcm9tICcuLi9tZGwvbWRsQnVpbGRlcic7XG5pbXBvcnQge1xuICBJTW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5LFxuICBJTW9kZWxDb2x1bW5SZXBvc2l0b3J5LFxuICBJTW9kZWxSZXBvc2l0b3J5LFxuICBJUHJvamVjdFJlcG9zaXRvcnksXG4gIElSZWxhdGlvblJlcG9zaXRvcnksXG4gIElWaWV3UmVwb3NpdG9yeSxcbn0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzJztcbmltcG9ydCB7IE1hbmlmZXN0IH0gZnJvbSAnLi4vbWRsL3R5cGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1ha2VDdXJyZW50TW9kZWxNRExSZXN1bHQge1xuICBtYW5pZmVzdDogTWFuaWZlc3Q7XG4gIG1kbEJ1aWxkZXI6IE1ETEJ1aWxkZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIElNRExTZXJ2aWNlIHtcbiAgbWFrZUN1cnJlbnRNb2RlbE1ETCgpOiBQcm9taXNlPE1ha2VDdXJyZW50TW9kZWxNRExSZXN1bHQ+O1xufVxuXG5leHBvcnQgY2xhc3MgTURMU2VydmljZSBpbXBsZW1lbnRzIElNRExTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBwcm9qZWN0UmVwb3NpdG9yeTogSVByb2plY3RSZXBvc2l0b3J5O1xuICBwcml2YXRlIG1vZGVsUmVwb3NpdG9yeTogSU1vZGVsUmVwb3NpdG9yeTtcbiAgcHJpdmF0ZSBtb2RlbENvbHVtblJlcG9zaXRvcnk6IElNb2RlbENvbHVtblJlcG9zaXRvcnk7XG4gIHByaXZhdGUgbW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5OiBJTW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5O1xuICBwcml2YXRlIHJlbGF0aW9uUmVwb3NpdG9yeTogSVJlbGF0aW9uUmVwb3NpdG9yeTtcbiAgcHJpdmF0ZSB2aWV3UmVwb3NpdG9yeTogSVZpZXdSZXBvc2l0b3J5O1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBwcm9qZWN0UmVwb3NpdG9yeSxcbiAgICBtb2RlbFJlcG9zaXRvcnksXG4gICAgbW9kZWxDb2x1bW5SZXBvc2l0b3J5LFxuICAgIG1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeSxcbiAgICByZWxhdGlvblJlcG9zaXRvcnksXG4gICAgdmlld1JlcG9zaXRvcnksXG4gIH06IHtcbiAgICBwcm9qZWN0UmVwb3NpdG9yeTogSVByb2plY3RSZXBvc2l0b3J5O1xuICAgIG1vZGVsUmVwb3NpdG9yeTogSU1vZGVsUmVwb3NpdG9yeTtcbiAgICBtb2RlbENvbHVtblJlcG9zaXRvcnk6IElNb2RlbENvbHVtblJlcG9zaXRvcnk7XG4gICAgbW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5OiBJTW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5O1xuICAgIHJlbGF0aW9uUmVwb3NpdG9yeTogSVJlbGF0aW9uUmVwb3NpdG9yeTtcbiAgICB2aWV3UmVwb3NpdG9yeTogSVZpZXdSZXBvc2l0b3J5O1xuICB9KSB7XG4gICAgdGhpcy5wcm9qZWN0UmVwb3NpdG9yeSA9IHByb2plY3RSZXBvc2l0b3J5O1xuICAgIHRoaXMubW9kZWxSZXBvc2l0b3J5ID0gbW9kZWxSZXBvc2l0b3J5O1xuICAgIHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5ID0gbW9kZWxDb2x1bW5SZXBvc2l0b3J5O1xuICAgIHRoaXMubW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5ID0gbW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5O1xuICAgIHRoaXMucmVsYXRpb25SZXBvc2l0b3J5ID0gcmVsYXRpb25SZXBvc2l0b3J5O1xuICAgIHRoaXMudmlld1JlcG9zaXRvcnkgPSB2aWV3UmVwb3NpdG9yeTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBtYWtlQ3VycmVudE1vZGVsTURMKCkge1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCB0aGlzLnByb2plY3RSZXBvc2l0b3J5LmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgcHJvamVjdElkID0gcHJvamVjdC5pZDtcbiAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLm1vZGVsUmVwb3NpdG9yeS5maW5kQWxsQnkoeyBwcm9qZWN0SWQgfSk7XG4gICAgY29uc3QgbW9kZWxJZHMgPSBtb2RlbHMubWFwKChtKSA9PiBtLmlkKTtcbiAgICBjb25zdCBjb2x1bW5zID1cbiAgICAgIGF3YWl0IHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmZpbmRDb2x1bW5zQnlNb2RlbElkcyhtb2RlbElkcyk7XG4gICAgY29uc3QgbW9kZWxOZXN0ZWRDb2x1bW5zID1cbiAgICAgIGF3YWl0IHRoaXMubW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5LmZpbmROZXN0ZWRDb2x1bW5zQnlNb2RlbElkcyhcbiAgICAgICAgbW9kZWxJZHMsXG4gICAgICApO1xuICAgIGNvbnN0IHJlbGF0aW9ucyA9IGF3YWl0IHRoaXMucmVsYXRpb25SZXBvc2l0b3J5LmZpbmRSZWxhdGlvbkluZm9CeSh7XG4gICAgICBwcm9qZWN0SWQsXG4gICAgfSk7XG4gICAgY29uc3Qgdmlld3MgPSBhd2FpdCB0aGlzLnZpZXdSZXBvc2l0b3J5LmZpbmRBbGxCeSh7IHByb2plY3RJZCB9KTtcbiAgICBjb25zdCByZWxhdGVkTW9kZWxzID0gbW9kZWxzO1xuICAgIGNvbnN0IHJlbGF0ZWRDb2x1bW5zID0gY29sdW1ucztcbiAgICBjb25zdCByZWxhdGVkUmVsYXRpb25zID0gcmVsYXRpb25zO1xuICAgIGNvbnN0IG1kbEJ1aWxkZXIgPSBuZXcgTURMQnVpbGRlcih7XG4gICAgICBwcm9qZWN0LFxuICAgICAgbW9kZWxzLFxuICAgICAgY29sdW1ucyxcbiAgICAgIG5lc3RlZENvbHVtbnM6IG1vZGVsTmVzdGVkQ29sdW1ucyxcbiAgICAgIHJlbGF0aW9ucyxcbiAgICAgIHZpZXdzLFxuICAgICAgcmVsYXRlZE1vZGVscyxcbiAgICAgIHJlbGF0ZWRDb2x1bW5zLFxuICAgICAgcmVsYXRlZFJlbGF0aW9ucyxcbiAgICB9KTtcbiAgICByZXR1cm4geyBtYW5pZmVzdDogbWRsQnVpbGRlci5idWlsZCgpLCBtZGxCdWlsZGVyIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJNRExCdWlsZGVyIiwiTURMU2VydmljZSIsImNvbnN0cnVjdG9yIiwicHJvamVjdFJlcG9zaXRvcnkiLCJtb2RlbFJlcG9zaXRvcnkiLCJtb2RlbENvbHVtblJlcG9zaXRvcnkiLCJtb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnkiLCJyZWxhdGlvblJlcG9zaXRvcnkiLCJ2aWV3UmVwb3NpdG9yeSIsIm1ha2VDdXJyZW50TW9kZWxNREwiLCJwcm9qZWN0IiwiZ2V0Q3VycmVudFByb2plY3QiLCJwcm9qZWN0SWQiLCJpZCIsIm1vZGVscyIsImZpbmRBbGxCeSIsIm1vZGVsSWRzIiwibWFwIiwibSIsImNvbHVtbnMiLCJmaW5kQ29sdW1uc0J5TW9kZWxJZHMiLCJtb2RlbE5lc3RlZENvbHVtbnMiLCJmaW5kTmVzdGVkQ29sdW1uc0J5TW9kZWxJZHMiLCJyZWxhdGlvbnMiLCJmaW5kUmVsYXRpb25JbmZvQnkiLCJ2aWV3cyIsInJlbGF0ZWRNb2RlbHMiLCJyZWxhdGVkQ29sdW1ucyIsInJlbGF0ZWRSZWxhdGlvbnMiLCJtZGxCdWlsZGVyIiwibmVzdGVkQ29sdW1ucyIsIm1hbmlmZXN0IiwiYnVpbGQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/mdlService.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/metadataService.ts":
/*!*******************************************************!*\
  !*** ./src/apollo/server/services/metadataService.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConstraintType: () => (/* binding */ ConstraintType),\n/* harmony export */   DataSourceMetadataService: () => (/* binding */ DataSourceMetadataService)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types */ \"(api)/./src/apollo/server/types/index.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/** \n    This class is responsible for handling the retrieval of metadata from the data source.\n    For DuckDB, we control the access logic and directly query the WrenEngine.\n    For PostgreSQL and BigQuery, we will use the Ibis server API.\n */ \n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_1__.getLogger)(\"MetadataService\");\nlogger.level = \"debug\";\nvar ConstraintType;\n(function(ConstraintType) {\n    ConstraintType[\"PRIMARY_KEY\"] = \"PRIMARY KEY\";\n    ConstraintType[\"FOREIGN_KEY\"] = \"FOREIGN KEY\";\n    ConstraintType[\"UNIQUE\"] = \"UNIQUE\";\n})(ConstraintType || (ConstraintType = {}));\nclass DataSourceMetadataService {\n    constructor({ ibisAdaptor, wrenEngineAdaptor }){\n        this.ibisAdaptor = ibisAdaptor;\n        this.wrenEngineAdaptor = wrenEngineAdaptor;\n    }\n    async listTables(project) {\n        const { type: dataSource, connectionInfo } = project;\n        if (dataSource === _types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.DUCKDB) {\n            const tables = await this.wrenEngineAdaptor.listTables();\n            return tables;\n        }\n        return await this.ibisAdaptor.getTables(dataSource, connectionInfo);\n    }\n    async listConstraints(project) {\n        const { type: dataSource, connectionInfo } = project;\n        if (dataSource === _types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.DUCKDB) {\n            return [];\n        }\n        return await this.ibisAdaptor.getConstraints(dataSource, connectionInfo);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9tZXRhZGF0YVNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0NBSUMsR0FLeUM7QUFDQTtBQUUxQyxNQUFNRSxTQUFTRCx3REFBU0EsQ0FBQztBQUN6QkMsT0FBT0MsS0FBSyxHQUFHOztVQVdIQzs7OztHQUFBQSxtQkFBQUE7QUE0QkwsTUFBTUM7SUFJWEMsWUFBWSxFQUNWQyxXQUFXLEVBQ1hDLGlCQUFpQixFQUlsQixDQUFFO1FBQ0QsSUFBSSxDQUFDRCxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUdBO0lBQzNCO0lBRUEsTUFBYUMsV0FBV0MsT0FBTyxFQUEyQjtRQUN4RCxNQUFNLEVBQUVDLE1BQU1DLFVBQVUsRUFBRUMsY0FBYyxFQUFFLEdBQUdIO1FBQzdDLElBQUlFLGVBQWVaLGtEQUFjQSxDQUFDYyxNQUFNLEVBQUU7WUFDeEMsTUFBTUMsU0FBUyxNQUFNLElBQUksQ0FBQ1AsaUJBQWlCLENBQUNDLFVBQVU7WUFDdEQsT0FBT007UUFDVDtRQUNBLE9BQU8sTUFBTSxJQUFJLENBQUNSLFdBQVcsQ0FBQ1MsU0FBUyxDQUFDSixZQUFZQztJQUN0RDtJQUVBLE1BQWFJLGdCQUNYUCxPQUFnQixFQUNnQjtRQUNoQyxNQUFNLEVBQUVDLE1BQU1DLFVBQVUsRUFBRUMsY0FBYyxFQUFFLEdBQUdIO1FBQzdDLElBQUlFLGVBQWVaLGtEQUFjQSxDQUFDYyxNQUFNLEVBQUU7WUFDeEMsT0FBTyxFQUFFO1FBQ1g7UUFDQSxPQUFPLE1BQU0sSUFBSSxDQUFDUCxXQUFXLENBQUNXLGNBQWMsQ0FBQ04sWUFBWUM7SUFDM0Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9tZXRhZGF0YVNlcnZpY2UudHM/NmMzYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiogXG4gICAgVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgaGFuZGxpbmcgdGhlIHJldHJpZXZhbCBvZiBtZXRhZGF0YSBmcm9tIHRoZSBkYXRhIHNvdXJjZS5cbiAgICBGb3IgRHVja0RCLCB3ZSBjb250cm9sIHRoZSBhY2Nlc3MgbG9naWMgYW5kIGRpcmVjdGx5IHF1ZXJ5IHRoZSBXcmVuRW5naW5lLlxuICAgIEZvciBQb3N0Z3JlU1FMIGFuZCBCaWdRdWVyeSwgd2Ugd2lsbCB1c2UgdGhlIEliaXMgc2VydmVyIEFQSS5cbiAqL1xuXG5pbXBvcnQgeyBJSWJpc0FkYXB0b3IgfSBmcm9tICcuLi9hZGFwdG9ycy9pYmlzQWRhcHRvcic7XG5pbXBvcnQgeyBJV3JlbkVuZ2luZUFkYXB0b3IgfSBmcm9tICcuLi9hZGFwdG9ycy93cmVuRW5naW5lQWRhcHRvcic7XG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzJztcbmltcG9ydCB7IERhdGFTb3VyY2VOYW1lIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnQHNlcnZlci91dGlscyc7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignTWV0YWRhdGFTZXJ2aWNlJyk7XG5sb2dnZXIubGV2ZWwgPSAnZGVidWcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhY3RDb2x1bW4ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgbm90TnVsbDogYm9vbGVhbjtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHByb3BlcnRpZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBuZXN0ZWRDb2x1bW5zPzogQ29tcGFjdENvbHVtbltdO1xufVxuXG5leHBvcnQgZW51bSBDb25zdHJhaW50VHlwZSB7XG4gIFBSSU1BUllfS0VZID0gJ1BSSU1BUlkgS0VZJyxcbiAgRk9SRUlHTl9LRVkgPSAnRk9SRUlHTiBLRVknLFxuICBVTklRVUUgPSAnVU5JUVVFJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wYWN0VGFibGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGNvbHVtbnM6IENvbXBhY3RDb2x1bW5bXTtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHByb3BlcnRpZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBwcmltYXJ5S2V5Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY29tbWVuZENvbnN0cmFpbnQge1xuICBjb25zdHJhaW50TmFtZTogc3RyaW5nO1xuICBjb25zdHJhaW50VHlwZTogQ29uc3RyYWludFR5cGU7XG4gIGNvbnN0cmFpbnRUYWJsZTogc3RyaW5nO1xuICBjb25zdHJhaW50Q29sdW1uOiBzdHJpbmc7XG4gIGNvbnN0cmFpbnRlZFRhYmxlOiBzdHJpbmc7XG4gIGNvbnN0cmFpbnRlZENvbHVtbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEYXRhU291cmNlTWV0YWRhdGFTZXJ2aWNlIHtcbiAgbGlzdFRhYmxlcyhwcm9qZWN0OiBQcm9qZWN0KTogUHJvbWlzZTxDb21wYWN0VGFibGVbXT47XG4gIGxpc3RDb25zdHJhaW50cyhwcm9qZWN0OiBQcm9qZWN0KTogUHJvbWlzZTxSZWNvbW1lbmRDb25zdHJhaW50W10+O1xufVxuXG5leHBvcnQgY2xhc3MgRGF0YVNvdXJjZU1ldGFkYXRhU2VydmljZSBpbXBsZW1lbnRzIElEYXRhU291cmNlTWV0YWRhdGFTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBpYmlzQWRhcHRvcjogSUliaXNBZGFwdG9yO1xuICBwcml2YXRlIHJlYWRvbmx5IHdyZW5FbmdpbmVBZGFwdG9yOiBJV3JlbkVuZ2luZUFkYXB0b3I7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGliaXNBZGFwdG9yLFxuICAgIHdyZW5FbmdpbmVBZGFwdG9yLFxuICB9OiB7XG4gICAgaWJpc0FkYXB0b3I6IElJYmlzQWRhcHRvcjtcbiAgICB3cmVuRW5naW5lQWRhcHRvcjogSVdyZW5FbmdpbmVBZGFwdG9yO1xuICB9KSB7XG4gICAgdGhpcy5pYmlzQWRhcHRvciA9IGliaXNBZGFwdG9yO1xuICAgIHRoaXMud3JlbkVuZ2luZUFkYXB0b3IgPSB3cmVuRW5naW5lQWRhcHRvcjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBsaXN0VGFibGVzKHByb2plY3QpOiBQcm9taXNlPENvbXBhY3RUYWJsZVtdPiB7XG4gICAgY29uc3QgeyB0eXBlOiBkYXRhU291cmNlLCBjb25uZWN0aW9uSW5mbyB9ID0gcHJvamVjdDtcbiAgICBpZiAoZGF0YVNvdXJjZSA9PT0gRGF0YVNvdXJjZU5hbWUuRFVDS0RCKSB7XG4gICAgICBjb25zdCB0YWJsZXMgPSBhd2FpdCB0aGlzLndyZW5FbmdpbmVBZGFwdG9yLmxpc3RUYWJsZXMoKTtcbiAgICAgIHJldHVybiB0YWJsZXM7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmliaXNBZGFwdG9yLmdldFRhYmxlcyhkYXRhU291cmNlLCBjb25uZWN0aW9uSW5mbyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgbGlzdENvbnN0cmFpbnRzKFxuICAgIHByb2plY3Q6IFByb2plY3QsXG4gICk6IFByb21pc2U8UmVjb21tZW5kQ29uc3RyYWludFtdPiB7XG4gICAgY29uc3QgeyB0eXBlOiBkYXRhU291cmNlLCBjb25uZWN0aW9uSW5mbyB9ID0gcHJvamVjdDtcbiAgICBpZiAoZGF0YVNvdXJjZSA9PT0gRGF0YVNvdXJjZU5hbWUuRFVDS0RCKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmliaXNBZGFwdG9yLmdldENvbnN0cmFpbnRzKGRhdGFTb3VyY2UsIGNvbm5lY3Rpb25JbmZvKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkRhdGFTb3VyY2VOYW1lIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwibGV2ZWwiLCJDb25zdHJhaW50VHlwZSIsIkRhdGFTb3VyY2VNZXRhZGF0YVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImliaXNBZGFwdG9yIiwid3JlbkVuZ2luZUFkYXB0b3IiLCJsaXN0VGFibGVzIiwicHJvamVjdCIsInR5cGUiLCJkYXRhU291cmNlIiwiY29ubmVjdGlvbkluZm8iLCJEVUNLREIiLCJ0YWJsZXMiLCJnZXRUYWJsZXMiLCJsaXN0Q29uc3RyYWludHMiLCJnZXRDb25zdHJhaW50cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/metadataService.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/modelService.ts":
/*!****************************************************!*\
  !*** ./src/apollo/server/services/modelService.ts ***!
  \****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelService: () => (/* binding */ ModelService)\n/* harmony export */ });\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _server_models__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @server/models */ \"(api)/./src/apollo/server/models/index.ts\");\n/* harmony import */ var _server_adaptors_ibisAdaptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/adaptors/ibisAdaptor */ \"(api)/./src/apollo/server/adaptors/ibisAdaptor.ts\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash/isEmpty */ \"lodash/isEmpty\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash/capitalize */ \"lodash/capitalize\");\n/* harmony import */ var lodash_capitalize__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash_capitalize__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _server_utils_regex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @server/utils/regex */ \"(api)/./src/apollo/server/utils/regex.ts\");\n/* harmony import */ var _server_utils_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @server/utils/error */ \"(api)/./src/apollo/server/utils/error.ts\");\n/* harmony import */ var _server_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @server/types */ \"(api)/./src/apollo/server/types/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_adaptors_ibisAdaptor__WEBPACK_IMPORTED_MODULE_2__]);\n_server_adaptors_ibisAdaptor__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.getLogger)(\"ModelService\");\nlogger.level = \"debug\";\nclass ModelService {\n    constructor({ projectService, modelRepository, modelColumnRepository, relationRepository, viewRepository, mdlService, wrenEngineAdaptor, queryService }){\n        this.projectService = projectService;\n        this.modelRepository = modelRepository;\n        this.modelColumnRepository = modelColumnRepository;\n        this.relationRepository = relationRepository;\n        this.viewRepository = viewRepository;\n        this.mdlService = mdlService;\n        this.wrenEngineAdaptor = wrenEngineAdaptor;\n        this.queryService = queryService;\n    }\n    async createCalculatedField(data) {\n        const { modelId, name: displayName, expression, lineage } = data;\n        const logTitle = `Create Calculated Field ${displayName}`;\n        const model = await this.modelRepository.findOneBy({\n            id: modelId\n        });\n        if (!model) {\n            throw new Error(\"Model not found\");\n        }\n        const { valid, message } = await this.validateCalculatedFieldNaming(displayName, modelId);\n        logger.debug(`${logTitle} : validateCalculatedFieldNaming: ${valid}, ${message}`);\n        if (!valid) {\n            throw new Error(message);\n        }\n        // generate referenceName\n        const referenceName = this.generateReferenceNameFromDisplayName(displayName);\n        logger.debug(`${logTitle} : generated referenceName: \"${referenceName}\"`);\n        // check this calculated field is valid for engine to query\n        const { valid: canQuery, message: errorMessage } = await this.checkCalculatedFieldCanQuery(modelId, model.referenceName, {\n            referenceName,\n            expression,\n            lineage\n        });\n        logger.debug(`${logTitle} : checkCalculatedFieldCanQuery: ${canQuery}`);\n        if (!canQuery) {\n            const parsedErrorMessage = (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.parseJson)(errorMessage);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_6__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_6__.GeneralErrorCodes.INVALID_CALCULATED_FIELD, {\n                customMessage: parsedErrorMessage?.message || errorMessage,\n                originalError: parsedErrorMessage || null\n            });\n        }\n        const inputFieldId = lineage[lineage.length - 1];\n        const dataType = await this.inferCalculatedFieldDataType(expression, inputFieldId);\n        logger.debug(`${logTitle} : inferCalculatedFieldDataType: ${dataType}`);\n        // create calculated field\n        const column = await this.modelColumnRepository.createOne({\n            modelId,\n            displayName: displayName,\n            sourceColumnName: referenceName,\n            referenceName,\n            type: dataType,\n            isCalculated: true,\n            isPk: false,\n            notNull: false,\n            aggregation: expression,\n            lineage: JSON.stringify(lineage),\n            properties: JSON.stringify({\n                description: \"\"\n            })\n        });\n        return column;\n    }\n    async updateCalculatedField(data, id) {\n        const { name: displayName, expression, lineage } = data;\n        const logTitle = `Update Calculated Field ${id}`;\n        const column = await this.modelColumnRepository.findOneBy({\n            id\n        });\n        if (!column) {\n            throw new Error(\"Column not found\");\n        }\n        const model = await this.modelRepository.findOneBy({\n            id: column.modelId\n        });\n        const { valid, message } = await this.validateCalculatedFieldNaming(displayName, column.modelId, id);\n        logger.debug(`${logTitle}: validateCalculatedFieldNaming: ${valid}, ${message}`);\n        if (!valid) {\n            throw new Error(message);\n        }\n        const referenceName = this.generateReferenceNameFromDisplayName(displayName);\n        logger.debug(`${logTitle}: generated referenceName: \"${referenceName}\"`);\n        // check this calculated field is valid for engine to query\n        const { valid: canQuery, message: errorMessage } = await this.checkCalculatedFieldCanQuery(model.id, model.referenceName, {\n            referenceName,\n            expression,\n            lineage\n        });\n        logger.debug(`${logTitle}: checkCalculatedFieldCanQuery: ${canQuery}`);\n        if (!canQuery) {\n            const error = JSON.parse(errorMessage);\n            throw _server_utils_error__WEBPACK_IMPORTED_MODULE_6__.create(_server_utils_error__WEBPACK_IMPORTED_MODULE_6__.GeneralErrorCodes.INVALID_CALCULATED_FIELD, {\n                customMessage: error?.message,\n                originalError: error\n            });\n        }\n        const inputFieldId = lineage[lineage.length - 1];\n        const dataType = await this.inferCalculatedFieldDataType(expression, inputFieldId);\n        logger.debug(`${logTitle}: inferCalculatedFieldDataType: ${dataType}`);\n        const updatedColumn = await this.modelColumnRepository.updateOne(id, {\n            displayName: displayName,\n            sourceColumnName: referenceName,\n            referenceName,\n            type: dataType,\n            aggregation: expression,\n            lineage: JSON.stringify(lineage)\n        });\n        return updatedColumn;\n    }\n    async updatePrimaryKeys(tables) {\n        logger.debug(\"start update primary keys\");\n        const { id } = await this.projectService.getCurrentProject();\n        const models = await this.modelRepository.findAllBy({\n            projectId: id\n        });\n        const tableToUpdate = tables.filter((t)=>t.primaryKey);\n        for (const table of tableToUpdate){\n            const model = models.find((m)=>m.sourceTableName === table.tableName);\n            if (!model) {\n                logger.debug(`Model not found, table name: ${table.tableName}`);\n            }\n            await this.modelColumnRepository.setModelPrimaryKey(model.id, table.primaryKey);\n        }\n    }\n    async batchUpdateModelProperties(tables) {\n        logger.debug(\"start batch update model description\");\n        const { id } = await this.projectService.getCurrentProject();\n        const models = await this.modelRepository.findAllBy({\n            projectId: id\n        });\n        await Promise.all([\n            tables.map(async (table)=>{\n                const model = models.find((m)=>m.sourceTableName === table.tableName);\n                if (!model) {\n                    logger.debug(`Model not found, table name: ${table.tableName}`);\n                    return;\n                }\n                const properties = model.properties ? {\n                    ...JSON.parse(model.properties),\n                    ...table.properties\n                } : {\n                    ...table.properties\n                };\n                await this.modelRepository.updateOne(model.id, {\n                    displayName: table.properties?.displayName || model.displayName,\n                    properties: JSON.stringify(properties)\n                });\n            })\n        ]);\n    }\n    async batchUpdateColumnProperties(tables) {\n        logger.debug(\"start batch update column description\");\n        const { id } = await this.projectService.getCurrentProject();\n        const models = await this.modelRepository.findAllBy({\n            projectId: id\n        });\n        const sourceColumns = await this.modelColumnRepository.findColumnsByModelIds(models.map((m)=>m.id));\n        const transformedColumns = tables.reduce((acc, table)=>{\n            const columns = table.columns?.map((column)=>{\n                return {\n                    ...column,\n                    tableName: table.tableName\n                };\n            });\n            if (columns) {\n                acc.push(...columns);\n            }\n            return acc;\n        }, []);\n        await Promise.all([\n            transformedColumns.map(async (column)=>{\n                if (!column.properties) {\n                    return;\n                }\n                const model = models.find((m)=>m.sourceTableName === column.tableName);\n                const sourceColumn = sourceColumns.find((sourceColumn)=>sourceColumn.modelId === model.id && sourceColumn.sourceColumnName === column.name);\n                if (!sourceColumn) {\n                    logger.debug(`Column not found, table name: ${column.tableName}, column name: ${column.name}`);\n                    return;\n                }\n                const properties = sourceColumn.properties ? {\n                    ...JSON.parse(sourceColumn.properties),\n                    ...column.properties\n                } : {\n                    description: column.description\n                };\n                await this.modelColumnRepository.updateOne(sourceColumn.id, {\n                    properties: JSON.stringify(properties)\n                });\n            })\n        ]);\n    }\n    generateReferenceName(data) {\n        const { sourceTableName, existedReferenceNames } = data;\n        if (!existedReferenceNames.includes(sourceTableName)) {\n            return sourceTableName;\n        }\n        return `${sourceTableName}_${existedReferenceNames.length + 1}`;\n    }\n    async saveRelations(relations) {\n        if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_3___default()(relations)) {\n            return [];\n        }\n        const { id } = await this.projectService.getCurrentProject();\n        const models = await this.modelRepository.findAllBy({\n            projectId: id\n        });\n        const columnIds = relations.map(({ fromColumnId, toColumnId })=>[\n                fromColumnId,\n                toColumnId\n            ]).flat();\n        const columns = await this.modelColumnRepository.findColumnsByIds(columnIds);\n        const relationValues = relations.map((relation)=>{\n            const fromColumn = columns.find((column)=>column.id === relation.fromColumnId);\n            if (!fromColumn) {\n                throw new Error(`Column not found, column Id ${relation.fromColumnId}`);\n            }\n            const toColumn = columns.find((column)=>column.id === relation.toColumnId);\n            if (!toColumn) {\n                throw new Error(`Column not found, column Id  ${relation.toColumnId}`);\n            }\n            const relationName = this.generateRelationName(relation, models, columns);\n            return {\n                projectId: id,\n                name: relationName,\n                fromColumnId: relation.fromColumnId,\n                toColumnId: relation.toColumnId,\n                joinType: relation.type,\n                properties: relation.description ? JSON.stringify({\n                    description: relation.description\n                }) : null\n            };\n        });\n        const savedRelations = await this.relationRepository.createMany(relationValues);\n        return savedRelations;\n    }\n    async createRelation(relation) {\n        const { id } = await this.projectService.getCurrentProject();\n        const modelIds = [\n            relation.fromModelId,\n            relation.toModelId\n        ];\n        const models = await this.modelRepository.findAllByIds(modelIds);\n        const columnIds = [\n            relation.fromColumnId,\n            relation.toColumnId\n        ];\n        const columns = await this.modelColumnRepository.findColumnsByIds(columnIds);\n        const { valid, message } = await this.validateCreateRelation(models, columns, relation);\n        if (!valid) {\n            throw new Error(message);\n        }\n        const relationName = this.generateRelationName(relation, models, columns);\n        const savedRelation = await this.relationRepository.createOne({\n            projectId: id,\n            name: relationName,\n            fromColumnId: relation.fromColumnId,\n            toColumnId: relation.toColumnId,\n            joinType: relation.type\n        });\n        return savedRelation;\n    }\n    async updateRelation(relation, id) {\n        const updatedRelation = await this.relationRepository.updateOne(id, {\n            joinType: relation.type\n        });\n        return updatedRelation;\n    }\n    async deleteRelation(id) {\n        const relation = await this.relationRepository.findOneBy({\n            id\n        });\n        if (!relation) {\n            throw new Error(\"Relation not found\");\n        }\n        const calculatedFields = await this.getCalculatedFieldByRelation(id);\n        if (calculatedFields.length > 0) {\n            // delete related calculated fields\n            await this.modelColumnRepository.deleteMany(calculatedFields.map((f)=>f.id));\n        }\n        await this.relationRepository.deleteOne(id);\n    }\n    async getCalculatedFieldByRelation(relationId) {\n        const calculatedFields = await this.modelColumnRepository.findAllBy({\n            isCalculated: true\n        });\n        const relatedCalculatedFields = calculatedFields.reduce((acc, field)=>{\n            const lineage = JSON.parse(field.lineage);\n            const relationIds = lineage.slice(0, lineage.length - 1);\n            if (relationIds.includes(relationId)) {\n                acc.push(field);\n            }\n            return acc;\n        }, []);\n        return relatedCalculatedFields;\n    }\n    async validateCalculatedFieldNaming(displayName, modelId, columnId) {\n        // only allow uppercase/lowercase english, numbers, syntaxes in the first raw of keyboard, {}, [], ', \", ,, .\n        const validationRes = (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.validateDisplayName)(displayName);\n        if (!validationRes.valid) {\n            return {\n                valid: false,\n                message: validationRes.message || \"Invalid Calculated field name\"\n            };\n        }\n        // can not duplicated with existed column\n        const referenceName = this.generateReferenceNameFromDisplayName(displayName);\n        let existedColumns = await this.modelColumnRepository.findColumnsByModelIds([\n            modelId\n        ]);\n        if (columnId) {\n            existedColumns = existedColumns.filter((column)=>column.id !== columnId);\n        }\n        if (existedColumns.find((column)=>column.referenceName === referenceName)) {\n            return {\n                valid: false,\n                message: `The generated calculated field name \"${referenceName}\" is duplicated with existed column, please change the name and try again`\n            };\n        }\n        return {\n            valid: true\n        };\n    }\n    async deleteAllViewsByProjectId(projectId) {\n        // delete all views\n        await this.viewRepository.deleteAllBy({\n            projectId\n        });\n    }\n    async deleteAllModelsByProjectId(projectId) {\n        // delete all relations\n        await this.relationRepository.deleteAllBy({\n            projectId\n        });\n        // delete all models\n        await this.modelRepository.deleteAllBy({\n            projectId\n        });\n    }\n    generateReferenceNameFromDisplayName(displayName) {\n        // replace all syntaxes that [in the first raw of keyboard, {}, [], ', \", ,, . ] with _\n        return (0,_server_utils__WEBPACK_IMPORTED_MODULE_0__.replaceAllowableSyntax)(displayName);\n    }\n    generateRelationName(relation, models, columns) {\n        const fromModel = models.find((m)=>m.id === relation.fromModelId);\n        const toModel = models.find((m)=>m.id === relation.toModelId);\n        if (!fromModel || !toModel) {\n            throw new Error(\"Model not found\");\n        }\n        const fromColumn = columns.find((column)=>column.id === relation.fromColumnId);\n        const toColumn = columns.find((column)=>column.id === relation.toColumnId);\n        return lodash_capitalize__WEBPACK_IMPORTED_MODULE_4___default()(fromModel.sourceTableName) + lodash_capitalize__WEBPACK_IMPORTED_MODULE_4___default()(fromColumn.referenceName) + lodash_capitalize__WEBPACK_IMPORTED_MODULE_4___default()(toModel.sourceTableName) + lodash_capitalize__WEBPACK_IMPORTED_MODULE_4___default()(toColumn.referenceName);\n    }\n    /** We currently support expression below, right side is the return type of the calculated field.\n  Aggregations\n    - **avg(***x***)** → double\n    - **count(***x***)** → bigint\n    - **max(***x***)** → [same as input]\n    - **min(***x***)** → [same as input]\n    - **sum(***x***)** → [same as input]\n  Math functions\n    - **abs(***x***)** → [same as input]\n    - **cbrt(***x***)** → double\n    - **ceil(***x***)** → [same as input]\n    - **exp(***x***)** → double\n    - **floor(***x***)** → [same as input]\n    - **ln(***x***)** → double\n    - **log10(***x***)** → double\n    - **round(***x***)** → [same as input]\n    - **sign(***x***)** → [same as input]\n\n  String functions\n    - **length(***string***)** → bigint\n    - **reverse(**string**)** → varbinary\n  */ async inferCalculatedFieldDataType(expression, inputFieldId) {\n        let type = null;\n        switch(expression){\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.CEIL:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.FLOOR:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.ROUND:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.SIGN:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.SUM:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.MAX:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.MIN:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.ABS:\n                type = await this.getFieldDataType(inputFieldId);\n                break;\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.CBRT:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.EXP:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.AVG:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.LN:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.LOG10:\n                type = \"DOUBLE\";\n                break;\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.COUNT:\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.LENGTH:\n                type = \"BIGINT\";\n                break;\n            case _server_models__WEBPACK_IMPORTED_MODULE_1__.ExpressionName.REVERSE:\n                type = \"VARBINARY\";\n                break;\n            default:\n                throw new Error(\"Unsupported expression\");\n        }\n        return type;\n    }\n    async getFieldDataType(fieldId) {\n        const field = await this.modelColumnRepository.findOneBy({\n            id: fieldId\n        });\n        if (!field) {\n            throw new Error(\"Field not found\");\n        }\n        return field.type;\n    }\n    async checkCalculatedFieldCanQuery(modelId, modelName, data) {\n        const project = await this.projectService.getCurrentProject();\n        const { mdlBuilder } = await this.mdlService.makeCurrentModelMDL();\n        const { referenceName, expression, lineage } = data;\n        const inputFieldId = lineage[lineage.length - 1];\n        const dataType = await this.inferCalculatedFieldDataType(expression, inputFieldId);\n        // add temporary calculated field\n        const modelColumn = {\n            id: 99999999,\n            modelId,\n            displayName: referenceName,\n            sourceColumnName: referenceName,\n            referenceName: referenceName,\n            type: dataType,\n            isCalculated: true,\n            isPk: false,\n            notNull: false,\n            aggregation: expression,\n            lineage: JSON.stringify(lineage),\n            properties: JSON.stringify({\n                description: \"\"\n            })\n        };\n        mdlBuilder.insertCalculatedField(modelName, modelColumn);\n        const manifest = mdlBuilder.getManifest();\n        // find the calculated field in manifest\n        const calculatedField = manifest.models.find((m)=>m.name === modelName)?.columns.find((c)=>c.name === referenceName);\n        logger.debug(`Calculated field MDL: ${JSON.stringify(calculatedField)}`);\n        // validate calculated field can query\n        const dataSource = project.type;\n        if (dataSource === _server_types__WEBPACK_IMPORTED_MODULE_7__.DataSourceName.DUCKDB) {\n            return await this.wrenEngineAdaptor.validateColumnIsValid(manifest, modelName, referenceName);\n        } else {\n            const parameters = {\n                modelName,\n                columnName: referenceName\n            };\n            return await this.queryService.validate(project, _server_adaptors_ibisAdaptor__WEBPACK_IMPORTED_MODULE_2__.ValidationRules.COLUMN_IS_VALID, manifest, parameters);\n        }\n    }\n    async validateCreateRelation(models, columns, relation) {\n        const { fromModelId, fromColumnId, toModelId, toColumnId } = relation;\n        const fromModel = models.find((m)=>m.id === fromModelId);\n        const toModel = models.find((m)=>m.id === toModelId);\n        // model should exist\n        if (!fromModel) {\n            return {\n                valid: false,\n                message: `Model not found: fromModelId ${fromModelId}`\n            };\n        }\n        if (!toModel) {\n            return {\n                valid: false,\n                message: `Model not found: toModelId ${toModelId}`\n            };\n        }\n        // column should exist\n        const fromColumn = columns.find((column)=>column.id === fromColumnId);\n        const toColumn = columns.find((column)=>column.id === toColumnId);\n        if (!fromColumn) {\n            return {\n                valid: false,\n                message: `Column not found, column Id ${fromColumnId}`\n            };\n        }\n        if (!toColumn) {\n            return {\n                valid: false,\n                message: `Column not found, column Id ${toColumnId}`\n            };\n        }\n        // column should belong to the model\n        if (toColumn.modelId != toModelId) {\n            return {\n                valid: false,\n                message: `Column not belong to the model, column Id ${toColumnId}`\n            };\n        }\n        if (fromColumn.modelId != fromModelId) {\n            return {\n                valid: false,\n                message: `Column not belong to the model, column Id ${fromColumnId}`\n            };\n        }\n        const existedRelations = await this.relationRepository.findExistedRelationBetweenModels(relation);\n        if (existedRelations.length > 0) {\n            return {\n                valid: false,\n                message: \"This relationship already exists.\"\n            };\n        }\n        return {\n            valid: true\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9tb2RlbFNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFldUI7QUFRQztBQUd1QztBQUNsQjtBQUFBO0FBQ1I7QUFDUztBQUNDO0FBRy9DLE1BQU1VLFNBQVNWLHdEQUFTQSxDQUFDO0FBQ3pCVSxPQUFPQyxLQUFLLEdBQUc7QUFxQ1IsTUFBTUM7SUFVWEMsWUFBWSxFQUNWQyxjQUFjLEVBQ2RDLGVBQWUsRUFDZkMscUJBQXFCLEVBQ3JCQyxrQkFBa0IsRUFDbEJDLGNBQWMsRUFDZEMsVUFBVSxFQUNWQyxpQkFBaUIsRUFDakJDLFlBQVksRUFVYixDQUFFO1FBQ0QsSUFBSSxDQUFDUCxjQUFjLEdBQUdBO1FBQ3RCLElBQUksQ0FBQ0MsZUFBZSxHQUFHQTtRQUN2QixJQUFJLENBQUNDLHFCQUFxQixHQUFHQTtRQUM3QixJQUFJLENBQUNDLGtCQUFrQixHQUFHQTtRQUMxQixJQUFJLENBQUNDLGNBQWMsR0FBR0E7UUFDdEIsSUFBSSxDQUFDQyxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUdBO1FBQ3pCLElBQUksQ0FBQ0MsWUFBWSxHQUFHQTtJQUN0QjtJQUVBLE1BQWFDLHNCQUNYQyxJQUErQixFQUNUO1FBQ3RCLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxNQUFNQyxXQUFXLEVBQUVDLFVBQVUsRUFBRUMsT0FBTyxFQUFFLEdBQUdMO1FBQzVELE1BQU1NLFdBQVcsQ0FBQyx3QkFBd0IsRUFBRUgsWUFBWSxDQUFDO1FBQ3pELE1BQU1JLFFBQVEsTUFBTSxJQUFJLENBQUNmLGVBQWUsQ0FBQ2dCLFNBQVMsQ0FBQztZQUNqREMsSUFBSVI7UUFDTjtRQUNBLElBQUksQ0FBQ00sT0FBTztZQUNWLE1BQU0sSUFBSUcsTUFBTTtRQUNsQjtRQUNBLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQ0MsNkJBQTZCLENBQ2pF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Q0FBQztZQUNwRTtRQUNGO1FBQ0EsSUFBSUssV0FBV3ZGLE9BQU8sSUFBSWdHLGFBQWE7WUFDckMsT0FBTztnQkFDTHRGLE9BQU87Z0JBQ1BDLFNBQVMsQ0FBQywwQ0FBMEMsRUFBRXNFLGFBQWEsQ0FBQztZQUN0RTtRQUNGO1FBRUEsTUFBTTRFLG1CQUNKLE1BQU0sSUFBSSxDQUFDcEssa0JBQWtCLENBQUNxSyxnQ0FBZ0MsQ0FBQ3hFO1FBRWpFLElBQUl1RSxpQkFBaUJuSSxNQUFNLEdBQUcsR0FBRztZQUMvQixPQUFPO2dCQUNMaEIsT0FBTztnQkFDUEMsU0FBUztZQUNYO1FBQ0Y7UUFFQSxPQUFPO1lBQUVELE9BQU87UUFBSztJQUN2QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3NlcnZpY2VzL21vZGVsU2VydmljZS50cz8wYzViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNhbXBsZURhdGFzZXRUYWJsZSB9IGZyb20gJ0BzZXJ2ZXIvZGF0YSc7XG5pbXBvcnQge1xuICBJTW9kZWxDb2x1bW5SZXBvc2l0b3J5LFxuICBJTW9kZWxSZXBvc2l0b3J5LFxuICBJUmVsYXRpb25SZXBvc2l0b3J5LFxuICBJVmlld1JlcG9zaXRvcnksXG4gIE1vZGVsLFxuICBNb2RlbENvbHVtbixcbiAgUmVsYXRpb24sXG59IGZyb20gJ0BzZXJ2ZXIvcmVwb3NpdG9yaWVzJztcbmltcG9ydCB7XG4gIGdldExvZ2dlcixcbiAgcGFyc2VKc29uLFxuICByZXBsYWNlQWxsb3dhYmxlU3ludGF4LFxuICB2YWxpZGF0ZURpc3BsYXlOYW1lLFxufSBmcm9tICdAc2VydmVyL3V0aWxzJztcbmltcG9ydCB7IFJlbGF0aW9uRGF0YSwgVXBkYXRlUmVsYXRpb25EYXRhIH0gZnJvbSAnQHNlcnZlci90eXBlcyc7XG5pbXBvcnQgeyBJUHJvamVjdFNlcnZpY2UgfSBmcm9tICcuL3Byb2plY3RTZXJ2aWNlJztcbmltcG9ydCB7XG4gIENyZWF0ZUNhbGN1bGF0ZWRGaWVsZERhdGEsXG4gIEV4cHJlc3Npb25OYW1lLFxuICBVcGRhdGVDYWxjdWxhdGVkRmllbGREYXRhLFxuICBDaGVja0NhbGN1bGF0ZWRGaWVsZENhblF1ZXJ5RGF0YSxcbn0gZnJvbSAnQHNlcnZlci9tb2RlbHMnO1xuaW1wb3J0IHsgSU1ETFNlcnZpY2UgfSBmcm9tICcuL21kbFNlcnZpY2UnO1xuaW1wb3J0IHsgSVdyZW5FbmdpbmVBZGFwdG9yIH0gZnJvbSAnLi4vYWRhcHRvcnMvd3JlbkVuZ2luZUFkYXB0b3InO1xuaW1wb3J0IHsgVmFsaWRhdGlvblJ1bGVzIH0gZnJvbSAnQHNlcnZlci9hZGFwdG9ycy9pYmlzQWRhcHRvcic7XG5pbXBvcnQgeyBpc0VtcHR5LCBjYXBpdGFsaXplIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7fSBmcm9tICdAc2VydmVyL3V0aWxzL3JlZ2V4JztcbmltcG9ydCAqIGFzIEVycm9ycyBmcm9tICdAc2VydmVyL3V0aWxzL2Vycm9yJztcbmltcG9ydCB7IERhdGFTb3VyY2VOYW1lIH0gZnJvbSAnQHNlcnZlci90eXBlcyc7XG5pbXBvcnQgeyBJUXVlcnlTZXJ2aWNlIH0gZnJvbSAnLi9xdWVyeVNlcnZpY2UnO1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ01vZGVsU2VydmljZScpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0ZUNhbGN1bGF0ZWRGaWVsZFJlc3BvbnNlIHtcbiAgdmFsaWQ6IGJvb2xlYW47XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1vZGVsU2VydmljZSB7XG4gIHVwZGF0ZVByaW1hcnlLZXlzKHRhYmxlczogU2FtcGxlRGF0YXNldFRhYmxlW10pOiBQcm9taXNlPHZvaWQ+O1xuICBiYXRjaFVwZGF0ZU1vZGVsUHJvcGVydGllcyh0YWJsZXM6IFNhbXBsZURhdGFzZXRUYWJsZVtdKTogUHJvbWlzZTx2b2lkPjtcbiAgYmF0Y2hVcGRhdGVDb2x1bW5Qcm9wZXJ0aWVzKHRhYmxlczogU2FtcGxlRGF0YXNldFRhYmxlW10pOiBQcm9taXNlPHZvaWQ+O1xuICAvLyBzYXZlUmVsYXRpb25zIHdhcyB1c2VkIGluIHRoZSBvbmJvYXJkaW5nIHByb2Nlc3MsIHdlIGFzc3VtZSB0aGVyZSBpcyBub3QgZXhpc3RpbmcgcmVsYXRpb24gaW4gdGhlIHByb2plY3RcbiAgc2F2ZVJlbGF0aW9ucyhyZWxhdGlvbnM6IFJlbGF0aW9uRGF0YVtdKTogUHJvbWlzZTxSZWxhdGlvbltdPjtcbiAgY3JlYXRlUmVsYXRpb24ocmVsYXRpb246IFJlbGF0aW9uRGF0YSk6IFByb21pc2U8UmVsYXRpb24+O1xuICB1cGRhdGVSZWxhdGlvbihyZWxhdGlvbjogVXBkYXRlUmVsYXRpb25EYXRhLCBpZDogbnVtYmVyKTogUHJvbWlzZTxSZWxhdGlvbj47XG4gIGRlbGV0ZVJlbGF0aW9uKGlkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+O1xuICBjcmVhdGVDYWxjdWxhdGVkRmllbGQoZGF0YTogQ3JlYXRlQ2FsY3VsYXRlZEZpZWxkRGF0YSk6IFByb21pc2U8TW9kZWxDb2x1bW4+O1xuICB1cGRhdGVDYWxjdWxhdGVkRmllbGQoXG4gICAgZGF0YTogVXBkYXRlQ2FsY3VsYXRlZEZpZWxkRGF0YSxcbiAgICBpZDogbnVtYmVyLFxuICApOiBQcm9taXNlPE1vZGVsQ29sdW1uPjtcbiAgZ2VuZXJhdGVSZWZlcmVuY2VOYW1lKGRhdGE6IGFueSk6IHN0cmluZztcbiAgdmFsaWRhdGVDYWxjdWxhdGVkRmllbGROYW1pbmcoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIG1vZGVsSWQ6IG51bWJlcixcbiAgICBjb2x1bW5JZD86IG51bWJlcixcbiAgKTogUHJvbWlzZTxWYWxpZGF0ZUNhbGN1bGF0ZWRGaWVsZFJlc3BvbnNlPjtcbiAgZGVsZXRlQWxsVmlld3NCeVByb2plY3RJZChwcm9qZWN0SWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD47XG4gIGRlbGV0ZUFsbE1vZGVsc0J5UHJvamVjdElkKHByb2plY3RJZDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmF0ZVJlZmVyZW5jZU5hbWVEYXRhIHtcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgc291cmNlVGFibGVOYW1lOiBzdHJpbmc7XG4gIGV4aXN0ZWRSZWZlcmVuY2VOYW1lczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBNb2RlbFNlcnZpY2UgaW1wbGVtZW50cyBJTW9kZWxTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBwcm9qZWN0U2VydmljZTogSVByb2plY3RTZXJ2aWNlO1xuICBwcml2YXRlIG1vZGVsUmVwb3NpdG9yeTogSU1vZGVsUmVwb3NpdG9yeTtcbiAgcHJpdmF0ZSBtb2RlbENvbHVtblJlcG9zaXRvcnk6IElNb2RlbENvbHVtblJlcG9zaXRvcnk7XG4gIHByaXZhdGUgcmVsYXRpb25SZXBvc2l0b3J5OiBJUmVsYXRpb25SZXBvc2l0b3J5O1xuICBwcml2YXRlIHZpZXdSZXBvc2l0b3J5OiBJVmlld1JlcG9zaXRvcnk7XG4gIHByaXZhdGUgbWRsU2VydmljZTogSU1ETFNlcnZpY2U7XG4gIHByaXZhdGUgd3JlbkVuZ2luZUFkYXB0b3I6IElXcmVuRW5naW5lQWRhcHRvcjtcbiAgcHJpdmF0ZSBxdWVyeVNlcnZpY2U6IElRdWVyeVNlcnZpY2U7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIHByb2plY3RTZXJ2aWNlLFxuICAgIG1vZGVsUmVwb3NpdG9yeSxcbiAgICBtb2RlbENvbHVtblJlcG9zaXRvcnksXG4gICAgcmVsYXRpb25SZXBvc2l0b3J5LFxuICAgIHZpZXdSZXBvc2l0b3J5LFxuICAgIG1kbFNlcnZpY2UsXG4gICAgd3JlbkVuZ2luZUFkYXB0b3IsXG4gICAgcXVlcnlTZXJ2aWNlLFxuICB9OiB7XG4gICAgcHJvamVjdFNlcnZpY2U6IElQcm9qZWN0U2VydmljZTtcbiAgICBtb2RlbFJlcG9zaXRvcnk6IElNb2RlbFJlcG9zaXRvcnk7XG4gICAgbW9kZWxDb2x1bW5SZXBvc2l0b3J5OiBJTW9kZWxDb2x1bW5SZXBvc2l0b3J5O1xuICAgIHJlbGF0aW9uUmVwb3NpdG9yeTogSVJlbGF0aW9uUmVwb3NpdG9yeTtcbiAgICB2aWV3UmVwb3NpdG9yeTogSVZpZXdSZXBvc2l0b3J5O1xuICAgIG1kbFNlcnZpY2U6IElNRExTZXJ2aWNlO1xuICAgIHdyZW5FbmdpbmVBZGFwdG9yOiBJV3JlbkVuZ2luZUFkYXB0b3I7XG4gICAgcXVlcnlTZXJ2aWNlOiBJUXVlcnlTZXJ2aWNlO1xuICB9KSB7XG4gICAgdGhpcy5wcm9qZWN0U2VydmljZSA9IHByb2plY3RTZXJ2aWNlO1xuICAgIHRoaXMubW9kZWxSZXBvc2l0b3J5ID0gbW9kZWxSZXBvc2l0b3J5O1xuICAgIHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5ID0gbW9kZWxDb2x1bW5SZXBvc2l0b3J5O1xuICAgIHRoaXMucmVsYXRpb25SZXBvc2l0b3J5ID0gcmVsYXRpb25SZXBvc2l0b3J5O1xuICAgIHRoaXMudmlld1JlcG9zaXRvcnkgPSB2aWV3UmVwb3NpdG9yeTtcbiAgICB0aGlzLm1kbFNlcnZpY2UgPSBtZGxTZXJ2aWNlO1xuICAgIHRoaXMud3JlbkVuZ2luZUFkYXB0b3IgPSB3cmVuRW5naW5lQWRhcHRvcjtcbiAgICB0aGlzLnF1ZXJ5U2VydmljZSA9IHF1ZXJ5U2VydmljZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBjcmVhdGVDYWxjdWxhdGVkRmllbGQoXG4gICAgZGF0YTogQ3JlYXRlQ2FsY3VsYXRlZEZpZWxkRGF0YSxcbiAgKTogUHJvbWlzZTxNb2RlbENvbHVtbj4ge1xuICAgIGNvbnN0IHsgbW9kZWxJZCwgbmFtZTogZGlzcGxheU5hbWUsIGV4cHJlc3Npb24sIGxpbmVhZ2UgfSA9IGRhdGE7XG4gICAgY29uc3QgbG9nVGl0bGUgPSBgQ3JlYXRlIENhbGN1bGF0ZWQgRmllbGQgJHtkaXNwbGF5TmFtZX1gO1xuICAgIGNvbnN0IG1vZGVsID0gYXdhaXQgdGhpcy5tb2RlbFJlcG9zaXRvcnkuZmluZE9uZUJ5KHtcbiAgICAgIGlkOiBtb2RlbElkLFxuICAgIH0pO1xuICAgIGlmICghbW9kZWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTW9kZWwgbm90IGZvdW5kJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgdmFsaWQsIG1lc3NhZ2UgfSA9IGF3YWl0IHRoaXMudmFsaWRhdGVDYWxjdWxhdGVkRmllbGROYW1pbmcoXG4gICAgICBkaXNwbGF5TmFtZSxcbiAgICAgIG1vZGVsSWQsXG4gICAgKTtcbiAgICBsb2dnZXIuZGVidWcoXG4gICAgICBgJHtsb2dUaXRsZX0gOiB2YWxpZGF0ZUNhbGN1bGF0ZWRGaWVsZE5hbWluZzogJHt2YWxpZH0sICR7bWVzc2FnZX1gLFxuICAgICk7XG4gICAgaWYgKCF2YWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIC8vIGdlbmVyYXRlIHJlZmVyZW5jZU5hbWVcbiAgICBjb25zdCByZWZlcmVuY2VOYW1lID1cbiAgICAgIHRoaXMuZ2VuZXJhdGVSZWZlcmVuY2VOYW1lRnJvbURpc3BsYXlOYW1lKGRpc3BsYXlOYW1lKTtcbiAgICBsb2dnZXIuZGVidWcoYCR7bG9nVGl0bGV9IDogZ2VuZXJhdGVkIHJlZmVyZW5jZU5hbWU6IFwiJHtyZWZlcmVuY2VOYW1lfVwiYCk7XG5cbiAgICAvLyBjaGVjayB0aGlzIGNhbGN1bGF0ZWQgZmllbGQgaXMgdmFsaWQgZm9yIGVuZ2luZSB0byBxdWVyeVxuICAgIGNvbnN0IHsgdmFsaWQ6IGNhblF1ZXJ5LCBtZXNzYWdlOiBlcnJvck1lc3NhZ2UgfSA9XG4gICAgICBhd2FpdCB0aGlzLmNoZWNrQ2FsY3VsYXRlZEZpZWxkQ2FuUXVlcnkobW9kZWxJZCwgbW9kZWwucmVmZXJlbmNlTmFtZSwge1xuICAgICAgICByZWZlcmVuY2VOYW1lLFxuICAgICAgICBleHByZXNzaW9uLFxuICAgICAgICBsaW5lYWdlLFxuICAgICAgfSBhcyBDaGVja0NhbGN1bGF0ZWRGaWVsZENhblF1ZXJ5RGF0YSk7XG4gICAgbG9nZ2VyLmRlYnVnKGAke2xvZ1RpdGxlfSA6IGNoZWNrQ2FsY3VsYXRlZEZpZWxkQ2FuUXVlcnk6ICR7Y2FuUXVlcnl9YCk7XG4gICAgaWYgKCFjYW5RdWVyeSkge1xuICAgICAgY29uc3QgcGFyc2VkRXJyb3JNZXNzYWdlID0gcGFyc2VKc29uKGVycm9yTWVzc2FnZSk7XG4gICAgICB0aHJvdyBFcnJvcnMuY3JlYXRlKEVycm9ycy5HZW5lcmFsRXJyb3JDb2Rlcy5JTlZBTElEX0NBTENVTEFURURfRklFTEQsIHtcbiAgICAgICAgY3VzdG9tTWVzc2FnZTogcGFyc2VkRXJyb3JNZXNzYWdlPy5tZXNzYWdlIHx8IGVycm9yTWVzc2FnZSxcbiAgICAgICAgb3JpZ2luYWxFcnJvcjogcGFyc2VkRXJyb3JNZXNzYWdlIHx8IG51bGwsXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRGaWVsZElkID0gbGluZWFnZVtsaW5lYWdlLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGRhdGFUeXBlID0gYXdhaXQgdGhpcy5pbmZlckNhbGN1bGF0ZWRGaWVsZERhdGFUeXBlKFxuICAgICAgZXhwcmVzc2lvbixcbiAgICAgIGlucHV0RmllbGRJZCxcbiAgICApO1xuICAgIGxvZ2dlci5kZWJ1ZyhgJHtsb2dUaXRsZX0gOiBpbmZlckNhbGN1bGF0ZWRGaWVsZERhdGFUeXBlOiAke2RhdGFUeXBlfWApO1xuXG4gICAgLy8gY3JlYXRlIGNhbGN1bGF0ZWQgZmllbGRcbiAgICBjb25zdCBjb2x1bW4gPSBhd2FpdCB0aGlzLm1vZGVsQ29sdW1uUmVwb3NpdG9yeS5jcmVhdGVPbmUoe1xuICAgICAgbW9kZWxJZCxcbiAgICAgIGRpc3BsYXlOYW1lOiBkaXNwbGF5TmFtZSxcbiAgICAgIHNvdXJjZUNvbHVtbk5hbWU6IHJlZmVyZW5jZU5hbWUsXG4gICAgICByZWZlcmVuY2VOYW1lLFxuICAgICAgdHlwZTogZGF0YVR5cGUsXG4gICAgICBpc0NhbGN1bGF0ZWQ6IHRydWUsXG4gICAgICBpc1BrOiBmYWxzZSxcbiAgICAgIG5vdE51bGw6IGZhbHNlLFxuICAgICAgYWdncmVnYXRpb246IGV4cHJlc3Npb24sXG4gICAgICBsaW5lYWdlOiBKU09OLnN0cmluZ2lmeShsaW5lYWdlKSxcbiAgICAgIHByb3BlcnRpZXM6IEpTT04uc3RyaW5naWZ5KHsgZGVzY3JpcHRpb246ICcnIH0pLFxuICAgIH0pO1xuICAgIHJldHVybiBjb2x1bW47XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBkYXRlQ2FsY3VsYXRlZEZpZWxkKFxuICAgIGRhdGE6IFVwZGF0ZUNhbGN1bGF0ZWRGaWVsZERhdGEsXG4gICAgaWQ6IG51bWJlcixcbiAgKTogUHJvbWlzZTxNb2RlbENvbHVtbj4ge1xuICAgIGNvbnN0IHsgbmFtZTogZGlzcGxheU5hbWUsIGV4cHJlc3Npb24sIGxpbmVhZ2UgfSA9IGRhdGE7XG4gICAgY29uc3QgbG9nVGl0bGUgPSBgVXBkYXRlIENhbGN1bGF0ZWQgRmllbGQgJHtpZH1gO1xuICAgIGNvbnN0IGNvbHVtbiA9IGF3YWl0IHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmZpbmRPbmVCeSh7IGlkIH0pO1xuICAgIGlmICghY29sdW1uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbHVtbiBub3QgZm91bmQnKTtcbiAgICB9XG4gICAgY29uc3QgbW9kZWwgPSBhd2FpdCB0aGlzLm1vZGVsUmVwb3NpdG9yeS5maW5kT25lQnkoe1xuICAgICAgaWQ6IGNvbHVtbi5tb2RlbElkLFxuICAgIH0pO1xuICAgIGNvbnN0IHsgdmFsaWQsIG1lc3NhZ2UgfSA9IGF3YWl0IHRoaXMudmFsaWRhdGVDYWxjdWxhdGVkRmllbGROYW1pbmcoXG4gICAgICBkaXNwbGF5TmFtZSxcbiAgICAgIGNvbHVtbi5tb2RlbElkLFxuICAgICAgaWQsXG4gICAgKTtcbiAgICBsb2dnZXIuZGVidWcoXG4gICAgICBgJHtsb2dUaXRsZX06IHZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkTmFtaW5nOiAke3ZhbGlkfSwgJHttZXNzYWdlfWAsXG4gICAgKTtcbiAgICBpZiAoIXZhbGlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICAgIGNvbnN0IHJlZmVyZW5jZU5hbWUgPVxuICAgICAgdGhpcy5nZW5lcmF0ZVJlZmVyZW5jZU5hbWVGcm9tRGlzcGxheU5hbWUoZGlzcGxheU5hbWUpO1xuICAgIGxvZ2dlci5kZWJ1ZyhgJHtsb2dUaXRsZX06IGdlbmVyYXRlZCByZWZlcmVuY2VOYW1lOiBcIiR7cmVmZXJlbmNlTmFtZX1cImApO1xuXG4gICAgLy8gY2hlY2sgdGhpcyBjYWxjdWxhdGVkIGZpZWxkIGlzIHZhbGlkIGZvciBlbmdpbmUgdG8gcXVlcnlcbiAgICBjb25zdCB7IHZhbGlkOiBjYW5RdWVyeSwgbWVzc2FnZTogZXJyb3JNZXNzYWdlIH0gPVxuICAgICAgYXdhaXQgdGhpcy5jaGVja0NhbGN1bGF0ZWRGaWVsZENhblF1ZXJ5KG1vZGVsLmlkLCBtb2RlbC5yZWZlcmVuY2VOYW1lLCB7XG4gICAgICAgIHJlZmVyZW5jZU5hbWUsXG4gICAgICAgIGV4cHJlc3Npb24sXG4gICAgICAgIGxpbmVhZ2UsXG4gICAgICB9IGFzIENoZWNrQ2FsY3VsYXRlZEZpZWxkQ2FuUXVlcnlEYXRhKTtcbiAgICBsb2dnZXIuZGVidWcoYCR7bG9nVGl0bGV9OiBjaGVja0NhbGN1bGF0ZWRGaWVsZENhblF1ZXJ5OiAke2NhblF1ZXJ5fWApO1xuICAgIGlmICghY2FuUXVlcnkpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gSlNPTi5wYXJzZShlcnJvck1lc3NhZ2UpO1xuICAgICAgdGhyb3cgRXJyb3JzLmNyZWF0ZShFcnJvcnMuR2VuZXJhbEVycm9yQ29kZXMuSU5WQUxJRF9DQUxDVUxBVEVEX0ZJRUxELCB7XG4gICAgICAgIGN1c3RvbU1lc3NhZ2U6IGVycm9yPy5tZXNzYWdlLFxuICAgICAgICBvcmlnaW5hbEVycm9yOiBlcnJvcixcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBpbnB1dEZpZWxkSWQgPSBsaW5lYWdlW2xpbmVhZ2UubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgZGF0YVR5cGUgPSBhd2FpdCB0aGlzLmluZmVyQ2FsY3VsYXRlZEZpZWxkRGF0YVR5cGUoXG4gICAgICBleHByZXNzaW9uLFxuICAgICAgaW5wdXRGaWVsZElkLFxuICAgICk7XG4gICAgbG9nZ2VyLmRlYnVnKGAke2xvZ1RpdGxlfTogaW5mZXJDYWxjdWxhdGVkRmllbGREYXRhVHlwZTogJHtkYXRhVHlwZX1gKTtcbiAgICBjb25zdCB1cGRhdGVkQ29sdW1uID0gYXdhaXQgdGhpcy5tb2RlbENvbHVtblJlcG9zaXRvcnkudXBkYXRlT25lKGlkLCB7XG4gICAgICBkaXNwbGF5TmFtZTogZGlzcGxheU5hbWUsXG4gICAgICBzb3VyY2VDb2x1bW5OYW1lOiByZWZlcmVuY2VOYW1lLFxuICAgICAgcmVmZXJlbmNlTmFtZSxcbiAgICAgIHR5cGU6IGRhdGFUeXBlLFxuICAgICAgYWdncmVnYXRpb246IGV4cHJlc3Npb24sXG4gICAgICBsaW5lYWdlOiBKU09OLnN0cmluZ2lmeShsaW5lYWdlKSxcbiAgICB9KTtcbiAgICByZXR1cm4gdXBkYXRlZENvbHVtbjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVQcmltYXJ5S2V5cyh0YWJsZXM6IFNhbXBsZURhdGFzZXRUYWJsZVtdKSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdzdGFydCB1cGRhdGUgcHJpbWFyeSBrZXlzJyk7XG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgdGhpcy5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMubW9kZWxSZXBvc2l0b3J5LmZpbmRBbGxCeSh7XG4gICAgICBwcm9qZWN0SWQ6IGlkLFxuICAgIH0pO1xuICAgIGNvbnN0IHRhYmxlVG9VcGRhdGUgPSB0YWJsZXMuZmlsdGVyKCh0KSA9PiB0LnByaW1hcnlLZXkpO1xuICAgIGZvciAoY29uc3QgdGFibGUgb2YgdGFibGVUb1VwZGF0ZSkge1xuICAgICAgY29uc3QgbW9kZWwgPSBtb2RlbHMuZmluZCgobSkgPT4gbS5zb3VyY2VUYWJsZU5hbWUgPT09IHRhYmxlLnRhYmxlTmFtZSk7XG4gICAgICBpZiAoIW1vZGVsKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgTW9kZWwgbm90IGZvdW5kLCB0YWJsZSBuYW1lOiAke3RhYmxlLnRhYmxlTmFtZX1gKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5LnNldE1vZGVsUHJpbWFyeUtleShcbiAgICAgICAgbW9kZWwuaWQsXG4gICAgICAgIHRhYmxlLnByaW1hcnlLZXksXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBiYXRjaFVwZGF0ZU1vZGVsUHJvcGVydGllcyh0YWJsZXM6IFNhbXBsZURhdGFzZXRUYWJsZVtdKSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdzdGFydCBiYXRjaCB1cGRhdGUgbW9kZWwgZGVzY3JpcHRpb24nKTtcbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCB0aGlzLnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgbW9kZWxzID0gYXdhaXQgdGhpcy5tb2RlbFJlcG9zaXRvcnkuZmluZEFsbEJ5KHtcbiAgICAgIHByb2plY3RJZDogaWQsXG4gICAgfSk7XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0YWJsZXMubWFwKGFzeW5jICh0YWJsZSkgPT4ge1xuICAgICAgICBjb25zdCBtb2RlbCA9IG1vZGVscy5maW5kKChtKSA9PiBtLnNvdXJjZVRhYmxlTmFtZSA9PT0gdGFibGUudGFibGVOYW1lKTtcbiAgICAgICAgaWYgKCFtb2RlbCkge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgTW9kZWwgbm90IGZvdW5kLCB0YWJsZSBuYW1lOiAke3RhYmxlLnRhYmxlTmFtZX1gKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IG1vZGVsLnByb3BlcnRpZXNcbiAgICAgICAgICA/IHsgLi4uSlNPTi5wYXJzZShtb2RlbC5wcm9wZXJ0aWVzKSwgLi4udGFibGUucHJvcGVydGllcyB9XG4gICAgICAgICAgOiB7IC4uLnRhYmxlLnByb3BlcnRpZXMgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5tb2RlbFJlcG9zaXRvcnkudXBkYXRlT25lKG1vZGVsLmlkLCB7XG4gICAgICAgICAgZGlzcGxheU5hbWU6IHRhYmxlLnByb3BlcnRpZXM/LmRpc3BsYXlOYW1lIHx8IG1vZGVsLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHByb3BlcnRpZXM6IEpTT04uc3RyaW5naWZ5KHByb3BlcnRpZXMpLFxuICAgICAgICB9KTtcbiAgICAgIH0pLFxuICAgIF0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGJhdGNoVXBkYXRlQ29sdW1uUHJvcGVydGllcyh0YWJsZXM6IFNhbXBsZURhdGFzZXRUYWJsZVtdKSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdzdGFydCBiYXRjaCB1cGRhdGUgY29sdW1uIGRlc2NyaXB0aW9uJyk7XG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgdGhpcy5wcm9qZWN0U2VydmljZS5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMubW9kZWxSZXBvc2l0b3J5LmZpbmRBbGxCeSh7XG4gICAgICBwcm9qZWN0SWQ6IGlkLFxuICAgIH0pO1xuICAgIGNvbnN0IHNvdXJjZUNvbHVtbnMgPVxuICAgICAgKGF3YWl0IHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmZpbmRDb2x1bW5zQnlNb2RlbElkcyhcbiAgICAgICAgbW9kZWxzLm1hcCgobSkgPT4gbS5pZCksXG4gICAgICApKSBhcyBNb2RlbENvbHVtbltdO1xuICAgIGNvbnN0IHRyYW5zZm9ybWVkQ29sdW1ucyA9IHRhYmxlcy5yZWR1Y2UoKGFjYywgdGFibGUpID0+IHtcbiAgICAgIGNvbnN0IGNvbHVtbnMgPSB0YWJsZS5jb2x1bW5zPy5tYXAoKGNvbHVtbikgPT4ge1xuICAgICAgICByZXR1cm4geyAuLi5jb2x1bW4sIHRhYmxlTmFtZTogdGFibGUudGFibGVOYW1lIH07XG4gICAgICB9KTtcbiAgICAgIGlmIChjb2x1bW5zKSB7XG4gICAgICAgIGFjYy5wdXNoKC4uLmNvbHVtbnMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCBbXSk7XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0cmFuc2Zvcm1lZENvbHVtbnMubWFwKGFzeW5jIChjb2x1bW4pID0+IHtcbiAgICAgICAgaWYgKCFjb2x1bW4ucHJvcGVydGllcykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbCA9IG1vZGVscy5maW5kKFxuICAgICAgICAgIChtKSA9PiBtLnNvdXJjZVRhYmxlTmFtZSA9PT0gY29sdW1uLnRhYmxlTmFtZSxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc291cmNlQ29sdW1uID0gc291cmNlQ29sdW1ucy5maW5kKFxuICAgICAgICAgIChzb3VyY2VDb2x1bW4pID0+XG4gICAgICAgICAgICBzb3VyY2VDb2x1bW4ubW9kZWxJZCA9PT0gbW9kZWwuaWQgJiZcbiAgICAgICAgICAgIHNvdXJjZUNvbHVtbi5zb3VyY2VDb2x1bW5OYW1lID09PSBjb2x1bW4ubmFtZSxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFzb3VyY2VDb2x1bW4pIHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgICBgQ29sdW1uIG5vdCBmb3VuZCwgdGFibGUgbmFtZTogJHtjb2x1bW4udGFibGVOYW1lfSwgY29sdW1uIG5hbWU6ICR7Y29sdW1uLm5hbWV9YCxcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gc291cmNlQ29sdW1uLnByb3BlcnRpZXNcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgLi4uSlNPTi5wYXJzZShzb3VyY2VDb2x1bW4ucHJvcGVydGllcyksXG4gICAgICAgICAgICAgIC4uLmNvbHVtbi5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDogeyBkZXNjcmlwdGlvbjogY29sdW1uLmRlc2NyaXB0aW9uIH07XG4gICAgICAgIGF3YWl0IHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5LnVwZGF0ZU9uZShzb3VyY2VDb2x1bW4uaWQsIHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiBKU09OLnN0cmluZ2lmeShwcm9wZXJ0aWVzKSxcbiAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICBdKTtcbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZVJlZmVyZW5jZU5hbWUoZGF0YTogR2VuZXJhdGVSZWZlcmVuY2VOYW1lRGF0YSk6IHN0cmluZyB7XG4gICAgY29uc3QgeyBzb3VyY2VUYWJsZU5hbWUsIGV4aXN0ZWRSZWZlcmVuY2VOYW1lcyB9ID0gZGF0YTtcbiAgICBpZiAoIWV4aXN0ZWRSZWZlcmVuY2VOYW1lcy5pbmNsdWRlcyhzb3VyY2VUYWJsZU5hbWUpKSB7XG4gICAgICByZXR1cm4gc291cmNlVGFibGVOYW1lO1xuICAgIH1cbiAgICByZXR1cm4gYCR7c291cmNlVGFibGVOYW1lfV8ke2V4aXN0ZWRSZWZlcmVuY2VOYW1lcy5sZW5ndGggKyAxfWA7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2F2ZVJlbGF0aW9ucyhyZWxhdGlvbnM6IFJlbGF0aW9uRGF0YVtdKSB7XG4gICAgaWYgKGlzRW1wdHkocmVsYXRpb25zKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCB0aGlzLnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG5cbiAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLm1vZGVsUmVwb3NpdG9yeS5maW5kQWxsQnkoe1xuICAgICAgcHJvamVjdElkOiBpZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbHVtbklkcyA9IHJlbGF0aW9uc1xuICAgICAgLm1hcCgoeyBmcm9tQ29sdW1uSWQsIHRvQ29sdW1uSWQgfSkgPT4gW2Zyb21Db2x1bW5JZCwgdG9Db2x1bW5JZF0pXG4gICAgICAuZmxhdCgpO1xuICAgIGNvbnN0IGNvbHVtbnMgPVxuICAgICAgYXdhaXQgdGhpcy5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeUlkcyhjb2x1bW5JZHMpO1xuICAgIGNvbnN0IHJlbGF0aW9uVmFsdWVzID0gcmVsYXRpb25zLm1hcCgocmVsYXRpb24pID0+IHtcbiAgICAgIGNvbnN0IGZyb21Db2x1bW4gPSBjb2x1bW5zLmZpbmQoXG4gICAgICAgIChjb2x1bW4pID0+IGNvbHVtbi5pZCA9PT0gcmVsYXRpb24uZnJvbUNvbHVtbklkLFxuICAgICAgKTtcbiAgICAgIGlmICghZnJvbUNvbHVtbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbHVtbiBub3QgZm91bmQsIGNvbHVtbiBJZCAke3JlbGF0aW9uLmZyb21Db2x1bW5JZH1gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRvQ29sdW1uID0gY29sdW1ucy5maW5kKFxuICAgICAgICAoY29sdW1uKSA9PiBjb2x1bW4uaWQgPT09IHJlbGF0aW9uLnRvQ29sdW1uSWQsXG4gICAgICApO1xuICAgICAgaWYgKCF0b0NvbHVtbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbHVtbiBub3QgZm91bmQsIGNvbHVtbiBJZCAgJHtyZWxhdGlvbi50b0NvbHVtbklkfWApO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVsYXRpb25OYW1lID0gdGhpcy5nZW5lcmF0ZVJlbGF0aW9uTmFtZShyZWxhdGlvbiwgbW9kZWxzLCBjb2x1bW5zKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHByb2plY3RJZDogaWQsXG4gICAgICAgIG5hbWU6IHJlbGF0aW9uTmFtZSxcbiAgICAgICAgZnJvbUNvbHVtbklkOiByZWxhdGlvbi5mcm9tQ29sdW1uSWQsXG4gICAgICAgIHRvQ29sdW1uSWQ6IHJlbGF0aW9uLnRvQ29sdW1uSWQsXG4gICAgICAgIGpvaW5UeXBlOiByZWxhdGlvbi50eXBlLFxuICAgICAgICBwcm9wZXJ0aWVzOiByZWxhdGlvbi5kZXNjcmlwdGlvblxuICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoeyBkZXNjcmlwdGlvbjogcmVsYXRpb24uZGVzY3JpcHRpb24gfSlcbiAgICAgICAgICA6IG51bGwsXG4gICAgICB9IGFzIFBhcnRpYWw8UmVsYXRpb24+O1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2F2ZWRSZWxhdGlvbnMgPVxuICAgICAgYXdhaXQgdGhpcy5yZWxhdGlvblJlcG9zaXRvcnkuY3JlYXRlTWFueShyZWxhdGlvblZhbHVlcyk7XG5cbiAgICByZXR1cm4gc2F2ZWRSZWxhdGlvbnM7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlUmVsYXRpb24ocmVsYXRpb246IFJlbGF0aW9uRGF0YSk6IFByb21pc2U8UmVsYXRpb24+IHtcbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCB0aGlzLnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgbW9kZWxJZHMgPSBbcmVsYXRpb24uZnJvbU1vZGVsSWQsIHJlbGF0aW9uLnRvTW9kZWxJZF07XG4gICAgY29uc3QgbW9kZWxzID0gYXdhaXQgdGhpcy5tb2RlbFJlcG9zaXRvcnkuZmluZEFsbEJ5SWRzKG1vZGVsSWRzKTtcbiAgICBjb25zdCBjb2x1bW5JZHMgPSBbcmVsYXRpb24uZnJvbUNvbHVtbklkLCByZWxhdGlvbi50b0NvbHVtbklkXTtcbiAgICBjb25zdCBjb2x1bW5zID1cbiAgICAgIGF3YWl0IHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmZpbmRDb2x1bW5zQnlJZHMoY29sdW1uSWRzKTtcblxuICAgIGNvbnN0IHsgdmFsaWQsIG1lc3NhZ2UgfSA9IGF3YWl0IHRoaXMudmFsaWRhdGVDcmVhdGVSZWxhdGlvbihcbiAgICAgIG1vZGVscyxcbiAgICAgIGNvbHVtbnMsXG4gICAgICByZWxhdGlvbixcbiAgICApO1xuICAgIGlmICghdmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgY29uc3QgcmVsYXRpb25OYW1lID0gdGhpcy5nZW5lcmF0ZVJlbGF0aW9uTmFtZShyZWxhdGlvbiwgbW9kZWxzLCBjb2x1bW5zKTtcbiAgICBjb25zdCBzYXZlZFJlbGF0aW9uID0gYXdhaXQgdGhpcy5yZWxhdGlvblJlcG9zaXRvcnkuY3JlYXRlT25lKHtcbiAgICAgIHByb2plY3RJZDogaWQsXG4gICAgICBuYW1lOiByZWxhdGlvbk5hbWUsXG4gICAgICBmcm9tQ29sdW1uSWQ6IHJlbGF0aW9uLmZyb21Db2x1bW5JZCxcbiAgICAgIHRvQ29sdW1uSWQ6IHJlbGF0aW9uLnRvQ29sdW1uSWQsXG4gICAgICBqb2luVHlwZTogcmVsYXRpb24udHlwZSxcbiAgICB9KTtcbiAgICByZXR1cm4gc2F2ZWRSZWxhdGlvbjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB1cGRhdGVSZWxhdGlvbihcbiAgICByZWxhdGlvbjogVXBkYXRlUmVsYXRpb25EYXRhLFxuICAgIGlkOiBudW1iZXIsXG4gICk6IFByb21pc2U8UmVsYXRpb24+IHtcbiAgICBjb25zdCB1cGRhdGVkUmVsYXRpb24gPSBhd2FpdCB0aGlzLnJlbGF0aW9uUmVwb3NpdG9yeS51cGRhdGVPbmUoaWQsIHtcbiAgICAgIGpvaW5UeXBlOiByZWxhdGlvbi50eXBlLFxuICAgIH0pO1xuICAgIHJldHVybiB1cGRhdGVkUmVsYXRpb247XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVsZXRlUmVsYXRpb24oaWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHJlbGF0aW9uID0gYXdhaXQgdGhpcy5yZWxhdGlvblJlcG9zaXRvcnkuZmluZE9uZUJ5KHsgaWQgfSk7XG4gICAgaWYgKCFyZWxhdGlvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWxhdGlvbiBub3QgZm91bmQnKTtcbiAgICB9XG4gICAgY29uc3QgY2FsY3VsYXRlZEZpZWxkcyA9IGF3YWl0IHRoaXMuZ2V0Q2FsY3VsYXRlZEZpZWxkQnlSZWxhdGlvbihpZCk7XG4gICAgaWYgKGNhbGN1bGF0ZWRGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gZGVsZXRlIHJlbGF0ZWQgY2FsY3VsYXRlZCBmaWVsZHNcbiAgICAgIGF3YWl0IHRoaXMubW9kZWxDb2x1bW5SZXBvc2l0b3J5LmRlbGV0ZU1hbnkoXG4gICAgICAgIGNhbGN1bGF0ZWRGaWVsZHMubWFwKChmKSA9PiBmLmlkKSxcbiAgICAgICk7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMucmVsYXRpb25SZXBvc2l0b3J5LmRlbGV0ZU9uZShpZCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0Q2FsY3VsYXRlZEZpZWxkQnlSZWxhdGlvbihcbiAgICByZWxhdGlvbklkOiBudW1iZXIsXG4gICk6IFByb21pc2U8TW9kZWxDb2x1bW5bXT4ge1xuICAgIGNvbnN0IGNhbGN1bGF0ZWRGaWVsZHMgPSBhd2FpdCB0aGlzLm1vZGVsQ29sdW1uUmVwb3NpdG9yeS5maW5kQWxsQnkoe1xuICAgICAgaXNDYWxjdWxhdGVkOiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnN0IHJlbGF0ZWRDYWxjdWxhdGVkRmllbGRzID0gY2FsY3VsYXRlZEZpZWxkcy5yZWR1Y2UoKGFjYywgZmllbGQpID0+IHtcbiAgICAgIGNvbnN0IGxpbmVhZ2UgPSBKU09OLnBhcnNlKGZpZWxkLmxpbmVhZ2UpO1xuICAgICAgY29uc3QgcmVsYXRpb25JZHMgPSBsaW5lYWdlLnNsaWNlKDAsIGxpbmVhZ2UubGVuZ3RoIC0gMSk7XG4gICAgICBpZiAocmVsYXRpb25JZHMuaW5jbHVkZXMocmVsYXRpb25JZCkpIHtcbiAgICAgICAgYWNjLnB1c2goZmllbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIHJlbGF0ZWRDYWxjdWxhdGVkRmllbGRzO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkTmFtaW5nKFxuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmcsXG4gICAgbW9kZWxJZDogbnVtYmVyLFxuICAgIGNvbHVtbklkPzogbnVtYmVyLFxuICApOiBQcm9taXNlPFZhbGlkYXRlQ2FsY3VsYXRlZEZpZWxkUmVzcG9uc2U+IHtcbiAgICAvLyBvbmx5IGFsbG93IHVwcGVyY2FzZS9sb3dlcmNhc2UgZW5nbGlzaCwgbnVtYmVycywgc3ludGF4ZXMgaW4gdGhlIGZpcnN0IHJhdyBvZiBrZXlib2FyZCwge30sIFtdLCAnLCBcIiwgLCwgLlxuICAgIGNvbnN0IHZhbGlkYXRpb25SZXMgPSB2YWxpZGF0ZURpc3BsYXlOYW1lKGRpc3BsYXlOYW1lKTtcbiAgICBpZiAoIXZhbGlkYXRpb25SZXMudmFsaWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogdmFsaWRhdGlvblJlcy5tZXNzYWdlIHx8ICdJbnZhbGlkIENhbGN1bGF0ZWQgZmllbGQgbmFtZScsXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIGNhbiBub3QgZHVwbGljYXRlZCB3aXRoIGV4aXN0ZWQgY29sdW1uXG4gICAgY29uc3QgcmVmZXJlbmNlTmFtZSA9XG4gICAgICB0aGlzLmdlbmVyYXRlUmVmZXJlbmNlTmFtZUZyb21EaXNwbGF5TmFtZShkaXNwbGF5TmFtZSk7XG4gICAgbGV0IGV4aXN0ZWRDb2x1bW5zID0gYXdhaXQgdGhpcy5tb2RlbENvbHVtblJlcG9zaXRvcnkuZmluZENvbHVtbnNCeU1vZGVsSWRzKFxuICAgICAgW21vZGVsSWRdLFxuICAgICk7XG4gICAgaWYgKGNvbHVtbklkKSB7XG4gICAgICBleGlzdGVkQ29sdW1ucyA9IGV4aXN0ZWRDb2x1bW5zLmZpbHRlcihcbiAgICAgICAgKGNvbHVtbikgPT4gY29sdW1uLmlkICE9PSBjb2x1bW5JZCxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGV4aXN0ZWRDb2x1bW5zLmZpbmQoKGNvbHVtbikgPT4gY29sdW1uLnJlZmVyZW5jZU5hbWUgPT09IHJlZmVyZW5jZU5hbWUpXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBUaGUgZ2VuZXJhdGVkIGNhbGN1bGF0ZWQgZmllbGQgbmFtZSBcIiR7cmVmZXJlbmNlTmFtZX1cIiBpcyBkdXBsaWNhdGVkIHdpdGggZXhpc3RlZCBjb2x1bW4sIHBsZWFzZSBjaGFuZ2UgdGhlIG5hbWUgYW5kIHRyeSBhZ2FpbmAsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGRlbGV0ZUFsbFZpZXdzQnlQcm9qZWN0SWQocHJvamVjdElkOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBkZWxldGUgYWxsIHZpZXdzXG4gICAgYXdhaXQgdGhpcy52aWV3UmVwb3NpdG9yeS5kZWxldGVBbGxCeSh7IHByb2plY3RJZCB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZWxldGVBbGxNb2RlbHNCeVByb2plY3RJZChwcm9qZWN0SWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIGRlbGV0ZSBhbGwgcmVsYXRpb25zXG4gICAgYXdhaXQgdGhpcy5yZWxhdGlvblJlcG9zaXRvcnkuZGVsZXRlQWxsQnkoeyBwcm9qZWN0SWQgfSk7XG5cbiAgICAvLyBkZWxldGUgYWxsIG1vZGVsc1xuICAgIGF3YWl0IHRoaXMubW9kZWxSZXBvc2l0b3J5LmRlbGV0ZUFsbEJ5KHsgcHJvamVjdElkIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJlZmVyZW5jZU5hbWVGcm9tRGlzcGxheU5hbWUoZGlzcGxheU5hbWU6IHN0cmluZykge1xuICAgIC8vIHJlcGxhY2UgYWxsIHN5bnRheGVzIHRoYXQgW2luIHRoZSBmaXJzdCByYXcgb2Yga2V5Ym9hcmQsIHt9LCBbXSwgJywgXCIsICwsIC4gXSB3aXRoIF9cbiAgICByZXR1cm4gcmVwbGFjZUFsbG93YWJsZVN5bnRheChkaXNwbGF5TmFtZSk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlUmVsYXRpb25OYW1lKFxuICAgIHJlbGF0aW9uOiBSZWxhdGlvbkRhdGEsXG4gICAgbW9kZWxzOiBNb2RlbFtdLFxuICAgIGNvbHVtbnM6IE1vZGVsQ29sdW1uW10sXG4gICkge1xuICAgIGNvbnN0IGZyb21Nb2RlbCA9IG1vZGVscy5maW5kKChtKSA9PiBtLmlkID09PSByZWxhdGlvbi5mcm9tTW9kZWxJZCk7XG4gICAgY29uc3QgdG9Nb2RlbCA9IG1vZGVscy5maW5kKChtKSA9PiBtLmlkID09PSByZWxhdGlvbi50b01vZGVsSWQpO1xuICAgIGlmICghZnJvbU1vZGVsIHx8ICF0b01vZGVsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZGVsIG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGZyb21Db2x1bW4gPSBjb2x1bW5zLmZpbmQoXG4gICAgICAoY29sdW1uKSA9PiBjb2x1bW4uaWQgPT09IHJlbGF0aW9uLmZyb21Db2x1bW5JZCxcbiAgICApO1xuICAgIGNvbnN0IHRvQ29sdW1uID0gY29sdW1ucy5maW5kKFxuICAgICAgKGNvbHVtbikgPT4gY29sdW1uLmlkID09PSByZWxhdGlvbi50b0NvbHVtbklkLFxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgY2FwaXRhbGl6ZShmcm9tTW9kZWwuc291cmNlVGFibGVOYW1lKSArXG4gICAgICBjYXBpdGFsaXplKGZyb21Db2x1bW4ucmVmZXJlbmNlTmFtZSkgK1xuICAgICAgY2FwaXRhbGl6ZSh0b01vZGVsLnNvdXJjZVRhYmxlTmFtZSkgK1xuICAgICAgY2FwaXRhbGl6ZSh0b0NvbHVtbi5yZWZlcmVuY2VOYW1lKVxuICAgICk7XG4gIH1cblxuICAvKiogV2UgY3VycmVudGx5IHN1cHBvcnQgZXhwcmVzc2lvbiBiZWxvdywgcmlnaHQgc2lkZSBpcyB0aGUgcmV0dXJuIHR5cGUgb2YgdGhlIGNhbGN1bGF0ZWQgZmllbGQuXG4gIEFnZ3JlZ2F0aW9uc1xuICAgIC0gKiphdmcoKioqeCoqKikqKsKg4oaSwqBkb3VibGVcbiAgICAtICoqY291bnQoKioqeCoqKikqKsKg4oaSwqBiaWdpbnRcbiAgICAtICoqbWF4KCoqKngqKiopKirCoOKGksKgW3NhbWXCoGFzwqBpbnB1dF1cbiAgICAtICoqbWluKCoqKngqKiopKirCoOKGksKgW3NhbWXCoGFzwqBpbnB1dF1cbiAgICAtICoqc3VtKCoqKngqKiopKirCoOKGksKgW3NhbWXCoGFzwqBpbnB1dF1cbiAgTWF0aCBmdW5jdGlvbnNcbiAgICAtICoqYWJzKCoqKngqKiopKirCoOKGksKgW3NhbWXCoGFzwqBpbnB1dF1cbiAgICAtICoqY2JydCgqKip4KioqKSoqwqDihpLCoGRvdWJsZVxuICAgIC0gKipjZWlsKCoqKngqKiopKirCoOKGksKgW3NhbWXCoGFzwqBpbnB1dF1cbiAgICAtICoqZXhwKCoqKngqKiopKirCoOKGksKgZG91YmxlXG4gICAgLSAqKmZsb29yKCoqKngqKiopKirCoOKGksKgW3NhbWXCoGFzwqBpbnB1dF1cbiAgICAtICoqbG4oKioqeCoqKikqKsKg4oaSwqBkb3VibGVcbiAgICAtICoqbG9nMTAoKioqeCoqKikqKsKg4oaSwqBkb3VibGVcbiAgICAtICoqcm91bmQoKioqeCoqKikqKsKg4oaSwqBbc2FtZcKgYXPCoGlucHV0XVxuICAgIC0gKipzaWduKCoqKngqKiopKirCoOKGksKgW3NhbWXCoGFzwqBpbnB1dF1cblxuICBTdHJpbmcgZnVuY3Rpb25zXG4gICAgLSAqKmxlbmd0aCgqKipzdHJpbmcqKiopKirCoOKGksKgYmlnaW50XG4gICAgLSAqKnJldmVyc2UoKipzdHJpbmcqKikqKsKg4oaSwqB2YXJiaW5hcnlcbiAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbmZlckNhbGN1bGF0ZWRGaWVsZERhdGFUeXBlKFxuICAgIGV4cHJlc3Npb246IEV4cHJlc3Npb25OYW1lLFxuICAgIGlucHV0RmllbGRJZDogbnVtYmVyLFxuICApIHtcbiAgICBsZXQgdHlwZSA9IG51bGw7XG4gICAgc3dpdGNoIChleHByZXNzaW9uKSB7XG4gICAgICBjYXNlIEV4cHJlc3Npb25OYW1lLkNFSUw6XG4gICAgICBjYXNlIEV4cHJlc3Npb25OYW1lLkZMT09SOlxuICAgICAgY2FzZSBFeHByZXNzaW9uTmFtZS5ST1VORDpcbiAgICAgIGNhc2UgRXhwcmVzc2lvbk5hbWUuU0lHTjpcbiAgICAgIGNhc2UgRXhwcmVzc2lvbk5hbWUuU1VNOlxuICAgICAgY2FzZSBFeHByZXNzaW9uTmFtZS5NQVg6XG4gICAgICBjYXNlIEV4cHJlc3Npb25OYW1lLk1JTjpcbiAgICAgIGNhc2UgRXhwcmVzc2lvbk5hbWUuQUJTOlxuICAgICAgICB0eXBlID0gYXdhaXQgdGhpcy5nZXRGaWVsZERhdGFUeXBlKGlucHV0RmllbGRJZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFeHByZXNzaW9uTmFtZS5DQlJUOlxuICAgICAgY2FzZSBFeHByZXNzaW9uTmFtZS5FWFA6XG4gICAgICBjYXNlIEV4cHJlc3Npb25OYW1lLkFWRzpcbiAgICAgIGNhc2UgRXhwcmVzc2lvbk5hbWUuTE46XG4gICAgICBjYXNlIEV4cHJlc3Npb25OYW1lLkxPRzEwOlxuICAgICAgICB0eXBlID0gJ0RPVUJMRSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFeHByZXNzaW9uTmFtZS5DT1VOVDpcbiAgICAgIGNhc2UgRXhwcmVzc2lvbk5hbWUuTEVOR1RIOlxuICAgICAgICB0eXBlID0gJ0JJR0lOVCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFeHByZXNzaW9uTmFtZS5SRVZFUlNFOlxuICAgICAgICB0eXBlID0gJ1ZBUkJJTkFSWSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBleHByZXNzaW9uJyk7XG4gICAgfVxuICAgIHJldHVybiB0eXBlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRGaWVsZERhdGFUeXBlKGZpZWxkSWQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgZmllbGQgPSBhd2FpdCB0aGlzLm1vZGVsQ29sdW1uUmVwb3NpdG9yeS5maW5kT25lQnkoeyBpZDogZmllbGRJZCB9KTtcbiAgICBpZiAoIWZpZWxkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpZWxkIG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gZmllbGQudHlwZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tDYWxjdWxhdGVkRmllbGRDYW5RdWVyeShcbiAgICBtb2RlbElkOiBudW1iZXIsXG4gICAgbW9kZWxOYW1lOiBzdHJpbmcsXG4gICAgZGF0YTogQ2hlY2tDYWxjdWxhdGVkRmllbGRDYW5RdWVyeURhdGEsXG4gICkge1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCB0aGlzLnByb2plY3RTZXJ2aWNlLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgY29uc3QgeyBtZGxCdWlsZGVyIH0gPSBhd2FpdCB0aGlzLm1kbFNlcnZpY2UubWFrZUN1cnJlbnRNb2RlbE1ETCgpO1xuICAgIGNvbnN0IHsgcmVmZXJlbmNlTmFtZSwgZXhwcmVzc2lvbiwgbGluZWFnZSB9ID0gZGF0YTtcbiAgICBjb25zdCBpbnB1dEZpZWxkSWQgPSBsaW5lYWdlW2xpbmVhZ2UubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgZGF0YVR5cGUgPSBhd2FpdCB0aGlzLmluZmVyQ2FsY3VsYXRlZEZpZWxkRGF0YVR5cGUoXG4gICAgICBleHByZXNzaW9uLFxuICAgICAgaW5wdXRGaWVsZElkLFxuICAgICk7XG5cbiAgICAvLyBhZGQgdGVtcG9yYXJ5IGNhbGN1bGF0ZWQgZmllbGRcbiAgICBjb25zdCBtb2RlbENvbHVtbiA9IHtcbiAgICAgIGlkOiA5OTk5OTk5OSxcbiAgICAgIG1vZGVsSWQsXG4gICAgICBkaXNwbGF5TmFtZTogcmVmZXJlbmNlTmFtZSxcbiAgICAgIHNvdXJjZUNvbHVtbk5hbWU6IHJlZmVyZW5jZU5hbWUsXG4gICAgICByZWZlcmVuY2VOYW1lOiByZWZlcmVuY2VOYW1lLFxuICAgICAgdHlwZTogZGF0YVR5cGUsXG4gICAgICBpc0NhbGN1bGF0ZWQ6IHRydWUsXG4gICAgICBpc1BrOiBmYWxzZSxcbiAgICAgIG5vdE51bGw6IGZhbHNlLFxuICAgICAgYWdncmVnYXRpb246IGV4cHJlc3Npb24sXG4gICAgICBsaW5lYWdlOiBKU09OLnN0cmluZ2lmeShsaW5lYWdlKSxcbiAgICAgIHByb3BlcnRpZXM6IEpTT04uc3RyaW5naWZ5KHsgZGVzY3JpcHRpb246ICcnIH0pLFxuICAgIH0gYXMgTW9kZWxDb2x1bW47XG4gICAgbWRsQnVpbGRlci5pbnNlcnRDYWxjdWxhdGVkRmllbGQobW9kZWxOYW1lLCBtb2RlbENvbHVtbik7XG4gICAgY29uc3QgbWFuaWZlc3QgPSBtZGxCdWlsZGVyLmdldE1hbmlmZXN0KCk7XG5cbiAgICAvLyBmaW5kIHRoZSBjYWxjdWxhdGVkIGZpZWxkIGluIG1hbmlmZXN0XG4gICAgY29uc3QgY2FsY3VsYXRlZEZpZWxkID0gbWFuaWZlc3QubW9kZWxzXG4gICAgICAuZmluZCgobSkgPT4gbS5uYW1lID09PSBtb2RlbE5hbWUpXG4gICAgICA/LmNvbHVtbnMuZmluZCgoYykgPT4gYy5uYW1lID09PSByZWZlcmVuY2VOYW1lKTtcblxuICAgIGxvZ2dlci5kZWJ1ZyhgQ2FsY3VsYXRlZCBmaWVsZCBNREw6ICR7SlNPTi5zdHJpbmdpZnkoY2FsY3VsYXRlZEZpZWxkKX1gKTtcblxuICAgIC8vIHZhbGlkYXRlIGNhbGN1bGF0ZWQgZmllbGQgY2FuIHF1ZXJ5XG4gICAgY29uc3QgZGF0YVNvdXJjZSA9IHByb2plY3QudHlwZTtcbiAgICBpZiAoZGF0YVNvdXJjZSA9PT0gRGF0YVNvdXJjZU5hbWUuRFVDS0RCKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy53cmVuRW5naW5lQWRhcHRvci52YWxpZGF0ZUNvbHVtbklzVmFsaWQoXG4gICAgICAgIG1hbmlmZXN0LFxuICAgICAgICBtb2RlbE5hbWUsXG4gICAgICAgIHJlZmVyZW5jZU5hbWUsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwYXJhbWV0ZXJzID0geyBtb2RlbE5hbWUsIGNvbHVtbk5hbWU6IHJlZmVyZW5jZU5hbWUgfTtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnF1ZXJ5U2VydmljZS52YWxpZGF0ZShcbiAgICAgICAgcHJvamVjdCxcbiAgICAgICAgVmFsaWRhdGlvblJ1bGVzLkNPTFVNTl9JU19WQUxJRCxcbiAgICAgICAgbWFuaWZlc3QsXG4gICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVDcmVhdGVSZWxhdGlvbihcbiAgICBtb2RlbHM6IE1vZGVsW10sXG4gICAgY29sdW1uczogTW9kZWxDb2x1bW5bXSxcbiAgICByZWxhdGlvbjogUmVsYXRpb25EYXRhLFxuICApIHtcbiAgICBjb25zdCB7IGZyb21Nb2RlbElkLCBmcm9tQ29sdW1uSWQsIHRvTW9kZWxJZCwgdG9Db2x1bW5JZCB9ID0gcmVsYXRpb247XG4gICAgY29uc3QgZnJvbU1vZGVsID0gbW9kZWxzLmZpbmQoKG0pID0+IG0uaWQgPT09IGZyb21Nb2RlbElkKTtcbiAgICBjb25zdCB0b01vZGVsID0gbW9kZWxzLmZpbmQoKG0pID0+IG0uaWQgPT09IHRvTW9kZWxJZCk7XG4gICAgLy8gbW9kZWwgc2hvdWxkIGV4aXN0XG4gICAgaWYgKCFmcm9tTW9kZWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogYE1vZGVsIG5vdCBmb3VuZDogZnJvbU1vZGVsSWQgJHtmcm9tTW9kZWxJZH1gLFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCF0b01vZGVsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBNb2RlbCBub3QgZm91bmQ6IHRvTW9kZWxJZCAke3RvTW9kZWxJZH1gLFxuICAgICAgfTtcbiAgICB9XG4gICAgLy8gY29sdW1uIHNob3VsZCBleGlzdFxuICAgIGNvbnN0IGZyb21Db2x1bW4gPSBjb2x1bW5zLmZpbmQoKGNvbHVtbikgPT4gY29sdW1uLmlkID09PSBmcm9tQ29sdW1uSWQpO1xuICAgIGNvbnN0IHRvQ29sdW1uID0gY29sdW1ucy5maW5kKChjb2x1bW4pID0+IGNvbHVtbi5pZCA9PT0gdG9Db2x1bW5JZCk7XG4gICAgaWYgKCFmcm9tQ29sdW1uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBDb2x1bW4gbm90IGZvdW5kLCBjb2x1bW4gSWQgJHtmcm9tQ29sdW1uSWR9YCxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghdG9Db2x1bW4pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogYENvbHVtbiBub3QgZm91bmQsIGNvbHVtbiBJZCAke3RvQ29sdW1uSWR9YCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gY29sdW1uIHNob3VsZCBiZWxvbmcgdG8gdGhlIG1vZGVsXG4gICAgaWYgKHRvQ29sdW1uLm1vZGVsSWQgIT0gdG9Nb2RlbElkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBDb2x1bW4gbm90IGJlbG9uZyB0byB0aGUgbW9kZWwsIGNvbHVtbiBJZCAke3RvQ29sdW1uSWR9YCxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChmcm9tQ29sdW1uLm1vZGVsSWQgIT0gZnJvbU1vZGVsSWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogYENvbHVtbiBub3QgYmVsb25nIHRvIHRoZSBtb2RlbCwgY29sdW1uIElkICR7ZnJvbUNvbHVtbklkfWAsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGV4aXN0ZWRSZWxhdGlvbnMgPVxuICAgICAgYXdhaXQgdGhpcy5yZWxhdGlvblJlcG9zaXRvcnkuZmluZEV4aXN0ZWRSZWxhdGlvbkJldHdlZW5Nb2RlbHMocmVsYXRpb24pO1xuXG4gICAgaWYgKGV4aXN0ZWRSZWxhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnVGhpcyByZWxhdGlvbnNoaXAgYWxyZWFkeSBleGlzdHMuJyxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdldExvZ2dlciIsInBhcnNlSnNvbiIsInJlcGxhY2VBbGxvd2FibGVTeW50YXgiLCJ2YWxpZGF0ZURpc3BsYXlOYW1lIiwiRXhwcmVzc2lvbk5hbWUiLCJWYWxpZGF0aW9uUnVsZXMiLCJpc0VtcHR5IiwiY2FwaXRhbGl6ZSIsIkVycm9ycyIsIkRhdGFTb3VyY2VOYW1lIiwibG9nZ2VyIiwibGV2ZWwiLCJNb2RlbFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsInByb2plY3RTZXJ2aWNlIiwibW9kZWxSZXBvc2l0b3J5IiwibW9kZWxDb2x1bW5SZXBvc2l0b3J5IiwicmVsYXRpb25SZXBvc2l0b3J5Iiwidmlld1JlcG9zaXRvcnkiLCJtZGxTZXJ2aWNlIiwid3JlbkVuZ2luZUFkYXB0b3IiLCJxdWVyeVNlcnZpY2UiLCJjcmVhdGVDYWxjdWxhdGVkRmllbGQiLCJkYXRhIiwibW9kZWxJZCIsIm5hbWUiLCJkaXNwbGF5TmFtZSIsImV4cHJlc3Npb24iLCJsaW5lYWdlIiwibG9nVGl0bGUiLCJtb2RlbCIsImZpbmRPbmVCeSIsImlkIiwiRXJyb3IiLCJ2YWxpZCIsIm1lc3NhZ2UiLCJ2YWxpZGF0ZUNhbGN1bGF0ZWRGaWVsZE5hbWluZyIsImRlYnVnIiwicmVmZXJlbmNlTmFtZSIsImdlbmVyYXRlUmVmZXJlbmNlTmFtZUZyb21EaXNwbGF5TmFtZSIsImNhblF1ZXJ5IiwiZXJyb3JNZXNzYWdlIiwiY2hlY2tDYWxjdWxhdGVkRmllbGRDYW5RdWVyeSIsInBhcnNlZEVycm9yTWVzc2FnZSIsImNyZWF0ZSIsIkdlbmVyYWxFcnJvckNvZGVzIiwiSU5WQUxJRF9DQUxDVUxBVEVEX0ZJRUxEIiwiY3VzdG9tTWVzc2FnZSIsIm9yaWdpbmFsRXJyb3IiLCJpbnB1dEZpZWxkSWQiLCJsZW5ndGgiLCJkYXRhVHlwZSIsImluZmVyQ2FsY3VsYXRlZEZpZWxkRGF0YVR5cGUiLCJjb2x1bW4iLCJjcmVhdGVPbmUiLCJzb3VyY2VDb2x1bW5OYW1lIiwidHlwZSIsImlzQ2FsY3VsYXRlZCIsImlzUGsiLCJub3ROdWxsIiwiYWdncmVnYXRpb24iLCJKU09OIiwic3RyaW5naWZ5IiwicHJvcGVydGllcyIsImRlc2NyaXB0aW9uIiwidXBkYXRlQ2FsY3VsYXRlZEZpZWxkIiwiZXJyb3IiLCJwYXJzZSIsInVwZGF0ZWRDb2x1bW4iLCJ1cGRhdGVPbmUiLCJ1cGRhdGVQcmltYXJ5S2V5cyIsInRhYmxlcyIsImdldEN1cnJlbnRQcm9qZWN0IiwibW9kZWxzIiwiZmluZEFsbEJ5IiwicHJvamVjdElkIiwidGFibGVUb1VwZGF0ZSIsImZpbHRlciIsInQiLCJwcmltYXJ5S2V5IiwidGFibGUiLCJmaW5kIiwibSIsInNvdXJjZVRhYmxlTmFtZSIsInRhYmxlTmFtZSIsInNldE1vZGVsUHJpbWFyeUtleSIsImJhdGNoVXBkYXRlTW9kZWxQcm9wZXJ0aWVzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImJhdGNoVXBkYXRlQ29sdW1uUHJvcGVydGllcyIsInNvdXJjZUNvbHVtbnMiLCJmaW5kQ29sdW1uc0J5TW9kZWxJZHMiLCJ0cmFuc2Zvcm1lZENvbHVtbnMiLCJyZWR1Y2UiLCJhY2MiLCJjb2x1bW5zIiwicHVzaCIsInNvdXJjZUNvbHVtbiIsImdlbmVyYXRlUmVmZXJlbmNlTmFtZSIsImV4aXN0ZWRSZWZlcmVuY2VOYW1lcyIsImluY2x1ZGVzIiwic2F2ZVJlbGF0aW9ucyIsInJlbGF0aW9ucyIsImNvbHVtbklkcyIsImZyb21Db2x1bW5JZCIsInRvQ29sdW1uSWQiLCJmbGF0IiwiZmluZENvbHVtbnNCeUlkcyIsInJlbGF0aW9uVmFsdWVzIiwicmVsYXRpb24iLCJmcm9tQ29sdW1uIiwidG9Db2x1bW4iLCJyZWxhdGlvbk5hbWUiLCJnZW5lcmF0ZVJlbGF0aW9uTmFtZSIsImpvaW5UeXBlIiwic2F2ZWRSZWxhdGlvbnMiLCJjcmVhdGVNYW55IiwiY3JlYXRlUmVsYXRpb24iLCJtb2RlbElkcyIsImZyb21Nb2RlbElkIiwidG9Nb2RlbElkIiwiZmluZEFsbEJ5SWRzIiwidmFsaWRhdGVDcmVhdGVSZWxhdGlvbiIsInNhdmVkUmVsYXRpb24iLCJ1cGRhdGVSZWxhdGlvbiIsInVwZGF0ZWRSZWxhdGlvbiIsImRlbGV0ZVJlbGF0aW9uIiwiY2FsY3VsYXRlZEZpZWxkcyIsImdldENhbGN1bGF0ZWRGaWVsZEJ5UmVsYXRpb24iLCJkZWxldGVNYW55IiwiZiIsImRlbGV0ZU9uZSIsInJlbGF0aW9uSWQiLCJyZWxhdGVkQ2FsY3VsYXRlZEZpZWxkcyIsImZpZWxkIiwicmVsYXRpb25JZHMiLCJzbGljZSIsImNvbHVtbklkIiwidmFsaWRhdGlvblJlcyIsImV4aXN0ZWRDb2x1bW5zIiwiZGVsZXRlQWxsVmlld3NCeVByb2plY3RJZCIsImRlbGV0ZUFsbEJ5IiwiZGVsZXRlQWxsTW9kZWxzQnlQcm9qZWN0SWQiLCJmcm9tTW9kZWwiLCJ0b01vZGVsIiwiQ0VJTCIsIkZMT09SIiwiUk9VTkQiLCJTSUdOIiwiU1VNIiwiTUFYIiwiTUlOIiwiQUJTIiwiZ2V0RmllbGREYXRhVHlwZSIsIkNCUlQiLCJFWFAiLCJBVkciLCJMTiIsIkxPRzEwIiwiQ09VTlQiLCJMRU5HVEgiLCJSRVZFUlNFIiwiZmllbGRJZCIsIm1vZGVsTmFtZSIsInByb2plY3QiLCJtZGxCdWlsZGVyIiwibWFrZUN1cnJlbnRNb2RlbE1ETCIsIm1vZGVsQ29sdW1uIiwiaW5zZXJ0Q2FsY3VsYXRlZEZpZWxkIiwibWFuaWZlc3QiLCJnZXRNYW5pZmVzdCIsImNhbGN1bGF0ZWRGaWVsZCIsImMiLCJkYXRhU291cmNlIiwiRFVDS0RCIiwidmFsaWRhdGVDb2x1bW5Jc1ZhbGlkIiwicGFyYW1ldGVycyIsImNvbHVtbk5hbWUiLCJ2YWxpZGF0ZSIsIkNPTFVNTl9JU19WQUxJRCIsImV4aXN0ZWRSZWxhdGlvbnMiLCJmaW5kRXhpc3RlZFJlbGF0aW9uQmV0d2Vlbk1vZGVscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/modelService.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/projectService.ts":
/*!******************************************************!*\
  !*** ./src/apollo/server/services/projectService.ts ***!
  \******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProjectService: () => (/* binding */ ProjectService)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _server_models_adaptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @server/models/adaptor */ \"(api)/./src/apollo/server/models/adaptor.ts\");\n/* harmony import */ var _dataSource__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dataSource */ \"(api)/./src/apollo/server/dataSource.ts\");\n/* harmony import */ var _askingService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./askingService */ \"(api)/./src/apollo/server/services/askingService.ts\");\n/* harmony import */ var _backgrounds__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../backgrounds */ \"(api)/./src/apollo/server/backgrounds/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../config */ \"(api)/./src/apollo/server/config.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_askingService__WEBPACK_IMPORTED_MODULE_6__, _backgrounds__WEBPACK_IMPORTED_MODULE_7__]);\n([_askingService__WEBPACK_IMPORTED_MODULE_6__, _backgrounds__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\nconst config = (0,_config__WEBPACK_IMPORTED_MODULE_8__.getConfig)();\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.getLogger)(\"ProjectService\");\nlogger.level = \"debug\";\nconst SENSITIVE_PROPERTY_NAME = new Set([\n    \"credentials\",\n    \"password\"\n]);\nclass ProjectService {\n    constructor({ projectRepository, metadataService, mdlService, wrenAIAdaptor, telemetry }){\n        this.projectRepository = projectRepository;\n        this.metadataService = metadataService;\n        this.mdlService = mdlService;\n        this.wrenAIAdaptor = wrenAIAdaptor;\n        this.projectRecommendQuestionBackgroundTracker = new _backgrounds__WEBPACK_IMPORTED_MODULE_7__.ProjectRecommendQuestionBackgroundTracker({\n            projectRepository,\n            telemetry,\n            wrenAIAdaptor\n        });\n    }\n    async generateProjectRecommendationQuestions() {\n        const project = await this.getCurrentProject();\n        if (!project) {\n            throw new Error(`Project not found`);\n        }\n        const { manifest } = await this.mdlService.makeCurrentModelMDL();\n        const recommendQuestionResult = await this.wrenAIAdaptor.generateRecommendationQuestions({\n            manifest,\n            ...this.getProjectRecommendationQuestionsConfig(project)\n        });\n        const updatedProject = await this.projectRepository.updateOne(project.id, {\n            queryId: recommendQuestionResult.queryId,\n            questionsStatus: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_4__.RecommendationQuestionStatus.GENERATING,\n            questions: [],\n            questionsError: null\n        });\n        if (!this.projectRecommendQuestionBackgroundTracker.isExist(updatedProject)) {\n            this.projectRecommendQuestionBackgroundTracker.addTask(updatedProject);\n        } else {\n            logger.debug(`Generate Project Recommendation Questions Task ${updatedProject.id} already exists, skip adding`);\n        }\n    }\n    async getProjectRecommendationQuestions() {\n        const project = await this.projectRepository.getCurrentProject();\n        if (!project) {\n            throw new Error(`Project not found`);\n        }\n        const result = {\n            status: _askingService__WEBPACK_IMPORTED_MODULE_6__.RecommendQuestionResultStatus.NOT_STARTED,\n            questions: [],\n            error: null\n        };\n        if (project.queryId) {\n            result.status = project.questionsStatus ? _askingService__WEBPACK_IMPORTED_MODULE_6__.RecommendQuestionResultStatus[project.questionsStatus] : result.status;\n            result.questions = project.questions || [];\n            result.error = project.questionsError;\n        }\n        return result;\n    }\n    async getCurrentProject() {\n        return await this.projectRepository.getCurrentProject();\n    }\n    async getProjectById(projectId) {\n        return await this.projectRepository.findOneBy({\n            id: projectId\n        });\n    }\n    async getProjectDataSourceTables(project, projectId) {\n        const usedProject = project ? project : projectId ? await this.getProjectById(projectId) : await this.getCurrentProject();\n        return await this.metadataService.listTables(usedProject);\n    }\n    async getProjectSuggestedConstraint(project, projectId) {\n        const usedProject = project ? project : projectId ? await this.getProjectById(projectId) : await this.getCurrentProject();\n        return await this.metadataService.listConstraints(usedProject);\n    }\n    async createProject(projectData) {\n        const projectValue = {\n            displayName: projectData.displayName,\n            type: projectData.type,\n            catalog: \"wrenai\",\n            schema: \"public\",\n            connectionInfo: (0,_dataSource__WEBPACK_IMPORTED_MODULE_5__.encryptConnectionInfo)(projectData.type, projectData.connectionInfo)\n        };\n        logger.debug(\"Creating project...\");\n        const project = await this.projectRepository.createOne(projectValue);\n        return project;\n    }\n    writeCredentialFile(credentials, persistCredentialDir) {\n        // create persist_credential_dir if not exists\n        if (!fs__WEBPACK_IMPORTED_MODULE_1__.existsSync(persistCredentialDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_1__.mkdirSync(persistCredentialDir, {\n                recursive: true\n            });\n        }\n        // file name will be the hash of the credentials, file path is current working directory\n        // convert credentials from base64 to string and replace all the matched \"\\n\" with \"\\\\n\",  there are many \\n in the \"private_key\" property\n        const credentialString = JSON.stringify(credentials);\n        const fileName = crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"md5\").update(credentialString).digest(\"hex\");\n        const filePath = path__WEBPACK_IMPORTED_MODULE_2___default().join(persistCredentialDir, `${fileName}.json`);\n        // check if file exists\n        if (fs__WEBPACK_IMPORTED_MODULE_1__.existsSync(filePath)) {\n            logger.debug(`File ${filePath} already exists`);\n            return filePath;\n        }\n        fs__WEBPACK_IMPORTED_MODULE_1__.writeFileSync(filePath, credentialString);\n        logger.debug(`Wrote credentials to file`);\n        return filePath;\n    }\n    async deleteProject(projectId) {\n        await this.projectRepository.deleteOne(projectId);\n    }\n    getGeneralConnectionInfo(project) {\n        return Object.entries(project.connectionInfo).reduce((acc, [key, value])=>{\n            if (!SENSITIVE_PROPERTY_NAME.has(key)) {\n                acc[key] = value;\n            }\n            return acc;\n        }, {});\n    }\n    getProjectRecommendationQuestionsConfig(project) {\n        return {\n            maxCategories: config.projectRecommendationQuestionMaxCategories,\n            maxQuestions: config.projectRecommendationQuestionsMaxQuestions,\n            regenerate: true,\n            configuration: {\n                language: _server_models_adaptor__WEBPACK_IMPORTED_MODULE_4__.WrenAILanguage[project.language] || _server_models_adaptor__WEBPACK_IMPORTED_MODULE_4__.WrenAILanguage.EN\n            }\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9wcm9qZWN0U2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRCO0FBQ0g7QUFDRDtBQUNrQjtBQWNWO0FBQ3NCO0FBRVU7QUFFVztBQUVyQztBQUV0QyxNQUFNVSxTQUFTRCxrREFBU0E7QUFFeEIsTUFBTUUsU0FBU1Isd0RBQVNBLENBQUM7QUFDekJRLE9BQU9DLEtBQUssR0FBRztBQUVmLE1BQU1DLDBCQUEwQixJQUFJQyxJQUFJO0lBQUM7SUFBZTtDQUFXO0FBcUM1RCxNQUFNQztJQU1YQyxZQUFZLEVBQ1ZDLGlCQUFpQixFQUNqQkMsZUFBZSxFQUNmQyxVQUFVLEVBQ1ZDLGFBQWEsRUFDYkMsU0FBUyxFQU9WLENBQUU7UUFDRCxJQUFJLENBQUNKLGlCQUFpQixHQUFHQTtRQUN6QixJQUFJLENBQUNDLGVBQWUsR0FBR0E7UUFDdkIsSUFBSSxDQUFDQyxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsYUFBYSxHQUFHQTtRQUNyQixJQUFJLENBQUNFLHlDQUF5QyxHQUM1QyxJQUFJZCxtRkFBeUNBLENBQUM7WUFDNUNTO1lBQ0FJO1lBQ0FEO1FBQ0Y7SUFDSjtJQUVBLE1BQWFHLHlDQUF3RDtRQUNuRSxNQUFNQyxVQUFVLE1BQU0sSUFBSSxDQUFDQyxpQkFBaUI7UUFDNUMsSUFBSSxDQUFDRCxTQUFTO1lBQ1osTUFBTSxJQUFJRSxNQUFNLENBQUMsaUJBQWlCLENBQUM7UUFDckM7UUFDQSxNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDUixVQUFVLENBQUNTLG1CQUFtQjtRQUM5RCxNQUFNQywwQkFDSixNQUFNLElBQUksQ0FBQ1QsYUFBYSxDQUFDVSwrQkFBK0IsQ0FBQztZQUN2REg7WUFDQSxHQUFHLElBQUksQ0FBQ0ksdUNBQXVDLENBQUNQLFFBQVE7UUFDMUQ7UUFFRixNQUFNUSxpQkFBaUIsTUFBTSxJQUFJLENBQUNmLGlCQUFpQixD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aS8uL3NyYy9hcG9sbG8vc2VydmVyL3NlcnZpY2VzL3Byb2plY3RTZXJ2aWNlLnRzPzMzMzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2VydmVyL3V0aWxzJztcbmltcG9ydCB7IElQcm9qZWN0UmVwb3NpdG9yeSwgV1JFTl9BSV9DT05ORUNUSU9OX0lORk8gfSBmcm9tICcuLi9yZXBvc2l0b3JpZXMnO1xuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gJy4uL3JlcG9zaXRvcmllcyc7XG5pbXBvcnQge1xuICBDb21wYWN0VGFibGUsXG4gIElEYXRhU291cmNlTWV0YWRhdGFTZXJ2aWNlLFxuICBSZWNvbW1lbmRDb25zdHJhaW50LFxufSBmcm9tICcuL21ldGFkYXRhU2VydmljZSc7XG5pbXBvcnQgeyBEYXRhU291cmNlTmFtZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7XG4gIFJlY29tbWVuZGF0aW9uUXVlc3Rpb24sXG4gIFJlY29tbWVuZGF0aW9uUXVlc3Rpb25TdGF0dXMsXG4gIFdyZW5BSUVycm9yLFxuICBXcmVuQUlMYW5ndWFnZSxcbn0gZnJvbSAnQHNlcnZlci9tb2RlbHMvYWRhcHRvcic7XG5pbXBvcnQgeyBlbmNyeXB0Q29ubmVjdGlvbkluZm8gfSBmcm9tICcuLi9kYXRhU291cmNlJztcbmltcG9ydCB7IElXcmVuQUlBZGFwdG9yIH0gZnJvbSAnLi4vYWRhcHRvcnMnO1xuaW1wb3J0IHsgUmVjb21tZW5kUXVlc3Rpb25SZXN1bHRTdGF0dXMgfSBmcm9tICcuL2Fza2luZ1NlcnZpY2UnO1xuaW1wb3J0IHsgSU1ETFNlcnZpY2UgfSBmcm9tICcuL21kbFNlcnZpY2UnO1xuaW1wb3J0IHsgUHJvamVjdFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIgfSBmcm9tICcuLi9iYWNrZ3JvdW5kcyc7XG5pbXBvcnQgeyBJVGVsZW1ldHJ5IH0gZnJvbSAnLi4vdGVsZW1ldHJ5L3RlbGVtZXRyeSc7XG5pbXBvcnQgeyBnZXRDb25maWcgfSBmcm9tICcuLi9jb25maWcnO1xuXG5jb25zdCBjb25maWcgPSBnZXRDb25maWcoKTtcblxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdQcm9qZWN0U2VydmljZScpO1xubG9nZ2VyLmxldmVsID0gJ2RlYnVnJztcblxuY29uc3QgU0VOU0lUSVZFX1BST1BFUlRZX05BTUUgPSBuZXcgU2V0KFsnY3JlZGVudGlhbHMnLCAncGFzc3dvcmQnXSk7XG5leHBvcnQgaW50ZXJmYWNlIFByb2plY3REYXRhIHtcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgdHlwZTogRGF0YVNvdXJjZU5hbWU7XG4gIGNvbm5lY3Rpb25JbmZvOiBXUkVOX0FJX0NPTk5FQ1RJT05fSU5GTztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnNSZXN1bHQge1xuICBzdGF0dXM6IFJlY29tbWVuZFF1ZXN0aW9uUmVzdWx0U3RhdHVzO1xuICBxdWVzdGlvbnM6IFJlY29tbWVuZGF0aW9uUXVlc3Rpb25bXTtcbiAgZXJyb3I6IFdyZW5BSUVycm9yO1xufVxuZXhwb3J0IGludGVyZmFjZSBJUHJvamVjdFNlcnZpY2Uge1xuICBjcmVhdGVQcm9qZWN0OiAocHJvamVjdERhdGE6IFByb2plY3REYXRhKSA9PiBQcm9taXNlPFByb2plY3Q+O1xuICBnZXRHZW5lcmFsQ29ubmVjdGlvbkluZm86IChwcm9qZWN0OiBQcm9qZWN0KSA9PiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBnZXRQcm9qZWN0RGF0YVNvdXJjZVRhYmxlczogKFxuICAgIHByb2plY3Q/OiBQcm9qZWN0LFxuICAgIHByb2plY3RJZD86IG51bWJlcixcbiAgKSA9PiBQcm9taXNlPENvbXBhY3RUYWJsZVtdPjtcbiAgZ2V0UHJvamVjdFN1Z2dlc3RlZENvbnN0cmFpbnQ6IChcbiAgICBwcm9qZWN0PzogUHJvamVjdCxcbiAgICBwcm9qZWN0SWQ/OiBudW1iZXIsXG4gICkgPT4gUHJvbWlzZTxSZWNvbW1lbmRDb25zdHJhaW50W10+O1xuXG4gIGdldEN1cnJlbnRQcm9qZWN0OiAoKSA9PiBQcm9taXNlPFByb2plY3Q+O1xuICBnZXRQcm9qZWN0QnlJZDogKHByb2plY3RJZDogbnVtYmVyKSA9PiBQcm9taXNlPFByb2plY3Q+O1xuICB3cml0ZUNyZWRlbnRpYWxGaWxlOiAoXG4gICAgY3JlZGVudGlhbHM6IEpTT04sXG4gICAgcGVyc2lzdENyZWRlbnRpYWxEaXI6IHN0cmluZyxcbiAgKSA9PiBzdHJpbmc7XG4gIGRlbGV0ZVByb2plY3Q6IChwcm9qZWN0SWQ6IG51bWJlcikgPT4gUHJvbWlzZTx2b2lkPjtcbiAgZ2V0UHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zOiAoKSA9PiBQcm9taXNlPFByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc1Jlc3VsdD47XG5cbiAgLy8gcmVjb21tZW5kIHF1ZXN0aW9uc1xuICBnZW5lcmF0ZVByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9uczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGNsYXNzIFByb2plY3RTZXJ2aWNlIGltcGxlbWVudHMgSVByb2plY3RTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBwcm9qZWN0UmVwb3NpdG9yeTogSVByb2plY3RSZXBvc2l0b3J5O1xuICBwcml2YXRlIG1ldGFkYXRhU2VydmljZTogSURhdGFTb3VyY2VNZXRhZGF0YVNlcnZpY2U7XG4gIHByaXZhdGUgbWRsU2VydmljZTogSU1ETFNlcnZpY2U7XG4gIHByaXZhdGUgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gIHByaXZhdGUgcHJvamVjdFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXI6IFByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyO1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgcHJvamVjdFJlcG9zaXRvcnksXG4gICAgbWV0YWRhdGFTZXJ2aWNlLFxuICAgIG1kbFNlcnZpY2UsXG4gICAgd3JlbkFJQWRhcHRvcixcbiAgICB0ZWxlbWV0cnksXG4gIH06IHtcbiAgICBwcm9qZWN0UmVwb3NpdG9yeTogSVByb2plY3RSZXBvc2l0b3J5O1xuICAgIG1ldGFkYXRhU2VydmljZTogSURhdGFTb3VyY2VNZXRhZGF0YVNlcnZpY2U7XG4gICAgbWRsU2VydmljZTogSU1ETFNlcnZpY2U7XG4gICAgd3JlbkFJQWRhcHRvcjogSVdyZW5BSUFkYXB0b3I7XG4gICAgdGVsZW1ldHJ5OiBJVGVsZW1ldHJ5O1xuICB9KSB7XG4gICAgdGhpcy5wcm9qZWN0UmVwb3NpdG9yeSA9IHByb2plY3RSZXBvc2l0b3J5O1xuICAgIHRoaXMubWV0YWRhdGFTZXJ2aWNlID0gbWV0YWRhdGFTZXJ2aWNlO1xuICAgIHRoaXMubWRsU2VydmljZSA9IG1kbFNlcnZpY2U7XG4gICAgdGhpcy53cmVuQUlBZGFwdG9yID0gd3JlbkFJQWRhcHRvcjtcbiAgICB0aGlzLnByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyID1cbiAgICAgIG5ldyBQcm9qZWN0UmVjb21tZW5kUXVlc3Rpb25CYWNrZ3JvdW5kVHJhY2tlcih7XG4gICAgICAgIHByb2plY3RSZXBvc2l0b3J5LFxuICAgICAgICB0ZWxlbWV0cnksXG4gICAgICAgIHdyZW5BSUFkYXB0b3IsXG4gICAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZW5lcmF0ZVByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9ucygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgdGhpcy5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIGlmICghcHJvamVjdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcm9qZWN0IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgICBjb25zdCB7IG1hbmlmZXN0IH0gPSBhd2FpdCB0aGlzLm1kbFNlcnZpY2UubWFrZUN1cnJlbnRNb2RlbE1ETCgpO1xuICAgIGNvbnN0IHJlY29tbWVuZFF1ZXN0aW9uUmVzdWx0ID1cbiAgICAgIGF3YWl0IHRoaXMud3JlbkFJQWRhcHRvci5nZW5lcmF0ZVJlY29tbWVuZGF0aW9uUXVlc3Rpb25zKHtcbiAgICAgICAgbWFuaWZlc3QsXG4gICAgICAgIC4uLnRoaXMuZ2V0UHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zQ29uZmlnKHByb2plY3QpLFxuICAgICAgfSk7XG5cbiAgICBjb25zdCB1cGRhdGVkUHJvamVjdCA9IGF3YWl0IHRoaXMucHJvamVjdFJlcG9zaXRvcnkudXBkYXRlT25lKHByb2plY3QuaWQsIHtcbiAgICAgIHF1ZXJ5SWQ6IHJlY29tbWVuZFF1ZXN0aW9uUmVzdWx0LnF1ZXJ5SWQsXG4gICAgICBxdWVzdGlvbnNTdGF0dXM6IFJlY29tbWVuZGF0aW9uUXVlc3Rpb25TdGF0dXMuR0VORVJBVElORyxcbiAgICAgIHF1ZXN0aW9uczogW10sXG4gICAgICBxdWVzdGlvbnNFcnJvcjogbnVsbCxcbiAgICB9KTtcblxuICAgIGlmIChcbiAgICAgICF0aGlzLnByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLmlzRXhpc3QodXBkYXRlZFByb2plY3QpXG4gICAgKSB7XG4gICAgICB0aGlzLnByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLmFkZFRhc2sodXBkYXRlZFByb2plY3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIGBHZW5lcmF0ZSBQcm9qZWN0IFJlY29tbWVuZGF0aW9uIFF1ZXN0aW9ucyBUYXNrICR7dXBkYXRlZFByb2plY3QuaWR9IGFscmVhZHkgZXhpc3RzLCBza2lwIGFkZGluZ2AsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnMoKSB7XG4gICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IHRoaXMucHJvamVjdFJlcG9zaXRvcnkuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgICBpZiAoIXByb2plY3QpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvamVjdCBub3QgZm91bmRgKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0OiBQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnNSZXN1bHQgPSB7XG4gICAgICBzdGF0dXM6IFJlY29tbWVuZFF1ZXN0aW9uUmVzdWx0U3RhdHVzLk5PVF9TVEFSVEVELFxuICAgICAgcXVlc3Rpb25zOiBbXSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH07XG4gICAgaWYgKHByb2plY3QucXVlcnlJZCkge1xuICAgICAgcmVzdWx0LnN0YXR1cyA9IHByb2plY3QucXVlc3Rpb25zU3RhdHVzXG4gICAgICAgID8gUmVjb21tZW5kUXVlc3Rpb25SZXN1bHRTdGF0dXNbcHJvamVjdC5xdWVzdGlvbnNTdGF0dXNdXG4gICAgICAgIDogcmVzdWx0LnN0YXR1cztcbiAgICAgIHJlc3VsdC5xdWVzdGlvbnMgPSBwcm9qZWN0LnF1ZXN0aW9ucyB8fCBbXTtcbiAgICAgIHJlc3VsdC5lcnJvciA9IHByb2plY3QucXVlc3Rpb25zRXJyb3IgYXMgV3JlbkFJRXJyb3I7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0Q3VycmVudFByb2plY3QoKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvamVjdFJlcG9zaXRvcnkuZ2V0Q3VycmVudFByb2plY3QoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRQcm9qZWN0QnlJZChwcm9qZWN0SWQ6IG51bWJlcikge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2plY3RSZXBvc2l0b3J5LmZpbmRPbmVCeSh7IGlkOiBwcm9qZWN0SWQgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0UHJvamVjdERhdGFTb3VyY2VUYWJsZXMoXG4gICAgcHJvamVjdD86IFByb2plY3QsXG4gICAgcHJvamVjdElkPzogbnVtYmVyLFxuICApIHtcbiAgICBjb25zdCB1c2VkUHJvamVjdCA9IHByb2plY3RcbiAgICAgID8gcHJvamVjdFxuICAgICAgOiBwcm9qZWN0SWRcbiAgICAgICAgPyBhd2FpdCB0aGlzLmdldFByb2plY3RCeUlkKHByb2plY3RJZClcbiAgICAgICAgOiBhd2FpdCB0aGlzLmdldEN1cnJlbnRQcm9qZWN0KCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMubWV0YWRhdGFTZXJ2aWNlLmxpc3RUYWJsZXModXNlZFByb2plY3QpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldFByb2plY3RTdWdnZXN0ZWRDb25zdHJhaW50KFxuICAgIHByb2plY3Q/OiBQcm9qZWN0LFxuICAgIHByb2plY3RJZD86IG51bWJlcixcbiAgKSB7XG4gICAgY29uc3QgdXNlZFByb2plY3QgPSBwcm9qZWN0XG4gICAgICA/IHByb2plY3RcbiAgICAgIDogcHJvamVjdElkXG4gICAgICAgID8gYXdhaXQgdGhpcy5nZXRQcm9qZWN0QnlJZChwcm9qZWN0SWQpXG4gICAgICAgIDogYXdhaXQgdGhpcy5nZXRDdXJyZW50UHJvamVjdCgpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLm1ldGFkYXRhU2VydmljZS5saXN0Q29uc3RyYWludHModXNlZFByb2plY3QpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNyZWF0ZVByb2plY3QocHJvamVjdERhdGE6IFByb2plY3REYXRhKSB7XG4gICAgY29uc3QgcHJvamVjdFZhbHVlID0ge1xuICAgICAgZGlzcGxheU5hbWU6IHByb2plY3REYXRhLmRpc3BsYXlOYW1lLFxuICAgICAgdHlwZTogcHJvamVjdERhdGEudHlwZSxcbiAgICAgIGNhdGFsb2c6ICd3cmVuYWknLFxuICAgICAgc2NoZW1hOiAncHVibGljJyxcbiAgICAgIGNvbm5lY3Rpb25JbmZvOiBlbmNyeXB0Q29ubmVjdGlvbkluZm8oXG4gICAgICAgIHByb2plY3REYXRhLnR5cGUsXG4gICAgICAgIHByb2plY3REYXRhLmNvbm5lY3Rpb25JbmZvLFxuICAgICAgKSxcbiAgICB9O1xuICAgIGxvZ2dlci5kZWJ1ZygnQ3JlYXRpbmcgcHJvamVjdC4uLicpO1xuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCB0aGlzLnByb2plY3RSZXBvc2l0b3J5LmNyZWF0ZU9uZShwcm9qZWN0VmFsdWUpO1xuICAgIHJldHVybiBwcm9qZWN0O1xuICB9XG5cbiAgcHVibGljIHdyaXRlQ3JlZGVudGlhbEZpbGUoY3JlZGVudGlhbHM6IEpTT04sIHBlcnNpc3RDcmVkZW50aWFsRGlyOiBzdHJpbmcpIHtcbiAgICAvLyBjcmVhdGUgcGVyc2lzdF9jcmVkZW50aWFsX2RpciBpZiBub3QgZXhpc3RzXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHBlcnNpc3RDcmVkZW50aWFsRGlyKSkge1xuICAgICAgZnMubWtkaXJTeW5jKHBlcnNpc3RDcmVkZW50aWFsRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLy8gZmlsZSBuYW1lIHdpbGwgYmUgdGhlIGhhc2ggb2YgdGhlIGNyZWRlbnRpYWxzLCBmaWxlIHBhdGggaXMgY3VycmVudCB3b3JraW5nIGRpcmVjdG9yeVxuICAgIC8vIGNvbnZlcnQgY3JlZGVudGlhbHMgZnJvbSBiYXNlNjQgdG8gc3RyaW5nIGFuZCByZXBsYWNlIGFsbCB0aGUgbWF0Y2hlZCBcIlxcblwiIHdpdGggXCJcXFxcblwiLCAgdGhlcmUgYXJlIG1hbnkgXFxuIGluIHRoZSBcInByaXZhdGVfa2V5XCIgcHJvcGVydHlcbiAgICBjb25zdCBjcmVkZW50aWFsU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbHMpO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gY3J5cHRvXG4gICAgICAuY3JlYXRlSGFzaCgnbWQ1JylcbiAgICAgIC51cGRhdGUoY3JlZGVudGlhbFN0cmluZylcbiAgICAgIC5kaWdlc3QoJ2hleCcpO1xuXG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4ocGVyc2lzdENyZWRlbnRpYWxEaXIsIGAke2ZpbGVOYW1lfS5qc29uYCk7XG4gICAgLy8gY2hlY2sgaWYgZmlsZSBleGlzdHNcbiAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgRmlsZSAke2ZpbGVQYXRofSBhbHJlYWR5IGV4aXN0c2ApO1xuICAgICAgcmV0dXJuIGZpbGVQYXRoO1xuICAgIH1cbiAgICBmcy53cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBjcmVkZW50aWFsU3RyaW5nKTtcbiAgICBsb2dnZXIuZGVidWcoYFdyb3RlIGNyZWRlbnRpYWxzIHRvIGZpbGVgKTtcbiAgICByZXR1cm4gZmlsZVBhdGg7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZGVsZXRlUHJvamVjdChwcm9qZWN0SWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMucHJvamVjdFJlcG9zaXRvcnkuZGVsZXRlT25lKHByb2plY3RJZCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0R2VuZXJhbENvbm5lY3Rpb25JbmZvKHByb2plY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMocHJvamVjdC5jb25uZWN0aW9uSW5mbykucmVkdWNlKFxuICAgICAgKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICghU0VOU0lUSVZFX1BST1BFUlRZX05BTUUuaGFzKGtleSkpIHtcbiAgICAgICAgICBhY2Nba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LFxuICAgICAge30sXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zQ29uZmlnKHByb2plY3Q6IFByb2plY3QpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWF4Q2F0ZWdvcmllczogY29uZmlnLnByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9uTWF4Q2F0ZWdvcmllcyxcbiAgICAgIG1heFF1ZXN0aW9uczogY29uZmlnLnByb2plY3RSZWNvbW1lbmRhdGlvblF1ZXN0aW9uc01heFF1ZXN0aW9ucyxcbiAgICAgIHJlZ2VuZXJhdGU6IHRydWUsXG4gICAgICBjb25maWd1cmF0aW9uOiB7XG4gICAgICAgIGxhbmd1YWdlOiBXcmVuQUlMYW5ndWFnZVtwcm9qZWN0Lmxhbmd1YWdlXSB8fCBXcmVuQUlMYW5ndWFnZS5FTixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyeXB0byIsImZzIiwicGF0aCIsImdldExvZ2dlciIsIlJlY29tbWVuZGF0aW9uUXVlc3Rpb25TdGF0dXMiLCJXcmVuQUlMYW5ndWFnZSIsImVuY3J5cHRDb25uZWN0aW9uSW5mbyIsIlJlY29tbWVuZFF1ZXN0aW9uUmVzdWx0U3RhdHVzIiwiUHJvamVjdFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIiLCJnZXRDb25maWciLCJjb25maWciLCJsb2dnZXIiLCJsZXZlbCIsIlNFTlNJVElWRV9QUk9QRVJUWV9OQU1FIiwiU2V0IiwiUHJvamVjdFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsInByb2plY3RSZXBvc2l0b3J5IiwibWV0YWRhdGFTZXJ2aWNlIiwibWRsU2VydmljZSIsIndyZW5BSUFkYXB0b3IiLCJ0ZWxlbWV0cnkiLCJwcm9qZWN0UmVjb21tZW5kUXVlc3Rpb25CYWNrZ3JvdW5kVHJhY2tlciIsImdlbmVyYXRlUHJvamVjdFJlY29tbWVuZGF0aW9uUXVlc3Rpb25zIiwicHJvamVjdCIsImdldEN1cnJlbnRQcm9qZWN0IiwiRXJyb3IiLCJtYW5pZmVzdCIsIm1ha2VDdXJyZW50TW9kZWxNREwiLCJyZWNvbW1lbmRRdWVzdGlvblJlc3VsdCIsImdlbmVyYXRlUmVjb21tZW5kYXRpb25RdWVzdGlvbnMiLCJnZXRQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnNDb25maWciLCJ1cGRhdGVkUHJvamVjdCIsInVwZGF0ZU9uZSIsImlkIiwicXVlcnlJZCIsInF1ZXN0aW9uc1N0YXR1cyIsIkdFTkVSQVRJTkciLCJxdWVzdGlvbnMiLCJxdWVzdGlvbnNFcnJvciIsImlzRXhpc3QiLCJhZGRUYXNrIiwiZGVidWciLCJnZXRQcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnMiLCJyZXN1bHQiLCJzdGF0dXMiLCJOT1RfU1RBUlRFRCIsImVycm9yIiwiZ2V0UHJvamVjdEJ5SWQiLCJwcm9qZWN0SWQiLCJmaW5kT25lQnkiLCJnZXRQcm9qZWN0RGF0YVNvdXJjZVRhYmxlcyIsInVzZWRQcm9qZWN0IiwibGlzdFRhYmxlcyIsImdldFByb2plY3RTdWdnZXN0ZWRDb25zdHJhaW50IiwibGlzdENvbnN0cmFpbnRzIiwiY3JlYXRlUHJvamVjdCIsInByb2plY3REYXRhIiwicHJvamVjdFZhbHVlIiwiZGlzcGxheU5hbWUiLCJ0eXBlIiwiY2F0YWxvZyIsInNjaGVtYSIsImNvbm5lY3Rpb25JbmZvIiwiY3JlYXRlT25lIiwid3JpdGVDcmVkZW50aWFsRmlsZSIsImNyZWRlbnRpYWxzIiwicGVyc2lzdENyZWRlbnRpYWxEaXIiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiY3JlZGVudGlhbFN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaWxlTmFtZSIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJmaWxlUGF0aCIsImpvaW4iLCJ3cml0ZUZpbGVTeW5jIiwiZGVsZXRlUHJvamVjdCIsImRlbGV0ZU9uZSIsImdldEdlbmVyYWxDb25uZWN0aW9uSW5mbyIsIk9iamVjdCIsImVudHJpZXMiLCJyZWR1Y2UiLCJhY2MiLCJrZXkiLCJ2YWx1ZSIsImhhcyIsIm1heENhdGVnb3JpZXMiLCJwcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbk1heENhdGVnb3JpZXMiLCJtYXhRdWVzdGlvbnMiLCJwcm9qZWN0UmVjb21tZW5kYXRpb25RdWVzdGlvbnNNYXhRdWVzdGlvbnMiLCJyZWdlbmVyYXRlIiwiY29uZmlndXJhdGlvbiIsImxhbmd1YWdlIiwiRU4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/projectService.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/services/queryService.ts":
/*!****************************************************!*\
  !*** ./src/apollo/server/services/queryService.ts ***!
  \****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_PREVIEW_LIMIT: () => (/* binding */ DEFAULT_PREVIEW_LIMIT),\n/* harmony export */   QueryService: () => (/* binding */ QueryService)\n/* harmony export */ });\n/* harmony import */ var _server_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/types */ \"(api)/./src/apollo/server/types/index.ts\");\n/* harmony import */ var _adaptors_ibisAdaptor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../adaptors/ibisAdaptor */ \"(api)/./src/apollo/server/adaptors/ibisAdaptor.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_adaptors_ibisAdaptor__WEBPACK_IMPORTED_MODULE_1__, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_3__]);\n([_adaptors_ibisAdaptor__WEBPACK_IMPORTED_MODULE_1__, _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_2__.getLogger)(\"QueryService\");\nlogger.level = \"debug\";\nconst DEFAULT_PREVIEW_LIMIT = 500;\nclass QueryService {\n    constructor({ ibisAdaptor, wrenEngineAdaptor, telemetry }){\n        this.ibisAdaptor = ibisAdaptor;\n        this.wrenEngineAdaptor = wrenEngineAdaptor;\n        this.telemetry = telemetry;\n    }\n    async preview(sql, options) {\n        const { project, manifest: mdl, limit, dryRun } = options;\n        const { type: dataSource, connectionInfo } = project;\n        if (this.useEngine(dataSource)) {\n            if (dryRun) {\n                logger.debug(\"Using wren engine to dry run\");\n                await this.wrenEngineAdaptor.dryRun(sql, {\n                    manifest: mdl,\n                    limit\n                });\n                return true;\n            } else {\n                logger.debug(\"Using wren engine to preview\");\n                const data = await this.wrenEngineAdaptor.previewData(sql, mdl, limit);\n                return data;\n            }\n        } else {\n            this.checkDataSourceIsSupported(dataSource);\n            logger.debug(\"Use ibis adaptor to preview\");\n            if (dryRun) {\n                return await this.ibisDryRun(sql, dataSource, connectionInfo, mdl);\n            } else {\n                return await this.ibisQuery(sql, dataSource, connectionInfo, mdl, limit);\n            }\n        }\n    }\n    async describeStatement(sql, options) {\n        try {\n            // preview data with limit 1 to get column metadata\n            options.limit = 1;\n            const res = await this.preview(sql, options);\n            return {\n                columns: res.columns\n            };\n        } catch (err) {\n            logger.debug(`Got error when describing statement: ${err.message}`);\n            throw err;\n        }\n    }\n    async validate(project, rule, manifest, parameters) {\n        const { type: dataSource, connectionInfo } = project;\n        const res = await this.ibisAdaptor.validate(dataSource, rule, connectionInfo, manifest, parameters);\n        return res;\n    }\n    useEngine(dataSource) {\n        if (dataSource === _server_types__WEBPACK_IMPORTED_MODULE_0__.DataSourceName.DUCKDB) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    checkDataSourceIsSupported(dataSource) {\n        if (!Object.prototype.hasOwnProperty.call(_adaptors_ibisAdaptor__WEBPACK_IMPORTED_MODULE_1__.SupportedDataSource, dataSource)) {\n            throw new Error(`Unsupported datasource for ibis: \"${dataSource}\"`);\n        }\n    }\n    async ibisDryRun(sql, dataSource, connectionInfo, mdl) {\n        const event = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_3__.TelemetryEvent.IBIS_DRY_RUN;\n        try {\n            const res = await this.ibisAdaptor.dryRun(sql, {\n                dataSource,\n                connectionInfo,\n                mdl\n            });\n            this.sendIbisEvent(event, res, {\n                dataSource,\n                sql\n            });\n            return {\n                correlationId: res.correlationId\n            };\n        } catch (err) {\n            this.sendIbisFailedEvent(event, err, {\n                dataSource,\n                sql\n            });\n            throw err;\n        }\n    }\n    async ibisQuery(sql, dataSource, connectionInfo, mdl, limit) {\n        const event = _telemetry_telemetry__WEBPACK_IMPORTED_MODULE_3__.TelemetryEvent.IBIS_QUERY;\n        try {\n            const res = await this.ibisAdaptor.query(sql, {\n                dataSource,\n                connectionInfo,\n                mdl,\n                limit\n            });\n            this.sendIbisEvent(event, res, {\n                dataSource,\n                sql\n            });\n            const data = this.transformDataType(res);\n            return {\n                correlationId: res.correlationId,\n                ...data\n            };\n        } catch (err) {\n            this.sendIbisFailedEvent(event, err, {\n                dataSource,\n                sql\n            });\n            throw err;\n        }\n    }\n    transformDataType(data) {\n        const columns = data.columns;\n        const dtypes = data.dtypes;\n        const transformedColumns = columns.map((column)=>{\n            let type = \"unknown\";\n            if (dtypes && dtypes[column]) {\n                type = dtypes[column] === \"object\" ? \"string\" : dtypes[column];\n            }\n            if (type === \"unknown\") {\n                logger.debug(`Did not find type mapping for \"${column}\"`);\n                logger.debug(`dtypes mapping: ${dtypes ? JSON.stringify(dtypes, null, 2) : \"undefined\"} `);\n            }\n            return {\n                name: column,\n                type\n            };\n        });\n        return {\n            columns: transformedColumns,\n            data: data.data\n        };\n    }\n    sendIbisEvent(event, res, others) {\n        this.telemetry.sendEvent(event, {\n            correlationId: res.correlationId,\n            processTime: res.processTime,\n            ...others\n        });\n    }\n    sendIbisFailedEvent(event, err, others) {\n        this.telemetry.sendEvent(event, {\n            correlationId: err.extensions?.other?.correlationId,\n            processTime: err.extensions?.other?.processTime,\n            error: err.message,\n            ...others\n        }, err.extensions?.service, false);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9xdWVyeVNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQStDO0FBU2Q7QUFDUztBQUVnQztBQUUxRSxNQUFNSSxTQUFTRix3REFBU0EsQ0FBQztBQUN6QkUsT0FBT0MsS0FBSyxHQUFHO0FBRVIsTUFBTUMsd0JBQXdCLElBQUk7QUF1RGxDLE1BQU1DO0lBS1hDLFlBQVksRUFDVkMsV0FBVyxFQUNYQyxpQkFBaUIsRUFDakJDLFNBQVMsRUFLVixDQUFFO1FBQ0QsSUFBSSxDQUFDRixXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUdBO1FBQ3pCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtJQUNuQjtJQUVBLE1BQWFDLFFBQ1hDLEdBQVcsRUFDWEMsT0FBdUIsRUFDZ0M7UUFDdkQsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFVBQVVDLEdBQUcsRUFBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUUsR0FBR0w7UUFDbEQsTUFBTSxFQUFFTSxNQUFNQyxVQUFVLEVBQUVDLGNBQWMsRUFBRSxHQUFHUDtRQUM3QyxJQUFJLElBQUksQ0FBQ1EsU0FBUyxDQUFDRixhQUFhO1lBQzlCLElBQUlGLFFBQVE7Z0JBQ1ZmLE9BQU9vQixLQUFLLENBQUM7Z0JBQ2IsTUFBTSxJQUFJLENBQUNkLGlCQUFpQixDQUFDUyxNQUFNLENBQUNOLEtBQUs7b0JBQ3ZDRyxVQUFVQztvQkFDVkM7Z0JBQ0Y7Z0JBQ0EsT0FBTztZQUNULE9BQU87Z0JBQ0xkLE9BQU9vQixLQUFLLENBQUM7Z0JBQ2IsTUFBTUMsT0FBTyxNQUFNLElBQUksQ0FBQ2YsaUJBQWlCLENBQUNnQixXQUFXLENBQUNiLEtBQUtJLEtBQUtDO2dCQUNoRSxPQUFPTztZQUNUO1FBQ0YsT0FBTztZQUNMLElBQUksQ0FBQ0UsMEJBQTBCLENBQUNOO1lBQ2hDakIsT0FBT29CLEtBQUssQ0FBQztZQUNiLElBQUlMLFFBQVE7Z0JBQ1YsT0FBTyxN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QVUsRUFBRUMsT0FBT0Y7WUFDcENHLE9BQU8vQixJQUFJQyxPQUFPO1lBQ2xCLEdBQUd5QixNQUFNO1FBQ1gsR0FDQTFCLElBQUk2QixVQUFVLEVBQUVHLFNBQ2hCO0lBRUo7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci9zZXJ2aWNlcy9xdWVyeVNlcnZpY2UudHM/MTc1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhU291cmNlTmFtZSB9IGZyb20gJ0BzZXJ2ZXIvdHlwZXMnO1xuaW1wb3J0IHsgTWFuaWZlc3QgfSBmcm9tICdAc2VydmVyL21kbC90eXBlJztcbmltcG9ydCB7IElXcmVuRW5naW5lQWRhcHRvciB9IGZyb20gJy4uL2FkYXB0b3JzL3dyZW5FbmdpbmVBZGFwdG9yJztcbmltcG9ydCB7XG4gIFN1cHBvcnRlZERhdGFTb3VyY2UsXG4gIElJYmlzQWRhcHRvcixcbiAgSWJpc1F1ZXJ5UmVzcG9uc2UsXG4gIFZhbGlkYXRpb25SdWxlcyxcbiAgSWJpc1Jlc3BvbnNlLFxufSBmcm9tICcuLi9hZGFwdG9ycy9pYmlzQWRhcHRvcic7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2VydmVyL3V0aWxzJztcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tICcuLi9yZXBvc2l0b3JpZXMnO1xuaW1wb3J0IHsgUG9zdEhvZ1RlbGVtZXRyeSwgVGVsZW1ldHJ5RXZlbnQgfSBmcm9tICcuLi90ZWxlbWV0cnkvdGVsZW1ldHJ5JztcblxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdRdWVyeVNlcnZpY2UnKTtcbmxvZ2dlci5sZXZlbCA9ICdkZWJ1Zyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1BSRVZJRVdfTElNSVQgPSA1MDA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uTWV0YWRhdGEge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmV2aWV3RGF0YVJlc3BvbnNlIGV4dGVuZHMgSWJpc1Jlc3BvbnNlIHtcbiAgY29sdW1uczogQ29sdW1uTWV0YWRhdGFbXTtcbiAgZGF0YTogYW55W11bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXNjcmliZVN0YXRlbWVudFJlc3BvbnNlIHtcbiAgY29sdW1uczogQ29sdW1uTWV0YWRhdGFbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmV2aWV3T3B0aW9ucyB7XG4gIHByb2plY3Q6IFByb2plY3Q7XG4gIG1vZGVsaW5nT25seT86IGJvb2xlYW47XG4gIC8vIGlmIG5vdCBnaXZlbiwgd2lsbCB1c2UgdGhlIGRlcGxveWVkIG1hbmlmZXN0XG4gIG1hbmlmZXN0OiBNYW5pZmVzdDtcbiAgbGltaXQ/OiBudW1iZXI7XG4gIGRyeVJ1bj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3FsVmFsaWRhdGVPcHRpb25zIHtcbiAgcHJvamVjdDogUHJvamVjdDtcbiAgbWRsOiBNYW5pZmVzdDtcbiAgbW9kZWxpbmdPbmx5PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0ZVJlc3BvbnNlIHtcbiAgdmFsaWQ6IGJvb2xlYW47XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVF1ZXJ5U2VydmljZSB7XG4gIHByZXZpZXcoXG4gICAgc3FsOiBzdHJpbmcsXG4gICAgb3B0aW9uczogUHJldmlld09wdGlvbnMsXG4gICk6IFByb21pc2U8SWJpc1Jlc3BvbnNlIHwgUHJldmlld0RhdGFSZXNwb25zZSB8IGJvb2xlYW4+O1xuXG4gIGRlc2NyaWJlU3RhdGVtZW50KFxuICAgIHNxbDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IFByZXZpZXdPcHRpb25zLFxuICApOiBQcm9taXNlPERlc2NyaWJlU3RhdGVtZW50UmVzcG9uc2U+O1xuXG4gIHZhbGlkYXRlKFxuICAgIHByb2plY3Q6IFByb2plY3QsXG4gICAgcnVsZTogVmFsaWRhdGlvblJ1bGVzLFxuICAgIG1hbmlmZXN0OiBNYW5pZmVzdCxcbiAgICBwYXJhbWV0ZXJzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICApOiBQcm9taXNlPFZhbGlkYXRlUmVzcG9uc2U+O1xufVxuXG5leHBvcnQgY2xhc3MgUXVlcnlTZXJ2aWNlIGltcGxlbWVudHMgSVF1ZXJ5U2VydmljZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgaWJpc0FkYXB0b3I6IElJYmlzQWRhcHRvcjtcbiAgcHJpdmF0ZSByZWFkb25seSB3cmVuRW5naW5lQWRhcHRvcjogSVdyZW5FbmdpbmVBZGFwdG9yO1xuICBwcml2YXRlIHJlYWRvbmx5IHRlbGVtZXRyeTogUG9zdEhvZ1RlbGVtZXRyeTtcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgaWJpc0FkYXB0b3IsXG4gICAgd3JlbkVuZ2luZUFkYXB0b3IsXG4gICAgdGVsZW1ldHJ5LFxuICB9OiB7XG4gICAgaWJpc0FkYXB0b3I6IElJYmlzQWRhcHRvcjtcbiAgICB3cmVuRW5naW5lQWRhcHRvcjogSVdyZW5FbmdpbmVBZGFwdG9yO1xuICAgIHRlbGVtZXRyeTogUG9zdEhvZ1RlbGVtZXRyeTtcbiAgfSkge1xuICAgIHRoaXMuaWJpc0FkYXB0b3IgPSBpYmlzQWRhcHRvcjtcbiAgICB0aGlzLndyZW5FbmdpbmVBZGFwdG9yID0gd3JlbkVuZ2luZUFkYXB0b3I7XG4gICAgdGhpcy50ZWxlbWV0cnkgPSB0ZWxlbWV0cnk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcHJldmlldyhcbiAgICBzcWw6IHN0cmluZyxcbiAgICBvcHRpb25zOiBQcmV2aWV3T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxJYmlzUmVzcG9uc2UgfCBQcmV2aWV3RGF0YVJlc3BvbnNlIHwgYm9vbGVhbj4ge1xuICAgIGNvbnN0IHsgcHJvamVjdCwgbWFuaWZlc3Q6IG1kbCwgbGltaXQsIGRyeVJ1biB9ID0gb3B0aW9ucztcbiAgICBjb25zdCB7IHR5cGU6IGRhdGFTb3VyY2UsIGNvbm5lY3Rpb25JbmZvIH0gPSBwcm9qZWN0O1xuICAgIGlmICh0aGlzLnVzZUVuZ2luZShkYXRhU291cmNlKSkge1xuICAgICAgaWYgKGRyeVJ1bikge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1VzaW5nIHdyZW4gZW5naW5lIHRvIGRyeSBydW4nKTtcbiAgICAgICAgYXdhaXQgdGhpcy53cmVuRW5naW5lQWRhcHRvci5kcnlSdW4oc3FsLCB7XG4gICAgICAgICAgbWFuaWZlc3Q6IG1kbCxcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdVc2luZyB3cmVuIGVuZ2luZSB0byBwcmV2aWV3Jyk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLndyZW5FbmdpbmVBZGFwdG9yLnByZXZpZXdEYXRhKHNxbCwgbWRsLCBsaW1pdCk7XG4gICAgICAgIHJldHVybiBkYXRhIGFzIFByZXZpZXdEYXRhUmVzcG9uc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2hlY2tEYXRhU291cmNlSXNTdXBwb3J0ZWQoZGF0YVNvdXJjZSk7XG4gICAgICBsb2dnZXIuZGVidWcoJ1VzZSBpYmlzIGFkYXB0b3IgdG8gcHJldmlldycpO1xuICAgICAgaWYgKGRyeVJ1bikge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pYmlzRHJ5UnVuKHNxbCwgZGF0YVNvdXJjZSwgY29ubmVjdGlvbkluZm8sIG1kbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pYmlzUXVlcnkoXG4gICAgICAgICAgc3FsLFxuICAgICAgICAgIGRhdGFTb3VyY2UsXG4gICAgICAgICAgY29ubmVjdGlvbkluZm8sXG4gICAgICAgICAgbWRsLFxuICAgICAgICAgIGxpbWl0LFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBkZXNjcmliZVN0YXRlbWVudChcbiAgICBzcWw6IHN0cmluZyxcbiAgICBvcHRpb25zOiBQcmV2aWV3T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxEZXNjcmliZVN0YXRlbWVudFJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIHByZXZpZXcgZGF0YSB3aXRoIGxpbWl0IDEgdG8gZ2V0IGNvbHVtbiBtZXRhZGF0YVxuICAgICAgb3B0aW9ucy5saW1pdCA9IDE7XG4gICAgICBjb25zdCByZXMgPSAoYXdhaXQgdGhpcy5wcmV2aWV3KHNxbCwgb3B0aW9ucykpIGFzIFByZXZpZXdEYXRhUmVzcG9uc2U7XG4gICAgICByZXR1cm4geyBjb2x1bW5zOiByZXMuY29sdW1ucyB9O1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBsb2dnZXIuZGVidWcoYEdvdCBlcnJvciB3aGVuIGRlc2NyaWJpbmcgc3RhdGVtZW50OiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyB2YWxpZGF0ZShcbiAgICBwcm9qZWN0LFxuICAgIHJ1bGU6IFZhbGlkYXRpb25SdWxlcyxcbiAgICBtYW5pZmVzdDogTWFuaWZlc3QsXG4gICAgcGFyYW1ldGVyczogUmVjb3JkPHN0cmluZywgYW55PixcbiAgKTogUHJvbWlzZTxWYWxpZGF0ZVJlc3BvbnNlPiB7XG4gICAgY29uc3QgeyB0eXBlOiBkYXRhU291cmNlLCBjb25uZWN0aW9uSW5mbyB9ID0gcHJvamVjdDtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmliaXNBZGFwdG9yLnZhbGlkYXRlKFxuICAgICAgZGF0YVNvdXJjZSxcbiAgICAgIHJ1bGUsXG4gICAgICBjb25uZWN0aW9uSW5mbyxcbiAgICAgIG1hbmlmZXN0LFxuICAgICAgcGFyYW1ldGVycyxcbiAgICApO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwcml2YXRlIHVzZUVuZ2luZShkYXRhU291cmNlOiBEYXRhU291cmNlTmFtZSk6IGJvb2xlYW4ge1xuICAgIGlmIChkYXRhU291cmNlID09PSBEYXRhU291cmNlTmFtZS5EVUNLREIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0RhdGFTb3VyY2VJc1N1cHBvcnRlZChkYXRhU291cmNlOiBEYXRhU291cmNlTmFtZSkge1xuICAgIGlmIChcbiAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoU3VwcG9ydGVkRGF0YVNvdXJjZSwgZGF0YVNvdXJjZSlcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgZGF0YXNvdXJjZSBmb3IgaWJpczogXCIke2RhdGFTb3VyY2V9XCJgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGliaXNEcnlSdW4oXG4gICAgc3FsOiBzdHJpbmcsXG4gICAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZU5hbWUsXG4gICAgY29ubmVjdGlvbkluZm86IGFueSxcbiAgICBtZGw6IE1hbmlmZXN0LFxuICApOiBQcm9taXNlPEliaXNSZXNwb25zZT4ge1xuICAgIGNvbnN0IGV2ZW50ID0gVGVsZW1ldHJ5RXZlbnQuSUJJU19EUllfUlVOO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmliaXNBZGFwdG9yLmRyeVJ1bihzcWwsIHtcbiAgICAgICAgZGF0YVNvdXJjZSxcbiAgICAgICAgY29ubmVjdGlvbkluZm8sXG4gICAgICAgIG1kbCxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZW5kSWJpc0V2ZW50KGV2ZW50LCByZXMsIHsgZGF0YVNvdXJjZSwgc3FsIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29ycmVsYXRpb25JZDogcmVzLmNvcnJlbGF0aW9uSWQsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICB0aGlzLnNlbmRJYmlzRmFpbGVkRXZlbnQoZXZlbnQsIGVyciwgeyBkYXRhU291cmNlLCBzcWwgfSk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpYmlzUXVlcnkoXG4gICAgc3FsOiBzdHJpbmcsXG4gICAgZGF0YVNvdXJjZTogRGF0YVNvdXJjZU5hbWUsXG4gICAgY29ubmVjdGlvbkluZm86IGFueSxcbiAgICBtZGw6IE1hbmlmZXN0LFxuICAgIGxpbWl0OiBudW1iZXIsXG4gICk6IFByb21pc2U8UHJldmlld0RhdGFSZXNwb25zZT4ge1xuICAgIGNvbnN0IGV2ZW50ID0gVGVsZW1ldHJ5RXZlbnQuSUJJU19RVUVSWTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5pYmlzQWRhcHRvci5xdWVyeShzcWwsIHtcbiAgICAgICAgZGF0YVNvdXJjZSxcbiAgICAgICAgY29ubmVjdGlvbkluZm8sXG4gICAgICAgIG1kbCxcbiAgICAgICAgbGltaXQsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2VuZEliaXNFdmVudChldmVudCwgcmVzLCB7IGRhdGFTb3VyY2UsIHNxbCB9KTtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnRyYW5zZm9ybURhdGFUeXBlKHJlcyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb3JyZWxhdGlvbklkOiByZXMuY29ycmVsYXRpb25JZCxcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHRoaXMuc2VuZEliaXNGYWlsZWRFdmVudChldmVudCwgZXJyLCB7IGRhdGFTb3VyY2UsIHNxbCB9KTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybURhdGFUeXBlKGRhdGE6IEliaXNRdWVyeVJlc3BvbnNlKTogUHJldmlld0RhdGFSZXNwb25zZSB7XG4gICAgY29uc3QgY29sdW1ucyA9IGRhdGEuY29sdW1ucztcbiAgICBjb25zdCBkdHlwZXMgPSBkYXRhLmR0eXBlcztcbiAgICBjb25zdCB0cmFuc2Zvcm1lZENvbHVtbnMgPSBjb2x1bW5zLm1hcCgoY29sdW1uKSA9PiB7XG4gICAgICBsZXQgdHlwZSA9ICd1bmtub3duJztcbiAgICAgIGlmIChkdHlwZXMgJiYgZHR5cGVzW2NvbHVtbl0pIHtcbiAgICAgICAgdHlwZSA9IGR0eXBlc1tjb2x1bW5dID09PSAnb2JqZWN0JyA/ICdzdHJpbmcnIDogZHR5cGVzW2NvbHVtbl07XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PT0gJ3Vua25vd24nKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgRGlkIG5vdCBmaW5kIHR5cGUgbWFwcGluZyBmb3IgXCIke2NvbHVtbn1cImApO1xuICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgYGR0eXBlcyBtYXBwaW5nOiAke2R0eXBlcyA/IEpTT04uc3RyaW5naWZ5KGR0eXBlcywgbnVsbCwgMikgOiAndW5kZWZpbmVkJ30gYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IGNvbHVtbixcbiAgICAgICAgdHlwZSxcbiAgICAgIH0gYXMgQ29sdW1uTWV0YWRhdGE7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbHVtbnM6IHRyYW5zZm9ybWVkQ29sdW1ucyxcbiAgICAgIGRhdGE6IGRhdGEuZGF0YSxcbiAgICB9IGFzIFByZXZpZXdEYXRhUmVzcG9uc2U7XG4gIH1cblxuICBwcml2YXRlIHNlbmRJYmlzRXZlbnQoXG4gICAgZXZlbnQ6IFRlbGVtZXRyeUV2ZW50LFxuICAgIHJlczogSWJpc1Jlc3BvbnNlLFxuICAgIG90aGVyczogUmVjb3JkPHN0cmluZywgYW55PixcbiAgKSB7XG4gICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KGV2ZW50LCB7XG4gICAgICBjb3JyZWxhdGlvbklkOiByZXMuY29ycmVsYXRpb25JZCxcbiAgICAgIHByb2Nlc3NUaW1lOiByZXMucHJvY2Vzc1RpbWUsXG4gICAgICAuLi5vdGhlcnMsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNlbmRJYmlzRmFpbGVkRXZlbnQoXG4gICAgZXZlbnQ6IFRlbGVtZXRyeUV2ZW50LFxuICAgIGVycjogYW55LFxuICAgIG90aGVyczogUmVjb3JkPHN0cmluZywgYW55PixcbiAgKSB7XG4gICAgdGhpcy50ZWxlbWV0cnkuc2VuZEV2ZW50KFxuICAgICAgZXZlbnQsXG4gICAgICB7XG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IGVyci5leHRlbnNpb25zPy5vdGhlcj8uY29ycmVsYXRpb25JZCxcbiAgICAgICAgcHJvY2Vzc1RpbWU6IGVyci5leHRlbnNpb25zPy5vdGhlcj8ucHJvY2Vzc1RpbWUsXG4gICAgICAgIGVycm9yOiBlcnIubWVzc2FnZSxcbiAgICAgICAgLi4ub3RoZXJzLFxuICAgICAgfSxcbiAgICAgIGVyci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgZmFsc2UsXG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkRhdGFTb3VyY2VOYW1lIiwiU3VwcG9ydGVkRGF0YVNvdXJjZSIsImdldExvZ2dlciIsIlRlbGVtZXRyeUV2ZW50IiwibG9nZ2VyIiwibGV2ZWwiLCJERUZBVUxUX1BSRVZJRVdfTElNSVQiLCJRdWVyeVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImliaXNBZGFwdG9yIiwid3JlbkVuZ2luZUFkYXB0b3IiLCJ0ZWxlbWV0cnkiLCJwcmV2aWV3Iiwic3FsIiwib3B0aW9ucyIsInByb2plY3QiLCJtYW5pZmVzdCIsIm1kbCIsImxpbWl0IiwiZHJ5UnVuIiwidHlwZSIsImRhdGFTb3VyY2UiLCJjb25uZWN0aW9uSW5mbyIsInVzZUVuZ2luZSIsImRlYnVnIiwiZGF0YSIsInByZXZpZXdEYXRhIiwiY2hlY2tEYXRhU291cmNlSXNTdXBwb3J0ZWQiLCJpYmlzRHJ5UnVuIiwiaWJpc1F1ZXJ5IiwiZGVzY3JpYmVTdGF0ZW1lbnQiLCJyZXMiLCJjb2x1bW5zIiwiZXJyIiwibWVzc2FnZSIsInZhbGlkYXRlIiwicnVsZSIsInBhcmFtZXRlcnMiLCJEVUNLREIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJFcnJvciIsImV2ZW50IiwiSUJJU19EUllfUlVOIiwic2VuZEliaXNFdmVudCIsImNvcnJlbGF0aW9uSWQiLCJzZW5kSWJpc0ZhaWxlZEV2ZW50IiwiSUJJU19RVUVSWSIsInF1ZXJ5IiwidHJhbnNmb3JtRGF0YVR5cGUiLCJkdHlwZXMiLCJ0cmFuc2Zvcm1lZENvbHVtbnMiLCJtYXAiLCJjb2x1bW4iLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsIm90aGVycyIsInNlbmRFdmVudCIsInByb2Nlc3NUaW1lIiwiZXh0ZW5zaW9ucyIsIm90aGVyIiwiZXJyb3IiLCJzZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/services/queryService.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/telemetry/telemetry.ts":
/*!**************************************************!*\
  !*** ./src/apollo/server/telemetry/telemetry.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostHogTelemetry: () => (/* binding */ PostHogTelemetry),\n/* harmony export */   TelemetryEvent: () => (/* binding */ TelemetryEvent),\n/* harmony export */   WrenService: () => (/* binding */ WrenService)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"(api)/./src/apollo/server/config.ts\");\n/* harmony import */ var posthog_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! posthog-node */ \"posthog-node\");\n/* harmony import */ var posthog_node__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(posthog_node__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_2__]);\nuuid__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_3__.getLogger)(\"TELEMETRY\");\nlogger.level = \"debug\";\nconst config = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)();\nconst { userUUID, telemetryEnabled, wrenAIVersion, generationModel, wrenEngineVersion, wrenUIVersion, posthogApiKey, posthogHost } = config;\nvar TelemetryEvent;\n(function(TelemetryEvent) {\n    // onboarding\n    TelemetryEvent[\"CONNECTION_START_SAMPLE_DATASET\"] = \"connection_start_sample_dataset\";\n    TelemetryEvent[\"CONNECTION_SAVE_DATA_SOURCE\"] = \"connection_save_data_source\";\n    TelemetryEvent[\"CONNECTION_SAVE_TABLES\"] = \"connection_save_tables\";\n    TelemetryEvent[\"CONNECTION_SAVE_RELATION\"] = \"connection_save_relation\";\n    // modeling page\n    TelemetryEvent[\"MODELING_DEPLOY_MDL\"] = \"modeling_deploy_mdl\";\n    TelemetryEvent[\"MODELING_CREATE_MODEL\"] = \"modeling_create_model\";\n    TelemetryEvent[\"MODELING_UPDATE_MODEL\"] = \"modeling_update_model\";\n    TelemetryEvent[\"MODELING_CREATE_CF\"] = \"modeling_create_cf\";\n    TelemetryEvent[\"MODELING_UPDATE_CF\"] = \"modeling_update_cf\";\n    TelemetryEvent[\"MODELING_UPDATE_MODEL_METADATA\"] = \"modeling_update_model_metadata\";\n    TelemetryEvent[\"MODELING_UPDATE_VIEW_METADATA\"] = \"modeling_update_view_metadata\";\n    TelemetryEvent[\"MODELING_CREATE_RELATION\"] = \"modeling_create_relation\";\n    TelemetryEvent[\"MODELING_UPDATE_RELATION\"] = \"modeling_update_relation\";\n    // schema change\n    TelemetryEvent[\"MODELING_DETECT_SCHEMA_CHANGE\"] = \"modeling_detect_schema_change\";\n    TelemetryEvent[\"MODELING_RESOLVE_SCHEMA_CHANGE\"] = \"modeling_resolve_schema_change\";\n    TelemetryEvent[\"HOME_UPDATE_THREAD_SUMMARY\"] = \"update_thread_summary\";\n    // ask question\n    TelemetryEvent[\"HOME_ASK_CANDIDATE\"] = \"home_ask_candidate\";\n    TelemetryEvent[\"HOME_CREATE_THREAD\"] = \"home_create_thread\";\n    TelemetryEvent[\"HOME_ANSWER_QUESTION\"] = \"home_answer_question\";\n    TelemetryEvent[\"HOME_ANSWER_QUESTION_INTERRUPTED\"] = \"home_answer_question_interrupted\";\n    TelemetryEvent[\"HOME_ANSWER_BREAKDOWN\"] = \"home_answer_breakdown\";\n    TelemetryEvent[\"HOME_ANSWER_CHART\"] = \"home_answer_chart\";\n    TelemetryEvent[\"HOME_ANSWER_ADJUST_CHART\"] = \"home_answer_adjust_chart\";\n    TelemetryEvent[\"HOME_ASK_FOLLOWUP_QUESTION\"] = \"home_ask_followup_question\";\n    TelemetryEvent[\"HOME_CANCEL_ASK\"] = \"home_cancel_ask\";\n    TelemetryEvent[\"HOME_GENERATE_PROJECT_RECOMMENDATION_QUESTIONS\"] = \"home_generate_project_recommendation_questions\";\n    TelemetryEvent[\"HOME_GENERATE_THREAD_RECOMMENDATION_QUESTIONS\"] = \"home_generate_thread_recommendation_questions\";\n    // event after ask\n    TelemetryEvent[\"HOME_CREATE_VIEW\"] = \"home_create_view\";\n    TelemetryEvent[\"HOME_PREVIEW_ANSWER\"] = \"home_preview_answer\";\n    // settings event\n    TelemetryEvent[\"SETTING_RESET_PROJECT\"] = \"setting_reset_project\";\n    // ibis event\n    TelemetryEvent[\"IBIS_DRY_RUN\"] = \"ibis_dry_run\";\n    TelemetryEvent[\"IBIS_QUERY\"] = \"ibis_query\";\n    // Default error\n    TelemetryEvent[\"GRAPHQL_ERROR\"] = \"graphql_error\";\n})(TelemetryEvent || (TelemetryEvent = {}));\nvar WrenService;\n(function(WrenService) {\n    WrenService[\"BE\"] = \"BE\";\n    WrenService[\"AI\"] = \"AI\";\n    WrenService[\"ENGINE\"] = \"ENGINE\";\n    WrenService[\"UNKNOWN\"] = \"UNKNOWN\";\n})(WrenService || (WrenService = {}));\nclass PostHogTelemetry {\n    constructor(){\n        if (telemetryEnabled) {\n            if (!posthogApiKey) {\n                logger.debug(\"Telemetry enabled but posthogApiKey not provided.\");\n                return;\n            }\n            const client = new posthog_node__WEBPACK_IMPORTED_MODULE_1__.PostHog(posthogApiKey, {\n                host: posthogHost || \"https://us.posthog.com\"\n            });\n            this.posthog = client;\n            this.userId = userUUID || (0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)();\n            logger.info(`Telemetry initialized: ${this.userId}`);\n            return;\n        }\n        logger.info(\"Telemetry not enabled.\");\n    }\n    async sendEvent(event, properties = {}, service = \"UNKNOWN\", actionSuccess = true) {\n        if (!this.posthog) {\n            return;\n        }\n        const eventName = actionSuccess ? `${event}_success` : `${event}_failed`;\n        try {\n            const systemInfo = this.collectSystemInfo();\n            this.posthog.capture({\n                distinctId: this.userId,\n                event: eventName,\n                properties: {\n                    ...systemInfo,\n                    ...properties,\n                    wren_service: service\n                }\n            });\n        } catch (e) {\n            logger.error(e);\n        }\n    }\n    collectSystemInfo() {\n        return {\n            // collect services version\n            \"wren-ui-version\": wrenUIVersion || null,\n            \"wren-engine-version\": wrenEngineVersion || null,\n            \"wren-ai-service-version\": wrenAIVersion || null,\n            // collect AI model info\n            \"generation-model\": generationModel || null,\n            // collect some system info from process module\n            node_version: process.version,\n            node_platform: process.platform,\n            node_arch: process.arch,\n            memory_usage: process.memoryUsage(),\n            cpu_usage: process.cpuUsage()\n        };\n    }\n    stop() {\n        if (this.posthog) {\n            this.posthog.shutdown();\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci90ZWxlbWV0cnkvdGVsZW1ldHJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNDO0FBQ0M7QUFDSDtBQUNNO0FBRTFDLE1BQU1LLFNBQVNELHdEQUFTQSxDQUFDO0FBQ3pCQyxPQUFPQyxLQUFLLEdBQUc7QUFFZixNQUFNQyxTQUFTUCxrREFBU0E7QUFFeEIsTUFBTSxFQUNKUSxRQUFRLEVBQ1JDLGdCQUFnQixFQUNoQkMsYUFBYSxFQUNiQyxlQUFlLEVBQ2ZDLGlCQUFpQixFQUNqQkMsYUFBYSxFQUNiQyxhQUFhLEVBQ2JDLFdBQVcsRUFDWixHQUFHUjs7VUFFUVM7SUFDVixhQUFhOzs7OztJQU1iLGdCQUFnQjs7Ozs7Ozs7OztJQVVoQixnQkFBZ0I7Ozs7SUFLaEIsZUFBZTs7Ozs7Ozs7Ozs7O0lBYWYsa0JBQWtCOzs7SUFJbEIsaUJBQWlCOztJQUdqQixhQUFhOzs7SUFJYixnQkFBZ0I7O0dBOUNOQSxtQkFBQUE7O1VBa0RBQzs7Ozs7R0FBQUEsZ0JBQUFBO0FBZ0JMLE1BQU1DO0lBSVhDLGFBQWM7UUFDWixJQUFJVixrQkFBa0I7WUFDcEIsSUFBSSxDQUFDSyxlQUFlO2dCQUNsQlQsT0FBT2UsS0FBSyxDQUFDO2dCQUNiO1lBQ0Y7WUFDQSxNQUFNQyxTQUFTLElBQUlwQixpREFBT0EsQ0FBQ2EsZUFBZTtnQkFDeENRLE1BQU1QLGVBQWU7WUFDdkI7WUFDQSxJQUFJLENBQUNRLE9BQU8sR0FBR0Y7WUFDZixJQUFJLENBQUNHLE1BQU0sR0FBR2hCLFlBQVlMLHdDQUFNQTtZQUNoQ0UsT0FBT29CLElBQUksQ0FBQyxDQUFDLHVCQUF1QixFQUFFLElBQUksQ0FBQ0QsTUFBTSxDQUFDLENBQUM7WUFDbkQ7UUFDRjtRQUNBbkIsT0FBT29CLElBQUksQ0FBQztJQUNkO0lBRUEsTUFBYUMsVUFDWEMsS0FBcUIsRUFDckJDLGFBQWtDLENBQUMsQ0FBQyxFQUNwQ0MsbUJBQWdELEVBQ2hEQyxnQkFBeUIsSUFBSSxFQUM3QjtRQUNBLElBQUksQ0FBQyxJQUFJLENBQUNQLE9BQU8sRUFBRTtZQUNqQjtRQUNGO1FBQ0EsTUFBTVEsWUFBWUQsZ0JBQWdCLENBQUMsRUFBRUgsTUFBTSxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUVBLE1BQU0sT0FBTyxDQUFDO1FBQ3hFLElBQUk7WUFDRixNQUFNSyxhQUFhLElBQUksQ0FBQ0MsaUJBQWlCO1lBQ3pDLElBQUksQ0FBQ1YsT0FBTyxDQUFDVyxPQUFPLENBQUM7Z0JBQ25CQyxZQUFZLElBQUksQ0FBQ1gsTUFBTTtnQkFDdkJHLE9BQU9JO2dCQUNQSCxZQUFZO29CQUNWLEdBQUdJLFVBQVU7b0JBQ2IsR0FBR0osVUFBVTtvQkFDYlEsY0FBY1A7Z0JBQ2hCO1lBQ0Y7UUFDRixFQUFFLE9BQU9RLEdBQUc7WUFDVmhDLE9BQU9pQyxLQUFLLENBQUNEO1FBQ2Y7SUFDRjtJQUVRSixvQkFBeUM7UUFDL0MsT0FBTztZQUNMLDJCQUEyQjtZQUMzQixtQkFBbUJwQixpQkFBaUI7WUFDcEMsdUJBQXVCRCxxQkFBcUI7WUFDNUMsMkJBQTJCRixpQkFBaUI7WUFFNUMsd0JBQXdCO1lBQ3hCLG9CQUFvQkMsbUJBQW1CO1lBRXZDLCtDQUErQztZQUMvQzRCLGNBQWNDLFFBQVFDLE9BQU87WUFDN0JDLGVBQWVGLFFBQVFHLFFBQVE7WUFDL0JDLFdBQVdKLFFBQVFLLElBQUk7WUFDdkJDLGNBQWNOLFFBQVFPLFdBQVc7WUFDakNDLFdBQVdSLFFBQVFTLFFBQVE7UUFDN0I7SUFDRjtJQUVPQyxPQUFPO1FBQ1osSUFBSSxJQUFJLENBQUMzQixPQUFPLEVBQUU7WUFDaEIsSUFBSSxDQUFDQSxPQUFPLENBQUM0QixRQUFRO1FBQ3ZCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci90ZWxlbWV0cnkvdGVsZW1ldHJ5LnRzP2FkZDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IFBvc3RIb2cgfSBmcm9tICdwb3N0aG9nLW5vZGUnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2VydmVyL3V0aWxzJztcblxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdURUxFTUVUUlknKTtcbmxvZ2dlci5sZXZlbCA9ICdkZWJ1Zyc7XG5cbmNvbnN0IGNvbmZpZyA9IGdldENvbmZpZygpO1xuXG5jb25zdCB7XG4gIHVzZXJVVUlELFxuICB0ZWxlbWV0cnlFbmFibGVkLFxuICB3cmVuQUlWZXJzaW9uLFxuICBnZW5lcmF0aW9uTW9kZWwsXG4gIHdyZW5FbmdpbmVWZXJzaW9uLFxuICB3cmVuVUlWZXJzaW9uLFxuICBwb3N0aG9nQXBpS2V5LFxuICBwb3N0aG9nSG9zdCxcbn0gPSBjb25maWc7XG5cbmV4cG9ydCBlbnVtIFRlbGVtZXRyeUV2ZW50IHtcbiAgLy8gb25ib2FyZGluZ1xuICBDT05ORUNUSU9OX1NUQVJUX1NBTVBMRV9EQVRBU0VUID0gJ2Nvbm5lY3Rpb25fc3RhcnRfc2FtcGxlX2RhdGFzZXQnLFxuICBDT05ORUNUSU9OX1NBVkVfREFUQV9TT1VSQ0UgPSAnY29ubmVjdGlvbl9zYXZlX2RhdGFfc291cmNlJyxcbiAgQ09OTkVDVElPTl9TQVZFX1RBQkxFUyA9ICdjb25uZWN0aW9uX3NhdmVfdGFibGVzJyxcbiAgQ09OTkVDVElPTl9TQVZFX1JFTEFUSU9OID0gJ2Nvbm5lY3Rpb25fc2F2ZV9yZWxhdGlvbicsXG5cbiAgLy8gbW9kZWxpbmcgcGFnZVxuICBNT0RFTElOR19ERVBMT1lfTURMID0gJ21vZGVsaW5nX2RlcGxveV9tZGwnLFxuICBNT0RFTElOR19DUkVBVEVfTU9ERUwgPSAnbW9kZWxpbmdfY3JlYXRlX21vZGVsJyxcbiAgTU9ERUxJTkdfVVBEQVRFX01PREVMID0gJ21vZGVsaW5nX3VwZGF0ZV9tb2RlbCcsXG4gIE1PREVMSU5HX0NSRUFURV9DRiA9ICdtb2RlbGluZ19jcmVhdGVfY2YnLFxuICBNT0RFTElOR19VUERBVEVfQ0YgPSAnbW9kZWxpbmdfdXBkYXRlX2NmJyxcbiAgTU9ERUxJTkdfVVBEQVRFX01PREVMX01FVEFEQVRBID0gJ21vZGVsaW5nX3VwZGF0ZV9tb2RlbF9tZXRhZGF0YScsXG4gIE1PREVMSU5HX1VQREFURV9WSUVXX01FVEFEQVRBID0gJ21vZGVsaW5nX3VwZGF0ZV92aWV3X21ldGFkYXRhJyxcbiAgTU9ERUxJTkdfQ1JFQVRFX1JFTEFUSU9OID0gJ21vZGVsaW5nX2NyZWF0ZV9yZWxhdGlvbicsXG4gIE1PREVMSU5HX1VQREFURV9SRUxBVElPTiA9ICdtb2RlbGluZ191cGRhdGVfcmVsYXRpb24nLFxuICAvLyBzY2hlbWEgY2hhbmdlXG4gIE1PREVMSU5HX0RFVEVDVF9TQ0hFTUFfQ0hBTkdFID0gJ21vZGVsaW5nX2RldGVjdF9zY2hlbWFfY2hhbmdlJyxcbiAgTU9ERUxJTkdfUkVTT0xWRV9TQ0hFTUFfQ0hBTkdFID0gJ21vZGVsaW5nX3Jlc29sdmVfc2NoZW1hX2NoYW5nZScsXG5cbiAgSE9NRV9VUERBVEVfVEhSRUFEX1NVTU1BUlkgPSAndXBkYXRlX3RocmVhZF9zdW1tYXJ5JyxcbiAgLy8gYXNrIHF1ZXN0aW9uXG4gIEhPTUVfQVNLX0NBTkRJREFURSA9ICdob21lX2Fza19jYW5kaWRhdGUnLFxuICBIT01FX0NSRUFURV9USFJFQUQgPSAnaG9tZV9jcmVhdGVfdGhyZWFkJyxcbiAgSE9NRV9BTlNXRVJfUVVFU1RJT04gPSAnaG9tZV9hbnN3ZXJfcXVlc3Rpb24nLFxuICBIT01FX0FOU1dFUl9RVUVTVElPTl9JTlRFUlJVUFRFRCA9ICdob21lX2Fuc3dlcl9xdWVzdGlvbl9pbnRlcnJ1cHRlZCcsXG4gIEhPTUVfQU5TV0VSX0JSRUFLRE9XTiA9ICdob21lX2Fuc3dlcl9icmVha2Rvd24nLFxuICBIT01FX0FOU1dFUl9DSEFSVCA9ICdob21lX2Fuc3dlcl9jaGFydCcsXG4gIEhPTUVfQU5TV0VSX0FESlVTVF9DSEFSVCA9ICdob21lX2Fuc3dlcl9hZGp1c3RfY2hhcnQnLFxuICBIT01FX0FTS19GT0xMT1dVUF9RVUVTVElPTiA9ICdob21lX2Fza19mb2xsb3d1cF9xdWVzdGlvbicsXG4gIEhPTUVfQ0FOQ0VMX0FTSyA9ICdob21lX2NhbmNlbF9hc2snLFxuICBIT01FX0dFTkVSQVRFX1BST0pFQ1RfUkVDT01NRU5EQVRJT05fUVVFU1RJT05TID0gJ2hvbWVfZ2VuZXJhdGVfcHJvamVjdF9yZWNvbW1lbmRhdGlvbl9xdWVzdGlvbnMnLFxuICBIT01FX0dFTkVSQVRFX1RIUkVBRF9SRUNPTU1FTkRBVElPTl9RVUVTVElPTlMgPSAnaG9tZV9nZW5lcmF0ZV90aHJlYWRfcmVjb21tZW5kYXRpb25fcXVlc3Rpb25zJyxcblxuICAvLyBldmVudCBhZnRlciBhc2tcbiAgSE9NRV9DUkVBVEVfVklFVyA9ICdob21lX2NyZWF0ZV92aWV3JyxcbiAgSE9NRV9QUkVWSUVXX0FOU1dFUiA9ICdob21lX3ByZXZpZXdfYW5zd2VyJyxcblxuICAvLyBzZXR0aW5ncyBldmVudFxuICBTRVRUSU5HX1JFU0VUX1BST0pFQ1QgPSAnc2V0dGluZ19yZXNldF9wcm9qZWN0JyxcblxuICAvLyBpYmlzIGV2ZW50XG4gIElCSVNfRFJZX1JVTiA9ICdpYmlzX2RyeV9ydW4nLFxuICBJQklTX1FVRVJZID0gJ2liaXNfcXVlcnknLFxuXG4gIC8vIERlZmF1bHQgZXJyb3JcbiAgR1JBUEhRTF9FUlJPUiA9ICdncmFwaHFsX2Vycm9yJyxcbn1cblxuZXhwb3J0IGVudW0gV3JlblNlcnZpY2Uge1xuICBCRSA9ICdCRScsXG4gIEFJID0gJ0FJJyxcbiAgRU5HSU5FID0gJ0VOR0lORScsXG4gIFVOS05PV04gPSAnVU5LTk9XTicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlbGVtZXRyeSB7XG4gIHNlbmRFdmVudDogKFxuICAgIGV2ZW50OiBUZWxlbWV0cnlFdmVudCxcbiAgICBwcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgIHNlcnZpY2U/OiBXcmVuU2VydmljZSB8IGFueSxcbiAgICBhY3Rpb25TdWNjZXNzPzogYm9vbGVhbixcbiAgKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgUG9zdEhvZ1RlbGVtZXRyeSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgcG9zdGhvZzogYW55O1xuICBwcml2YXRlIHJlYWRvbmx5IHVzZXJJZDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmICh0ZWxlbWV0cnlFbmFibGVkKSB7XG4gICAgICBpZiAoIXBvc3Rob2dBcGlLZXkpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdUZWxlbWV0cnkgZW5hYmxlZCBidXQgcG9zdGhvZ0FwaUtleSBub3QgcHJvdmlkZWQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBQb3N0SG9nKHBvc3Rob2dBcGlLZXksIHtcbiAgICAgICAgaG9zdDogcG9zdGhvZ0hvc3QgfHwgJ2h0dHBzOi8vdXMucG9zdGhvZy5jb20nLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnBvc3Rob2cgPSBjbGllbnQ7XG4gICAgICB0aGlzLnVzZXJJZCA9IHVzZXJVVUlEIHx8IHV1aWR2NCgpO1xuICAgICAgbG9nZ2VyLmluZm8oYFRlbGVtZXRyeSBpbml0aWFsaXplZDogJHt0aGlzLnVzZXJJZH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oJ1RlbGVtZXRyeSBub3QgZW5hYmxlZC4nKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzZW5kRXZlbnQoXG4gICAgZXZlbnQ6IFRlbGVtZXRyeUV2ZW50LFxuICAgIHByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fSxcbiAgICBzZXJ2aWNlOiBXcmVuU2VydmljZSB8IGFueSA9IFdyZW5TZXJ2aWNlLlVOS05PV04sXG4gICAgYWN0aW9uU3VjY2VzczogYm9vbGVhbiA9IHRydWUsXG4gICkge1xuICAgIGlmICghdGhpcy5wb3N0aG9nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV2ZW50TmFtZSA9IGFjdGlvblN1Y2Nlc3MgPyBgJHtldmVudH1fc3VjY2Vzc2AgOiBgJHtldmVudH1fZmFpbGVkYDtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3lzdGVtSW5mbyA9IHRoaXMuY29sbGVjdFN5c3RlbUluZm8oKTtcbiAgICAgIHRoaXMucG9zdGhvZy5jYXB0dXJlKHtcbiAgICAgICAgZGlzdGluY3RJZDogdGhpcy51c2VySWQsXG4gICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAuLi5zeXN0ZW1JbmZvLFxuICAgICAgICAgIC4uLnByb3BlcnRpZXMsXG4gICAgICAgICAgd3Jlbl9zZXJ2aWNlOiBzZXJ2aWNlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nZ2VyLmVycm9yKGUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY29sbGVjdFN5c3RlbUluZm8oKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGNvbGxlY3Qgc2VydmljZXMgdmVyc2lvblxuICAgICAgJ3dyZW4tdWktdmVyc2lvbic6IHdyZW5VSVZlcnNpb24gfHwgbnVsbCxcbiAgICAgICd3cmVuLWVuZ2luZS12ZXJzaW9uJzogd3JlbkVuZ2luZVZlcnNpb24gfHwgbnVsbCxcbiAgICAgICd3cmVuLWFpLXNlcnZpY2UtdmVyc2lvbic6IHdyZW5BSVZlcnNpb24gfHwgbnVsbCxcblxuICAgICAgLy8gY29sbGVjdCBBSSBtb2RlbCBpbmZvXG4gICAgICAnZ2VuZXJhdGlvbi1tb2RlbCc6IGdlbmVyYXRpb25Nb2RlbCB8fCBudWxsLFxuXG4gICAgICAvLyBjb2xsZWN0IHNvbWUgc3lzdGVtIGluZm8gZnJvbSBwcm9jZXNzIG1vZHVsZVxuICAgICAgbm9kZV92ZXJzaW9uOiBwcm9jZXNzLnZlcnNpb24sXG4gICAgICBub2RlX3BsYXRmb3JtOiBwcm9jZXNzLnBsYXRmb3JtLFxuICAgICAgbm9kZV9hcmNoOiBwcm9jZXNzLmFyY2gsXG4gICAgICBtZW1vcnlfdXNhZ2U6IHByb2Nlc3MubWVtb3J5VXNhZ2UoKSxcbiAgICAgIGNwdV91c2FnZTogcHJvY2Vzcy5jcHVVc2FnZSgpLFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5wb3N0aG9nKSB7XG4gICAgICB0aGlzLnBvc3Rob2cuc2h1dGRvd24oKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRDb25maWciLCJQb3N0SG9nIiwidjQiLCJ1dWlkdjQiLCJnZXRMb2dnZXIiLCJsb2dnZXIiLCJsZXZlbCIsImNvbmZpZyIsInVzZXJVVUlEIiwidGVsZW1ldHJ5RW5hYmxlZCIsIndyZW5BSVZlcnNpb24iLCJnZW5lcmF0aW9uTW9kZWwiLCJ3cmVuRW5naW5lVmVyc2lvbiIsIndyZW5VSVZlcnNpb24iLCJwb3N0aG9nQXBpS2V5IiwicG9zdGhvZ0hvc3QiLCJUZWxlbWV0cnlFdmVudCIsIldyZW5TZXJ2aWNlIiwiUG9zdEhvZ1RlbGVtZXRyeSIsImNvbnN0cnVjdG9yIiwiZGVidWciLCJjbGllbnQiLCJob3N0IiwicG9zdGhvZyIsInVzZXJJZCIsImluZm8iLCJzZW5kRXZlbnQiLCJldmVudCIsInByb3BlcnRpZXMiLCJzZXJ2aWNlIiwiYWN0aW9uU3VjY2VzcyIsImV2ZW50TmFtZSIsInN5c3RlbUluZm8iLCJjb2xsZWN0U3lzdGVtSW5mbyIsImNhcHR1cmUiLCJkaXN0aW5jdElkIiwid3Jlbl9zZXJ2aWNlIiwiZSIsImVycm9yIiwibm9kZV92ZXJzaW9uIiwicHJvY2VzcyIsInZlcnNpb24iLCJub2RlX3BsYXRmb3JtIiwicGxhdGZvcm0iLCJub2RlX2FyY2giLCJhcmNoIiwibWVtb3J5X3VzYWdlIiwibWVtb3J5VXNhZ2UiLCJjcHVfdXNhZ2UiLCJjcHVVc2FnZSIsInN0b3AiLCJzaHV0ZG93biJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/telemetry/telemetry.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/types/context.ts":
/*!********************************************!*\
  !*** ./src/apollo/server/types/context.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9jb250ZXh0LnRzIiwibWFwcGluZ3MiOiI7QUFxRUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvdHlwZXMvY29udGV4dC50cz82OTU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElDb25maWcgfSBmcm9tICdAc2VydmVyL2NvbmZpZyc7XG5pbXBvcnQge1xuICBJSWJpc0FkYXB0b3IsXG4gIElXcmVuQUlBZGFwdG9yLFxuICBJV3JlbkVuZ2luZUFkYXB0b3IsXG59IGZyb20gJ0BzZXJ2ZXIvYWRhcHRvcnMnO1xuaW1wb3J0IHtcbiAgSU1vZGVsQ29sdW1uUmVwb3NpdG9yeSxcbiAgSU1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeSxcbiAgSU1vZGVsUmVwb3NpdG9yeSxcbiAgSVByb2plY3RSZXBvc2l0b3J5LFxuICBJUmVsYXRpb25SZXBvc2l0b3J5LFxuICBJVmlld1JlcG9zaXRvcnksXG4gIElMZWFybmluZ1JlcG9zaXRvcnksXG4gIElTY2hlbWFDaGFuZ2VSZXBvc2l0b3J5LFxuICBJRGVwbG95TG9nUmVwb3NpdG9yeSxcbiAgSURhc2hib2FyZFJlcG9zaXRvcnksXG4gIElEYXNoYm9hcmRJdGVtUmVwb3NpdG9yeSxcbn0gZnJvbSAnQHNlcnZlci9yZXBvc2l0b3JpZXMnO1xuaW1wb3J0IHtcbiAgSVF1ZXJ5U2VydmljZSxcbiAgSUFza2luZ1NlcnZpY2UsXG4gIElEZXBsb3lTZXJ2aWNlLFxuICBJTW9kZWxTZXJ2aWNlLFxuICBJTURMU2VydmljZSxcbiAgSVByb2plY3RTZXJ2aWNlLFxuICBJRGFzaGJvYXJkU2VydmljZSxcbn0gZnJvbSAnQHNlcnZlci9zZXJ2aWNlcyc7XG5pbXBvcnQgeyBJVGVsZW1ldHJ5IH0gZnJvbSAnQHNlcnZlci90ZWxlbWV0cnkvdGVsZW1ldHJ5JztcbmltcG9ydCB7XG4gIFByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLFxuICBUaHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLFxufSBmcm9tICdAc2VydmVyL2JhY2tncm91bmRzJztcblxuZXhwb3J0IGludGVyZmFjZSBJQ29udGV4dCB7XG4gIGNvbmZpZzogSUNvbmZpZztcbiAgLy8gdGVsZW1ldHJ5XG4gIHRlbGVtZXRyeTogSVRlbGVtZXRyeTtcblxuICAvLyBhZGFwdG9yXG4gIHdyZW5FbmdpbmVBZGFwdG9yOiBJV3JlbkVuZ2luZUFkYXB0b3I7XG4gIGliaXNTZXJ2ZXJBZGFwdG9yOiBJSWJpc0FkYXB0b3I7XG4gIHdyZW5BSUFkYXB0b3I6IElXcmVuQUlBZGFwdG9yO1xuXG4gIC8vIHNlcnZpY2VzXG4gIHByb2plY3RTZXJ2aWNlOiBJUHJvamVjdFNlcnZpY2U7XG4gIG1vZGVsU2VydmljZTogSU1vZGVsU2VydmljZTtcbiAgbWRsU2VydmljZTogSU1ETFNlcnZpY2U7XG4gIGRlcGxveVNlcnZpY2U6IElEZXBsb3lTZXJ2aWNlO1xuICBhc2tpbmdTZXJ2aWNlOiBJQXNraW5nU2VydmljZTtcbiAgcXVlcnlTZXJ2aWNlOiBJUXVlcnlTZXJ2aWNlO1xuICBkYXNoYm9hcmRTZXJ2aWNlOiBJRGFzaGJvYXJkU2VydmljZTtcblxuICAvLyByZXBvc2l0b3J5XG4gIHByb2plY3RSZXBvc2l0b3J5OiBJUHJvamVjdFJlcG9zaXRvcnk7XG4gIG1vZGVsUmVwb3NpdG9yeTogSU1vZGVsUmVwb3NpdG9yeTtcbiAgbW9kZWxDb2x1bW5SZXBvc2l0b3J5OiBJTW9kZWxDb2x1bW5SZXBvc2l0b3J5O1xuICBtb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnk6IElNb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnk7XG4gIHJlbGF0aW9uUmVwb3NpdG9yeTogSVJlbGF0aW9uUmVwb3NpdG9yeTtcbiAgdmlld1JlcG9zaXRvcnk6IElWaWV3UmVwb3NpdG9yeTtcbiAgZGVwbG95UmVwb3NpdG9yeTogSURlcGxveUxvZ1JlcG9zaXRvcnk7XG4gIHNjaGVtYUNoYW5nZVJlcG9zaXRvcnk6IElTY2hlbWFDaGFuZ2VSZXBvc2l0b3J5O1xuICBsZWFybmluZ1JlcG9zaXRvcnk6IElMZWFybmluZ1JlcG9zaXRvcnk7XG4gIGRhc2hib2FyZFJlcG9zaXRvcnk6IElEYXNoYm9hcmRSZXBvc2l0b3J5O1xuICBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeTogSURhc2hib2FyZEl0ZW1SZXBvc2l0b3J5O1xuXG4gIC8vIGJhY2tncm91bmQgdHJhY2tlcnNcbiAgcHJvamVjdFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXI6IFByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyO1xuICB0aHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyOiBUaHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/types/context.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/types/dataSource.ts":
/*!***********************************************!*\
  !*** ./src/apollo/server/types/dataSource.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DataSourceName: () => (/* binding */ DataSourceName)\n/* harmony export */ });\nvar DataSourceName;\n(function(DataSourceName) {\n    DataSourceName[\"BIG_QUERY\"] = \"BIG_QUERY\";\n    DataSourceName[\"DUCKDB\"] = \"DUCKDB\";\n    DataSourceName[\"POSTGRES\"] = \"POSTGRES\";\n    DataSourceName[\"MYSQL\"] = \"MYSQL\";\n    DataSourceName[\"MSSQL\"] = \"MSSQL\";\n    DataSourceName[\"CLICK_HOUSE\"] = \"CLICK_HOUSE\";\n    DataSourceName[\"TRINO\"] = \"TRINO\";\n    DataSourceName[\"SNOWFLAKE\"] = \"SNOWFLAKE\";\n})(DataSourceName || (DataSourceName = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9kYXRhU291cmNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O1VBQVlBOzs7Ozs7Ozs7R0FBQUEsbUJBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3R5cGVzL2RhdGFTb3VyY2UudHM/ZGYyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBEYXRhU291cmNlTmFtZSB7XG4gIEJJR19RVUVSWSA9ICdCSUdfUVVFUlknLFxuICBEVUNLREIgPSAnRFVDS0RCJyxcbiAgUE9TVEdSRVMgPSAnUE9TVEdSRVMnLFxuICBNWVNRTCA9ICdNWVNRTCcsXG4gIE1TU1FMID0gJ01TU1FMJyxcbiAgQ0xJQ0tfSE9VU0UgPSAnQ0xJQ0tfSE9VU0UnLFxuICBUUklOTyA9ICdUUklOTycsXG4gIFNOT1dGTEFLRSA9ICdTTk9XRkxBS0UnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFTb3VyY2Uge1xuICB0eXBlOiBEYXRhU291cmNlTmFtZTtcbiAgcHJvcGVydGllczogRGF0YVNvdXJjZVByb3BlcnRpZXM7XG4gIHNhbXBsZURhdGFzZXQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FtcGxlRGF0YXNldERhdGEge1xuICBuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIERhdGFTb3VyY2VQcm9wZXJ0aWVzID0geyBkaXNwbGF5TmFtZTogc3RyaW5nIH0gJiBQYXJ0aWFsPFxuICBCaWdRdWVyeURhdGFTb3VyY2VQcm9wZXJ0aWVzICZcbiAgICBEdWNrREJEYXRhU291cmNlUHJvcGVydGllcyAmXG4gICAgUEdEYXRhU291cmNlUHJvcGVydGllc1xuPjtcblxuZXhwb3J0IGludGVyZmFjZSBCaWdRdWVyeURhdGFTb3VyY2VQcm9wZXJ0aWVzIHtcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgcHJvamVjdElkOiBzdHJpbmc7XG4gIGRhdGFzZXRJZDogc3RyaW5nO1xuICBjcmVkZW50aWFsczogSlNPTjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEdWNrREJEYXRhU291cmNlUHJvcGVydGllcyB7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIGluaXRTcWw6IHN0cmluZztcbiAgZXh0ZW5zaW9uczogc3RyaW5nW107XG4gIGNvbmZpZ3VyYXRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBHRGF0YVNvdXJjZVByb3BlcnRpZXMge1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICBob3N0OiBzdHJpbmc7XG4gIHBvcnQ6IG51bWJlcjtcbiAgZGF0YWJhc2U6IHN0cmluZztcbiAgdXNlcjogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBzc2w/OiBib29sZWFuO1xufVxuIl0sIm5hbWVzIjpbIkRhdGFTb3VyY2VOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/types/dataSource.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/types/diagram.ts":
/*!********************************************!*\
  !*** ./src/apollo/server/types/diagram.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeType: () => (/* binding */ NodeType)\n/* harmony export */ });\nvar NodeType;\n(function(NodeType) {\n    NodeType[\"MODEL\"] = \"MODEL\";\n    NodeType[\"VIEW\"] = \"VIEW\";\n    NodeType[\"RELATION\"] = \"RELATION\";\n    NodeType[\"FIELD\"] = \"FIELD\";\n    NodeType[\"CALCULATED_FIELD\"] = \"CALCULATED_FIELD\";\n})(NodeType || (NodeType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9kaWFncmFtLnRzIiwibWFwcGluZ3MiOiI7Ozs7O1VBRVlBOzs7Ozs7R0FBQUEsYUFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvdHlwZXMvZGlhZ3JhbS50cz9iMzE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlbGF0aW9uVHlwZSB9IGZyb20gJ0BzZXJ2ZXIvdHlwZXMnO1xuXG5leHBvcnQgZW51bSBOb2RlVHlwZSB7XG4gIE1PREVMID0gJ01PREVMJyxcbiAgVklFVyA9ICdWSUVXJyxcbiAgUkVMQVRJT04gPSAnUkVMQVRJT04nLFxuICBGSUVMRCA9ICdGSUVMRCcsXG4gIENBTENVTEFURURfRklFTEQgPSAnQ0FMQ1VMQVRFRF9GSUVMRCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlhZ3JhbSB7XG4gIG1vZGVsczogRGlhZ3JhbU1vZGVsW107XG4gIHZpZXdzOiBEaWFncmFtVmlld1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERpYWdyYW1WaWV3IHtcbiAgaWQ6IHN0cmluZztcbiAgdmlld0lkOiBudW1iZXI7XG4gIG5vZGVUeXBlOiBOb2RlVHlwZTtcbiAgc3RhdGVtZW50OiBzdHJpbmc7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIHJlZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgZmllbGRzOiBEaWFncmFtVmlld0ZpZWxkW107XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlhZ3JhbVZpZXdGaWVsZCB7XG4gIGlkOiBzdHJpbmc7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIHJlZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBub2RlVHlwZTogTm9kZVR5cGU7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlhZ3JhbU1vZGVsIHtcbiAgaWQ6IHN0cmluZztcbiAgbW9kZWxJZDogbnVtYmVyO1xuICBub2RlVHlwZTogTm9kZVR5cGU7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIHJlZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgc291cmNlVGFibGVOYW1lOiBzdHJpbmc7XG4gIHJlZlNxbD86IHN0cmluZztcbiAgY2FjaGVkOiBib29sZWFuO1xuICByZWZyZXNoVGltZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBmaWVsZHM6IERpYWdyYW1Nb2RlbEZpZWxkW107XG4gIGNhbGN1bGF0ZWRGaWVsZHM6IERpYWdyYW1Nb2RlbEZpZWxkW107XG4gIHJlbGF0aW9uRmllbGRzOiBEaWFncmFtTW9kZWxSZWxhdGlvbkZpZWxkW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlhZ3JhbU1vZGVsTmVzdGVkRmllbGQge1xuICBpZDogc3RyaW5nO1xuICBuZXN0ZWRDb2x1bW5JZDogbnVtYmVyO1xuICB0eXBlOiBzdHJpbmc7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIHJlZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaWFncmFtTW9kZWxGaWVsZCB7XG4gIGlkOiBzdHJpbmc7XG4gIGNvbHVtbklkOiBudW1iZXI7XG4gIHR5cGU6IHN0cmluZztcbiAgbm9kZVR5cGU6IE5vZGVUeXBlO1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICByZWZlcmVuY2VOYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGlzUHJpbWFyeUtleT86IGJvb2xlYW47XG4gIGV4cHJlc3Npb24/OiBzdHJpbmc7XG4gIGxpbmVhZ2U/OiBzdHJpbmc7XG4gIGFnZ3JlZ2F0aW9uPzogc3RyaW5nO1xuICBuZXN0ZWRGaWVsZHM/OiBEaWFncmFtTW9kZWxOZXN0ZWRGaWVsZFtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERpYWdyYW1Nb2RlbFJlbGF0aW9uRmllbGQge1xuICBpZDogc3RyaW5nO1xuICByZWxhdGlvbklkOiBudW1iZXI7XG4gIHR5cGU6IFJlbGF0aW9uVHlwZTtcbiAgbm9kZVR5cGU6IE5vZGVUeXBlO1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICByZWZlcmVuY2VOYW1lOiBzdHJpbmc7XG4gIGZyb21Nb2RlbElkOiBudW1iZXI7XG4gIGZyb21Nb2RlbE5hbWU6IHN0cmluZztcbiAgZnJvbU1vZGVsRGlzcGxheU5hbWU6IHN0cmluZztcbiAgZnJvbUNvbHVtbklkOiBudW1iZXI7XG4gIGZyb21Db2x1bW5OYW1lOiBzdHJpbmc7XG4gIGZyb21Db2x1bW5EaXNwbGF5TmFtZTogc3RyaW5nO1xuICB0b01vZGVsSWQ6IG51bWJlcjtcbiAgdG9Nb2RlbE5hbWU6IHN0cmluZztcbiAgdG9Nb2RlbERpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIHRvQ29sdW1uSWQ6IG51bWJlcjtcbiAgdG9Db2x1bW5OYW1lOiBzdHJpbmc7XG4gIHRvQ29sdW1uRGlzcGxheU5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cbiJdLCJuYW1lcyI6WyJOb2RlVHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/types/diagram.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/types/index.ts":
/*!******************************************!*\
  !*** ./src/apollo/server/types/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dataSource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dataSource */ \"(api)/./src/apollo/server/types/dataSource.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _dataSource__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _dataSource__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _relationship__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./relationship */ \"(api)/./src/apollo/server/types/relationship.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _relationship__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _relationship__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _manifest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./manifest */ \"(api)/./src/apollo/server/types/manifest.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _manifest__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _manifest__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _diagram__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./diagram */ \"(api)/./src/apollo/server/types/diagram.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _diagram__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _diagram__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _metric__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./metric */ \"(api)/./src/apollo/server/types/metric.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _metric__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _metric__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./context */ \"(api)/./src/apollo/server/types/context.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _context__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _context__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZCO0FBQ0U7QUFDSjtBQUNEO0FBQ0Q7QUFDQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9pbmRleC50cz81ZGQ1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGF0YVNvdXJjZSc7XG5leHBvcnQgKiBmcm9tICcuL3JlbGF0aW9uc2hpcCc7XG5leHBvcnQgKiBmcm9tICcuL21hbmlmZXN0JztcbmV4cG9ydCAqIGZyb20gJy4vZGlhZ3JhbSc7XG5leHBvcnQgKiBmcm9tICcuL21ldHJpYyc7XG5leHBvcnQgKiBmcm9tICcuL2NvbnRleHQnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/types/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/types/manifest.ts":
/*!*********************************************!*\
  !*** ./src/apollo/server/types/manifest.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9tYW5pZmVzdC50cyIsIm1hcHBpbmdzIjoiO0FBMElDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3R5cGVzL21hbmlmZXN0LnRzPzcyNmYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBNYW5pZmVzdCB7XG4gIGNhdGFsb2c6IHN0cmluZztcbiAgc2NoZW1hOiBzdHJpbmc7XG4gIG1vZGVsczogTW9kZWxbXTtcbiAgcmVsYXRpb25zaGlwczogUmVsYXRpb25zaGlwW107XG4gIGVudW1EZWZpbml0aW9uczogRW51bURlZmluaXRpb25bXTtcbiAgbWV0cmljczogTWV0cmljW107XG4gIGN1bXVsYXRpdmVNZXRyaWNzOiBDdW11bGF0aXZlTWV0cmljW107XG4gIHZpZXdzOiBFbnVtRGVmaW5pdGlvbltdO1xuICBtYWNyb3M6IE1hY3JvW107XG4gIGRhdGVTcGluZTogRGF0ZVNwaW5lO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1bXVsYXRpdmVNZXRyaWMge1xuICBuYW1lOiBzdHJpbmc7XG4gIGJhc2VPYmplY3Q6IHN0cmluZztcbiAgbWVhc3VyZTogTWVhc3VyZTtcbiAgd2luZG93OiBXaW5kb3c7XG4gIGNhY2hlZDogYm9vbGVhbjtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHByb3BlcnRpZXM6IEN1bXVsYXRpdmVNZXRyaWNQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lYXN1cmUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgb3BlcmF0b3I6IHN0cmluZztcbiAgcmVmQ29sdW1uOiBzdHJpbmc7XG4gIHByb3BlcnRpZXM/OiBDdW11bGF0aXZlTWV0cmljUHJvcGVydGllcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdW11bGF0aXZlTWV0cmljUHJvcGVydGllcyB7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdpbmRvdyB7XG4gIG5hbWU6IHN0cmluZztcbiAgcmVmQ29sdW1uOiBzdHJpbmc7XG4gIHRpbWVVbml0OiBzdHJpbmc7XG4gIHN0YXJ0OiBEYXRlO1xuICBlbmQ6IERhdGU7XG4gIHByb3BlcnRpZXM6IEN1bXVsYXRpdmVNZXRyaWNQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERhdGVTcGluZSB7XG4gIHVuaXQ6IHN0cmluZztcbiAgc3RhcnQ6IERhdGU7XG4gIGVuZDogRGF0ZTtcbiAgcHJvcGVydGllczogQ3VtdWxhdGl2ZU1ldHJpY1Byb3BlcnRpZXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW51bURlZmluaXRpb24ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHZhbHVlcz86IFZhbHVlW107XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHByb3BlcnRpZXM6IEN1bXVsYXRpdmVNZXRyaWNQcm9wZXJ0aWVzO1xuICBzdGF0ZW1lbnQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsdWUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIHByb3BlcnRpZXM6IEN1bXVsYXRpdmVNZXRyaWNQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hY3JvIHtcbiAgbmFtZTogc3RyaW5nO1xuICBkZWZpbml0aW9uOiBzdHJpbmc7XG4gIHByb3BlcnRpZXM6IEN1bXVsYXRpdmVNZXRyaWNQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1ldHJpYyB7XG4gIG5hbWU6IHN0cmluZztcbiAgYmFzZU9iamVjdDogc3RyaW5nO1xuICBkaW1lbnNpb246IERpbWVuc2lvbltdO1xuICBtZWFzdXJlOiBEaW1lbnNpb25bXTtcbiAgdGltZUdyYWluOiBUaW1lR3JhaW5bXTtcbiAgY2FjaGVkOiBib29sZWFuO1xuICByZWZyZXNoVGltZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwcm9wZXJ0aWVzOiBDdW11bGF0aXZlTWV0cmljUHJvcGVydGllcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb24ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgaXNDYWxjdWxhdGVkOiBib29sZWFuO1xuICBub3ROdWxsOiBib29sZWFuO1xuICBwcm9wZXJ0aWVzOiBEaW1lbnNpb25Qcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERpbWVuc2lvblByb3BlcnRpZXMge31cblxuZXhwb3J0IGludGVyZmFjZSBUaW1lR3JhaW4ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHJlZkNvbHVtbjogc3RyaW5nO1xuICBkYXRlUGFydHM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsIHtcbiAgbmFtZTogc3RyaW5nO1xuICByZWZTcWw6IHN0cmluZztcbiAgY29sdW1uczogQ29sdW1uW107XG4gIHByaW1hcnlLZXk/OiBzdHJpbmc7XG4gIGNhY2hlZDogYm9vbGVhbjtcbiAgcmVmcmVzaFRpbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHByb3BlcnRpZXM6IEN1bXVsYXRpdmVNZXRyaWNQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIGNyZWF0ZUNvbHVtbklucHV0IHtcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbHVtbiB7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBpc0NhbGN1bGF0ZWQ6IGJvb2xlYW47XG4gIG5vdE51bGw6IGJvb2xlYW47XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBwcm9wZXJ0aWVzOiBDdW11bGF0aXZlTWV0cmljUHJvcGVydGllcztcbiAgcmVsYXRpb25zaGlwPzogc3RyaW5nO1xuICBleHByZXNzaW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbGF0aW9uc2hpcCB7XG4gIG5hbWU6IHN0cmluZztcbiAgbW9kZWxzOiBzdHJpbmdbXTtcbiAgam9pblR5cGU6IHN0cmluZztcbiAgY29uZGl0aW9uOiBzdHJpbmc7XG4gIG1hbnlTaWRlU29ydEtleXM6IE1hbnlTaWRlU29ydEtleVtdO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwcm9wZXJ0aWVzOiBDdW11bGF0aXZlTWV0cmljUHJvcGVydGllcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYW55U2lkZVNvcnRLZXkge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NlbmRpbmc6IGJvb2xlYW47XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/types/manifest.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/types/metric.ts":
/*!*******************************************!*\
  !*** ./src/apollo/server/types/metric.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\nvar ModelType;\n(function(ModelType) {\n    ModelType[\"TABLE\"] = \"TABLE\";\n    ModelType[\"METRIC\"] = \"METRIC\";\n})(ModelType || (ModelType = {}));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9tZXRyaWMudHMiLCJtYXBwaW5ncyI6Ijs7VUFBS0E7OztHQUFBQSxjQUFBQTtBQWtFeUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvdHlwZXMvbWV0cmljLnRzP2EwMDciXSwic291cmNlc0NvbnRlbnQiOlsiZW51bSBNb2RlbFR5cGUge1xuICBUQUJMRSA9ICdUQUJMRScsXG4gIE1FVFJJQyA9ICdNRVRSSUMnLFxufVxuXG5leHBvcnQgdHlwZSBDcmVhdGVTaW1wbGVNZXRyaWNQYXlsb2FkID0gQmFzZU1ldHJpY1BheWxvZCAmIHtcbiAgbWVhc3VyZTogU2ltcGxlTWVhc3VyZVtdO1xuICBkaW1lbnNpb246IERpbWVuc2lvbltdO1xuICB0aW1lR3JhaW46IFRpbWVHcmFpbltdO1xufTtcblxuZXhwb3J0IHR5cGUgQ3JlYXRlQ3VtdWxhdGl2ZU1ldHJpY1BheWxvYWQgPSBCYXNlTWV0cmljUGF5bG9kICYge1xuICBtZWFzdXJlOiBDdW11bGF0aXZlTWVhc3VyZVtdO1xuICB3aW5kb3c6IFdpbmRvdztcbn07XG5cbmludGVyZmFjZSBCYXNlTWV0cmljUGF5bG9kIHtcbiAgbmFtZTogc3RyaW5nO1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjYWNoZWQ6IGJvb2xlYW47XG4gIHJlZnJlc2hUaW1lPzogc3RyaW5nO1xuICBtb2RlbDogc3RyaW5nO1xuICBtb2RlbFR5cGU6IE1vZGVsVHlwZTtcbiAgcHJvcGVydGllczogUHJvcGVydGllcztcbn1cblxuaW50ZXJmYWNlIFNpbXBsZU1lYXN1cmUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgaXNDYWxjdWxhdGVkOiBib29sZWFuO1xuICBub3ROdWxsOiBib29sZWFuO1xuICBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzO1xufVxuXG5pbnRlcmZhY2UgQ3VtdWxhdGl2ZU1lYXN1cmUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgb3BlcmF0b3I6IHN0cmluZztcbiAgcmVmQ29sdW1uOiBzdHJpbmc7XG4gIHByb3BlcnRpZXM6IFByb3BlcnRpZXM7XG59XG5cbmludGVyZmFjZSBEaW1lbnNpb24ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgaXNDYWxjdWxhdGVkOiBib29sZWFuO1xuICBub3ROdWxsOiBib29sZWFuO1xuICBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzO1xufVxuXG5pbnRlcmZhY2UgVGltZUdyYWluIHtcbiAgbmFtZTogc3RyaW5nO1xuICByZWZDb2x1bW46IHN0cmluZztcbiAgZGF0ZVBhcnRzOiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIFdpbmRvdyB7XG4gIG5hbWU6IHN0cmluZztcbiAgcmVmQ29sdW1uOiBzdHJpbmc7XG4gIHRpbWVVbml0OiBzdHJpbmc7XG4gIHN0YXJ0OiBzdHJpbmc7XG4gIGVuZDogc3RyaW5nO1xuICBwcm9wZXJ0aWVzOiBQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BlcnRpZXMge31cbiJdLCJuYW1lcyI6WyJNb2RlbFR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/types/metric.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/types/relationship.ts":
/*!*************************************************!*\
  !*** ./src/apollo/server/types/relationship.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RelationType: () => (/* binding */ RelationType)\n/* harmony export */ });\nvar RelationType;\n(function(RelationType) {\n    RelationType[\"ONE_TO_ONE\"] = \"ONE_TO_ONE\";\n    RelationType[\"ONE_TO_MANY\"] = \"ONE_TO_MANY\";\n    RelationType[\"MANY_TO_ONE\"] = \"MANY_TO_ONE\";\n})(RelationType || (RelationType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9yZWxhdGlvbnNoaXAudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7VUEwQllBOzs7O0dBQUFBLGlCQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci90eXBlcy9yZWxhdGlvbnNoaXAudHM/OGUzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIFJlbGF0aW9uRGF0YSB7XG4gIGZyb21Nb2RlbElkOiBudW1iZXI7XG4gIGZyb21Db2x1bW5JZDogbnVtYmVyO1xuICB0b01vZGVsSWQ6IG51bWJlcjtcbiAgdG9Db2x1bW5JZDogbnVtYmVyO1xuICB0eXBlOiBSZWxhdGlvblR5cGU7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVJlbGF0aW9uRGF0YSB7XG4gIHR5cGU6IFJlbGF0aW9uVHlwZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbmFseXNpc1JlbGF0aW9uSW5mbyB7XG4gIG5hbWU6IHN0cmluZztcbiAgZnJvbU1vZGVsSWQ6IG51bWJlcjtcbiAgZnJvbU1vZGVsUmVmZXJlbmNlTmFtZTogc3RyaW5nO1xuICBmcm9tQ29sdW1uSWQ6IG51bWJlcjtcbiAgZnJvbUNvbHVtblJlZmVyZW5jZU5hbWU6IHN0cmluZztcbiAgdG9Nb2RlbElkOiBudW1iZXI7XG4gIHRvTW9kZWxSZWZlcmVuY2VOYW1lOiBzdHJpbmc7XG4gIHRvQ29sdW1uSWQ6IG51bWJlcjtcbiAgdG9Db2x1bW5SZWZlcmVuY2VOYW1lOiBzdHJpbmc7XG4gIHR5cGU6IFJlbGF0aW9uVHlwZTtcbn1cblxuZXhwb3J0IGVudW0gUmVsYXRpb25UeXBlIHtcbiAgT05FX1RPX09ORSA9ICdPTkVfVE9fT05FJyxcbiAgT05FX1RPX01BTlkgPSAnT05FX1RPX01BTlknLFxuICBNQU5ZX1RPX09ORSA9ICdNQU5ZX1RPX09ORScsXG59XG4iXSwibmFtZXMiOlsiUmVsYXRpb25UeXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/types/relationship.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/docker.ts":
/*!*******************************************!*\
  !*** ./src/apollo/server/utils/docker.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toDockerHost: () => (/* binding */ toDockerHost)\n/* harmony export */ });\nconst toDockerHost = (host)=>{\n    // if host is localhost or 127.0.0.1, rewrite it to docker.for.{platform}.localhost\n    if (host === \"localhost\" || host === \"127.0.0.1\") {\n        const platform = process.platform;\n        switch(platform){\n            case \"darwin\":\n                return \"docker.for.mac.localhost\";\n            case \"linux\":\n                return \"docker.for.linux.localhost\";\n            default:\n                // windows and others...\n                return \"host.docker.internal\";\n        }\n    }\n    return host;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9kb2NrZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLGVBQWUsQ0FBQ0M7SUFDM0IsbUZBQW1GO0lBQ25GLElBQUlBLFNBQVMsZUFBZUEsU0FBUyxhQUFhO1FBQ2hELE1BQU1DLFdBQVdDLFFBQVFELFFBQVE7UUFDakMsT0FBUUE7WUFDTixLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO2dCQUNILE9BQU87WUFDVDtnQkFDRSx3QkFBd0I7Z0JBQ3hCLE9BQU87UUFDWDtJQUNGO0lBQ0EsT0FBT0Q7QUFDVCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3V0aWxzL2RvY2tlci50cz8yOTVhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB0b0RvY2tlckhvc3QgPSAoaG9zdDogc3RyaW5nKSA9PiB7XG4gIC8vIGlmIGhvc3QgaXMgbG9jYWxob3N0IG9yIDEyNy4wLjAuMSwgcmV3cml0ZSBpdCB0byBkb2NrZXIuZm9yLntwbGF0Zm9ybX0ubG9jYWxob3N0XG4gIGlmIChob3N0ID09PSAnbG9jYWxob3N0JyB8fCBob3N0ID09PSAnMTI3LjAuMC4xJykge1xuICAgIGNvbnN0IHBsYXRmb3JtID0gcHJvY2Vzcy5wbGF0Zm9ybTtcbiAgICBzd2l0Y2ggKHBsYXRmb3JtKSB7XG4gICAgICBjYXNlICdkYXJ3aW4nOlxuICAgICAgICByZXR1cm4gJ2RvY2tlci5mb3IubWFjLmxvY2FsaG9zdCc7XG4gICAgICBjYXNlICdsaW51eCc6XG4gICAgICAgIHJldHVybiAnZG9ja2VyLmZvci5saW51eC5sb2NhbGhvc3QnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gd2luZG93cyBhbmQgb3RoZXJzLi4uXG4gICAgICAgIHJldHVybiAnaG9zdC5kb2NrZXIuaW50ZXJuYWwnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaG9zdDtcbn07XG4iXSwibmFtZXMiOlsidG9Eb2NrZXJIb3N0IiwiaG9zdCIsInBsYXRmb3JtIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/docker.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/encode.ts":
/*!*******************************************!*\
  !*** ./src/apollo/server/utils/encode.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toBase64: () => (/* binding */ toBase64)\n/* harmony export */ });\nfunction toBase64(str) {\n    return Buffer.from(str).toString(\"base64\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9lbmNvZGUudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLFNBQVNBLFNBQVNDLEdBQVc7SUFDbEMsT0FBT0MsT0FBT0MsSUFBSSxDQUFDRixLQUFLRyxRQUFRLENBQUM7QUFDbkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvdXRpbHMvZW5jb2RlLnRzPzFjODEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHRvQmFzZTY0KHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0cikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xufVxuIl0sIm5hbWVzIjpbInRvQmFzZTY0Iiwic3RyIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/encode.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/encryptor.ts":
/*!**********************************************!*\
  !*** ./src/apollo/server/utils/encryptor.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Encryptor: () => (/* binding */ Encryptor)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nclass Encryptor {\n    constructor({ encryptionPassword, encryptionSalt }){\n        this.ENCRYPTION_ITERATION = 1000;\n        this.ENCRYPTION_KEY_LENGTH = 256 / 8 // in bytes\n        ;\n        this.ENCRYPTION_ALGORITHM = \"aes-256-cbc\";\n        this.ENCRYPTION_SEPARATOR = \":\";\n        this.ENCRYPTION_PASSWORD = encryptionPassword;\n        this.ENCRYPTION_SALT = encryptionSalt;\n    }\n    encrypt(credentials) {\n        const credentialsString = JSON.stringify(credentials);\n        const key = this.createSecretKey();\n        const iv = crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(16); // AES block size\n        const cipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createCipheriv(this.ENCRYPTION_ALGORITHM, key, iv);\n        const encrypted = Buffer.concat([\n            cipher.update(credentialsString, \"utf8\"),\n            cipher.final()\n        ]);\n        return iv.toString(\"base64\") + this.ENCRYPTION_SEPARATOR + encrypted.toString(\"base64\");\n    }\n    decrypt(encryptedText) {\n        const [ivBase64, encryptedBase64] = encryptedText.split(this.ENCRYPTION_SEPARATOR);\n        const iv = Buffer.from(ivBase64, \"base64\");\n        const encrypted = Buffer.from(encryptedBase64, \"base64\");\n        const key = this.createSecretKey();\n        const decipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createDecipheriv(this.ENCRYPTION_ALGORITHM, key, iv);\n        const decrypted = Buffer.concat([\n            decipher.update(encrypted),\n            decipher.final()\n        ]);\n        return decrypted.toString(\"utf8\");\n    }\n    createSecretKey() {\n        return crypto__WEBPACK_IMPORTED_MODULE_0___default().pbkdf2Sync(this.ENCRYPTION_PASSWORD, this.ENCRYPTION_SALT, this.ENCRYPTION_ITERATION, this.ENCRYPTION_KEY_LENGTH, \"sha512\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9lbmNyeXB0b3IudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBV3JCLE1BQU1DO0lBUVhDLFlBQVksRUFDVkMsa0JBQWtCLEVBQ2xCQyxjQUFjLEVBSWYsQ0FBRTthQVhLQyx1QkFBdUI7YUFDdkJDLHdCQUF3QixNQUFNLEVBQUcsV0FBVzs7YUFDNUNDLHVCQUF1QjthQUN2QkMsdUJBQXVCO1FBUzdCLElBQUksQ0FBQ0MsbUJBQW1CLEdBQUdOO1FBQzNCLElBQUksQ0FBQ08sZUFBZSxHQUFHTjtJQUN6QjtJQUVPTyxRQUFRQyxXQUFpQixFQUFFO1FBQ2hDLE1BQU1DLG9CQUFvQkMsS0FBS0MsU0FBUyxDQUFDSDtRQUN6QyxNQUFNSSxNQUFNLElBQUksQ0FBQ0MsZUFBZTtRQUNoQyxNQUFNQyxLQUFLbEIseURBQWtCLENBQUMsS0FBSyxpQkFBaUI7UUFDcEQsTUFBTW9CLFNBQVNwQiw0REFBcUIsQ0FBQyxJQUFJLENBQUNPLG9CQUFvQixFQUFFUyxLQUFLRTtRQUNyRSxNQUFNSSxZQUFZQyxPQUFPQyxNQUFNLENBQUM7WUFDOUJKLE9BQU9LLE1BQU0sQ0FBQ1osbUJBQW1CO1lBQ2pDTyxPQUFPTSxLQUFLO1NBQ2I7UUFDRCxPQUNFUixHQUFHUyxRQUFRLENBQUMsWUFDWixJQUFJLENBQUNuQixvQkFBb0IsR0FDekJjLFVBQVVLLFFBQVEsQ0FBQztJQUV2QjtJQUVPQyxRQUFRQyxhQUFxQixFQUFFO1FBQ3BDLE1BQU0sQ0FBQ0MsVUFBVUMsZ0JBQWdCLEdBQUdGLGNBQWNHLEtBQUssQ0FDckQsSUFBSSxDQUFDeEIsb0JBQW9CO1FBRTNCLE1BQU1VLEtBQUtLLE9BQU9VLElBQUksQ0FBQ0gsVUFBVTtRQUNqQyxNQUFNUixZQUFZQyxPQUFPVSxJQUFJLENBQUNGLGlCQUFpQjtRQUMvQyxNQUFNZixNQUFNLElBQUksQ0FBQ0MsZUFBZTtRQUNoQyxNQUFNaUIsV0FBV2xDLDhEQUF1QixDQUN0QyxJQUFJLENBQUNPLG9CQUFvQixFQUN6QlMsS0FDQUU7UUFFRixNQUFNa0IsWUFBWWIsT0FBT0MsTUFBTSxDQUFDO1lBQzlCVSxTQUFTVCxNQUFNLENBQUNIO1lBQ2hCWSxTQUFTUixLQUFLO1NBQ2Y7UUFDRCxPQUFPVSxVQUFVVCxRQUFRLENBQUM7SUFDNUI7SUFFUVYsa0JBQWtCO1FBQ3hCLE9BQU9qQix3REFBaUIsQ0FDdEIsSUFBSSxDQUFDUyxtQkFBbUIsRUFDeEIsSUFBSSxDQUFDQyxlQUFlLEVBQ3BCLElBQUksQ0FBQ0wsb0JBQW9CLEVBQ3pCLElBQUksQ0FBQ0MscUJBQXFCLEVBQzFCO0lBRUo7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9lbmNyeXB0b3IudHM/MmI3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgZW5jcnlwdE9wdGlvbnMge1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBzYWx0OiBzdHJpbmc7XG4gIGl0ZXJhdGlvbj86IG51bWJlcjtcbiAga2V5TGVuZ3RoPzogbnVtYmVyO1xuICBhbGdvcml0aG0/OiBzdHJpbmc7XG4gIHNlcGFyYXRvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEVuY3J5cHRvciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgRU5DUllQVElPTl9QQVNTV09SRDogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5IEVOQ1JZUFRJT05fU0FMVDogc3RyaW5nO1xuICBwcml2YXRlIEVOQ1JZUFRJT05fSVRFUkFUSU9OID0gMTAwMDtcbiAgcHJpdmF0ZSBFTkNSWVBUSU9OX0tFWV9MRU5HVEggPSAyNTYgLyA4OyAvLyBpbiBieXRlc1xuICBwcml2YXRlIEVOQ1JZUFRJT05fQUxHT1JJVEhNID0gJ2Flcy0yNTYtY2JjJztcbiAgcHJpdmF0ZSBFTkNSWVBUSU9OX1NFUEFSQVRPUiA9ICc6JztcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgZW5jcnlwdGlvblBhc3N3b3JkLFxuICAgIGVuY3J5cHRpb25TYWx0LFxuICB9OiB7XG4gICAgZW5jcnlwdGlvblBhc3N3b3JkOiBzdHJpbmc7XG4gICAgZW5jcnlwdGlvblNhbHQ6IHN0cmluZztcbiAgfSkge1xuICAgIHRoaXMuRU5DUllQVElPTl9QQVNTV09SRCA9IGVuY3J5cHRpb25QYXNzd29yZDtcbiAgICB0aGlzLkVOQ1JZUFRJT05fU0FMVCA9IGVuY3J5cHRpb25TYWx0O1xuICB9XG5cbiAgcHVibGljIGVuY3J5cHQoY3JlZGVudGlhbHM6IEpTT04pIHtcbiAgICBjb25zdCBjcmVkZW50aWFsc1N0cmluZyA9IEpTT04uc3RyaW5naWZ5KGNyZWRlbnRpYWxzKTtcbiAgICBjb25zdCBrZXkgPSB0aGlzLmNyZWF0ZVNlY3JldEtleSgpO1xuICAgIGNvbnN0IGl2ID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDE2KTsgLy8gQUVTIGJsb2NrIHNpemVcbiAgICBjb25zdCBjaXBoZXIgPSBjcnlwdG8uY3JlYXRlQ2lwaGVyaXYodGhpcy5FTkNSWVBUSU9OX0FMR09SSVRITSwga2V5LCBpdik7XG4gICAgY29uc3QgZW5jcnlwdGVkID0gQnVmZmVyLmNvbmNhdChbXG4gICAgICBjaXBoZXIudXBkYXRlKGNyZWRlbnRpYWxzU3RyaW5nLCAndXRmOCcpLFxuICAgICAgY2lwaGVyLmZpbmFsKCksXG4gICAgXSk7XG4gICAgcmV0dXJuIChcbiAgICAgIGl2LnRvU3RyaW5nKCdiYXNlNjQnKSArXG4gICAgICB0aGlzLkVOQ1JZUFRJT05fU0VQQVJBVE9SICtcbiAgICAgIGVuY3J5cHRlZC50b1N0cmluZygnYmFzZTY0JylcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGRlY3J5cHQoZW5jcnlwdGVkVGV4dDogc3RyaW5nKSB7XG4gICAgY29uc3QgW2l2QmFzZTY0LCBlbmNyeXB0ZWRCYXNlNjRdID0gZW5jcnlwdGVkVGV4dC5zcGxpdChcbiAgICAgIHRoaXMuRU5DUllQVElPTl9TRVBBUkFUT1IsXG4gICAgKTtcbiAgICBjb25zdCBpdiA9IEJ1ZmZlci5mcm9tKGl2QmFzZTY0LCAnYmFzZTY0Jyk7XG4gICAgY29uc3QgZW5jcnlwdGVkID0gQnVmZmVyLmZyb20oZW5jcnlwdGVkQmFzZTY0LCAnYmFzZTY0Jyk7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5jcmVhdGVTZWNyZXRLZXkoKTtcbiAgICBjb25zdCBkZWNpcGhlciA9IGNyeXB0by5jcmVhdGVEZWNpcGhlcml2KFxuICAgICAgdGhpcy5FTkNSWVBUSU9OX0FMR09SSVRITSxcbiAgICAgIGtleSxcbiAgICAgIGl2LFxuICAgICk7XG4gICAgY29uc3QgZGVjcnlwdGVkID0gQnVmZmVyLmNvbmNhdChbXG4gICAgICBkZWNpcGhlci51cGRhdGUoZW5jcnlwdGVkKSxcbiAgICAgIGRlY2lwaGVyLmZpbmFsKCksXG4gICAgXSk7XG4gICAgcmV0dXJuIGRlY3J5cHRlZC50b1N0cmluZygndXRmOCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTZWNyZXRLZXkoKSB7XG4gICAgcmV0dXJuIGNyeXB0by5wYmtkZjJTeW5jKFxuICAgICAgdGhpcy5FTkNSWVBUSU9OX1BBU1NXT1JELFxuICAgICAgdGhpcy5FTkNSWVBUSU9OX1NBTFQsXG4gICAgICB0aGlzLkVOQ1JZUFRJT05fSVRFUkFUSU9OLFxuICAgICAgdGhpcy5FTkNSWVBUSU9OX0tFWV9MRU5HVEgsXG4gICAgICAnc2hhNTEyJyxcbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY3J5cHRvIiwiRW5jcnlwdG9yIiwiY29uc3RydWN0b3IiLCJlbmNyeXB0aW9uUGFzc3dvcmQiLCJlbmNyeXB0aW9uU2FsdCIsIkVOQ1JZUFRJT05fSVRFUkFUSU9OIiwiRU5DUllQVElPTl9LRVlfTEVOR1RIIiwiRU5DUllQVElPTl9BTEdPUklUSE0iLCJFTkNSWVBUSU9OX1NFUEFSQVRPUiIsIkVOQ1JZUFRJT05fUEFTU1dPUkQiLCJFTkNSWVBUSU9OX1NBTFQiLCJlbmNyeXB0IiwiY3JlZGVudGlhbHMiLCJjcmVkZW50aWFsc1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJrZXkiLCJjcmVhdGVTZWNyZXRLZXkiLCJpdiIsInJhbmRvbUJ5dGVzIiwiY2lwaGVyIiwiY3JlYXRlQ2lwaGVyaXYiLCJlbmNyeXB0ZWQiLCJCdWZmZXIiLCJjb25jYXQiLCJ1cGRhdGUiLCJmaW5hbCIsInRvU3RyaW5nIiwiZGVjcnlwdCIsImVuY3J5cHRlZFRleHQiLCJpdkJhc2U2NCIsImVuY3J5cHRlZEJhc2U2NCIsInNwbGl0IiwiZnJvbSIsImRlY2lwaGVyIiwiY3JlYXRlRGVjaXBoZXJpdiIsImRlY3J5cHRlZCIsInBia2RmMlN5bmMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/encryptor.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/error.ts":
/*!******************************************!*\
  !*** ./src/apollo/server/utils/error.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeneralErrorCodes: () => (/* binding */ GeneralErrorCodes),\n/* harmony export */   create: () => (/* binding */ create),\n/* harmony export */   defaultApolloErrorHandler: () => (/* binding */ defaultApolloErrorHandler),\n/* harmony export */   errorMessages: () => (/* binding */ errorMessages),\n/* harmony export */   shortMessages: () => (/* binding */ shortMessages)\n/* harmony export */ });\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! graphql */ \"graphql\");\n/* harmony import */ var graphql__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(graphql__WEBPACK_IMPORTED_MODULE_0__);\n\nvar GeneralErrorCodes;\n(function(GeneralErrorCodes) {\n    GeneralErrorCodes[\"INTERNAL_SERVER_ERROR\"] = \"INTERNAL_SERVER_ERROR\";\n    // AI service errors\n    GeneralErrorCodes[\"NO_RELEVANT_DATA\"] = \"NO_RELEVANT_DATA\";\n    GeneralErrorCodes[\"NO_RELEVANT_SQL\"] = \"NO_RELEVANT_SQL\";\n    GeneralErrorCodes[\"RESOURCE_NOT_FOUND\"] = \"RESOURCE_NOT_FOUND\";\n    GeneralErrorCodes[\"MDL_PARSE_ERROR\"] = \"MDL_PARSE_ERROR\";\n    GeneralErrorCodes[\"NO_CHART\"] = \"NO_CHART\";\n    // Exception error for AI service (e.g., network connection error)\n    GeneralErrorCodes[\"AI_SERVICE_UNDEFINED_ERROR\"] = \"OTHERS\";\n    // IBIS Error\n    GeneralErrorCodes[\"IBIS_SERVER_ERROR\"] = \"IBIS_SERVER_ERROR\";\n    // Connector errors\n    GeneralErrorCodes[\"CONNECTION_ERROR\"] = \"CONNECTION_ERROR\";\n    // duckdb\n    GeneralErrorCodes[\"INIT_SQL_ERROR\"] = \"INIT_SQL_ERROR\";\n    GeneralErrorCodes[\"SESSION_PROPS_ERROR\"] = \"SESSION_PROPS_ERROR\";\n    // postgres\n    GeneralErrorCodes[\"CONNECTION_REFUSED\"] = \"CONNECTION_REFUSED\";\n    // calculated field validation\n    GeneralErrorCodes[\"DUPLICATED_FIELD_NAME\"] = \"DUPLICATED_FIELD_NAME\";\n    GeneralErrorCodes[\"INVALID_EXPRESSION\"] = \"INVALID_EXPRESSION\";\n    GeneralErrorCodes[\"INVALID_CALCULATED_FIELD\"] = \"INVALID_CALCULATED_FIELD\";\n    // when createing views\n    GeneralErrorCodes[\"INVALID_VIEW_CREATION\"] = \"INVALID_VIEW_CREATION\";\n    // dry run error\n    GeneralErrorCodes[\"DRY_RUN_ERROR\"] = \"DRY_RUN_ERROR\";\n    GeneralErrorCodes[\"DRY_PLAN_ERROR\"] = \"DRY_PLAN_ERROR\";\n})(GeneralErrorCodes || (GeneralErrorCodes = {}));\nconst errorMessages = {\n    [\"INTERNAL_SERVER_ERROR\"]: \"Internal server error\",\n    // AI service errors\n    [\"NO_RELEVANT_DATA\"]: \"I can’t find the exact data you’re looking for, but feel free to ask about other available topics.\",\n    [\"NO_RELEVANT_SQL\"]: \"Could you please provide more details or specify the information you're seeking?\",\n    [\"NO_CHART\"]: \"The chart couldn’t be generated this time. Please try regenerating the chart or rephrasing your question for better results.\",\n    // Connector errors\n    [\"CONNECTION_ERROR\"]: \"Can not connect to data source\",\n    // duckdb\n    [\"INIT_SQL_ERROR\"]: \"The initializing SQL seems to be invalid, Please check your SQL and try again.\",\n    [\"SESSION_PROPS_ERROR\"]: \"The session properties seem to be invalid, Please check your session properties and try again.\",\n    // postgres\n    [\"CONNECTION_REFUSED\"]: \"Connection refused by the server, Please check your connection settings and try again.\",\n    // ibis service errors\n    [\"IBIS_SERVER_ERROR\"]: \"Error occurred while querying ibis server, please try again later.\",\n    // calculated field validation\n    [\"DUPLICATED_FIELD_NAME\"]: \"This field name already exists\",\n    [\"INVALID_EXPRESSION\"]: \"Invalid expression, please check your expression and try again.\",\n    [\"INVALID_CALCULATED_FIELD\"]: \"Can not execute a query when using this calculated field\",\n    // when createing views\n    [\"INVALID_VIEW_CREATION\"]: \"Invalid view creation\",\n    // dry run error\n    [\"DRY_RUN_ERROR\"]: \"Dry run sql statement error\",\n    [\"DRY_PLAN_ERROR\"]: \"Dry plan error\"\n};\nconst shortMessages = {\n    [\"INTERNAL_SERVER_ERROR\"]: \"Internal server error\",\n    [\"NO_RELEVANT_DATA\"]: \"Try a different query\",\n    [\"NO_RELEVANT_SQL\"]: \"Clarification needed\",\n    [\"NO_CHART\"]: \"Chart not available\",\n    [\"CONNECTION_ERROR\"]: \"Failed to connect\",\n    [\"IBIS_SERVER_ERROR\"]: \"Data connection error\",\n    [\"INIT_SQL_ERROR\"]: \"Invalid initializing SQL\",\n    [\"SESSION_PROPS_ERROR\"]: \"Invalid session properties\",\n    [\"CONNECTION_REFUSED\"]: \"Connection refused\",\n    [\"DUPLICATED_FIELD_NAME\"]: \"Duplicated field name\",\n    [\"INVALID_EXPRESSION\"]: \"Invalid expression\",\n    [\"INVALID_CALCULATED_FIELD\"]: \"Invalid calculated field\",\n    [\"INVALID_VIEW_CREATION\"]: \"Invalid view creation\",\n    [\"DRY_RUN_ERROR\"]: \"Dry run sql statement error\",\n    [\"DRY_PLAN_ERROR\"]: \"Dry plan error\"\n};\nconst create = (code, options)=>{\n    const { customMessage, originalError, service } = options || {};\n    // Default to INTERNAL_SERVER_ERROR if no code is provided\n    code = code || \"INTERNAL_SERVER_ERROR\";\n    // Get the error message based on the code\n    const message = customMessage || originalError?.message || errorMessages[code] || errorMessages[\"INTERNAL_SERVER_ERROR\"];\n    // Return the GraphQLError\n    const err = new graphql__WEBPACK_IMPORTED_MODULE_0__.GraphQLError(message, {\n        extensions: {\n            originalError,\n            code,\n            message,\n            service,\n            shortMessage: shortMessages[code] || shortMessages[\"INTERNAL_SERVER_ERROR\"],\n            other: options?.other\n        }\n    });\n    return err;\n};\n/**\n * Default error handler for Apollo Server\n * For error like this:\n * [GraphQLError: connect ECONNREFUSED 127.0.0.1:8080] {\n *   locations: [ { line: 2, column: 3 } ],\n *   path: [ 'previewData' ],\n *   extensions: {\n *     code: 'INTERNAL_SERVER_ERROR',\n *     exception: {\n *       port: 8080,\n *       address: '127.0.0.1',\n *       syscall: 'connect',\n *       code: 'ECONNREFUSED',\n *       errno: -61,\n *       message: 'connect ECONNREFUSED 127.0.0.1:8080',\n *       stack: 'Error: connect ECONNREFUSED 127.0.0.1:8080\\n' +\n *         '    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1278:16)',\n *       name: 'Error',\n *       config: [Object],\n *       request: [Writable],\n *       stacktrace: [Array]\n *     }\n *   }\n * }\n * it will easily cause `Converting circular structure to JSON` error.\n * Thus, we only pick required fields to reformat the error.\n */ const defaultApolloErrorHandler = (error)=>{\n    if (error instanceof graphql__WEBPACK_IMPORTED_MODULE_0__.GraphQLError) {\n        const code = error.extensions?.code || \"INTERNAL_SERVER_ERROR\";\n        return {\n            locations: error.locations,\n            path: error.path,\n            message: error.message,\n            extensions: {\n                code,\n                message: error.message,\n                shortMessage: shortMessages[code],\n                stacktrace: error.extensions?.exception?.stacktrace\n            }\n        };\n    }\n    // Return the original error if it's not a GraphQLError\n    return error;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9lcnJvci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXVDOztVQUczQkM7O0lBRVYsb0JBQW9COzs7Ozs7SUFPcEIsa0VBQWtFOztJQUdsRSxhQUFhOztJQUdiLG1CQUFtQjs7SUFFbkIsU0FBUzs7O0lBR1QsV0FBVzs7SUFHWCw4QkFBOEI7Ozs7SUFLOUIsdUJBQXVCOztJQUd2QixnQkFBZ0I7OztHQS9CTkEsc0JBQUFBO0FBb0NMLE1BQU1DLGdCQUFnQjtJQUMzQix5QkFBeUMsRUFBRTtJQUUzQyxvQkFBb0I7SUFDcEIsb0JBQW9DLEVBQ2xDO0lBQ0YsbUJBQW1DLEVBQ2pDO0lBQ0YsWUFBNEIsRUFDMUI7SUFFRixtQkFBbUI7SUFDbkIsb0JBQW9DLEVBQUU7SUFDdEMsU0FBUztJQUNULGtCQUFrQyxFQUNoQztJQUNGLHVCQUF1QyxFQUNyQztJQUNGLFdBQVc7SUFDWCxzQkFBc0MsRUFDcEM7SUFFRixzQkFBc0I7SUFDdEIscUJBQXFDLEVBQ25DO0lBRUYsOEJBQThCO0lBQzlCLHlCQUF5QyxFQUFFO0lBQzNDLHNCQUFzQyxFQUNwQztJQUNGLDRCQUE0QyxFQUMxQztJQUVGLHVCQUF1QjtJQUN2Qix5QkFBeUMsRUFBRTtJQUUzQyxnQkFBZ0I7SUFDaEIsaUJBQWlDLEVBQUU7SUFDbkMsa0JBQWtDLEVBQUU7QUFDdEMsRUFBRTtBQUVLLE1BQU1DLGdCQUFnQjtJQUMzQix5QkFBeUMsRUFBRTtJQUMzQyxvQkFBb0MsRUFBRTtJQUN0QyxtQkFBbUMsRUFBRTtJQUNyQyxZQUE0QixFQUFFO0lBQzlCLG9CQUFvQyxFQUFFO0lBQ3RDLHFCQUFxQyxFQUFFO0lBQ3ZDLGtCQUFrQyxFQUFFO0lBQ3BDLHVCQUF1QyxFQUFFO0lBQ3pDLHNCQUFzQyxFQUFFO0lBQ3hDLHlCQUF5QyxFQUFFO0lBQzNDLHNCQUFzQyxFQUFFO0lBQ3hDLDRCQUE0QyxFQUFFO0lBQzlDLHlCQUF5QyxFQUFFO0lBQzNDLGlCQUFpQyxFQUFFO0lBQ25DLGtCQUFrQyxFQUFFO0FBQ3RDLEVBQUU7QUFFSyxNQUFNQyxTQUFTLENBQ3BCQyxNQUNBQztJQU9BLE1BQU0sRUFBRUMsYUFBYSxFQUFFQyxhQUFhLEVBQUVDLE9BQU8sRUFBRSxHQUFHSCxXQUFXLENBQUM7SUFDOUQsMERBQTBEO0lBQzFERCxPQUFPQTtJQUVQLDBDQUEwQztJQUMxQyxNQUFNSyxVQUNKSCxpQkFDQUMsZUFBZUUsV0FDZlIsYUFBYSxDQUFDRyxLQUFLLElBQ25CSCxhQUFhLHlCQUF5QztJQUV4RCwwQkFBMEI7SUFDMUIsTUFBTVMsTUFBTSxJQUFJWCxpREFBWUEsQ0FBQ1UsU0FBUztRQUNwQ0UsWUFBWTtZQUNWSjtZQUNBSDtZQUNBSztZQUNBRDtZQUNBSSxjQUNFVixhQUFhLENBQUNFLEtBQUssSUFDbkJGLGFBQWEseUJBQXlDO1lBQ3hEVyxPQUFPUixTQUFTUTtRQUNsQjtJQUNGO0lBRUEsT0FBT0g7QUFDVCxFQUFFO0FBRUY7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBMEJDLEdBQ00sTUFBTUksNEJBQTRCLENBQUNDO0lBQ3hDLElBQUlBLGlCQUFpQmhCLGlEQUFZQSxFQUFFO1FBQ2pDLE1BQU1LLE9BQVFXLE1BQU1KLFVBQVUsRUFBRVA7UUFFaEMsT0FBTztZQUNMWSxXQUFXRCxNQUFNQyxTQUFTO1lBQzFCQyxNQUFNRixNQUFNRSxJQUFJO1lBQ2hCUixTQUFTTSxNQUFNTixPQUFPO1lBQ3RCRSxZQUFZO2dCQUNWUDtnQkFDQUssU0FBU00sTUFBTU4sT0FBTztnQkFDdEJHLGNBQWNWLGFBQWEsQ0FBQ0UsS0FBSztnQkFDakNjLFlBQVlILE1BQU1KLFVBQVUsRUFBRVEsV0FBV0Q7WUFDM0M7UUFDRjtJQUNGO0lBRUEsdURBQXVEO0lBQ3ZELE9BQU9IO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9lcnJvci50cz82ZDZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdyYXBoUUxFcnJvciB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgV3JlblNlcnZpY2UgfSBmcm9tICcuLi90ZWxlbWV0cnkvdGVsZW1ldHJ5JztcblxuZXhwb3J0IGVudW0gR2VuZXJhbEVycm9yQ29kZXMge1xuICBJTlRFUk5BTF9TRVJWRVJfRVJST1IgPSAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgLy8gQUkgc2VydmljZSBlcnJvcnNcbiAgTk9fUkVMRVZBTlRfREFUQSA9ICdOT19SRUxFVkFOVF9EQVRBJyxcbiAgTk9fUkVMRVZBTlRfU1FMID0gJ05PX1JFTEVWQU5UX1NRTCcsXG4gIFJFU09VUkNFX05PVF9GT1VORCA9ICdSRVNPVVJDRV9OT1RfRk9VTkQnLFxuICBNRExfUEFSU0VfRVJST1IgPSAnTURMX1BBUlNFX0VSUk9SJyxcbiAgTk9fQ0hBUlQgPSAnTk9fQ0hBUlQnLFxuXG4gIC8vIEV4Y2VwdGlvbiBlcnJvciBmb3IgQUkgc2VydmljZSAoZS5nLiwgbmV0d29yayBjb25uZWN0aW9uIGVycm9yKVxuICBBSV9TRVJWSUNFX1VOREVGSU5FRF9FUlJPUiA9ICdPVEhFUlMnLFxuXG4gIC8vIElCSVMgRXJyb3JcbiAgSUJJU19TRVJWRVJfRVJST1IgPSAnSUJJU19TRVJWRVJfRVJST1InLFxuXG4gIC8vIENvbm5lY3RvciBlcnJvcnNcbiAgQ09OTkVDVElPTl9FUlJPUiA9ICdDT05ORUNUSU9OX0VSUk9SJyxcbiAgLy8gZHVja2RiXG4gIElOSVRfU1FMX0VSUk9SID0gJ0lOSVRfU1FMX0VSUk9SJyxcbiAgU0VTU0lPTl9QUk9QU19FUlJPUiA9ICdTRVNTSU9OX1BST1BTX0VSUk9SJyxcbiAgLy8gcG9zdGdyZXNcbiAgQ09OTkVDVElPTl9SRUZVU0VEID0gJ0NPTk5FQ1RJT05fUkVGVVNFRCcsXG5cbiAgLy8gY2FsY3VsYXRlZCBmaWVsZCB2YWxpZGF0aW9uXG4gIERVUExJQ0FURURfRklFTERfTkFNRSA9ICdEVVBMSUNBVEVEX0ZJRUxEX05BTUUnLFxuICBJTlZBTElEX0VYUFJFU1NJT04gPSAnSU5WQUxJRF9FWFBSRVNTSU9OJyxcbiAgSU5WQUxJRF9DQUxDVUxBVEVEX0ZJRUxEID0gJ0lOVkFMSURfQ0FMQ1VMQVRFRF9GSUVMRCcsXG5cbiAgLy8gd2hlbiBjcmVhdGVpbmcgdmlld3NcbiAgSU5WQUxJRF9WSUVXX0NSRUFUSU9OID0gJ0lOVkFMSURfVklFV19DUkVBVElPTicsXG5cbiAgLy8gZHJ5IHJ1biBlcnJvclxuICBEUllfUlVOX0VSUk9SID0gJ0RSWV9SVU5fRVJST1InLFxuICBEUllfUExBTl9FUlJPUiA9ICdEUllfUExBTl9FUlJPUicsXG59XG5cbmV4cG9ydCBjb25zdCBlcnJvck1lc3NhZ2VzID0ge1xuICBbR2VuZXJhbEVycm9yQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SXTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG5cbiAgLy8gQUkgc2VydmljZSBlcnJvcnNcbiAgW0dlbmVyYWxFcnJvckNvZGVzLk5PX1JFTEVWQU5UX0RBVEFdOlxuICAgICdJIGNhbuKAmXQgZmluZCB0aGUgZXhhY3QgZGF0YSB5b3XigJlyZSBsb29raW5nIGZvciwgYnV0IGZlZWwgZnJlZSB0byBhc2sgYWJvdXQgb3RoZXIgYXZhaWxhYmxlIHRvcGljcy4nLFxuICBbR2VuZXJhbEVycm9yQ29kZXMuTk9fUkVMRVZBTlRfU1FMXTpcbiAgICBcIkNvdWxkIHlvdSBwbGVhc2UgcHJvdmlkZSBtb3JlIGRldGFpbHMgb3Igc3BlY2lmeSB0aGUgaW5mb3JtYXRpb24geW91J3JlIHNlZWtpbmc/XCIsXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5OT19DSEFSVF06XG4gICAgJ1RoZSBjaGFydCBjb3VsZG7igJl0IGJlIGdlbmVyYXRlZCB0aGlzIHRpbWUuIFBsZWFzZSB0cnkgcmVnZW5lcmF0aW5nIHRoZSBjaGFydCBvciByZXBocmFzaW5nIHlvdXIgcXVlc3Rpb24gZm9yIGJldHRlciByZXN1bHRzLicsXG5cbiAgLy8gQ29ubmVjdG9yIGVycm9yc1xuICBbR2VuZXJhbEVycm9yQ29kZXMuQ09OTkVDVElPTl9FUlJPUl06ICdDYW4gbm90IGNvbm5lY3QgdG8gZGF0YSBzb3VyY2UnLFxuICAvLyBkdWNrZGJcbiAgW0dlbmVyYWxFcnJvckNvZGVzLklOSVRfU1FMX0VSUk9SXTpcbiAgICAnVGhlIGluaXRpYWxpemluZyBTUUwgc2VlbXMgdG8gYmUgaW52YWxpZCwgUGxlYXNlIGNoZWNrIHlvdXIgU1FMIGFuZCB0cnkgYWdhaW4uJyxcbiAgW0dlbmVyYWxFcnJvckNvZGVzLlNFU1NJT05fUFJPUFNfRVJST1JdOlxuICAgICdUaGUgc2Vzc2lvbiBwcm9wZXJ0aWVzIHNlZW0gdG8gYmUgaW52YWxpZCwgUGxlYXNlIGNoZWNrIHlvdXIgc2Vzc2lvbiBwcm9wZXJ0aWVzIGFuZCB0cnkgYWdhaW4uJyxcbiAgLy8gcG9zdGdyZXNcbiAgW0dlbmVyYWxFcnJvckNvZGVzLkNPTk5FQ1RJT05fUkVGVVNFRF06XG4gICAgJ0Nvbm5lY3Rpb24gcmVmdXNlZCBieSB0aGUgc2VydmVyLCBQbGVhc2UgY2hlY2sgeW91ciBjb25uZWN0aW9uIHNldHRpbmdzIGFuZCB0cnkgYWdhaW4uJyxcblxuICAvLyBpYmlzIHNlcnZpY2UgZXJyb3JzXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5JQklTX1NFUlZFUl9FUlJPUl06XG4gICAgJ0Vycm9yIG9jY3VycmVkIHdoaWxlIHF1ZXJ5aW5nIGliaXMgc2VydmVyLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG5cbiAgLy8gY2FsY3VsYXRlZCBmaWVsZCB2YWxpZGF0aW9uXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5EVVBMSUNBVEVEX0ZJRUxEX05BTUVdOiAnVGhpcyBmaWVsZCBuYW1lIGFscmVhZHkgZXhpc3RzJyxcbiAgW0dlbmVyYWxFcnJvckNvZGVzLklOVkFMSURfRVhQUkVTU0lPTl06XG4gICAgJ0ludmFsaWQgZXhwcmVzc2lvbiwgcGxlYXNlIGNoZWNrIHlvdXIgZXhwcmVzc2lvbiBhbmQgdHJ5IGFnYWluLicsXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5JTlZBTElEX0NBTENVTEFURURfRklFTERdOlxuICAgICdDYW4gbm90IGV4ZWN1dGUgYSBxdWVyeSB3aGVuIHVzaW5nIHRoaXMgY2FsY3VsYXRlZCBmaWVsZCcsXG5cbiAgLy8gd2hlbiBjcmVhdGVpbmcgdmlld3NcbiAgW0dlbmVyYWxFcnJvckNvZGVzLklOVkFMSURfVklFV19DUkVBVElPTl06ICdJbnZhbGlkIHZpZXcgY3JlYXRpb24nLFxuXG4gIC8vIGRyeSBydW4gZXJyb3JcbiAgW0dlbmVyYWxFcnJvckNvZGVzLkRSWV9SVU5fRVJST1JdOiAnRHJ5IHJ1biBzcWwgc3RhdGVtZW50IGVycm9yJyxcbiAgW0dlbmVyYWxFcnJvckNvZGVzLkRSWV9QTEFOX0VSUk9SXTogJ0RyeSBwbGFuIGVycm9yJyxcbn07XG5cbmV4cG9ydCBjb25zdCBzaG9ydE1lc3NhZ2VzID0ge1xuICBbR2VuZXJhbEVycm9yQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SXTogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5OT19SRUxFVkFOVF9EQVRBXTogJ1RyeSBhIGRpZmZlcmVudCBxdWVyeScsXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5OT19SRUxFVkFOVF9TUUxdOiAnQ2xhcmlmaWNhdGlvbiBuZWVkZWQnLFxuICBbR2VuZXJhbEVycm9yQ29kZXMuTk9fQ0hBUlRdOiAnQ2hhcnQgbm90IGF2YWlsYWJsZScsXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5DT05ORUNUSU9OX0VSUk9SXTogJ0ZhaWxlZCB0byBjb25uZWN0JyxcbiAgW0dlbmVyYWxFcnJvckNvZGVzLklCSVNfU0VSVkVSX0VSUk9SXTogJ0RhdGEgY29ubmVjdGlvbiBlcnJvcicsXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5JTklUX1NRTF9FUlJPUl06ICdJbnZhbGlkIGluaXRpYWxpemluZyBTUUwnLFxuICBbR2VuZXJhbEVycm9yQ29kZXMuU0VTU0lPTl9QUk9QU19FUlJPUl06ICdJbnZhbGlkIHNlc3Npb24gcHJvcGVydGllcycsXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5DT05ORUNUSU9OX1JFRlVTRURdOiAnQ29ubmVjdGlvbiByZWZ1c2VkJyxcbiAgW0dlbmVyYWxFcnJvckNvZGVzLkRVUExJQ0FURURfRklFTERfTkFNRV06ICdEdXBsaWNhdGVkIGZpZWxkIG5hbWUnLFxuICBbR2VuZXJhbEVycm9yQ29kZXMuSU5WQUxJRF9FWFBSRVNTSU9OXTogJ0ludmFsaWQgZXhwcmVzc2lvbicsXG4gIFtHZW5lcmFsRXJyb3JDb2Rlcy5JTlZBTElEX0NBTENVTEFURURfRklFTERdOiAnSW52YWxpZCBjYWxjdWxhdGVkIGZpZWxkJyxcbiAgW0dlbmVyYWxFcnJvckNvZGVzLklOVkFMSURfVklFV19DUkVBVElPTl06ICdJbnZhbGlkIHZpZXcgY3JlYXRpb24nLFxuICBbR2VuZXJhbEVycm9yQ29kZXMuRFJZX1JVTl9FUlJPUl06ICdEcnkgcnVuIHNxbCBzdGF0ZW1lbnQgZXJyb3InLFxuICBbR2VuZXJhbEVycm9yQ29kZXMuRFJZX1BMQU5fRVJST1JdOiAnRHJ5IHBsYW4gZXJyb3InLFxufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZSA9IChcbiAgY29kZT86IEdlbmVyYWxFcnJvckNvZGVzLFxuICBvcHRpb25zPzoge1xuICAgIGN1c3RvbU1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgb3JpZ2luYWxFcnJvcj86IEVycm9yO1xuICAgIHNlcnZpY2U/OiBXcmVuU2VydmljZTtcbiAgICBvdGhlcj86IGFueTtcbiAgfSxcbik6IEdyYXBoUUxFcnJvciA9PiB7XG4gIGNvbnN0IHsgY3VzdG9tTWVzc2FnZSwgb3JpZ2luYWxFcnJvciwgc2VydmljZSB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgLy8gRGVmYXVsdCB0byBJTlRFUk5BTF9TRVJWRVJfRVJST1IgaWYgbm8gY29kZSBpcyBwcm92aWRlZFxuICBjb2RlID0gY29kZSB8fCBHZW5lcmFsRXJyb3JDb2Rlcy5JTlRFUk5BTF9TRVJWRVJfRVJST1I7XG5cbiAgLy8gR2V0IHRoZSBlcnJvciBtZXNzYWdlIGJhc2VkIG9uIHRoZSBjb2RlXG4gIGNvbnN0IG1lc3NhZ2UgPVxuICAgIGN1c3RvbU1lc3NhZ2UgfHxcbiAgICBvcmlnaW5hbEVycm9yPy5tZXNzYWdlIHx8XG4gICAgZXJyb3JNZXNzYWdlc1tjb2RlXSB8fFxuICAgIGVycm9yTWVzc2FnZXNbR2VuZXJhbEVycm9yQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SXTtcblxuICAvLyBSZXR1cm4gdGhlIEdyYXBoUUxFcnJvclxuICBjb25zdCBlcnIgPSBuZXcgR3JhcGhRTEVycm9yKG1lc3NhZ2UsIHtcbiAgICBleHRlbnNpb25zOiB7XG4gICAgICBvcmlnaW5hbEVycm9yLFxuICAgICAgY29kZSxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBzZXJ2aWNlLFxuICAgICAgc2hvcnRNZXNzYWdlOlxuICAgICAgICBzaG9ydE1lc3NhZ2VzW2NvZGVdIHx8XG4gICAgICAgIHNob3J0TWVzc2FnZXNbR2VuZXJhbEVycm9yQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SXSxcbiAgICAgIG90aGVyOiBvcHRpb25zPy5vdGhlcixcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gZXJyO1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IGVycm9yIGhhbmRsZXIgZm9yIEFwb2xsbyBTZXJ2ZXJcbiAqIEZvciBlcnJvciBsaWtlIHRoaXM6XG4gKiBbR3JhcGhRTEVycm9yOiBjb25uZWN0IEVDT05OUkVGVVNFRCAxMjcuMC4wLjE6ODA4MF0ge1xuICogICBsb2NhdGlvbnM6IFsgeyBsaW5lOiAyLCBjb2x1bW46IDMgfSBdLFxuICogICBwYXRoOiBbICdwcmV2aWV3RGF0YScgXSxcbiAqICAgZXh0ZW5zaW9uczoge1xuICogICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICogICAgIGV4Y2VwdGlvbjoge1xuICogICAgICAgcG9ydDogODA4MCxcbiAqICAgICAgIGFkZHJlc3M6ICcxMjcuMC4wLjEnLFxuICogICAgICAgc3lzY2FsbDogJ2Nvbm5lY3QnLFxuICogICAgICAgY29kZTogJ0VDT05OUkVGVVNFRCcsXG4gKiAgICAgICBlcnJubzogLTYxLFxuICogICAgICAgbWVzc2FnZTogJ2Nvbm5lY3QgRUNPTk5SRUZVU0VEIDEyNy4wLjAuMTo4MDgwJyxcbiAqICAgICAgIHN0YWNrOiAnRXJyb3I6IGNvbm5lY3QgRUNPTk5SRUZVU0VEIDEyNy4wLjAuMTo4MDgwXFxuJyArXG4gKiAgICAgICAgICcgICAgYXQgVENQQ29ubmVjdFdyYXAuYWZ0ZXJDb25uZWN0IFthcyBvbmNvbXBsZXRlXSAobm9kZTpuZXQ6MTI3ODoxNiknLFxuICogICAgICAgbmFtZTogJ0Vycm9yJyxcbiAqICAgICAgIGNvbmZpZzogW09iamVjdF0sXG4gKiAgICAgICByZXF1ZXN0OiBbV3JpdGFibGVdLFxuICogICAgICAgc3RhY2t0cmFjZTogW0FycmF5XVxuICogICAgIH1cbiAqICAgfVxuICogfVxuICogaXQgd2lsbCBlYXNpbHkgY2F1c2UgYENvbnZlcnRpbmcgY2lyY3VsYXIgc3RydWN0dXJlIHRvIEpTT05gIGVycm9yLlxuICogVGh1cywgd2Ugb25seSBwaWNrIHJlcXVpcmVkIGZpZWxkcyB0byByZWZvcm1hdCB0aGUgZXJyb3IuXG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0QXBvbGxvRXJyb3JIYW5kbGVyID0gKGVycm9yOiBHcmFwaFFMRXJyb3IpID0+IHtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgR3JhcGhRTEVycm9yKSB7XG4gICAgY29uc3QgY29kZSA9IChlcnJvci5leHRlbnNpb25zPy5jb2RlIHx8XG4gICAgICBHZW5lcmFsRXJyb3JDb2Rlcy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpIGFzIEdlbmVyYWxFcnJvckNvZGVzO1xuICAgIHJldHVybiB7XG4gICAgICBsb2NhdGlvbnM6IGVycm9yLmxvY2F0aW9ucyxcbiAgICAgIHBhdGg6IGVycm9yLnBhdGgsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgZXh0ZW5zaW9uczoge1xuICAgICAgICBjb2RlLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzaG9ydE1lc3NhZ2U6IHNob3J0TWVzc2FnZXNbY29kZV0sXG4gICAgICAgIHN0YWNrdHJhY2U6IGVycm9yLmV4dGVuc2lvbnM/LmV4Y2VwdGlvbj8uc3RhY2t0cmFjZSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIFJldHVybiB0aGUgb3JpZ2luYWwgZXJyb3IgaWYgaXQncyBub3QgYSBHcmFwaFFMRXJyb3JcbiAgcmV0dXJuIGVycm9yO1xufTtcbiJdLCJuYW1lcyI6WyJHcmFwaFFMRXJyb3IiLCJHZW5lcmFsRXJyb3JDb2RlcyIsImVycm9yTWVzc2FnZXMiLCJzaG9ydE1lc3NhZ2VzIiwiY3JlYXRlIiwiY29kZSIsIm9wdGlvbnMiLCJjdXN0b21NZXNzYWdlIiwib3JpZ2luYWxFcnJvciIsInNlcnZpY2UiLCJtZXNzYWdlIiwiZXJyIiwiZXh0ZW5zaW9ucyIsInNob3J0TWVzc2FnZSIsIm90aGVyIiwiZGVmYXVsdEFwb2xsb0Vycm9ySGFuZGxlciIsImVycm9yIiwibG9jYXRpb25zIiwicGF0aCIsInN0YWNrdHJhY2UiLCJleGNlcHRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/error.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/helper.ts":
/*!*******************************************!*\
  !*** ./src/apollo/server/utils/helper.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertColumnType: () => (/* binding */ convertColumnType),\n/* harmony export */   parseJson: () => (/* binding */ parseJson)\n/* harmony export */ });\n/**\n * @function\n * @description Retrieve json without error\n */ const parseJson = (data)=>{\n    try {\n        return JSON.parse(data);\n    } catch (_e) {\n        return false;\n    }\n};\nconst convertColumnType = (parent)=>{\n    return parent.type.includes(\"STRUCT\") ? \"RECORD\" : parent.type;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9oZWxwZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7O0NBR0MsR0FDTSxNQUFNQSxZQUFZLENBQUNDO0lBQ3hCLElBQUk7UUFDRixPQUFPQyxLQUFLQyxLQUFLLENBQUNGO0lBQ3BCLEVBQUUsT0FBT0csSUFBSTtRQUNYLE9BQU87SUFDVDtBQUNGLEVBQUU7QUFFSyxNQUFNQyxvQkFBb0IsQ0FBQ0M7SUFDaEMsT0FBT0EsT0FBT0MsSUFBSSxDQUFDQyxRQUFRLENBQUMsWUFBWSxXQUFXRixPQUFPQyxJQUFJO0FBQ2hFLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvdXRpbHMvaGVscGVyLnRzPzg0ZDUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBkZXNjcmlwdGlvbiBSZXRyaWV2ZSBqc29uIHdpdGhvdXQgZXJyb3JcbiAqL1xuZXhwb3J0IGNvbnN0IHBhcnNlSnNvbiA9IChkYXRhKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7XG4gIH0gY2F0Y2ggKF9lKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY29udmVydENvbHVtblR5cGUgPSAocGFyZW50OiB7IHR5cGU6IHN0cmluZyB9KSA9PiB7XG4gIHJldHVybiBwYXJlbnQudHlwZS5pbmNsdWRlcygnU1RSVUNUJykgPyAnUkVDT1JEJyA6IHBhcmVudC50eXBlO1xufTtcbiJdLCJuYW1lcyI6WyJwYXJzZUpzb24iLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiX2UiLCJjb252ZXJ0Q29sdW1uVHlwZSIsInBhcmVudCIsInR5cGUiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/helper.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/index.ts":
/*!******************************************!*\
  !*** ./src/apollo/server/utils/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logger */ \"(api)/./src/apollo/server/utils/logger.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _logger__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _logger__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _encryptor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./encryptor */ \"(api)/./src/apollo/server/utils/encryptor.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _encryptor__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _encryptor__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _encode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./encode */ \"(api)/./src/apollo/server/utils/encode.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _encode__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _encode__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./string */ \"(api)/./src/apollo/server/utils/string.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _string__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _string__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _docker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./docker */ \"(api)/./src/apollo/server/utils/docker.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _docker__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _docker__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _model__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./model */ \"(api)/./src/apollo/server/utils/model.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _model__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _model__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _helper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./helper */ \"(api)/./src/apollo/server/utils/helper.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _helper__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _helper__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _regex__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./regex */ \"(api)/./src/apollo/server/utils/regex.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _regex__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _regex__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUI7QUFDRztBQUNIO0FBQ0E7QUFDQTtBQUNEO0FBQ0M7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9pbmRleC50cz9hYmZjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vbG9nZ2VyJztcbmV4cG9ydCAqIGZyb20gJy4vZW5jcnlwdG9yJztcbmV4cG9ydCAqIGZyb20gJy4vZW5jb2RlJztcbmV4cG9ydCAqIGZyb20gJy4vc3RyaW5nJztcbmV4cG9ydCAqIGZyb20gJy4vZG9ja2VyJztcbmV4cG9ydCAqIGZyb20gJy4vbW9kZWwnO1xuZXhwb3J0ICogZnJvbSAnLi9oZWxwZXInO1xuZXhwb3J0ICogZnJvbSAnLi9yZWdleCc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/index.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/knex.ts":
/*!*****************************************!*\
  !*** ./src/apollo/server/utils/knex.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bootstrapKnex: () => (/* binding */ bootstrapKnex)\n/* harmony export */ });\nconst bootstrapKnex = (options)=>{\n    if (options.dbType === \"pg\") {\n        const { pgUrl, debug } = options;\n        console.log(\"using pg\");\n        /* eslint-disable @typescript-eslint/no-var-requires */ return __webpack_require__(/*! knex */ \"knex\")({\n            client: \"pg\",\n            connection: pgUrl,\n            debug,\n            pool: {\n                min: 2,\n                max: 10\n            }\n        });\n    } else {\n        console.log(\"using sqlite\");\n        /* eslint-disable @typescript-eslint/no-var-requires */ return __webpack_require__(/*! knex */ \"knex\")({\n            client: \"better-sqlite3\",\n            connection: {\n                filename: options.sqliteFile\n            },\n            useNullAsDefault: true\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9rbmV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFPTyxNQUFNQSxnQkFBZ0IsQ0FBQ0M7SUFDNUIsSUFBSUEsUUFBUUMsTUFBTSxLQUFLLE1BQU07UUFDM0IsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLEtBQUssRUFBRSxHQUFHSDtRQUN6QkksUUFBUUMsR0FBRyxDQUFDO1FBQ1oscURBQXFELEdBQ3JELE9BQU9DLG1CQUFPQSxDQUFDLG9CQUFRO1lBQ3JCQyxRQUFRO1lBQ1JDLFlBQVlOO1lBQ1pDO1lBQ0FNLE1BQU07Z0JBQUVDLEtBQUs7Z0JBQUdDLEtBQUs7WUFBRztRQUMxQjtJQUNGLE9BQU87UUFDTFAsUUFBUUMsR0FBRyxDQUFDO1FBQ1oscURBQXFELEdBQ3JELE9BQU9DLG1CQUFPQSxDQUFDLG9CQUFRO1lBQ3JCQyxRQUFRO1lBQ1JDLFlBQVk7Z0JBQ1ZJLFVBQVVaLFFBQVFhLFVBQVU7WUFDOUI7WUFDQUMsa0JBQWtCO1FBQ3BCO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3V0aWxzL2tuZXgudHM/ZmU1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgS25leE9wdGlvbnMge1xuICBkYlR5cGU6IHN0cmluZztcbiAgcGdVcmw/OiBzdHJpbmc7XG4gIGRlYnVnPzogYm9vbGVhbjtcbiAgc3FsaXRlRmlsZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGJvb3RzdHJhcEtuZXggPSAob3B0aW9uczogS25leE9wdGlvbnMpID0+IHtcbiAgaWYgKG9wdGlvbnMuZGJUeXBlID09PSAncGcnKSB7XG4gICAgY29uc3QgeyBwZ1VybCwgZGVidWcgfSA9IG9wdGlvbnM7XG4gICAgY29uc29sZS5sb2coJ3VzaW5nIHBnJyk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlcyAqL1xuICAgIHJldHVybiByZXF1aXJlKCdrbmV4Jykoe1xuICAgICAgY2xpZW50OiAncGcnLFxuICAgICAgY29ubmVjdGlvbjogcGdVcmwsXG4gICAgICBkZWJ1ZyxcbiAgICAgIHBvb2w6IHsgbWluOiAyLCBtYXg6IDEwIH0sXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coJ3VzaW5nIHNxbGl0ZScpO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXMgKi9cbiAgICByZXR1cm4gcmVxdWlyZSgna25leCcpKHtcbiAgICAgIGNsaWVudDogJ2JldHRlci1zcWxpdGUzJyxcbiAgICAgIGNvbm5lY3Rpb246IHtcbiAgICAgICAgZmlsZW5hbWU6IG9wdGlvbnMuc3FsaXRlRmlsZSxcbiAgICAgIH0sXG4gICAgICB1c2VOdWxsQXNEZWZhdWx0OiB0cnVlLFxuICAgIH0pO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbImJvb3RzdHJhcEtuZXgiLCJvcHRpb25zIiwiZGJUeXBlIiwicGdVcmwiLCJkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJyZXF1aXJlIiwiY2xpZW50IiwiY29ubmVjdGlvbiIsInBvb2wiLCJtaW4iLCJtYXgiLCJmaWxlbmFtZSIsInNxbGl0ZUZpbGUiLCJ1c2VOdWxsQXNEZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/knex.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/logger.ts":
/*!*******************************************!*\
  !*** ./src/apollo/server/utils/logger.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLogger: () => (/* reexport safe */ log4js__WEBPACK_IMPORTED_MODULE_0__.getLogger)\n/* harmony export */ });\n/* harmony import */ var log4js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! log4js */ \"log4js\");\n/* harmony import */ var log4js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(log4js__WEBPACK_IMPORTED_MODULE_0__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9sb2dnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3V0aWxzL2xvZ2dlci50cz83MGExIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ2xvZzRqcyc7XG4iXSwibmFtZXMiOlsiZ2V0TG9nZ2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/logger.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/model.ts":
/*!******************************************!*\
  !*** ./src/apollo/server/utils/model.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findColumnsToUpdate: () => (/* binding */ findColumnsToUpdate),\n/* harmony export */   getPreviewColumnsStr: () => (/* binding */ getPreviewColumnsStr),\n/* harmony export */   handleNestedColumns: () => (/* binding */ handleNestedColumns),\n/* harmony export */   replaceInvalidReferenceName: () => (/* binding */ replaceInvalidReferenceName),\n/* harmony export */   transformInvalidColumnName: () => (/* binding */ transformInvalidColumnName),\n/* harmony export */   updateModelPrimaryKey: () => (/* binding */ updateModelPrimaryKey)\n/* harmony export */ });\n/* harmony import */ var _regex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex */ \"(api)/./src/apollo/server/utils/regex.ts\");\n\nfunction getPreviewColumnsStr(modelColumns) {\n    if (modelColumns.length === 0) return \"*\";\n    const columns = modelColumns.map((column)=>`\"${column.referenceName}\"`);\n    return columns.join(\",\");\n}\nfunction transformInvalidColumnName(columnName) {\n    let referenceName = (0,_regex__WEBPACK_IMPORTED_MODULE_0__.replaceAllowableSyntax)(columnName);\n    // If the reference name does not start with a letter, add a prefix\n    const startWithLetterRegex = /^[A-Za-z]/;\n    if (!startWithLetterRegex.test(referenceName)) {\n        referenceName = `col_${referenceName}`;\n    }\n    return referenceName;\n}\nfunction replaceInvalidReferenceName(referenceName) {\n    // replace dot with underscore\n    return referenceName.replace(/\\./g, \"_\");\n}\nfunction findColumnsToUpdate(columns, existingColumns, sourceTableColumns) {\n    const toDeleteColumnIds = existingColumns.map(({ id, sourceColumnName })=>{\n        const shouldKeep = columns.includes(sourceColumnName);\n        return shouldKeep ? undefined : id;\n    }).filter((id)=>id);\n    const existColumnNames = existingColumns.map(({ sourceColumnName })=>sourceColumnName);\n    const toCreateColumns = columns.filter((columnName)=>!existColumnNames.includes(columnName));\n    const toUpdateColumns = sourceTableColumns.reduce((acc, sourceColumn)=>{\n        const existingColumn = existingColumns.find((col)=>col.sourceColumnName === sourceColumn.name);\n        if (!existingColumn) return acc;\n        const columnName = columns.find((col)=>col === sourceColumn.name);\n        if (!columnName) return acc;\n        if (sourceColumn.type === existingColumn.type) return acc;\n        return [\n            ...acc,\n            {\n                id: existingColumn.id,\n                sourceColumnName: sourceColumn.name,\n                type: sourceColumn.type || \"string\"\n            }\n        ];\n    }, []);\n    return {\n        toDeleteColumnIds,\n        toCreateColumns,\n        toUpdateColumns\n    };\n}\nasync function updateModelPrimaryKey(repository, modelId, primaryKey) {\n    await repository.resetModelPrimaryKey(modelId);\n    if (primaryKey) {\n        await repository.setModelPrimaryKey(modelId, primaryKey);\n    }\n}\nfunction handleNestedColumns(column, parent) {\n    if (!column.nestedColumns) return [];\n    const nestedColumnValues = [];\n    for (const nestedColumn of column.nestedColumns){\n        const parentColumnPath = parent.columnPath || [\n            parent.sourceColumnName\n        ];\n        const name = nestedColumn.name.split(`${parent.sourceColumnName}.`)[1];\n        const columnPath = [\n            ...parentColumnPath,\n            name\n        ];\n        const nestedColumnValue = {\n            modelId: parent.modelId,\n            columnId: parent.columnId,\n            columnPath,\n            displayName: nestedColumn.name,\n            sourceColumnName: nestedColumn.name,\n            referenceName: columnPath.map(transformInvalidColumnName).join(\".\"),\n            type: nestedColumn.type || \"string\",\n            properties: nestedColumn.properties\n        };\n        nestedColumnValues.push(nestedColumnValue);\n        nestedColumnValues.push(...handleNestedColumns(nestedColumn, {\n            modelId: parent.modelId,\n            columnId: parent.columnId,\n            sourceColumnName: nestedColumn.name,\n            columnPath\n        }));\n    }\n    return nestedColumnValues;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T3ZCLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUN0RSxNQUFNNEIsYUFBYTtlQUFJRDtZQUFrQmI7U0FBSztRQUM5QyxNQUFNZ0Isb0JBQW9CO1lBQ3hCWixTQUFTSyxPQUFPTCxPQUFPO1lBQ3ZCYSxVQUFVUixPQUFPUSxRQUFRO1lBQ3pCSDtZQUNBSSxhQUFhTixhQUFhWixJQUFJO1lBQzlCZCxrQkFBa0IwQixhQUFhWixJQUFJO1lBQ25DM0IsZUFBZXlDLFdBQVczQyxHQUFHLENBQUNJLDRCQUE0QkQsSUFBSSxDQUFDO1lBQy9EMkIsTUFBTVcsYUFBYVgsSUFBSSxJQUFJO1lBQzNCa0IsWUFBWVAsYUFBYU8sVUFBVTtRQUNyQztRQUNBUixtQkFBbUJTLElBQUksQ0FBQ0o7UUFDeEJMLG1CQUFtQlMsSUFBSSxJQUNsQlosb0JBQW9CSSxjQUFjO1lBQ25DUixTQUFTSyxPQUFPTCxPQUFPO1lBQ3ZCYSxVQUFVUixPQUFPUSxRQUFRO1lBQ3pCL0Isa0JBQWtCMEIsYUFBYVosSUFBSTtZQUNuQ2M7UUFDRjtJQUVKO0lBQ0EsT0FBT0g7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9tb2RlbC50cz8wYjhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIElNb2RlbENvbHVtblJlcG9zaXRvcnksXG4gIE1vZGVsQ29sdW1uLFxuICBNb2RlbE5lc3RlZENvbHVtbixcbn0gZnJvbSAnQHNlcnZlci9yZXBvc2l0b3JpZXMnO1xuaW1wb3J0IHsgcmVwbGFjZUFsbG93YWJsZVN5bnRheCB9IGZyb20gJy4vcmVnZXgnO1xuaW1wb3J0IHsgQ29tcGFjdENvbHVtbiB9IGZyb20gJ0BzZXJ2ZXIvc2VydmljZXMvbWV0YWRhdGFTZXJ2aWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByZXZpZXdDb2x1bW5zU3RyKG1vZGVsQ29sdW1uczogTW9kZWxDb2x1bW5bXSkge1xuICBpZiAobW9kZWxDb2x1bW5zLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcqJztcbiAgY29uc3QgY29sdW1ucyA9IG1vZGVsQ29sdW1ucy5tYXAoKGNvbHVtbikgPT4gYFwiJHtjb2x1bW4ucmVmZXJlbmNlTmFtZX1cImApO1xuICByZXR1cm4gY29sdW1ucy5qb2luKCcsJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1JbnZhbGlkQ29sdW1uTmFtZShjb2x1bW5OYW1lOiBzdHJpbmcpIHtcbiAgbGV0IHJlZmVyZW5jZU5hbWUgPSByZXBsYWNlQWxsb3dhYmxlU3ludGF4KGNvbHVtbk5hbWUpO1xuICAvLyBJZiB0aGUgcmVmZXJlbmNlIG5hbWUgZG9lcyBub3Qgc3RhcnQgd2l0aCBhIGxldHRlciwgYWRkIGEgcHJlZml4XG4gIGNvbnN0IHN0YXJ0V2l0aExldHRlclJlZ2V4ID0gL15bQS1aYS16XS87XG4gIGlmICghc3RhcnRXaXRoTGV0dGVyUmVnZXgudGVzdChyZWZlcmVuY2VOYW1lKSkge1xuICAgIHJlZmVyZW5jZU5hbWUgPSBgY29sXyR7cmVmZXJlbmNlTmFtZX1gO1xuICB9XG4gIHJldHVybiByZWZlcmVuY2VOYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUludmFsaWRSZWZlcmVuY2VOYW1lKHJlZmVyZW5jZU5hbWU6IHN0cmluZykge1xuICAvLyByZXBsYWNlIGRvdCB3aXRoIHVuZGVyc2NvcmVcbiAgcmV0dXJuIHJlZmVyZW5jZU5hbWUucmVwbGFjZSgvXFwuL2csICdfJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQ29sdW1uc1RvVXBkYXRlKFxuICBjb2x1bW5zOiBzdHJpbmdbXSxcbiAgZXhpc3RpbmdDb2x1bW5zOiBNb2RlbENvbHVtbltdLFxuICBzb3VyY2VUYWJsZUNvbHVtbnM6IENvbXBhY3RDb2x1bW5bXSxcbik6IHtcbiAgdG9EZWxldGVDb2x1bW5JZHM6IG51bWJlcltdO1xuICB0b0NyZWF0ZUNvbHVtbnM6IHN0cmluZ1tdO1xuICB0b1VwZGF0ZUNvbHVtbnM6IEFycmF5PHtcbiAgICBpZDogbnVtYmVyO1xuICAgIHNvdXJjZUNvbHVtbk5hbWU6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG4gIH0+O1xufSB7XG4gIGNvbnN0IHRvRGVsZXRlQ29sdW1uSWRzID0gZXhpc3RpbmdDb2x1bW5zXG4gICAgLm1hcCgoeyBpZCwgc291cmNlQ29sdW1uTmFtZSB9KSA9PiB7XG4gICAgICBjb25zdCBzaG91bGRLZWVwID0gY29sdW1ucy5pbmNsdWRlcyhzb3VyY2VDb2x1bW5OYW1lKTtcbiAgICAgIHJldHVybiBzaG91bGRLZWVwID8gdW5kZWZpbmVkIDogaWQ7XG4gICAgfSlcbiAgICAuZmlsdGVyKChpZCkgPT4gaWQpO1xuICBjb25zdCBleGlzdENvbHVtbk5hbWVzID0gZXhpc3RpbmdDb2x1bW5zLm1hcChcbiAgICAoeyBzb3VyY2VDb2x1bW5OYW1lIH0pID0+IHNvdXJjZUNvbHVtbk5hbWUsXG4gICk7XG4gIGNvbnN0IHRvQ3JlYXRlQ29sdW1ucyA9IGNvbHVtbnMuZmlsdGVyKFxuICAgIChjb2x1bW5OYW1lKSA9PiAhZXhpc3RDb2x1bW5OYW1lcy5pbmNsdWRlcyhjb2x1bW5OYW1lKSxcbiAgKTtcblxuICBjb25zdCB0b1VwZGF0ZUNvbHVtbnMgPSBzb3VyY2VUYWJsZUNvbHVtbnMucmVkdWNlKChhY2MsIHNvdXJjZUNvbHVtbikgPT4ge1xuICAgIGNvbnN0IGV4aXN0aW5nQ29sdW1uID0gZXhpc3RpbmdDb2x1bW5zLmZpbmQoXG4gICAgICAoY29sKSA9PiBjb2wuc291cmNlQ29sdW1uTmFtZSA9PT0gc291cmNlQ29sdW1uLm5hbWUsXG4gICAgKTtcbiAgICBpZiAoIWV4aXN0aW5nQ29sdW1uKSByZXR1cm4gYWNjO1xuXG4gICAgY29uc3QgY29sdW1uTmFtZSA9IGNvbHVtbnMuZmluZCgoY29sKSA9PiBjb2wgPT09IHNvdXJjZUNvbHVtbi5uYW1lKTtcbiAgICBpZiAoIWNvbHVtbk5hbWUpIHJldHVybiBhY2M7XG5cbiAgICBpZiAoc291cmNlQ29sdW1uLnR5cGUgPT09IGV4aXN0aW5nQ29sdW1uLnR5cGUpIHJldHVybiBhY2M7XG5cbiAgICByZXR1cm4gW1xuICAgICAgLi4uYWNjLFxuICAgICAge1xuICAgICAgICBpZDogZXhpc3RpbmdDb2x1bW4uaWQsXG4gICAgICAgIHNvdXJjZUNvbHVtbk5hbWU6IHNvdXJjZUNvbHVtbi5uYW1lLFxuICAgICAgICB0eXBlOiBzb3VyY2VDb2x1bW4udHlwZSB8fCAnc3RyaW5nJyxcbiAgICAgIH0sXG4gICAgXTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgdG9EZWxldGVDb2x1bW5JZHMsXG4gICAgdG9DcmVhdGVDb2x1bW5zLFxuICAgIHRvVXBkYXRlQ29sdW1ucyxcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1vZGVsUHJpbWFyeUtleShcbiAgcmVwb3NpdG9yeTogSU1vZGVsQ29sdW1uUmVwb3NpdG9yeSxcbiAgbW9kZWxJZDogbnVtYmVyLFxuICBwcmltYXJ5S2V5OiBzdHJpbmcsXG4pIHtcbiAgYXdhaXQgcmVwb3NpdG9yeS5yZXNldE1vZGVsUHJpbWFyeUtleShtb2RlbElkKTtcbiAgaWYgKHByaW1hcnlLZXkpIHtcbiAgICBhd2FpdCByZXBvc2l0b3J5LnNldE1vZGVsUHJpbWFyeUtleShtb2RlbElkLCBwcmltYXJ5S2V5KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlTmVzdGVkQ29sdW1ucyhcbiAgY29sdW1uOiBDb21wYWN0Q29sdW1uLFxuICBwYXJlbnQ6IHtcbiAgICBtb2RlbElkOiBudW1iZXI7XG4gICAgY29sdW1uSWQ6IG51bWJlcjtcbiAgICBzb3VyY2VDb2x1bW5OYW1lOiBzdHJpbmc7XG4gICAgY29sdW1uUGF0aD86IHN0cmluZ1tdO1xuICB9LFxuKTogUGFydGlhbDxNb2RlbE5lc3RlZENvbHVtbj5bXSB7XG4gIGlmICghY29sdW1uLm5lc3RlZENvbHVtbnMpIHJldHVybiBbXTtcblxuICBjb25zdCBuZXN0ZWRDb2x1bW5WYWx1ZXMgPSBbXTtcbiAgZm9yIChjb25zdCBuZXN0ZWRDb2x1bW4gb2YgY29sdW1uLm5lc3RlZENvbHVtbnMpIHtcbiAgICBjb25zdCBwYXJlbnRDb2x1bW5QYXRoID0gKHBhcmVudCBhcyBQYXJ0aWFsPE1vZGVsTmVzdGVkQ29sdW1uPilcbiAgICAgIC5jb2x1bW5QYXRoIHx8IFtwYXJlbnQuc291cmNlQ29sdW1uTmFtZV07XG4gICAgY29uc3QgbmFtZSA9IG5lc3RlZENvbHVtbi5uYW1lLnNwbGl0KGAke3BhcmVudC5zb3VyY2VDb2x1bW5OYW1lfS5gKVsxXTtcbiAgICBjb25zdCBjb2x1bW5QYXRoID0gWy4uLnBhcmVudENvbHVtblBhdGgsIG5hbWVdO1xuICAgIGNvbnN0IG5lc3RlZENvbHVtblZhbHVlID0ge1xuICAgICAgbW9kZWxJZDogcGFyZW50Lm1vZGVsSWQsXG4gICAgICBjb2x1bW5JZDogcGFyZW50LmNvbHVtbklkLFxuICAgICAgY29sdW1uUGF0aCxcbiAgICAgIGRpc3BsYXlOYW1lOiBuZXN0ZWRDb2x1bW4ubmFtZSxcbiAgICAgIHNvdXJjZUNvbHVtbk5hbWU6IG5lc3RlZENvbHVtbi5uYW1lLFxuICAgICAgcmVmZXJlbmNlTmFtZTogY29sdW1uUGF0aC5tYXAodHJhbnNmb3JtSW52YWxpZENvbHVtbk5hbWUpLmpvaW4oJy4nKSxcbiAgICAgIHR5cGU6IG5lc3RlZENvbHVtbi50eXBlIHx8ICdzdHJpbmcnLFxuICAgICAgcHJvcGVydGllczogbmVzdGVkQ29sdW1uLnByb3BlcnRpZXMsXG4gICAgfSBhcyBQYXJ0aWFsPE1vZGVsTmVzdGVkQ29sdW1uPjtcbiAgICBuZXN0ZWRDb2x1bW5WYWx1ZXMucHVzaChuZXN0ZWRDb2x1bW5WYWx1ZSk7XG4gICAgbmVzdGVkQ29sdW1uVmFsdWVzLnB1c2goXG4gICAgICAuLi5oYW5kbGVOZXN0ZWRDb2x1bW5zKG5lc3RlZENvbHVtbiwge1xuICAgICAgICBtb2RlbElkOiBwYXJlbnQubW9kZWxJZCxcbiAgICAgICAgY29sdW1uSWQ6IHBhcmVudC5jb2x1bW5JZCxcbiAgICAgICAgc291cmNlQ29sdW1uTmFtZTogbmVzdGVkQ29sdW1uLm5hbWUsXG4gICAgICAgIGNvbHVtblBhdGgsXG4gICAgICB9KSxcbiAgICApO1xuICB9XG4gIHJldHVybiBuZXN0ZWRDb2x1bW5WYWx1ZXM7XG59XG4iXSwibmFtZXMiOlsicmVwbGFjZUFsbG93YWJsZVN5bnRheCIsImdldFByZXZpZXdDb2x1bW5zU3RyIiwibW9kZWxDb2x1bW5zIiwibGVuZ3RoIiwiY29sdW1ucyIsIm1hcCIsImNvbHVtbiIsInJlZmVyZW5jZU5hbWUiLCJqb2luIiwidHJhbnNmb3JtSW52YWxpZENvbHVtbk5hbWUiLCJjb2x1bW5OYW1lIiwic3RhcnRXaXRoTGV0dGVyUmVnZXgiLCJ0ZXN0IiwicmVwbGFjZUludmFsaWRSZWZlcmVuY2VOYW1lIiwicmVwbGFjZSIsImZpbmRDb2x1bW5zVG9VcGRhdGUiLCJleGlzdGluZ0NvbHVtbnMiLCJzb3VyY2VUYWJsZUNvbHVtbnMiLCJ0b0RlbGV0ZUNvbHVtbklkcyIsImlkIiwic291cmNlQ29sdW1uTmFtZSIsInNob3VsZEtlZXAiLCJpbmNsdWRlcyIsInVuZGVmaW5lZCIsImZpbHRlciIsImV4aXN0Q29sdW1uTmFtZXMiLCJ0b0NyZWF0ZUNvbHVtbnMiLCJ0b1VwZGF0ZUNvbHVtbnMiLCJyZWR1Y2UiLCJhY2MiLCJzb3VyY2VDb2x1bW4iLCJleGlzdGluZ0NvbHVtbiIsImZpbmQiLCJjb2wiLCJuYW1lIiwidHlwZSIsInVwZGF0ZU1vZGVsUHJpbWFyeUtleSIsInJlcG9zaXRvcnkiLCJtb2RlbElkIiwicHJpbWFyeUtleSIsInJlc2V0TW9kZWxQcmltYXJ5S2V5Iiwic2V0TW9kZWxQcmltYXJ5S2V5IiwiaGFuZGxlTmVzdGVkQ29sdW1ucyIsInBhcmVudCIsIm5lc3RlZENvbHVtbnMiLCJuZXN0ZWRDb2x1bW5WYWx1ZXMiLCJuZXN0ZWRDb2x1bW4iLCJwYXJlbnRDb2x1bW5QYXRoIiwiY29sdW1uUGF0aCIsInNwbGl0IiwibmVzdGVkQ29sdW1uVmFsdWUiLCJjb2x1bW5JZCIsImRpc3BsYXlOYW1lIiwicHJvcGVydGllcyIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/model.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/regex.ts":
/*!******************************************!*\
  !*** ./src/apollo/server/utils/regex.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   replaceAllowableSyntax: () => (/* binding */ replaceAllowableSyntax),\n/* harmony export */   validateDisplayName: () => (/* binding */ validateDisplayName)\n/* harmony export */ });\nfunction validateDisplayName(displayName) {\n    let message = null;\n    let valid = true;\n    const allowableSyntaxRegex = /^[A-Za-z0-9 !@#$%^&*()_+{}[\\],.'\"-]*$/;\n    const syntaxValid = allowableSyntaxRegex.test(displayName);\n    if (!syntaxValid) {\n        valid = false;\n        message = \"Only space & [  a-z, A-Z, 0-9, _, -, !@#$%^&*()-+{}[]'\\\".,  ] are allowed.\";\n    }\n    const startWithLetterRegex = /^[A-Za-z]/;\n    const startWithLetterValid = startWithLetterRegex.test(displayName);\n    if (!startWithLetterValid) {\n        valid = false;\n        message = \"Must start with a letter.\";\n    }\n    return {\n        valid,\n        message\n    };\n}\nfunction replaceAllowableSyntax(str) {\n    const replacedStr = str.replace(/[!@#$%^&*()+{}[\\]'\",. -]/g, \"_\");\n    return replacedStr;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9yZWdleC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUtPLFNBQVNBLG9CQUFvQkMsV0FBbUI7SUFDckQsSUFBSUMsVUFBVTtJQUNkLElBQUlDLFFBQVE7SUFFWixNQUFNQyx1QkFBdUI7SUFDN0IsTUFBTUMsY0FBY0QscUJBQXFCRSxJQUFJLENBQUNMO0lBQzlDLElBQUksQ0FBQ0ksYUFBYTtRQUNoQkYsUUFBUTtRQUNSRCxVQUNFO0lBQ0o7SUFDQSxNQUFNSyx1QkFBdUI7SUFDN0IsTUFBTUMsdUJBQXVCRCxxQkFBcUJELElBQUksQ0FBQ0w7SUFDdkQsSUFBSSxDQUFDTyxzQkFBc0I7UUFDekJMLFFBQVE7UUFDUkQsVUFBVTtJQUNaO0lBRUEsT0FBTztRQUNMQztRQUNBRDtJQUNGO0FBQ0Y7QUFFTyxTQUFTTyx1QkFBdUJDLEdBQVc7SUFDaEQsTUFBTUMsY0FBY0QsSUFBSUUsT0FBTyxDQUFDLDZCQUE2QjtJQUM3RCxPQUFPRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3Jlbi11aS8uL3NyYy9hcG9sbG8vc2VydmVyL3V0aWxzL3JlZ2V4LnRzP2IyMTAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgdmFsaWQ6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURpc3BsYXlOYW1lKGRpc3BsYXlOYW1lOiBzdHJpbmcpOiBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgbGV0IG1lc3NhZ2UgPSBudWxsO1xuICBsZXQgdmFsaWQgPSB0cnVlO1xuXG4gIGNvbnN0IGFsbG93YWJsZVN5bnRheFJlZ2V4ID0gL15bQS1aYS16MC05ICFAIyQlXiYqKClfK3t9W1xcXSwuJ1wiLV0qJC87XG4gIGNvbnN0IHN5bnRheFZhbGlkID0gYWxsb3dhYmxlU3ludGF4UmVnZXgudGVzdChkaXNwbGF5TmFtZSk7XG4gIGlmICghc3ludGF4VmFsaWQpIHtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICAgIG1lc3NhZ2UgPVxuICAgICAgJ09ubHkgc3BhY2UgJiBbICBhLXosIEEtWiwgMC05LCBfLCAtLCAhQCMkJV4mKigpLSt7fVtdXFwnXCIuLCAgXSBhcmUgYWxsb3dlZC4nO1xuICB9XG4gIGNvbnN0IHN0YXJ0V2l0aExldHRlclJlZ2V4ID0gL15bQS1aYS16XS87XG4gIGNvbnN0IHN0YXJ0V2l0aExldHRlclZhbGlkID0gc3RhcnRXaXRoTGV0dGVyUmVnZXgudGVzdChkaXNwbGF5TmFtZSk7XG4gIGlmICghc3RhcnRXaXRoTGV0dGVyVmFsaWQpIHtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICAgIG1lc3NhZ2UgPSAnTXVzdCBzdGFydCB3aXRoIGEgbGV0dGVyLic7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHZhbGlkLFxuICAgIG1lc3NhZ2UsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQWxsb3dhYmxlU3ludGF4KHN0cjogc3RyaW5nKSB7XG4gIGNvbnN0IHJlcGxhY2VkU3RyID0gc3RyLnJlcGxhY2UoL1shQCMkJV4mKigpK3t9W1xcXSdcIiwuIC1dL2csICdfJyk7XG4gIHJldHVybiByZXBsYWNlZFN0cjtcbn1cbiJdLCJuYW1lcyI6WyJ2YWxpZGF0ZURpc3BsYXlOYW1lIiwiZGlzcGxheU5hbWUiLCJtZXNzYWdlIiwidmFsaWQiLCJhbGxvd2FibGVTeW50YXhSZWdleCIsInN5bnRheFZhbGlkIiwidGVzdCIsInN0YXJ0V2l0aExldHRlclJlZ2V4Iiwic3RhcnRXaXRoTGV0dGVyVmFsaWQiLCJyZXBsYWNlQWxsb3dhYmxlU3ludGF4Iiwic3RyIiwicmVwbGFjZWRTdHIiLCJyZXBsYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/regex.ts\n");

/***/ }),

/***/ "(api)/./src/apollo/server/utils/string.ts":
/*!*******************************************!*\
  !*** ./src/apollo/server/utils/string.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   trim: () => (/* binding */ trim)\n/* harmony export */ });\nconst trim = (str)=>str.replace(/^\\s+|\\s+$/g, \"\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvYXBvbGxvL3NlcnZlci91dGlscy9zdHJpbmcudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLE9BQU8sQ0FBQ0MsTUFBZ0JBLElBQUlDLE9BQU8sQ0FBQyxjQUFjLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2Fwb2xsby9zZXJ2ZXIvdXRpbHMvc3RyaW5nLnRzPzE1ZjMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHRyaW0gPSAoc3RyOiBzdHJpbmcpID0+IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4iXSwibmFtZXMiOlsidHJpbSIsInN0ciIsInJlcGxhY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/apollo/server/utils/string.ts\n");

/***/ }),

/***/ "(api)/./src/common.ts":
/*!***********************!*\
  !*** ./src/common.ts ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   components: () => (/* binding */ components),\n/* harmony export */   initComponents: () => (/* binding */ initComponents),\n/* harmony export */   serverConfig: () => (/* binding */ serverConfig)\n/* harmony export */ });\n/* harmony import */ var _server_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @server/config */ \"(api)/./src/apollo/server/config.ts\");\n/* harmony import */ var _apollo_server_utils_knex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apollo/server/utils/knex */ \"(api)/./src/apollo/server/utils/knex.ts\");\n/* harmony import */ var _server_repositories__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server/repositories */ \"(api)/./src/apollo/server/repositories/index.ts\");\n/* harmony import */ var _server_adaptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @server/adaptors */ \"(api)/./src/apollo/server/adaptors/index.ts\");\n/* harmony import */ var _server_services__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @server/services */ \"(api)/./src/apollo/server/services/index.ts\");\n/* harmony import */ var _apollo_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./apollo/server/telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\n/* harmony import */ var _apollo_server_backgrounds__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./apollo/server/backgrounds */ \"(api)/./src/apollo/server/backgrounds/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_adaptors__WEBPACK_IMPORTED_MODULE_3__, _server_services__WEBPACK_IMPORTED_MODULE_4__, _apollo_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__, _apollo_server_backgrounds__WEBPACK_IMPORTED_MODULE_6__]);\n([_server_adaptors__WEBPACK_IMPORTED_MODULE_3__, _server_services__WEBPACK_IMPORTED_MODULE_4__, _apollo_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__, _apollo_server_backgrounds__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst serverConfig = (0,_server_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)();\nconst initComponents = ()=>{\n    const telemetry = new _apollo_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_5__.PostHogTelemetry();\n    const knex = (0,_apollo_server_utils_knex__WEBPACK_IMPORTED_MODULE_1__.bootstrapKnex)({\n        dbType: serverConfig.dbType,\n        pgUrl: serverConfig.pgUrl,\n        debug: serverConfig.debug,\n        sqliteFile: serverConfig.sqliteFile\n    });\n    // repositories\n    const projectRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.ProjectRepository(knex);\n    const deployLogRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.DeployLogRepository(knex);\n    const threadRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.ThreadRepository(knex);\n    const threadResponseRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.ThreadResponseRepository(knex);\n    const viewRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.ViewRepository(knex);\n    const modelRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.ModelRepository(knex);\n    const modelColumnRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.ModelColumnRepository(knex);\n    const modelNestedColumnRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.ModelNestedColumnRepository(knex);\n    const relationRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.RelationRepository(knex);\n    const schemaChangeRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.SchemaChangeRepository(knex);\n    const learningRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.LearningRepository(knex);\n    const dashboardRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.DashboardRepository(knex);\n    const dashboardItemRepository = new _server_repositories__WEBPACK_IMPORTED_MODULE_2__.DashboardItemRepository(knex);\n    // adaptors\n    const wrenEngineAdaptor = new _server_adaptors__WEBPACK_IMPORTED_MODULE_3__.WrenEngineAdaptor({\n        wrenEngineEndpoint: serverConfig.wrenEngineEndpoint\n    });\n    const wrenAIAdaptor = new _server_adaptors__WEBPACK_IMPORTED_MODULE_3__.WrenAIAdaptor({\n        wrenAIBaseEndpoint: serverConfig.wrenAIEndpoint\n    });\n    const ibisAdaptor = new _server_adaptors__WEBPACK_IMPORTED_MODULE_3__.IbisAdaptor({\n        ibisServerEndpoint: serverConfig.ibisServerEndpoint\n    });\n    // services\n    const metadataService = new _server_services__WEBPACK_IMPORTED_MODULE_4__.DataSourceMetadataService({\n        ibisAdaptor,\n        wrenEngineAdaptor\n    });\n    const queryService = new _server_services__WEBPACK_IMPORTED_MODULE_4__.QueryService({\n        ibisAdaptor,\n        wrenEngineAdaptor,\n        telemetry\n    });\n    const deployService = new _server_services__WEBPACK_IMPORTED_MODULE_4__.DeployService({\n        wrenAIAdaptor,\n        deployLogRepository,\n        telemetry\n    });\n    const mdlService = new _server_services__WEBPACK_IMPORTED_MODULE_4__.MDLService({\n        projectRepository,\n        modelRepository,\n        modelColumnRepository,\n        modelNestedColumnRepository,\n        relationRepository,\n        viewRepository\n    });\n    const projectService = new _server_services__WEBPACK_IMPORTED_MODULE_4__.ProjectService({\n        projectRepository,\n        metadataService,\n        mdlService,\n        wrenAIAdaptor,\n        telemetry\n    });\n    const askingService = new _server_services__WEBPACK_IMPORTED_MODULE_4__.AskingService({\n        telemetry,\n        wrenAIAdaptor,\n        deployService,\n        projectService,\n        viewRepository,\n        threadRepository,\n        threadResponseRepository,\n        queryService,\n        mdlService\n    });\n    const dashboardService = new _server_services__WEBPACK_IMPORTED_MODULE_4__.DashboardService({\n        projectService,\n        dashboardItemRepository,\n        dashboardRepository\n    });\n    // background trackers\n    const projectRecommendQuestionBackgroundTracker = new _apollo_server_backgrounds__WEBPACK_IMPORTED_MODULE_6__.ProjectRecommendQuestionBackgroundTracker({\n        telemetry,\n        wrenAIAdaptor,\n        projectRepository\n    });\n    const threadRecommendQuestionBackgroundTracker = new _apollo_server_backgrounds__WEBPACK_IMPORTED_MODULE_6__.ThreadRecommendQuestionBackgroundTracker({\n        telemetry,\n        wrenAIAdaptor,\n        threadRepository\n    });\n    return {\n        knex,\n        telemetry,\n        // repositories\n        projectRepository,\n        deployLogRepository,\n        threadRepository,\n        threadResponseRepository,\n        viewRepository,\n        modelRepository,\n        modelColumnRepository,\n        relationRepository,\n        schemaChangeRepository,\n        learningRepository,\n        modelNestedColumnRepository,\n        dashboardRepository,\n        dashboardItemRepository,\n        // adaptors\n        wrenEngineAdaptor,\n        wrenAIAdaptor,\n        ibisAdaptor,\n        // services\n        metadataService,\n        projectService,\n        queryService,\n        deployService,\n        askingService,\n        mdlService,\n        dashboardService,\n        // background trackers\n        projectRecommendQuestionBackgroundTracker,\n        threadRecommendQuestionBackgroundTracker\n    };\n};\n// singleton components\nconst components = initComponents();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FFO1FBQ0FDO1FBQ0FDO1FBQ0FIO1FBQ0FJO1FBQ0FDO1FBRUEsV0FBVztRQUNYQztRQUNBRTtRQUNBRztRQUVBLFdBQVc7UUFDWEU7UUFDQUk7UUFDQUg7UUFDQUM7UUFDQUc7UUFDQUY7UUFDQUc7UUFFQSxzQkFBc0I7UUFDdEJDO1FBQ0FDO0lBQ0Y7QUFDRixFQUFFO0FBRUYsdUJBQXVCO0FBQ2hCLE1BQU1DLGFBQWFwQyxpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cmVuLXVpLy4vc3JjL2NvbW1vbi50cz9iNzc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENvbmZpZyB9IGZyb20gJ0BzZXJ2ZXIvY29uZmlnJztcbmltcG9ydCB7IGJvb3RzdHJhcEtuZXggfSBmcm9tICcuL2Fwb2xsby9zZXJ2ZXIvdXRpbHMva25leCc7XG5pbXBvcnQge1xuICBQcm9qZWN0UmVwb3NpdG9yeSxcbiAgVmlld1JlcG9zaXRvcnksXG4gIERlcGxveUxvZ1JlcG9zaXRvcnksXG4gIFRocmVhZFJlcG9zaXRvcnksXG4gIFRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSxcbiAgTW9kZWxSZXBvc2l0b3J5LFxuICBNb2RlbENvbHVtblJlcG9zaXRvcnksXG4gIFJlbGF0aW9uUmVwb3NpdG9yeSxcbiAgU2NoZW1hQ2hhbmdlUmVwb3NpdG9yeSxcbiAgTW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5LFxuICBMZWFybmluZ1JlcG9zaXRvcnksXG4gIERhc2hib2FyZEl0ZW1SZXBvc2l0b3J5LFxuICBEYXNoYm9hcmRSZXBvc2l0b3J5LFxufSBmcm9tICdAc2VydmVyL3JlcG9zaXRvcmllcyc7XG5pbXBvcnQge1xuICBXcmVuRW5naW5lQWRhcHRvcixcbiAgV3JlbkFJQWRhcHRvcixcbiAgSWJpc0FkYXB0b3IsXG59IGZyb20gJ0BzZXJ2ZXIvYWRhcHRvcnMnO1xuaW1wb3J0IHtcbiAgRGF0YVNvdXJjZU1ldGFkYXRhU2VydmljZSxcbiAgUXVlcnlTZXJ2aWNlLFxuICBQcm9qZWN0U2VydmljZSxcbiAgRGVwbG95U2VydmljZSxcbiAgQXNraW5nU2VydmljZSxcbiAgTURMU2VydmljZSxcbiAgRGFzaGJvYXJkU2VydmljZSxcbn0gZnJvbSAnQHNlcnZlci9zZXJ2aWNlcyc7XG5pbXBvcnQgeyBQb3N0SG9nVGVsZW1ldHJ5IH0gZnJvbSAnLi9hcG9sbG8vc2VydmVyL3RlbGVtZXRyeS90ZWxlbWV0cnknO1xuaW1wb3J0IHtcbiAgUHJvamVjdFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIsXG4gIFRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIsXG59IGZyb20gJy4vYXBvbGxvL3NlcnZlci9iYWNrZ3JvdW5kcyc7XG5cbmV4cG9ydCBjb25zdCBzZXJ2ZXJDb25maWcgPSBnZXRDb25maWcoKTtcblxuZXhwb3J0IGNvbnN0IGluaXRDb21wb25lbnRzID0gKCkgPT4ge1xuICBjb25zdCB0ZWxlbWV0cnkgPSBuZXcgUG9zdEhvZ1RlbGVtZXRyeSgpO1xuICBjb25zdCBrbmV4ID0gYm9vdHN0cmFwS25leCh7XG4gICAgZGJUeXBlOiBzZXJ2ZXJDb25maWcuZGJUeXBlLFxuICAgIHBnVXJsOiBzZXJ2ZXJDb25maWcucGdVcmwsXG4gICAgZGVidWc6IHNlcnZlckNvbmZpZy5kZWJ1ZyxcbiAgICBzcWxpdGVGaWxlOiBzZXJ2ZXJDb25maWcuc3FsaXRlRmlsZSxcbiAgfSk7XG5cbiAgLy8gcmVwb3NpdG9yaWVzXG4gIGNvbnN0IHByb2plY3RSZXBvc2l0b3J5ID0gbmV3IFByb2plY3RSZXBvc2l0b3J5KGtuZXgpO1xuICBjb25zdCBkZXBsb3lMb2dSZXBvc2l0b3J5ID0gbmV3IERlcGxveUxvZ1JlcG9zaXRvcnkoa25leCk7XG4gIGNvbnN0IHRocmVhZFJlcG9zaXRvcnkgPSBuZXcgVGhyZWFkUmVwb3NpdG9yeShrbmV4KTtcbiAgY29uc3QgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5ID0gbmV3IFRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeShrbmV4KTtcbiAgY29uc3Qgdmlld1JlcG9zaXRvcnkgPSBuZXcgVmlld1JlcG9zaXRvcnkoa25leCk7XG4gIGNvbnN0IG1vZGVsUmVwb3NpdG9yeSA9IG5ldyBNb2RlbFJlcG9zaXRvcnkoa25leCk7XG4gIGNvbnN0IG1vZGVsQ29sdW1uUmVwb3NpdG9yeSA9IG5ldyBNb2RlbENvbHVtblJlcG9zaXRvcnkoa25leCk7XG4gIGNvbnN0IG1vZGVsTmVzdGVkQ29sdW1uUmVwb3NpdG9yeSA9IG5ldyBNb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnkoa25leCk7XG4gIGNvbnN0IHJlbGF0aW9uUmVwb3NpdG9yeSA9IG5ldyBSZWxhdGlvblJlcG9zaXRvcnkoa25leCk7XG4gIGNvbnN0IHNjaGVtYUNoYW5nZVJlcG9zaXRvcnkgPSBuZXcgU2NoZW1hQ2hhbmdlUmVwb3NpdG9yeShrbmV4KTtcbiAgY29uc3QgbGVhcm5pbmdSZXBvc2l0b3J5ID0gbmV3IExlYXJuaW5nUmVwb3NpdG9yeShrbmV4KTtcbiAgY29uc3QgZGFzaGJvYXJkUmVwb3NpdG9yeSA9IG5ldyBEYXNoYm9hcmRSZXBvc2l0b3J5KGtuZXgpO1xuICBjb25zdCBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeSA9IG5ldyBEYXNoYm9hcmRJdGVtUmVwb3NpdG9yeShrbmV4KTtcblxuICAvLyBhZGFwdG9yc1xuICBjb25zdCB3cmVuRW5naW5lQWRhcHRvciA9IG5ldyBXcmVuRW5naW5lQWRhcHRvcih7XG4gICAgd3JlbkVuZ2luZUVuZHBvaW50OiBzZXJ2ZXJDb25maWcud3JlbkVuZ2luZUVuZHBvaW50LFxuICB9KTtcbiAgY29uc3Qgd3JlbkFJQWRhcHRvciA9IG5ldyBXcmVuQUlBZGFwdG9yKHtcbiAgICB3cmVuQUlCYXNlRW5kcG9pbnQ6IHNlcnZlckNvbmZpZy53cmVuQUlFbmRwb2ludCxcbiAgfSk7XG4gIGNvbnN0IGliaXNBZGFwdG9yID0gbmV3IEliaXNBZGFwdG9yKHtcbiAgICBpYmlzU2VydmVyRW5kcG9pbnQ6IHNlcnZlckNvbmZpZy5pYmlzU2VydmVyRW5kcG9pbnQsXG4gIH0pO1xuXG4gIC8vIHNlcnZpY2VzXG4gIGNvbnN0IG1ldGFkYXRhU2VydmljZSA9IG5ldyBEYXRhU291cmNlTWV0YWRhdGFTZXJ2aWNlKHtcbiAgICBpYmlzQWRhcHRvcixcbiAgICB3cmVuRW5naW5lQWRhcHRvcixcbiAgfSk7XG4gIGNvbnN0IHF1ZXJ5U2VydmljZSA9IG5ldyBRdWVyeVNlcnZpY2Uoe1xuICAgIGliaXNBZGFwdG9yLFxuICAgIHdyZW5FbmdpbmVBZGFwdG9yLFxuICAgIHRlbGVtZXRyeSxcbiAgfSk7XG4gIGNvbnN0IGRlcGxveVNlcnZpY2UgPSBuZXcgRGVwbG95U2VydmljZSh7XG4gICAgd3JlbkFJQWRhcHRvcixcbiAgICBkZXBsb3lMb2dSZXBvc2l0b3J5LFxuICAgIHRlbGVtZXRyeSxcbiAgfSk7XG4gIGNvbnN0IG1kbFNlcnZpY2UgPSBuZXcgTURMU2VydmljZSh7XG4gICAgcHJvamVjdFJlcG9zaXRvcnksXG4gICAgbW9kZWxSZXBvc2l0b3J5LFxuICAgIG1vZGVsQ29sdW1uUmVwb3NpdG9yeSxcbiAgICBtb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnksXG4gICAgcmVsYXRpb25SZXBvc2l0b3J5LFxuICAgIHZpZXdSZXBvc2l0b3J5LFxuICB9KTtcbiAgY29uc3QgcHJvamVjdFNlcnZpY2UgPSBuZXcgUHJvamVjdFNlcnZpY2Uoe1xuICAgIHByb2plY3RSZXBvc2l0b3J5LFxuICAgIG1ldGFkYXRhU2VydmljZSxcbiAgICBtZGxTZXJ2aWNlLFxuICAgIHdyZW5BSUFkYXB0b3IsXG4gICAgdGVsZW1ldHJ5LFxuICB9KTtcbiAgY29uc3QgYXNraW5nU2VydmljZSA9IG5ldyBBc2tpbmdTZXJ2aWNlKHtcbiAgICB0ZWxlbWV0cnksXG4gICAgd3JlbkFJQWRhcHRvcixcbiAgICBkZXBsb3lTZXJ2aWNlLFxuICAgIHByb2plY3RTZXJ2aWNlLFxuICAgIHZpZXdSZXBvc2l0b3J5LFxuICAgIHRocmVhZFJlcG9zaXRvcnksXG4gICAgdGhyZWFkUmVzcG9uc2VSZXBvc2l0b3J5LFxuICAgIHF1ZXJ5U2VydmljZSxcbiAgICBtZGxTZXJ2aWNlLFxuICB9KTtcbiAgY29uc3QgZGFzaGJvYXJkU2VydmljZSA9IG5ldyBEYXNoYm9hcmRTZXJ2aWNlKHtcbiAgICBwcm9qZWN0U2VydmljZSxcbiAgICBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeSxcbiAgICBkYXNoYm9hcmRSZXBvc2l0b3J5LFxuICB9KTtcblxuICAvLyBiYWNrZ3JvdW5kIHRyYWNrZXJzXG4gIGNvbnN0IHByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyID1cbiAgICBuZXcgUHJvamVjdFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIoe1xuICAgICAgdGVsZW1ldHJ5LFxuICAgICAgd3JlbkFJQWRhcHRvcixcbiAgICAgIHByb2plY3RSZXBvc2l0b3J5LFxuICAgIH0pO1xuICBjb25zdCB0aHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyID1cbiAgICBuZXcgVGhyZWFkUmVjb21tZW5kUXVlc3Rpb25CYWNrZ3JvdW5kVHJhY2tlcih7XG4gICAgICB0ZWxlbWV0cnksXG4gICAgICB3cmVuQUlBZGFwdG9yLFxuICAgICAgdGhyZWFkUmVwb3NpdG9yeSxcbiAgICB9KTtcblxuICByZXR1cm4ge1xuICAgIGtuZXgsXG4gICAgdGVsZW1ldHJ5LFxuXG4gICAgLy8gcmVwb3NpdG9yaWVzXG4gICAgcHJvamVjdFJlcG9zaXRvcnksXG4gICAgZGVwbG95TG9nUmVwb3NpdG9yeSxcbiAgICB0aHJlYWRSZXBvc2l0b3J5LFxuICAgIHRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSxcbiAgICB2aWV3UmVwb3NpdG9yeSxcbiAgICBtb2RlbFJlcG9zaXRvcnksXG4gICAgbW9kZWxDb2x1bW5SZXBvc2l0b3J5LFxuICAgIHJlbGF0aW9uUmVwb3NpdG9yeSxcbiAgICBzY2hlbWFDaGFuZ2VSZXBvc2l0b3J5LFxuICAgIGxlYXJuaW5nUmVwb3NpdG9yeSxcbiAgICBtb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnksXG4gICAgZGFzaGJvYXJkUmVwb3NpdG9yeSxcbiAgICBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeSxcblxuICAgIC8vIGFkYXB0b3JzXG4gICAgd3JlbkVuZ2luZUFkYXB0b3IsXG4gICAgd3JlbkFJQWRhcHRvcixcbiAgICBpYmlzQWRhcHRvcixcblxuICAgIC8vIHNlcnZpY2VzXG4gICAgbWV0YWRhdGFTZXJ2aWNlLFxuICAgIHByb2plY3RTZXJ2aWNlLFxuICAgIHF1ZXJ5U2VydmljZSxcbiAgICBkZXBsb3lTZXJ2aWNlLFxuICAgIGFza2luZ1NlcnZpY2UsXG4gICAgbWRsU2VydmljZSxcbiAgICBkYXNoYm9hcmRTZXJ2aWNlLFxuXG4gICAgLy8gYmFja2dyb3VuZCB0cmFja2Vyc1xuICAgIHByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLFxuICAgIHRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIsXG4gIH07XG59O1xuXG4vLyBzaW5nbGV0b24gY29tcG9uZW50c1xuZXhwb3J0IGNvbnN0IGNvbXBvbmVudHMgPSBpbml0Q29tcG9uZW50cygpO1xuIl0sIm5hbWVzIjpbImdldENvbmZpZyIsImJvb3RzdHJhcEtuZXgiLCJQcm9qZWN0UmVwb3NpdG9yeSIsIlZpZXdSZXBvc2l0b3J5IiwiRGVwbG95TG9nUmVwb3NpdG9yeSIsIlRocmVhZFJlcG9zaXRvcnkiLCJUaHJlYWRSZXNwb25zZVJlcG9zaXRvcnkiLCJNb2RlbFJlcG9zaXRvcnkiLCJNb2RlbENvbHVtblJlcG9zaXRvcnkiLCJSZWxhdGlvblJlcG9zaXRvcnkiLCJTY2hlbWFDaGFuZ2VSZXBvc2l0b3J5IiwiTW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5IiwiTGVhcm5pbmdSZXBvc2l0b3J5IiwiRGFzaGJvYXJkSXRlbVJlcG9zaXRvcnkiLCJEYXNoYm9hcmRSZXBvc2l0b3J5IiwiV3JlbkVuZ2luZUFkYXB0b3IiLCJXcmVuQUlBZGFwdG9yIiwiSWJpc0FkYXB0b3IiLCJEYXRhU291cmNlTWV0YWRhdGFTZXJ2aWNlIiwiUXVlcnlTZXJ2aWNlIiwiUHJvamVjdFNlcnZpY2UiLCJEZXBsb3lTZXJ2aWNlIiwiQXNraW5nU2VydmljZSIsIk1ETFNlcnZpY2UiLCJEYXNoYm9hcmRTZXJ2aWNlIiwiUG9zdEhvZ1RlbGVtZXRyeSIsIlByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyIiwiVGhyZWFkUmVjb21tZW5kUXVlc3Rpb25CYWNrZ3JvdW5kVHJhY2tlciIsInNlcnZlckNvbmZpZyIsImluaXRDb21wb25lbnRzIiwidGVsZW1ldHJ5Iiwia25leCIsImRiVHlwZSIsInBnVXJsIiwiZGVidWciLCJzcWxpdGVGaWxlIiwicHJvamVjdFJlcG9zaXRvcnkiLCJkZXBsb3lMb2dSZXBvc2l0b3J5IiwidGhyZWFkUmVwb3NpdG9yeSIsInRocmVhZFJlc3BvbnNlUmVwb3NpdG9yeSIsInZpZXdSZXBvc2l0b3J5IiwibW9kZWxSZXBvc2l0b3J5IiwibW9kZWxDb2x1bW5SZXBvc2l0b3J5IiwibW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5IiwicmVsYXRpb25SZXBvc2l0b3J5Iiwic2NoZW1hQ2hhbmdlUmVwb3NpdG9yeSIsImxlYXJuaW5nUmVwb3NpdG9yeSIsImRhc2hib2FyZFJlcG9zaXRvcnkiLCJkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeSIsIndyZW5FbmdpbmVBZGFwdG9yIiwid3JlbkVuZ2luZUVuZHBvaW50Iiwid3JlbkFJQWRhcHRvciIsIndyZW5BSUJhc2VFbmRwb2ludCIsIndyZW5BSUVuZHBvaW50IiwiaWJpc0FkYXB0b3IiLCJpYmlzU2VydmVyRW5kcG9pbnQiLCJtZXRhZGF0YVNlcnZpY2UiLCJxdWVyeVNlcnZpY2UiLCJkZXBsb3lTZXJ2aWNlIiwibWRsU2VydmljZSIsInByb2plY3RTZXJ2aWNlIiwiYXNraW5nU2VydmljZSIsImRhc2hib2FyZFNlcnZpY2UiLCJwcm9qZWN0UmVjb21tZW5kUXVlc3Rpb25CYWNrZ3JvdW5kVHJhY2tlciIsInRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIiLCJjb21wb25lbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/common.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/graphql.ts":
/*!**********************************!*\
  !*** ./src/pages/api/graphql.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var micro_cors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! micro-cors */ \"micro-cors\");\n/* harmony import */ var micro_cors__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(micro_cors__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var apollo_server_micro__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! apollo-server-micro */ \"apollo-server-micro\");\n/* harmony import */ var apollo_server_micro__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(apollo_server_micro__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @server */ \"(api)/./src/apollo/server/index.ts\");\n/* harmony import */ var _server_resolvers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @server/resolvers */ \"(api)/./src/apollo/server/resolvers.ts\");\n/* harmony import */ var _server_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @server/utils */ \"(api)/./src/apollo/server/utils/index.ts\");\n/* harmony import */ var _server_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @server/config */ \"(api)/./src/apollo/server/config.ts\");\n/* harmony import */ var _server_services_modelService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @server/services/modelService */ \"(api)/./src/apollo/server/services/modelService.ts\");\n/* harmony import */ var _apollo_server_utils_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/apollo/server/utils/error */ \"(api)/./src/apollo/server/utils/error.ts\");\n/* harmony import */ var _apollo_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/apollo/server/telemetry/telemetry */ \"(api)/./src/apollo/server/telemetry/telemetry.ts\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/common */ \"(api)/./src/common.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server__WEBPACK_IMPORTED_MODULE_2__, _server_resolvers__WEBPACK_IMPORTED_MODULE_3__, _server_services_modelService__WEBPACK_IMPORTED_MODULE_6__, _apollo_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_8__, _common__WEBPACK_IMPORTED_MODULE_9__]);\n([_server__WEBPACK_IMPORTED_MODULE_2__, _server_resolvers__WEBPACK_IMPORTED_MODULE_3__, _server_services_modelService__WEBPACK_IMPORTED_MODULE_6__, _apollo_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_8__, _common__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\nconst serverConfig = (0,_server_config__WEBPACK_IMPORTED_MODULE_5__.getConfig)();\nconst logger = (0,_server_utils__WEBPACK_IMPORTED_MODULE_4__.getLogger)(\"APOLLO\");\nlogger.level = \"debug\";\nconst cors = micro_cors__WEBPACK_IMPORTED_MODULE_0___default()();\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nconst bootstrapServer = async ()=>{\n    const { telemetry, // repositories\n    projectRepository, modelRepository, modelColumnRepository, relationRepository, deployLogRepository, viewRepository, schemaChangeRepository, learningRepository, modelNestedColumnRepository, dashboardRepository, dashboardItemRepository, // adaptors\n    wrenEngineAdaptor, ibisAdaptor, wrenAIAdaptor, // services\n    projectService, queryService, askingService, deployService, mdlService, dashboardService, // background trackers\n    projectRecommendQuestionBackgroundTracker, threadRecommendQuestionBackgroundTracker } = _common__WEBPACK_IMPORTED_MODULE_9__.components;\n    const modelService = new _server_services_modelService__WEBPACK_IMPORTED_MODULE_6__.ModelService({\n        projectService,\n        modelRepository,\n        modelColumnRepository,\n        relationRepository,\n        viewRepository,\n        mdlService,\n        wrenEngineAdaptor,\n        queryService\n    });\n    // initialize services\n    await Promise.all([\n        askingService.initialize(),\n        projectRecommendQuestionBackgroundTracker.initialize(),\n        threadRecommendQuestionBackgroundTracker.initialize()\n    ]);\n    const apolloServer = new apollo_server_micro__WEBPACK_IMPORTED_MODULE_1__.ApolloServer({\n        typeDefs: _server__WEBPACK_IMPORTED_MODULE_2__.typeDefs,\n        resolvers: _server_resolvers__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n        formatError: (error)=>{\n            // stop print error stacktrace of dry run error\n            if (error.extensions?.code === _apollo_server_utils_error__WEBPACK_IMPORTED_MODULE_7__.GeneralErrorCodes.DRY_RUN_ERROR) {\n                return (0,_apollo_server_utils_error__WEBPACK_IMPORTED_MODULE_7__.defaultApolloErrorHandler)(error);\n            }\n            // print error stacktrace of graphql error\n            const stacktrace = error.extensions?.exception?.stacktrace;\n            if (stacktrace) {\n                logger.error(stacktrace.join(\"\\n\"));\n            }\n            // print original error stacktrace\n            const originalError = error.extensions?.originalError;\n            if (originalError) {\n                logger.error(`== original error ==`);\n                // error may not have stack, so print error message if stack is not available\n                logger.error(originalError.stack || originalError.message);\n            }\n            // telemetry: capture internal server error\n            if (error.extensions?.code === _apollo_server_utils_error__WEBPACK_IMPORTED_MODULE_7__.GeneralErrorCodes.INTERNAL_SERVER_ERROR) {\n                telemetry.sendEvent(_apollo_server_telemetry_telemetry__WEBPACK_IMPORTED_MODULE_8__.TelemetryEvent.GRAPHQL_ERROR, {\n                    originalErrorStack: originalError?.stack,\n                    originalErrorMessage: originalError?.message,\n                    errorMessage: error.message\n                }, error.extensions?.service, false);\n            }\n            return (0,_apollo_server_utils_error__WEBPACK_IMPORTED_MODULE_7__.defaultApolloErrorHandler)(error);\n        },\n        introspection: \"development\" !== \"production\",\n        context: ()=>({\n                config: serverConfig,\n                telemetry,\n                // adaptor\n                wrenEngineAdaptor,\n                ibisServerAdaptor: ibisAdaptor,\n                wrenAIAdaptor,\n                // services\n                projectService,\n                modelService,\n                mdlService,\n                deployService,\n                askingService,\n                queryService,\n                dashboardService,\n                // repository\n                projectRepository,\n                modelRepository,\n                modelColumnRepository,\n                modelNestedColumnRepository,\n                relationRepository,\n                viewRepository,\n                deployRepository: deployLogRepository,\n                schemaChangeRepository,\n                learningRepository,\n                dashboardRepository,\n                dashboardItemRepository,\n                // background trackers\n                projectRecommendQuestionBackgroundTracker,\n                threadRecommendQuestionBackgroundTracker\n            })\n    });\n    await apolloServer.start();\n    return apolloServer;\n};\nconst startServer = bootstrapServer();\nconst handler = async (req, res)=>{\n    const apolloServer = await startServer;\n    await apolloServer.createHandler({\n        path: \"/api/graphql\"\n    })(req, res);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (cors((req, res)=>req.method === \"OPTIONS\" ? res.status(200).end() : handler(req, res)));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RDtnQkFDQUQ7Z0JBQ0FJO2dCQUNBLGFBQWE7Z0JBQ2JuQjtnQkFDQUM7Z0JBQ0FDO2dCQUNBTTtnQkFDQUw7Z0JBQ0FFO2dCQUNBNEMsa0JBQWtCN0M7Z0JBQ2xCRTtnQkFDQUM7Z0JBQ0FFO2dCQUNBQztnQkFFQSxzQkFBc0I7Z0JBQ3RCVTtnQkFDQUM7WUFDRjtJQUNGO0lBQ0EsTUFBTUssYUFBYXdCLEtBQUs7SUFDeEIsT0FBT3hCO0FBQ1Q7QUFFQSxNQUFNeUIsY0FBY3JEO0FBRXBCLE1BQU1zRCxVQUFVLE9BQU9DLEtBQXFCQztJQUMxQyxNQUFNNUIsZUFBZSxNQUFNeUI7SUFDM0IsTUFBTXpCLGFBQWE2QixhQUFhLENBQUM7UUFDL0JDLE1BQU07SUFDUixHQUFHSCxLQUFLQztBQUNWO0FBRUEsaUVBQWU1RCxLQUFLLENBQUMyRCxLQUFxQkMsTUFDeENELElBQUlJLE1BQU0sS0FBSyxZQUFZSCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsR0FBRyxLQUFLUCxRQUFRQyxLQUFLQyxLQUFBQSxFQUNoRSIsInNvdXJjZXMiOlsid2VicGFjazovL3dyZW4tdWkvLi9zcmMvcGFnZXMvYXBpL2dyYXBocWwudHM/ZjA3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWljcm9Db3JzIGZyb20gJ21pY3JvLWNvcnMnO1xuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSwgUGFnZUNvbmZpZyB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgQXBvbGxvU2VydmVyIH0gZnJvbSAnYXBvbGxvLXNlcnZlci1taWNybyc7XG5pbXBvcnQgeyB0eXBlRGVmcyB9IGZyb20gJ0BzZXJ2ZXInO1xuaW1wb3J0IHJlc29sdmVycyBmcm9tICdAc2VydmVyL3Jlc29sdmVycyc7XG5pbXBvcnQgeyBJQ29udGV4dCB9IGZyb20gJ0BzZXJ2ZXIvdHlwZXMnO1xuaW1wb3J0IHsgR3JhcGhRTEVycm9yIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2VydmVyL3V0aWxzJztcbmltcG9ydCB7IGdldENvbmZpZyB9IGZyb20gJ0BzZXJ2ZXIvY29uZmlnJztcbmltcG9ydCB7IE1vZGVsU2VydmljZSB9IGZyb20gJ0BzZXJ2ZXIvc2VydmljZXMvbW9kZWxTZXJ2aWNlJztcbmltcG9ydCB7XG4gIGRlZmF1bHRBcG9sbG9FcnJvckhhbmRsZXIsXG4gIEdlbmVyYWxFcnJvckNvZGVzLFxufSBmcm9tICdAL2Fwb2xsby9zZXJ2ZXIvdXRpbHMvZXJyb3InO1xuaW1wb3J0IHsgVGVsZW1ldHJ5RXZlbnQgfSBmcm9tICdAL2Fwb2xsby9zZXJ2ZXIvdGVsZW1ldHJ5L3RlbGVtZXRyeSc7XG5pbXBvcnQgeyBjb21wb25lbnRzIH0gZnJvbSAnQC9jb21tb24nO1xuXG5jb25zdCBzZXJ2ZXJDb25maWcgPSBnZXRDb25maWcoKTtcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignQVBPTExPJyk7XG5sb2dnZXIubGV2ZWwgPSAnZGVidWcnO1xuXG5jb25zdCBjb3JzID0gbWljcm9Db3JzKCk7XG5cbmV4cG9ydCBjb25zdCBjb25maWc6IFBhZ2VDb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxuICB9LFxufTtcblxuY29uc3QgYm9vdHN0cmFwU2VydmVyID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB7XG4gICAgdGVsZW1ldHJ5LFxuXG4gICAgLy8gcmVwb3NpdG9yaWVzXG4gICAgcHJvamVjdFJlcG9zaXRvcnksXG4gICAgbW9kZWxSZXBvc2l0b3J5LFxuICAgIG1vZGVsQ29sdW1uUmVwb3NpdG9yeSxcbiAgICByZWxhdGlvblJlcG9zaXRvcnksXG4gICAgZGVwbG95TG9nUmVwb3NpdG9yeSxcbiAgICB2aWV3UmVwb3NpdG9yeSxcbiAgICBzY2hlbWFDaGFuZ2VSZXBvc2l0b3J5LFxuICAgIGxlYXJuaW5nUmVwb3NpdG9yeSxcbiAgICBtb2RlbE5lc3RlZENvbHVtblJlcG9zaXRvcnksXG4gICAgZGFzaGJvYXJkUmVwb3NpdG9yeSxcbiAgICBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeSxcblxuICAgIC8vIGFkYXB0b3JzXG4gICAgd3JlbkVuZ2luZUFkYXB0b3IsXG4gICAgaWJpc0FkYXB0b3IsXG4gICAgd3JlbkFJQWRhcHRvcixcblxuICAgIC8vIHNlcnZpY2VzXG4gICAgcHJvamVjdFNlcnZpY2UsXG4gICAgcXVlcnlTZXJ2aWNlLFxuICAgIGFza2luZ1NlcnZpY2UsXG4gICAgZGVwbG95U2VydmljZSxcbiAgICBtZGxTZXJ2aWNlLFxuICAgIGRhc2hib2FyZFNlcnZpY2UsXG5cbiAgICAvLyBiYWNrZ3JvdW5kIHRyYWNrZXJzXG4gICAgcHJvamVjdFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIsXG4gICAgdGhyZWFkUmVjb21tZW5kUXVlc3Rpb25CYWNrZ3JvdW5kVHJhY2tlcixcbiAgfSA9IGNvbXBvbmVudHM7XG5cbiAgY29uc3QgbW9kZWxTZXJ2aWNlID0gbmV3IE1vZGVsU2VydmljZSh7XG4gICAgcHJvamVjdFNlcnZpY2UsXG4gICAgbW9kZWxSZXBvc2l0b3J5LFxuICAgIG1vZGVsQ29sdW1uUmVwb3NpdG9yeSxcbiAgICByZWxhdGlvblJlcG9zaXRvcnksXG4gICAgdmlld1JlcG9zaXRvcnksXG4gICAgbWRsU2VydmljZSxcbiAgICB3cmVuRW5naW5lQWRhcHRvcixcbiAgICBxdWVyeVNlcnZpY2UsXG4gIH0pO1xuXG4gIC8vIGluaXRpYWxpemUgc2VydmljZXNcbiAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGFza2luZ1NlcnZpY2UuaW5pdGlhbGl6ZSgpLFxuICAgIHByb2plY3RSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLmluaXRpYWxpemUoKSxcbiAgICB0aHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLmluaXRpYWxpemUoKSxcbiAgXSk7XG5cbiAgY29uc3QgYXBvbGxvU2VydmVyOiBBcG9sbG9TZXJ2ZXIgPSBuZXcgQXBvbGxvU2VydmVyKHtcbiAgICB0eXBlRGVmcyxcbiAgICByZXNvbHZlcnMsXG4gICAgZm9ybWF0RXJyb3I6IChlcnJvcjogR3JhcGhRTEVycm9yKSA9PiB7XG4gICAgICAvLyBzdG9wIHByaW50IGVycm9yIHN0YWNrdHJhY2Ugb2YgZHJ5IHJ1biBlcnJvclxuICAgICAgaWYgKGVycm9yLmV4dGVuc2lvbnM/LmNvZGUgPT09IEdlbmVyYWxFcnJvckNvZGVzLkRSWV9SVU5fRVJST1IpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRBcG9sbG9FcnJvckhhbmRsZXIoZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICAvLyBwcmludCBlcnJvciBzdGFja3RyYWNlIG9mIGdyYXBocWwgZXJyb3JcbiAgICAgIGNvbnN0IHN0YWNrdHJhY2UgPSBlcnJvci5leHRlbnNpb25zPy5leGNlcHRpb24/LnN0YWNrdHJhY2U7XG4gICAgICBpZiAoc3RhY2t0cmFjZSkge1xuICAgICAgICBsb2dnZXIuZXJyb3Ioc3RhY2t0cmFjZS5qb2luKCdcXG4nKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHByaW50IG9yaWdpbmFsIGVycm9yIHN0YWNrdHJhY2VcbiAgICAgIGNvbnN0IG9yaWdpbmFsRXJyb3IgPSBlcnJvci5leHRlbnNpb25zPy5vcmlnaW5hbEVycm9yIGFzIEVycm9yO1xuICAgICAgaWYgKG9yaWdpbmFsRXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGA9PSBvcmlnaW5hbCBlcnJvciA9PWApO1xuICAgICAgICAvLyBlcnJvciBtYXkgbm90IGhhdmUgc3RhY2ssIHNvIHByaW50IGVycm9yIG1lc3NhZ2UgaWYgc3RhY2sgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICBsb2dnZXIuZXJyb3Iob3JpZ2luYWxFcnJvci5zdGFjayB8fCBvcmlnaW5hbEVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuXG4gICAgICAvLyB0ZWxlbWV0cnk6IGNhcHR1cmUgaW50ZXJuYWwgc2VydmVyIGVycm9yXG4gICAgICBpZiAoZXJyb3IuZXh0ZW5zaW9ucz8uY29kZSA9PT0gR2VuZXJhbEVycm9yQ29kZXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SKSB7XG4gICAgICAgIHRlbGVtZXRyeS5zZW5kRXZlbnQoXG4gICAgICAgICAgVGVsZW1ldHJ5RXZlbnQuR1JBUEhRTF9FUlJPUixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBvcmlnaW5hbEVycm9yU3RhY2s6IG9yaWdpbmFsRXJyb3I/LnN0YWNrLFxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IG9yaWdpbmFsRXJyb3I/Lm1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvci5leHRlbnNpb25zPy5zZXJ2aWNlLFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmF1bHRBcG9sbG9FcnJvckhhbmRsZXIoZXJyb3IpO1xuICAgIH0sXG4gICAgaW50cm9zcGVjdGlvbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyxcbiAgICBjb250ZXh0OiAoKTogSUNvbnRleHQgPT4gKHtcbiAgICAgIGNvbmZpZzogc2VydmVyQ29uZmlnLFxuICAgICAgdGVsZW1ldHJ5LFxuICAgICAgLy8gYWRhcHRvclxuICAgICAgd3JlbkVuZ2luZUFkYXB0b3IsXG4gICAgICBpYmlzU2VydmVyQWRhcHRvcjogaWJpc0FkYXB0b3IsXG4gICAgICB3cmVuQUlBZGFwdG9yLFxuICAgICAgLy8gc2VydmljZXNcbiAgICAgIHByb2plY3RTZXJ2aWNlLFxuICAgICAgbW9kZWxTZXJ2aWNlLFxuICAgICAgbWRsU2VydmljZSxcbiAgICAgIGRlcGxveVNlcnZpY2UsXG4gICAgICBhc2tpbmdTZXJ2aWNlLFxuICAgICAgcXVlcnlTZXJ2aWNlLFxuICAgICAgZGFzaGJvYXJkU2VydmljZSxcbiAgICAgIC8vIHJlcG9zaXRvcnlcbiAgICAgIHByb2plY3RSZXBvc2l0b3J5LFxuICAgICAgbW9kZWxSZXBvc2l0b3J5LFxuICAgICAgbW9kZWxDb2x1bW5SZXBvc2l0b3J5LFxuICAgICAgbW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5LFxuICAgICAgcmVsYXRpb25SZXBvc2l0b3J5LFxuICAgICAgdmlld1JlcG9zaXRvcnksXG4gICAgICBkZXBsb3lSZXBvc2l0b3J5OiBkZXBsb3lMb2dSZXBvc2l0b3J5LFxuICAgICAgc2NoZW1hQ2hhbmdlUmVwb3NpdG9yeSxcbiAgICAgIGxlYXJuaW5nUmVwb3NpdG9yeSxcbiAgICAgIGRhc2hib2FyZFJlcG9zaXRvcnksXG4gICAgICBkYXNoYm9hcmRJdGVtUmVwb3NpdG9yeSxcblxuICAgICAgLy8gYmFja2dyb3VuZCB0cmFja2Vyc1xuICAgICAgcHJvamVjdFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIsXG4gICAgICB0aHJlYWRSZWNvbW1lbmRRdWVzdGlvbkJhY2tncm91bmRUcmFja2VyLFxuICAgIH0pLFxuICB9KTtcbiAgYXdhaXQgYXBvbGxvU2VydmVyLnN0YXJ0KCk7XG4gIHJldHVybiBhcG9sbG9TZXJ2ZXI7XG59O1xuXG5jb25zdCBzdGFydFNlcnZlciA9IGJvb3RzdHJhcFNlcnZlcigpO1xuXG5jb25zdCBoYW5kbGVyID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XG4gIGNvbnN0IGFwb2xsb1NlcnZlciA9IGF3YWl0IHN0YXJ0U2VydmVyO1xuICBhd2FpdCBhcG9sbG9TZXJ2ZXIuY3JlYXRlSGFuZGxlcih7XG4gICAgcGF0aDogJy9hcGkvZ3JhcGhxbCcsXG4gIH0pKHJlcSwgcmVzKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvcnMoKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PlxuICByZXEubWV0aG9kID09PSAnT1BUSU9OUycgPyByZXMuc3RhdHVzKDIwMCkuZW5kKCkgOiBoYW5kbGVyKHJlcSwgcmVzKSxcbik7XG4iXSwibmFtZXMiOlsibWljcm9Db3JzIiwiQXBvbGxvU2VydmVyIiwidHlwZURlZnMiLCJyZXNvbHZlcnMiLCJnZXRMb2dnZXIiLCJnZXRDb25maWciLCJNb2RlbFNlcnZpY2UiLCJkZWZhdWx0QXBvbGxvRXJyb3JIYW5kbGVyIiwiR2VuZXJhbEVycm9yQ29kZXMiLCJUZWxlbWV0cnlFdmVudCIsImNvbXBvbmVudHMiLCJzZXJ2ZXJDb25maWciLCJsb2dnZXIiLCJsZXZlbCIsImNvcnMiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiYm9vdHN0cmFwU2VydmVyIiwidGVsZW1ldHJ5IiwicHJvamVjdFJlcG9zaXRvcnkiLCJtb2RlbFJlcG9zaXRvcnkiLCJtb2RlbENvbHVtblJlcG9zaXRvcnkiLCJyZWxhdGlvblJlcG9zaXRvcnkiLCJkZXBsb3lMb2dSZXBvc2l0b3J5Iiwidmlld1JlcG9zaXRvcnkiLCJzY2hlbWFDaGFuZ2VSZXBvc2l0b3J5IiwibGVhcm5pbmdSZXBvc2l0b3J5IiwibW9kZWxOZXN0ZWRDb2x1bW5SZXBvc2l0b3J5IiwiZGFzaGJvYXJkUmVwb3NpdG9yeSIsImRhc2hib2FyZEl0ZW1SZXBvc2l0b3J5Iiwid3JlbkVuZ2luZUFkYXB0b3IiLCJpYmlzQWRhcHRvciIsIndyZW5BSUFkYXB0b3IiLCJwcm9qZWN0U2VydmljZSIsInF1ZXJ5U2VydmljZSIsImFza2luZ1NlcnZpY2UiLCJkZXBsb3lTZXJ2aWNlIiwibWRsU2VydmljZSIsImRhc2hib2FyZFNlcnZpY2UiLCJwcm9qZWN0UmVjb21tZW5kUXVlc3Rpb25CYWNrZ3JvdW5kVHJhY2tlciIsInRocmVhZFJlY29tbWVuZFF1ZXN0aW9uQmFja2dyb3VuZFRyYWNrZXIiLCJtb2RlbFNlcnZpY2UiLCJQcm9taXNlIiwiYWxsIiwiaW5pdGlhbGl6ZSIsImFwb2xsb1NlcnZlciIsImZvcm1hdEVycm9yIiwiZXJyb3IiLCJleHRlbnNpb25zIiwiY29kZSIsIkRSWV9SVU5fRVJST1IiLCJzdGFja3RyYWNlIiwiZXhjZXB0aW9uIiwiam9pbiIsIm9yaWdpbmFsRXJyb3IiLCJzdGFjayIsIm1lc3NhZ2UiLCJJTlRFUk5BTF9TRVJWRVJfRVJST1IiLCJzZW5kRXZlbnQiLCJHUkFQSFFMX0VSUk9SIiwib3JpZ2luYWxFcnJvclN0YWNrIiwib3JpZ2luYWxFcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJzZXJ2aWNlIiwiaW50cm9zcGVjdGlvbiIsInByb2Nlc3MiLCJjb250ZXh0IiwiaWJpc1NlcnZlckFkYXB0b3IiLCJkZXBsb3lSZXBvc2l0b3J5Iiwic3RhcnQiLCJzdGFydFNlcnZlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJjcmVhdGVIYW5kbGVyIiwicGF0aCIsIm1ldGhvZCIsInN0YXR1cyIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/graphql.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgraphql&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cgraphql.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();